import{V as Vn,W as Hn,X as Wn,P as B,w as S,K as H,Q as O,y as k,z as E,Y as se,R as W,S as G,D as Z,A as ee,E as re,J as F,N as R,B as K}from"./index.js";import"@sveltejs/kit/internal";import"./exports.js";import"./utils.js";import"clsx";import"@sveltejs/kit/internal/server";import{j as xe,i as st,k as Gn,l as qn,n as Yn,m as Xn,o as Jn,p as Zn,r as Qn,h as bt,D as Ae,e as ms,q as yn,d as $n,s as vs,v as eo,w as to,x as Ee,y as so}from"./chat.svelte.js";import{f as Us,F as q,A as Ls,P as Bs,T as js,g as ae,h as kt,i as _t,j as de,k as _,E as ut,H as lt,C as ke,n as ue,w as te,o as Te,p as we,q as ct,r as _e,u as no,v as oo,x as X,y as ro,z as ne,O as Pt,D as Me,G as pe,J as Nt,K as y,L as Ks,M as ht,N as xt,Q as Mt,R as Tt,U as io,V as uo,W as lo,Y as co,Z as ho,_ as ao,$ as po,a0 as Ft,a1 as bs,a2 as fo,a3 as go,a4 as mo,a5 as vo,a6 as It,a7 as bo,a8 as Be,a9 as xs,aa as xo,ab as wo,ac as Co,ad as So,c as J,ae as Vs,af as Hs,ag as Ws,X as Se,ah as Ke,I as V,ai as ze,B as Y,aj as Dt,ak as Et,al as Gs,am as qs,an as Ys,ao as Xs,ap as Fe,aq as ko,e as Js,ar as Ne,as as _o}from"./MarkdownContent.svelte_svelte_type_style_lang.js";import"pdfjs-dist";import{c as ie,s as le,a as Ce,m as Po,b as No,d as Mo,e as To,f as Fo,g as Ze,h as Zs,i as Ue,j as wt,k as ws,l as Pe,M as mt,u as Io,n as Do,S as Cs,o as ge,P as Eo,p as Ao,q as Oo,r as Ro}from"./settings.svelte.js";import"style-to-object";import{isTabbable as At,tabbable as zo,isFocusable as Uo,focusable as Lo}from"tabbable";import{m as Qs,n as je,F as Bo,o as jo,q as Ko,G as Vo,r as ys,t as Ho,u as Wo,D as Go,a as qo,b as $s,v as me,L as nt,c as Yo,T as ot,C as en,R as Ve,w as Xo,x as Jo,A as He,f as We,g as Ge,i as qe,j as Ye,l as Xe,S as Zo,e as tn,k as sn,y as vt,h as Qo}from"./ConfirmationDialog.js";import{R as Ot,L as $e,T as at,S as yo}from"./ServerErrorSplash.js";import{o as Rt}from"./events.js";const $o=[];function et(t,e=!1){return tt(t,new Map,"",$o)}function tt(t,e,s,n,o=null){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Vn(t)){var r=Array(t.length);e.set(t,r),o!==null&&e.set(o,r);for(var u=0;u<t.length;u+=1){var h=t[u];u in t&&(r[u]=tt(h,e,s,n))}return r}if(Hn(t)===Wn){r={},e.set(t,r),o!==null&&e.set(o,r);for(var c in t)r[c]=tt(t[c],e,s,n);return r}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return tt(t.toJSON(),e,s,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function oe(t){return Object.values(Us).some(e=>e.mimeTypes.includes(t))?q.IMAGE:Object.values(Ls).some(e=>e.mimeTypes.includes(t))?q.AUDIO:Object.values(Bs).some(e=>e.mimeTypes.includes(t))?q.PDF:Object.values(js).some(e=>e.mimeTypes.includes(t))?q.TEXT:null}function er(t){const e=t.toLowerCase().substring(t.lastIndexOf("."));for(const[s,n]of Object.entries(Us))if(n.extensions.includes(e))return`${q.IMAGE}:${s}`;for(const[s,n]of Object.entries(Ls))if(n.extensions.includes(e))return`${q.AUDIO}:${s}`;for(const[s,n]of Object.entries(Bs))if(n.extensions.includes(e))return`${q.PDF}:${s}`;for(const[s,n]of Object.entries(js))if(n.extensions.includes(e))return`${q.TEXT}:${s}`;return null}function tr(t,e){return e&&oe(e)?!0:er(t)!==null}function sr(t){return window.getComputedStyle(t).getPropertyValue("direction")}function nr(t="ltr",e="horizontal"){return{horizontal:t==="rtl"?_t:kt,vertical:de}[e]}function or(t="ltr",e="horizontal"){return{horizontal:t==="rtl"?kt:_t,vertical:ae}[e]}function rr(t="ltr",e="horizontal"){return["ltr","rtl"].includes(t)||(t="ltr"),["horizontal","vertical"].includes(e)||(e="horizontal"),{nextKey:nr(t,e),prevKey:or(t,e)}}class ir{#e;#t=_(null);constructor(e){this.#e=e}getCandidateNodes(){return[]}focusFirstCandidate(){const e=this.getCandidateNodes();e.length&&e[0]?.focus()}handleKeydown(e,s,n=!1){const o=this.#e.rootNode.current;if(!o||!e)return;const i=this.getCandidateNodes();if(!i.length)return;const r=i.indexOf(e),u=sr(o),{nextKey:h,prevKey:c}=rr(u,this.#e.orientation.current),l=this.#e.loop.current,a={[h]:r+1,[c]:r-1,[lt]:0,[ut]:i.length-1};if(n){const f=h===de?kt:de,p=c===ae?_t:ae;a[f]=r+1,a[p]=r-1}let d=a[s.key];if(d===void 0)return;s.preventDefault(),d<0&&l?d=i.length-1:d===i.length&&l&&(d=0);const m=i[d];if(m)return m.focus(),this.#t.current=m.id,this.#e.onCandidateFocus?.(m),m}getTabIndex(e){const s=this.getCandidateNodes(),n=this.#t.current!==null;return e&&!n&&s[0]===e?(this.#t.current=e.id,0):e?.id===this.#t.current?0:-1}setCurrentTabStopId(e){this.#t.current=e}}function ur(t,e,s=!0){if(!(t.length===0||e<0||e>=t.length))return t.length===1&&e===0?t[0]:e===t.length-1?s?t[0]:void 0:t[e+1]}function lr(t,e,s=!0){if(!(t.length===0||e<0||e>=t.length))return t.length===1&&e===0?t[0]:e===0?s?t[t.length-1]:void 0:t[e-1]}function cr(t,e,s,n=!0){if(t.length===0||e<0||e>=t.length)return;let o=e+s;return n?o=(o%t.length+t.length)%t.length:o=Math.max(0,Math.min(o,t.length-1)),t[o]}function hr(t,e,s,n=!0){if(t.length===0||e<0||e>=t.length)return;let o=e-s;return n?o=(o%t.length+t.length)%t.length:o=Math.max(0,Math.min(o,t.length-1)),t[o]}function zt(t,e,s){const n=e.toLowerCase();if(n.endsWith(" ")){const a=n.slice(0,-1);if(t.filter(p=>p.toLowerCase().startsWith(a)).length<=1)return zt(t,a,s);const m=s?.toLowerCase();if(m&&m.startsWith(a)&&m.charAt(a.length)===" "&&e.trim()===a)return s;const f=t.filter(p=>p.toLowerCase().startsWith(n));if(f.length>0){const p=s?t.indexOf(s):-1;return Ss(f,Math.max(p,0)).find(g=>g!==s)||s}}const i=e.length>1&&Array.from(e).every(a=>a===e[0])?e[0]:e,r=i.toLowerCase(),u=s?t.indexOf(s):-1;let h=Ss(t,Math.max(u,0));i.length===1&&(h=h.filter(a=>a!==s));const l=h.find(a=>a?.toLowerCase().startsWith(r));return l!==s?l:void 0}function Ss(t,e){return t.map((s,n)=>t[(e+n)%t.length])}const ar=ct({component:"checkbox",parts:["root","group","group-label","input"]}),dr=new ke("Checkbox.Group"),nn=new ke("Checkbox.Root");class Ut{static create(e,s=null){return nn.set(new Ut(e,s))}opts;group;#e=B(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return this.#e()}set trueName(e){return this.#e(e)}#t=B(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current);get trueRequired(){return this.#t()}set trueRequired(e){return this.#t(e)}#s=B(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current);get trueDisabled(){return this.#s()}set trueDisabled(e){return this.#s(e)}attachment;constructor(e,s){this.opts=e,this.group=s,this.attachment=ue(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),te.pre([()=>et(this.group?.opts.value.current),()=>this.opts.value.current],([n,o])=>{!n||!o||(this.opts.checked.current=n.includes(o))}),te.pre(()=>this.opts.checked.current,n=>{this.group&&(n?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.opts.disabled.current||(e.key===Te&&e.preventDefault(),e.key===we&&(e.preventDefault(),this.#n()))}#n(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){this.opts.disabled.current||this.#n()}#o=B(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return this.#o()}set snippetProps(e){return this.#o(e)}#r=B(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":oo(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":no(this.trueRequired),"data-disabled":_e(this.trueDisabled),"data-state":pr(this.opts.checked.current,this.opts.indeterminate.current),[ar.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return this.#r()}set props(e){return this.#r(e)}}class Lt{static create(){return new Lt(nn.get())}root;#e=B(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return this.#e()}set trueChecked(e){return this.#e(e)}#t=B(()=>!!this.root.trueName);get shouldRender(){return this.#t()}set shouldRender(e){return this.#t(e)}constructor(e){this.root=e}#s=B(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current}));get props(){return this.#s()}set props(e){return this.#s(e)}}function pr(t,e){return e?"indeterminate":t?"checked":"unchecked"}function on(t,e){S();let{value:s=void 0,$$slots:n,$$events:o,...i}=e;const r=X(i,{"aria-hidden":"true",tabindex:-1,style:ro});r.type==="checkbox"?(t.out.push("<!--[-->"),t.out.push(`<input${H({...r,value:s},null)}/>`)):(t.out.push("<!--[!-->"),t.out.push(`<input${H({value:s,...r},null)}/>`)),t.out.push("<!--]-->"),O(e,{value:s}),k()}function fr(t,e){S();const s=Lt.create();s.shouldRender?(t.out.push("<!--[-->"),on(t,E([s.props]))):t.out.push("<!--[!-->"),t.out.push("<!--]-->"),k()}function gr(t,e){S();const s=se(t);let{checked:n=!1,ref:o=null,onCheckedChange:i,children:r,disabled:u=!1,required:h=!1,name:c=void 0,value:l="on",id:a=ne(s),indeterminate:d=!1,onIndeterminateChange:m,child:f,type:p="button",$$slots:v,$$events:T,...g}=e;const x=dr.getOr(null);x&&l&&(x.opts.value.current.includes(l)?n=!0:n=!1),te.pre(()=>l,()=>{x&&l&&(x.opts.value.current.includes(l)?n=!0:n=!1)});const C=Ut.create({checked:_.with(()=>n,b=>{n=b,i?.(b)}),disabled:_.with(()=>u??!1),required:_.with(()=>h),name:_.with(()=>c),value:_.with(()=>l),id:_.with(()=>a),ref:_.with(()=>o,b=>o=b),indeterminate:_.with(()=>d,b=>{d=b,m?.(b)}),type:_.with(()=>p)},x),w=X({...g},C.props);f?(t.out.push("<!--[-->"),f(t,{props:w,...C.snippetProps}),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<button${H({...w},null)}>`),r?.(t,C.snippetProps),t.out.push("<!----></button>")),t.out.push("<!--]--> "),fr(t),t.out.push("<!---->"),O(e,{checked:n,ref:o,indeterminate:d}),k()}const Bt=ct({component:"collapsible",parts:["root","content","trigger"]}),jt=new ke("Collapsible.Root");class Kt{static create(e){return jt.set(new Kt(e))}opts;attachment;contentNode=null;contentId=void 0;constructor(e){this.opts=e,this.toggleOpen=this.toggleOpen.bind(this),this.attachment=ue(this.opts.ref),new Pt({ref:_.with(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}toggleOpen(){this.opts.open.current=!this.opts.open.current}#e=B(()=>({id:this.opts.id.current,"data-state":Me(this.opts.open.current),"data-disabled":_e(this.opts.disabled.current),[Bt.root]:"",...this.attachment}));get props(){return this.#e()}set props(e){return this.#e(e)}}class Vt{static create(e){return new Vt(e,jt.get())}opts;root;attachment;#e=B(()=>this.opts.forceMount.current||this.root.opts.open.current);get present(){return this.#e()}set present(e){return this.#e(e)}#t;#s=!1;#n=0;#o=0;constructor(e,s){this.opts=e,this.root=s,this.#s=s.opts.open.current,this.root.contentId=this.opts.id.current,this.attachment=ue(this.opts.ref,n=>this.root.contentNode=n),te.pre(()=>this.opts.id.current,n=>{this.root.contentId=n}),te([()=>this.opts.ref.current,()=>this.present],([n])=>{n&&pe(()=>{if(!this.opts.ref.current)return;this.#t=this.#t||{transitionDuration:n.style.transitionDuration,animationName:n.style.animationName},n.style.transitionDuration="0s",n.style.animationName="none";const o=n.getBoundingClientRect();if(this.#o=o.height,this.#n=o.width,!this.#s){const{animationName:i,transitionDuration:r}=this.#t;n.style.transitionDuration=r,n.style.animationName=i}})})}#r=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return this.#r()}set snippetProps(e){return this.#r(e)}#i=B(()=>({id:this.opts.id.current,style:{"--bits-collapsible-content-height":this.#o?`${this.#o}px`:void 0,"--bits-collapsible-content-width":this.#n?`${this.#n}px`:void 0},"data-state":Me(this.root.opts.open.current),"data-disabled":_e(this.root.opts.disabled.current),[Bt.content]:"",...this.attachment}));get props(){return this.#i()}set props(e){return this.#i(e)}}class Ht{static create(e){return new Ht(e,jt.get())}opts;root;attachment;#e=B(()=>this.opts.disabled.current||this.root.opts.disabled.current);constructor(e,s){this.opts=e,this.root=s,this.attachment=ue(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){if(!this.#e()){if(e.button!==0)return e.preventDefault();this.root.toggleOpen()}}onkeydown(e){this.#e()||(e.key===we||e.key===Te)&&(e.preventDefault(),this.root.toggleOpen())}#t=B(()=>({id:this.opts.id.current,type:"button",disabled:this.#e(),"aria-controls":this.root.contentId,"aria-expanded":Nt(this.root.opts.open.current),"data-state":Me(this.root.opts.open.current),"data-disabled":_e(this.#e()),[Bt.trigger]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return this.#t()}set props(e){return this.#t(e)}}function mr(t,e){S();const s=se(t);let{children:n,child:o,id:i=ne(s),ref:r=null,open:u=!1,disabled:h=!1,onOpenChange:c=y,onOpenChangeComplete:l=y,$$slots:a,$$events:d,...m}=e;const f=Kt.create({open:_.with(()=>u,v=>{u=v,c(v)}),disabled:_.with(()=>h),id:_.with(()=>i),ref:_.with(()=>r,v=>r=v),onOpenChangeComplete:_.with(()=>l)}),p=X(m,f.props);o?(t.out.push("<!--[-->"),o(t,{props:p}),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<div${H({...p},null)}>`),n?.(t),t.out.push("<!----></div>")),t.out.push("<!--]-->"),O(e,{ref:r,open:u}),k()}function vr(t,e){S();const s=se(t);let{child:n,ref:o=null,forceMount:i=!1,children:r,id:u=ne(s),$$slots:h,$$events:c,...l}=e;const a=Vt.create({id:_.with(()=>u),forceMount:_.with(()=>i),ref:_.with(()=>o,d=>o=d)});{let d=function(m,{present:f}){const p=X(l,a.props,{hidden:i?void 0:!f});n?(m.out.push("<!--[-->"),n(m,{...a.snippetProps,props:p}),m.out.push("<!---->")):(m.out.push("<!--[!-->"),m.out.push(`<div${H({...p},null)}>`),r?.(m),m.out.push("<!----></div>")),m.out.push("<!--]-->")};Ks(t,{forceMount:!0,open:a.present,ref:a.opts.ref,presence:d})}O(e,{ref:o}),k()}function br(t,e){S();const s=se(t);let{children:n,child:o,ref:i=null,id:r=ne(s),disabled:u=!1,$$slots:h,$$events:c,...l}=e;const a=Ht.create({id:_.with(()=>r),ref:_.with(()=>i,m=>i=m),disabled:_.with(()=>u)}),d=X(l,a.props);o?(t.out.push("<!--[-->"),o(t,{props:d}),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<button${H({...d},null)}>`),n?.(t),t.out.push("<!----></button>")),t.out.push("<!--]-->"),O(e,{ref:i}),k()}class xr{#e;#t=B(()=>this.#e.candidateValues());#s;constructor(e){this.#e=e,this.#s=Qs("",{afterMs:1e3,getWindow:this.#e.getWindow}),this.handleTypeaheadSearch=this.handleTypeaheadSearch.bind(this),this.resetTypeahead=this.resetTypeahead.bind(this)}handleTypeaheadSearch(e){if(!this.#e.enabled()||!this.#t().length)return;this.#s.current=this.#s.current+e;const s=this.#e.getCurrentItem(),n=this.#t().find(u=>u===s)??"",o=this.#t().map(u=>u??""),i=zt(o,this.#s.current,n),r=this.#t().find(u=>u===i);return r&&this.#e.onMatch(r),r}resetTypeahead(){this.#s.current=""}}class rn{#e;#t;#s=B(()=>this.#e.onMatch?this.#e.onMatch:e=>e.focus());#n=B(()=>this.#e.getCurrentItem?this.#e.getCurrentItem:this.#e.getActiveElement);constructor(e){this.#e=e,this.#t=Qs("",{afterMs:1e3,getWindow:e.getWindow}),this.handleTypeaheadSearch=this.handleTypeaheadSearch.bind(this),this.resetTypeahead=this.resetTypeahead.bind(this)}handleTypeaheadSearch(e,s){if(!s.length)return;this.#t.current=this.#t.current+e;const n=this.#n()(),o=s.find(h=>h===n)?.textContent?.trim()??"",i=s.map(h=>h.textContent?.trim()??""),r=zt(i,this.#t.current,o),u=s.find(h=>h.textContent?.trim()===r);return u&&this.#s()(u),u}resetTypeahead(){this.#t.current=""}get search(){return this.#t.current}}const wr=[de,Mt,lt],Cr=[ae,Tt,ut],Sr=[...wr,...Cr],kr=ct({component:"select",parts:["trigger","content","item","viewport","scroll-up-button","scroll-down-button","group","group-label","separator","arrow","input","content-wrapper","item-text","value"]}),Je=new ke("Select.Root | Combobox.Root"),dt=new ke("Select.Content | Combobox.Content");class un{opts;touchedInput=!1;inputNode=null;contentNode=null;triggerNode=null;valueId="";highlightedNode=null;#e=B(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-value"):null);get highlightedValue(){return this.#e()}set highlightedValue(e){return this.#e(e)}#t=B(()=>{if(this.highlightedNode)return this.highlightedNode.id});get highlightedId(){return this.#t()}set highlightedId(e){return this.#t(e)}#s=B(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-label"):null);get highlightedLabel(){return this.#s()}set highlightedLabel(e){return this.#s(e)}isUsingKeyboard=!1;isCombobox=!1;domContext=new ht(()=>null);constructor(e){this.opts=e,this.isCombobox=e.isCombobox,new Pt({ref:_.with(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}#n=lo(this.setHighlightedToFirstCandidate.bind(this),20);setHighlightedNode(e,s=!1){this.highlightedNode=e,e&&(this.isUsingKeyboard||s)&&e.scrollIntoView({block:this.opts.scrollAlignment.current})}getCandidateNodes(){const e=this.contentNode;return e?Array.from(e.querySelectorAll(`[${this.getBitsAttr("item")}]:not([data-disabled])`)):[]}setHighlightedToFirstCandidate(e={debounced:!1}){if(e.debounced){this.#n();return}this.setHighlightedNode(null);const s=this.getCandidateNodes();s.length&&this.setHighlightedNode(s[0])}getNodeByValue(e){return this.getCandidateNodes().find(n=>n.dataset.value===e)??null}setOpen(e){this.opts.open.current=e}toggleOpen(){this.opts.open.current=!this.opts.open.current}handleOpen(){this.setOpen(!0)}handleClose(){this.setHighlightedNode(null),this.setOpen(!1)}toggleMenu(){this.toggleOpen()}getBitsAttr=e=>kr.getAttr(e,this.isCombobox?"combobox":void 0)}class _r extends un{opts;isMulti=!1;#e=B(()=>this.opts.value.current!=="");get hasValue(){return this.#e()}set hasValue(e){return this.#e(e)}#t=B(()=>this.opts.items.current.length?this.opts.items.current.find(s=>s.value===this.opts.value.current)?.label??"":"");get currentLabel(){return this.#t()}set currentLabel(e){return this.#t(e)}#s=B(()=>this.opts.items.current.length?this.opts.items.current.filter(s=>!s.disabled).map(s=>s.label):[]);get candidateLabels(){return this.#s()}set candidateLabels(e){return this.#s(e)}#n=B(()=>!(this.isMulti||this.opts.items.current.length===0));get dataTypeaheadEnabled(){return this.#n()}set dataTypeaheadEnabled(e){return this.#n(e)}constructor(e){super(e),this.opts=e,te(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current===e}toggleItem(e,s=e){this.opts.value.current=this.includesItem(e)?"":e,this.opts.inputValue.current=s}setInitialHighlightedNode(){pe(()=>{if(this.highlightedNode&&this.domContext.getDocument().contains(this.highlightedNode))return;if(this.opts.value.current!==""){const s=this.getNodeByValue(this.opts.value.current);if(s){this.setHighlightedNode(s,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class Pr extends un{opts;isMulti=!0;#e=B(()=>this.opts.value.current.length>0);get hasValue(){return this.#e()}set hasValue(e){return this.#e(e)}constructor(e){super(e),this.opts=e,te(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current.includes(e)}toggleItem(e,s=e){this.includesItem(e)?this.opts.value.current=this.opts.value.current.filter(n=>n!==e):this.opts.value.current=[...this.opts.value.current,e],this.opts.inputValue.current=s}setInitialHighlightedNode(){pe(()=>{if(!this.domContext||this.highlightedNode&&this.domContext.getDocument().contains(this.highlightedNode))return;if(this.opts.value.current.length&&this.opts.value.current[0]!==""){const s=this.getNodeByValue(this.opts.value.current[0]);if(s){this.setHighlightedNode(s,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class Nr{static create(e){const{type:s,...n}=e,o=s==="single"?new _r(n):new Pr(n);return Je.set(o)}}class Wt{static create(e){return new Wt(e,Je.get())}opts;root;attachment;#e;#t;constructor(e,s){this.opts=e,this.root=s,this.attachment=ue(e.ref,n=>this.root.triggerNode=n),this.root.domContext=new ht(e.ref),this.#e=new rn({getCurrentItem:()=>this.root.highlightedNode,onMatch:n=>{this.root.setHighlightedNode(n)},getActiveElement:()=>this.root.domContext.getActiveElement(),getWindow:()=>this.root.domContext.getWindow()}),this.#t=new xr({getCurrentItem:()=>this.root.isMulti?"":this.root.currentLabel,onMatch:n=>{if(this.root.isMulti||!this.root.opts.items.current)return;const o=this.root.opts.items.current.find(i=>i.label===n);o&&(this.root.opts.value.current=o.value)},enabled:()=>!this.root.isMulti&&this.root.dataTypeaheadEnabled,candidateValues:()=>this.root.isMulti?[]:this.root.candidateLabels,getWindow:()=>this.root.domContext.getWindow()}),this.onkeydown=this.onkeydown.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onclick=this.onclick.bind(this)}#s(){this.root.opts.open.current=!0,this.#t.resetTypeahead(),this.#e.resetTypeahead()}#n(e){this.#s()}#o(){const e=this.root.highlightedValue===this.root.opts.value.current;return!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti?(this.root.handleClose(),!0):(this.root.highlightedValue!==null&&this.root.toggleItem(this.root.highlightedValue,this.root.highlightedLabel??void 0),!this.root.isMulti&&!e?(this.root.handleClose(),!0):!1)}onkeydown(e){if(this.root.isUsingKeyboard=!0,(e.key===ae||e.key===de)&&e.preventDefault(),!this.root.opts.open.current){if(e.key===Te||e.key===we||e.key===de||e.key===ae)e.preventDefault(),this.root.handleOpen();else if(!this.root.isMulti&&this.root.dataTypeaheadEnabled){this.#t.handleTypeaheadSearch(e.key);return}if(this.root.hasValue)return;const r=this.root.getCandidateNodes();if(!r.length)return;if(e.key===de){const u=r[0];this.root.setHighlightedNode(u)}else if(e.key===ae){const u=r[r.length-1];this.root.setHighlightedNode(u)}return}if(e.key===xt){this.root.handleClose();return}if((e.key===Te||e.key===we&&this.#e.search==="")&&!e.isComposing&&(e.preventDefault(),this.#o()))return;if(e.key===ae&&e.altKey&&this.root.handleClose(),Sr.includes(e.key)){e.preventDefault();const r=this.root.getCandidateNodes(),u=this.root.highlightedNode,h=u?r.indexOf(u):-1,c=this.root.opts.loop.current;let l;if(e.key===de?l=ur(r,h,c):e.key===ae?l=lr(r,h,c):e.key===Tt?l=cr(r,h,10,c):e.key===Mt?l=hr(r,h,10,c):e.key===lt?l=r[0]:e.key===ut&&(l=r[r.length-1]),!l)return;this.root.setHighlightedNode(l);return}const s=e.ctrlKey||e.altKey||e.metaKey,n=e.key.length===1,o=e.key===we,i=this.root.getCandidateNodes();if(e.key!==xt){if(!s&&(n||o)){!this.#e.handleTypeaheadSearch(e.key,i)&&o&&(e.preventDefault(),this.#o());return}this.root.highlightedNode||this.root.setHighlightedToFirstCandidate()}}onclick(e){e.currentTarget.focus()}onpointerdown(e){if(this.root.opts.disabled.current)return;if(e.pointerType==="touch")return e.preventDefault();const s=e.target;s?.hasPointerCapture(e.pointerId)&&s?.releasePointerCapture(e.pointerId),e.button===0&&e.ctrlKey===!1&&(this.root.opts.open.current===!1?this.#n(e):this.root.handleClose())}onpointerup(e){this.root.opts.disabled.current||(e.preventDefault(),e.pointerType==="touch"&&(this.root.opts.open.current===!1?this.#n(e):this.root.handleClose()))}#r=B(()=>({id:this.opts.id.current,disabled:this.root.opts.disabled.current?!0:void 0,"aria-haspopup":"listbox","aria-expanded":Nt(this.root.opts.open.current),"aria-activedescendant":this.root.highlightedId,"data-state":Me(this.root.opts.open.current),"data-disabled":_e(this.root.opts.disabled.current),"data-placeholder":this.root.hasValue?void 0:"",[this.root.getBitsAttr("trigger")]:"",onpointerdown:this.onpointerdown,onkeydown:this.onkeydown,onclick:this.onclick,onpointerup:this.onpointerup,...this.attachment}));get props(){return this.#r()}set props(e){return this.#r(e)}}class Gt{static create(e){return dt.set(new Gt(e,Je.get()))}opts;root;attachment;viewportNode=null;isPositioned=!1;domContext;constructor(e,s){this.opts=e,this.root=s,this.attachment=ue(e.ref,n=>this.root.contentNode=n),this.domContext=new ht(this.opts.ref),this.root.domContext===null&&(this.root.domContext=this.domContext),te(()=>this.root.opts.open.current,()=>{this.root.opts.open.current||(this.isPositioned=!1)}),this.onpointermove=this.onpointermove.bind(this)}onpointermove(e){this.root.isUsingKeyboard=!1}#e=B(()=>je(this.root.isCombobox?"combobox":"select"));onInteractOutside=e=>{if(e.target===this.root.triggerNode||e.target===this.root.inputNode){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};#t=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return this.#t()}set snippetProps(e){return this.#t(e)}#s=B(()=>({id:this.opts.id.current,role:"listbox","aria-multiselectable":this.root.isMulti?"true":void 0,"data-state":Me(this.root.opts.open.current),[this.root.getBitsAttr("content")]:"",style:{display:"flex",flexDirection:"column",outline:"none",boxSizing:"border-box",pointerEvents:"auto",...this.#e()},onpointermove:this.onpointermove,...this.attachment}));get props(){return this.#s()}set props(e){return this.#s(e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus,trapFocus:!1,loop:!1,onPlaced:()=>{this.root.opts.open.current&&(this.isPositioned=!0)}}}class qt{static create(e){return new qt(e,Je.get())}opts;root;attachment;#e=B(()=>this.root.includesItem(this.opts.value.current));get isSelected(){return this.#e()}set isSelected(e){return this.#e(e)}#t=B(()=>this.root.highlightedValue===this.opts.value.current);get isHighlighted(){return this.#t()}set isHighlighted(e){return this.#t(e)}prevHighlighted=new io(()=>this.isHighlighted);mounted=!1;constructor(e,s){this.opts=e,this.root=s,this.attachment=ue(e.ref),te([()=>this.isHighlighted,()=>this.prevHighlighted.current],()=>{this.isHighlighted?this.opts.onHighlight.current():this.prevHighlighted.current&&this.opts.onUnhighlight.current()}),te(()=>this.mounted,()=>{this.mounted&&this.root.setInitialHighlightedNode()}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onpointermove=this.onpointermove.bind(this)}handleSelect(){if(this.opts.disabled.current)return;const e=this.opts.value.current===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti){this.root.handleClose();return}this.root.toggleItem(this.opts.value.current,this.opts.label.current),!this.root.isMulti&&!e&&this.root.handleClose()}#s=B(()=>({selected:this.isSelected,highlighted:this.isHighlighted}));get snippetProps(){return this.#s()}set snippetProps(e){return this.#s(e)}onpointerdown(e){e.preventDefault()}onpointerup(e){if(!(e.defaultPrevented||!this.opts.ref.current)){if(e.pointerType==="touch"&&!uo){Rt(this.opts.ref.current,"click",()=>{this.handleSelect(),this.root.setHighlightedNode(this.opts.ref.current)},{once:!0});return}e.preventDefault(),this.handleSelect(),e.pointerType==="touch"&&this.root.setHighlightedNode(this.opts.ref.current)}}onpointermove(e){e.pointerType!=="touch"&&this.root.highlightedNode!==this.opts.ref.current&&this.root.setHighlightedNode(this.opts.ref.current)}#n=B(()=>({id:this.opts.id.current,role:"option","aria-selected":this.root.includesItem(this.opts.value.current)?"true":void 0,"data-value":this.opts.value.current,"data-disabled":_e(this.opts.disabled.current),"data-highlighted":this.root.highlightedValue===this.opts.value.current&&!this.opts.disabled.current?"":void 0,"data-selected":this.root.includesItem(this.opts.value.current)?"":void 0,"data-label":this.opts.label.current,[this.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,...this.attachment}));get props(){return this.#n()}set props(e){return this.#n(e)}}class Yt{static create(e){return new Yt(e,Je.get())}opts;root;#e=B(()=>this.root.opts.name.current!=="");get shouldRender(){return this.#e()}set shouldRender(e){return this.#e(e)}constructor(e,s){this.opts=e,this.root=s,this.onfocus=this.onfocus.bind(this)}onfocus(e){e.preventDefault(),this.root.isCombobox?this.root.inputNode?.focus():this.root.triggerNode?.focus()}#t=B(()=>({disabled:ho(this.root.opts.disabled.current),required:co(this.root.opts.required.current),name:this.root.opts.name.current,value:this.opts.value.current,onfocus:this.onfocus}));get props(){return this.#t()}set props(e){return this.#t(e)}}class Xt{static create(e){return new Xt(e,dt.get())}opts;content;root;attachment;prevScrollTop=0;constructor(e,s){this.opts=e,this.content=s,this.root=s.root,this.attachment=ue(e.ref,n=>this.content.viewportNode=n)}#e=B(()=>({id:this.opts.id.current,role:"presentation",[this.root.getBitsAttr("viewport")]:"",style:{position:"relative",flex:1,overflow:"auto"},...this.attachment}));get props(){return this.#e()}set props(e){return this.#e(e)}}class ln{opts;content;root;attachment;autoScrollTimer=null;userScrollTimer=-1;isUserScrolling=!1;onAutoScroll=y;mounted=!1;constructor(e,s){this.opts=e,this.content=s,this.root=s.root,this.attachment=ue(e.ref),te([()=>this.mounted],()=>{if(!this.mounted){this.isUserScrolling=!1;return}this.isUserScrolling}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this)}handleUserScroll(){this.content.domContext.clearTimeout(this.userScrollTimer),this.isUserScrolling=!0,this.userScrollTimer=this.content.domContext.setTimeout(()=>{this.isUserScrolling=!1},200)}clearAutoScrollInterval(){this.autoScrollTimer!==null&&(this.content.domContext.clearTimeout(this.autoScrollTimer),this.autoScrollTimer=null)}onpointerdown(e){if(this.autoScrollTimer!==null)return;const s=n=>{this.onAutoScroll(),this.autoScrollTimer=this.content.domContext.setTimeout(()=>s(n+1),this.opts.delay.current(n))};this.autoScrollTimer=this.content.domContext.setTimeout(()=>s(1),this.opts.delay.current(0))}onpointermove(e){this.onpointerdown(e)}onpointerleave(e){this.clearAutoScrollInterval()}#e=B(()=>({id:this.opts.id.current,"aria-hidden":ao(!0),style:{flexShrink:0},onpointerdown:this.onpointerdown,onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,...this.attachment}));get props(){return this.#e()}set props(e){return this.#e(e)}}class Jt{static create(e){return new Jt(new ln(e,dt.get()))}scrollButtonState;content;root;canScrollDown=!1;scrollIntoViewTimer=null;constructor(e){this.scrollButtonState=e,this.content=e.content,this.root=e.root,this.scrollButtonState.onAutoScroll=this.handleAutoScroll,te([()=>this.content.viewportNode,()=>this.content.isPositioned],()=>{if(!(!this.content.viewportNode||!this.content.isPositioned))return this.handleScroll(!0),Rt(this.content.viewportNode,"scroll",()=>this.handleScroll())}),te(()=>this.scrollButtonState.mounted,()=>{this.scrollButtonState.mounted&&(this.scrollIntoViewTimer&&clearTimeout(this.scrollIntoViewTimer),this.scrollIntoViewTimer=po(5,()=>{this.root.highlightedNode?.scrollIntoView({block:this.root.opts.scrollAlignment.current})}))})}handleScroll=(e=!1)=>{if(e||this.scrollButtonState.handleUserScroll(),!this.content.viewportNode)return;const s=this.content.viewportNode.scrollHeight-this.content.viewportNode.clientHeight,n=Number.parseInt(getComputedStyle(this.content.viewportNode).paddingTop,10);this.canScrollDown=Math.ceil(this.content.viewportNode.scrollTop)<s-n};handleAutoScroll=()=>{const e=this.content.viewportNode,s=this.root.highlightedNode;!e||!s||(e.scrollTop=e.scrollTop+s.offsetHeight)};#e=B(()=>({...this.scrollButtonState.props,[this.root.getBitsAttr("scroll-down-button")]:""}));get props(){return this.#e()}set props(e){return this.#e(e)}}class Zt{static create(e){return new Zt(new ln(e,dt.get()))}scrollButtonState;content;root;canScrollUp=!1;constructor(e){this.scrollButtonState=e,this.content=e.content,this.root=e.root,this.scrollButtonState.onAutoScroll=this.handleAutoScroll,te([()=>this.content.viewportNode,()=>this.content.isPositioned],()=>{if(!(!this.content.viewportNode||!this.content.isPositioned))return this.handleScroll(!0),Rt(this.content.viewportNode,"scroll",()=>this.handleScroll())})}handleScroll=(e=!1)=>{if(e||this.scrollButtonState.handleUserScroll(),!this.content.viewportNode)return;const s=Number.parseInt(getComputedStyle(this.content.viewportNode).paddingTop,10);this.canScrollUp=this.content.viewportNode.scrollTop-s>.1};handleAutoScroll=()=>{!this.content.viewportNode||!this.root.highlightedNode||(this.content.viewportNode.scrollTop=this.content.viewportNode.scrollTop-this.root.highlightedNode.offsetHeight)};#e=B(()=>({...this.scrollButtonState.props,[this.root.getBitsAttr("scroll-up-button")]:""}));get props(){return this.#e()}set props(e){return this.#e(e)}}function ks(t,e){S();let{value:s="",autocomplete:n}=e;const o=Yt.create({value:_.with(()=>s)});let i=!0,r;function u(h){o.shouldRender?(h.out.push("<!--[-->"),on(h,E([o.props,{autocomplete:n,get value(){return s},set value(c){s=c,i=!1}}]))):h.out.push("<!--[!-->"),h.out.push("<!--]-->")}do i=!0,r=W(t),u(r);while(!i);G(t,r),O(e,{value:s}),k()}function Qt(t,e){S();let{id:s,children:n,virtualEl:o,ref:i,tooltip:r=!1}=e;Bo.create({id:_.with(()=>s),virtualEl:_.with(()=>o),ref:i},r),n?.(t),t.out.push("<!---->"),k()}function Mr(t,e){S();let{id:s=Ft(),children:n,child:o,width:i=10,height:r=5,$$slots:u,$$events:h,...c}=e;const l=X(c,{id:s});o?(t.out.push("<!--[-->"),o(t,{props:l}),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<span${H({...l},null)}>`),n?(t.out.push("<!--[-->"),n?.(t),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<svg${Z("width",i)}${Z("height",r)} viewBox="0 0 30 10" preserveAspectRatio="none" data-arrow=""><polygon points="0,0 30,0 15,10" fill="currentColor"></polygon></svg>`)),t.out.push("<!--]--></span>")),t.out.push("<!--]-->"),k()}function Tr(t,e){S();let{id:s=Ft(),ref:n=null,$$slots:o,$$events:i,...r}=e;const u=jo.create({id:_.with(()=>s),ref:_.with(()=>n,c=>n=c)}),h=X(r,u.props);Mr(t,E([h])),O(e,{ref:n}),k()}function Fr(t,e){S();let{content:s,side:n="bottom",sideOffset:o=0,align:i="center",alignOffset:r=0,id:u,arrowPadding:h=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:a=0,hideWhenDetached:d=!1,onPlaced:m=()=>{},sticky:f="partial",updatePositionStrategy:p="optimized",strategy:v="fixed",dir:T="ltr",style:g={},wrapperId:x=Ft(),customAnchor:C=null,enabled:w,tooltip:b=!1}=e;const N=Ko.create({side:_.with(()=>n),sideOffset:_.with(()=>o),align:_.with(()=>i),alignOffset:_.with(()=>r),id:_.with(()=>u),arrowPadding:_.with(()=>h),avoidCollisions:_.with(()=>c),collisionBoundary:_.with(()=>l),collisionPadding:_.with(()=>a),hideWhenDetached:_.with(()=>d),onPlaced:_.with(()=>m),sticky:_.with(()=>f),updatePositionStrategy:_.with(()=>p),strategy:_.with(()=>v),dir:_.with(()=>T),style:_.with(()=>g),enabled:_.with(()=>w),wrapperId:_.with(()=>x),customAnchor:_.with(()=>C)},b),P=X(N.wrapperProps,{style:{pointerEvents:"auto"}});s?.(t,{props:N.props,wrapperProps:P}),t.out.push("<!---->"),k()}function Ir(t,e){S();let{content:s}=e;s?.(t,{props:{},wrapperProps:{}}),t.out.push("<!---->"),k()}function Dr(t,e){let{content:s,isStatic:n=!1,onPlaced:o,$$slots:i,$$events:r,...u}=e;n?(t.out.push("<!--[-->"),Ir(t,{content:s})):(t.out.push("<!--[!-->"),Fr(t,E([{content:s,onPlaced:o},u]))),t.out.push("<!--]-->")}function cn(t,e){S();let{popper:s,onEscapeKeydown:n,escapeKeydownBehavior:o,preventOverflowTextSelection:i,id:r,onPointerDown:u,onPointerUp:h,side:c,sideOffset:l,align:a,alignOffset:d,arrowPadding:m,avoidCollisions:f,collisionBoundary:p,collisionPadding:v,sticky:T,hideWhenDetached:g,updatePositionStrategy:x,strategy:C,dir:w,preventScroll:b,wrapperId:N,style:P,onPlaced:M,onInteractOutside:A,onCloseAutoFocus:L,onOpenAutoFocus:j,onFocusOutside:U,interactOutsideBehavior:D="close",loop:z,trapFocus:I=!0,isValidEvent:$=()=>!1,customAnchor:Q=null,isStatic:Ie=!1,enabled:ce,ref:fe,tooltip:ft=!1,$$slots:gt,$$events:ps,...De}=e;Dr(t,{isStatic:Ie,id:r,side:c,sideOffset:l,align:a,alignOffset:d,arrowPadding:m,avoidCollisions:f,collisionBoundary:p,collisionPadding:v,sticky:T,hideWhenDetached:g,updatePositionStrategy:x,strategy:C,dir:w,wrapperId:N,style:P,onPlaced:M,customAnchor:Q,enabled:ce,tooltip:ft,content:function(he,{props:On,wrapperProps:Rn}){De.forceMount&&ce?(he.out.push("<!--[-->"),bs(he,{preventScroll:b})):(he.out.push("<!--[!-->"),De.forceMount?he.out.push("<!--[!-->"):(he.out.push("<!--[-->"),bs(he,{preventScroll:b})),he.out.push("<!--]-->")),he.out.push("<!--]--> ");{let zn=function(Un,{props:Ln}){go(Un,{onEscapeKeydown:n,escapeKeydownBehavior:o,enabled:ce,ref:fe,children:Bn=>{mo(Bn,{id:r,onInteractOutside:A,onFocusOutside:U,interactOutsideBehavior:D,isValidEvent:$,enabled:ce,ref:fe,children:function(jn,{props:Kn}){vo(jn,{id:r,preventOverflowTextSelection:i,onPointerDown:u,onPointerUp:h,enabled:ce,ref:fe,children:gs=>{s?.(gs,{props:X(De,On,Kn,Ln,{style:{pointerEvents:"auto"}}),wrapperProps:Rn}),gs.out.push("<!---->")}})}})}})};fo(he,{onOpenAutoFocus:j,onCloseAutoFocus:L,loop:z,enabled:ce,trapFocus:I,forceMount:De.forceMount,ref:fe,focusScope:zn})}he.out.push("<!---->")},$$slots:{content:!0}}),k()}function yt(t,e){let{popper:s,open:n,onEscapeKeydown:o,escapeKeydownBehavior:i,preventOverflowTextSelection:r,id:u,onPointerDown:h,onPointerUp:c,side:l,sideOffset:a,align:d,alignOffset:m,arrowPadding:f,avoidCollisions:p,collisionBoundary:v,collisionPadding:T,sticky:g,hideWhenDetached:x,updatePositionStrategy:C,strategy:w,dir:b,preventScroll:N,wrapperId:P,style:M,onPlaced:A,onInteractOutside:L,onCloseAutoFocus:j,onOpenAutoFocus:U,onFocusOutside:D,interactOutsideBehavior:z="close",loop:I,trapFocus:$=!0,isValidEvent:Q=()=>!1,customAnchor:Ie=null,isStatic:ce=!1,ref:fe,$$slots:ft,$$events:gt,...ps}=e;Ks(t,{open:n,ref:fe,presence:function(fs){cn(fs,E([{popper:s,onEscapeKeydown:o,escapeKeydownBehavior:i,preventOverflowTextSelection:r,id:u,onPointerDown:h,onPointerUp:c,side:l,sideOffset:a,align:d,alignOffset:m,arrowPadding:f,avoidCollisions:p,collisionBoundary:v,collisionPadding:T,sticky:g,hideWhenDetached:x,updatePositionStrategy:C,strategy:w,dir:b,preventScroll:N,wrapperId:P,style:M,onPlaced:A,customAnchor:Ie,isStatic:ce,enabled:n,onInteractOutside:L,onCloseAutoFocus:j,onOpenAutoFocus:U,interactOutsideBehavior:z,loop:I,trapFocus:$,isValidEvent:Q,onFocusOutside:D,forceMount:!1,ref:fe},ps]))}})}function $t(t,e){let{popper:s,onEscapeKeydown:n,escapeKeydownBehavior:o,preventOverflowTextSelection:i,id:r,onPointerDown:u,onPointerUp:h,side:c,sideOffset:l,align:a,alignOffset:d,arrowPadding:m,avoidCollisions:f,collisionBoundary:p,collisionPadding:v,sticky:T,hideWhenDetached:g,updatePositionStrategy:x,strategy:C,dir:w,preventScroll:b,wrapperId:N,style:P,onPlaced:M,onInteractOutside:A,onCloseAutoFocus:L,onOpenAutoFocus:j,onFocusOutside:U,interactOutsideBehavior:D="close",loop:z,trapFocus:I=!0,isValidEvent:$=()=>!1,customAnchor:Q=null,isStatic:Ie=!1,enabled:ce,$$slots:fe,$$events:ft,...gt}=e;cn(t,E([{popper:s,onEscapeKeydown:n,escapeKeydownBehavior:o,preventOverflowTextSelection:i,id:r,onPointerDown:u,onPointerUp:h,side:c,sideOffset:l,align:a,alignOffset:d,arrowPadding:m,avoidCollisions:f,collisionBoundary:p,collisionPadding:v,sticky:T,hideWhenDetached:g,updatePositionStrategy:x,strategy:C,dir:w,preventScroll:b,wrapperId:N,style:P,onPlaced:M,customAnchor:Q,isStatic:Ie,enabled:ce,onInteractOutside:A,onCloseAutoFocus:L,onOpenAutoFocus:j,interactOutsideBehavior:D,loop:z,trapFocus:I,isValidEvent:$,onFocusOutside:U},gt,{forceMount:!0}]))}function Er(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,forceMount:i=!1,side:r="bottom",onInteractOutside:u=y,onEscapeKeydown:h=y,children:c,child:l,preventScroll:a=!1,$$slots:d,$$events:m,...f}=e;const p=Gt.create({id:_.with(()=>n),ref:_.with(()=>o,T=>o=T),onInteractOutside:_.with(()=>u),onEscapeKeydown:_.with(()=>h)}),v=X(f,p.props);if(i){t.out.push("<!--[-->");{let T=function(g,{props:x,wrapperProps:C}){const w=X(x,{style:p.props.style});l?(g.out.push("<!--[-->"),l(g,{props:w,wrapperProps:C,...p.snippetProps}),g.out.push("<!---->")):(g.out.push("<!--[!-->"),g.out.push(`<div${H({...C},null)}><div${H({...w},null)}>`),c?.(g),g.out.push("<!----></div></div>")),g.out.push("<!--]-->")};$t(t,E([v,p.popperProps,{ref:p.opts.ref,side:r,enabled:p.root.opts.open.current,id:n,preventScroll:a,forceMount:!0,popper:T,$$slots:{popper:!0}}]))}}else{if(t.out.push("<!--[!-->"),i)t.out.push("<!--[!-->");else{t.out.push("<!--[-->");{let T=function(g,{props:x,wrapperProps:C}){const w=X(x,{style:p.props.style});l?(g.out.push("<!--[-->"),l(g,{props:w,wrapperProps:C,...p.snippetProps}),g.out.push("<!---->")):(g.out.push("<!--[!-->"),g.out.push(`<div${H({...C},null)}><div${H({...w},null)}>`),c?.(g),g.out.push("<!----></div></div>")),g.out.push("<!--]-->")};yt(t,E([v,p.popperProps,{ref:p.opts.ref,side:r,open:p.root.opts.open.current,id:n,preventScroll:a,forceMount:!1,popper:T,$$slots:{popper:!0}}]))}}t.out.push("<!--]-->")}t.out.push("<!--]-->"),O(e,{ref:o}),k()}function es(t,e){S();let{mounted:s=!1,onMountedChange:n=y}=e;O(e,{mounted:s}),k()}function Ar(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,value:i,label:r=i,disabled:u=!1,children:h,child:c,onHighlight:l=y,onUnhighlight:a=y,$$slots:d,$$events:m,...f}=e;const p=qt.create({id:_.with(()=>n),ref:_.with(()=>o,C=>o=C),value:_.with(()=>i),disabled:_.with(()=>u),label:_.with(()=>r),onHighlight:_.with(()=>l),onUnhighlight:_.with(()=>a)}),v=X(f,p.props);let T=!0,g;function x(C){c?(C.out.push("<!--[-->"),c(C,{props:v,...p.snippetProps}),C.out.push("<!---->")):(C.out.push("<!--[!-->"),C.out.push(`<div${H({...v},null)}>`),h?.(C,p.snippetProps),C.out.push("<!----></div>")),C.out.push("<!--]--> "),es(C,{get mounted(){return p.mounted},set mounted(w){p.mounted=w,T=!1}}),C.out.push("<!---->")}do T=!0,g=W(t),x(g);while(!T);G(t,g),O(e,{ref:o}),k()}function Or(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,children:i,child:r,$$slots:u,$$events:h,...c}=e;const l=Xt.create({id:_.with(()=>n),ref:_.with(()=>o,d=>o=d)}),a=X(c,l.props);r?(t.out.push("<!--[-->"),r(t,{props:a}),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<div${H({...a},null)}>`),i?.(t),t.out.push("<!----></div>")),t.out.push("<!--]-->"),O(e,{ref:o}),k()}function Rr(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,delay:i=()=>50,child:r,children:u,$$slots:h,$$events:c,...l}=e;const a=Jt.create({id:_.with(()=>n),ref:_.with(()=>o,v=>o=v),delay:_.with(()=>i)}),d=X(l,a.props);let m=!0,f;function p(v){a.canScrollDown?(v.out.push("<!--[-->"),es(v,{get mounted(){return a.scrollButtonState.mounted},set mounted(T){a.scrollButtonState.mounted=T,m=!1}}),v.out.push("<!----> "),r?(v.out.push("<!--[-->"),r(v,{props:l}),v.out.push("<!---->")):(v.out.push("<!--[!-->"),v.out.push(`<div${H({...d},null)}>`),u?.(v),v.out.push("<!----></div>")),v.out.push("<!--]-->")):v.out.push("<!--[!-->"),v.out.push("<!--]-->")}do m=!0,f=W(t),p(f);while(!m);G(t,f),O(e,{ref:o}),k()}function zr(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,delay:i=()=>50,child:r,children:u,$$slots:h,$$events:c,...l}=e;const a=Zt.create({id:_.with(()=>n),ref:_.with(()=>o,v=>o=v),delay:_.with(()=>i)}),d=X(l,a.props);let m=!0,f;function p(v){a.canScrollUp?(v.out.push("<!--[-->"),es(v,{get mounted(){return a.scrollButtonState.mounted},set mounted(T){a.scrollButtonState.mounted=T,m=!1}}),v.out.push("<!----> "),r?(v.out.push("<!--[-->"),r(v,{props:l}),v.out.push("<!---->")):(v.out.push("<!--[!-->"),v.out.push(`<div${H({...d},null)}>`),u?.(v),v.out.push("<!----></div>")),v.out.push("<!--]-->")):v.out.push("<!--[!-->"),v.out.push("<!--]-->")}do m=!0,f=W(t),p(f);while(!m);G(t,f),O(e,{ref:o}),k()}const Ur=[Te,we],Lr=[de,Mt,lt],hn=[ae,Tt,ut],Br=[...Lr,...hn];function _s(t){return t.pointerType==="mouse"}function jr(t,{select:e=!1}={}){if(!t||!t.focus)return;const s=It(t);if(s.activeElement===t)return;const n=s.activeElement;t.focus({preventScroll:!0}),t!==n&&bo(t)&&e&&t.select()}function Kr(t,{select:e=!1}={},s){const n=s();for(const o of t)if(jr(o,{select:e}),s()!==n)return!0}function Le(){return{getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"}}function Vr(t,e){if(!At(t,Le()))return Hr(t,e);const s=It(t),n=zo(s.body,Le());e==="prev"&&n.reverse();const o=n.indexOf(t);return o===-1?s.body:n.slice(o+1)[0]}function Hr(t,e){const s=It(t);if(!Uo(t,Le()))return s.body;const n=Lo(s.body,Le());e==="prev"&&n.reverse();const o=n.indexOf(t);return o===-1?s.body:n.slice(o+1).find(r=>At(r,Le()))??s.body}const Wr=new ke("Menu.Root"),ts=new ke("Menu.Root | Menu.Sub"),an=new ke("Menu.Content"),Gr=new wo("bitsmenuopen",{bubbles:!1,cancelable:!0}),qr=ct({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]});class ss{static create(e){const s=new ss(e);return Wr.set(s)}opts;isUsingKeyboard=new ni;ignoreCloseAutoFocus=!1;isPointerInTransit=!1;constructor(e){this.opts=e}getBitsAttr=e=>qr.getAttr(e,this.opts.variant.current)}class ns{static create(e,s){return ts.set(new ns(e,s,null))}opts;root;parentMenu;contentId=_.with(()=>"");contentNode=null;triggerNode=null;constructor(e,s,n){this.opts=e,this.root=s,this.parentMenu=n,new Pt({ref:_.with(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),n&&te(()=>n.opts.open.current,()=>{n.opts.open.current||(this.opts.open.current=!1)})}toggleOpen(){this.opts.open.current=!this.opts.open.current}onOpen(){this.opts.open.current=!0}onClose(){this.opts.open.current=!1}}class os{static create(e){return an.set(new os(e,ts.get()))}opts;parentMenu;rovingFocusGroup;domContext;attachment;search="";#e=0;#t;mounted=!1;#s;constructor(e,s){this.opts=e,this.parentMenu=s,this.domContext=new ht(e.ref),this.attachment=ue(this.opts.ref,n=>{this.parentMenu.contentNode!==n&&(this.parentMenu.contentNode=n)}),s.contentId=e.id,this.#s=e.isSub??!1,this.onkeydown=this.onkeydown.bind(this),this.onblur=this.onblur.bind(this),this.onfocus=this.onfocus.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this),new Vo({contentNode:()=>this.parentMenu.contentNode,triggerNode:()=>this.parentMenu.triggerNode,enabled:()=>this.parentMenu.opts.open.current&&!!this.parentMenu.triggerNode?.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger")),onPointerExit:()=>{this.parentMenu.opts.open.current=!1},setIsPointerInTransit:n=>{this.parentMenu.root.isPointerInTransit=n}}),this.#t=new rn({getActiveElement:()=>this.domContext.getActiveElement(),getWindow:()=>this.domContext.getWindow()}).handleTypeaheadSearch,this.rovingFocusGroup=new ir({rootNode:_.with(()=>this.parentMenu.contentNode),candidateAttr:this.parentMenu.root.getBitsAttr("item"),loop:this.opts.loop,orientation:_.with(()=>"vertical")}),te(()=>this.parentMenu.contentNode,n=>{if(!n)return;const o=()=>{pe(()=>{this.parentMenu.root.isUsingKeyboard.current&&this.rovingFocusGroup.focusFirstCandidate()})};return Gr.listen(n,o)})}#n(){const e=this.parentMenu.contentNode;return e?Array.from(e.querySelectorAll(`[${this.parentMenu.root.getBitsAttr("item")}]:not([data-disabled])`)):[]}#o(){return this.parentMenu.root.isPointerInTransit}onCloseAutoFocus=e=>{this.opts.onCloseAutoFocus.current(e),!(e.defaultPrevented||this.#s)&&this.parentMenu.triggerNode&&At(this.parentMenu.triggerNode)&&this.parentMenu.triggerNode.focus()};handleTabKeyDown(e){let s=this.parentMenu;for(;s.parentMenu!==null;)s=s.parentMenu;if(!s.triggerNode)return;e.preventDefault();const n=Vr(s.triggerNode,e.shiftKey?"prev":"next");n?(this.parentMenu.root.ignoreCloseAutoFocus=!0,s.onClose(),pe(()=>{n.focus(),pe(()=>{this.parentMenu.root.ignoreCloseAutoFocus=!1})})):this.domContext.getDocument().body.focus()}onkeydown(e){if(e.defaultPrevented)return;if(e.key===xt){this.handleTabKeyDown(e);return}const s=e.target,n=e.currentTarget;if(!Be(s)||!Be(n))return;const o=s.closest(`[${this.parentMenu.root.getBitsAttr("content")}]`)?.id===this.parentMenu.contentId.current,i=e.ctrlKey||e.altKey||e.metaKey,r=e.key.length===1;if(this.rovingFocusGroup.handleKeydown(s,e)||e.code==="Space")return;const h=this.#n();o&&!i&&r&&this.#t(e.key,h),e.target?.id===this.parentMenu.contentId.current&&Br.includes(e.key)&&(e.preventDefault(),hn.includes(e.key)&&h.reverse(),Kr(h,{select:!1},()=>this.domContext.getActiveElement()))}onblur(e){xs(e.currentTarget)&&xs(e.target)&&(e.currentTarget.contains?.(e.target)||(this.domContext.getWindow().clearTimeout(this.#e),this.search=""))}onfocus(e){this.parentMenu.root.isUsingKeyboard.current&&pe(()=>this.rovingFocusGroup.focusFirstCandidate())}onItemEnter(){return this.#o()}onItemLeave(e){if(e.currentTarget.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger"))||this.#o()||this.parentMenu.root.isUsingKeyboard.current)return;this.parentMenu.contentNode?.focus(),this.rovingFocusGroup.setCurrentTabStopId("")}onTriggerLeave(){return!!this.#o()}onOpenAutoFocus=e=>{if(e.defaultPrevented)return;e.preventDefault(),this.parentMenu.contentNode?.focus()};handleInteractOutside(e){if(!xo(e.target))return;const s=this.parentMenu.triggerNode?.id;if(e.target.id===s){e.preventDefault();return}e.target.closest(`#${s}`)&&e.preventDefault()}#r=B(()=>({open:this.parentMenu.opts.open.current}));get snippetProps(){return this.#r()}set snippetProps(e){return this.#r(e)}#i=B(()=>({id:this.opts.id.current,role:"menu","aria-orientation":Co("vertical"),[this.parentMenu.root.getBitsAttr("content")]:"","data-state":Me(this.parentMenu.opts.open.current),onkeydown:this.onkeydown,onblur:this.onblur,onfocus:this.onfocus,dir:this.parentMenu.root.opts.dir.current,style:{pointerEvents:"auto"},...this.attachment}));get props(){return this.#i()}set props(e){return this.#i(e)}popperProps={onCloseAutoFocus:e=>this.onCloseAutoFocus(e)}}class Yr{opts;content;attachment;#e=!1;constructor(e,s){this.opts=e,this.content=s,this.attachment=ue(this.opts.ref),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this)}onpointermove(e){if(!e.defaultPrevented&&_s(e))if(this.opts.disabled.current)this.content.onItemLeave(e);else{if(this.content.onItemEnter())return;const n=e.currentTarget;if(!Be(n))return;n.focus()}}onpointerleave(e){e.defaultPrevented||_s(e)&&this.content.onItemLeave(e)}onfocus(e){pe(()=>{e.defaultPrevented||this.opts.disabled.current||(this.#e=!0)})}onblur(e){pe(()=>{e.defaultPrevented||(this.#e=!1)})}#t=B(()=>({id:this.opts.id.current,tabindex:-1,role:"menuitem","aria-disabled":So(this.opts.disabled.current),"data-disabled":_e(this.opts.disabled.current),"data-highlighted":this.#e?"":void 0,[this.content.parentMenu.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,onfocus:this.onfocus,onblur:this.onblur,...this.attachment}));get props(){return this.#t()}set props(e){return this.#t(e)}}class rs{static create(e){const s=new Yr(e,an.get());return new rs(e,s)}opts;item;root;#e=!1;constructor(e,s){this.opts=e,this.item=s,this.root=s.content.parentMenu.root,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this)}#t(){if(this.item.opts.disabled.current)return;const e=new CustomEvent("menuitemselect",{bubbles:!0,cancelable:!0});if(this.opts.onSelect.current(e),e.defaultPrevented){this.item.content.parentMenu.root.isUsingKeyboard.current=!1;return}this.opts.closeOnSelect.current&&this.item.content.parentMenu.root.opts.onClose()}onkeydown(e){const s=this.item.content.search!=="";if(!(this.item.opts.disabled.current||s&&e.key===we)&&Ur.includes(e.key)){if(!Be(e.currentTarget))return;e.currentTarget.click(),e.preventDefault()}}onclick(e){this.item.opts.disabled.current||this.#t()}onpointerup(e){if(!e.defaultPrevented&&!this.#e){if(!Be(e.currentTarget))return;e.currentTarget?.click()}}onpointerdown(e){this.#e=!0}#s=B(()=>X(this.item.props,{onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown}));get props(){return this.#s()}set props(e){return this.#s(e)}}class is{static create(e){return new is(e,ts.get())}opts;parentMenu;attachment;constructor(e,s){this.opts=e,this.parentMenu=s,this.attachment=ue(this.opts.ref,n=>this.parentMenu.triggerNode=n)}onpointerdown=e=>{if(!this.opts.disabled.current){if(e.pointerType==="touch")return e.preventDefault();e.button===0&&e.ctrlKey===!1&&(this.parentMenu.toggleOpen(),this.parentMenu.opts.open.current||e.preventDefault())}};onpointerup=e=>{this.opts.disabled.current||e.pointerType==="touch"&&(e.preventDefault(),this.parentMenu.toggleOpen())};onkeydown=e=>{if(!this.opts.disabled.current){if(e.key===we||e.key===Te){this.parentMenu.toggleOpen(),e.preventDefault();return}e.key===de&&(this.parentMenu.onOpen(),e.preventDefault())}};#e=B(()=>{if(this.parentMenu.opts.open.current&&this.parentMenu.contentId.current)return this.parentMenu.contentId.current});#t=B(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"aria-haspopup":"menu","aria-expanded":Nt(this.parentMenu.opts.open.current),"aria-controls":this.#e(),"data-disabled":_e(this.opts.disabled.current),"data-state":Me(this.parentMenu.opts.open.current),[this.parentMenu.root.getBitsAttr("trigger")]:"",onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown,...this.attachment}));get props(){return this.#t()}set props(e){return this.#t(e)}}function Xr(t,e){S();const s=se(t);let{child:n,children:o,ref:i=null,id:r=ne(s),disabled:u=!1,onSelect:h=y,closeOnSelect:c=!0,$$slots:l,$$events:a,...d}=e;const m=rs.create({id:_.with(()=>r),disabled:_.with(()=>u),onSelect:_.with(()=>h),ref:_.with(()=>i,p=>i=p),closeOnSelect:_.with(()=>c)}),f=X(d,m.props);n?(t.out.push("<!--[-->"),n(t,{props:f}),t.out.push("<!---->")):(t.out.push("<!--[!-->"),t.out.push(`<div${H({...f},null)}>`),o?.(t),t.out.push("<!----></div>")),t.out.push("<!--]-->"),O(e,{ref:i}),k()}function Jr(t,e){S();let{open:s=!1,dir:n="ltr",onOpenChange:o=y,onOpenChangeComplete:i=y,_internal_variant:r="dropdown-menu",children:u}=e;const h=ss.create({variant:_.with(()=>r),dir:_.with(()=>n),onClose:()=>{s=!1,o(!1)}});ns.create({open:_.with(()=>s,c=>{s=c,o(c)}),onOpenChangeComplete:_.with(()=>i)},h),ys(t,{children:c=>{u?.(c),c.out.push("<!---->")}}),O(e,{open:s}),k()}function Zr(t,e){S();const s=se(t);let{id:n=ne(s),child:o,children:i,ref:r=null,loop:u=!0,onInteractOutside:h=y,onEscapeKeydown:c=y,onCloseAutoFocus:l=y,forceMount:a=!1,trapFocus:d=!1,$$slots:m,$$events:f,...p}=e;const v=os.create({id:_.with(()=>n),loop:_.with(()=>u),ref:_.with(()=>r,C=>r=C),onCloseAutoFocus:_.with(()=>l)}),T=X(p,v.props);function g(C){if(v.handleInteractOutside(C),!C.defaultPrevented&&(h(C),!C.defaultPrevented)){if(C.target&&C.target instanceof Element){const w=`[${v.parentMenu.root.getBitsAttr("sub-content")}]`;if(C.target.closest(w))return}v.parentMenu.onClose()}}function x(C){c(C),!C.defaultPrevented&&v.parentMenu.onClose()}if(a){t.out.push("<!--[-->");{let C=function(w,{props:b,wrapperProps:N}){const P=X(b,{style:je("dropdown-menu")});o?(w.out.push("<!--[-->"),o(w,{props:P,wrapperProps:N,...v.snippetProps}),w.out.push("<!---->")):(w.out.push("<!--[!-->"),w.out.push(`<div${H({...N},null)}><div${H({...P},null)}>`),i?.(w),w.out.push("<!----></div></div>")),w.out.push("<!--]-->")};$t(t,E([T,v.popperProps,{ref:v.opts.ref,enabled:v.parentMenu.opts.open.current,onInteractOutside:g,onEscapeKeydown:x,trapFocus:d,loop:u,forceMount:!0,id:n,popper:C,$$slots:{popper:!0}}]))}}else{if(t.out.push("<!--[!-->"),a)t.out.push("<!--[!-->");else{t.out.push("<!--[-->");{let C=function(w,{props:b,wrapperProps:N}){const P=X(b,{style:je("dropdown-menu")});o?(w.out.push("<!--[-->"),o(w,{props:P,wrapperProps:N,...v.snippetProps}),w.out.push("<!---->")):(w.out.push("<!--[!-->"),w.out.push(`<div${H({...N},null)}><div${H({...P},null)}>`),i?.(w),w.out.push("<!----></div></div>")),w.out.push("<!--]-->")};yt(t,E([T,v.popperProps,{ref:v.opts.ref,open:v.parentMenu.opts.open.current,onInteractOutside:g,onEscapeKeydown:x,trapFocus:d,loop:u,forceMount:!1,id:n,popper:C,$$slots:{popper:!0}}]))}}t.out.push("<!--]-->")}t.out.push("<!--]-->"),O(e,{ref:r}),k()}function Qr(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,child:i,children:r,disabled:u=!1,type:h="button",$$slots:c,$$events:l,...a}=e;const d=is.create({id:_.with(()=>n),disabled:_.with(()=>u??!1),ref:_.with(()=>o,f=>o=f)}),m=X(a,d.props,{type:h});Qt(t,{id:n,ref:d.opts.ref,children:f=>{i?(f.out.push("<!--[-->"),i(f,{props:m}),f.out.push("<!---->")):(f.out.push("<!--[!-->"),f.out.push(`<button${H({...m},null)}>`),r?.(f),f.out.push("<!----></button>")),f.out.push("<!--]-->")}}),O(e,{ref:o}),k()}function yr(t,e){S();let{value:s=void 0,onValueChange:n=y,name:o="",disabled:i=!1,type:r,open:u=!1,onOpenChange:h=y,onOpenChangeComplete:c=y,loop:l=!1,scrollAlignment:a="nearest",required:d=!1,items:m=[],allowDeselect:f=!1,autocomplete:p,children:v}=e;function T(){s===void 0&&(s=r==="single"?"":[])}T(),te.pre(()=>s,()=>{T()});let g="";const x=Nr.create({type:r,value:_.with(()=>s,N=>{s=N,n(N)}),disabled:_.with(()=>i),required:_.with(()=>d),open:_.with(()=>u,N=>{u=N,h(N)}),loop:_.with(()=>l),scrollAlignment:_.with(()=>a),name:_.with(()=>o),isCombobox:!1,items:_.with(()=>m),allowDeselect:_.with(()=>f),inputValue:_.with(()=>g,N=>g=N),onOpenChangeComplete:_.with(()=>c)});let C=!0,w;function b(N){if(ys(N,{children:P=>{v?.(P),P.out.push("<!---->")}}),N.out.push("<!----> "),Array.isArray(x.opts.value.current)){if(N.out.push("<!--[-->"),x.opts.value.current.length){N.out.push("<!--[-->");const P=ee(x.opts.value.current);N.out.push("<!--[-->");for(let M=0,A=P.length;M<A;M++){let L=P[M];ks(N,{value:L,autocomplete:p})}N.out.push("<!--]-->")}else N.out.push("<!--[!-->");N.out.push("<!--]-->")}else N.out.push("<!--[!-->"),ks(N,{autocomplete:p,get value(){return x.opts.value.current},set value(P){x.opts.value.current=P,C=!1}});N.out.push("<!--]-->")}do C=!0,w=W(t),b(w);while(!C);G(t,w),O(e,{value:s,open:u}),k()}function $r(t,e){S();const s=se(t);let{id:n=ne(s),ref:o=null,child:i,children:r,type:u="button",$$slots:h,$$events:c,...l}=e;const a=Wt.create({id:_.with(()=>n),ref:_.with(()=>o,m=>o=m)}),d=X(l,a.props,{type:u});t.out.push("<!---->"),Qt(t,{id:n,ref:a.opts.ref,children:m=>{i?(m.out.push("<!--[-->"),i(m,{props:d}),m.out.push("<!---->")):(m.out.push("<!--[!-->"),m.out.push(`<button${H({...d},null)}>`),r?.(m),m.out.push("<!----></button>")),m.out.push("<!--]-->")}}),t.out.push("<!---->"),O(e,{ref:o}),k()}function ei(t,e){S();const s=se(t);let{children:n,child:o,id:i=ne(s),ref:r=null,side:u="top",sideOffset:h=0,align:c="center",avoidCollisions:l=!0,arrowPadding:a=0,sticky:d="partial",hideWhenDetached:m=!1,collisionPadding:f=0,onInteractOutside:p=y,onEscapeKeydown:v=y,forceMount:T=!1,$$slots:g,$$events:x,...C}=e;const w=Ho.create({id:_.with(()=>i),ref:_.with(()=>r,P=>r=P),onInteractOutside:_.with(()=>p),onEscapeKeydown:_.with(()=>v)}),N=X(C,{side:u,sideOffset:h,align:c,avoidCollisions:l,arrowPadding:a,sticky:d,hideWhenDetached:m,collisionPadding:f},w.props);if(T){t.out.push("<!--[-->");{let P=function(M,{props:A,wrapperProps:L}){const j=X(A,{style:je("tooltip")});o?(M.out.push("<!--[-->"),o(M,{props:j,wrapperProps:L,...w.snippetProps}),M.out.push("<!---->")):(M.out.push("<!--[!-->"),M.out.push(`<div${H({...L},null)}><div${H({...j},null)}>`),n?.(M),M.out.push("<!----></div></div>")),M.out.push("<!--]-->")};$t(t,E([N,w.popperProps,{enabled:w.root.opts.open.current,id:i,trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,ref:w.opts.ref,tooltip:!0,popper:P,$$slots:{popper:!0}}]))}}else{if(t.out.push("<!--[!-->"),T)t.out.push("<!--[!-->");else{t.out.push("<!--[-->");{let P=function(M,{props:A,wrapperProps:L}){const j=X(A,{style:je("tooltip")});o?(M.out.push("<!--[-->"),o(M,{props:j,wrapperProps:L,...w.snippetProps}),M.out.push("<!---->")):(M.out.push("<!--[!-->"),M.out.push(`<div${H({...L},null)}><div${H({...j},null)}>`),n?.(M),M.out.push("<!----></div></div>")),M.out.push("<!--]-->")};yt(t,E([N,w.popperProps,{open:w.root.opts.open.current,id:i,trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,ref:w.opts.ref,tooltip:!0,popper:P,$$slots:{popper:!0}}]))}}t.out.push("<!--]-->")}t.out.push("<!--]-->"),O(e,{ref:r}),k()}function ti(t,e){S();const s=se(t);let{children:n,child:o,id:i=ne(s),disabled:r=!1,type:u="button",ref:h=null,$$slots:c,$$events:l,...a}=e;const d=Wo.create({id:_.with(()=>i),disabled:_.with(()=>r??!1),ref:_.with(()=>h,f=>h=f)}),m=X(a,d.props,{type:u});Qt(t,{id:i,ref:d.opts.ref,tooltip:!0,children:f=>{o?(f.out.push("<!--[-->"),o(f,{props:m}),f.out.push("<!---->")):(f.out.push("<!--[!-->"),f.out.push(`<button${H({...m},null)}>`),n?.(f),f.out.push("<!----></button>")),f.out.push("<!--]-->")}}),O(e,{ref:h}),k()}function si(t,e){S();let{ref:s=null,$$slots:n,$$events:o,...i}=e,r=!0,u;function h(c){Tr(c,E([i,{get ref(){return s},set ref(l){s=l,r=!1}}]))}do r=!0,u=W(t),h(u);while(!r);G(t,u),O(e,{ref:s}),k()}let Ps=!1;class ni{static _refs=0;static _cleanup;constructor(){}get current(){return Ps}set current(e){Ps=e}}function rt(t,e){S();let{ref:s=null,class:n,$$slots:o,$$events:i,...r}=e,u=!0,h;function c(l){l.out.push("<!---->"),Go(l,E([{"data-slot":"dialog-title",class:J("text-lg leading-none font-semibold",n)},r,{get ref(){return s},set ref(a){s=a,u=!1}}])),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),O(e,{ref:s}),k()}function oi(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<div${H({"data-slot":"dialog-footer",class:re(J("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n)),...u},null)}>`),o?.(t),t.out.push("<!----></div>"),O(e,{ref:s}),k()}function dn(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<div${H({"data-slot":"dialog-header",class:re(J("flex flex-col gap-2 text-center sm:text-left",n)),...u},null)}>`),o?.(t),t.out.push("<!----></div>"),O(e,{ref:s}),k()}function pn(t,e){S();let{ref:s=null,class:n,$$slots:o,$$events:i,...r}=e,u=!0,h;function c(l){l.out.push("<!---->"),Vs(l,E([{"data-slot":"dialog-overlay",class:J("fixed inset-0 z-50 bg-black/50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0",n)},r,{get ref(){return s},set ref(a){s=a,u=!1}}])),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),O(e,{ref:s}),k()}function us(t,e){S();let{ref:s=null,class:n,portalProps:o,children:i,showCloseButton:r=!0,$$slots:u,$$events:h,...c}=e,l=!0,a;function d(m){m.out.push("<!---->"),fn(m,E([o,{children:f=>{f.out.push("<!---->"),pn(f,{}),f.out.push("<!----> <!---->"),Hs(f,E([{"data-slot":"dialog-content",class:J("fixed top-[50%] left-[50%] z-50 grid max-h-[100dvh] w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 overflow-y-auto rounded-lg border border-border/30 bg-background p-6 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 sm:max-w-lg md:max-h-[100vh]",n)},c,{get ref(){return s},set ref(p){s=p,l=!1},children:p=>{i?.(p),p.out.push("<!----> "),r?(p.out.push("<!--[-->"),p.out.push("<!---->"),Ws(p,{class:"absolute top-4 right-4 rounded-xs opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:v=>{Se(v,{}),v.out.push('<!----> <span class="sr-only">Close</span>')},$$slots:{default:!0}}),p.out.push("<!---->")):p.out.push("<!--[!-->"),p.out.push("<!--]-->")},$$slots:{default:!0}}])),f.out.push("<!---->")},$$slots:{default:!0}}])),m.out.push("<!---->")}do l=!0,a=W(t),d(a);while(!l);G(t,a),O(e,{ref:s}),k()}function ri(t,e){S();let{ref:s=null,class:n,$$slots:o,$$events:i,...r}=e,u=!0,h;function c(l){l.out.push("<!---->"),qo(l,E([{"data-slot":"dialog-description",class:J("text-sm text-muted-foreground",n)},r,{get ref(){return s},set ref(a){s=a,u=!1}}])),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),O(e,{ref:s}),k()}const ls=$s,fn=Ke;function ii(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"arrow-up"},o,{iconNode:[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function gn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"brain"},o,{iconNode:[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function ui(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"chart-no-axes-column"},o,{iconNode:[["line",{x1:"18",x2:"18",y1:"20",y2:"10"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function pt(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"check"},o,{iconNode:[["path",{d:"M20 6 9 17l-5-5"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function cs(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"chevron-down"},o,{iconNode:[["path",{d:"m6 9 6 6 6-6"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function mn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"chevron-left"},o,{iconNode:[["path",{d:"m15 18-6-6 6-6"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function li(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"chevron-up"},o,{iconNode:[["path",{d:"m18 15-6-6-6 6"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function vn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"chevron-right"},o,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function ci(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"chevrons-up-down"},o,{iconNode:[["path",{d:"m7 15 5 5 5-5"}],["path",{d:"m7 9 5-5 5 5"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function hi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"circle-check"},o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function ai(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"clock"},o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function di(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"code"},o,{iconNode:[["path",{d:"m16 18 6-6-6-6"}],["path",{d:"m8 6-6 6 6 6"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function bn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"copy"},o,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function pi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"database"},o,{iconNode:[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function fi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"download"},o,{iconNode:[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function xn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"eye"},o,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Oe(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"file-text"},o,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function gi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"file-x"},o,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"m14.5 12.5-5 5"}],["path",{d:"m9.5 12.5 5 5"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function wn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"file"},o,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function mi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"funnel"},o,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function vi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"gauge"},o,{iconNode:[["path",{d:"m12 14 4-4"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Cn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"image"},o,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Sn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"mic"},o,{iconNode:[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function bi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"minus"},o,{iconNode:[["path",{d:"M5 12h14"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function xi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"monitor"},o,{iconNode:[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function wi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"moon"},o,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Ns(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"music"},o,{iconNode:[["path",{d:"M9 18V5l12-2v13"}],["circle",{cx:"6",cy:"18",r:"3"}],["circle",{cx:"18",cy:"16",r:"3"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Ci(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"package"},o,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Si(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"paperclip"},o,{iconNode:[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Ct(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"rotate-ccw"},o,{iconNode:[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function hs(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"server"},o,{iconNode:[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function kn(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"settings"},o,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function ki(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"square"},o,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function _i(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"sun"},o,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Pi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"timer-off"},o,{iconNode:[["path",{d:"M10 2h4"}],["path",{d:"M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"}],["path",{d:"M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"}],["path",{d:"m2 2 20 20"}],["path",{d:"M12 12v-2"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Ni(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"upload"},o,{iconNode:[["path",{d:"M12 3v12"}],["path",{d:"m17 8-5-5-5 5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Mi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"volume-2"},o,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Ti(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"whole-word"},o,{iconNode:[["circle",{cx:"7",cy:"12",r:"3"}],["path",{d:"M10 9v6"}],["circle",{cx:"17",cy:"12",r:"3"}],["path",{d:"M14 7v8"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}function Fi(t,e){S();let{$$slots:s,$$events:n,...o}=e;V(t,E([{name:"wrench"},o,{iconNode:[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}]],children:r=>{o.children?.(r),r.out.push("<!---->")},$$slots:{default:!0}}])),k()}async function Ms(t){throw new Error("PDF processing is only available in the browser")}async function _n(t,e=1.5){throw new Error("PDF processing is only available in the browser")}function St(t){if(t===0)return"0 Bytes";const e=1024,s=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+s[n]}function Ii(t){return t.split("/").pop()?.toUpperCase()||"FILE"}function Ts(t){return t.length>150?t.substring(0,150)+"...":t}function Di(t,e){S();let{open:s=void 0,uploadedFile:n,attachment:o,preview:i,name:r,type:u,size:h,textContent:c}=e,l=n?.name||o?.name||r||"Unknown File",a=n?.preview||(o?.type==="imageFile"?o.base64Url:i),d=n?.type||(o?.type==="imageFile"?"image":o?.type==="textFile"?"text":o?.type==="audioFile"?o.mimeType||"audio":o?.type==="pdfFile"?ze.PDF:u||"unknown"),m=n?.size||h,f=n?.textContent||(o?.type==="textFile"||o?.type==="pdfFile"?o.content:c),p=oe(d)===q.AUDIO||d==="audio",v=oe(d)===q.IMAGE||d==="image",T=d===ze.PDF,g=oe(d)===q.TEXT||d==="text",x=()=>v?Cn:g||T?Oe:p?Ns:wn,C="pages",w=[],b=!1,N=null;async function P(){if(!(!T||w.length>0||b)){b=!0,N=null;try{let j=null;if(n?.file)j=n.file;else if(o?.type==="pdfFile"){if(o.images&&Array.isArray(o.images)){w=o.images;return}if(o.base64Data){const U=o.base64Data,D=atob(U),z=new Array(D.length);for(let $=0;$<D.length;$++)z[$]=D.charCodeAt($);const I=new Uint8Array(z);j=new File([I],l,{type:ze.PDF})}}if(j)w=await _n(j);else throw new Error("No PDF file available for conversion")}catch(j){N=j instanceof Error?j.message:"Failed to load PDF images"}finally{b=!1}}}let M=!0,A;function L(j){j.out.push("<!---->"),ls(j,{get open(){return s},set open(U){s=U,M=!1},children:U=>{U.out.push("<!---->"),us(U,{class:"grid max-h-[90vh] max-w-5xl overflow-hidden !p-10 sm:w-auto sm:max-w-6xl",children:D=>{if(D.out.push("<!---->"),dn(D,{class:"flex-shrink-0",children:z=>{z.out.push('<div class="flex items-center justify-between"><div class="flex items-center gap-3">'),x?(z.out.push("<!--[-->"),z.out.push("<!---->"),z.out.push("<!---->")):z.out.push("<!--[!-->"),z.out.push("<!--]--> <div><!---->"),rt(z,{class:"text-left",children:I=>{I.out.push(`<!---->${F(l)}`)},$$slots:{default:!0}}),z.out.push(`<!----> <div class="flex items-center gap-2 text-sm text-muted-foreground"><span>${F(d)}</span> `),m?(z.out.push("<!--[-->"),z.out.push(`<span></span> <span>${F(St(m))}</span>`)):z.out.push("<!--[!-->"),z.out.push("<!--]--></div></div></div> "),T?(z.out.push("<!--[-->"),z.out.push('<div class="flex items-center gap-2">'),Y(z,{variant:C==="text"?"default":"outline",size:"sm",onclick:()=>C="text",disabled:b,children:I=>{Oe(I,{class:"mr-1 h-4 w-4"}),I.out.push("<!----> Text")},$$slots:{default:!0}}),z.out.push("<!----> "),Y(z,{variant:C==="pages"?"default":"outline",size:"sm",onclick:()=>{C="pages",P()},disabled:b,children:I=>{b?(I.out.push("<!--[-->"),I.out.push('<div class="mr-1 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"></div>')):(I.out.push("<!--[!-->"),xn(I,{class:"mr-1 h-4 w-4"})),I.out.push("<!--]--> Pages")},$$slots:{default:!0}}),z.out.push("<!----></div>")):z.out.push("<!--[!-->"),z.out.push("<!--]--></div>")},$$slots:{default:!0}}),D.out.push('<!----> <div class="flex-1 overflow-auto">'),v&&a)D.out.push("<!--[-->"),D.out.push(`<div class="flex items-center justify-center"><img${Z("src",a)}${Z("alt",l)} class="max-h-full rounded-lg object-contain shadow-lg"/></div>`);else{if(D.out.push("<!--[!-->"),T&&C==="pages"){if(D.out.push("<!--[-->"),b)D.out.push("<!--[-->"),D.out.push('<div class="flex items-center justify-center p-8"><div class="text-center"><div class="mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"></div> <p class="text-muted-foreground">Converting PDF to images...</p></div></div>');else{if(D.out.push("<!--[!-->"),N)D.out.push("<!--[-->"),D.out.push('<div class="flex items-center justify-center p-8"><div class="text-center">'),Oe(D,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),D.out.push(`<!----> <p class="mb-4 text-muted-foreground">Failed to load PDF images</p> <p class="text-sm text-muted-foreground">${F(N)}</p> `),Y(D,{class:"mt-4",onclick:()=>C="text",children:z=>{z.out.push("<!---->View as Text")},$$slots:{default:!0}}),D.out.push("<!----></div></div>");else{if(D.out.push("<!--[!-->"),w.length>0){D.out.push("<!--[-->");const z=ee(w);D.out.push('<div class="max-h-[70vh] space-y-4 overflow-auto"><!--[-->');for(let I=0,$=z.length;I<$;I++){let Q=z[I];D.out.push(`<div class="text-center"><p class="mb-2 text-sm text-muted-foreground">Page ${F(I+1)}</p> <img${Z("src",Q)}${Z("alt",`PDF Page ${R(I+1)}`)} class="mx-auto max-w-full rounded-lg shadow-lg"/></div>`)}D.out.push("<!--]--></div>")}else D.out.push("<!--[!-->"),D.out.push('<div class="flex items-center justify-center p-8"><div class="text-center">'),Oe(D,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),D.out.push('<!----> <p class="mb-4 text-muted-foreground">No PDF pages available</p></div></div>');D.out.push("<!--]-->")}D.out.push("<!--]-->")}D.out.push("<!--]-->")}else D.out.push("<!--[!-->"),(g||T&&C==="text")&&f?(D.out.push("<!--[-->"),D.out.push(`<div class="max-h-[60vh] overflow-auto rounded-lg bg-muted p-4 font-mono text-sm break-words whitespace-pre-wrap">${F(f)}</div>`)):(D.out.push("<!--[!-->"),p?(D.out.push("<!--[-->"),D.out.push('<div class="flex items-center justify-center p-8"><div class="w-full max-w-md text-center">'),Ns(D,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),D.out.push("<!----> "),o?.type==="audioFile"?(D.out.push("<!--[-->"),D.out.push(`<audio controls class="mb-4 w-full"${Z("src",`data:${R(o.mimeType)};base64,${R(o.base64Data)}`)}>Your browser does not support the audio element.</audio>`)):(D.out.push("<!--[!-->"),n?.preview?(D.out.push("<!--[-->"),D.out.push(`<audio controls class="mb-4 w-full"${Z("src",n.preview)}>Your browser does not support the audio element.</audio>`)):(D.out.push("<!--[!-->"),D.out.push('<p class="mb-4 text-muted-foreground">Audio preview not available</p>')),D.out.push("<!--]-->")),D.out.push(`<!--]--> <p class="text-sm text-muted-foreground">${F(l)}</p></div></div>`)):(D.out.push("<!--[!-->"),D.out.push('<div class="flex items-center justify-center p-8"><div class="text-center">'),x?(D.out.push("<!--[-->"),D.out.push("<!---->"),D.out.push("<!---->")):D.out.push("<!--[!-->"),D.out.push('<!--]--> <p class="mb-4 text-muted-foreground">Preview not available for this file type</p></div></div>')),D.out.push("<!--]-->")),D.out.push("<!--]-->");D.out.push("<!--]-->")}D.out.push("<!--]--></div>")},$$slots:{default:!0}}),U.out.push("<!---->")},$$slots:{default:!0}}),j.out.push("<!---->")}do M=!0,A=W(t),L(A);while(!M);G(t,A),O(e,{open:s}),k()}function Pn(t,e){S();let{class:s="",attachments:n=[],readonly:o=!1,onFileRemove:i,uploadedFiles:r=[],imageClass:u="",imageHeight:h="h-24",imageWidth:c="w-auto"}=e,l=m(),a=!1,d=null;function m(){const g=[];for(const x of r)g.push({id:x.id,name:x.name,size:x.size,preview:x.preview,type:x.type,isImage:oe(x.type)===q.IMAGE,uploadedFile:x,textContent:x.textContent});for(const[x,C]of n.entries())C.type==="imageFile"?g.push({id:`attachment-${x}`,name:C.name,preview:C.base64Url,type:"image",isImage:!0,attachment:C,attachmentIndex:x}):C.type==="textFile"?g.push({id:`attachment-${x}`,name:C.name,type:"text",isImage:!1,attachment:C,attachmentIndex:x,textContent:C.content}):C.type==="context"?g.push({id:`attachment-${x}`,name:C.name,type:"text",isImage:!1,attachment:C,attachmentIndex:x,textContent:C.content}):C.type==="audioFile"?g.push({id:`attachment-${x}`,name:C.name,type:C.mimeType||"audio",isImage:!1,attachment:C,attachmentIndex:x}):C.type==="pdfFile"&&g.push({id:`attachment-${x}`,name:C.name,type:"application/pdf",isImage:!1,attachment:C,attachmentIndex:x,textContent:C.content});return g}function f(g,x){x&&(x.preventDefault(),x.stopPropagation()),d={uploadedFile:g.uploadedFile,attachment:g.attachment,preview:g.preview,name:g.name,type:g.type,size:g.size,textContent:g.textContent},a=!0}let p=!0,v;function T(g){if(l.length>0){g.out.push("<!--[-->");const x=ee(l);g.out.push(`<div${K(`flex flex-wrap items-start ${R(o?"justify-end":"")} gap-3 ${R(s)}`)}><!--[-->`);for(let C=0,w=x.length;C<w;C++){let b=x[C];b.isImage&&b.preview?(g.out.push("<!--[-->"),Ai(g,{class:"cursor-pointer",id:b.id,name:b.name,preview:b.preview,readonly:o,onRemove:i,height:h,width:c,imageClass:u,onClick:N=>f(b,N)})):(g.out.push("<!--[!-->"),Ei(g,{class:"cursor-pointer",id:b.id,name:b.name,type:b.type,size:b.size,readonly:o,onRemove:i,textContent:b.textContent})),g.out.push("<!--]-->")}g.out.push("<!--]--></div>")}else g.out.push("<!--[!-->");g.out.push("<!--]--> "),d?(g.out.push("<!--[-->"),Di(g,{uploadedFile:d.uploadedFile,attachment:d.attachment,preview:d.preview,name:d.name,type:d.type,size:d.size,textContent:d.textContent,get open(){return a},set open(x){a=x,p=!1}})):g.out.push("<!--[!-->"),g.out.push("<!--]-->")}do p=!0,v=W(t),T(v);while(!p);G(t,v),O(e,{uploadedFiles:r}),k()}function Ei(t,e){S();let{class:s="",id:n,onRemove:o,name:i,readonly:r=!1,size:u,textContent:h,type:c}=e;c===Dt.PLAIN||c===q.TEXT?(t.out.push("<!--[-->"),r?(t.out.push("<!--[-->"),t.out.push(`<button${K(`cursor-pointer rounded-lg border border-border bg-muted p-3 transition-shadow hover:shadow-md ${R(s)} w-full max-w-2xl`)}${Z("aria-label",`Preview ${i}`)} type="button"><div class="flex items-start gap-3"><div class="flex min-w-0 flex-1 flex-col items-start text-left"><span class="w-full truncate text-sm font-medium text-foreground">${F(i)}</span> `),u?(t.out.push("<!--[-->"),t.out.push(`<span class="text-xs text-muted-foreground">${F(St(u))}</span>`)):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),h&&c==="text"?(t.out.push("<!--[-->"),t.out.push(`<div class="relative mt-2 w-full"><div class="overflow-hidden font-mono text-xs leading-relaxed break-words whitespace-pre-wrap text-muted-foreground">${F(Ts(h))}</div> `),h.length>150?(t.out.push("<!--[-->"),t.out.push('<div class="pointer-events-none absolute right-0 bottom-0 left-0 h-6 bg-gradient-to-t from-muted to-transparent"></div>')):t.out.push("<!--[!-->"),t.out.push("<!--]--></div>")):t.out.push("<!--[!-->"),t.out.push("<!--]--></div></div></button>")):(t.out.push("<!--[!-->"),t.out.push(`<div${K(`relative rounded-lg border border-border bg-muted p-3 ${R(s)} w-64`)}>`),Y(t,{type:"button",variant:"ghost",size:"sm",class:"absolute top-2 right-2 h-6 w-6 bg-white/20 p-0 hover:bg-white/30",onclick:()=>o?.(n),"aria-label":"Remove file",children:l=>{Se(l,{class:"h-3 w-3"})},$$slots:{default:!0}}),t.out.push(`<!----> <div class="pr-8"><span class="mb-3 block truncate text-sm font-medium text-foreground">${F(i)}</span> `),h?(t.out.push("<!--[-->"),t.out.push(`<div class="relative"><div class="overflow-hidden font-mono text-xs leading-relaxed break-words whitespace-pre-wrap text-muted-foreground" style="max-height: 3.6em; line-height: 1.2em;">${F(Ts(h))}</div> `),h.length>150?(t.out.push("<!--[-->"),t.out.push('<div class="pointer-events-none absolute right-0 bottom-0 left-0 h-4 bg-gradient-to-t from-muted to-transparent"></div>')):t.out.push("<!--[!-->"),t.out.push("<!--]--></div>")):t.out.push("<!--[!-->"),t.out.push("<!--]--></div></div>")),t.out.push("<!--]-->")):(t.out.push("<!--[!-->"),t.out.push(`<button${K(`flex items-center gap-2 gap-3 rounded-lg border border-border bg-muted p-3 ${R(s)}`)}><div class="flex h-8 w-8 items-center justify-center rounded bg-primary/10 text-xs font-medium text-primary">${F(Ii(c))}</div> <div class="flex flex-col gap-1"><span class="max-w-36 truncate text-sm font-medium text-foreground md:max-w-72">${F(i)}</span> `),u?(t.out.push("<!--[-->"),t.out.push(`<span class="text-left text-xs text-muted-foreground">${F(St(u))}</span>`)):t.out.push("<!--[!-->"),t.out.push("<!--]--></div> "),r?t.out.push("<!--[!-->"):(t.out.push("<!--[-->"),Y(t,{type:"button",variant:"ghost",size:"sm",class:"h-6 w-6 p-0",onclick:l=>{l.stopPropagation(),o?.(n)},children:l=>{Se(l,{class:"h-3 w-3"})},$$slots:{default:!0}})),t.out.push("<!--]--></button>")),t.out.push("<!--]-->"),k()}function Ai(t,e){S();let{id:s,name:n,preview:o,readonly:i=!1,onRemove:r,onClick:u,class:h="",width:c="w-auto",height:l="h-24",imageClass:a=""}=e;t.out.push(`<div${K(`relative overflow-hidden rounded-lg border border-border bg-muted ${R(h)}`)}>`),u?(t.out.push("<!--[-->"),t.out.push(`<button type="button" class="block h-full w-full rounded-lg focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:outline-none"${Z("aria-label",`Preview ${R(n)}`)}><img${Z("src",o)}${Z("alt",n)}${K(`${R(l)} ${R(c)} cursor-pointer object-cover ${R(a)}`)}/></button>`)):(t.out.push("<!--[!-->"),t.out.push(`<img${Z("src",o)}${Z("alt",n)}${K(`${R(l)} ${R(c)} cursor-pointer object-cover ${R(a)}`)}/>`)),t.out.push("<!--]--> "),i?t.out.push("<!--[!-->"):(t.out.push("<!--[-->"),t.out.push('<div class="absolute top-1 right-1 flex items-center justify-center opacity-0 transition-opacity hover:opacity-100">'),Y(t,{type:"button",variant:"ghost",size:"sm",class:"h-6 w-6 bg-white/20 p-0 text-white hover:bg-white/30",onclick:()=>r?.(s),children:d=>{Se(d,{class:"h-3 w-3"})},$$slots:{default:!0}}),t.out.push("<!----></div>")),t.out.push("<!--]--></div>"),k()}const as=`
    bg-muted/70 dark:bg-muted/85
    border border-border/30 focus-within:border-border  dark:border-border/20 dark:focus-within:border-border
    outline-none
    text-foreground
`;function Nn(t){return t.isComposing||t.keyCode===229}function Fs(t,e){S();let{class:s,disabled:n=!1,isLoading:o=!1,onFileRemove:i,onFileUpload:r,onSend:u,onStop:h,showHelperText:c=!0,uploadedFiles:l=[]}=e,a=ie(),d,m=!1,f="";Number(a.pasteLongTextToFileLen);function p(P){switch(P){case q.IMAGE:return[...Object.values(Xs),...Object.values(Fe)].join(",");case q.AUDIO:return[...Object.values(qs),...Object.values(Ys)].join(",");case q.PDF:return[...Object.values(Gs),...Object.values(ze)].join(",");case q.TEXT:return[...Object.values(Et),Dt.PLAIN].join(",");default:return""}}function v(P){r?.(P)}function T(P){P?d=p(P):d=void 0,setTimeout(()=>{},10)}async function g(P){if(P.key==="Enter"&&!P.shiftKey&&!Nn(P)){if(P.preventDefault(),!f.trim()&&l.length===0||n||o)return;const M=f.trim(),A=[...l];f="",l=[],await u?.(M,A)||(f=M,l=A)}}async function x(){{console.warn("Audio recording not supported");return}}function C(){h?.()}let w=!0,b;function N(P){Gi(P,{onFileSelect:v,get accept(){return d},set accept(M){d=M,w=!1}}),P.out.push(`<!----> <form${K(`${R(as)} border-radius-bottom-none mx-auto max-w-[48rem] overflow-hidden rounded-3xl backdrop-blur-md ${R(s)}`)}>`),Pn(P,{onFileRemove:i,class:"mb-3 px-5 pt-5",get uploadedFiles(){return l},set uploadedFiles(M){l=M,w=!1}}),P.out.push('<!----> <div class="flex-column relative min-h-[48px] items-center rounded-3xl px-5 py-3 shadow-sm transition-all focus-within:shadow-md">'),Oi(P,{onKeydown:g,disabled:n,get value(){return f},set value(M){f=M,w=!1}}),P.out.push("<!----> "),Ki(P,{canSend:f.trim().length>0||l.length>0,disabled:n,isLoading:o,isRecording:m,onFileUpload:T,onMicClick:x,onStop:C}),P.out.push("<!----></div></form> "),Vi(P,{show:c}),P.out.push("<!---->")}do w=!0,b=W(t),N(b);while(!w);G(t,b),O(e,{uploadedFiles:l}),k()}function Oi(t,e){S();let{class:s="",disabled:n=!1,onKeydown:o,onPaste:i,placeholder:r="Ask anything...",value:u=""}=e,h;function c(){return h}function l(){}function a(){}t.out.push(`<div${K(`flex-1 ${R(s)}`)}><textarea${K("text-md max-h-32 min-h-12 w-full resize-none border-0 bg-transparent p-0 leading-6 outline-none placeholder:text-muted-foreground focus-visible:ring-0 focus-visible:ring-offset-0",void 0,{"cursor-not-allowed":n})}${Z("disabled",n,!0)}${Z("placeholder",r)}>`);const d=F(u);d&&t.out.push(`${d}`),t.out.push("</textarea></div>"),O(e,{value:u,getElement:c,focus:l,resetHeight:a}),k()}function Ri(t,e){S();let{ref:s=null,sideOffset:n=4,portalProps:o,class:i,$$slots:r,$$events:u,...h}=e,c=!0,l;function a(d){d.out.push("<!---->"),Ke(d,E([o,{children:m=>{m.out.push("<!---->"),Zr(m,E([{"data-slot":"dropdown-menu-content",sideOffset:n,class:J("z-50 max-h-(--bits-dropdown-menu-content-available-height) min-w-[8rem] origin-(--bits-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-md outline-none data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 dark:border-border/20",i)},h,{get ref(){return s},set ref(f){s=f,c=!1}}])),m.out.push("<!---->")},$$slots:{default:!0}}])),d.out.push("<!---->")}do c=!0,l=W(t),a(l);while(!c);G(t,l),O(e,{ref:s}),k()}function Qe(t,e){S();let{ref:s=null,class:n,inset:o,variant:i="default",$$slots:r,$$events:u,...h}=e,c=!0,l;function a(d){d.out.push("<!---->"),Xr(d,E([{"data-slot":"dropdown-menu-item","data-inset":o,"data-variant":i,class:J("relative flex cursor-pointer items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-highlighted:bg-accent data-highlighted:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 data-[variant=destructive]:text-destructive data-[variant=destructive]:data-highlighted:bg-destructive/10 data-[variant=destructive]:data-highlighted:text-destructive dark:data-[variant=destructive]:data-highlighted:bg-destructive/20 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground data-[variant=destructive]:*:[svg]:!text-destructive",n)},h,{get ref(){return s},set ref(m){s=m,c=!1}}])),d.out.push("<!---->")}do c=!0,l=W(t),a(l);while(!c);G(t,l),O(e,{ref:s}),k()}function zi(t,e){S();let{ref:s=null,$$slots:n,$$events:o,...i}=e,r=!0,u;function h(c){c.out.push("<!---->"),Qr(c,E([{"data-slot":"dropdown-menu-trigger"},i,{get ref(){return s},set ref(l){s=l,r=!1}}])),c.out.push("<!---->")}do r=!0,u=W(t),h(u);while(!r);G(t,u),O(e,{ref:s}),k()}const Ui=Jr;function ve(t,e){S();let{ref:s=null,$$slots:n,$$events:o,...i}=e,r=!0,u;function h(c){c.out.push("<!---->"),ti(c,E([{"data-slot":"tooltip-trigger"},i,{get ref(){return s},set ref(l){s=l,r=!1}}])),c.out.push("<!---->")}do r=!0,u=W(t),h(u);while(!r);G(t,u),O(e,{ref:s}),k()}function be(t,e){S();let{ref:s=null,class:n,sideOffset:o=0,side:i="top",children:r,arrowClasses:u,$$slots:h,$$events:c,...l}=e,a=!0,d;function m(f){f.out.push("<!---->"),Ke(f,{children:p=>{p.out.push("<!---->"),ei(p,E([{"data-slot":"tooltip-content",sideOffset:o,side:i,class:J("z-50 w-fit origin-(--bits-tooltip-content-transform-origin) animate-in rounded-md bg-primary px-3 py-1.5 text-xs text-balance text-primary-foreground fade-in-0 zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",n)},l,{get ref(){return s},set ref(v){s=v,a=!1},children:v=>{r?.(v),v.out.push("<!----> <!---->"),si(v,{child:function(g,{props:x}){g.out.push(`<div${H({class:re(J("z-50 size-2.5 rotate-45 rounded-[2px] bg-primary","data-[side=top]:translate-x-1/2 data-[side=top]:translate-y-[calc(-50%_+_2px)]","data-[side=bottom]:-translate-x-1/2 data-[side=bottom]:-translate-y-[calc(-50%_+_1px)]","data-[side=right]:translate-x-[calc(50%_+_2px)] data-[side=right]:translate-y-1/2","data-[side=left]:-translate-y-[calc(50%_-_3px)]",u)),...x},null)}></div>`)},$$slots:{child:!0}}),v.out.push("<!---->")},$$slots:{default:!0}}])),p.out.push("<!---->")}}),f.out.push("<!---->")}do a=!0,d=W(t),m(d);while(!a);G(t,d),O(e,{ref:s}),k()}const Re=100;function Li(t,e){S();let{class:s="",disabled:n=!1,onFileUpload:o}=e;const i=le()?"Attach files":"Text files and PDFs supported. Images, audio, and video require vision models.";function r(u){o?.(u)}t.out.push(`<div${K(`flex items-center gap-1 ${R(s)}`)}><!---->`),Ui(t,{children:u=>{u.out.push("<!---->"),zi(u,{name:"Attach files",children:h=>{h.out.push("<!---->"),me(h,{delayDuration:Re,children:c=>{c.out.push("<!---->"),ve(c,{children:l=>{Y(l,{class:"file-upload-button h-8 w-8 rounded-full bg-transparent p-0 text-muted-foreground hover:bg-foreground/10 hover:text-foreground",disabled:n,type:"button",children:a=>{a.out.push('<span class="sr-only">Attach files</span> '),Si(a,{class:"h-4 w-4"}),a.out.push("<!---->")},$$slots:{default:!0}})},$$slots:{default:!0}}),c.out.push("<!----> <!---->"),be(c,{children:l=>{l.out.push(`<p>${F(i)}</p>`)},$$slots:{default:!0}}),c.out.push("<!---->")},$$slots:{default:!0}}),h.out.push("<!---->")},$$slots:{default:!0}}),u.out.push("<!----> <!---->"),Ri(u,{align:"start",class:"w-48",children:h=>{h.out.push("<!---->"),me(h,{delayDuration:Re,children:c=>{c.out.push("<!---->"),ve(c,{class:"w-full",children:l=>{l.out.push("<!---->"),Qe(l,{class:"images-button flex cursor-pointer items-center gap-2",disabled:!le(),onclick:()=>r(q.IMAGE),children:a=>{Cn(a,{class:"h-4 w-4"}),a.out.push("<!----> <span>Images</span>")},$$slots:{default:!0}}),l.out.push("<!---->")},$$slots:{default:!0}}),c.out.push("<!----> "),le()?c.out.push("<!--[!-->"):(c.out.push("<!--[-->"),c.out.push("<!---->"),be(c,{children:l=>{l.out.push("<p>Images require vision models to be processed</p>")},$$slots:{default:!0}}),c.out.push("<!---->")),c.out.push("<!--]-->")},$$slots:{default:!0}}),h.out.push("<!----> <!---->"),me(h,{delayDuration:Re,children:c=>{c.out.push("<!---->"),ve(c,{class:"w-full",children:l=>{l.out.push("<!---->"),Qe(l,{class:"audio-button flex cursor-pointer items-center gap-2",disabled:!Ce(),onclick:()=>r(q.AUDIO),children:a=>{Mi(a,{class:"h-4 w-4"}),a.out.push("<!----> <span>Audio Files</span>")},$$slots:{default:!0}}),l.out.push("<!---->")},$$slots:{default:!0}}),c.out.push("<!----> "),Ce()?c.out.push("<!--[!-->"):(c.out.push("<!--[-->"),c.out.push("<!---->"),be(c,{children:l=>{l.out.push("<p>Audio files require audio models to be processed</p>")},$$slots:{default:!0}}),c.out.push("<!---->")),c.out.push("<!--]-->")},$$slots:{default:!0}}),h.out.push("<!----> <!---->"),Qe(h,{class:"flex cursor-pointer items-center gap-2",onclick:()=>r(q.TEXT),children:c=>{Oe(c,{class:"h-4 w-4"}),c.out.push("<!----> <span>Text Files</span>")},$$slots:{default:!0}}),h.out.push("<!----> <!---->"),me(h,{delayDuration:Re,children:c=>{c.out.push("<!---->"),ve(c,{class:"w-full",children:l=>{l.out.push("<!---->"),Qe(l,{class:"flex cursor-pointer items-center gap-2",onclick:()=>r(q.PDF),children:a=>{wn(a,{class:"h-4 w-4"}),a.out.push("<!----> <span>PDF Files</span>")},$$slots:{default:!0}}),l.out.push("<!---->")},$$slots:{default:!0}}),c.out.push("<!----> "),le()?c.out.push("<!--[!-->"):(c.out.push("<!--[-->"),c.out.push("<!---->"),be(c,{children:l=>{l.out.push("<p>PDFs will be converted to text. Image-based PDFs may not work properly.</p>")},$$slots:{default:!0}}),c.out.push("<!---->")),c.out.push("<!--]-->")},$$slots:{default:!0}}),h.out.push("<!---->")},$$slots:{default:!0}}),u.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!----></div>"),k()}function Bi(t,e){S();let{class:s="",disabled:n=!1,isLoading:o=!1,isRecording:i=!1,onMicClick:r}=e;t.out.push(`<div${K(`flex items-center gap-1 ${R(s)}`)}><!---->`),me(t,{delayDuration:100,children:u=>{u.out.push("<!---->"),ve(u,{children:h=>{Y(h,{class:`h-8 w-8 rounded-full p-0 ${R(i?"animate-pulse bg-red-500 text-white hover:bg-red-600":"bg-transparent text-muted-foreground hover:bg-foreground/10 hover:text-foreground")} ${R(Ce()?"":"cursor-not-allowed opacity-50")}`,disabled:n||o||!Ce(),onclick:r,type:"button",children:c=>{c.out.push(`<span class="sr-only">${F(i?"Stop recording":"Start recording")}</span> `),Sn(c,{class:"h-4 w-4"}),c.out.push("<!---->")},$$slots:{default:!0}})},$$slots:{default:!0}}),u.out.push("<!----> "),Ce()?u.out.push("<!--[!-->"):(u.out.push("<!--[-->"),u.out.push("<!---->"),be(u,{children:h=>{h.out.push("<p>Current model does not support audio</p>")},$$slots:{default:!0}}),u.out.push("<!---->")),u.out.push("<!--]-->")},$$slots:{default:!0}}),t.out.push("<!----></div>"),k()}function ji(t,e){S();let{class:s=""}=e,n=Po(),o=No(),i=Mo(),r=To(),u=Fo(),h=!1;function c(){return u?n.find(l=>l.id===u):n[0]}if(t.out.push(`<div${K(re(J("relative z-10 flex max-w-[200px] min-w-[120px] flex-col items-end gap-1",s)))}>`),o&&n.length===0)t.out.push("<!--[-->"),t.out.push('<div class="flex items-center gap-2 text-xs text-muted-foreground">'),nt(t,{class:"h-4 w-4 animate-spin"}),t.out.push("<!----> Loading models</div>");else{if(t.out.push("<!--[!-->"),n.length===0)t.out.push("<!--[-->"),t.out.push('<p class="text-xs text-muted-foreground">No models available.</p>');else{t.out.push("<!--[!-->");const l=c();t.out.push(`<div class="relative w-full"><button type="button"${K(re(J("flex w-full items-center justify-end gap-2 rounded-md px-2 py-1 text-sm text-muted-foreground transition hover:text-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60","")))} aria-haspopup="listbox"${Z("aria-expanded",h)}${Z("disabled",o||i,!0)}><span class="max-w-[160px] truncate text-right font-medium">${F(l?.name||"Select model")}</span> `),i?(t.out.push("<!--[-->"),nt(t,{class:"h-3.5 w-3.5 animate-spin text-muted-foreground"})):(t.out.push("<!--[!-->"),cs(t,{class:J("h-4 w-4 text-muted-foreground transition-transform","")})),t.out.push("<!--]--></button> "),t.out.push("<!--[!-->"),t.out.push("<!--]--></div>")}t.out.push("<!--]-->")}t.out.push("<!--]--> "),r?(t.out.push("<!--[-->"),t.out.push(`<p class="text-xs text-destructive">${F(r)}</p>`)):t.out.push("<!--[!-->"),t.out.push("<!--]--></div>"),k()}function Ki(t,e){S();let{canSend:s=!1,class:n="",disabled:o=!1,isLoading:i=!1,isRecording:r=!1,onFileUpload:u,onMicClick:h,onStop:c}=e,l=ie();t.out.push(`<div${K(`flex w-full items-center gap-2 ${R(n)}`)}>`),Li(t,{class:"mr-auto",disabled:o,onFileUpload:u}),t.out.push("<!----> "),l.modelSelectorEnabled?(t.out.push("<!--[-->"),ji(t,{class:"shrink-0"})):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),i?(t.out.push("<!--[-->"),Y(t,{type:"button",onclick:c,class:"h-8 w-8 bg-transparent p-0 hover:bg-destructive/20",children:a=>{a.out.push('<span class="sr-only">Stop</span> '),ki(a,{class:"h-8 w-8 fill-destructive stroke-destructive"}),a.out.push("<!---->")},$$slots:{default:!0}})):(t.out.push("<!--[!-->"),Bi(t,{disabled:o,isLoading:i,isRecording:r,onMicClick:h}),t.out.push("<!----> "),Y(t,{type:"submit",disabled:!s||o||i,class:"h-8 w-8 rounded-full p-0",children:a=>{a.out.push('<span class="sr-only">Send</span> '),ii(a,{class:"h-12 w-12"}),a.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->")),t.out.push("<!--]--></div>"),k()}function Vi(t,e){let{class:s="",show:n=!0}=e;n?(t.out.push("<!--[-->"),t.out.push(`<div${K(`mt-4 flex items-center justify-center ${R(s)}`)}><p class="text-xs text-muted-foreground">Press <kbd class="rounded bg-muted px-1 py-0.5 font-mono text-xs">Enter</kbd> to send, <kbd class="rounded bg-muted px-1 py-0.5 font-mono text-xs">Shift + Enter</kbd> for new line</p></div>`)):t.out.push("<!--[!-->"),t.out.push("<!--]-->")}function Hi(t){const e=[],s=[],n={},o=le(),i=Ce();for(const r of t){const u=oe(r.type);let h=!0,c="";switch(u){case q.IMAGE:o||(h=!1,c="Images require a vision-capable model");break;case q.AUDIO:i||(h=!1,c="Audio files require an audio-capable model");break;case q.TEXT:case q.PDF:break}h?e.push(r):(s.push(r),n[r.name]=c)}return{supportedFiles:e,unsupportedFiles:s,modalityReasons:n}}function Wi(){const t=le(),e=Ce(),s=[],n=[];return s.push(...Object.values(Et)),n.push(...Object.values(Dt)),s.push(...Object.values(Gs)),n.push(...Object.values(ze)),t&&(s.push(...Object.values(Xs)),n.push(...Object.values(Fe))),e&&(s.push(...Object.values(qs)),n.push(...Object.values(Ys))),[...s,...n].join(",")}function Gi(t,e){S();let{accept:s=void 0,class:n="",multiple:o=!0,onFileSelect:i}=e,r=s??Wi();function u(){}t.out.push(`<input type="file"${Z("multiple",o,!0)}${Z("accept",r)}${K(`hidden ${R(n)}`)}/>`),O(e,{accept:s,click:u}),k()}async function qi(t,e="Copied to clipboard",s="Failed to copy to clipboard"){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(t),xe.success(e),!0;const n=document.createElement("textarea");n.value=t,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();const o=document.execCommand("copy");if(document.body.removeChild(n),o)return xe.success(e),!0;throw new Error("execCommand failed")}catch(n){return console.error("Failed to copy to clipboard:",n),xe.error(s),!1}}function Mn(){let t=!1,e=null,s=null,n=null;async function o(){if(!t){t=!0,n=Ze.subscribe(c=>{e=c,c?s=c:s=null});try{const c=await Ze.getCurrentState();c&&(e=c,s=c),Ze.isStreaming()&&Ze.startStreaming()}catch(c){console.warn("Failed to start slots monitoring:",c)}}}function i(){if(!t)return;t=!1,ie().keepStatsVisible?s&&(e=s):e=null,n&&(n(),n=null)}function r(){if(!e)return"Processing...";switch(e.status){case"initializing":return"Initializing...";case"preparing":return e.progressPercent!==void 0?`Processing (${e.progressPercent}%)`:"Preparing response...";case"generating":return e.tokensDecoded>0?`Generating... (${e.tokensDecoded} tokens)`:"Generating...";default:return"Processing..."}}function u(){const c=e||s;if(!c)return[];const l=[],a=ie();if(c.contextUsed>=0&&c.contextTotal>0){const d=Math.round(c.contextUsed/c.contextTotal*100);l.push(`Context: ${c.contextUsed}/${c.contextTotal} (${d}%)`)}if(c.outputTokensUsed>0)if(c.outputTokensMax<=0)l.push(`Output: ${c.outputTokensUsed}/`);else{const d=Math.round(c.outputTokensUsed/c.outputTokensMax*100);l.push(`Output: ${c.outputTokensUsed}/${c.outputTokensMax} (${d}%)`)}return a.showTokensPerSecond&&c.tokensPerSecond&&c.tokensPerSecond>0&&l.push(`${c.tokensPerSecond.toFixed(1)} tokens/sec`),c.speculative&&l.push("Speculative decoding enabled"),l}function h(){return e!==null&&e.status!=="idle"}return{get processingState(){return e},getProcessingDetails:u,getProcessingMessage:r,shouldShowDetails:h,startMonitoring:o,stopMonitoring:i}}function it(t,e){S();let{ref:s=null,checked:n=!1,indeterminate:o=!1,class:i,$$slots:r,$$events:u,...h}=e,c=!0,l;function a(d){d.out.push("<!---->");{let m=function(f,{checked:p,indeterminate:v}){f.out.push('<div data-slot="checkbox-indicator" class="text-current transition-none">'),p?(f.out.push("<!--[-->"),pt(f,{class:"size-3.5"})):(f.out.push("<!--[!-->"),v?(f.out.push("<!--[-->"),bi(f,{class:"size-3.5"})):f.out.push("<!--[!-->"),f.out.push("<!--]-->")),f.out.push("<!--]--></div>")};gr(d,E([{"data-slot":"checkbox",class:J("peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border border-input shadow-xs transition-shadow outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:data-[state=checked]:bg-primary",i)},h,{get ref(){return s},set ref(f){s=f,c=!1},get checked(){return n},set checked(f){n=f,c=!1},get indeterminate(){return o},set indeterminate(f){o=f,c=!1},children:m,$$slots:{default:!0}}]))}d.out.push("<!---->")}do c=!0,l=W(t),a(l);while(!c);G(t,l),O(e,{ref:s,checked:n,indeterminate:o}),k()}function Yi(t,e){S();let{class:s="",siblingInfo:n,onNavigateToSibling:o}=e,i=n&&n.currentIndex>0,r=n&&n.currentIndex<n.totalSiblings-1,u=r?n.siblingIds[n.currentIndex+1]:null,h=i?n.siblingIds[n.currentIndex-1]:null;function c(){u&&o?.(u)}function l(){h&&o?.(h)}n&&n.totalSiblings>1?(t.out.push("<!--[-->"),t.out.push(`<div${Z("aria-label",`Message version ${R(n.currentIndex+1)} of ${R(n.totalSiblings)}`)}${K(`flex items-center gap-1 text-xs text-muted-foreground ${R(s)}`)} role="navigation"><!---->`),me(t,{children:a=>{a.out.push("<!---->"),ve(a,{children:d=>{Y(d,{"aria-label":"Previous message version",class:`h-5 w-5 p-0 ${R(i?"":"cursor-not-allowed opacity-30")}`,disabled:!i,onclick:l,size:"sm",variant:"ghost",children:m=>{mn(m,{class:"h-3 w-3"})},$$slots:{default:!0}})},$$slots:{default:!0}}),a.out.push("<!----> <!---->"),be(a,{children:d=>{d.out.push("<p>Previous version</p>")},$$slots:{default:!0}}),a.out.push("<!---->")},$$slots:{default:!0}}),t.out.push(`<!----> <span class="px-1 font-mono text-xs">${F(n.currentIndex+1)}/${F(n.totalSiblings)}</span> <!---->`),me(t,{children:a=>{a.out.push("<!---->"),ve(a,{children:d=>{Y(d,{"aria-label":"Next message version",class:`h-5 w-5 p-0 ${R(r?"":"cursor-not-allowed opacity-30")}`,disabled:!r,onclick:c,size:"sm",variant:"ghost",children:m=>{vn(m,{class:"h-3 w-3"})},$$slots:{default:!0}})},$$slots:{default:!0}}),a.out.push("<!----> <!---->"),be(a,{children:d=>{d.out.push("<p>Next version</p>")},$$slots:{default:!0}}),a.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!----></div>")):t.out.push("<!--[!-->"),t.out.push("<!--]-->"),k()}function Tn(t,e){S();let{actionsPosition:s,deletionInfo:n,justify:o,onCopy:i,onEdit:r,onConfirmDelete:u,onDelete:h,onNavigateToSibling:c,onShowDeleteDialogChange:l,onRegenerate:a,role:d,siblingInfo:m=null,showDeleteDialog:f}=e;function p(){u(),l(!1)}let v=!0,T;function g(x){x.out.push(`<div${K(`relative ${R(o==="start"?"mt-2":"")} flex h-6 items-center justify-${R(o)}`)}><div${K(`absolute top-0 ${R(s==="left"?"left-0":"right-0")} flex items-center gap-2 opacity-100 transition-opacity`)}>`),m&&m.totalSiblings>1?(x.out.push("<!--[-->"),Yi(x,{siblingInfo:m,onNavigateToSibling:c})):x.out.push("<!--[!-->"),x.out.push('<!--]--> <div class="pointer-events-auto inset-0 flex items-center gap-1 opacity-100 transition-all duration-150">'),ye(x,{icon:bn,tooltip:"Copy",onclick:i}),x.out.push("<!----> "),r?(x.out.push("<!--[-->"),ye(x,{icon:Yo,tooltip:"Edit",onclick:r})):x.out.push("<!--[!-->"),x.out.push("<!--]--> "),d==="assistant"&&a?(x.out.push("<!--[-->"),ye(x,{icon:Ot,tooltip:"Regenerate",onclick:a})):x.out.push("<!--[!-->"),x.out.push("<!--]--> "),ye(x,{icon:ot,tooltip:"Delete",onclick:h}),x.out.push("<!----></div></div></div> "),en(x,{title:"Delete Message",description:n&&n.totalCount>1?`This will delete ${n.totalCount} messages including: ${n.userMessages} user message${n.userMessages>1?"s":""} and ${n.assistantMessages} assistant response${n.assistantMessages>1?"s":""}. All messages in this branch and their responses will be permanently removed. This action cannot be undone.`:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:n&&n.totalCount>1?`Delete ${n.totalCount} Messages`:"Delete",cancelText:"Cancel",variant:"destructive",icon:ot,onConfirm:p,onCancel:()=>l(!1),get open(){return f},set open(C){f=C,v=!1}}),x.out.push("<!---->")}do v=!0,T=W(t),g(T);while(!v);G(t,T),k()}function Xi(t,e){S();let{class:s="",deletionInfo:n,editedContent:o="",isEditing:i=!1,message:r,messageContent:u,onCancelEdit:h,onConfirmDelete:c,onCopy:l,onDelete:a,onEdit:d,onEditKeydown:m,onEditedContentChange:f,onNavigateToSibling:p,onRegenerate:v,onSaveEdit:T,onShowDeleteDialogChange:g,onShouldBranchAfterEditChange:x,showDeleteDialog:C,shouldBranchAfterEdit:w=!1,siblingInfo:b=null,textareaElement:N=void 0,thinkingContent:P}=e;const M=Mn();let A=ie(),L=Zs(),j=()=>A.showModelInfo?r.model?r.model:L:null,U=!0,D;function z(I){if(I.out.push(`<div${K(`text-md group w-full leading-7.5 ${R(s)}`,"svelte-16qxm4u")} role="group" aria-label="Assistant message with actions">`),P?(I.out.push("<!--[-->"),ru(I,{reasoningContent:P,isStreaming:!r.timestamp,hasRegularContent:!!u?.trim()})):I.out.push("<!--[!-->"),I.out.push("<!--]--> "),r?.role==="assistant"&&st()&&!r?.content?.trim()?(I.out.push("<!--[-->"),I.out.push(`<div class="mt-6 w-full max-w-[48rem]"><div class="processing-container svelte-16qxm4u"><span class="processing-text svelte-16qxm4u">${F(M.getProcessingMessage())}</span></div></div>`)):I.out.push("<!--[!-->"),I.out.push("<!--]--> "),i){I.out.push("<!--[-->"),I.out.push(`<div class="w-full"><textarea${K(`min-h-[50vh] w-full resize-y rounded-2xl px-3 py-2 text-sm ${R(as)}`,"svelte-16qxm4u")} placeholder="Edit assistant message...">`);const $=F(o);$&&I.out.push(`${$}`),I.out.push('</textarea> <div class="mt-2 flex items-center justify-between"><div class="flex items-center space-x-2">'),it(I,{id:"branch-after-edit",onCheckedChange:Q=>x?.(Q===!0),get checked(){return w},set checked(Q){w=Q,U=!1}}),I.out.push("<!----> "),$e(I,{for:"branch-after-edit",class:"cursor-pointer text-sm text-muted-foreground",children:Q=>{Q.out.push("<!---->Branch conversation after edit")},$$slots:{default:!0}}),I.out.push('<!----></div> <div class="flex gap-2">'),Y(I,{class:"h-8 px-3",onclick:h,size:"sm",variant:"outline",children:Q=>{Se(Q,{class:"mr-1 h-3 w-3"}),Q.out.push("<!----> Cancel")},$$slots:{default:!0}}),I.out.push("<!----> "),Y(I,{class:"h-8 px-3",onclick:T,disabled:!o?.trim(),size:"sm",children:Q=>{pt(Q,{class:"mr-1 h-3 w-3"}),Q.out.push("<!----> Save")},$$slots:{default:!0}}),I.out.push("<!----></div></div></div>")}else I.out.push("<!--[!-->"),r.role==="assistant"?(I.out.push("<!--[-->"),ie().disableReasoningFormat?(I.out.push("<!--[-->"),I.out.push(`<pre class="raw-output svelte-16qxm4u">${F(u||"")}</pre>`)):(I.out.push("<!--[!-->"),An(I,{content:u||""})),I.out.push("<!--]-->")):(I.out.push("<!--[!-->"),I.out.push(`<div class="text-sm whitespace-pre-wrap">${F(u)}</div>`)),I.out.push("<!--]-->");if(I.out.push('<!--]--> <div class="info my-6 grid gap-4">'),j()?(I.out.push("<!--[-->"),I.out.push('<span class="inline-flex items-center gap-2 text-xs text-muted-foreground"><span class="inline-flex items-center gap-1">'),Ci(I,{class:"h-3.5 w-3.5"}),I.out.push(`<!----> <span>Model used:</span></span> <button class="inline-flex cursor-pointer items-center gap-1 rounded-sm bg-muted-foreground/15 px-1.5 py-0.75">${F(j())} `),bn(I,{class:"ml-1 h-3 w-3 "}),I.out.push("<!----></button></span>")):I.out.push("<!--[!-->"),I.out.push("<!--]--> "),A.showMessageStats&&r.timings&&r.timings.predicted_n&&r.timings.predicted_ms){I.out.push("<!--[-->");const $=r.timings.predicted_n/r.timings.predicted_ms*1e3;I.out.push('<span class="inline-flex items-center gap-2 text-xs text-muted-foreground"><span class="inline-flex items-center gap-1">'),ui(I,{class:"h-3.5 w-3.5"}),I.out.push('<!----> <span>Statistics:</span></span> <div class="inline-flex flex-wrap items-center gap-2 text-xs text-muted-foreground"><span class="inline-flex items-center gap-1 rounded-sm bg-muted-foreground/15 px-1.5 py-0.75">'),vi(I,{class:"h-3 w-3"}),I.out.push(`<!----> ${F($.toFixed(2))} tokens/s</span> <span class="inline-flex items-center gap-1 rounded-sm bg-muted-foreground/15 px-1.5 py-0.75">`),Ti(I,{class:"h-3 w-3"}),I.out.push(`<!----> ${F(r.timings.predicted_n)} tokens</span> <span class="inline-flex items-center gap-1 rounded-sm bg-muted-foreground/15 px-1.5 py-0.75">`),ai(I,{class:"h-3 w-3"}),I.out.push(`<!----> ${F((r.timings.predicted_ms/1e3).toFixed(2))}s</span></div></span>`)}else I.out.push("<!--[!-->");I.out.push("<!--]--></div> "),r.timestamp&&!i?(I.out.push("<!--[-->"),Tn(I,{role:"assistant",justify:"start",actionsPosition:"left",siblingInfo:b,showDeleteDialog:C,deletionInfo:n,onCopy:l,onEdit:d,onRegenerate:v,onDelete:a,onConfirmDelete:c,onNavigateToSibling:p,onShowDeleteDialogChange:g})):I.out.push("<!--[!-->"),I.out.push("<!--]--></div>")}do U=!0,D=W(t),z(D);while(!U);G(t,D),O(e,{textareaElement:N}),k()}function ds(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<div${H({"data-slot":"card",class:re(J("flex flex-col gap-6 rounded-xl border bg-card py-6 text-card-foreground shadow-sm",n)),...u},null)}>`),o?.(t),t.out.push("<!----></div>"),O(e,{ref:s}),k()}function Ji(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<div${H({"data-slot":"card-content",class:re(J("px-6",n)),...u},null)}>`),o?.(t),t.out.push("<!----></div>"),O(e,{ref:s}),k()}function Zi(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<p${H({"data-slot":"card-description",class:re(J("text-sm text-muted-foreground",n)),...u},null)}>`),o?.(t),t.out.push("<!----></p>"),O(e,{ref:s}),k()}function Qi(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<div${H({"data-slot":"card-header",class:re(J("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n)),...u},null)}>`),o?.(t),t.out.push("<!----></div>"),O(e,{ref:s}),k()}function yi(t,e){S();let{ref:s=null,class:n,children:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<div${H({"data-slot":"card-title",class:re(J("leading-none font-semibold",n)),...u},null)}>`),o?.(t),t.out.push("<!----></div>"),O(e,{ref:s}),k()}function $i(t,e){S();let{class:s="",message:n,isEditing:o,editedContent:i,siblingInfo:r=null,showDeleteDialog:u,deletionInfo:h,onCancelEdit:c,onSaveEdit:l,onEditKeydown:a,onEditedContentChange:d,onCopy:m,onEdit:f,onDelete:p,onConfirmDelete:v,onNavigateToSibling:T,onShowDeleteDialogChange:g,textareaElement:x=void 0}=e;const C=ie();if(t.out.push(`<div aria-label="User message with actions"${K(`group flex flex-col items-end gap-3 md:gap-2 ${R(s)}`)} role="group">`),o){t.out.push("<!--[-->"),t.out.push(`<div class="w-full max-w-[80%]"><textarea${K(`min-h-[60px] w-full resize-none rounded-2xl px-3 py-2 text-sm ${R(as)}`)} placeholder="Edit your message...">`);const w=F(i);w&&t.out.push(`${w}`),t.out.push('</textarea> <div class="mt-2 flex justify-end gap-2">'),Y(t,{class:"h-8 px-3",onclick:c,size:"sm",variant:"outline",children:b=>{Se(b,{class:"mr-1 h-3 w-3"}),b.out.push("<!----> Cancel")},$$slots:{default:!0}}),t.out.push("<!----> "),Y(t,{class:"h-8 px-3",onclick:l,disabled:!i.trim(),size:"sm",children:b=>{pt(b,{class:"mr-1 h-3 w-3"}),b.out.push("<!----> Send")},$$slots:{default:!0}}),t.out.push("<!----></div></div>")}else t.out.push("<!--[!-->"),n.extra&&n.extra.length>0?(t.out.push("<!--[-->"),t.out.push('<div class="mb-2 max-w-[80%]">'),Pn(t,{attachments:n.extra,readonly:!0,imageHeight:"h-80"}),t.out.push("<!----></div>")):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),n.content.trim()?(t.out.push("<!--[-->"),ds(t,{class:"max-w-[80%] rounded-[1.125rem] bg-primary px-3.75 py-1.5 text-primary-foreground data-[multiline]:py-2.5","data-multiline":void 0,children:w=>{C.renderUserContentAsMarkdown?(w.out.push("<!--[-->"),w.out.push('<div class="text-md">'),An(w,{class:"markdown-user-content text-primary-foreground",content:n.content}),w.out.push("<!----></div>")):(w.out.push("<!--[!-->"),w.out.push(`<span class="text-md whitespace-pre-wrap">${F(n.content)}</span>`)),w.out.push("<!--]-->")},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),n.timestamp?(t.out.push("<!--[-->"),t.out.push('<div class="max-w-[80%]">'),Tn(t,{actionsPosition:"right",deletionInfo:h,justify:"end",onConfirmDelete:v,onCopy:m,onDelete:p,onEdit:f,onNavigateToSibling:T,onShowDeleteDialogChange:g,siblingInfo:r,showDeleteDialog:u,role:"user"}),t.out.push("<!----></div>")):t.out.push("<!--[!-->"),t.out.push("<!--]-->");t.out.push("<!--]--></div>"),O(e,{textareaElement:x}),k()}function eu(t,e){S();let{class:s="",message:n,onCopy:o,onDelete:i,onEditWithBranching:r,onEditWithReplacement:u,onNavigateToSibling:h,onRegenerateWithBranching:c,siblingInfo:l=null}=e,a=null,d=n.content,m=!1,f=!1,p=!1,v,T=(()=>{if(n.role==="assistant"){const z=n.thinking?.trim();return z||null}return null})();function g(){m=!1,d=n.content}async function x(){await qi(n.content,"Message copied to clipboard"),o?.(n)}function C(){i?.(n),f=!1}async function w(){a=await Gn(n.id),f=!0}function b(){m=!0,d=n.content,setTimeout(()=>{v&&(v.focus(),v.setSelectionRange(v.value.length,v.value.length))},0)}function N(z){d=z}function P(z){z.key==="Enter"&&!z.shiftKey&&!Nn(z)?(z.preventDefault(),A()):z.key==="Escape"&&(z.preventDefault(),g())}function M(){c?.(n)}function A(){n.role==="user"?r?.(n,d.trim()):u?.(n,d.trim(),p),m=!1,p=!1}function L(z){f=z}let j=!0,U;function D(z){n.role==="user"?(z.out.push("<!--[-->"),$i(z,{class:s,deletionInfo:a,editedContent:d,isEditing:m,message:n,onCancelEdit:g,onConfirmDelete:C,onCopy:x,onDelete:w,onEdit:b,onEditKeydown:P,onEditedContentChange:N,onNavigateToSibling:h,onSaveEdit:A,onShowDeleteDialogChange:L,showDeleteDialog:f,siblingInfo:l,get textareaElement(){return v},set textareaElement(I){v=I,j=!1}})):(z.out.push("<!--[!-->"),Xi(z,{class:s,deletionInfo:a,editedContent:d,isEditing:m,message:n,messageContent:n.content,onCancelEdit:g,onConfirmDelete:C,onCopy:x,onDelete:w,onEdit:b,onEditKeydown:P,onEditedContentChange:N,onNavigateToSibling:h,onRegenerate:M,onSaveEdit:A,onShowDeleteDialogChange:L,shouldBranchAfterEdit:p,onShouldBranchAfterEditChange:I=>p=I,showDeleteDialog:f,siblingInfo:l,thinkingContent:T,get textareaElement(){return v},set textareaElement(I){v=I,j=!1}})),z.out.push("<!--]-->")}do j=!0,U=W(t),D(U);while(!j);G(t,U),k()}function tu(t,e){S();let{class:s,messages:n=[]}=e,o=[];function i(){const m=bt();m?Ae.getConversationMessages(m.id).then(f=>{o=f}):o=[]}let r=n.length?n.map(m=>{const f=qn(o,m.id);return{message:m,siblingInfo:f||{message:m,siblingIds:[m.id],currentIndex:0,totalSiblings:1}}}):[];async function u(m){await Yn(m)}async function h(m,f){await Xn(m.id,f),i()}async function c(m,f,p){await Jn(m.id,f,p),i()}async function l(m){await Qn(m.id),i()}async function a(m){await Zn(m.id),i()}const d=ee(r);t.out.push(`<div${K(`flex h-full flex-col space-y-10 pt-16 md:pt-24 ${R(s)}`)} style="height: auto;"><!--[-->`);for(let m=0,f=d.length;m<f;m++){let{message:p,siblingInfo:v}=d[m];eu(t,{class:"mx-auto w-full max-w-[48rem]",message:p,siblingInfo:v,onDelete:a,onNavigateToSibling:u,onEditWithBranching:h,onEditWithReplacement:c,onRegenerateWithBranching:l})}t.out.push("<!--]--></div>"),k()}function su(t,e){S();let{ref:s=null,open:n=!1,$$slots:o,$$events:i,...r}=e,u=!0,h;function c(l){l.out.push("<!---->"),mr(l,E([{"data-slot":"collapsible"},r,{get ref(){return s},set ref(a){s=a,u=!1},get open(){return n},set open(a){n=a,u=!1}}])),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),O(e,{ref:s,open:n}),k()}function nu(t,e){S();let{ref:s=null,$$slots:n,$$events:o,...i}=e,r=!0,u;function h(c){c.out.push("<!---->"),br(c,E([{"data-slot":"collapsible-trigger"},i,{get ref(){return s},set ref(l){s=l,r=!1}}])),c.out.push("<!---->")}do r=!0,u=W(t),h(u);while(!r);G(t,u),O(e,{ref:s}),k()}function ou(t,e){S();let{ref:s=null,$$slots:n,$$events:o,...i}=e,r=!0,u;function h(c){c.out.push("<!---->"),vr(c,E([{"data-slot":"collapsible-content"},i,{get ref(){return s},set ref(l){s=l,r=!1}}])),c.out.push("<!---->")}do r=!0,u=W(t),h(u);while(!r);G(t,u),O(e,{ref:s}),k()}function ru(t,e){S();let{class:s="",isStreaming:n=!1,reasoningContent:o}=e,r=ie().showThoughtInProgress,u=!0,h;function c(l){l.out.push("<!---->"),su(l,{class:`mb-6 ${R(s)}`,get open(){return r},set open(a){r=a,u=!1},children:a=>{ds(a,{class:"gap-0 border-muted bg-muted/30 py-0",children:d=>{d.out.push("<!---->"),nu(d,{class:"flex cursor-pointer items-center justify-between p-3",children:m=>{m.out.push('<div class="flex items-center gap-2 text-muted-foreground">'),gn(m,{class:"h-4 w-4"}),m.out.push(`<!----> <span class="text-sm font-medium">${F(n?"Reasoning...":"Reasoning")}</span></div> <div${K(re(ko({variant:"ghost",size:"sm",class:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground"})))}>`),ci(m,{class:"h-4 w-4"}),m.out.push('<!----> <span class="sr-only">Toggle reasoning content</span></div>')},$$slots:{default:!0}}),d.out.push("<!----> <!---->"),ou(d,{children:m=>{m.out.push(`<div class="border-t border-muted px-3 pb-3"><div class="pt-3"><div class="text-xs leading-relaxed break-words whitespace-pre-wrap">${F(o??"")}</div></div></div>`)},$$slots:{default:!0}}),d.out.push("<!---->")},$$slots:{default:!0}})},$$slots:{default:!0}}),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),k()}function iu(t,e){S();const s=Mn();let n=st(),o=s.getProcessingDetails(),i=n||ie().keepStatsVisible;const r=ee(o);t.out.push(`<div${K("chat-processing-info-container svelte-1m2w9ag",void 0,{visible:i})}><div class="chat-processing-info-content svelte-1m2w9ag"><!--[-->`);for(let u=0,h=r.length;u<h;u++){let c=r[u];t.out.push(`<span class="chat-processing-info-detail svelte-1m2w9ag">${F(c)}</span>`)}t.out.push("<!--]--></div></div>"),k()}function uu(t){let e=!1;function s(){e=!0}t.out.push('<header class="md:background-transparent pointer-events-none fixed top-0 right-0 left-0 z-50 flex items-center justify-end bg-background/40 p-4 backdrop-blur-xl md:left-[var(--sidebar-width)]"><div class="pointer-events-auto flex items-center space-x-2">'),Y(t,{variant:"ghost",size:"sm",onclick:s,children:n=>{kn(n,{class:"h-4 w-4"})},$$slots:{default:!0}}),t.out.push("<!----></div></header> "),vu(t,{open:e,onOpenChange:n=>e=n}),t.out.push("<!---->")}function Is(t,e){S();let{class:s=""}=e;t.out.push(`<div${K(`mb-3 ${R(s)}`)}><div class="rounded-md border border-yellow-200 bg-yellow-50 px-3 py-2 dark:border-yellow-800 dark:bg-yellow-950"><div class="flex items-center justify-between"><div class="flex items-center">`),at(t,{class:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),t.out.push(`<!----> <p class="ml-2 text-sm text-yellow-800 dark:text-yellow-200">Server \`/props\` endpoint not available - using cached data</p></div> <button${Z("disabled",Ue(),!0)} class="ml-3 flex items-center gap-1.5 rounded bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-800 hover:bg-yellow-200 disabled:opacity-50 dark:bg-yellow-900 dark:text-yellow-200 dark:hover:bg-yellow-800">`),Ot(t,{class:`h-3 w-3 ${R(Ue()?"animate-spin":"")}`}),t.out.push(`<!----> ${F(Ue()?"Checking...":"Retry")}</button></div></div></div>`),k()}function Fn(t,e="white"){return new Promise((s,n)=>{try{const o=new Image;o.onload=()=>{const i=document.createElement("canvas"),r=i.getContext("2d");if(!r){n(new Error("Failed to get 2D canvas context."));return}const u=o.naturalWidth||300,h=o.naturalHeight||300;i.width=u,i.height=h,e&&(r.fillStyle=e,r.fillRect(0,0,i.width,i.height)),r.drawImage(o,0,0,u,h),s(i.toDataURL(Fe.PNG))},o.onerror=()=>{n(new Error("Failed to load SVG image. Ensure the SVG data is valid."))},o.src=t}catch(o){const r=`Error converting SVG to PNG: ${o instanceof Error?o.message:String(o)}`;console.error(r,o),n(new Error(r))}})}function In(t){return t===Fe.SVG}function Dn(t,e="white"){return new Promise((s,n)=>{try{const o=new Image;o.onload=()=>{const i=document.createElement("canvas"),r=i.getContext("2d");if(!r){n(new Error("Failed to get 2D canvas context."));return}const u=o.naturalWidth||300,h=o.naturalHeight||300;i.width=u,i.height=h,e&&(r.fillStyle=e,r.fillRect(0,0,i.width,i.height)),r.drawImage(o,0,0,u,h),s(i.toDataURL(Fe.PNG))},o.onerror=()=>{n(new Error("Failed to load WebP image. Ensure the WebP data is valid."))},o.src=t}catch(o){const r=`Error converting WebP to PNG: ${o instanceof Error?o.message:String(o)}`;console.error(r,o),n(new Error(r))}})}function En(t){return t===Fe.WEBP}const lu={prefixLength:1024*10,suspiciousCharThresholdRatio:.15,maxAbsoluteNullBytes:2};function cu(t){return Object.values(Et).some(s=>t.toLowerCase().endsWith(s))}async function hu(t){return new Promise((e,s)=>{const n=new FileReader;n.onload=o=>{o.target?.result!==null&&o.target?.result!==void 0?e(o.target.result):s(new Error("Failed to read file"))},n.onerror=()=>s(new Error("File reading error")),n.readAsText(t)})}function au(t,e={}){if(!t)return!0;const s={...lu,...e},n=t.substring(0,s.prefixLength);let o=0,i=0;for(let r=0;r<n.length;r++){const u=n.charCodeAt(r);if(u===0){o++;continue}u<32&&u!==9&&u!==10&&u!==13&&(u<8||u>13&&u<27)&&i++,u===65533&&i++}return!(o>s.maxAbsoluteNullBytes||i/n.length>s.suspiciousCharThresholdRatio)}function Ds(t){return new Promise((e,s)=>{const n=new FileReader;n.onload=()=>{const i=n.result.split(",")[1];e(i)},n.onerror=()=>s(n.error),n.readAsDataURL(t)})}async function du(t){const e=[],s=[];for(const n of t)if(oe(n.type)===q.IMAGE){if(n.preview){let o=n.preview;if(In(n.type))try{o=await Fn(o)}catch(i){console.error("Failed to convert SVG to PNG for database storage:",i)}else if(En(n.type))try{o=await Dn(o)}catch(i){console.error("Failed to convert WebP to PNG for database storage:",i)}e.push({type:"imageFile",name:n.name,base64Url:o})}}else if(oe(n.type)===q.AUDIO)try{const o=await Ds(n.file);e.push({type:"audioFile",name:n.name,base64Data:o,mimeType:n.type})}catch(o){console.error(`Failed to process audio file ${n.name}:`,o)}else if(oe(n.type)===q.PDF)try{const o=await Ds(n.file),i=ie(),r=le();let u=!!i.pdfAsImage&&r;if(i.pdfAsImage&&!r&&(console.log("Non-vision model detected: forcing PDF-to-text mode and updating settings"),wt.updateConfig("pdfAsImage",!1),xe.warning("PDF setting changed: Non-vision model detected, PDFs will be processed as text instead of images.",{duration:5e3}),u=!1),u)try{const h=await _n(n.file);xe.success(`PDF "${n.name}" processed as ${h.length} images for vision model.`,{duration:3e3}),e.push({type:"pdfFile",name:n.name,content:`PDF file with ${h.length} pages`,images:h,processedAsImages:!0,base64Data:o})}catch(h){console.warn(`Failed to process PDF ${n.name} as images, falling back to text:`,h);const c=await Ms(n.file);e.push({type:"pdfFile",name:n.name,content:c,processedAsImages:!1,base64Data:o})}else{const h=await Ms(n.file);xe.success(`PDF "${n.name}" processed as text content.`,{duration:3e3}),e.push({type:"pdfFile",name:n.name,content:h,processedAsImages:!1,base64Data:o})}}catch(o){console.error(`Failed to process PDF file ${n.name}:`,o)}else try{const o=await hu(n.file);o.trim()===""?(console.warn(`File ${n.name} is empty and will be skipped`),s.push(n.name)):au(o)?e.push({type:"textFile",name:n.name,content:o}):console.warn(`File ${n.name} appears to be binary and will be skipped`)}catch(o){console.error(`Failed to read file ${n.name}:`,o)}return{extras:e,emptyFiles:s}}function Es(t){return new Promise((e,s)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>s(n.error),n.readAsDataURL(t)})}function pu(t){return new Promise((e,s)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>s(n.error),n.readAsText(t)})}async function fu(t){const e=[];for(const s of t){const o={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:s.name,size:s.size,type:s.type,file:s};try{if(oe(s.type)===q.IMAGE){let i=await Es(s);if(In(s.type))try{i=await Fn(i)}catch(r){console.error("Failed to convert SVG to PNG:",r)}else if(En(s.type))try{i=await Dn(i)}catch(r){console.error("Failed to convert WebP to PNG:",r)}e.push({...o,preview:i})}else if(oe(s.type)===q.TEXT||cu(s.name))try{const i=await pu(s);e.push({...o,textContent:i})}catch(i){console.warn("Failed to read text file, adding without content:",i),e.push(o)}else if(oe(s.type)===q.PDF){e.push(o);const i=le(),r=wt.config;i&&!r.pdfAsImage&&xe.info("You can enable parsing PDF as images with vision models.",{duration:8e3,action:{label:"Enable PDF as Images",onClick:()=>{wt.updateConfig("pdfAsImage",!0),xe.success("PDF parsing as images enabled!",{duration:3e3})}}})}else if(oe(s.type)===q.AUDIO){const i=await Es(s);e.push({...o,preview:i})}else e.push(o)}catch(i){console.error("Error processing file",s.name,i),e.push(o)}}return e}function Xu(t,e){S();let{showCenteredEmpty:s=!1}=e,n=!1,o=[],i={generallyUnsupported:[],modalityUnsupported:[],modalityReasons:{},supportedTypes:[]},r=!1,u=!1,h=[],c=s&&!bt()&&ms().length===0&&!st(),l=yn(),a=Ue(),d=st();async function m(){const b=bt();b&&await $n(b.id),r=!1}function f(b){b||to()}function p(b){o=o.filter(N=>N.id!==b)}function v(b){g(b)}async function T(b,N){const P=N?await du(N):void 0;if(P?.emptyFiles&&P.emptyFiles.length>0){if(h=P.emptyFiles,u=!0,N){const A=new Set(P.emptyFiles);o=o.filter(L=>!A.has(L.name))}return!1}const M=P?.extras;return await eo(b,M),!0}async function g(b){const N=[],P=[];for(const U of b)tr(U.name,U.type)?N.push(U):P.push(U);const{supportedFiles:M,unsupportedFiles:A,modalityReasons:L}=Hi(N);if([...P,...A].length>0){const U=["text files","PDFs"];le()&&U.push("images"),Ce()&&U.push("audio files"),i={generallyUnsupported:P,modalityUnsupported:A,modalityReasons:L,supportedTypes:U},n=!0}if(M.length>0){const U=await fu(M);o=[...o,...U]}}let x=!0,C;function w(b){b.out.push("<!--[!-->"),b.out.push("<!--]--> "),uu(b),b.out.push("<!----> "),c?(b.out.push("<!--[!-->"),a?(b.out.push("<!--[-->"),Iu(b,{})):(b.out.push("<!--[!-->"),Pe.error&&!Pe.modelName?(b.out.push("<!--[-->"),yo(b,{error:Pe.error})):(b.out.push("<!--[!-->"),Pe.modelName?(b.out.push("<!--[-->"),b.out.push('<div aria-label="Welcome screen with file drop zone" class="flex h-full items-center justify-center" role="main"><div class="w-full max-w-2xl px-4"><div class="mb-8 text-center"><h1 class="mb-2 text-3xl font-semibold tracking-tight">Delta</h1> <p class="text-lg text-muted-foreground">How can I help you today?</p></div> <div class="mb-6 flex justify-center">'),Du(b),b.out.push("<!----></div> "),ws()?(b.out.push("<!--[-->"),Is(b,{})):b.out.push("<!--[!-->"),b.out.push("<!--]--> <div>"),Fs(b,{isLoading:d,onFileRemove:p,onFileUpload:v,onSend:T,onStop:()=>vs(),showHelperText:!0,get uploadedFiles(){return o},set uploadedFiles(N){o=N,x=!1}}),b.out.push("<!----></div></div></div>")):b.out.push("<!--[!-->"),b.out.push("<!--]-->")),b.out.push("<!--]-->")),b.out.push("<!--]-->")):(b.out.push("<!--[-->"),b.out.push('<div aria-label="Chat interface with file drop zone" class="flex h-full flex-col overflow-y-auto px-4 md:px-6" role="main">'),tu(b,{class:"mb-16 md:mb-24",messages:ms()}),b.out.push('<!----> <div class="pointer-events-none sticky right-0 bottom-0 left-0 mt-auto">'),iu(b),b.out.push("<!----> "),ws()?(b.out.push("<!--[-->"),Is(b,{class:"pointer-events-auto mx-auto max-w-[48rem] px-4"})):b.out.push("<!--[!-->"),b.out.push('<!--]--> <div class="conversation-chat-form pointer-events-auto rounded-t-3xl pb-4 svelte-sn2p3p">'),Fs(b,{isLoading:d,onFileRemove:p,onFileUpload:v,onSend:T,onStop:()=>vs(),showHelperText:!1,get uploadedFiles(){return o},set uploadedFiles(N){o=N,x=!1}}),b.out.push("<!----></div></div></div>")),b.out.push("<!--]--> <!---->"),Ve(b,{get open(){return n},set open(N){n=N,x=!1},children:N=>{N.out.push("<!---->"),Xo(N,{children:P=>{P.out.push("<!---->"),Jo(P,{}),P.out.push("<!----> <!---->"),He(P,{class:"max-w-md",children:M=>{if(M.out.push("<!---->"),We(M,{children:A=>{A.out.push("<!---->"),Ge(A,{children:L=>{L.out.push("<!---->File Upload Error")},$$slots:{default:!0}}),A.out.push("<!----> <!---->"),qe(A,{class:"text-sm text-muted-foreground",children:L=>{L.out.push("<!---->Some files cannot be uploaded with the current model.")},$$slots:{default:!0}}),A.out.push("<!---->")},$$slots:{default:!0}}),M.out.push('<!----> <div class="space-y-4">'),i.generallyUnsupported.length>0){M.out.push("<!--[-->");const A=ee(i.generallyUnsupported);M.out.push('<div class="space-y-2"><h4 class="text-sm font-medium text-destructive">Unsupported File Types</h4> <div class="space-y-1"><!--[-->');for(let L=0,j=A.length;L<j;L++){let U=A[L];M.out.push(`<div class="rounded-md bg-destructive/10 px-3 py-2"><p class="font-mono text-sm break-all text-destructive">${F(U.name)}</p> <p class="mt-1 text-xs text-muted-foreground">File type not supported</p></div>`)}M.out.push("<!--]--></div></div>")}else M.out.push("<!--[!-->");if(M.out.push("<!--]--> "),i.modalityUnsupported.length>0){M.out.push("<!--[-->");const A=ee(i.modalityUnsupported);M.out.push('<div class="space-y-2"><h4 class="text-sm font-medium text-destructive">Model Compatibility Issues</h4> <div class="space-y-1"><!--[-->');for(let L=0,j=A.length;L<j;L++){let U=A[L];M.out.push(`<div class="rounded-md bg-destructive/10 px-3 py-2"><p class="font-mono text-sm break-all text-destructive">${F(U.name)}</p> <p class="mt-1 text-xs text-muted-foreground">${F(i.modalityReasons[U.name]||"Not supported by current model")}</p></div>`)}M.out.push("<!--]--></div></div>")}else M.out.push("<!--[!-->");M.out.push(`<!--]--> <div class="rounded-md bg-muted/50 p-3"><h4 class="mb-2 text-sm font-medium">This model supports:</h4> <p class="text-sm text-muted-foreground">${F(i.supportedTypes.join(", "))}</p></div></div> <!---->`),Ye(M,{children:A=>{A.out.push("<!---->"),Xe(A,{onclick:()=>n=!1,children:L=>{L.out.push("<!---->Got it")},$$slots:{default:!0}}),A.out.push("<!---->")},$$slots:{default:!0}}),M.out.push("<!---->")},$$slots:{default:!0}}),P.out.push("<!---->")}}),N.out.push("<!---->")},$$slots:{default:!0}}),b.out.push("<!----> "),en(b,{title:"Delete Conversation",description:"Are you sure you want to delete this conversation? This action cannot be undone and will permanently remove all messages in this conversation.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive",icon:ot,onConfirm:m,onCancel:()=>r=!1,get open(){return r},set open(N){r=N,x=!1}}),b.out.push("<!----> "),Mu(b,{emptyFiles:h,onOpenChange:N=>{N||(h=[])},get open(){return u},set open(N){u=N,x=!1}}),b.out.push("<!----> "),Nu(b,{message:l?.message??"",onOpenChange:f,open:!!l,type:l?.type??"server"}),b.out.push("<!---->")}do x=!0,C=W(t),w(C);while(!x);G(t,C),k()}function As(t,e){S();let{conversations:s,messageCountMap:n=new Map,mode:o,onCancel:i,onConfirm:r,open:u=!1}=e,h="",c=new Ee(s.map(w=>w.id)),l=null,a=s.filter(w=>(w.name||"Untitled conversation").toLowerCase().includes(h.toLowerCase())),d=a.length>0&&a.every(w=>c.has(w.id)),m=a.some(w=>c.has(w.id))&&!d;function f(w,b=!1){const N=new Ee(c);if(b&&l!==null){const P=a.findIndex(A=>A.id===l),M=a.findIndex(A=>A.id===w);if(P!==-1&&M!==-1){const A=Math.min(P,M),L=Math.max(P,M),j=!N.has(w);for(let U=A;U<=L;U++)j?N.add(a[U].id):N.delete(a[U].id);c=N;return}}N.has(w)?N.delete(w):N.add(w),c=N,l=w}function p(){if(d){const w=new Ee(c);a.forEach(b=>w.delete(b.id)),c=w}else{const w=new Ee(c);a.forEach(b=>w.add(b.id)),c=w}}function v(){const w=s.filter(b=>c.has(b.id));r(w)}function T(){c=new Ee(s.map(w=>w.id)),h="",l=null,i()}let g=!0,x;function C(w){w.out.push("<!---->"),ls(w,{get open(){return u},set open(b){u=b,g=!1},children:b=>{b.out.push("<!---->"),fn(b,{children:N=>{N.out.push("<!---->"),pn(N,{class:"z-[1000000]"}),N.out.push("<!----> <!---->"),us(N,{class:"z-[1000001] max-w-2xl",children:P=>{P.out.push("<!---->"),dn(P,{children:M=>{M.out.push("<!---->"),rt(M,{children:A=>{A.out.push(`<!---->Select Conversations to ${F(o==="export"?"Export":"Import")}`)},$$slots:{default:!0}}),M.out.push("<!----> <!---->"),ri(M,{children:A=>{o==="export"?(A.out.push("<!--[-->"),A.out.push(`Choose which conversations you want to export. Selected conversations will be downloaded
						as a JSON file.`)):(A.out.push("<!--[!-->"),A.out.push(`Choose which conversations you want to import. Selected conversations will be merged
						with your existing conversations.`)),A.out.push("<!--]-->")},$$slots:{default:!0}}),M.out.push("<!---->")},$$slots:{default:!0}}),P.out.push('<!----> <div class="space-y-4"><div class="relative">'),Zo(P,{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),P.out.push("<!----> "),Js(P,{placeholder:"Search conversations...",class:"pr-9 pl-9",get value(){return h},set value(M){h=M,g=!1}}),P.out.push("<!----> "),h?(P.out.push("<!--[-->"),P.out.push('<button class="absolute top-1/2 right-3 -translate-y-1/2 text-muted-foreground hover:text-foreground" type="button">'),Se(P,{class:"h-4 w-4"}),P.out.push("<!----></button>")):P.out.push("<!--[!-->"),P.out.push(`<!--]--></div> <div class="flex items-center justify-between text-sm text-muted-foreground"><span>${F(c.size)} of ${F(s.length)} selected `),h?(P.out.push("<!--[-->"),P.out.push(`(${F(a.length)} shown)`)):P.out.push("<!--[!-->"),P.out.push('<!--]--></span></div> <div class="overflow-hidden rounded-md border">'),tn(P,{class:"h-[400px]",children:M=>{if(M.out.push('<table class="w-full"><thead class="sticky top-0 z-10 bg-muted"><tr class="border-b"><th class="w-12 p-3 text-left">'),it(M,{checked:d,indeterminate:m,onCheckedChange:p}),M.out.push('<!----></th><th class="p-3 text-left text-sm font-medium">Conversation Name</th><th class="w-32 p-3 text-left text-sm font-medium">Messages</th></tr></thead><tbody>'),a.length===0)M.out.push("<!--[-->"),M.out.push('<tr><td colspan="3" class="p-8 text-center text-sm text-muted-foreground">'),h?(M.out.push("<!--[-->"),M.out.push(`No conversations found matching "${F(h)}"`)):(M.out.push("<!--[!-->"),M.out.push("No conversations available")),M.out.push("<!--]--></td></tr>");else{M.out.push("<!--[!-->");const A=ee(a);M.out.push("<!--[-->");for(let L=0,j=A.length;L<j;L++){let U=A[L];M.out.push('<tr class="cursor-pointer border-b transition-colors hover:bg-muted/50"><td class="p-3">'),it(M,{checked:c.has(U.id),onclick:D=>{D.preventDefault(),D.stopPropagation(),f(U.id,D.shiftKey)}}),M.out.push(`<!----></td><td class="p-3 text-sm"><div class="max-w-[17rem] truncate"${Z("title",U.name||"Untitled conversation")}>${F(U.name||"Untitled conversation")}</div></td><td class="p-3 text-sm text-muted-foreground">${F(n.get(U.id)??0)}</td></tr>`)}M.out.push("<!--]-->")}M.out.push("<!--]--></tbody></table>")},$$slots:{default:!0}}),P.out.push("<!----></div></div> <!---->"),oi(P,{children:M=>{Y(M,{variant:"outline",onclick:T,children:A=>{A.out.push("<!---->Cancel")},$$slots:{default:!0}}),M.out.push("<!----> "),Y(M,{onclick:v,disabled:c.size===0,children:A=>{A.out.push(`<!---->${F(o==="export"?"Export":"Import")} (${F(c.size)})`)},$$slots:{default:!0}}),M.out.push("<!---->")},$$slots:{default:!0}}),P.out.push("<!---->")},$$slots:{default:!0}}),N.out.push("<!---->")}}),b.out.push("<!---->")},$$slots:{default:!0}}),w.out.push("<!---->")}do g=!0,x=W(t),C(x);while(!g);G(t,x),O(e,{open:u}),k()}function Os(t){const e=new Map;for(const s of t)e.set(s.conv.id,s.messages.length);return e}function gu(t,e){S();let s=[],n=[],o=!1,i=!1,r=!1,u=!1,h=[],c=new Map,l=[];async function a(){try{const g=await Ae.getAllConversations();if(g.length===0){alert("No conversations to export");return}const x=await Promise.all(g.map(async C=>{const w=await Ae.getConversationMessages(C.id);return{conv:C,messages:w}}));c=Os(x),h=g,r=!0}catch(g){console.error("Failed to load conversations:",g),alert("Failed to load conversations")}}async function d(g){try{const x=await Promise.all(g.map(async N=>{const P=await Ae.getConversationMessages(N.id);return{conv:et(N),messages:et(P)}})),C=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),w=URL.createObjectURL(C),b=document.createElement("a");b.href=w,b.download=`conversations_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(w),s=g,o=!0,i=!1,r=!1}catch(x){console.error("Export failed:",x),alert("Failed to export conversations")}}async function m(){try{const g=document.createElement("input");g.type="file",g.accept=".json",g.onchange=async x=>{const C=x.target?.files?.[0];if(C)try{const w=await C.text(),b=JSON.parse(w);let N;if(Array.isArray(b))N=b;else if(b&&typeof b=="object"&&"conv"in b&&"messages"in b)N=[b];else throw new Error("Invalid file format: expected array of conversations or single conversation object");l=N,h=N.map(P=>P.conv),c=Os(N),u=!0}catch(w){const b=w instanceof Error?w.message:"Unknown error";console.error("Failed to parse file:",w),alert(`Failed to parse file: ${b}`)}},g.click()}catch(g){console.error("Import failed:",g),alert("Failed to import conversations")}}async function f(g){try{const x=new Set(g.map(w=>w.id)),C=et(l).filter(w=>x.has(w.conv.id));await Ae.importConversations(C),await so.loadConversations(),n=g,i=!0,o=!1,u=!1}catch(x){console.error("Import failed:",x),alert("Failed to import conversations. Please check the file format.")}}let p=!0,v;function T(g){if(g.out.push(`<div class="space-y-6"><div class="space-y-4"><div class="grid"><h4 class="mb-2 text-sm font-medium">Export Conversations</h4> <p class="mb-4 text-sm text-muted-foreground">Download all your conversations as a JSON file. This includes all messages, attachments, and
				conversation history.</p> `),Y(g,{class:"w-full justify-start justify-self-start md:w-auto",onclick:a,variant:"outline",children:x=>{fi(x,{class:"mr-2 h-4 w-4"}),x.out.push("<!----> Export conversations")},$$slots:{default:!0}}),g.out.push("<!----> "),o&&s.length>0){g.out.push("<!--[-->");const x=ee(s.slice(0,10));g.out.push(`<div class="mt-4 grid overflow-x-auto rounded-lg border border-border/50 bg-muted/30 p-4"><h5 class="mb-2 text-sm font-medium">Exported ${F(s.length)} conversation${F(s.length===1?"":"s")}</h5> <ul class="space-y-1 text-sm text-muted-foreground"><!--[-->`);for(let C=0,w=x.length;C<w;C++){let b=x[C];g.out.push(`<li class="truncate"> ${F(b.name||"Untitled conversation")}</li>`)}g.out.push("<!--]--> "),s.length>10?(g.out.push("<!--[-->"),g.out.push(`<li class="italic">... and ${F(s.length-10)} more</li>`)):g.out.push("<!--[!-->"),g.out.push("<!--]--></ul></div>")}else g.out.push("<!--[!-->");if(g.out.push(`<!--]--></div> <div class="grid border-t border-border/30 pt-4"><h4 class="mb-2 text-sm font-medium">Import Conversations</h4> <p class="mb-4 text-sm text-muted-foreground">Import one or more conversations from a previously exported JSON file. This will merge with
				your existing conversations.</p> `),Y(g,{class:"w-full justify-start justify-self-start md:w-auto",onclick:m,variant:"outline",children:x=>{Ni(x,{class:"mr-2 h-4 w-4"}),x.out.push("<!----> Import conversations")},$$slots:{default:!0}}),g.out.push("<!----> "),i&&n.length>0){g.out.push("<!--[-->");const x=ee(n.slice(0,10));g.out.push(`<div class="mt-4 grid overflow-x-auto rounded-lg border border-border/50 bg-muted/30 p-4"><h5 class="mb-2 text-sm font-medium">Imported ${F(n.length)} conversation${F(n.length===1?"":"s")}</h5> <ul class="space-y-1 text-sm text-muted-foreground"><!--[-->`);for(let C=0,w=x.length;C<w;C++){let b=x[C];g.out.push(`<li class="truncate"> ${F(b.name||"Untitled conversation")}</li>`)}g.out.push("<!--]--> "),n.length>10?(g.out.push("<!--[-->"),g.out.push(`<li class="italic">... and ${F(n.length-10)} more</li>`)):g.out.push("<!--[!-->"),g.out.push("<!--]--></ul></div>")}else g.out.push("<!--[!-->");g.out.push("<!--]--></div></div></div> "),As(g,{conversations:h,messageCountMap:c,mode:"export",onCancel:()=>r=!1,onConfirm:d,get open(){return r},set open(x){r=x,p=!1}}),g.out.push("<!----> "),As(g,{conversations:h,messageCountMap:c,mode:"import",onCancel:()=>u=!1,onConfirm:f,get open(){return u},set open(x){u=x,p=!1}}),g.out.push("<!---->")}do p=!0,v=W(t),T(v);while(!p);G(t,v),k()}function mu(t,e){S();let s="installed",n=[],o=[],i=!1,r=null,u=null,h=null;async function c(){i=!0,r=null;try{s==="available"||(o=(await mt.listInstalled()).models)}catch(d){r=d instanceof Error?d.message:"Failed to load models",console.error("Error loading models:",d)}finally{i=!1}}async function l(d){u=d,r=null;try{await mt.remove(d),await c()}catch(m){r=m instanceof Error?m.message:"Failed to remove model",console.error("Error removing model:",m)}finally{u=null,h=null}}async function a(d){r=null;try{const m=await mt.use(d);alert(m.message||"Model switched successfully. Please restart the server with the new model.")}catch(m){r=m instanceof Error?m.message:"Failed to switch model",console.error("Error switching model:",m)}}if(t.out.push(`<div class="space-y-4"><div class="flex items-center justify-between"><div class="flex gap-2"><button${K(`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${R("bg-accent text-accent-foreground")}`)}>Installed (${F(o.length)})</button> <button${K(`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${R("text-muted-foreground hover:bg-accent")}`)}>Available (${F(n.length)})</button></div> `),Y(t,{variant:"outline",size:"sm",onclick:c,disabled:i,children:d=>{Ot(d,{class:`h-4 w-4 mr-2 ${R(i?"animate-spin":"")}`}),d.out.push("<!----> Refresh")},$$slots:{default:!0}}),t.out.push("<!----></div> "),r?(t.out.push("<!--[-->"),t.out.push(`<div class="bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm">${F(r)}</div>`)):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),i&&o.length===0)t.out.push("<!--[-->"),t.out.push('<div class="flex items-center justify-center py-8">'),nt(t,{class:"h-6 w-6 animate-spin text-muted-foreground"}),t.out.push("<!----></div>");else{t.out.push("<!--[!-->");{if(t.out.push("<!--[-->"),o.length===0)t.out.push("<!--[-->"),t.out.push('<div class="text-center py-8 text-muted-foreground"><p>No models installed.</p> <p class="text-sm mt-2">Switch to the "Available" tab to download models.</p></div>');else{t.out.push("<!--[!-->");const d=ee(o);t.out.push('<div class="space-y-3"><!--[-->');for(let m=0,f=d.length;m<f;m++){let p=d[m];ds(t,{children:v=>{Qi(v,{children:T=>{T.out.push('<div class="flex items-start justify-between"><div class="flex-1">'),yi(T,{class:"text-base",children:g=>{g.out.push(`<!---->${F(p.display_name)}`)},$$slots:{default:!0}}),T.out.push("<!----> "),Zi(T,{class:"mt-1",children:g=>{g.out.push(`<!---->${F(p.description)}`)},$$slots:{default:!0}}),T.out.push("<!----></div> "),Ne(T,{variant:"secondary",class:"ml-2",children:g=>{hi(g,{class:"h-3 w-3 mr-1"}),g.out.push("<!----> Installed")},$$slots:{default:!0}}),T.out.push("<!----></div>")},$$slots:{default:!0}}),v.out.push("<!----> "),Ji(v,{children:T=>{T.out.push(`<div class="flex items-center justify-between"><div class="text-sm text-muted-foreground"><span class="font-medium">Size:</span> ${F(p.size_str)}   <span class="font-medium">Quantization:</span> ${F(p.quantization)}</div> <div class="flex gap-2">`),Y(T,{variant:"outline",size:"sm",onclick:()=>a(p.name),children:g=>{g.out.push("<!---->Use Model")},$$slots:{default:!0}}),T.out.push("<!----> "),Y(T,{variant:"destructive",size:"sm",onclick:()=>h=p.name,disabled:u===p.name,children:g=>{u===p.name?(g.out.push("<!--[-->"),nt(g,{class:"h-4 w-4 animate-spin"})):(g.out.push("<!--[!-->"),ot(g,{class:"h-4 w-4"})),g.out.push("<!--]-->")},$$slots:{default:!0}}),T.out.push("<!----></div></div>")},$$slots:{default:!0}}),v.out.push("<!---->")},$$slots:{default:!0}})}t.out.push("<!--]--></div>")}t.out.push("<!--]-->")}t.out.push("<!--]-->")}t.out.push("<!--]--></div> <!---->"),Ve(t,{open:h!==null,children:d=>{d.out.push("<!---->"),He(d,{children:m=>{m.out.push("<!---->"),We(m,{children:f=>{f.out.push("<!---->"),Ge(f,{children:p=>{p.out.push("<!---->Delete Model")},$$slots:{default:!0}}),f.out.push("<!----> <!---->"),qe(f,{children:p=>{p.out.push(`<!---->Are you sure you want to delete "${F(h)}"? This action cannot be undone.`)},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),m.out.push("<!----> <!---->"),Ye(m,{children:f=>{f.out.push("<!---->"),sn(f,{onclick:()=>h=null,children:p=>{p.out.push("<!---->Cancel")},$$slots:{default:!0}}),f.out.push("<!----> <!---->"),Xe(f,{onclick:()=>{h&&l(h)},children:p=>{p.out.push("<!---->Delete")},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),m.out.push("<!---->")},$$slots:{default:!0}}),d.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->"),k()}function vu(t,e){S();let{onOpenChange:s,open:n=!1}=e;const o=[{title:"General",icon:kn,fields:[{key:"apiKey",label:"API Key",type:"input"},{key:"systemMessage",label:"System Message (will be disabled if left empty)",type:"textarea"},{key:"theme",label:"Theme",type:"select",options:[{value:"system",label:"System",icon:xi},{value:"light",label:"Light",icon:_i},{value:"dark",label:"Dark",icon:wi}]},{key:"showMessageStats",label:"Show message generation statistics",type:"checkbox"},{key:"showTokensPerSecond",label:"Show tokens per second",type:"checkbox"},{key:"keepStatsVisible",label:"Keep stats visible after generation",type:"checkbox"},{key:"askForTitleConfirmation",label:"Ask for confirmation before changing conversation title",type:"checkbox"},{key:"pasteLongTextToFileLen",label:"Paste long text to file length",type:"input"},{key:"pdfAsImage",label:"Parse PDF as image",type:"checkbox"},{key:"showModelInfo",label:"Show model information",type:"checkbox"},{key:"renderUserContentAsMarkdown",label:"Render user content as Markdown",type:"checkbox"}]},{title:"Sampling",icon:mi,fields:[{key:"temperature",label:"Temperature",type:"input"},{key:"dynatemp_range",label:"Dynamic temperature range",type:"input"},{key:"dynatemp_exponent",label:"Dynamic temperature exponent",type:"input"},{key:"top_k",label:"Top K",type:"input"},{key:"top_p",label:"Top P",type:"input"},{key:"min_p",label:"Min P",type:"input"},{key:"xtc_probability",label:"XTC probability",type:"input"},{key:"xtc_threshold",label:"XTC threshold",type:"input"},{key:"typ_p",label:"Typical P",type:"input"},{key:"max_tokens",label:"Max tokens",type:"input"},{key:"samplers",label:"Samplers",type:"input"}]},{title:"Penalties",icon:at,fields:[{key:"repeat_last_n",label:"Repeat last N",type:"input"},{key:"repeat_penalty",label:"Repeat penalty",type:"input"},{key:"presence_penalty",label:"Presence penalty",type:"input"},{key:"frequency_penalty",label:"Frequency penalty",type:"input"},{key:"dry_multiplier",label:"DRY multiplier",type:"input"},{key:"dry_base",label:"DRY base",type:"input"},{key:"dry_allowed_length",label:"DRY allowed length",type:"input"},{key:"dry_penalty_last_n",label:"DRY penalty last N",type:"input"}]},{title:"Reasoning",icon:gn,fields:[{key:"showThoughtInProgress",label:"Show thought in progress",type:"checkbox"}]},{title:"Import/Export",icon:pi,fields:[]},{title:"Developer",icon:di,fields:[{key:"modelSelectorEnabled",label:"Enable model selector",type:"checkbox"},{key:"disableReasoningFormat",label:"Show raw LLM output",type:"checkbox"},{key:"custom",label:"Custom JSON",type:"textarea"}]}];let i="General",r=o.find(f=>f.title===i)||o[0],u={...ie()},h="";function c(f){u.theme=f,vt(f)}function l(f,p){u[f]=p}function a(){u.theme!==h&&vt(h),s?.(!1)}function d(){u={...ie()},vt(u.theme),h=u.theme}function m(){if(u.custom&&typeof u.custom=="string"&&u.custom.trim())try{JSON.parse(u.custom)}catch(v){alert("Invalid JSON in custom parameters. Please check the format and try again."),console.error(v);return}const f={...u},p=["temperature","top_k","top_p","min_p","max_tokens","pasteLongTextToFileLen","dynatemp_range","dynatemp_exponent","typ_p","xtc_probability","xtc_threshold","repeat_last_n","repeat_penalty","presence_penalty","frequency_penalty","dry_multiplier","dry_base","dry_allowed_length","dry_penalty_last_n"];for(const v of p)if(f[v]!==void 0&&f[v]!==""){const T=Number(f[v]);if(!isNaN(T))f[v]=T;else{alert(`Invalid numeric value for ${v}. Please enter a valid number.`);return}}Io(f),s?.(!1)}t.out.push("<!---->"),ls(t,{open:n,onOpenChange:a,children:f=>{f.out.push("<!---->"),us(f,{class:`z-999999 flex h-[100dvh] max-h-[100dvh] min-h-[100dvh] flex-col gap-0 rounded-none p-0
			md:h-[64vh] md:max-h-[64vh] md:min-h-0 md:rounded-lg`,style:"max-width: 48rem;",children:p=>{const v=ee(o),T=ee(o);p.out.push('<div class="flex flex-1 flex-col overflow-hidden md:flex-row"><div class="hidden w-64 border-r border-border/30 p-6 md:block"><nav class="space-y-1 py-2"><!---->'),rt(p,{class:"mb-6 flex items-center gap-2",children:g=>{g.out.push("<!---->Settings")},$$slots:{default:!0}}),p.out.push("<!----> <!--[-->");for(let g=0,x=v.length;g<x;g++){let C=v[g];p.out.push(`<button${K(`flex w-full cursor-pointer items-center gap-3 rounded-lg px-3 py-2 text-left text-sm transition-colors hover:bg-accent ${R(i===C.title?"bg-accent text-accent-foreground":"text-muted-foreground")}`)}><!---->`),C.icon(p,{class:"h-4 w-4"}),p.out.push(`<!----> <span class="ml-2">${F(C.title)}</span></button>`)}p.out.push('<!--]--></nav></div> <div class="flex flex-col md:hidden"><div class="border-b border-border/30 py-4"><!---->'),rt(p,{class:"mb-6 flex items-center gap-2 px-4",children:g=>{g.out.push("<!---->Settings")},$$slots:{default:!0}}),p.out.push(`<!----> <div class="relative flex items-center" style="scroll-padding: 1rem;"><button${K(`absolute left-2 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-muted shadow-md backdrop-blur-sm transition-opacity hover:bg-accent ${R("pointer-events-none opacity-0")}`)} aria-label="Scroll left">`),mn(p,{class:"h-4 w-4"}),p.out.push('<!----></button> <div class="scrollbar-hide overflow-x-auto py-2"><div class="flex min-w-max gap-2"><!--[-->');for(let g=0,x=T.length;g<x;g++){let C=T[g];p.out.push(`<button${K(`flex cursor-pointer items-center gap-2 rounded-lg px-3 py-2 text-sm whitespace-nowrap transition-colors first:ml-4 last:mr-4 hover:bg-accent ${R(i===C.title?"bg-accent text-accent-foreground":"text-muted-foreground")}`)}><!---->`),C.icon(p,{class:"h-4 w-4 flex-shrink-0"}),p.out.push(`<!----> <span>${F(C.title)}</span></button>`)}p.out.push(`<!--]--></div></div> <button${K(`absolute right-2 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-muted shadow-md backdrop-blur-sm transition-opacity hover:bg-accent ${R("pointer-events-none opacity-0")}`)} aria-label="Scroll right">`),vn(p,{class:"h-4 w-4"}),p.out.push("<!----></button></div></div></div> "),tn(p,{class:"max-h-[calc(100dvh-13.5rem)] flex-1 md:max-h-[calc(100vh-13.5rem)]",children:g=>{g.out.push('<div class="space-y-6 p-4 md:p-6"><div class="grid"><div class="mb-6 flex hidden items-center gap-2 border-b border-border/30 pb-6 md:flex"><!---->'),r.icon(g,{class:"h-5 w-5"}),g.out.push(`<!----> <h3 class="text-lg font-semibold">${F(r.title)}</h3></div> `),r.title==="Import/Export"?(g.out.push("<!--[-->"),gu(g)):(g.out.push("<!--[!-->"),r.title==="Developer"?(g.out.push("<!--[-->"),g.out.push('<div class="space-y-6">'),zs(g,{fields:r.fields,localConfig:u,onConfigChange:l,onThemeChange:c}),g.out.push(`<!----> <div class="border-t border-border/30 pt-6"><h4 class="mb-4 text-sm font-semibold">Model Management</h4> <p class="mb-4 text-sm text-muted-foreground">Manage your installed models and download new ones. Enable the model selector above to
										choose models in the chat interface.</p> `),mu(g),g.out.push("<!----></div></div>")):(g.out.push("<!--[!-->"),g.out.push('<div class="space-y-6">'),zs(g,{fields:r.fields,localConfig:u,onConfigChange:l,onThemeChange:c}),g.out.push("<!----></div>")),g.out.push("<!--]-->")),g.out.push(`<!--]--></div> <div class="mt-8 border-t pt-6"><p class="text-xs text-muted-foreground">Settings are saved in browser's localStorage</p></div></div>`)},$$slots:{default:!0}}),p.out.push("<!----></div> "),bu(p,{onReset:d,onSave:m}),p.out.push("<!---->")},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->"),k()}function bu(t,e){S();let{onReset:s,onSave:n}=e,o=!1;function i(){o=!0}function r(){Do(),s?.(),o=!1}function u(){n?.()}let h=!0,c;function l(a){a.out.push('<div class="flex justify-between border-t border-border/30 p-6"><div class="flex gap-2">'),Y(a,{variant:"outline",onclick:i,children:d=>{Ct(d,{class:"h-3 w-3"}),d.out.push("<!----> Reset to default")},$$slots:{default:!0}}),a.out.push("<!----></div> "),Y(a,{onclick:u,children:d=>{d.out.push("<!---->Save settings")},$$slots:{default:!0}}),a.out.push("<!----></div> <!---->"),Ve(a,{get open(){return o},set open(d){o=d,h=!1},children:d=>{d.out.push("<!---->"),He(d,{children:m=>{m.out.push("<!---->"),We(m,{children:f=>{f.out.push("<!---->"),Ge(f,{children:p=>{p.out.push("<!---->Reset Settings to Default")},$$slots:{default:!0}}),f.out.push("<!----> <!---->"),qe(f,{children:p=>{p.out.push(`<!---->Are you sure you want to reset all settings to their default values? This will reset all
				parameters to the values provided by the server's /props endpoint and remove all your custom
				configurations.`)},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),m.out.push("<!----> <!---->"),Ye(m,{children:f=>{f.out.push("<!---->"),sn(f,{children:p=>{p.out.push("<!---->Cancel")},$$slots:{default:!0}}),f.out.push("<!----> <!---->"),Xe(f,{onclick:r,children:p=>{p.out.push("<!---->Reset to Default")},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),m.out.push("<!---->")},$$slots:{default:!0}}),d.out.push("<!---->")},$$slots:{default:!0}}),a.out.push("<!---->")}do h=!0,c=W(t),l(c);while(!h);G(t,c),k()}function xu(t,e){S();let{ref:s=null,class:n,value:o,label:i,children:r,$$slots:u,$$events:h,...c}=e,l=!0,a;function d(m){m.out.push("<!---->");{let f=function(p,{selected:v,highlighted:T}){p.out.push('<span class="absolute right-2 flex size-3.5 items-center justify-center">'),v?(p.out.push("<!--[-->"),pt(p,{class:"size-4"})):p.out.push("<!--[!-->"),p.out.push("<!--]--></span> "),r?(p.out.push("<!--[-->"),r(p,{selected:v,highlighted:T}),p.out.push("<!---->")):(p.out.push("<!--[!-->"),p.out.push(`${F(i||o)}`)),p.out.push("<!--]-->")};Ar(m,E([{value:o,"data-slot":"select-item",class:J("relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n)},c,{get ref(){return s},set ref(p){s=p,l=!1},children:f,$$slots:{default:!0}}]))}m.out.push("<!---->")}do l=!0,a=W(t),d(a);while(!l);G(t,a),O(e,{ref:s}),k()}function wu(t,e){S();let{ref:s=null,class:n,$$slots:o,$$events:i,...r}=e,u=!0,h;function c(l){l.out.push("<!---->"),zr(l,E([{"data-slot":"select-scroll-up-button",class:J("flex cursor-default items-center justify-center py-1",n)},r,{get ref(){return s},set ref(a){s=a,u=!1},children:a=>{li(a,{class:"size-4"})},$$slots:{default:!0}}])),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),O(e,{ref:s}),k()}function Cu(t,e){S();let{ref:s=null,class:n,$$slots:o,$$events:i,...r}=e,u=!0,h;function c(l){l.out.push("<!---->"),Rr(l,E([{"data-slot":"select-scroll-down-button",class:J("flex cursor-default items-center justify-center py-1",n)},r,{get ref(){return s},set ref(a){s=a,u=!1},children:a=>{cs(a,{class:"size-4"})},$$slots:{default:!0}}])),l.out.push("<!---->")}do u=!0,h=W(t),c(h);while(!u);G(t,h),O(e,{ref:s}),k()}function Su(t,e){S();let{ref:s=null,class:n,sideOffset:o=4,portalProps:i,children:r,$$slots:u,$$events:h,...c}=e;_o(()=>{});let l=!0,a;function d(m){m.out.push("<!---->"),Ke(m,E([i,{children:f=>{f.out.push("<!---->"),Er(f,E([{sideOffset:o,"data-slot":"select-content",class:J("relative z-[var(--layer-popover,1000000)] max-h-(--bits-select-content-available-height) min-w-[8rem] origin-(--bits-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[side=bottom]:translate-y-1 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:-translate-x-1 data-[side=left]:slide-in-from-right-2 data-[side=right]:translate-x-1 data-[side=right]:slide-in-from-left-2 data-[side=top]:-translate-y-1 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95",n)},c,{get ref(){return s},set ref(p){s=p,l=!1},children:p=>{wu(p,{}),p.out.push("<!----> <!---->"),Or(p,{class:J("h-(--bits-select-anchor-height) w-full min-w-(--bits-select-anchor-width) scroll-my-1 p-1"),children:v=>{r?.(v),v.out.push("<!---->")},$$slots:{default:!0}}),p.out.push("<!----> "),Cu(p,{}),p.out.push("<!---->")},$$slots:{default:!0}}])),f.out.push("<!---->")},$$slots:{default:!0}}])),m.out.push("<!---->")}do l=!0,a=W(t),d(a);while(!l);G(t,a),O(e,{ref:s}),k()}function ku(t,e){S();let{ref:s=null,class:n,children:o,size:i="default",variant:r="default",$$slots:u,$$events:h,...c}=e;const l=r==="plain"?"group inline-flex w-full items-center justify-end gap-2 whitespace-nowrap px-0 py-0 text-sm font-medium text-muted-foreground transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 data-[placeholder]:text-muted-foreground data-[size=default]:h-9 data-[size=sm]:h-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-3 [&_svg:not([class*='text-'])]:text-muted-foreground":"flex w-fit items-center justify-between gap-2 rounded-md border border-input bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none select-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[placeholder]:text-muted-foreground data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 dark:bg-input/30 dark:hover:bg-input/50 dark:aria-invalid:ring-destructive/40 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground",a=r==="plain"?"size-3 opacity-60 transition-transform group-data-[state=open]:-rotate-180":"size-4 opacity-50";let d=!0,m;function f(p){p.out.push("<!---->"),$r(p,E([{"data-slot":"select-trigger","data-size":i,class:J(l,n)},c,{get ref(){return s},set ref(v){s=v,d=!1},children:v=>{o?.(v),v.out.push("<!----> "),cs(v,{class:a}),v.out.push("<!---->")},$$slots:{default:!0}}])),p.out.push("<!---->")}do d=!0,m=W(t),f(m);while(!d);G(t,m),O(e,{ref:s}),k()}const _u=yr;function Pu(t,e){S();let{ref:s=null,value:n=void 0,class:o,$$slots:i,$$events:r,...u}=e;t.out.push(`<textarea${H({"data-slot":"textarea",class:re(J("flex field-sizing-content min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 md:text-sm dark:bg-input/30 dark:aria-invalid:ring-destructive/40",o)),...u},null)}>`);const h=F(n);h&&t.out.push(`${h}`),t.out.push("</textarea>"),O(e,{ref:s,value:n}),k()}function Rs(t,e){let{class:s=""}=e;Ne(t,{variant:"secondary",class:`h-5 bg-orange-100 px-1.5 py-0.5 text-xs text-orange-800 dark:bg-orange-900 dark:text-orange-200 ${R(s)}`,children:n=>{Fi(n,{class:"mr-1 h-3 w-3"}),n.out.push("<!----> Custom")},$$slots:{default:!0}})}function zs(t,e){S();let{fields:s,localConfig:n,onConfigChange:o,onThemeChange:i}=e;function r(h){return Eo.canSyncParameter(h)?Ao(h):null}const u=ee(s);t.out.push("<!--[-->");for(let h=0,c=u.length;h<c;h++){let l=u[h];if(t.out.push('<div class="space-y-2">'),l.type==="input"){t.out.push("<!--[-->");const a=r(l.key),d=String(n[l.key]??""),m=a?.serverDefault,f=(()=>{if(!a||m===void 0)return!1;const p=d,v=parseFloat(p),T=isNaN(v)?p:Math.round(v*1e6)/1e6,g=typeof m=="number"?Math.round(m*1e6)/1e6:m;return T!==g})();t.out.push('<div class="flex items-center gap-2">'),$e(t,{for:l.key,class:"text-sm font-medium",children:p=>{p.out.push(`<!---->${F(l.label)}`)},$$slots:{default:!0}}),t.out.push("<!----> "),f?(t.out.push("<!--[-->"),Rs(t,{})):t.out.push("<!--[!-->"),t.out.push('<!--]--></div> <div class="relative w-full md:max-w-md">'),Js(t,{id:l.key,value:d,oninput:p=>{o(l.key,p.currentTarget.value)},placeholder:`Default: ${Cs[l.key]??"none"}`,class:`w-full ${R(f?"pr-8":"")}`}),t.out.push("<!----> "),f?(t.out.push("<!--[-->"),t.out.push('<button type="button" class="absolute top-1/2 right-2 inline-flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded transition-colors hover:bg-muted" aria-label="Reset to default" title="Reset to default">'),Ct(t,{class:"h-3 w-3"}),t.out.push("<!----></button>")):t.out.push("<!--[!-->"),t.out.push("<!--]--></div> "),l.help||ge[l.key]?(t.out.push("<!--[-->"),t.out.push(`<p class="mt-1 text-xs text-muted-foreground">${F(l.help||ge[l.key])}</p>`)):t.out.push("<!--[!-->"),t.out.push("<!--]-->")}else{if(t.out.push("<!--[!-->"),l.type==="textarea")t.out.push("<!--[-->"),$e(t,{for:l.key,class:"block text-sm font-medium",children:a=>{a.out.push(`<!---->${F(l.label)}`)},$$slots:{default:!0}}),t.out.push("<!----> "),Pu(t,{id:l.key,value:String(n[l.key]??""),onchange:a=>o(l.key,a.currentTarget.value),placeholder:`Default: ${Cs[l.key]??"none"}`,class:"min-h-[100px] w-full md:max-w-2xl"}),t.out.push("<!----> "),l.help||ge[l.key]?(t.out.push("<!--[-->"),t.out.push(`<p class="mt-1 text-xs text-muted-foreground">${F(l.help||ge[l.key])}</p>`)):t.out.push("<!--[!-->"),t.out.push("<!--]-->");else{if(t.out.push("<!--[!-->"),l.type==="select"){t.out.push("<!--[-->");const a=l.options?.find(v=>v.value===n[l.key]),d=r(l.key),m=n[l.key],f=d?.serverDefault,p=!d||f===void 0?!1:m!==f;t.out.push('<div class="flex items-center gap-2">'),$e(t,{for:l.key,class:"text-sm font-medium",children:v=>{v.out.push(`<!---->${F(l.label)}`)},$$slots:{default:!0}}),t.out.push("<!----> "),p?(t.out.push("<!--[-->"),Rs(t,{})):t.out.push("<!--[!-->"),t.out.push("<!--]--></div> <!---->"),_u(t,{type:"single",value:m,onValueChange:v=>{l.key==="theme"&&v&&i?i(v):o(l.key,v)},children:v=>{v.out.push('<div class="relative w-full md:w-auto md:max-w-md"><!---->'),ku(v,{class:"w-full",children:T=>{if(T.out.push('<div class="flex items-center gap-2">'),a?.icon){T.out.push("<!--[-->");const g=a.icon;T.out.push("<!---->"),g(T,{class:"h-4 w-4"}),T.out.push("<!---->")}else T.out.push("<!--[!-->");T.out.push(`<!--]--> ${F(a?.label||`Select ${l.label.toLowerCase()}`)}</div>`)},$$slots:{default:!0}}),v.out.push("<!----> "),p?(v.out.push("<!--[-->"),v.out.push('<button type="button" class="absolute top-1/2 right-8 inline-flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded transition-colors hover:bg-muted" aria-label="Reset to default" title="Reset to default">'),Ct(v,{class:"h-3 w-3"}),v.out.push("<!----></button>")):v.out.push("<!--[!-->"),v.out.push("<!--]--></div> <!---->"),Su(v,{children:T=>{if(l.options){T.out.push("<!--[-->");const g=ee(l.options);T.out.push("<!--[-->");for(let x=0,C=g.length;x<C;x++){let w=g[x];T.out.push("<!---->"),xu(T,{value:w.value,label:w.label,children:b=>{if(b.out.push('<div class="flex items-center gap-2">'),w.icon){b.out.push("<!--[-->");const N=w.icon;b.out.push("<!---->"),N(b,{class:"h-4 w-4"}),b.out.push("<!---->")}else b.out.push("<!--[!-->");b.out.push(`<!--]--> ${F(w.label)}</div>`)},$$slots:{default:!0}}),T.out.push("<!---->")}T.out.push("<!--]-->")}else T.out.push("<!--[!-->");T.out.push("<!--]-->")},$$slots:{default:!0}}),v.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!----> "),l.help||ge[l.key]?(t.out.push("<!--[-->"),t.out.push(`<p class="mt-1 text-xs text-muted-foreground">${F(l.help||ge[l.key])}</p>`)):t.out.push("<!--[!-->"),t.out.push("<!--]-->")}else{if(t.out.push("<!--[!-->"),l.type==="checkbox"){t.out.push("<!--[-->");const a=l.key==="pdfAsImage"&&!le();t.out.push('<div class="flex items-start space-x-3">'),it(t,{id:l.key,checked:!!n[l.key],disabled:a,onCheckedChange:d=>o(l.key,d),class:"mt-1"}),t.out.push(`<!----> <div class="space-y-1"><label${Z("for",l.key)}${K(`cursor-pointer text-sm leading-none font-medium ${R(a?"text-muted-foreground":"")}`)}>${F(l.label)}</label> `),l.help||ge[l.key]?(t.out.push("<!--[-->"),t.out.push(`<p class="text-xs text-muted-foreground">${F(l.help||ge[l.key])}</p>`)):(t.out.push("<!--[!-->"),l.key==="pdfAsImage"&&!le()?(t.out.push("<!--[-->"),t.out.push(`<p class="text-xs text-muted-foreground">PDF-to-image processing requires a vision-capable model. PDFs will be processed as
							text.</p>`)):t.out.push("<!--[!-->"),t.out.push("<!--]-->")),t.out.push("<!--]--></div></div>")}else t.out.push("<!--[!-->");t.out.push("<!--]-->")}t.out.push("<!--]-->")}t.out.push("<!--]-->")}t.out.push("<!--]--></div>")}t.out.push("<!--]-->"),k()}function Nu(t,e){S();let{open:s=void 0,type:n,message:o,onOpenChange:i}=e;const r=n==="timeout",u=r?"TCP Timeout":"Server Error",h=r?"The request did not receive a response from the server before timing out.":"The server responded with an error message. Review the details below.",c=r?"text-destructive":"text-amber-500",l=r?"border-destructive/40 bg-destructive/10 text-destructive":"border-amber-500/40 bg-amber-500/10 text-amber-600 dark:text-amber-400";function a(d){s=d,i?.(d)}t.out.push("<!---->"),Ve(t,{open:s,onOpenChange:a,children:d=>{d.out.push("<!---->"),He(d,{children:m=>{m.out.push("<!---->"),We(m,{children:f=>{f.out.push("<!---->"),Ge(f,{class:"flex items-center gap-2",children:p=>{r?(p.out.push("<!--[-->"),Pi(p,{class:`h-5 w-5 ${c}`})):(p.out.push("<!--[!-->"),at(p,{class:`h-5 w-5 ${c}`})),p.out.push(`<!--]--> ${F(u)}`)},$$slots:{default:!0}}),f.out.push("<!----> <!---->"),qe(f,{children:p=>{p.out.push(`<!---->${F(h)}`)},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),m.out.push(`<!----> <div${K(`rounded-lg border px-4 py-3 text-sm ${l}`)}><p class="font-medium">${F(o)}</p></div> <!---->`),Ye(m,{children:f=>{f.out.push("<!---->"),Xe(f,{onclick:()=>a(!1),children:p=>{p.out.push("<!---->Close")},$$slots:{default:!0}}),f.out.push("<!---->")},$$slots:{default:!0}}),m.out.push("<!---->")},$$slots:{default:!0}}),d.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->"),O(e,{open:s}),k()}function Mu(t,e){S();let{open:s=void 0,emptyFiles:n,onOpenChange:o}=e;function i(r){s=r,o?.(r)}t.out.push("<!---->"),Ve(t,{open:s,onOpenChange:i,children:r=>{r.out.push("<!---->"),He(r,{children:u=>{const h=ee(n);u.out.push("<!---->"),We(u,{children:c=>{c.out.push("<!---->"),Ge(c,{class:"flex items-center gap-2",children:l=>{gi(l,{class:"h-5 w-5 text-destructive"}),l.out.push("<!----> Empty Files Detected")},$$slots:{default:!0}}),c.out.push("<!----> <!---->"),qe(c,{children:l=>{l.out.push("<!---->The following files are empty and have been removed from your attachments:")},$$slots:{default:!0}}),c.out.push("<!---->")},$$slots:{default:!0}}),u.out.push('<!----> <div class="space-y-3 text-sm"><div class="rounded-lg bg-muted p-3"><div class="mb-2 font-medium">Empty Files:</div> <ul class="list-inside list-disc space-y-1 text-muted-foreground"><!--[-->');for(let c=0,l=h.length;c<l;c++){let a=h[c];u.out.push(`<li class="font-mono text-sm">${F(a)}</li>`)}u.out.push('<!--]--></ul></div> <div><div class="mb-2 font-medium">What happened:</div> <ul class="list-inside list-disc space-y-1 text-muted-foreground"><li>Empty files cannot be processed or sent to the AI model</li> <li>These files have been automatically removed from your attachments</li> <li>You can try uploading files with content instead</li></ul></div></div> <!---->'),Ye(u,{children:c=>{c.out.push("<!---->"),Xe(c,{onclick:()=>i(!1),children:l=>{l.out.push("<!---->Got it")},$$slots:{default:!0}}),c.out.push("<!---->")},$$slots:{default:!0}}),u.out.push("<!---->")},$$slots:{default:!0}}),r.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->"),O(e,{open:s}),k()}function Tu(t,e){S();let{open:s=void 0,code:n,language:o,onOpenChange:i}=e;function r(u){s=u,i?.(u)}t.out.push("<!---->"),$s(t,{open:s,onOpenChange:r,children:u=>{u.out.push("<!---->"),Ke(u,{children:h=>{h.out.push("<!---->"),Vs(h,{class:"code-preview-overlay"}),h.out.push("<!----> <!---->"),Hs(h,{class:"code-preview-content",children:c=>{c.out.push(`<iframe${Z("title",`Preview ${R(o)}`)} sandbox="allow-scripts" class="code-preview-iframe"></iframe> <!---->`),Ws(c,{class:"code-preview-close absolute top-4 right-4 border-none bg-transparent text-white opacity-70 mix-blend-difference transition-opacity hover:opacity-100 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-8","aria-label":"Close preview",children:l=>{Se(l,{}),l.out.push('<!----> <span class="sr-only">Close preview</span>')},$$slots:{default:!0}}),c.out.push("<!---->")},$$slots:{default:!0}}),h.out.push("<!---->")}}),u.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->"),O(e,{open:s}),k()}function An(t,e){S();let{content:s,class:n=""}=e,o="",i=!1,r="",u="text";function h(c){i=c,c||(r="",u="text")}t.out.push(`<div${K(re(n),"svelte-1qk6xxt")}>${Qo(o)}</div> `),Tu(t,{open:i,code:r,language:u,onOpenChange:h}),t.out.push("<!---->"),k()}function Fu(t,e){S();let{class:s="",showActions:n=!1}=e,o=Oo(),i=Ue(),r=Zs(),u=Ro();function h(){return i?"bg-yellow-500":o?"bg-red-500":u?"bg-green-500":"bg-gray-500"}function c(){return i?"Connecting...":o?"Connection Error":u?"Connected":"Unknown"}t.out.push(`<div${K(`flex items-center space-x-3 ${R(s)}`)}><div class="flex items-center space-x-2"><div${K(`h-2 w-2 rounded-full ${R(h())}`)}></div> <span class="text-sm text-muted-foreground">${F(c())}</span></div> `),u&&!o?(t.out.push("<!--[-->"),Ne(t,{variant:"outline",class:"text-xs",children:l=>{hs(l,{class:"mr-1 h-3 w-3"}),l.out.push(`<!----> ${F(r||"Unknown Model")}`)},$$slots:{default:!0}}),t.out.push("<!----> "),u.default_generation_settings.n_ctx?(t.out.push("<!--[-->"),Ne(t,{variant:"secondary",class:"text-xs",children:l=>{l.out.push(`<!---->context: ${F(u.default_generation_settings.n_ctx.toLocaleString())}`)},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push("<!--]-->")):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),n&&o?(t.out.push("<!--[-->"),Y(t,{variant:"outline",size:"sm",class:"text-destructive",children:l=>{at(l,{class:"h-4 w-4"}),l.out.push(`<!----> ${F(o)}`)},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push("<!--]--></div>"),k()}function Iu(t,e){let{class:s="",message:n="Initializing connection to Delta server..."}=e;t.out.push(`<div${K(`flex h-full items-center justify-center ${R(s)}`)}><div class="text-center"><div class="mb-4"><div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted">`),hs(t,{class:"h-8 w-8 animate-pulse text-muted-foreground"}),t.out.push(`<!----></div> <h2 class="mb-2 text-xl font-semibold">Connecting to Server</h2> <p class="text-sm text-muted-foreground">${F(n)}</p></div> <div class="mt-4">`),Fu(t,{class:"justify-center"}),t.out.push("<!----></div></div></div>")}function Du(t,e){S();let s=Pe.supportedModalities,n=Pe.modelName,o=Pe.serverProps;if(o){if(t.out.push("<!--[-->"),t.out.push('<div class="flex flex-wrap items-center justify-center gap-4 text-sm text-muted-foreground">'),n?(t.out.push("<!--[-->"),Ne(t,{variant:"outline",class:"text-xs",children:i=>{hs(i,{class:"mr-1 h-3 w-3"}),i.out.push(`<!----> <span class="block max-w-[50vw] truncate">${F(n)}</span>`)},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push('<!--]--> <div class="flex gap-4">'),o.default_generation_settings.n_ctx?(t.out.push("<!--[-->"),Ne(t,{variant:"secondary",class:"text-xs",children:i=>{i.out.push(`<!---->context: ${F(o.default_generation_settings.n_ctx.toLocaleString())}`)},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),s.length>0){t.out.push("<!--[-->");const i=ee(s);t.out.push("<!--[-->");for(let r=0,u=i.length;r<u;r++){let h=i[r];Ne(t,{variant:"secondary",class:"text-xs",children:c=>{h==="vision"?(c.out.push("<!--[-->"),xn(c,{class:"mr-1 h-3 w-3"})):(c.out.push("<!--[!-->"),h==="audio"?(c.out.push("<!--[-->"),Sn(c,{class:"mr-1 h-3 w-3"})):c.out.push("<!--[!-->"),c.out.push("<!--]-->")),c.out.push(`<!--]--> ${F(h)}`)},$$slots:{default:!0}})}t.out.push("<!--]-->")}else t.out.push("<!--[!-->");t.out.push("<!--]--></div></div>")}else t.out.push("<!--[!-->");t.out.push("<!--]-->"),k()}function ye(t,e){let{icon:s,tooltip:n,variant:o="ghost",size:i="sm",class:r="",disabled:u=!1,onclick:h,"aria-label":c}=e;t.out.push("<!---->"),me(t,{delayDuration:Re,children:l=>{l.out.push("<!---->"),ve(l,{children:a=>{Y(a,{variant:o,size:i,disabled:u,onclick:h,class:`h-6 w-6 p-0 ${R(r)} flex`,"aria-label":c||n,children:d=>{const m=s;d.out.push("<!---->"),m(d,{class:"h-3 w-3"}),d.out.push("<!---->")},$$slots:{default:!0}})},$$slots:{default:!0}}),l.out.push("<!----> <!---->"),be(l,{children:a=>{a.out.push(`<p>${F(n)}</p>`)},$$slots:{default:!0}}),l.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->")}export{Xu as C};
