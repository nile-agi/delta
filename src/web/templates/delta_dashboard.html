<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delta CLI Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #00ff00;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            border: 2px solid #00ff00;
            padding: 20px;
            margin-bottom: 30px;
            background: rgba(0, 255, 0, 0.05);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            text-shadow: 0 0 10px #00ff00;
            margin-bottom: 10px;
        }
        
        .header .prompt {
            font-size: 1.5em;
            color: #00ff00;
        }
        
        .section {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid #00ff00;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
        }
        
        .section h2 {
            border-bottom: 1px solid #00ff00;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-card {
            background: rgba(0, 50, 0, 0.3);
            border: 1px solid #00ff00;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }
        
        .stat-label {
            margin-top: 5px;
            color: #88ff88;
            font-size: 0.9em;
        }
        
        .model-list {
            list-style: none;
        }
        
        .model-item {
            background: rgba(0, 30, 0, 0.5);
            border-left: 3px solid #00ff00;
            padding: 10px 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .model-name {
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .model-info {
            color: #88ff88;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .model-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            background: rgba(0, 50, 0, 0.5);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 5px 10px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
        }
        
        .btn-danger {
            border-color: #ff0000;
            color: #ff0000;
        }
        
        .btn-danger:hover {
            background: rgba(255, 0, 0, 0.2);
            box-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        canvas {
            width: 100% !important;
            height: 100% !important;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
        }
        
        .error {
            color: #ff0000;
            text-shadow: 0 0 5px #ff0000;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .cursor {
            animation: blink 1s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>DELTA CLI</h1>
            <div class="prompt">Î”> <span class="cursor">_</span></div>
            <p style="margin-top: 10px; color: #88ff88;">Local AI Dashboard</p>
        </div>
        
        <div class="section">
            <h2>System Statistics</h2>
            <div class="stat-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-installs">0</div>
                    <div class="stat-label">Total Installs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="models-count">0</div>
                    <div class="stat-label">Models Loaded</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="platform">N/A</div>
                    <div class="stat-label">Platform</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">v1.0.0</div>
                    <div class="stat-label">Version</div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>Available Models</h2>
            <ul class="model-list" id="model-list">
                <li class="loading">Loading models...</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>Platform Distribution</h2>
            <div class="chart-container">
                <canvas id="platform-chart"></canvas>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
        // Fetch system info
        fetch('/api/info')
            .then(res => res.json())
            .then(data => {
                document.getElementById('platform').textContent = data.platform;
            })
            .catch(err => {
                document.getElementById('platform').textContent = 'Error';
            });
        
        // Fetch models
        fetch('/api/models')
            .then(res => res.json())
            .then(data => {
                const list = document.getElementById('model-list');
                list.innerHTML = '';
                
                if (data.models.length === 0) {
                    list.innerHTML = '<li class="model-item">No models found. Add GGUF files to ~/.delta-cli/models/</li>';
                } else {
                    document.getElementById('models-count').textContent = data.models.length;
                    
                    data.models.forEach(model => {
                        const li = document.createElement('li');
                        li.className = 'model-item';
                        li.innerHTML = `
                            <div>
                                <div class="model-name">${model}</div>
                                <div class="model-info">Ready for inference</div>
                            </div>
                            <div class="model-actions">
                                <button class="btn btn-danger" onclick="removeModel('${model}')">Remove</button>
                            </div>
                        `;
                        list.appendChild(li);
                    });
                }
            })
            .catch(err => {
                document.getElementById('model-list').innerHTML = 
                    '<li class="model-item error">Failed to load models</li>';
            });
        
        // Remove model function
        function removeModel(modelName) {
            if (!confirm(`Are you sure you want to remove "${modelName}"?\n\nThis action cannot be undone!`)) {
                return;
            }
            
            fetch('/api/remove', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ model: modelName })
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    alert('Model removed successfully!');
                    // Reload the page to refresh the model list
                    location.reload();
                } else {
                    alert('Failed to remove model: ' + data.message);
                }
            })
            .catch(err => {
                alert('Error removing model: ' + err.message);
            });
        }
        
        // Platform chart (sample data)
        const ctx = document.getElementById('platform-chart');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Linux', 'macOS', 'Windows', 'Android', 'iOS'],
                datasets: [{
                    label: 'Installs by Platform',
                    data: [45, 30, 20, 3, 2],
                    backgroundColor: 'rgba(0, 255, 0, 0.2)',
                    borderColor: 'rgba(0, 255, 0, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { color: '#00ff00' },
                        grid: { color: 'rgba(0, 255, 0, 0.1)' }
                    },
                    x: {
                        ticks: { color: '#00ff00' },
                        grid: { color: 'rgba(0, 255, 0, 0.1)' }
                    }
                },
                plugins: {
                    legend: {
                        labels: { color: '#00ff00' }
                    }
                }
            }
        });
    </script>
</body>
</html>

