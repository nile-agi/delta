var Pk=An=>{throw TypeError(An)};var h5=(An,Er,Mi)=>Er.has(An)||Pk("Cannot "+Mi);var Rn=(An,Er,Mi)=>(h5(An,Er,"read from private field"),Mi?Mi.call(An):Er.get(An)),Ys=(An,Er,Mi)=>Er.has(An)?Pk("Cannot add the same private member more than once"):Er instanceof WeakSet?Er.add(An):Er.set(An,Mi),ma=(An,Er,Mi,zl)=>(h5(An,Er,"write to private field"),zl?zl.call(An,Mi):Er.set(An,Mi),Mi),Qs=(An,Er,Mi)=>(h5(An,Er,"access private method"),Mi);var Rk=(An,Er,Mi,zl)=>({set _(Po){ma(An,Er,Po,Mi)},get _(){return Rn(An,Er,zl)}});this.__sveltekit_vds1rr=this.__sveltekit_vds1rr||{};this.__sveltekit_vds1rr.app=function(An){"use strict";var Pl,fs,To,Cc,Z1,Ec,Tc,Zi,mg,Fk,Dk,Hd,Gu,bg;var Er=typeof document<"u"?document.currentScript:null;const Mi=!0,zl=!1;var Po=Array.isArray,Lk=Array.prototype.indexOf,vg=Array.from,Ku=Object.defineProperty,Ro=Object.getOwnPropertyDescriptor,d5=Object.getOwnPropertyDescriptors,f5=Object.prototype,Bk=Array.prototype,qd=Object.getPrototypeOf,g5=Object.isExtensible;function Rc(r){return typeof r=="function"}const je=()=>{};function zk(r){return r()}function Gd(r){for(var e=0;e<r.length;e++)r[e]()}function Uk(){var r,e,t=new Promise((n,i)=>{r=n,e=i});return{promise:t,resolve:r,reject:e}}function jk(r,e){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const t=[];for(const n of r)if(t.push(n),t.length===e)break;return t}const ba=2,yg=4,$d=8,Fc=16,Js=32,Ul=64,p5=128,Pa=256,Wd=512,bi=1024,na=2048,jl=4096,ns=8192,Hl=16384,Vd=32768,ql=65536,m5=1<<17,b5=1<<18,wg=1<<19,xg=1<<20,_g=1<<21,Sg=1<<22,Gl=1<<23,ms=Symbol("$state"),kg=Symbol("legacy props"),Hk=Symbol(""),Ag=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},qk=1,Cg=3,Fo=8;function Gk(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Dc(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function $k(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Wk(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vk(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xk(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Kk(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yk(){throw new Error("https://svelte.dev/e/get_abort_signal_outside_reaction")}function Qk(){throw new Error("https://svelte.dev/e/hydration_failed")}function v5(r){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Jk(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Zk(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function eA(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function tA(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Xd=1,Kd=2,y5=4,rA=8,nA=16,iA=1,aA=2,sA=4,oA=8,lA=16,cA=1,uA=2,hA=4,dA=1,fA=2,Eg="[",Tg="[!",Mg="]",$l={},hi=Symbol(),gA="http://www.w3.org/1999/xhtml",pA="http://www.w3.org/2000/svg",w5="@attach";function Yu(r){console.warn("https://svelte.dev/e/hydration_mismatch")}function mA(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let hr=!1;function ji(r){hr=r}let Tr;function vi(r){if(r===null)throw Yu(),$l;return Tr=r}function Ra(){return vi(Da(Tr))}function j(r){if(hr){if(Da(Tr)!==null)throw Yu(),$l;Tr=r}}function Et(r=1){if(hr){for(var e=r,t=Tr;e--;)t=Da(t);Tr=t}}function Ig(){for(var r=0,e=Tr;;){if(e.nodeType===Fo){var t=e.data;if(t===Mg){if(r===0)return e;r-=1}else(t===Eg||t===Tg)&&(r+=1)}var n=Da(e);e.remove(),e=n}}function x5(r){if(!r||r.nodeType!==Fo)throw Yu(),$l;return r.data}function _5(r){return r===this.v}function Og(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function bA(r,e){return r!==e}function S5(r){return!Og(r,this.v)}let Lc=!1,vA=!1;function yA(){Lc=!0}const wA=[];function Yd(r,e=!1){return Qd(r,new Map,"",wA)}function Qd(r,e,t,n,i=null){if(typeof r=="object"&&r!==null){var a=e.get(r);if(a!==void 0)return a;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(Po(r)){var s=Array(r.length);e.set(r,s),i!==null&&e.set(i,s);for(var o=0;o<r.length;o+=1){var l=r[o];o in r&&(s[o]=Qd(l,e,t,n))}return s}if(qd(r)===f5){s={},e.set(r,s),i!==null&&e.set(i,s);for(var c in r)s[c]=Qd(r[c],e,t,n);return s}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function")return Qd(r.toJSON(),e,t,n,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}let hn=null;function Jd(r){hn=r}function Bc(r){return ef().get(r)}function Zd(r,e){return ef().set(r,e),e}function Ng(r){return ef().has(r)}function k5(){return ef()}function ye(r,e=!1,t){hn={p:hn,c:null,e:null,s:r,x:null,l:Lc&&!e?{s:null,u:null,$:[]}:null}}function we(r){var e=hn,t=e.e;if(t!==null){e.e=null;for(var n of t)j5(n)}return r!==void 0&&(e.x=r),hn=e.p,r??{}}function Wl(){return!Lc||hn!==null&&hn.l===null}function ef(r){return hn===null&&Dc(),hn.c??=new Map(xA(hn)||void 0)}function xA(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}const _A=new WeakMap;function SA(r){var e=qr;if(e===null)return Jr.f|=Gl,r;if((e.f&Vd)===0){if((e.f&p5)===0)throw!e.parent&&r instanceof Error&&A5(r),r;e.b.error(r)}else Pg(r,e)}function Pg(r,e){for(;e!==null;){if((e.f&p5)!==0)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r instanceof Error&&A5(r),r}function A5(r){const e=_A.get(r);e&&(Ku(r,"message",{value:e.message}),Ku(r,"stack",{value:e.stack}))}const kA=typeof requestIdleCallback>"u"?r=>setTimeout(r,1):requestIdleCallback;let Qu=[],Ju=[];function C5(){var r=Qu;Qu=[],Gd(r)}function E5(){var r=Ju;Ju=[],Gd(r)}function zc(r){Qu.length===0&&queueMicrotask(C5),Qu.push(r)}function AA(r){Ju.length===0&&kA(E5),Ju.push(r)}function CA(){Qu.length>0&&C5(),Ju.length>0&&E5()}function Vl(r){let e=0,t=Bo(0),n;return()=>{RA()&&(g(t),sf(()=>(e===0&&(n=mn(()=>r(()=>Fa(t)))),e+=1,()=>{zc(()=>{e-=1,e===0&&(n?.(),n=void 0)})})))}}function EA(){for(var r=qr.b;r!==null&&!r.has_pending_snippet();)r=r.parent;return r===null&&Gk(),r}function Zu(r){var e=ba|na,t=Jr!==null&&(Jr.f&ba)!==0?Jr:null;return qr===null||t!==null&&(t.f&Pa)!==0?e|=Pa:qr.f|=wg,{ctx:hn,deps:null,effects:null,equals:_5,f:e,fn:r,reactions:null,rv:0,v:hi,wv:0,parent:t??qr,ac:null}}function TA(r,e){let t=qr;t===null&&$k();var n=t.b,i=void 0,a=Bo(hi),s=null,o=!Jr;return DA(()=>{try{var l=r()}catch(f){l=Promise.reject(f)}var c=()=>l;i=s?.then(c,c)??Promise.resolve(l),s=i;var u=qn,h=n.pending;o&&(n.update_pending_count(1),h||u.increment());const d=(f,p=void 0)=>{s=null,h||u.activate(),p?p!==Ag&&(a.f|=Gl,eh(a,p)):((a.f&Gl)!==0&&(a.f^=Gl),eh(a,f)),o&&(n.update_pending_count(-1),h||u.decrement()),O5()};if(i.then(d,f=>d(null,f||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(l=>{function c(u){function h(){u===i?l(a):c(i)}u.then(h,h)}c(i)})}function B(r){const e=Zu(r);return Y5(e),e}function Rg(r){const e=Zu(r);return e.equals=S5,e}function T5(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Hi(e[t])}}function MA(r){for(var e=r.parent;e!==null;){if((e.f&ba)===0)return e;e=e.parent}return null}function Fg(r){var e,t=qr;zo(MA(r));try{T5(r),e=e9(r)}finally{zo(t)}return e}function M5(r){var e=Fg(r);if(r.equals(e)||(r.v=e,r.wv=J5()),!Yl)if(Uc!==null)Uc.set(r,r.v);else{var t=(Uo||(r.f&Pa)!==0)&&r.deps!==null?jl:bi;wi(r,t)}}function I5(r,e,t){const n=Wl()?Zu:Rg;if(e.length===0){t(r.map(n));return}var i=qn,a=qr,s=IA(),o=EA();Promise.all(e.map(l=>TA(l))).then(l=>{i?.activate(),s();try{t([...r.map(n),...l])}catch(c){(a.f&Hl)===0&&Pg(c,a)}i?.deactivate(),O5()}).catch(l=>{o.error(l)})}function IA(){var r=qr,e=Jr,t=hn;return function(){zo(r),bs(e),Jd(t)}}function O5(){zo(null),bs(null),Jd(null)}const tf=new Set;let qn=null,Uc=null,N5=new Set,rf=[];function P5(){const r=rf.shift();rf.length>0&&queueMicrotask(P5),r()}let jc=[],nf=null,Dg=!1;class Do{#e=new Map;#t=new Map;#r=new Set;#n=0;#a=null;#i=!1;#s=[];#o=[];#l=[];#c=[];#h=[];skipped_effects=new Set;#u(e){jc=[];var t=null;if(tf.size>1){t=new Map,Uc=new Map;for(const[a,s]of this.#e)t.set(a,{v:a.v,wv:a.wv}),a.v=s;for(const a of tf)if(a!==this)for(const[s,o]of a.#t)t.has(s)||(t.set(s,{v:s.v,wv:s.wv}),s.v=o)}for(const a of e)this.#g(a);if(this.#s.length===0&&this.#n===0){var n=this.#l,i=this.#c;this.#l=[],this.#c=[],this.#h=[],this.#p(),R5(n),R5(i),this.#a?.resolve()}else{for(const a of this.#l)wi(a,bi);for(const a of this.#c)wi(a,bi);for(const a of this.#h)wi(a,bi)}if(t){for(const[a,{v:s,wv:o}]of t)a.wv<=o&&(a.v=s);Uc=null}for(const a of this.#s)ah(a);for(const a of this.#o)ah(a);this.#s=[],this.#o=[]}#g(e){e.f^=bi;for(var t=e.first;t!==null;){var n=t.f,i=(n&(Js|Ul))!==0,a=i&&(n&bi)!==0,s=a||(n&ns)!==0||this.skipped_effects.has(t);if(!s&&t.fn!==null){if(i)t.f^=bi;else if((n&yg)!==0)this.#c.push(t);else if(cf(t))if((n&Sg)!==0){var o=t.b?.pending?this.#o:this.#s;o.push(t)}else(t.f&Fc)!==0&&this.#h.push(t),ah(t);var l=t.first;if(l!==null){t=l;continue}}var c=t.parent;for(t=t.next;t===null&&c!==null;)t=c.next,c=c.parent}}capture(e,t){this.#t.has(e)||this.#t.set(e,t),this.#e.set(e,e.v)}activate(){qn=this}deactivate(){qn=null;for(const e of N5)if(N5.delete(e),e(),qn!==null)break}neuter(){this.#i=!0}flush(){jc.length>0?this.flush_effects():this.#p(),qn===this&&(this.#n===0&&tf.delete(this),this.deactivate())}flush_effects(){var e=Gc;Dg=!0;try{var t=0;for(X5(!0);jc.length>0;){if(t++>1e3){var n,i;OA()}this.#u(jc),Xl.clear()}}finally{Dg=!1,X5(e),nf=null}}#p(){if(!this.#i)for(const e of this.#r)e();this.#r.clear()}increment(){this.#n+=1}decrement(){if(this.#n-=1,this.#n===0){for(const e of this.#l)wi(e,na),Lo(e);for(const e of this.#c)wi(e,na),Lo(e);for(const e of this.#h)wi(e,na),Lo(e);this.#l=[],this.#c=[],this.flush()}else this.deactivate()}add_callback(e){this.#r.add(e)}settled(){return(this.#a??=Uk()).promise}static ensure(e=!0){if(qn===null){const t=qn=new Do;tf.add(qn),e&&Do.enqueue(()=>{qn===t&&t.flush()})}return qn}static enqueue(e){rf.length===0&&queueMicrotask(P5),rf.unshift(e)}}function Lg(r){var e;const t=Do.ensure(!1);for(r&&(t.flush_effects(),e=r());;){if(CA(),jc.length===0)return t===qn&&t.flush(),nf=null,e;t.flush_effects()}}function OA(){try{Kk()}catch(r){Pg(r,nf)}}function R5(r){var e=r.length;if(e!==0){for(var t=0;t<e;t++){var n=r[t];if((n.f&(Hl|ns))===0&&cf(n)){var i=lf;if(ah(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?$5(n):n.fn=null),lf>i&&(n.f&xg)!==0)break}}for(;t<e;t+=1)Lo(r[t])}}function Lo(r){for(var e=nf=r;e.parent!==null;){e=e.parent;var t=e.f;if(Dg&&e===qr&&(t&Fc)!==0)return;if((t&(Ul|Js))!==0){if((t&bi)===0)return;e.f^=bi}}jc.push(e)}const Xl=new Map;function Bo(r,e){var t={f:0,v:r,reactions:null,equals:_5,rv:0,wv:0};return t}function ue(r,e){const t=Bo(r);return Y5(t),t}function Bg(r,e=!1,t=!0){const n=Bo(r);return e||(n.equals=S5),Lc&&t&&hn!==null&&hn.l!==null&&(hn.l.s??=[]).push(n),n}function I(r,e,t=!1){Jr!==null&&(!as||(Jr.f&m5)!==0)&&Wl()&&(Jr.f&(ba|Fc|Sg|m5))!==0&&!eo?.includes(r)&&tA();let n=t?Mr(e):e;return eh(r,n)}function eh(r,e){if(!r.equals(e)){var t=r.v;Yl?Xl.set(r,e):Xl.set(r,t),r.v=e,Do.ensure().capture(r,t),(r.f&ba)!==0&&((r.f&na)!==0&&Fg(r),wi(r,(r.f&Pa)===0?bi:jl)),r.wv=J5(),F5(r,na),Wl()&&qr!==null&&(qr.f&bi)!==0&&(qr.f&(Js|Ul))===0&&(Ba===null?BA([r]):Ba.push(r))}return e}function zg(r,e=1){var t=g(r),n=e===1?t++:t--;return I(r,t),n}function Fa(r){I(r,r.v+1)}function F5(r,e){var t=r.reactions;if(t!==null)for(var n=Wl(),i=t.length,a=0;a<i;a++){var s=t[a],o=s.f;!n&&s===qr||((o&na)===0&&wi(s,e),(o&ba)!==0?F5(s,jl):(o&na)===0&&Lo(s))}}function Mr(r){if(typeof r!="object"||r===null||ms in r)return r;const e=qd(r);if(e!==f5&&e!==Bk)return r;var t=new Map,n=Po(r),i=ue(0),a=ss,s=o=>{if(ss===a)return o();var l=Jr,c=ss;bs(null),Q5(a);var u=o();return bs(l),Q5(c),u};return n&&t.set("length",ue(r.length)),new Proxy(r,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Zk();var u=t.get(l);return u===void 0?u=s(()=>{var h=ue(c.value);return t.set(l,h),h}):I(u,c.value,!0),!0},deleteProperty(o,l){var c=t.get(l);if(c===void 0){if(l in o){const u=s(()=>ue(hi));t.set(l,u),Fa(i)}}else I(c,hi),Fa(i);return!0},get(o,l,c){if(l===ms)return r;var u=t.get(l),h=l in o;if(u===void 0&&(!h||Ro(o,l)?.writable)&&(u=s(()=>{var f=Mr(h?o[l]:hi),p=ue(f);return p}),t.set(l,u)),u!==void 0){var d=g(u);return d===hi?void 0:d}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var u=t.get(l);u&&(c.value=g(u))}else if(c===void 0){var h=t.get(l),d=h?.v;if(h!==void 0&&d!==hi)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(o,l){if(l===ms)return!0;var c=t.get(l),u=c!==void 0&&c.v!==hi||Reflect.has(o,l);if(c!==void 0||qr!==null&&(!u||Ro(o,l)?.writable)){c===void 0&&(c=s(()=>{var d=u?Mr(o[l]):hi,f=ue(d);return f}),t.set(l,c));var h=g(c);if(h===hi)return!1}return u},set(o,l,c,u){var h=t.get(l),d=l in o;if(n&&l==="length")for(var f=c;f<h.v;f+=1){var p=t.get(f+"");p!==void 0?I(p,hi):f in o&&(p=s(()=>ue(hi)),t.set(f+"",p))}if(h===void 0)(!d||Ro(o,l)?.writable)&&(h=s(()=>ue(void 0)),I(h,Mr(c)),t.set(l,h));else{d=h.v!==hi;var m=s(()=>Mr(c));I(h,m)}var y=Reflect.getOwnPropertyDescriptor(o,l);if(y?.set&&y.set.call(u,c),!d){if(n&&typeof l=="string"){var v=t.get("length"),_=Number(l);Number.isInteger(_)&&_>=v.v&&I(v,_+1)}Fa(i)}return!0},ownKeys(o){g(i);var l=Reflect.ownKeys(o).filter(h=>{var d=t.get(h);return d===void 0||d.v!==hi});for(var[c,u]of t)u.v!==hi&&!(c in o)&&l.push(c);return l},setPrototypeOf(){eA()}})}function D5(r){try{if(r!==null&&typeof r=="object"&&ms in r)return r[ms]}catch{}return r}function NA(r,e){return Object.is(D5(r),D5(e))}var Kl,Hc,L5,B5,z5;function Ug(){if(Kl===void 0){Kl=window,Hc=document,L5=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;B5=Ro(e,"firstChild").get,z5=Ro(e,"nextSibling").get,g5(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),g5(t)&&(t.__t=void 0)}}function ia(r=""){return document.createTextNode(r)}function yi(r){return B5.call(r)}function Da(r){return z5.call(r)}function G(r,e){if(!hr)return yi(r);var t=yi(Tr);if(t===null)t=Tr.appendChild(ia());else if(e&&t.nodeType!==Cg){var n=ia();return t?.before(n),vi(n),n}return vi(t),t}function P(r,e){if(!hr){var t=yi(r);return t instanceof Comment&&t.data===""?Da(t):t}return Tr}function te(r,e=1,t=!1){let n=hr?Tr:r;for(var i;e--;)i=n,n=Da(n);if(!hr)return n;if(t&&n?.nodeType!==Cg){var a=ia();return n===null?i?.after(a):n.before(a),vi(a),a}return vi(n),n}function jg(r){r.textContent=""}function af(){return!1}function U5(r){qr===null&&Jr===null&&Xk(),Jr!==null&&(Jr.f&Pa)!==0&&qr===null&&Vk(),Yl&&Wk()}function PA(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function is(r,e,t,n=!0){var i=qr;i!==null&&(i.f&ns)!==0&&(r|=ns);var a={ctx:hn,deps:null,nodes_start:null,nodes_end:null,f:r|na,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{ah(a),a.f|=Vd}catch(l){throw Hi(a),l}else e!==null&&Lo(a);var s=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&wg)===0;if(!s&&n&&(i!==null&&PA(a,i),Jr!==null&&(Jr.f&ba)!==0)){var o=Jr;(o.effects??=[]).push(a)}return a}function RA(){return Jr!==null&&!as}function th(r){const e=is($d,null,!1);return wi(e,bi),e.teardown=r,e}function Nt(r){U5();var e=qr.f,t=!Jr&&(e&Js)!==0&&(e&Vd)===0;if(t){var n=hn;(n.e??=[]).push(r)}else return j5(r)}function j5(r){return is(yg|xg,r,!1)}function Ii(r){return U5(),is($d|xg,r,!0)}function rh(r){Do.ensure();const e=is(Ul,r,!0);return()=>{Hi(e)}}function FA(r){Do.ensure();const e=is(Ul,r,!0);return(t={})=>new Promise(n=>{t.outro?qc(e,()=>{Hi(e),n(void 0)}):(Hi(e),n(void 0))})}function nh(r){return is(yg,r,!1)}function DA(r){return is(Sg|wg,r,!0)}function sf(r,e=0){return is($d|e,r,!0)}function Be(r,e=[],t=[]){I5(e,t,n=>{is($d,()=>r(...n.map(g)),!0)})}function Zs(r,e=0){var t=is(Fc|e,r,!0);return t}function La(r,e=!0){return is(Js,r,!0,e)}function H5(r){var e=r.teardown;if(e!==null){const t=Yl,n=Jr;K5(!0),bs(null);try{e.call(null)}finally{K5(t),bs(n)}}}function q5(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){t.ac?.abort(Ag);var n=t.next;(t.f&Ul)!==0?t.parent=null:Hi(t,e),t=n}}function LA(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Js)===0&&Hi(e),e=t}}function Hi(r,e=!0){var t=!1;(e||(r.f&b5)!==0)&&r.nodes_start!==null&&r.nodes_end!==null&&(G5(r.nodes_start,r.nodes_end),t=!0),q5(r,e&&!t),uf(r,0),wi(r,Hl);var n=r.transitions;if(n!==null)for(const a of n)a.stop();H5(r);var i=r.parent;i!==null&&i.first!==null&&$5(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function G5(r,e){for(;r!==null;){var t=r===e?null:Da(r);r.remove(),r=t}}function $5(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function qc(r,e){var t=[];Hg(r,t,!0),W5(t,()=>{Hi(r),e&&e()})}function W5(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function Hg(r,e,t){if((r.f&ns)===0){if(r.f^=ns,r.transitions!==null)for(const s of r.transitions)(s.is_global||t)&&e.push(s);for(var n=r.first;n!==null;){var i=n.next,a=(n.f&ql)!==0||(n.f&Js)!==0;Hg(n,e,a?t:!1),n=i}}}function of(r){V5(r,!0)}function V5(r,e){if((r.f&ns)!==0){r.f^=ns,(r.f&bi)===0&&(wi(r,na),Lo(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&ql)!==0||(t.f&Js)!==0;V5(t,i?e:!1),t=n}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}let Gc=!1;function X5(r){Gc=r}let Yl=!1;function K5(r){Yl=r}let Jr=null,as=!1;function bs(r){Jr=r}let qr=null;function zo(r){qr=r}let eo=null;function Y5(r){Jr!==null&&(eo===null?eo=[r]:eo.push(r))}let qi=null,va=0,Ba=null;function BA(r){Ba=r}let lf=1,ih=0,ss=ih;function Q5(r){ss=r}let Uo=!1;function J5(){return++lf}function cf(r){var e=r.f;if((e&na)!==0)return!0;if((e&jl)!==0){var t=r.deps,n=(e&Pa)!==0;if(t!==null){var i,a,s=(e&Wd)!==0,o=n&&qr!==null&&!Uo,l=t.length;if((s||o)&&(qr===null||(qr.f&Hl)===0)){var c=r,u=c.parent;for(i=0;i<l;i++)a=t[i],(s||!a?.reactions?.includes(c))&&(a.reactions??=[]).push(c);s&&(c.f^=Wd),o&&u!==null&&(u.f&Pa)===0&&(c.f^=Pa)}for(i=0;i<l;i++)if(a=t[i],cf(a)&&M5(a),a.wv>r.wv)return!0}(!n||qr!==null&&!Uo)&&wi(r,bi)}return!1}function Z5(r,e,t=!0){var n=r.reactions;if(n!==null&&!eo?.includes(r))for(var i=0;i<n.length;i++){var a=n[i];(a.f&ba)!==0?Z5(a,e,!1):e===a&&(t?wi(a,na):(a.f&bi)!==0&&wi(a,jl),Lo(a))}}function e9(r){var e=qi,t=va,n=Ba,i=Jr,a=Uo,s=eo,o=hn,l=as,c=ss,u=r.f;qi=null,va=0,Ba=null,Uo=(u&Pa)!==0&&(as||!Gc||Jr===null),Jr=(u&(Js|Ul))===0?r:null,eo=null,Jd(r.ctx),as=!1,ss=++ih,r.ac!==null&&(r.ac.abort(Ag),r.ac=null);try{r.f|=_g;var h=(0,r.fn)(),d=r.deps;if(qi!==null){var f;if(uf(r,va),d!==null&&va>0)for(d.length=va+qi.length,f=0;f<qi.length;f++)d[va+f]=qi[f];else r.deps=d=qi;if(!Uo||(u&ba)!==0&&r.reactions!==null)for(f=va;f<d.length;f++)(d[f].reactions??=[]).push(r)}else d!==null&&va<d.length&&(uf(r,va),d.length=va);if(Wl()&&Ba!==null&&!as&&d!==null&&(r.f&(ba|jl|na))===0)for(f=0;f<Ba.length;f++)Z5(Ba[f],r);return i!==null&&i!==r&&(ih++,Ba!==null&&(n===null?n=Ba:n.push(...Ba))),(r.f&Gl)!==0&&(r.f^=Gl),h}catch(p){return SA(p)}finally{r.f^=_g,qi=e,va=t,Ba=n,Jr=i,Uo=a,eo=s,Jd(o),as=l,ss=c}}function zA(r,e){let t=e.reactions;if(t!==null){var n=Lk.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&ba)!==0&&(qi===null||!qi.includes(e))&&(wi(e,jl),(e.f&(Pa|Wd))===0&&(e.f^=Wd),T5(e),uf(e,0))}function uf(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)zA(r,t[n])}function ah(r){var e=r.f;if((e&Hl)===0){wi(r,bi);var t=qr,n=Gc;qr=r,Gc=!0;try{(e&Fc)!==0?LA(r):q5(r),H5(r);var i=e9(r);r.teardown=typeof i=="function"?i:null,r.wv=lf;var a;zl&&vA&&(r.f&na)!==0&&r.deps}finally{Gc=n,qr=t}}}async function jo(){await Promise.resolve(),Lg()}function t9(){return Do.ensure().settled()}function g(r){var e=r.f,t=(e&ba)!==0;if(Jr!==null&&!as){var n=qr!==null&&(qr.f&Hl)!==0;if(!n&&!eo?.includes(r)){var i=Jr.deps;if((Jr.f&_g)!==0)r.rv<ih&&(r.rv=ih,qi===null&&i!==null&&i[va]===r?va++:qi===null?qi=[r]:(!Uo||!qi.includes(r))&&qi.push(r));else{(Jr.deps??=[]).push(r);var a=r.reactions;a===null?r.reactions=[Jr]:a.includes(Jr)||a.push(Jr)}}}else if(t&&r.deps===null&&r.effects===null){var s=r,o=s.parent;o!==null&&(o.f&Pa)===0&&(s.f^=Pa)}if(Yl){if(Xl.has(r))return Xl.get(r);if(t){s=r;var l=s.v;return((s.f&bi)===0&&s.reactions!==null||r9(s))&&(l=Fg(s)),Xl.set(s,l),l}}else if(t){if(s=r,Uc?.has(s))return Uc.get(s);cf(s)&&M5(s)}if((r.f&Gl)!==0)throw r.v;return r.v}function r9(r){if(r.v===hi)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(Xl.has(e)||(e.f&ba)!==0&&r9(e))return!0;return!1}function mn(r){var e=as;try{return as=!0,r()}finally{as=e}}const UA=-7169;function wi(r,e){r.f=r.f&UA|e}function jA(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(ms in r)qg(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&ms in t&&qg(t)}}}function qg(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{qg(r[n],e)}catch{}const t=qd(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=d5(t);for(let i in n){const a=n[i].get;if(a)try{a.call(r)}catch{}}}}}function HA(){return Symbol(w5)}function qA(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const GA=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function $A(r){return GA.includes(r)}const WA={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function VA(r){return r=r.toLowerCase(),WA[r]??r}const XA=["touchstart","touchmove"];function KA(r){return XA.includes(r)}const YA=["textarea","script","style","title"];function QA(r){return YA.includes(r)}function JA(r,e){if(e){const t=document.body;r.autofocus=!0,zc(()=>{document.activeElement===t&&r.focus()})}}function hf(r){hr&&yi(r)!==null&&jg(r)}let n9=!1;function i9(){n9||(n9=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{if(!r.defaultPrevented)for(const e of r.target.elements)e.__on_r?.()})},{capture:!0}))}function ZA(r,e,t,n=!0){n&&t();for(var i of e)r.addEventListener(i,t);th(()=>{for(var a of e)r.removeEventListener(a,t)})}function sh(r){var e=Jr,t=qr;bs(null),zo(null);try{return r()}finally{bs(e),zo(t)}}function a9(r,e,t,n=t){r.addEventListener(e,()=>sh(t));const i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),i9()}const s9=new Set,Gg=new Set;function $g(r,e,t,n={}){function i(a){if(n.capture||oh.call(e,a),!a.cancelBubble)return sh(()=>t?.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?zc(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function Zr(r,e,t,n={}){var i=$g(e,r,t,n);return()=>{r.removeEventListener(e,i,n)}}function Bn(r,e,t,n,i){var a={capture:n,passive:i},s=$g(r,e,t,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&th(()=>{e.removeEventListener(r,s,a)})}function Xn(r){for(var e=0;e<r.length;e++)s9.add(r[e]);for(var t of Gg)t(r)}function oh(r){var e=this,t=e.ownerDocument,n=r.type,i=r.composedPath?.()||[],a=i[0]||r.target,s=0,o=r.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){r.__root=e;return}var c=i.indexOf(e);if(c===-1)return;l<=c&&(s=l)}if(a=i[s]||r.target,a!==e){Ku(r,"currentTarget",{configurable:!0,get(){return a||t}});var u=Jr,h=qr;bs(null),zo(null);try{for(var d,f=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+n];if(m!=null&&(!a.disabled||r.target===a))if(Po(m)){var[y,...v]=m;y.apply(a,[r,...v])}else m.call(a,r)}catch(_){d?f.push(_):d=_}if(r.cancelBubble||p===e||p===null)break;a=p}if(d){for(let _ of f)queueMicrotask(()=>{throw _});throw d}}finally{r.__root=e,delete r.currentTarget,bs(u),zo(h)}}}let za;function eC(){za=void 0}function df(r){let e=null,t=hr;var n;if(hr){for(e=Tr,za===void 0&&(za=yi(document.head));za!==null&&(za.nodeType!==Fo||za.data!==Eg);)za=Da(za);za===null?ji(!1):za=vi(Da(za))}hr||(n=document.head.appendChild(ia()));try{Zs(()=>r(n),b5)}finally{t&&(ji(!0),za=Tr,vi(e))}}function ff(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function aa(r,e){var t=qr;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function $(r,e){var t=(e&dA)!==0,n=(e&fA)!==0,i,a=!r.startsWith("<!>");return()=>{if(hr)return aa(Tr,null),Tr;i===void 0&&(i=ff(a?r:"<!>"+r),t||(i=yi(i)));var s=n||L5?document.importNode(i,!0):i.cloneNode(!0);if(t){var o=yi(s),l=s.lastChild;aa(o,l)}else aa(s,s);return s}}function tC(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,a;return()=>{if(hr)return aa(Tr,null),Tr;if(!a){var s=ff(i),o=yi(s);a=yi(o)}var l=a.cloneNode(!0);return aa(l,l),l}}function Ql(r,e){return tC(r,e,"svg")}function tr(r=""){if(!hr){var e=ia(r+"");return aa(e,e),e}var t=Tr;return t.nodeType!==Cg&&(t.before(t=ia()),vi(t)),aa(t,t),t}function Z(){if(hr)return aa(Tr,null),Tr;var r=document.createDocumentFragment(),e=document.createComment(""),t=ia();return r.append(e,t),aa(e,t),r}function w(r,e){if(hr){qr.nodes_end=Tr,Ra();return}r!==null&&r.before(e)}function gn(){if(hr&&Tr&&Tr.nodeType===Fo&&Tr.textContent?.startsWith("#")){const r=Tr.textContent.substring(1);return Ra(),r}return(window.__svelte??={}).uid??=1,`c${window.__svelte.uid++}`}let gf=!0;function o9(r){gf=r}function nt(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??=r.nodeValue)&&(r.__t=t,r.nodeValue=t+"")}function pf(r,e){return c9(r,e)}function l9(r,e){Ug(),e.intro=e.intro??!1;const t=e.target,n=hr,i=Tr;try{for(var a=yi(t);a&&(a.nodeType!==Fo||a.data!==Eg);)a=Da(a);if(!a)throw $l;ji(!0),vi(a),Ra();const s=c9(r,{...e,anchor:a});if(Tr===null||Tr.nodeType!==Fo||Tr.data!==Mg)throw Yu(),$l;return ji(!1),s}catch(s){if(s===$l)return e.recover===!1&&Qk(),Ug(),jg(t),ji(!1),pf(r,e);throw s}finally{ji(n),vi(i),eC()}}const $c=new Map;function c9(r,{target:e,anchor:t,props:n={},events:i,context:a,intro:s=!0}){Ug();var o=new Set,l=h=>{for(var d=0;d<h.length;d++){var f=h[d];if(!o.has(f)){o.add(f);var p=KA(f);e.addEventListener(f,oh,{passive:p});var m=$c.get(f);m===void 0?(document.addEventListener(f,oh,{passive:p}),$c.set(f,1)):$c.set(f,m+1)}}};l(vg(s9)),Gg.add(l);var c=void 0,u=FA(()=>{var h=t??e.appendChild(ia());return La(()=>{if(a){ye({});var d=hn;d.c=a}i&&(n.$$events=i),hr&&aa(h,null),gf=s,c=r(h,n)||{},gf=!0,hr&&(qr.nodes_end=Tr),a&&we()}),()=>{for(var d of o){e.removeEventListener(d,oh);var f=$c.get(d);--f===0?(document.removeEventListener(d,oh),$c.delete(d)):$c.set(d,f)}Gg.delete(l),h!==t&&h.parentNode?.removeChild(h)}});return Wg.set(c,u),c}let Wg=new WeakMap;function Vg(r,e){const t=Wg.get(r);return t?(Wg.delete(r),t(e)):Promise.resolve()}function le(r,e,t=!1){hr&&Ra();var n=r,i=null,a=null,s=hi,o=t?ql:0,l=!1;const c=(f,p=!0)=>{l=!0,d(p,f)};var u=null;function h(){u!==null&&(u.lastChild.remove(),n.before(u),u=null);var f=s?i:a,p=s?a:i;f&&of(f),p&&qc(p,()=>{s?a=null:i=null})}const d=(f,p)=>{if(s===(s=f))return;let m=!1;if(hr){const C=x5(n)===Tg;!!s===C&&(n=Ig(),vi(n),ji(!1),m=!0)}var y=af(),v=n;if(y&&(u=document.createDocumentFragment(),u.append(v=ia())),s?i??=p&&La(()=>p(v)):a??=p&&La(()=>p(v)),y){var _=qn,S=s?i:a,A=s?a:i;S&&_.skipped_effects.delete(S),A&&_.skipped_effects.add(A),_.add_callback(h)}else h();m&&ji(!0)};Zs(()=>{l=!1,e(c),l||d(null,null)},o),hr&&(n=Tr)}function rC(r,e,t){hr&&Ra();var n=r,i=hi,a,s,o=null,l=Wl()?bA:Og;function c(){a&&qc(a),o!==null&&(o.lastChild.remove(),n.before(o),o=null),a=s}Zs(()=>{if(l(i,i=e())){var u=n,h=af();h&&(o=document.createDocumentFragment(),o.append(u=ia())),s=La(()=>t(u)),h?qn.add_callback(c):c()}}),hr&&(n=Tr)}function u9(r,e){return e}function nC(r,e,t){for(var n=r.items,i=[],a=e.length,s=0;s<a;s++)Hg(e[s].e,i,!0);var o=a>0&&i.length===0&&t!==null;if(o){var l=t.parentNode;jg(l),l.append(t),n.clear(),vs(r,e[0].prev,e[a-1].next)}W5(i,()=>{for(var c=0;c<a;c++){var u=e[c];o||(n.delete(u.k),vs(r,u.prev,u.next)),Hi(u.e,!o)}})}function dn(r,e,t,n,i,a=null){var s=r,o={flags:e,items:new Map,first:null},l=(e&y5)!==0;if(l){var c=r;s=hr?vi(yi(c)):c.appendChild(ia())}hr&&Ra();var u=null,h=!1,d=new Map,f=Rg(()=>{var v=t();return Po(v)?v:v==null?[]:vg(v)}),p,m;function y(){iC(m,p,o,d,s,i,e,n,t),a!==null&&(p.length===0?u?of(u):u=La(()=>a(s)):u!==null&&qc(u,()=>{u=null}))}Zs(()=>{m??=qr,p=g(f);var v=p.length;if(h&&v===0)return;h=v===0;let _=!1;if(hr){var S=x5(s)===Tg;S!==(v===0)&&(s=Ig(),vi(s),ji(!1),_=!0)}if(hr){for(var A=null,C,k=0;k<v;k++){if(Tr.nodeType===Fo&&Tr.data===Mg){s=Tr,_=!0,ji(!1);break}var M=p[k],N=n(M,k);C=Xg(Tr,o,A,null,M,N,k,i,e,t),o.items.set(N,C),A=C}v>0&&vi(Ig())}if(hr)v===0&&a&&(u=La(()=>a(s)));else if(af()){var F=new Set,z=qn;for(k=0;k<v;k+=1){M=p[k],N=n(M,k);var W=o.items.get(N)??d.get(N);W?(e&(Xd|Kd))!==0&&h9(W,M,k,e):(C=Xg(null,o,null,null,M,N,k,i,e,t,!0),d.set(N,C)),F.add(N)}for(const[V,Q]of o.items)F.has(V)||z.skipped_effects.add(Q.e);z.add_callback(y)}else y();_&&ji(!0),g(f)}),hr&&(s=Tr)}function iC(r,e,t,n,i,a,s,o,l){var c=(s&rA)!==0,u=(s&(Xd|Kd))!==0,h=e.length,d=t.items,f=t.first,p=f,m,y=null,v,_=[],S=[],A,C,k,M;if(c)for(M=0;M<h;M+=1)A=e[M],C=o(A,M),k=d.get(C),k!==void 0&&(k.a?.measure(),(v??=new Set).add(k));for(M=0;M<h;M+=1){if(A=e[M],C=o(A,M),k=d.get(C),k===void 0){var N=n.get(C);if(N!==void 0){n.delete(C),d.set(C,N);var F=y?y.next:p;vs(t,y,N),vs(t,N,F),Kg(N,F,i),y=N}else{var z=p?p.e.nodes_start:i;y=Xg(z,t,y,y===null?t.first:y.next,A,C,M,a,s,l)}d.set(C,y),_=[],S=[],p=y.next;continue}if(u&&h9(k,A,M,s),(k.e.f&ns)!==0&&(of(k.e),c&&(k.a?.unfix(),(v??=new Set).delete(k))),k!==p){if(m!==void 0&&m.has(k)){if(_.length<S.length){var W=S[0],V;y=W.prev;var Q=_[0],K=_[_.length-1];for(V=0;V<_.length;V+=1)Kg(_[V],W,i);for(V=0;V<S.length;V+=1)m.delete(S[V]);vs(t,Q.prev,K.next),vs(t,y,Q),vs(t,K,W),p=W,y=K,M-=1,_=[],S=[]}else m.delete(k),Kg(k,p,i),vs(t,k.prev,k.next),vs(t,k,y===null?t.first:y.next),vs(t,y,k),y=k;continue}for(_=[],S=[];p!==null&&p.k!==C;)(p.e.f&ns)===0&&(m??=new Set).add(p),S.push(p),p=p.next;if(p===null)continue;k=p}_.push(k),y=k,p=k.next}if(p!==null||m!==void 0){for(var ie=m===void 0?[]:vg(m);p!==null;)(p.e.f&ns)===0&&ie.push(p),p=p.next;var L=ie.length;if(L>0){var J=(s&y5)!==0&&h===0?i:null;if(c){for(M=0;M<L;M+=1)ie[M].a?.measure();for(M=0;M<L;M+=1)ie[M].a?.fix()}nC(t,ie,J)}}c&&zc(()=>{if(v!==void 0)for(k of v)k.a?.apply()}),r.first=t.first&&t.first.e,r.last=y&&y.e;for(var X of n.values())Hi(X.e);n.clear()}function h9(r,e,t,n){(n&Xd)!==0&&eh(r.v,e),(n&Kd)!==0?eh(r.i,t):r.i=t}function Xg(r,e,t,n,i,a,s,o,l,c,u){var h=(l&Xd)!==0,d=(l&nA)===0,f=h?d?Bg(i,!1,!1):Bo(i):i,p=(l&Kd)===0?s:Bo(s),m={i:p,v:f,k:a,a:null,e:null,prev:t,next:n};try{if(r===null){var y=document.createDocumentFragment();y.append(r=ia())}return m.e=La(()=>o(r,f,p,c),hr),m.e.prev=t&&t.e,m.e.next=n&&n.e,t===null?u||(e.first=m):(t.next=m,t.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function Kg(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==null&&a!==n;){var s=Da(a);i.before(a),a=s}}function vs(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function d9(r,e,t=!1,n=!1,i=!1){var a=r,s="";Be(()=>{var o=qr;if(s===(s=e()??"")){hr&&Ra();return}if(o.nodes_start!==null&&(G5(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),s!==""){if(hr){Tr.data;for(var l=Ra(),c=l;l!==null&&(l.nodeType!==Fo||l.data!=="");)c=l,l=Da(l);if(l===null)throw Yu(),$l;aa(Tr,c),a=vi(l);return}var u=s+"";t?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var h=ff(u);if((t||n)&&(h=yi(h)),aa(yi(h),h.lastChild),t||n)for(;yi(h);)a.before(yi(h));else a.before(h)}})}function Re(r,e,...t){var n=r,i=je,a;Zs(()=>{i!==(i=e())&&(a&&(Hi(a),a=null),a=La(()=>i(n,...t)))},ql),hr&&(n=Tr)}function aC(r){return(e,...t)=>{var n=r(...t),i;if(hr)i=Tr,Ra();else{var a=n.render().trim(),s=ff(a);i=yi(s),e.before(i)}const o=n.setup?.(i);aa(i,i),typeof o=="function"&&th(o)}}function he(r,e,t){hr&&Ra();var n=r,i,a,s=null,o=null;function l(){a&&(qc(a),a=null),s&&(s.lastChild.remove(),n.before(s),s=null),a=o,o=null}Zs(()=>{if(i!==(i=e())){var c=af();if(i){var u=n;c&&(s=document.createDocumentFragment(),s.append(u=ia())),o=La(()=>t(u,i))}c?qn.add_callback(l):l()}},ql),hr&&(n=Tr)}function f9(r,e,t,n,i,a){let s=hr;hr&&Ra();var o,l,c=null;hr&&Tr.nodeType===qk&&(c=Tr,Ra());var u=hr?Tr:r,h;Zs(()=>{const d=e()||null;var f=t||d==="svg"?pA:null;d!==o&&(h&&(d===null?qc(h,()=>{h=null,l=null}):d===l?of(h):(Hi(h),o9(!1))),d&&d!==l&&(h=La(()=>{if(c=hr?c:f?document.createElementNS(f,d):document.createElement(d),aa(c,c),n){hr&&QA(d)&&c.append(document.createComment(""));var p=hr?yi(c):c.appendChild(ia());hr&&(p===null?ji(!1):vi(p)),n(c,p)}qr.nodes_end=c,u.before(c)})),o=d,o&&(l=o),o9(!0))},ql),s&&(ji(!0),vi(u))}function sC(r,e,t){nh(()=>{var n=mn(()=>e(r,t?.())||{});if(n?.destroy)return()=>n.destroy()})}function oC(r,e){var t=void 0,n;Zs(()=>{t!==(t=e())&&(n&&(Hi(n),n=null),t&&(n=La(()=>{nh(()=>t(r))})))})}function g9(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=g9(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function lh(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=g9(r))&&(n&&(n+=" "),n+=e);return n}function di(r){return typeof r=="object"?lh(r):r??""}const p9=[...` 	
\r\fÂ \v\uFEFF`];function lC(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,s=0;(s=n.indexOf(i,s))>=0;){var o=s+a;(s===0||p9.includes(n[s-1]))&&(o===n.length||p9.includes(n[o]))?n=(s===0?"":n.substring(0,s))+n.substring(o+1):s=o}}return n===""?null:n}function m9(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var a=r[i];a!=null&&a!==""&&(n+=" "+i+": "+a+t)}return n}function Yg(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function cC(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,s=0,o=!1,l=[];n&&l.push(...Object.keys(n).map(Yg)),i&&l.push(...Object.keys(i).map(Yg));var c=0,u=-1;const m=r.length;for(var h=0;h<m;h++){var d=r[h];if(o?d==="/"&&r[h-1]==="*"&&(o=!1):a?a===d&&(a=!1):d==="/"&&r[h+1]==="*"?o=!0:d==='"'||d==="'"?a=d:d==="("?s++:d===")"&&s--,!o&&a===!1&&s===0){if(d===":"&&u===-1)u=h;else if(d===";"||h===m-1){if(u!==-1){var f=Yg(r.substring(c,u).trim());if(!l.includes(f)){d!==";"&&h++;var p=r.substring(c,h).trim();t+=" "+p+";"}}c=h+1,u=-1}}}}return n&&(t+=m9(n)),i&&(t+=m9(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function er(r,e,t,n,i,a){var s=r.__className;if(hr||s!==t||s===void 0){var o=lC(t,n,a);(!hr||o!==r.getAttribute("class"))&&(o==null?r.removeAttribute("class"):e?r.className=o:r.setAttribute("class",o)),r.__className=t}else if(a&&i!==a)for(var l in a){var c=!!a[l];(i==null||c!==!!i[l])&&r.classList.toggle(l,c)}return a}function Qg(r,e={},t,n){for(var i in t){var a=t[i];e[i]!==a&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,a,n))}}function Ho(r,e,t,n){var i=r.__style;if(hr||i!==e){var a=cC(e,n);(!hr||a!==r.getAttribute("style"))&&(a==null?r.removeAttribute("style"):r.style.cssText=a),r.__style=e}else n&&(Array.isArray(n)?(Qg(r,t?.[0],n[0]),Qg(r,t?.[1],n[1],"important")):Qg(r,t,n));return n}function Jg(r,e,t=!1){if(r.multiple){if(e==null)return;if(!Po(e))return mA();for(var n of r.options)n.selected=e.includes(b9(n));return}for(n of r.options){var i=b9(n);if(NA(i,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function uC(r){var e=new MutationObserver(()=>{Jg(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),th(()=>{e.disconnect()})}function b9(r){return"__value"in r?r.__value:r.value}const ch=Symbol("class"),Wc=Symbol("style"),v9=Symbol("is custom element"),y9=Symbol("is html");function Vc(r){if(hr){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;zt(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var i=r.checked;zt(r,"checked",null),r.checked=i}}};r.__on_r=t,AA(t),i9()}}function hC(r,e){var t=mf(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function dC(r,e){var t=mf(r);t.checked!==(t.checked=e??void 0)&&(r.checked=e)}function fC(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function zt(r,e,t,n){var i=mf(r);hr&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(r[Hk]=t),t==null?r.removeAttribute(e):typeof t!="string"&&x9(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function gC(r,e,t,n,i=!1){var a=mf(r),s=a[v9],o=!a[y9];let l=hr&&s;l&&ji(!1);var c=e||{},u=r.tagName==="OPTION";for(var h in e)h in t||(t[h]=null);t.class?t.class=di(t.class):(n||t[ch])&&(t.class=null),t[Wc]&&(t.style??=null);var d=x9(r);for(const S in t){let A=t[S];if(u&&S==="value"&&A==null){r.value=r.__value="",c[S]=A;continue}if(S==="class"){var f=r.namespaceURI==="http://www.w3.org/1999/xhtml";er(r,f,A,n,e?.[ch],t[ch]),c[S]=A,c[ch]=t[ch];continue}if(S==="style"){Ho(r,A,e?.[Wc],t[Wc]),c[S]=A,c[Wc]=t[Wc];continue}var p=c[S];if(!(A===p&&!(A===void 0&&r.hasAttribute(S)))){c[S]=A;var m=S[0]+S[1];if(m!=="$$")if(m==="on"){const C={},k="$$"+S;let M=S.slice(2);var y=$A(M);if(qA(M)&&(M=M.slice(0,-7),C.capture=!0),!y&&p){if(A!=null)continue;r.removeEventListener(M,c[k],C),c[k]=null}if(A!=null)if(y)r[`__${M}`]=A,Xn([M]);else{let N=function(F){c[S].call(this,F)};c[k]=$g(M,r,N,C)}else y&&(r[`__${M}`]=void 0)}else if(S==="style")zt(r,S,A);else if(S==="autofocus")JA(r,!!A);else if(!s&&(S==="__value"||S==="value"&&A!=null))r.value=r.__value=A;else if(S==="selected"&&u)fC(r,A);else{var v=S;o||(v=VA(v));var _=v==="defaultValue"||v==="defaultChecked";if(A==null&&!s&&!_)if(a[S]=null,v==="value"||v==="checked"){let C=r;const k=e===void 0;if(v==="value"){let M=C.defaultValue;C.removeAttribute(v),C.defaultValue=M,C.value=C.__value=k?M:null}else{let M=C.defaultChecked;C.removeAttribute(v),C.defaultChecked=M,C.checked=k?M:!1}}else r.removeAttribute(S);else _||d.includes(v)&&(s||typeof A!="string")?r[v]=A:typeof A!="function"&&zt(r,v,A)}}}return l&&ji(!0),c}function Ht(r,e,t=[],n=[],i,a=!1){I5(t,n,s=>{var o=void 0,l={},c=r.nodeName==="SELECT",u=!1;if(Zs(()=>{var d=e(...s.map(g)),f=gC(r,o,d,i,a);u&&c&&"value"in d&&Jg(r,d.value);for(let m of Object.getOwnPropertySymbols(l))d[m]||Hi(l[m]);for(let m of Object.getOwnPropertySymbols(d)){var p=d[m];m.description===w5&&(!o||p!==o[m])&&(l[m]&&Hi(l[m]),l[m]=La(()=>oC(r,()=>p))),f[m]=p}o=f}),c){var h=r;nh(()=>{Jg(h,o.value,!0),uC(h)})}u=!0})}function mf(r){return r.__attributes??={[v9]:r.nodeName.includes("-"),[y9]:r.namespaceURI===gA}}var w9=new Map;function x9(r){var e=w9.get(r.nodeName);if(e)return e;w9.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=d5(n);for(var a in t)t[a].set&&e.push(a);n=qd(n)}return e}const pC=()=>performance.now(),to={tick:r=>requestAnimationFrame(r),now:()=>pC(),tasks:new Set};function _9(){const r=to.now();to.tasks.forEach(e=>{e.c(r)||(to.tasks.delete(e),e.f())}),to.tasks.size!==0&&to.tick(_9)}function mC(r){let e;return to.tasks.size===0&&to.tick(_9),{promise:new Promise(t=>{to.tasks.add(e={c:r,f:t})}),abort(){to.tasks.delete(e)}}}function bf(r,e){sh(()=>{r.dispatchEvent(new CustomEvent(e))})}function bC(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function S9(r){const e={},t=r.split(";");for(const n of t){const[i,a]=n.split(":");if(!i||a===void 0)break;const s=bC(i.trim());e[s]=a.trim()}return e}const vC=r=>r;function xi(r,e,t,n){var i=(r&cA)!==0,a=(r&uA)!==0,s=i&&a,o=(r&hA)!==0,l=s?"both":i?"in":"out",c,u=e.inert,h=e.style.overflow,d,f;function p(){return sh(()=>c??=t()(e,n?.()??{},{direction:l}))}var m={is_global:o,in(){if(e.inert=u,!i){f?.abort(),f?.reset?.();return}a||d?.abort(),bf(e,"introstart"),d=Zg(e,p(),f,1,()=>{bf(e,"introend"),d?.abort(),d=c=void 0,e.style.overflow=h})},out(S){if(!a){S?.(),c=void 0;return}e.inert=!0,bf(e,"outrostart"),f=Zg(e,p(),d,0,()=>{bf(e,"outroend"),S?.()})},stop:()=>{d?.abort(),f?.abort()}},y=qr;if((y.transitions??=[]).push(m),i&&gf){var v=o;if(!v){for(var _=y.parent;_&&(_.f&ql)!==0;)for(;(_=_.parent)&&(_.f&Fc)===0;);v=!_||(_.f&Vd)!==0}v&&nh(()=>{mn(()=>m.in())})}}function Zg(r,e,t,n,i){var a=n===1;if(Rc(e)){var s,o=!1;return zc(()=>{if(!o){var y=e({direction:a?"in":"out"});s=Zg(r,y,t,n,i)}}),{abort:()=>{o=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t?.deactivate(),!e?.duration)return i(),{abort:je,deactivate:je,reset:je,t:()=>n};const{delay:l=0,css:c,tick:u,easing:h=vC}=e;var d=[];if(a&&t===void 0&&(u&&u(0,1),c)){var f=S9(c(0,1));d.push(f,f)}var p=()=>1-n,m=r.animate(d,{duration:l,fill:"forwards"});return m.onfinish=()=>{m.cancel();var y=t?.t()??1-n;t?.abort();var v=n-y,_=e.duration*Math.abs(v),S=[];if(_>0){var A=!1;if(c)for(var C=Math.ceil(_/16.666666666666668),k=0;k<=C;k+=1){var M=y+v*h(k/C),N=S9(c(M,1-M));S.push(N),A||=N.overflow==="hidden"}A&&(r.style.overflow="hidden"),p=()=>{var F=m.currentTime;return y+v*h(F/_)},u&&mC(()=>{if(m.playState!=="running")return!1;var F=p();return u(F,1-F),!0})}m=r.animate(S,{duration:_,fill:"forwards"}),m.onfinish=()=>{p=()=>n,u?.(n,1-n),i()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=je)},deactivate:()=>{i=je},reset:()=>{n===0&&u?.(1,0)},t:()=>p()}}function qo(r,e,t=e){var n=Wl(),i=new WeakSet;a9(r,"input",a=>{var s=a?r.defaultValue:r.value;if(s=ep(r)?tp(s):s,t(s),qn!==null&&i.add(qn),n&&s!==(s=e())){var o=r.selectionStart,l=r.selectionEnd;r.value=s??"",l!==null&&(r.selectionStart=o,r.selectionEnd=Math.min(l,r.value.length))}}),(hr&&r.defaultValue!==r.value||mn(e)==null&&r.value)&&(t(ep(r)?tp(r.value):r.value),qn!==null&&i.add(qn)),sf(()=>{var a=e();r===document.activeElement&&i.has(qn)||ep(r)&&a===tp(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}function ep(r){var e=r.type;return e==="number"||e==="range"}function tp(r){return r===""?null:+r}function yC(r,e,t=e){a9(r,"change",()=>{t(r.files)}),hr&&r.files&&t(r.files),sf(()=>{r.files=e()})}function k9(r,e){return r===e||r?.[ms]===e}function Fr(r={},e,t,n){return nh(()=>{var i,a;return sf(()=>{i=a,a=[],mn(()=>{r!==t(...a)&&(e(r,...a),i&&k9(t(...i),r)&&e(null,...i))})}),()=>{zc(()=>{a&&k9(t(...a),r)&&e(null,...a)})}}),r}function wC(r,e){ZA(window,["resize"],()=>sh(()=>e(window[r])))}function xC(r=!1){const e=hn,t=e.l.u;if(!t)return;let n=()=>jA(e.s);if(r){let i=0,a={};const s=Zu(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==a[c]&&(a[c]=l[c],o=!0);return o&&i++,i});n=()=>g(s)}t.b.length&&Ii(()=>{A9(e,n),Gd(t.b)}),Nt(()=>{const i=mn(()=>t.m.map(zk));return()=>{for(const a of i)typeof a=="function"&&a()}}),t.a.length&&Nt(()=>{A9(e,n),Gd(t.a)})}function A9(r,e){if(r.l.s)for(const t of r.l.s)g(t);e()}function C9(r,e,t){if(r==null)return e(void 0),je;const n=mn(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const Xc=[];function rp(r,e=je){let t=null;const n=new Set;function i(o){if(Og(r,o)&&(r=o,t)){const l=!Xc.length;for(const c of n)c[1](),Xc.push(c,r);if(l){for(let c=0;c<Xc.length;c+=2)Xc[c][0](Xc[c+1]);Xc.length=0}}}function a(o){i(o(r))}function s(o,l=je){const c=[o,l];return n.add(c),n.size===1&&(t=e(i,a)||je),o(r),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:a,subscribe:s}}function _C(r){let e;return C9(r,t=>e=t)(),e}let vf=!1,np=Symbol();function SC(r,e,t){const n=t[e]??={store:null,source:Bg(void 0),unsubscribe:je};if(n.store!==r&&!(np in t))if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=je;else{var i=!0;n.unsubscribe=C9(r,a=>{i?n.source.v=a:I(n.source,a)}),i=!1}return r&&np in t?_C(r):g(n.source)}function kC(){const r={};function e(){th(()=>{for(var t in r)r[t].unsubscribe();Ku(r,np,{enumerable:!1,value:!0})})}return[r,e]}function AC(r){var e=vf;try{return vf=!1,[r(),vf]}finally{vf=e}}const CC={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function qe(r,e,t){return new Proxy({props:r,exclude:e},CC)}const EC={get(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(Rc(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(r,e,t){let n=r.props.length;for(;n--;){let i=r.props[n];Rc(i)&&(i=i());const a=Ro(i,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(Rc(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const i=Ro(n,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===ms||e===kg)return!1;for(let t of r.props)if(Rc(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(Rc(t)&&(t=t()),!!t){for(const n in t)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(t))e.includes(n)||e.push(n)}return e}};function tt(...r){return new Proxy({props:r},EC)}function U(r,e,t,n){var i=!Lc||(t&aA)!==0,a=(t&oA)!==0,s=(t&lA)!==0,o=n,l=!0,c=()=>(l&&(l=!1,o=s?mn(n):n),o),u;if(a){var h=ms in r||kg in r;u=Ro(r,e)?.set??(h&&e in r?S=>r[e]=S:void 0)}var d,f=!1;a?[d,f]=AC(()=>r[e]):d=r[e],d===void 0&&n!==void 0&&(d=c(),u&&(i&&Jk(),u(d)));var p;if(i?p=()=>{var S=r[e];return S===void 0?c():(l=!0,S)}:p=()=>{var S=r[e];return S!==void 0&&(o=void 0),S===void 0?o:S},i&&(t&sA)===0)return p;if(u){var m=r.$$legacy;return function(S,A){return arguments.length>0?((!i||!A||m||f)&&u(A?p():S),S):p()}}var y=!1,v=((t&iA)!==0?Zu:Rg)(()=>(y=!1,p()));a&&g(v);var _=qr;return function(S,A){if(arguments.length>0){const C=A?g(v):i&&a?Mr(S):S;return I(v,C),y=!0,o!==void 0&&(o=C),S}return Yl&&y||(_.f&Hl)!==0?v.v:g(v)}}function TC(r){return class extends MC{constructor(e){super({component:r,...e})}}}class MC{#e;#t;constructor(e){var t=new Map,n=(a,s)=>{var o=Bg(s,!1,!1);return t.set(a,o),o};const i=new Proxy({...e.props||{},$$events:{}},{get(a,s){return g(t.get(s)??n(s,Reflect.get(a,s)))},has(a,s){return s===kg?!0:(g(t.get(s)??n(s,Reflect.get(a,s))),Reflect.has(a,s))},set(a,s,o){return I(t.get(s)??n(s,o),o),Reflect.set(a,s,o)}});this.#t=(e.hydrate?l9:pf)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&Lg(),this.#e=i.$$events;for(const a of Object.keys(this.#t))a==="$set"||a==="$destroy"||a==="$on"||Ku(this,a,{get(){return this.#t[a]},set(s){this.#t[a]=s},enumerable:!0});this.#t.$set=a=>{Object.assign(i,a)},this.#t.$destroy=()=>{Vg(this.#t)}}$set(e){this.#t.$set(e)}$on(e,t){this.#e[e]=this.#e[e]||[];const n=(...i)=>t.call(this,...i);return this.#e[e].push(n),()=>{this.#e[e]=this.#e[e].filter(i=>i!==n)}}$destroy(){this.#t.$destroy()}}function IC(){return Jr===null&&Yk(),(Jr.ac??=new AbortController).signal}function _i(r){hn===null&&Dc(),Lc&&hn.l!==null?ap(hn).m.push(r):Nt(()=>{const e=mn(r);if(typeof e=="function")return e})}function ip(r){hn===null&&Dc(),_i(()=>()=>mn(r))}function OC(r,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:n})}function NC(){const r=hn;return r===null&&Dc(),(e,t,n)=>{const i=r.s.$$events?.[e];if(i){const a=Po(i)?i.slice():[i],s=OC(e,t,n);for(const o of a)o.call(r.x,s);return!s.defaultPrevented}return!0}}function PC(r){hn===null&&Dc(),hn.l===null&&v5(),ap(hn).b.push(r)}function RC(r){hn===null&&Dc(),hn.l===null&&v5(),ap(hn).a.push(r)}function ap(r){var e=r.l;return e.u??={a:[],b:[],m:[]}}const FC=Object.freeze(Object.defineProperty({__proto__:null,afterUpdate:RC,beforeUpdate:PC,createEventDispatcher:NC,createRawSnippet:aC,flushSync:Lg,getAbortSignal:IC,getAllContexts:k5,getContext:Bc,hasContext:Ng,hydrate:l9,mount:pf,onDestroy:ip,onMount:_i,setContext:Zd,settled:t9,tick:jo,unmount:Vg,untrack:mn},Symbol.toStringTag,{value:"Module"}));class yf{constructor(e,t){this.status=e,typeof t=="string"?this.body={message:t}:t?this.body=t:this.body={message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class sp{constructor(e,t){this.status=e,this.location=t}}class op extends Error{constructor(e,t,n){super(n),this.status=e,this.text=t}}new URL("sveltekit-internal://");function DC(r,e){return r==="/"||e==="ignore"?r:e==="never"?r.endsWith("/")?r.slice(0,-1):r:e==="always"&&!r.endsWith("/")?r+"/":r}function LC(r){return r.split("%25").map(decodeURI).join("%25")}function BC(r){for(const e in r)r[e]=decodeURIComponent(r[e]);return r}function lp({href:r}){return r.split("#")[0]}function zC(r,e,t,n=!1){const i=new URL(r);Object.defineProperty(i,"searchParams",{value:new Proxy(i.searchParams,{get(s,o){if(o==="get"||o==="getAll"||o==="has")return(c,...u)=>(t(c),s[o](c,...u));e();const l=Reflect.get(s,o);return typeof l=="function"?l.bind(s):l}}),enumerable:!0,configurable:!0});const a=["href","pathname","search","toString","toJSON"];n&&a.push("hash");for(const s of a)Object.defineProperty(i,s,{get(){return e(),r[s]},enumerable:!0,configurable:!0});return i}function UC(...r){let e=5381;for(const t of r)if(typeof t=="string"){let n=t.length;for(;n;)e=e*33^t.charCodeAt(--n)}else if(ArrayBuffer.isView(t)){const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);let i=n.length;for(;i;)e=e*33^n[--i]}else throw new TypeError("value must be a string or TypedArray");return(e>>>0).toString(36)}new TextEncoder,new TextDecoder;function jC(r){const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}const HC=window.fetch;window.fetch=(r,e)=>((r instanceof Request?r.method:e?.method||"GET")!=="GET"&&uh.delete(cp(r)),HC(r,e));const uh=new Map;function qC(r,e){const t=cp(r,e),n=document.querySelector(t);if(n?.textContent){n.remove();let{body:i,...a}=JSON.parse(n.textContent);const s=n.getAttribute("data-ttl");return s&&uh.set(t,{body:i,init:a,ttl:1e3*Number(s)}),n.getAttribute("data-b64")!==null&&(i=jC(i)),Promise.resolve(new Response(i,a))}return window.fetch(r,e)}function GC(r,e,t){if(uh.size>0){const n=cp(r,t),i=uh.get(n);if(i){if(performance.now()<i.ttl&&["default","force-cache","only-if-cached",void 0].includes(t?.cache))return new Response(i.body,i.init);uh.delete(n)}}return window.fetch(e,t)}function cp(r,e){let n=`script[data-sveltekit-fetched][data-url=${JSON.stringify(r instanceof Request?r.url:r)}]`;if(e?.headers||e?.body){const i=[];e.headers&&i.push([...new Headers(e.headers)].join(",")),e.body&&(typeof e.body=="string"||ArrayBuffer.isView(e.body))&&i.push(e.body),n+=`[data-hash="${UC(...i)}"]`}return n}const $C=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function WC(r){const e=[];return{pattern:r==="/"?/^\/$/:new RegExp(`^${XC(r).map(n=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(n);if(i)return e.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/([^]*))?";const a=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(n);if(a)return e.push({name:a[1],matcher:a[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!n)return;const s=n.split(/\[(.+?)\](?!\])/);return"/"+s.map((l,c)=>{if(c%2){if(l.startsWith("x+"))return up(String.fromCharCode(parseInt(l.slice(2),16)));if(l.startsWith("u+"))return up(String.fromCharCode(...l.slice(2).split("-").map(m=>parseInt(m,16))));const u=$C.exec(l),[,h,d,f,p]=u;return e.push({name:f,matcher:p,optional:!!h,rest:!!d,chained:d?c===1&&s[0]==="":!1}),d?"([^]*?)":h?"([^/]*)?":"([^/]+?)"}return up(l)}).join("")}).join("")}/?$`),params:e}}function VC(r){return r!==""&&!/^\([^)]+\)$/.test(r)}function XC(r){return r.slice(1).split("/").filter(VC)}function KC(r,e,t){const n={},i=r.slice(1),a=i.filter(o=>o!==void 0);let s=0;for(let o=0;o<e.length;o+=1){const l=e[o];let c=i[o-s];if(l.chained&&l.rest&&s&&(c=i.slice(o-s,o+1).filter(u=>u).join("/"),s=0),c===void 0)if(l.rest)c="";else continue;if(!l.matcher||t[l.matcher](c)){n[l.name]=c;const u=e[o+1],h=i[o+1];u&&!u.rest&&u.optional&&h&&l.chained&&(s=0),!u&&!h&&Object.keys(n).length===a.length&&(s=0);continue}if(l.optional&&l.chained){s++;continue}return}if(!s)return n}function up(r){return r.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function YC({nodes:r,server_loads:e,dictionary:t,matchers:n}){const i=new Set(e);return Object.entries(t).map(([o,[l,c,u]])=>{const{pattern:h,params:d}=WC(o),f={id:o,exec:p=>{const m=h.exec(p);if(m)return KC(m,d,n)},errors:[1,...u||[]].map(p=>r[p]),layouts:[0,...c||[]].map(s),leaf:a(l)};return f.errors.length=f.layouts.length=Math.max(f.errors.length,f.layouts.length),f});function a(o){const l=o<0;return l&&(o=~o),[l,r[o]]}function s(o){return o===void 0?o:[i.has(o),r[o]]}}function E9(r,e=JSON.parse){try{return e(sessionStorage[r])}catch{}}function T9(r,e,t=JSON.stringify){const n=t(e);try{sessionStorage[r]=n}catch{}}const Si=globalThis.__sveltekit_vds1rr?.base??"",QC=globalThis.__sveltekit_vds1rr?.assets??Si??"",JC="1770930379253",M9="sveltekit:snapshot",I9="sveltekit:scroll",O9="sveltekit:states",ZC="sveltekit:pageurl",Kc="sveltekit:history",hh="sveltekit:navigation",Jl={tap:1,hover:2,viewport:3,eager:4,off:-1,false:-1},wf=location.origin;function hp(r){if(r instanceof URL)return r;let e=document.baseURI;if(!e){const t=document.getElementsByTagName("base");e=t.length?t[0].href:document.URL}return new URL(r,e)}function xf(){return{x:pageXOffset,y:pageYOffset}}function Yc(r,e){return r.getAttribute(`data-sveltekit-${e}`)}const N9={...Jl,"":Jl.hover};function P9(r){let e=r.assignedSlot??r.parentNode;return e?.nodeType===11&&(e=e.host),e}function R9(r,e){for(;r&&r!==e;){if(r.nodeName.toUpperCase()==="A"&&r.hasAttribute("href"))return r;r=P9(r)}}function dp(r,e,t){let n;try{if(n=new URL(r instanceof SVGAElement?r.href.baseVal:r.href,document.baseURI),t&&n.hash.match(/^#[^/]/)){const o=location.hash.split("#")[1]||"/";n.hash=`#${o}${n.hash}`}}catch{}const i=r instanceof SVGAElement?r.target.baseVal:r.target,a=!n||!!i||Sf(n,e,t)||(r.getAttribute("rel")||"").split(/\s+/).includes("external"),s=n?.origin===wf&&r.hasAttribute("download");return{url:n,external:a,target:i,download:s}}function _f(r){let e=null,t=null,n=null,i=null,a=null,s=null,o=r;for(;o&&o!==document.documentElement;)n===null&&(n=Yc(o,"preload-code")),i===null&&(i=Yc(o,"preload-data")),e===null&&(e=Yc(o,"keepfocus")),t===null&&(t=Yc(o,"noscroll")),a===null&&(a=Yc(o,"reload")),s===null&&(s=Yc(o,"replacestate")),o=P9(o);function l(c){switch(c){case"":case"true":return!0;case"off":case"false":return!1;default:return}}return{preload_code:N9[n??"off"],preload_data:N9[i??"off"],keepfocus:l(e),noscroll:l(t),reload:l(a),replace_state:l(s)}}function F9(r){const e=rp(r);let t=!0;function n(){t=!0,e.update(s=>s)}function i(s){t=!1,e.set(s)}function a(s){let o;return e.subscribe(l=>{(o===void 0||t&&l!==o)&&s(o=l)})}return{notify:n,set:i,subscribe:a}}const D9={v:()=>{}};function eE(){const{set:r,subscribe:e}=rp(!1);let t;async function n(){clearTimeout(t);try{const i=await fetch(`${QC}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(!i.ok)return!1;const s=(await i.json()).version!==JC;return s&&(r(!0),D9.v(),clearTimeout(t)),s}catch{return!1}}return{subscribe:e,check:n}}function Sf(r,e,t){return r.origin!==wf||!r.pathname.startsWith(e)?!0:t?r.pathname!==location.pathname:!1}const L9=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...L9],[...new Set([...L9])];function tE(r){return r.filter(e=>e!=null)}function fp(r){return r instanceof yf||r instanceof op?r.status:500}function rE(r){return r instanceof op?r.text:"Internal Error"}let fi,dh,gp;_i.toString().includes("$$")||/function \w+\(\) \{\}/.test(_i.toString())?(fi={data:{},form:null,error:null,params:{},route:{id:null},state:{},status:-1,url:new URL("https://example.com")},dh={current:null},gp={current:!1}):(fi=new class{#e=ue({});get data(){return g(this.#e)}set data(e){I(this.#e,e)}#t=ue(null);get form(){return g(this.#t)}set form(e){I(this.#t,e)}#r=ue(null);get error(){return g(this.#r)}set error(e){I(this.#r,e)}#n=ue({});get params(){return g(this.#n)}set params(e){I(this.#n,e)}#a=ue({id:null});get route(){return g(this.#a)}set route(e){I(this.#a,e)}#i=ue({});get state(){return g(this.#i)}set state(e){I(this.#i,e)}#s=ue(-1);get status(){return g(this.#s)}set status(e){I(this.#s,e)}#o=ue(new URL("https://example.com"));get url(){return g(this.#o)}set url(e){I(this.#o,e)}},dh=new class{#e=ue(null);get current(){return g(this.#e)}set current(e){I(this.#e,e)}},gp=new class{#e=ue(!1);get current(){return g(this.#e)}set current(e){I(this.#e,e)}},D9.v=()=>gp.current=!0);function nE(r){Object.assign(fi,r)}const B9={spanContext(){return iE},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this},addLink(){return this},addLinks(){return this}},iE={traceId:"",spanId:"",traceFlags:0},{onMount:aE}=FC,sE=new Set(["icon","shortcut icon","apple-touch-icon"]),Zl=E9(I9)??{},fh=E9(M9)??{},ys={url:F9({}),page:F9({}),navigating:rp(null),updated:eE()};function pp(r){Zl[r]=xf()}function oE(r,e){let t=r+1;for(;Zl[t];)delete Zl[t],t+=1;for(t=e+1;fh[t];)delete fh[t],t+=1}function gh(r,e=!1){return e?location.replace(r.href):location.href=r.href,new Promise(()=>{})}async function z9(){if("serviceWorker"in navigator){const r=await navigator.serviceWorker.getRegistration(Si||"/");r&&await r.update()}}function U9(){}let mp,bp,kf,ro,vp,ii;const Af=[],Cf=[];let os=null;function yp(){os?.fork?.then(r=>r?.discard()),os=null}const Ef=new Map,j9=new Set,lE=new Set,Qc=new Set;let Cn={branch:[],error:null,url:null},H9=!1,Tf=!1,q9=!0,ph=!1,mh=!1,G9=!1,wp=!1,$9,Oi,Ua,ec;const Mf=new Set,W9=new Map;async function cE(r,e,t){globalThis.__sveltekit_vds1rr?.data&&globalThis.__sveltekit_vds1rr.data,document.URL!==location.href&&(location.href=location.href),ii=r,await r.hooks.init?.(),mp=YC(r),ro=document.documentElement,vp=e,bp=r.nodes[0],kf=r.nodes[1],bp(),kf(),Oi=history.state?.[Kc],Ua=history.state?.[hh],Oi||(Oi=Ua=Date.now(),history.replaceState({...history.state,[Kc]:Oi,[hh]:Ua},""));const n=Zl[Oi];function i(){n&&(history.scrollRestoration="manual",scrollTo(n.x,n.y))}t?(i(),await _E(vp,t)):(await Jc({type:"enter",url:hp(ii.hash?AE(new URL(location.href)):location.href),replace_state:!0}),i()),xE()}function uE(){Af.length=0,wp=!1}function V9(r){Cf.some(e=>e?.snapshot)&&(fh[r]=Cf.map(e=>e?.snapshot?.capture()))}function X9(r){fh[r]?.forEach((e,t)=>{Cf[t]?.snapshot?.restore(e)})}function K9(){pp(Oi),T9(I9,Zl),V9(Ua),T9(M9,fh)}async function Y9(r,e,t,n){let i;e.invalidateAll&&yp(),await Jc({type:"goto",url:hp(r),keepfocus:e.keepFocus,noscroll:e.noScroll,replace_state:e.replaceState,state:e.state,redirect_count:t,nav_token:n,accept:()=>{e.invalidateAll&&(wp=!0,i=[...W9.keys()]),e.invalidate&&e.invalidate.forEach(wE)}}),e.invalidateAll&&jo().then(jo).then(()=>{W9.forEach(({resource:a},s)=>{i?.includes(s)&&a.refresh?.()})})}async function hE(r){if(r.id!==os?.id){yp();const e={};Mf.add(e),os={id:r.id,token:e,promise:Z9({...r,preload:e}).then(t=>(Mf.delete(e),t.type==="loaded"&&t.state.error&&yp(),t)),fork:null}}return os.promise}async function xp(r){const e=(await Of(r,!1))?.route;e&&await Promise.all([...e.layouts,e.leaf].map(t=>t?.[1]()))}async function Q9(r,e,t){Cn=r.state;const n=document.querySelector("style[data-sveltekit]");if(n&&n.remove(),Object.assign(fi,r.props.page),$9=new ii.root({target:e,props:{...r.props,stores:ys,components:Cf},hydrate:t,sync:!1}),await Promise.resolve(),X9(Ua),t){const i={from:null,to:{params:Cn.params,route:{id:Cn.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};Qc.forEach(a=>a(i))}Tf=!0}function If({url:r,params:e,branch:t,status:n,error:i,route:a,form:s}){let o="never";if(Si&&(r.pathname===Si||r.pathname===Si+"/"))o="always";else for(const f of t)f?.slash!==void 0&&(o=f.slash);r.pathname=DC(r.pathname,o),r.search=r.search;const l={type:"loaded",state:{url:r,params:e,branch:t,error:i,route:a},props:{constructors:tE(t).map(f=>f.node.component),page:Ep(fi)}};s!==void 0&&(l.props.form=s);let c={},u=!fi,h=0;for(let f=0;f<Math.max(t.length,Cn.branch.length);f+=1){const p=t[f],m=Cn.branch[f];p?.data!==m?.data&&(u=!0),p&&(c={...c,...p.data},u&&(l.props[`data_${h}`]=c),h+=1)}return(!Cn.url||r.href!==Cn.url.href||Cn.error!==i||s!==void 0&&s!==fi.form||u)&&(l.props.page={error:i,params:e,route:{id:a?.id??null},state:{},status:n,url:new URL(r),form:s??null,data:u?c:fi.data}),l}async function _p({loader:r,parent:e,url:t,params:n,route:i,server_data_node:a}){let s=null,o=!0;const l={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},c=await r();if(c.universal?.load){let u=function(...d){for(const f of d){const{href:p}=new URL(f,t);l.dependencies.add(p)}};const h={tracing:{enabled:!1,root:B9,current:B9},route:new Proxy(i,{get:(d,f)=>(o&&(l.route=!0),d[f])}),params:new Proxy(n,{get:(d,f)=>(o&&l.params.add(f),d[f])}),data:a?.data??null,url:zC(t,()=>{o&&(l.url=!0)},d=>{o&&l.search_params.add(d)},ii.hash),async fetch(d,f){d instanceof Request&&(f={body:d.method==="GET"||d.method==="HEAD"?void 0:await d.blob(),cache:d.cache,credentials:d.credentials,headers:[...d.headers].length>0?d?.headers:void 0,integrity:d.integrity,keepalive:d.keepalive,method:d.method,mode:d.mode,redirect:d.redirect,referrer:d.referrer,referrerPolicy:d.referrerPolicy,signal:d.signal,...f});const{resolved:p,promise:m}=J9(d,f,t);return o&&u(p.href),m},setHeaders:()=>{},depends:u,parent(){return o&&(l.parent=!0),e()},untrack(d){o=!1;try{return d()}finally{o=!0}}};s=await c.universal.load.call(null,h)??null}return{node:c,loader:r,server:a,universal:c.universal?.load?{type:"data",data:s,uses:l}:null,data:s??a?.data??null,slash:c.universal?.trailingSlash??a?.slash}}function J9(r,e,t){let n=r instanceof Request?r.url:r;const i=new URL(n,t);i.origin===t.origin&&(n=i.href.slice(t.origin.length));const a=Tf?GC(n,i.href,e):qC(n,e);return{resolved:i,promise:a}}function dE(r,e,t,n,i,a){if(wp)return!0;if(!i)return!1;if(i.parent&&r||i.route&&e||i.url&&t)return!0;for(const s of i.search_params)if(n.has(s))return!0;for(const s of i.params)if(a[s]!==Cn.params[s])return!0;for(const s of i.dependencies)if(Af.some(o=>o(new URL(s))))return!0;return!1}function Sp(r,e){return r?.type==="data"?r:r?.type==="skip"?e??null:null}function fE(r,e){if(!r)return new Set(e.searchParams.keys());const t=new Set([...r.searchParams.keys(),...e.searchParams.keys()]);for(const n of t){const i=r.searchParams.getAll(n),a=e.searchParams.getAll(n);i.every(s=>a.includes(s))&&a.every(s=>i.includes(s))&&t.delete(n)}return t}function gE({error:r,url:e,route:t,params:n}){return{type:"loaded",state:{error:r,url:e,route:t,params:n,branch:[]},props:{page:Ep(fi),constructors:[]}}}async function Z9({id:r,invalidating:e,url:t,params:n,route:i,preload:a}){if(os?.id===r)return Mf.delete(os.token),os.promise;const{errors:s,layouts:o,leaf:l}=i,c=[...o,l];s.forEach(y=>y?.().catch(()=>{})),c.forEach(y=>y?.[1]().catch(()=>{}));const u=Cn.url?r!==Nf(Cn.url):!1,h=Cn.route?i.id!==Cn.route.id:!1,d=fE(Cn.url,t);let f=!1;const p=c.map(async(y,v)=>{if(!y)return;const _=Cn.branch[v];return y[1]===_?.loader&&!dE(f,h,u,d,_.universal?.uses,n)?_:(f=!0,_p({loader:y[1],url:t,params:n,route:i,parent:async()=>{const A={};for(let C=0;C<v;C+=1)Object.assign(A,(await p[C])?.data);return A},server_data_node:Sp(y[0]?{type:"skip"}:null,y[0]?_?.server:void 0)}))});for(const y of p)y.catch(()=>{});const m=[];for(let y=0;y<c.length;y+=1)if(c[y])try{m.push(await p[y])}catch(v){if(v instanceof sp)return{type:"redirect",location:v.location};if(Mf.has(a))return gE({error:await bh(v,{params:n,url:t,route:{id:i.id}}),url:t,params:n,route:i});let _=fp(v),S;if(v instanceof yf)S=v.body;else{if(await ys.updated.check())return await z9(),await gh(t);S=await bh(v,{params:n,url:t,route:{id:i.id}})}const A=await pE(y,m,s);return A?If({url:t,params:n,branch:m.slice(0,A.idx).concat(A.node),status:_,error:S,route:i}):await t4(t,{id:i.id},S,_)}else m.push(void 0);return If({url:t,params:n,branch:m,status:200,error:null,route:i,form:e?void 0:null})}async function pE(r,e,t){for(;r--;)if(t[r]){let n=r;for(;!e[n];)n-=1;try{return{idx:n+1,node:{node:await t[r](),loader:t[r],data:{},server:null,universal:null}}}catch{continue}}}async function kp({status:r,error:e,url:t,route:n}){const i={};let a=null;try{const s=await _p({loader:bp,url:t,params:i,route:n,parent:()=>Promise.resolve({}),server_data_node:Sp(a)}),o={node:await kf(),loader:kf,universal:null,server:null,data:null};return If({url:t,params:i,branch:[s,o],status:r,error:e,route:null})}catch(s){if(s instanceof sp)return Y9(new URL(s.location,location.href),{},0);throw s}}async function mE(r){const e=r.href;if(Ef.has(e))return Ef.get(e);let t;try{const n=(async()=>{let i=await ii.hooks.reroute({url:new URL(r),fetch:async(a,s)=>J9(a,s,r).promise})??r;if(typeof i=="string"){const a=new URL(r);ii.hash?a.hash=i:a.pathname=i,i=a}return i})();Ef.set(e,n),t=await n}catch{Ef.delete(e);return}return t}async function Of(r,e){if(r&&!Sf(r,Si,ii.hash)){const t=await mE(r);if(!t)return;const n=bE(t);for(const i of mp){const a=i.exec(n);if(a)return{id:Nf(r),invalidating:e,route:i,params:BC(a),url:r}}}}function bE(r){return LC(ii.hash?r.hash.replace(/^#/,"").replace(/[?#].+/,""):r.pathname.slice(Si.length))||"/"}function Nf(r){return(ii.hash?r.hash.replace(/^#/,""):r.pathname)+r.search}function e4({url:r,type:e,intent:t,delta:n,event:i}){let a=!1;const s=Cp(Cn,t,r,e);n!==void 0&&(s.navigation.delta=n),i!==void 0&&(s.navigation.event=i);const o={...s.navigation,cancel:()=>{a=!0,s.reject(new Error("navigation cancelled"))}};return ph||j9.forEach(l=>l(o)),a?null:s}async function Jc({type:r,url:e,popped:t,keepfocus:n,noscroll:i,replace_state:a,state:s={},redirect_count:o=0,nav_token:l={},accept:c=U9,block:u=U9,event:h}){const d=ec;ec=l;const f=await Of(e,!1),p=r==="enter"?Cp(Cn,f,e,r):e4({url:e,type:r,delta:t?.delta,intent:f,event:h});if(!p){u(),ec===l&&(ec=d);return}const m=Oi,y=Ua;c(),ph=!0,Tf&&p.navigation.type!=="enter"&&ys.navigating.set(dh.current=p.navigation);let v=f&&await Z9(f);if(!v){if(Sf(e,Si,ii.hash))return await gh(e,a);v=await t4(e,{id:null},await bh(new op(404,"Not Found",`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404,a)}if(e=f?.url||e,ec!==l)return p.reject(new Error("navigation aborted")),!1;if(v.type==="redirect"){if(o<20){await Jc({type:r,url:new URL(v.location,e),popped:t,keepfocus:n,noscroll:i,replace_state:a,state:s,redirect_count:o+1,nav_token:l}),p.fulfil(void 0);return}v=await kp({status:500,error:await bh(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}})}else v.props.page.status>=400&&await ys.updated.check()&&(await z9(),await gh(e,a));if(uE(),pp(m),V9(y),v.props.page.url.pathname!==e.pathname&&(e.pathname=v.props.page.url.pathname),s=t?t.state:s,!t){const M=a?0:1,N={[Kc]:Oi+=M,[hh]:Ua+=M,[O9]:s};(a?history.replaceState:history.pushState).call(history,N,"",e),a||oE(Oi,Ua)}const _=f&&os?.id===f.id?os.fork:null;os=null,v.props.page.state=s;let S;if(Tf){const M=(await Promise.all(Array.from(lE,F=>F(p.navigation)))).filter(F=>typeof F=="function");if(M.length>0){let F=function(){M.forEach(z=>{Qc.delete(z)})};M.push(F),M.forEach(z=>{Qc.add(z)})}Cn=v.state,v.props.page&&(v.props.page.url=e);const N=_&&await _;N?S=N.commit():($9.$set(v.props),nE(v.props.page),S=t9?.()),G9=!0}else await Q9(v,vp,!1);const{activeElement:A}=document;await S,await jo(),await jo();let C=t?t.scroll:i?xf():null;if(q9){const M=e.hash&&document.getElementById(n4(e));if(C)scrollTo(C.x,C.y);else if(M){M.scrollIntoView();const{top:N,left:F}=M.getBoundingClientRect();C={x:pageXOffset+F,y:pageYOffset+N}}else scrollTo(0,0)}const k=document.activeElement!==A&&document.activeElement!==document.body;!n&&!k&&kE(e,C),q9=!0,v.props.page&&Object.assign(fi,v.props.page),ph=!1,r==="popstate"&&X9(Ua),p.fulfil(void 0),Qc.forEach(M=>M(p.navigation)),ys.navigating.set(dh.current=null)}async function t4(r,e,t,n,i){return r.origin===wf&&r.pathname===location.pathname&&!H9?await kp({status:n,error:t,url:r,route:e}):await gh(r,i)}function vE(){let r,e={element:void 0,href:void 0},t;ro.addEventListener("mousemove",o=>{const l=o.target;clearTimeout(r),r=setTimeout(()=>{a(l,Jl.hover)},20)});function n(o){o.defaultPrevented||a(o.composedPath()[0],Jl.tap)}ro.addEventListener("mousedown",n),ro.addEventListener("touchstart",n,{passive:!0});const i=new IntersectionObserver(o=>{for(const l of o)l.isIntersecting&&(xp(new URL(l.target.href)),i.unobserve(l.target))},{threshold:0});async function a(o,l){const c=R9(o,ro),u=c===e.element&&c?.href===e.href&&l>=t;if(!c||u)return;const{url:h,external:d,download:f}=dp(c,Si,ii.hash);if(d||f)return;const p=_f(c),m=h&&Nf(Cn.url)===Nf(h);if(!(p.reload||m))if(l<=p.preload_data){e={element:c,href:c.href},t=Jl.tap;const y=await Of(h,!1);if(!y)return;hE(y)}else l<=p.preload_code&&(e={element:c,href:c.href},t=l,xp(h))}function s(){i.disconnect();for(const o of ro.querySelectorAll("a")){const{url:l,external:c,download:u}=dp(o,Si,ii.hash);if(c||u)continue;const h=_f(o);h.reload||(h.preload_code===Jl.viewport&&i.observe(o),h.preload_code===Jl.eager&&xp(l))}}Qc.add(s),s()}function bh(r,e){if(r instanceof yf)return r.body;const t=fp(r),n=rE(r);return ii.hooks.handleError({error:r,event:e,status:t,message:n})??{message:n}}function yE(r,e){aE(()=>(r.add(e),()=>{r.delete(e)}))}function r4(r){yE(Qc,r)}function Go(r,e={}){return r=new URL(hp(r)),r.origin!==wf?Promise.reject(new Error("goto: invalid URL")):Y9(r,e,0)}function wE(r){if(typeof r=="function")Af.push(r);else{const{href:e}=new URL(r,location.href);Af.push(t=>t.href===e)}}function xE(){history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let t=!1;if(K9(),!ph){const n=Cp(Cn,void 0,null,"leave"),i={...n.navigation,cancel:()=>{t=!0,n.reject(new Error("navigation cancelled"))}};j9.forEach(a=>a(i))}t?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&K9()}),navigator.connection?.saveData||vE(),ro.addEventListener("click",async e=>{if(e.button||e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.defaultPrevented)return;const t=R9(e.composedPath()[0],ro);if(!t)return;const{url:n,external:i,target:a,download:s}=dp(t,Si,ii.hash);if(!n)return;if(a==="_parent"||a==="_top"){if(window.parent!==window)return}else if(a&&a!=="_self")return;const o=_f(t);if(!(t instanceof SVGAElement)&&n.protocol!==location.protocol&&!(n.protocol==="https:"||n.protocol==="http:")||s)return;const[c,u]=(ii.hash?n.hash.replace(/^#/,""):n.href).split("#"),h=c===lp(location);if(i||o.reload&&(!h||!u)){e4({url:n,type:"link",event:e})?ph=!0:e.preventDefault();return}if(u!==void 0&&h){const[,d]=Cn.url.href.split("#");if(d===u){if(e.preventDefault(),u===""||u==="top"&&t.ownerDocument.getElementById("top")===null)scrollTo({top:0});else{const f=t.ownerDocument.getElementById(decodeURIComponent(u));f&&(f.scrollIntoView(),f.focus())}return}if(mh=!0,pp(Oi),r(n),!o.replace_state)return;mh=!1}e.preventDefault(),await new Promise(d=>{requestAnimationFrame(()=>{setTimeout(d,0)}),setTimeout(d,100)}),await Jc({type:"link",url:n,keepfocus:o.keepfocus,noscroll:o.noscroll,replace_state:o.replace_state??n.href===location.href,event:e})}),ro.addEventListener("submit",e=>{if(e.defaultPrevented)return;const t=HTMLFormElement.prototype.cloneNode.call(e.target),n=e.submitter;if((n?.formTarget||t.target)==="_blank"||(n?.formMethod||t.method)!=="get")return;const s=new URL(n?.hasAttribute("formaction")&&n?.formAction||t.action);if(Sf(s,Si,!1))return;const o=e.target,l=_f(o);if(l.reload)return;e.preventDefault(),e.stopPropagation();const c=new FormData(o,n);s.search=new URLSearchParams(c).toString(),Jc({type:"form",url:s,keepfocus:l.keepfocus,noscroll:l.noscroll,replace_state:l.replace_state??s.href===location.href,event:e})}),addEventListener("popstate",async e=>{if(!Ap){if(e.state?.[Kc]){const t=e.state[Kc];if(ec={},t===Oi)return;const n=Zl[t],i=e.state[O9]??{},a=new URL(e.state[ZC]??location.href),s=e.state[hh],o=Cn.url?lp(location)===lp(Cn.url):!1;if(s===Ua&&(G9||o)){i!==fi.state&&(fi.state=i),r(a),Zl[Oi]=xf(),n&&scrollTo(n.x,n.y),Oi=t;return}const c=t-Oi;await Jc({type:"popstate",url:a,popped:{state:i,scroll:n,delta:c},accept:()=>{Oi=t,Ua=s},block:()=>{history.go(-c)},nav_token:ec,event:e})}else if(!mh){const t=new URL(location.href);r(t),ii.hash&&location.reload()}}}),addEventListener("hashchange",()=>{mh&&(mh=!1,history.replaceState({...history.state,[Kc]:++Oi,[hh]:Ua},"",location.href))});for(const e of document.querySelectorAll("link"))sE.has(e.rel)&&(e.href=e.href);addEventListener("pageshow",e=>{e.persisted&&ys.navigating.set(dh.current=null)});function r(e){Cn.url=fi.url=e,ys.page.set(Ep(fi)),ys.page.notify()}}async function _E(r,{status:e=200,error:t,node_ids:n,params:i,route:a,server_route:s,data:o,form:l}){H9=!0;const c=new URL(location.href);let u;({params:i={},route:a={id:null}}=await Of(c,!1)||{}),u=mp.find(({id:f})=>f===a.id);let h,d=!0;try{const f=n.map(async(m,y)=>{const v=o[y];return v?.uses&&(v.uses=SE(v.uses)),_p({loader:ii.nodes[m],url:c,params:i,route:a,parent:async()=>{const _={};for(let S=0;S<y;S+=1)Object.assign(_,(await f[S]).data);return _},server_data_node:Sp(v)})}),p=await Promise.all(f);if(u){const m=u.layouts;for(let y=0;y<m.length;y++)m[y]||p.splice(y,0,void 0)}h=If({url:c,params:i,branch:p,status:e,error:t,form:l,route:u??null})}catch(f){if(f instanceof sp){await gh(new URL(f.location,location.href));return}h=await kp({status:fp(f),error:await bh(f,{url:c,params:i,route:a}),url:c,route:a}),r.textContent="",d=!1}h.props.page&&(h.props.page.state={}),await Q9(h,r,d)}function SE(r){return{dependencies:new Set(r?.dependencies??[]),params:new Set(r?.params??[]),parent:!!r?.parent,route:!!r?.route,url:!!r?.url,search_params:new Set(r?.search_params??[])}}let Ap=!1;function kE(r,e=null){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const n=n4(r);if(n&&document.getElementById(n)){const{x:a,y:s}=e??xf();setTimeout(()=>{const o=history.state;Ap=!0,location.replace(`#${n}`),ii.hash&&location.replace(r.hash),history.replaceState(o,"",r.hash),scrollTo(a,s),Ap=!1})}else{const a=document.body,s=a.getAttribute("tabindex");a.tabIndex=-1,a.focus({preventScroll:!0,focusVisible:!1}),s!==null?a.setAttribute("tabindex",s):a.removeAttribute("tabindex")}const i=getSelection();if(i&&i.type!=="None"){const a=[];for(let s=0;s<i.rangeCount;s+=1)a.push(i.getRangeAt(s));setTimeout(()=>{if(i.rangeCount===a.length){for(let s=0;s<i.rangeCount;s+=1){const o=a[s],l=i.getRangeAt(s);if(o.commonAncestorContainer!==l.commonAncestorContainer||o.startContainer!==l.startContainer||o.endContainer!==l.endContainer||o.startOffset!==l.startOffset||o.endOffset!==l.endOffset)return}i.removeAllRanges()}})}}}function Cp(r,e,t,n){let i,a;const s=new Promise((l,c)=>{i=l,a=c});return s.catch(()=>{}),{navigation:{from:{params:r.params,route:{id:r.route?.id??null},url:r.url},to:t&&{params:e?.params??null,route:{id:e?.route?.id??null},url:t},willUnload:!e,type:n,complete:s},fulfil:i,reject:a}}function Ep(r){return{data:r.data,error:r.error,form:r.form,params:r.params,route:r.route,state:r.state,status:r.status,url:r.url}}function AE(r){const e=new URL(r);return e.hash=decodeURIComponent(r.hash),e}function n4(r){let e;if(ii.hash){const[,,t]=r.hash.split("#",3);e=t??""}else e=r.hash.slice(1);return decodeURIComponent(e)}const Pse="modulepreload",Rse=function(r,e){return new URL(r,e).href},Fse={},$o=function(e,t,n){let i=Promise.resolve();function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},CE={},EE="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(EE);var TE=$('<div id="svelte-announcer" aria-live="assertive" aria-atomic="true" style="position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px"><!></div>'),ME=$("<!> <!>",1);function IE(r,e){ye(e,!0);let t=U(e,"components",23,()=>[]),n=U(e,"data_0",3,null),i=U(e,"data_1",3,null);Ii(()=>e.stores.page.set(e.page)),Nt(()=>{e.stores,e.page,e.constructors,t(),e.form,n(),i(),e.stores.page.notify()});let a=ue(!1),s=ue(!1),o=ue(null);_i(()=>{const m=e.stores.page.subscribe(()=>{g(a)&&(I(s,!0),jo().then(()=>{I(o,document.title||"untitled page",!0)}))});return I(a,!0),m});const l=B(()=>e.constructors[1]);var c=ME(),u=P(c);{var h=m=>{var y=Z();const v=B(()=>e.constructors[0]);var _=P(y);he(_,()=>g(v),(S,A)=>{Fr(A(S,{get data(){return n()},get form(){return e.form},get params(){return e.page.params},children:(C,k)=>{var M=Z(),N=P(M);he(N,()=>g(l),(F,z)=>{Fr(z(F,{get data(){return i()},get form(){return e.form},get params(){return e.page.params}}),W=>t()[1]=W,()=>t()?.[1])}),w(C,M)},$$slots:{default:!0}}),C=>t()[0]=C,()=>t()?.[0])}),w(m,y)},d=m=>{var y=Z();const v=B(()=>e.constructors[0]);var _=P(y);he(_,()=>g(v),(S,A)=>{Fr(A(S,{get data(){return n()},get form(){return e.form},get params(){return e.page.params}}),C=>t()[0]=C,()=>t()?.[0])}),w(m,y)};le(u,m=>{e.constructors[1]?m(h):m(d,!1)})}var f=te(u,2);{var p=m=>{var y=TE(),v=G(y);{var _=S=>{var A=tr();Be(()=>nt(A,g(o))),w(S,A)};le(v,S=>{g(s)&&S(_)})}j(y),w(m,y)};le(f,m=>{g(a)&&m(p)})}w(r,c),we()}const OE=TC(IE),NE=[()=>$o(()=>Promise.resolve().then(()=>Zae),void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href),()=>$o(()=>Promise.resolve().then(()=>ase),void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href),()=>$o(()=>Promise.resolve().then(()=>cse),void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href),()=>$o(()=>Promise.resolve().then(()=>dse),void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href)],PE=[],RE={"/":[2],"/chat/[id]":[3]},Tp={handleError:({error:r})=>{console.error(r)},reroute:()=>{},transport:{}},i4=Object.fromEntries(Object.entries(Tp.transport).map(([r,e])=>[r,e.decode])),FE=Object.fromEntries(Object.entries(Tp.transport).map(([r,e])=>[r,e.encode])),a4=Object.freeze(Object.defineProperty({__proto__:null,decode:(r,e)=>i4[r](e),decoders:i4,dictionary:RE,encoders:FE,hash:!0,hooks:Tp,matchers:CE,nodes:NE,root:OE,server_loads:PE},Symbol.toStringTag,{value:"Module"}));function DE(r,e){cE(a4,r,e)}const LE={get params(){return fi.params},get route(){return fi.route},get status(){return fi.status},get url(){return fi.url}};ys.updated.check;const ws=LE;var an=(r=>(r.IMAGE="image",r.AUDIO="audio",r.PDF="pdf",r.TEXT="text",r))(an||{}),Zc=(r=>(r.JPEG="jpeg",r.PNG="png",r.GIF="gif",r.WEBP="webp",r.SVG="svg",r))(Zc||{}),Mp=(r=>(r.MP3="mp3",r.WAV="wav",r.WEBM="webm",r))(Mp||{}),s4=(r=>(r.PDF="pdf",r))(s4||{}),sn=(r=>(r.PLAIN_TEXT="plainText",r.MARKDOWN="markdown",r.ASCIIDOC="asciidoc",r.JAVASCRIPT="javascript",r.TYPESCRIPT="typescript",r.JSX="jsx",r.TSX="tsx",r.CSS="css",r.HTML="html",r.JSON="json",r.XML="xml",r.YAML="yaml",r.CSV="csv",r.LOG="log",r.PYTHON="python",r.JAVA="java",r.CPP="cpp",r.PHP="php",r.RUBY="ruby",r.GO="go",r.RUST="rust",r.SHELL="shell",r.SQL="sql",r.R="r",r.SCALA="scala",r.KOTLIN="kotlin",r.SWIFT="swift",r.DART="dart",r.VUE="vue",r.SVELTE="svelte",r.LATEX="latex",r.BIBTEX="bibtex",r))(sn||{}),no=(r=>(r.JPG=".jpg",r.JPEG=".jpeg",r.PNG=".png",r.GIF=".gif",r.WEBP=".webp",r.SVG=".svg",r))(no||{}),vh=(r=>(r.MP3=".mp3",r.WAV=".wav",r))(vh||{}),Pf=(r=>(r.PDF=".pdf",r))(Pf||{}),zr=(r=>(r.TXT=".txt",r.MD=".md",r.ADOC=".adoc",r.JS=".js",r.TS=".ts",r.JSX=".jsx",r.TSX=".tsx",r.CSS=".css",r.HTML=".html",r.HTM=".htm",r.JSON=".json",r.XML=".xml",r.YAML=".yaml",r.YML=".yml",r.CSV=".csv",r.LOG=".log",r.PY=".py",r.JAVA=".java",r.CPP=".cpp",r.C=".c",r.H=".h",r.PHP=".php",r.RB=".rb",r.GO=".go",r.RS=".rs",r.SH=".sh",r.BAT=".bat",r.SQL=".sql",r.R=".r",r.SCALA=".scala",r.KT=".kt",r.SWIFT=".swift",r.DART=".dart",r.VUE=".vue",r.SVELTE=".svelte",r.TEX=".tex",r.BIB=".bib",r))(zr||{}),tc=(r=>(r.PDF="application/pdf",r))(tc||{}),Ni=(r=>(r.MP3_MPEG="audio/mpeg",r.MP3="audio/mp3",r.MP4="audio/mp4",r.WAV="audio/wav",r.WEBM="audio/webm",r.WEBM_OPUS="audio/webm;codecs=opus",r))(Ni||{}),ya=(r=>(r.JPEG="image/jpeg",r.PNG="image/png",r.GIF="image/gif",r.WEBP="image/webp",r.SVG="image/svg+xml",r))(ya||{}),Ir=(r=>(r.PLAIN="text/plain",r.MARKDOWN="text/markdown",r.ASCIIDOC="text/asciidoc",r.JAVASCRIPT="text/javascript",r.JAVASCRIPT_APP="application/javascript",r.TYPESCRIPT="text/typescript",r.JSX="text/jsx",r.TSX="text/tsx",r.CSS="text/css",r.HTML="text/html",r.JSON="application/json",r.XML_TEXT="text/xml",r.XML_APP="application/xml",r.YAML_TEXT="text/yaml",r.YAML_APP="application/yaml",r.CSV="text/csv",r.PYTHON="text/x-python",r.JAVA="text/x-java-source",r.CPP_SRC="text/x-c++src",r.C_SRC="text/x-csrc",r.C_HDR="text/x-chdr",r.PHP="text/x-php",r.RUBY="text/x-ruby",r.GO="text/x-go",r.RUST="text/x-rust",r.SHELL="text/x-shellscript",r.BAT="application/x-bat",r.SQL="text/x-sql",r.R="text/x-r",r.SCALA="text/x-scala",r.KOTLIN="text/x-kotlin",r.SWIFT="text/x-swift",r.DART="text/x-dart",r.VUE="text/x-vue",r.SVELTE="text/x-svelte",r.LATEX="text/x-tex",r.BIBTEX="text/x-bibtex",r))(Ir||{});const o4={[Mp.MP3]:{extensions:[vh.MP3],mimeTypes:[Ni.MP3_MPEG,Ni.MP3]},[Mp.WAV]:{extensions:[vh.WAV],mimeTypes:[Ni.WAV]}},l4={[Zc.JPEG]:{extensions:[no.JPG,no.JPEG],mimeTypes:[ya.JPEG]},[Zc.PNG]:{extensions:[no.PNG],mimeTypes:[ya.PNG]},[Zc.GIF]:{extensions:[no.GIF],mimeTypes:[ya.GIF]},[Zc.WEBP]:{extensions:[no.WEBP],mimeTypes:[ya.WEBP]},[Zc.SVG]:{extensions:[no.SVG],mimeTypes:[ya.SVG]}},c4={[s4.PDF]:{extensions:[Pf.PDF],mimeTypes:[tc.PDF]}},u4={[sn.PLAIN_TEXT]:{extensions:[zr.TXT],mimeTypes:[Ir.PLAIN]},[sn.MARKDOWN]:{extensions:[zr.MD],mimeTypes:[Ir.MARKDOWN]},[sn.ASCIIDOC]:{extensions:[zr.ADOC],mimeTypes:[Ir.ASCIIDOC]},[sn.JAVASCRIPT]:{extensions:[zr.JS],mimeTypes:[Ir.JAVASCRIPT,Ir.JAVASCRIPT_APP]},[sn.TYPESCRIPT]:{extensions:[zr.TS],mimeTypes:[Ir.TYPESCRIPT]},[sn.JSX]:{extensions:[zr.JSX],mimeTypes:[Ir.JSX]},[sn.TSX]:{extensions:[zr.TSX],mimeTypes:[Ir.TSX]},[sn.CSS]:{extensions:[zr.CSS],mimeTypes:[Ir.CSS]},[sn.HTML]:{extensions:[zr.HTML,zr.HTM],mimeTypes:[Ir.HTML]},[sn.JSON]:{extensions:[zr.JSON],mimeTypes:[Ir.JSON]},[sn.XML]:{extensions:[zr.XML],mimeTypes:[Ir.XML_TEXT,Ir.XML_APP]},[sn.YAML]:{extensions:[zr.YAML,zr.YML],mimeTypes:[Ir.YAML_TEXT,Ir.YAML_APP]},[sn.CSV]:{extensions:[zr.CSV],mimeTypes:[Ir.CSV]},[sn.LOG]:{extensions:[zr.LOG],mimeTypes:[Ir.PLAIN]},[sn.PYTHON]:{extensions:[zr.PY],mimeTypes:[Ir.PYTHON]},[sn.JAVA]:{extensions:[zr.JAVA],mimeTypes:[Ir.JAVA]},[sn.CPP]:{extensions:[zr.CPP,zr.C,zr.H],mimeTypes:[Ir.CPP_SRC,Ir.C_SRC,Ir.C_HDR]},[sn.PHP]:{extensions:[zr.PHP],mimeTypes:[Ir.PHP]},[sn.RUBY]:{extensions:[zr.RB],mimeTypes:[Ir.RUBY]},[sn.GO]:{extensions:[zr.GO],mimeTypes:[Ir.GO]},[sn.RUST]:{extensions:[zr.RS],mimeTypes:[Ir.RUST]},[sn.SHELL]:{extensions:[zr.SH,zr.BAT],mimeTypes:[Ir.SHELL,Ir.BAT]},[sn.SQL]:{extensions:[zr.SQL],mimeTypes:[Ir.SQL]},[sn.R]:{extensions:[zr.R],mimeTypes:[Ir.R]},[sn.SCALA]:{extensions:[zr.SCALA],mimeTypes:[Ir.SCALA]},[sn.KOTLIN]:{extensions:[zr.KT],mimeTypes:[Ir.KOTLIN]},[sn.SWIFT]:{extensions:[zr.SWIFT],mimeTypes:[Ir.SWIFT]},[sn.DART]:{extensions:[zr.DART],mimeTypes:[Ir.DART]},[sn.VUE]:{extensions:[zr.VUE],mimeTypes:[Ir.VUE]},[sn.SVELTE]:{extensions:[zr.SVELTE],mimeTypes:[Ir.SVELTE]},[sn.LATEX]:{extensions:[zr.TEX],mimeTypes:[Ir.LATEX]},[sn.BIBTEX]:{extensions:[zr.BIB],mimeTypes:[Ir.BIBTEX]}};function wa(r){return Object.values(l4).some(e=>e.mimeTypes.includes(r))?an.IMAGE:Object.values(o4).some(e=>e.mimeTypes.includes(r))?an.AUDIO:Object.values(c4).some(e=>e.mimeTypes.includes(r))?an.PDF:Object.values(u4).some(e=>e.mimeTypes.includes(r))?an.TEXT:null}function BE(r){const e=r.toLowerCase().substring(r.lastIndexOf("."));for(const[t,n]of Object.entries(l4))if(n.extensions.includes(e))return`${an.IMAGE}:${t}`;for(const[t,n]of Object.entries(o4))if(n.extensions.includes(e))return`${an.AUDIO}:${t}`;for(const[t,n]of Object.entries(c4))if(n.extensions.includes(e))return`${an.PDF}:${t}`;for(const[t,n]of Object.entries(u4))if(n.extensions.includes(e))return`${an.TEXT}:${t}`;return null}function zE(r,e){return e&&wa(e)?!0:BE(r)!==null}function UE(r){return typeof r=="function"}function yh(r){return r!==null&&typeof r=="object"}const jE=["string","number","bigint","boolean"];function Ip(r){return r==null||jE.includes(typeof r)?!0:Array.isArray(r)?r.every(e=>Ip(e)):typeof r=="object"?Object.getPrototypeOf(r)===Object.prototype:!1}const wh=Symbol("box"),Op=Symbol("is-writable");function HE(r){return yh(r)&&wh in r}function qE(r){return ke.isBox(r)&&Op in r}function ke(r){let e=ue(Mr(r));return{[wh]:!0,[Op]:!0,get current(){return g(e)},set current(t){I(e,t,!0)}}}function GE(r,e){const t=B(r);return e?{[wh]:!0,[Op]:!0,get current(){return g(t)},set current(n){e(n)}}:{[wh]:!0,get current(){return r()}}}function $E(r){return ke.isBox(r)?r:UE(r)?ke.with(r):ke(r)}function WE(r){return Object.entries(r).reduce((e,[t,n])=>ke.isBox(n)?(ke.isWritableBox(n)?Object.defineProperty(e,t,{get(){return n.current},set(i){n.current=i}}):Object.defineProperty(e,t,{get(){return n.current}}),e):Object.assign(e,{[t]:n}),{})}function VE(r){return ke.isWritableBox(r)?{[wh]:!0,get current(){return r.current}}:r}ke.from=$E,ke.with=GE,ke.flatten=WE,ke.readonly=VE,ke.isBox=HE,ke.isWritableBox=qE;function h4(...r){return function(e){for(const t of r)if(t){if(e.defaultPrevented)return;typeof t=="function"?t.call(this,e):t.current?.call(this,e)}}}var XE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var eu={},Np,d4;function KE(){if(d4)return Np;d4=1;var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,o=/^\s+|\s+$/g,l=`
`,c="/",u="*",h="",d="comment",f="declaration";Np=function(m,y){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];y=y||{};var v=1,_=1;function S(Q){var K=Q.match(e);K&&(v+=K.length);var ie=Q.lastIndexOf(l);_=~ie?Q.length-ie:_+Q.length}function A(){var Q={line:v,column:_};return function(K){return K.position=new C(Q),N(),K}}function C(Q){this.start=Q,this.end={line:v,column:_},this.source=y.source}C.prototype.content=m;function k(Q){var K=new Error(y.source+":"+v+":"+_+": "+Q);if(K.reason=Q,K.filename=y.source,K.line=v,K.column=_,K.source=m,!y.silent)throw K}function M(Q){var K=Q.exec(m);if(K){var ie=K[0];return S(ie),m=m.slice(ie.length),K}}function N(){M(t)}function F(Q){var K;for(Q=Q||[];K=z();)K!==!1&&Q.push(K);return Q}function z(){var Q=A();if(!(c!=m.charAt(0)||u!=m.charAt(1))){for(var K=2;h!=m.charAt(K)&&(u!=m.charAt(K)||c!=m.charAt(K+1));)++K;if(K+=2,h===m.charAt(K-1))return k("End of comment missing");var ie=m.slice(2,K-2);return _+=2,S(ie),m=m.slice(K),_+=2,Q({type:d,comment:ie})}}function W(){var Q=A(),K=M(n);if(K){if(z(),!M(i))return k("property missing ':'");var ie=M(a),L=Q({type:f,property:p(K[0].replace(r,h)),value:ie?p(ie[0].replace(r,h)):h});return M(s),L}}function V(){var Q=[];F(Q);for(var K;K=W();)K!==!1&&(Q.push(K),F(Q));return Q}return N(),V()};function p(m){return m?m.replace(o,h):h}return Np}var f4;function YE(){if(f4)return eu;f4=1;var r=eu&&eu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(eu,"__esModule",{value:!0}),eu.default=t;var e=r(KE());function t(n,i){var a=null;if(!n||typeof n!="string")return a;var s=(0,e.default)(n),o=typeof i=="function";return s.forEach(function(l){if(l.type==="declaration"){var c=l.property,u=l.value;o?i(c,u,l):u&&(a=a||{},a[c]=u)}}),a}return eu}var QE=YE();const g4=Rf(QE),JE=g4.default||g4,ZE=/\d/,eT=["-","_","/","."];function tT(r=""){if(!ZE.test(r))return r!==r.toLowerCase()}function rT(r){const e=[];let t="",n,i;for(const a of r){const s=eT.includes(a);if(s===!0){e.push(t),t="",n=void 0;continue}const o=tT(a);if(i===!1){if(n===!1&&o===!0){e.push(t),t=a,n=o;continue}if(n===!0&&o===!1&&t.length>1){const l=t.at(-1);e.push(t.slice(0,Math.max(0,t.length-1))),t=l+a,n=o;continue}}t+=a,n=o,i=s}return e.push(t),e}function p4(r){return r?rT(r).map(e=>iT(e)).join(""):""}function nT(r){return aT(p4(r||""))}function iT(r){return r?r[0].toUpperCase()+r.slice(1):""}function aT(r){return r?r[0].toLowerCase()+r.slice(1):""}function xh(r){if(!r)return{};const e={};function t(n,i){if(n.startsWith("-moz-")||n.startsWith("-webkit-")||n.startsWith("-ms-")||n.startsWith("-o-")){e[p4(n)]=i;return}if(n.startsWith("--")){e[n]=i;return}e[nT(n)]=i}return JE(r,t),e}function io(...r){return(...e)=>{for(const t of r)typeof t=="function"&&t(...e)}}function sT(r,e){const t=RegExp(r,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(t)?n.replace(t,e):n}}const oT=sT(/[A-Z]/,r=>`-${r.toLowerCase()}`);function lT(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError(`expected an argument of type object, but got ${typeof r}`);return Object.keys(r).map(e=>`${oT(e)}: ${r[e]};`).join(`
`)}function Pp(r={}){return lT(r).replace(`
`," ")}const cT=Pp({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"}),uT=["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"],hT=new Set(uT);function dT(r){return hT.has(r)}function dr(...r){const e={...r[0]};for(let t=1;t<r.length;t++){const n=r[t];if(n){for(const i of Object.keys(n)){const a=e[i],s=n[i],o=typeof a=="function",l=typeof s=="function";if(o&&dT(i)){const c=a,u=s;e[i]=h4(c,u)}else if(o&&l)e[i]=io(a,s);else if(i==="class"){const c=Ip(a),u=Ip(s);c&&u?e[i]=lh(a,s):c?e[i]=lh(a):u&&(e[i]=lh(s))}else if(i==="style"){const c=typeof a=="object",u=typeof s=="object",h=typeof a=="string",d=typeof s=="string";if(c&&u)e[i]={...a,...s};else if(c&&d){const f=xh(s);e[i]={...a,...f}}else if(h&&u){const f=xh(a);e[i]={...f,...s}}else if(h&&d){const f=xh(a),p=xh(s);e[i]={...f,...p}}else c?e[i]=a:u?e[i]=s:h?e[i]=a:d&&(e[i]=s)}else e[i]=s!==void 0?s:a}for(const i of Object.getOwnPropertySymbols(n)){const a=e[i],s=n[i];e[i]=s!==void 0?s:a}}}return typeof e.style=="object"&&(e.style=Pp(e.style).replaceAll(`
`," ")),e.hidden!==!0&&(e.hidden=void 0,delete e.hidden),e.disabled!==!0&&(e.disabled=void 0,delete e.disabled),e}const m4=typeof window<"u"?window:void 0;function fT(r){let e=r.activeElement;for(;e?.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}var gT=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],pT=["difference","intersection","symmetricDifference","union"],b4=!1;class ao extends Set{#e=new Map;#t=ue(0);#r=ue(0);#n=ss||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#r.v=super.size}b4||this.#i()}#a(e){return ss===this.#n?ue(e):Bo(e)}#i(){b4=!0;var e=ao.prototype,t=Set.prototype;for(const n of gT)e[n]=function(...i){return g(this.#t),t[n].apply(this,i)};for(const n of pT)e[n]=function(...i){g(this.#t);var a=t[n].apply(this,i);return new ao(a)}}has(e){var t=super.has(e),n=this.#e,i=n.get(e);if(i===void 0){if(!t)return g(this.#t),!1;i=this.#a(!0),n.set(e,i)}return g(i),t}add(e){return super.has(e)||(super.add(e),I(this.#r,super.size),Fa(this.#t)),this}delete(e){var t=super.delete(e),n=this.#e,i=n.get(e);return i!==void 0&&(n.delete(e),I(i,!1)),t&&(I(this.#r,super.size),Fa(this.#t)),t}clear(){if(super.size!==0){super.clear();var e=this.#e;for(var t of e.values())I(t,!1);e.clear(),I(this.#r,0),Fa(this.#t)}}keys(){return this.values()}values(){return g(this.#t),super.values()}entries(){return g(this.#t),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return g(this.#r)}}class Ff extends Map{#e=new Map;#t=ue(0);#r=ue(0);#n=ss||-1;constructor(e){if(super(),e){for(var[t,n]of e)super.set(t,n);this.#r.v=super.size}}#a(e){return ss===this.#n?ue(e):Bo(e)}has(e){var t=this.#e,n=t.get(e);if(n===void 0){var i=super.get(e);if(i!==void 0)n=this.#a(0),t.set(e,n);else return g(this.#t),!1}return g(n),!0}forEach(e,t){this.#i(),super.forEach(e,t)}get(e){var t=this.#e,n=t.get(e);if(n===void 0){var i=super.get(e);if(i!==void 0)n=this.#a(0),t.set(e,n);else{g(this.#t);return}}return g(n),super.get(e)}set(e,t){var n=this.#e,i=n.get(e),a=super.get(e),s=super.set(e,t),o=this.#t;if(i===void 0)i=this.#a(0),n.set(e,i),I(this.#r,super.size),Fa(o);else if(a!==t){Fa(i);var l=o.reactions===null?null:new Set(o.reactions),c=l===null||!i.reactions?.every(u=>l.has(u));c&&Fa(o)}return s}delete(e){var t=this.#e,n=t.get(e),i=super.delete(e);return n!==void 0&&(t.delete(e),I(this.#r,super.size),I(n,-1),Fa(this.#t)),i}clear(){if(super.size!==0){super.clear();var e=this.#e;I(this.#r,0);for(var t of e.values())I(t,-1);Fa(this.#t),e.clear()}}#i(){g(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var n=this.#a(0);e.set(t,n)}}for([,n]of this.#e)g(n)}keys(){return g(this.#t),super.keys()}values(){return this.#i(),super.values()}entries(){return this.#i(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return g(this.#r),super.size}}class mT{#e;#t;constructor(e,t){this.#e=e,this.#t=Vl(t)}get current(){return this.#t(),this.#e()}}const bT=/\(.+\)/,vT=new Set(["all","print","screen","and","or","not","only"]);class v4 extends mT{constructor(e,t){let n=bT.test(e)||e.split(/[\s,]+/).some(a=>vT.has(a.trim()))?e:`(${e})`;const i=window.matchMedia(n);super(()=>i.matches,a=>Zr(i,"change",a))}}let yT=class{#e;#t;constructor(e={}){const{window:t=m4,document:n=t?.document}=e;t!==void 0&&(this.#e=n,this.#t=Vl(i=>{const a=Zr(t,"focusin",i),s=Zr(t,"focusout",i);return()=>{a(),s()}}))}get current(){return this.#t?.(),this.#e?fT(this.#e):null}};new yT;function y4(r){return typeof r=="function"}function wT(r,e){if(y4(r)){const n=r();return n===void 0?e:n}return r===void 0?e:r}let Kn=class{#e;#t;constructor(e){this.#e=e,this.#t=Symbol(e)}get key(){return this.#t}exists(){return Ng(this.#t)}get(){const e=Bc(this.#t);if(e===void 0)throw new Error(`Context "${this.#e}" not found`);return e}getOr(e){const t=Bc(this.#t);return t===void 0?e:t}set(e){return Zd(this.#t,e)}};function Df(r,e){let t=ue(null);const n=B(()=>wT(e,250));function i(...a){if(g(t))g(t).timeout&&clearTimeout(g(t).timeout);else{let s,o;const l=new Promise((c,u)=>{s=c,o=u});I(t,{timeout:null,runner:null,promise:l,resolve:s,reject:o},!0)}return g(t).runner=async()=>{if(!g(t))return;const s=g(t);I(t,null);try{s.resolve(await r.apply(this,a))}catch(o){s.reject(o)}},g(t).timeout=setTimeout(g(t).runner,g(n)),g(t).promise}return i.cancel=async()=>{(!g(t)||g(t).timeout===null)&&(await new Promise(a=>setTimeout(a,0)),!g(t)||g(t).timeout===null)||(clearTimeout(g(t).timeout),g(t).reject("Cancelled"),I(t,null))},i.runScheduledNow=async()=>{(!g(t)||!g(t).timeout)&&(await new Promise(a=>setTimeout(a,0)),!g(t)||!g(t).timeout)||(clearTimeout(g(t).timeout),g(t).timeout=null,await g(t).runner?.())},Object.defineProperty(i,"pending",{enumerable:!0,get(){return!!g(t)?.timeout}}),i}function xT(r,e){switch(r){case"post":Nt(e);break;case"pre":Ii(e);break}}function w4(r,e,t,n={}){const{lazy:i=!1}=n;let a=!i,s=Array.isArray(r)?[]:void 0;xT(e,()=>{const o=Array.isArray(r)?r.map(c=>c()):r();if(!a){a=!0,s=o;return}const l=mn(()=>t(o,s));return s=o,l})}function $r(r,e,t){w4(r,"post",e,t)}function _T(r,e,t){w4(r,"pre",e,t)}$r.pre=_T;function x4(r){return y4(r)?r():r}class ST{#e={width:0,height:0};#t=!1;#r;#n;#a;#i=B(()=>(g(this.#o)?.(),this.getSize().width));#s=B(()=>(g(this.#o)?.(),this.getSize().height));#o=B(()=>{const e=x4(this.#n);if(e)return Vl(t=>{if(!this.#a)return;const n=new this.#a.ResizeObserver(i=>{this.#t=!0;for(const a of i){const s=this.#r.box==="content-box"?a.contentBoxSize:a.borderBoxSize,o=Array.isArray(s)?s:[s];this.#e.width=o.reduce((l,c)=>Math.max(l,c.inlineSize),0),this.#e.height=o.reduce((l,c)=>Math.max(l,c.blockSize),0)}t()});return n.observe(e),()=>{this.#t=!1,n.disconnect()}})});constructor(e,t={box:"border-box"}){this.#a=t.window??m4,this.#r=t,this.#n=e,this.#e={width:0,height:0}}calculateSize(){const e=x4(this.#n);if(!e||!this.#a)return;const t=e.offsetWidth,n=e.offsetHeight;if(this.#r.box==="border-box")return{width:t,height:n};const i=this.#a.getComputedStyle(e),a=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),s=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),o=parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),l=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),c=t-a-o,u=n-s-l;return{width:c,height:u}}getSize(){return this.#t?this.#e:this.calculateSize()??this.#e}get current(){return g(this.#o)?.(),this.getSize()}get width(){return g(this.#i)}get height(){return g(this.#s)}}class Rp{#e=ue(!1);constructor(){Nt(()=>(mn(()=>I(this.#e,!0)),()=>{I(this.#e,!1)}))}get current(){return g(this.#e)}}class _4{#e=ue(void 0);constructor(e,t){t!==void 0&&I(this.#e,t,!0),$r(()=>e(),(n,i)=>{I(this.#e,i,!0)})}get current(){return g(this.#e)}}function Wo(r){Nt(()=>()=>{r()})}function tu(r,e){return setTimeout(e,r)}function ja(r){jo().then(r)}function Fp(r){Nt(()=>mn(()=>r()))}const kT=1,AT=9,CT=11;function Dp(r){return yh(r)&&r.nodeType===kT&&typeof r.nodeName=="string"}function S4(r){return yh(r)&&r.nodeType===AT}function ET(r){return yh(r)&&r.constructor?.name==="VisualViewport"}function TT(r){return yh(r)&&r.nodeType!==void 0}function k4(r){return TT(r)&&r.nodeType===CT&&"host"in r}function MT(r,e){if(!r||!e||!Dp(r)||!Dp(e))return!1;const t=e.getRootNode?.();if(r===e||r.contains(e))return!0;if(t&&k4(t)){let n=e;for(;n;){if(r===n)return!0;n=n.parentNode||n.host}}return!1}function _h(r){return S4(r)?r:ET(r)?r.document:r?.ownerDocument??document}function Lf(r){return k4(r)?Lf(r.host):S4(r)?r.defaultView??window:Dp(r)?r.ownerDocument?.defaultView??window:window}function IT(r){let e=r.activeElement;for(;e?.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}class Vo{element;#e=B(()=>this.element.current?this.element.current.getRootNode()??document:document);get root(){return g(this.#e)}set root(e){I(this.#e,e)}constructor(e){typeof e=="function"?this.element=ke.with(e):this.element=e}getDocument=()=>_h(this.root);getWindow=()=>this.getDocument().defaultView??window;getActiveElement=()=>IT(this.root);isActiveElement=e=>e===this.getActiveElement();getElementById(e){return this.root.getElementById(e)}querySelector=e=>this.root?this.root.querySelector(e):null;querySelectorAll=e=>this.root?this.root.querySelectorAll(e):[];setTimeout=(e,t)=>this.getWindow().setTimeout(e,t);clearTimeout=e=>this.getWindow().clearTimeout(e)}function on(r,e){return{[HA()]:t=>ke.isBox(r)?(r.current=t,mn(()=>e?.(t)),()=>{"isConnected"in t&&t.isConnected||(r.current=null,e?.(null))}):(r(t),mn(()=>e?.(t)),()=>{"isConnected"in t&&t.isConnected||(r(null),e?.(null))})}}function Xo(r){return r?"open":"closed"}function OT(r){return r?"true":"false"}function Lp(r){return r?"true":"false"}function xs(r){return r?"":void 0}function NT(r){return r?"true":"false"}function PT(r,e){return e?"mixed":r?"true":"false"}function zse(r){return r}function RT(r){return r?"true":void 0}function FT(r){return r?!0:void 0}function DT(r){return r?!0:void 0}class LT{#e;#t;attrs;constructor(e){this.#e=e.getVariant?e.getVariant():null,this.#t=this.#e?`data-${this.#e}-`:`data-${e.component}-`,this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(e.parts.map(t=>[t,this.getAttr(t)]))}getAttr(e,t){return t?`data-${t}-${e}`:`${this.#t}${e}`}selector(e,t){return`[${this.getAttr(e,t)}]`}}function Ko(r){const e=new LT(r);return{...e.attrs,selector:e.selector,getAttr:e.getAttr}}const _s="ArrowDown",Bp="ArrowLeft",zp="ArrowRight",Ss="ArrowUp",Bf="End",Yo="Enter",BT="Escape",zf="Home",Up="PageDown",jp="PageUp",ks=" ",Hp="Tab";function zT(r){return window.getComputedStyle(r).getPropertyValue("direction")}function UT(r="ltr",e="horizontal"){return{horizontal:r==="rtl"?Bp:zp,vertical:_s}[e]}function jT(r="ltr",e="horizontal"){return{horizontal:r==="rtl"?zp:Bp,vertical:Ss}[e]}function HT(r="ltr",e="horizontal"){return["ltr","rtl"].includes(r)||(r="ltr"),["horizontal","vertical"].includes(e)||(e="horizontal"),{nextKey:UT(r,e),prevKey:jT(r,e)}}class qT{#e;#t=ke(null);constructor(e){this.#e=e}getCandidateNodes(){return this.#e.rootNode.current?this.#e.candidateSelector?Array.from(this.#e.rootNode.current.querySelectorAll(this.#e.candidateSelector)):this.#e.candidateAttr?Array.from(this.#e.rootNode.current.querySelectorAll(`[${this.#e.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const e=this.getCandidateNodes();e.length&&e[0]?.focus()}handleKeydown(e,t,n=!1){const i=this.#e.rootNode.current;if(!i||!e)return;const a=this.getCandidateNodes();if(!a.length)return;const s=a.indexOf(e),o=zT(i),{nextKey:l,prevKey:c}=HT(o,this.#e.orientation.current),u=this.#e.loop.current,h={[l]:s+1,[c]:s-1,[zf]:0,[Bf]:a.length-1};if(n){const p=l===_s?zp:_s,m=c===Ss?Bp:Ss;h[p]=s+1,h[m]=s-1}let d=h[t.key];if(d===void 0)return;t.preventDefault(),d<0&&u?d=a.length-1:d===a.length&&u&&(d=0);const f=a[d];if(f)return f.focus(),this.#t.current=f.id,this.#e.onCandidateFocus?.(f),f}getTabIndex(e){const t=this.getCandidateNodes(),n=this.#t.current!==null;return e&&!n&&t[0]===e?(this.#t.current=e.id,0):e?.id===this.#t.current?0:-1}setCurrentTabStopId(e){this.#t.current=e}}function xr(){}function pn(r,e){return`bits-${r}`}class A4{state;#e;constructor(e,t){this.state=ke(e),this.#e=t,this.dispatch=this.dispatch.bind(this)}#t(e){return this.#e[this.state.current][e]??this.state.current}dispatch(e){this.state.current=this.#t(e)}}const GT={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}};class $T{opts;#e=ue("none");get prevAnimationNameState(){return g(this.#e)}set prevAnimationNameState(e){I(this.#e,e,!0)}#t=ue(Mr({}));get styles(){return g(this.#t)}set styles(e){I(this.#t,e,!0)}initialStatus;previousPresent;machine;present;constructor(e){this.opts=e,this.present=this.opts.open,this.initialStatus=e.open.current?"mounted":"unmounted",this.previousPresent=new _4(()=>this.present.current),this.machine=new A4(this.initialStatus,GT),this.handleAnimationEnd=this.handleAnimationEnd.bind(this),this.handleAnimationStart=this.handleAnimationStart.bind(this),WT(this),VT(this),XT(this)}handleAnimationEnd(e){if(!this.opts.ref.current)return;const t=Uf(this.opts.ref.current),n=t.includes(e.animationName)||t==="none";e.target===this.opts.ref.current&&n&&this.machine.dispatch("ANIMATION_END")}handleAnimationStart(e){this.opts.ref.current&&e.target===this.opts.ref.current&&(this.prevAnimationNameState=Uf(this.opts.ref.current))}#r=B(()=>["mounted","unmountSuspended"].includes(this.machine.state.current));get isPresent(){return g(this.#r)}set isPresent(e){I(this.#r,e)}}function WT(r){$r(()=>r.present.current,()=>{if(!r.opts.ref.current||!(r.present.current!==r.previousPresent.current))return;const t=r.prevAnimationNameState,n=Uf(r.opts.ref.current);if(r.present.current)r.machine.dispatch("MOUNT");else if(n==="none"||r.styles.display==="none")r.machine.dispatch("UNMOUNT");else{const i=t!==n;r.previousPresent.current&&i?r.machine.dispatch("ANIMATION_OUT"):r.machine.dispatch("UNMOUNT")}})}function VT(r){$r(()=>r.machine.state.current,()=>{if(!r.opts.ref.current)return;const e=Uf(r.opts.ref.current);r.prevAnimationNameState=r.machine.state.current==="mounted"?e:"none"})}function XT(r){$r(()=>r.opts.ref.current,()=>{if(r.opts.ref.current)return r.styles=getComputedStyle(r.opts.ref.current),io(Zr(r.opts.ref.current,"animationstart",r.handleAnimationStart),Zr(r.opts.ref.current,"animationcancel",r.handleAnimationEnd),Zr(r.opts.ref.current,"animationend",r.handleAnimationEnd))})}function Uf(r){return r&&getComputedStyle(r).animationName||"none"}function so(r,e){ye(e,!0);const t=new $T({open:ke.with(()=>e.open),ref:e.ref});var n=Z(),i=P(n);{var a=s=>{var o=Z(),l=P(o);Re(l,()=>e.presence??je,()=>({present:t.isPresent})),w(s,o)};le(i,s=>{(e.forceMount||e.open||t.isPresent)&&s(a)})}w(r,n),we()}class KT{#e;#t=void 0;#r=!1;constructor(e){this.#e=e,Wo(()=>this.#n())}#n(){this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=void 0),this.#r=!1}run(e){if(this.#r)return;this.#n(),this.#r=!0;const t=this.#e.ref.current;if(!t){this.#r=!1;return}if(typeof t.getAnimations!="function"){this.#a(e);return}this.#t=window.requestAnimationFrame(()=>{const n=t.getAnimations();if(n.length===0){this.#a(e);return}Promise.allSettled(n.map(i=>i.finished)).then(()=>{this.#a(e)})})}#a(e){const t=()=>{e(),this.#r=!1};this.#e.afterTick?ja(t):t()}}class Sh{#e;#t;#r;constructor(e){this.#e=e,this.#t=e.enabled??!0,this.#r=new KT({ref:this.#e.ref,afterTick:this.#e.open}),$r([()=>this.#e.open.current],([t])=>{this.#t&&this.#r.run(()=>{t===this.#e.open.current&&this.#e.onComplete()})})}}const YT=Ko({component:"dialog",parts:["content","trigger","overlay","title","description","close","cancel","action"]}),Qo=new Kn("Dialog.Root | AlertDialog.Root");class jf{static create(e){return Qo.set(new jf(e))}opts;#e=ue(null);get triggerNode(){return g(this.#e)}set triggerNode(e){I(this.#e,e,!0)}#t=ue(null);get contentNode(){return g(this.#t)}set contentNode(e){I(this.#t,e,!0)}#r=ue(null);get descriptionNode(){return g(this.#r)}set descriptionNode(e){I(this.#r,e,!0)}#n=ue(void 0);get contentId(){return g(this.#n)}set contentId(e){I(this.#n,e,!0)}#a=ue(void 0);get titleId(){return g(this.#a)}set titleId(e){I(this.#a,e,!0)}#i=ue(void 0);get triggerId(){return g(this.#i)}set triggerId(e){I(this.#i,e,!0)}#s=ue(void 0);get descriptionId(){return g(this.#s)}set descriptionId(e){I(this.#s,e,!0)}#o=ue(null);get cancelNode(){return g(this.#o)}set cancelNode(e){I(this.#o,e,!0)}constructor(e){this.opts=e,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),new Sh({ref:ke.with(()=>this.contentNode),open:this.opts.open,enabled:!0,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}getBitsAttr=e=>YT.getAttr(e,this.opts.variant.current);#l=B(()=>({"data-state":Xo(this.opts.open.current)}));get sharedProps(){return g(this.#l)}set sharedProps(e){I(this.#l,e)}}class qp{static create(e){return new qp(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||(e.key===ks||e.key===Yo)&&(e.preventDefault(),this.root.handleClose())}#e=B(()=>({id:this.opts.id.current,[this.root.getBitsAttr(this.opts.variant.current)]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:this.opts.disabled.current?!0:void 0,tabindex:0,...this.root.sharedProps,...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}class Gp{static create(e){return new Gp(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref)}#e=B(()=>({id:this.opts.id.current,[this.root.getBitsAttr("action")]:"",...this.root.sharedProps,...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}class $p{static create(e){return new $p(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.root.titleId=this.opts.id.current,this.attachment=on(this.opts.ref),$r.pre(()=>this.opts.id.current,n=>{this.root.titleId=n})}#e=B(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,[this.root.getBitsAttr("title")]:"",...this.root.sharedProps,...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}class Wp{static create(e){return new Wp(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.root.descriptionId=this.opts.id.current,this.attachment=on(this.opts.ref,n=>{this.root.descriptionNode=n}),$r.pre(()=>this.opts.id.current,n=>{this.root.descriptionId=n})}#e=B(()=>({id:this.opts.id.current,[this.root.getBitsAttr("description")]:"",...this.root.sharedProps,...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}class Hf{static create(e){return new Hf(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref,n=>{this.root.contentNode=n,this.root.contentId=n?.id})}#e=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return g(this.#e)}set snippetProps(e){I(this.#e,e)}#t=B(()=>({id:this.opts.id.current,role:this.root.opts.variant.current==="alert-dialog"?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.getBitsAttr("content")]:"",style:{pointerEvents:"auto",outline:this.root.opts.variant.current==="alert-dialog"?"none":void 0},tabindex:this.root.opts.variant.current==="alert-dialog"?-1:void 0,...this.root.sharedProps,...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class Vp{static create(e){return new Vp(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref)}#e=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return g(this.#e)}set snippetProps(e){I(this.#e,e)}#t=B(()=>({id:this.opts.id.current,[this.root.getBitsAttr("overlay")]:"",style:{pointerEvents:"auto"},...this.root.sharedProps,...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class Xp{static create(e){return new Xp(e,Qo.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref,n=>this.root.cancelNode=n),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||(e.key===ks||e.key===Yo)&&(e.preventDefault(),this.root.handleClose())}#e=B(()=>({id:this.opts.id.current,[this.root.getBitsAttr("cancel")]:"",onclick:this.onclick,onkeydown:this.onkeydown,tabindex:0,...this.root.sharedProps,...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}function QT(r,e){ye(e,!0);let t=U(e,"open",15,!1),n=U(e,"onOpenChange",3,xr),i=U(e,"onOpenChangeComplete",3,xr);jf.create({variant:ke.with(()=>"alert-dialog"),open:ke.with(()=>t(),o=>{t(o),n()(o)}),onOpenChangeComplete:ke.with(()=>i())});var a=Z(),s=P(a);Re(s,()=>e.children??je),w(r,a),we()}var JT=$("<div><!></div>");function Kp(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"level",3,2),s=qe(e,["$$slots","$$events","$$legacy","id","ref","child","children","level"]);const o=$p.create({id:ke.with(()=>n()),level:ke.with(()=>a()),ref:ke.with(()=>i(),f=>i(f))}),l=B(()=>dr(s,o.props));var c=Z(),u=P(c);{var h=f=>{var p=Z(),m=P(p);Re(m,()=>e.child,()=>({props:g(l)})),w(f,p)},d=f=>{var p=JT();Ht(p,()=>({...g(l)}));var m=G(p);Re(m,()=>e.children??je),j(p),w(f,p)};le(u,f=>{e.child?f(h):f(d,!1)})}w(r,c),we()}var ZT=$("<button><!></button>");function eM(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=qe(e,["$$slots","$$events","$$legacy","children","child","id","ref"]);const s=Gp.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),d=>i(d))}),o=B(()=>dr(a,s.props));var l=Z(),c=P(l);{var u=d=>{var f=Z(),p=P(f);Re(p,()=>e.child,()=>({props:g(o)})),w(d,f)},h=d=>{var f=ZT();Ht(f,()=>({...g(o)}));var p=G(f);Re(p,()=>e.children??je),j(f),w(d,f)};le(c,d=>{e.child?d(u):d(h,!1)})}w(r,l),we()}var tM=$("<button><!></button>");function rM(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"disabled",3,!1),s=qe(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const o=Xp.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),f=>i(f)),disabled:ke.with(()=>!!a())}),l=B(()=>dr(s,o.props));var c=Z(),u=P(c);{var h=f=>{var p=Z(),m=P(p);Re(m,()=>e.child,()=>({props:g(l)})),w(f,p)},d=f=>{var p=tM();Ht(p,()=>({...g(l)}));var m=G(p);Re(m,()=>e.children??je),j(p),w(f,p)};le(u,f=>{e.child?f(h):f(d,!1)})}w(r,c),we()}function nM(r,e){var t=Z(),n=P(t);rC(n,()=>e.children,i=>{var a=Z(),s=P(a);Re(s,()=>e.children??je),w(i,a)}),w(r,t)}const Yp=typeof document<"u",Qp=iM();function iM(){return Yp&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Jo(r){return r instanceof HTMLElement}function kh(r){return r instanceof Element}function aM(r){return r instanceof Element||r instanceof SVGElement}function sM(r){return r.matches(":focus-visible")}function oM(r){return r!==null}function lM(r){return r instanceof HTMLInputElement&&"select"in r}const cM=new Kn("BitsConfig");function uM(){const r=new hM(null,{});return cM.getOr(r).opts}class hM{opts;constructor(e,t){const n=dM(e,t);this.opts={defaultPortalTo:n(i=>i.defaultPortalTo),defaultLocale:n(i=>i.defaultLocale)}}}function dM(r,e){return t=>ke.with(()=>{const i=t(e)?.current;if(i!==void 0)return i;if(r!==null)return t(r.opts)?.current})}function fM(r,e){return t=>{const n=uM();return ke.with(()=>{const i=t();if(i!==void 0)return i;const a=r(n).current;return a!==void 0?a:e})}}const gM=fM(r=>r.defaultPortalTo,"body");function Zo(r,e){ye(e,!0);const t=gM(()=>e.to),n=k5();let i=B(a);function a(){if(!Yp||e.disabled)return null;let h=null;return typeof t.current=="string"?h=document.querySelector(t.current):h=t.current,h}let s;function o(){s&&(Vg(s),s=null)}$r([()=>g(i),()=>e.disabled],([h,d])=>{if(!h||d){o();return}return s=pf(nM,{target:h,props:{children:e.children},context:n}),()=>{o()}});var l=Z(),c=P(l);{var u=h=>{var d=Z(),f=P(d);Re(f,()=>e.children??je),w(h,d)};le(c,h=>{e.disabled&&h(u)})}w(r,l),we()}function Ah(r,e,t,n){const i=Array.isArray(e)?e:[e];return i.forEach(a=>r.addEventListener(a,t,n)),()=>{i.forEach(a=>r.removeEventListener(a,t,n))}}class pM{eventName;options;constructor(e,t={bubbles:!0,cancelable:!0}){this.eventName=e,this.options=t}createEvent(e){return new CustomEvent(this.eventName,{...this.options,detail:e})}dispatch(e,t){const n=this.createEvent(t);return e.dispatchEvent(n),n}listen(e,t,n){const i=a=>{t(a)};return Zr(e,this.eventName,i,n)}}function Jp(r,e=500){let t=null;const n=(...i)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{r(...i)},e)};return n.destroy=()=>{t!==null&&(clearTimeout(t),t=null)},n}function C4(r,e){return r===e||r.contains(e)}function E4(r){return r?.ownerDocument??document}function mM(r,e){const{clientX:t,clientY:n}=r,i=e.getBoundingClientRect();return t<i.left||t>i.right||n<i.top||n>i.bottom}globalThis.bitsDismissableLayers??=new Map;class Zp{static create(e){return new Zp(e)}opts;#e;#t;#r={pointerdown:!1};#n=!1;#a=!1;#i=void 0;#s;#o=xr;constructor(e){this.opts=e,this.#t=e.interactOutsideBehavior,this.#e=e.onInteractOutside,this.#s=e.onFocusOutside,Nt(()=>{this.#i=E4(this.opts.ref.current)});let t=xr;const n=()=>{this.#m(),globalThis.bitsDismissableLayers.delete(this),this.#u.destroy(),t()};$r([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(!(!this.opts.enabled.current||!this.opts.ref.current))return tu(1,()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,this.#t),t(),t=this.#c())}),n}),Wo(()=>{this.#m.destroy(),globalThis.bitsDismissableLayers.delete(this),this.#u.destroy(),this.#o(),t()})}#l=e=>{e.defaultPrevented||this.opts.ref.current&&ja(()=>{!this.opts.ref.current||this.#d(e.target)||e.target&&!this.#a&&this.#s.current?.(e)})};#c(){return io(Zr(this.#i,"pointerdown",io(this.#g,this.#f),{capture:!0}),Zr(this.#i,"pointerdown",io(this.#p,this.#u)),Zr(this.#i,"focusin",this.#l))}#h=e=>{let t=e;t.defaultPrevented&&(t=T4(e)),this.#e.current(e)};#u=Jp(e=>{if(!this.opts.ref.current){this.#o();return}const t=this.opts.isValidEvent.current(e,this.opts.ref.current)||yM(e,this.opts.ref.current);if(!this.#n||this.#y()||!t){this.#o();return}let n=e;if(n.defaultPrevented&&(n=T4(n)),this.#t.current!=="close"&&this.#t.current!=="defer-otherwise-close"){this.#o();return}e.pointerType==="touch"?(this.#o(),this.#o=Ah(this.#i,"click",this.#h,{once:!0})):this.#e.current(n)},10);#g=e=>{this.#r[e.type]=!0};#p=e=>{this.#r[e.type]=!1};#f=()=>{this.opts.ref.current&&(this.#n=vM(this.opts.ref.current))};#d=e=>this.opts.ref.current?C4(this.opts.ref.current,e):!1;#m=Jp(()=>{for(const e in this.#r)this.#r[e]=!1;this.#n=!1},20);#y(){return Object.values(this.#r).some(Boolean)}#b=()=>{this.#a=!0};#w=()=>{this.#a=!1};props={onfocuscapture:this.#b,onblurcapture:this.#w}}function bM(r){return r.findLast(([e,{current:t}])=>t==="close"||t==="ignore")}function vM(r){const e=[...globalThis.bitsDismissableLayers],t=bM(e);if(t)return t[0].opts.ref.current===r;const[n]=e[0];return n.opts.ref.current===r}function yM(r,e){if("button"in r&&r.button>0)return!1;const t=r.target;return kh(t)?E4(t).documentElement.contains(t)&&!C4(e,t)&&mM(r,e):!1}function T4(r){const e=r.currentTarget,t=r.target;let n;r instanceof PointerEvent?n=new PointerEvent(r.type,r):n=new PointerEvent("pointerdown",r);let i=!1;return new Proxy(n,{get:(s,o)=>o==="currentTarget"?e:o==="target"?t:o==="preventDefault"?()=>{i=!0,typeof s.preventDefault=="function"&&s.preventDefault()}:o==="defaultPrevented"?i:o in s?s[o]:r[o]})}function em(r,e){ye(e,!0);let t=U(e,"interactOutsideBehavior",3,"close"),n=U(e,"onInteractOutside",3,xr),i=U(e,"onFocusOutside",3,xr),a=U(e,"isValidEvent",3,()=>!1);const s=Zp.create({id:ke.with(()=>e.id),interactOutsideBehavior:ke.with(()=>t()),onInteractOutside:ke.with(()=>n()),enabled:ke.with(()=>e.enabled),onFocusOutside:ke.with(()=>i()),isValidEvent:ke.with(()=>a()),ref:e.ref});var o=Z(),l=P(o);Re(l,()=>e.children??je,()=>({props:s.props})),w(r,o),we()}globalThis.bitsEscapeLayers??=new Map;class tm{static create(e){return new tm(e)}opts;domContext;constructor(e){this.opts=e,this.domContext=new Vo(this.opts.ref);let t=xr;$r(()=>e.enabled.current,n=>(n&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=this.#e()),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}#e=()=>Zr(this.domContext.getDocument(),"keydown",this.#t,{passive:!1});#t=e=>{if(e.key!==BT||!wM(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const n=this.opts.escapeKeydownBehavior.current;n!=="close"&&n!=="defer-otherwise-close"||this.opts.onEscapeKeydown.current(t)}}function wM(r){const e=[...globalThis.bitsEscapeLayers],t=e.findLast(([i,{current:a}])=>a==="close"||a==="ignore");if(t)return t[0]===r;const[n]=e[0];return n===r}function rm(r,e){ye(e,!0);let t=U(e,"escapeKeydownBehavior",3,"close"),n=U(e,"onEscapeKeydown",3,xr);tm.create({escapeKeydownBehavior:ke.with(()=>t()),onEscapeKeydown:ke.with(()=>n()),enabled:ke.with(()=>e.enabled),ref:e.ref});var i=Z(),a=P(i);Re(a,()=>e.children??je),w(r,i),we()}class nm{static instance;#e=ke([]);#t=new WeakMap;static getInstance(){return this.instance||(this.instance=new nm),this.instance}register(e){const t=this.getActive();t&&t!==e&&t.pause(),this.#e.current=this.#e.current.filter(n=>n!==e),this.#e.current.unshift(e)}unregister(e){this.#e.current=this.#e.current.filter(n=>n!==e);const t=this.getActive();t&&t.resume()}getActive(){return this.#e.current[0]}setFocusMemory(e,t){this.#t.set(e,t)}getFocusMemory(e){return this.#t.get(e)}isActiveScope(e){return this.getActive()===e}}var M4=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],qf=M4.join(","),I4=typeof Element>"u",rc=I4?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Gf=!I4&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r?.ownerDocument},$f=function r(e,t){var n;t===void 0&&(t=!0);var i=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),a=i===""||i==="true",s=a||t&&e&&r(e.parentNode);return s},xM=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},O4=function(e,t,n){if($f(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(qf));return t&&rc.call(e,qf)&&i.unshift(e),i=i.filter(n),i},N4=function r(e,t,n){for(var i=[],a=Array.from(e);a.length;){var s=a.shift();if(!$f(s,!1))if(s.tagName==="SLOT"){var o=s.assignedElements(),l=o.length?o:s.children,c=r(l,!0,n);n.flatten?i.push.apply(i,c):i.push({scopeParent:s,candidates:c})}else{var u=rc.call(s,qf);u&&n.filter(s)&&(t||!e.includes(s))&&i.push(s);var h=s.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(s),d=!$f(h,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(h&&d){var f=r(h===!0?s.children:h.children,!0,n);n.flatten?i.push.apply(i,f):i.push({scopeParent:s,candidates:f})}else a.unshift.apply(a,s.children)}}return i},P4=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},R4=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||xM(e))&&!P4(e)?0:e.tabIndex},_M=function(e,t){var n=R4(e);return n<0&&t&&!P4(e)?0:n},SM=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},F4=function(e){return e.tagName==="INPUT"},kM=function(e){return F4(e)&&e.type==="hidden"},AM=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},CM=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},EM=function(e){if(!e.name)return!0;var t=e.form||Gf(e),n=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(e.name));else try{i=n(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var a=CM(i,e.form);return!a||a===e},TM=function(e){return F4(e)&&e.type==="radio"},MM=function(e){return TM(e)&&!EM(e)},IM=function(e){var t,n=e&&Gf(e),i=(t=n)===null||t===void 0?void 0:t.host,a=!1;if(n&&n!==e){var s,o,l;for(a=!!((s=i)!==null&&s!==void 0&&(o=s.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!a&&i;){var c,u,h;n=Gf(i),i=(c=n)===null||c===void 0?void 0:c.host,a=!!((u=i)!==null&&u!==void 0&&(h=u.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return a},D4=function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return n===0&&i===0},OM=function(e,t){var n=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=rc.call(e,"details>summary:first-of-type"),s=a?e.parentElement:e;if(rc.call(s,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var l=e.parentElement,c=Gf(e);if(l&&!l.shadowRoot&&i(l)===!0)return D4(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=o}if(IM(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return D4(e);return!1},NM=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var i=t.children.item(n);if(i.tagName==="LEGEND")return rc.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Wf=function(e,t){return!(t.disabled||$f(t)||kM(t)||OM(t,e)||AM(t)||NM(t))},im=function(e,t){return!(MM(t)||R4(t)<0||!Wf(e,t))},PM=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},RM=function r(e){var t=[],n=[];return e.forEach(function(i,a){var s=!!i.scopeParent,o=s?i.scopeParent:i,l=_M(o,s),c=s?r(i.candidates):o;l===0?s?t.push.apply(t,c):t.push(o):n.push({documentOrder:a,tabIndex:l,item:i,isScope:s,content:c})}),n.sort(SM).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(t)},L4=function(e,t){t=t||{};var n;return t.getShadowRoot?n=N4([e],t.includeContainer,{filter:im.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:PM}):n=O4(e,t.includeContainer,im.bind(null,t)),RM(n)},B4=function(e,t){t=t||{};var n;return t.getShadowRoot?n=N4([e],t.includeContainer,{filter:Wf.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n=O4(e,t.includeContainer,Wf.bind(null,t)),n},am=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return rc.call(e,qf)===!1?!1:im(t,e)},FM=M4.concat("iframe").join(","),z4=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return rc.call(e,FM)===!1?!1:Wf(t,e)};class sm{#e=!1;#t=null;#r=nm.getInstance();#n=[];#a;constructor(e){this.#a=e}get paused(){return this.#e}pause(){this.#e=!0}resume(){this.#e=!1}#i(){for(const e of this.#n)e();this.#n=[]}mount(e){this.#t&&this.unmount(),this.#t=e,this.#r.register(this),this.#l(),this.#s()}unmount(){this.#t&&(this.#i(),this.#o(),this.#r.unregister(this),this.#t=null)}#s(){if(!this.#t)return;const e=new CustomEvent("focusScope.onOpenAutoFocus",{bubbles:!1,cancelable:!0});this.#a.onOpenAutoFocus.current(e),e.defaultPrevented||requestAnimationFrame(()=>{if(!this.#t)return;const t=this.#h();t?(t.focus(),this.#r.setFocusMemory(this,t)):this.#t.focus()})}#o(){const e=new CustomEvent("focusScope.onCloseAutoFocus",{bubbles:!1,cancelable:!0});if(this.#a.onCloseAutoFocus.current(e),!e.defaultPrevented){const t=document.activeElement;t&&t!==document.body&&t.focus()}}#l(){if(!this.#t||!this.#a.trap.current)return;const e=this.#t,t=e.ownerDocument,n=s=>{if(this.#e||!this.#r.isActiveScope(this))return;const o=s.target;if(!o)return;if(e.contains(o))this.#r.setFocusMemory(this,o);else{const c=this.#r.getFocusMemory(this);if(c&&e.contains(c)&&z4(c))s.preventDefault(),c.focus();else{const u=this.#h(),h=this.#u()[0];(u||h||e).focus()}}},i=s=>{if(!this.#a.loop||this.#e||s.key!=="Tab"||!this.#r.isActiveScope(this))return;const o=this.#c();if(o.length<2)return;const l=o[0],c=o[o.length-1];!s.shiftKey&&t.activeElement===c?(s.preventDefault(),l.focus()):s.shiftKey&&t.activeElement===l&&(s.preventDefault(),c.focus())};this.#n.push(Zr(t,"focusin",n,{capture:!0}),Zr(e,"keydown",i));const a=new MutationObserver(()=>{const s=this.#r.getFocusMemory(this);if(s&&!e.contains(s)){const o=this.#h(),l=this.#u()[0],c=o||l;c?(c.focus(),this.#r.setFocusMemory(this,c)):e.focus()}});a.observe(e,{childList:!0,subtree:!0}),this.#n.push(()=>a.disconnect())}#c(){return this.#t?L4(this.#t,{includeContainer:!1,getShadowRoot:!0}):[]}#h(){return this.#c()[0]||null}#u(){return this.#t?B4(this.#t,{includeContainer:!1,getShadowRoot:!0}):[]}static use(e){let t=null;return $r([()=>e.ref.current,()=>e.enabled.current],([n,i])=>{n&&i?(t||(t=new sm(e)),t.mount(n)):t&&(t.unmount(),t=null)}),Wo(()=>{t?.unmount()}),{get props(){return{tabindex:-1}}}}}function om(r,e){ye(e,!0);let t=U(e,"enabled",3,!1),n=U(e,"trapFocus",3,!1),i=U(e,"loop",3,!1),a=U(e,"onCloseAutoFocus",3,xr),s=U(e,"onOpenAutoFocus",3,xr);const o=sm.use({enabled:ke.with(()=>t()),trap:ke.with(()=>n()),loop:i(),onCloseAutoFocus:ke.with(()=>a()),onOpenAutoFocus:ke.with(()=>s()),ref:e.ref});var l=Z(),c=P(l);Re(c,()=>e.focusScope??je,()=>({props:o.props})),w(r,l),we()}globalThis.bitsTextSelectionLayers??=new Map;class lm{static create(e){return new lm(e)}opts;domContext;#e=xr;constructor(e){this.opts=e,this.domContext=new Vo(e.ref);let t=xr;$r(()=>this.opts.enabled.current,n=>(n&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=this.#t()),()=>{t(),this.#n(),globalThis.bitsTextSelectionLayers.delete(this)}))}#t(){return io(Zr(this.domContext.getDocument(),"pointerdown",this.#r),Zr(this.domContext.getDocument(),"pointerup",h4(this.#n,this.opts.onPointerUp.current)))}#r=e=>{const t=this.opts.ref.current,n=e.target;!Jo(t)||!Jo(n)||!this.opts.enabled.current||!LM(this)||!MT(t,n)||(this.opts.onPointerDown.current(e),!e.defaultPrevented&&(this.#e=DM(t,this.domContext.getDocument().body)))};#n=()=>{this.#e(),this.#e=xr}}const U4=r=>r.style.userSelect||r.style.webkitUserSelect;function DM(r,e){const t=U4(e),n=U4(r);return Vf(e,"none"),Vf(r,"text"),()=>{Vf(e,t),Vf(r,n)}}function Vf(r,e){r.style.userSelect=e,r.style.webkitUserSelect=e}function LM(r){const e=[...globalThis.bitsTextSelectionLayers];if(!e.length)return!1;const t=e.at(-1);return t?t[0]===r:!1}function cm(r,e){ye(e,!0);let t=U(e,"preventOverflowTextSelection",3,!0),n=U(e,"onPointerDown",3,xr),i=U(e,"onPointerUp",3,xr);lm.create({id:ke.with(()=>e.id),onPointerDown:ke.with(()=>n()),onPointerUp:ke.with(()=>i()),enabled:ke.with(()=>e.enabled&&t()),ref:e.ref});var a=Z(),s=P(a);Re(s,()=>e.children??je),w(r,a),we()}globalThis.bitsIdCounter??={current:0};function ru(r="bits"){return globalThis.bitsIdCounter.current++,`${r}-${globalThis.bitsIdCounter.current}`}class BM{#e;#t=0;#r=ue();#n;constructor(e){this.#e=e}#a(){this.#t-=1,this.#n&&this.#t<=0&&(this.#n(),I(this.#r,void 0),this.#n=void 0)}get(...e){return this.#t+=1,g(this.#r)===void 0&&(this.#n=rh(()=>{I(this.#r,this.#e(...e),!0)})),Nt(()=>()=>{this.#a()}),g(this.#r)}}const zM=new BM(()=>{const r=new Ff,e=B(()=>{for(const a of r.values())if(a)return!0;return!1});let t=ue(null),n=null;function i(){Yp&&(document.body.setAttribute("style",g(t)??""),document.body.style.removeProperty("--scrollbar-width"),Qp&&n?.())}return $r(()=>g(e),()=>{if(!g(e))return;I(t,document.body.getAttribute("style"),!0);const a=getComputedStyle(document.body),s=window.innerWidth-document.documentElement.clientWidth,l={padding:Number.parseInt(a.paddingRight??"0",10)+s,margin:Number.parseInt(a.marginRight??"0",10)};s>0&&(document.body.style.paddingRight=`${l.padding}px`,document.body.style.marginRight=`${l.margin}px`,document.body.style.setProperty("--scrollbar-width",`${s}px`),document.body.style.overflow="hidden"),Qp&&(n=Ah(document,"touchmove",c=>{c.target===document.documentElement&&(c.touches.length>1||c.preventDefault())},{passive:!1})),ja(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})}),Wo(()=>()=>{n?.()}),{get map(){return r},resetBodyStyle:i}});class UM{#e=ru();#t;#r=()=>null;#n;locked;constructor(e,t=()=>null){this.#t=e,this.#r=t,this.#n=zM.get(),this.#n&&(this.#n.map.set(this.#e,this.#t??!1),this.locked=ke.with(()=>this.#n.map.get(this.#e)??!1,n=>this.#n.map.set(this.#e,n)),Wo(()=>{if(this.#n.map.delete(this.#e),jM(this.#n.map))return;const n=this.#r();n===null?requestAnimationFrame(()=>this.#n.resetBodyStyle()):tu(n,()=>this.#n.resetBodyStyle())}))}}function jM(r){for(const[e,t]of r)if(t)return!0;return!1}function nu(r,e){ye(e,!0);let t=U(e,"preventScroll",3,!0),n=U(e,"restoreScrollDelay",3,null);t()&&new UM(t(),()=>n()),we()}function j4({forceMount:r,present:e,open:t}){return(r||e)&&t}var HM=$("<!> <!>",1),qM=$("<!> <div><!></div>",1);function GM(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"forceMount",3,!1),s=U(e,"interactOutsideBehavior",3,"ignore"),o=U(e,"onCloseAutoFocus",3,xr),l=U(e,"onEscapeKeydown",3,xr),c=U(e,"onOpenAutoFocus",3,xr),u=U(e,"onInteractOutside",3,xr),h=U(e,"preventScroll",3,!0),d=U(e,"trapFocus",3,!0),f=U(e,"restoreScrollDelay",3,null),p=qe(e,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","interactOutsideBehavior","onCloseAutoFocus","onEscapeKeydown","onOpenAutoFocus","onInteractOutside","preventScroll","trapFocus","restoreScrollDelay"]);const m=Hf.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),v=>i(v))}),y=B(()=>dr(p,m.props));{const v=S=>{{const A=(k,M)=>{let N=()=>M?.().props;rm(k,tt(()=>g(y),{get enabled(){return m.root.opts.open.current},get ref(){return m.opts.ref},onEscapeKeydown:F=>{l()(F),!F.defaultPrevented&&m.root.handleClose()},children:(F,z)=>{em(F,tt(()=>g(y),{get ref(){return m.opts.ref},get enabled(){return m.root.opts.open.current},get interactOutsideBehavior(){return s()},onInteractOutside:W=>{u()(W),!W.defaultPrevented&&m.root.handleClose()},children:(W,V)=>{cm(W,tt(()=>g(y),{get ref(){return m.opts.ref},get enabled(){return m.root.opts.open.current},children:(Q,K)=>{var ie=Z(),L=P(ie);{var J=re=>{var D=HM(),se=P(D);{var ce=ae=>{nu(ae,{get preventScroll(){return h()},get restoreScrollDelay(){return f()}})};le(se,ae=>{m.root.opts.open.current&&ae(ce)})}var q=te(se,2);{let ae=B(()=>({props:dr(g(y),N()),...m.snippetProps}));Re(q,()=>e.child,()=>g(ae))}w(re,D)},X=re=>{var D=qM(),se=P(D);nu(se,{get preventScroll(){return h()}});var ce=te(se,2);Ht(ce,ae=>({...ae}),[()=>dr(g(y),N())]);var q=G(ce);Re(q,()=>e.children??je),j(ce),w(re,D)};le(L,re=>{e.child?re(J):re(X,!1)})}w(Q,ie)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))};let C=B(()=>j4({forceMount:a(),present:m.root.opts.open.current,open:m.root.opts.open.current}));om(S,{get ref(){return m.opts.ref},loop:!0,get trapFocus(){return d()},get enabled(){return g(C)},onCloseAutoFocus:k=>{o()(k),!k.defaultPrevented&&tu(0,()=>m.root.triggerNode?.focus())},onOpenAutoFocus:k=>{c()(k),!k.defaultPrevented&&(k.preventDefault(),tu(0,()=>m.opts.ref.current?.focus()))},focusScope:A,$$slots:{focusScope:!0}})}};let _=B(()=>m.root.opts.open.current||a());so(r,{get forceMount(){return a()},get open(){return g(_)},get ref(){return m.opts.ref},presence:v,$$slots:{presence:!0}})}we()}var $M=$("<div><!></div>");function Xf(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"forceMount",3,!1),a=U(e,"ref",15,null),s=qe(e,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const o=Vp.create({id:ke.with(()=>n()),ref:ke.with(()=>a(),c=>a(c))}),l=B(()=>dr(s,o.props));{const c=h=>{var d=Z(),f=P(d);{var p=y=>{var v=Z(),_=P(v);{let S=B(()=>({props:dr(g(l)),...o.snippetProps}));Re(_,()=>e.child,()=>g(S))}w(y,v)},m=y=>{var v=$M();Ht(v,S=>({...S}),[()=>dr(g(l))]);var _=G(v);Re(_,()=>e.children??je,()=>o.snippetProps),j(v),w(y,v)};le(f,y=>{e.child?y(p):y(m,!1)})}w(h,d)};let u=B(()=>o.root.opts.open.current||i());so(r,{get open(){return g(u)},get ref(){return o.opts.ref},presence:c,$$slots:{presence:!0}})}we()}var WM=$("<div><!></div>");function um(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=qe(e,["$$slots","$$events","$$legacy","id","children","child","ref"]);const s=Wp.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),d=>i(d))}),o=B(()=>dr(a,s.props));var l=Z(),c=P(l);{var u=d=>{var f=Z(),p=P(f);Re(p,()=>e.child,()=>({props:g(o)})),w(d,f)},h=d=>{var f=WM();Ht(f,()=>({...g(o)}));var p=G(f);Re(p,()=>e.children??je),j(f),w(d,f)};le(c,d=>{e.child?d(u):d(h,!1)})}w(r,l),we()}function VM(r,e,t=!0){if(!(r.length===0||e<0||e>=r.length))return r.length===1&&e===0?r[0]:e===r.length-1?t?r[0]:void 0:r[e+1]}function XM(r,e,t=!0){if(!(r.length===0||e<0||e>=r.length))return r.length===1&&e===0?r[0]:e===0?t?r[r.length-1]:void 0:r[e-1]}function KM(r,e,t,n=!0){if(r.length===0||e<0||e>=r.length)return;let i=e+t;return n?i=(i%r.length+r.length)%r.length:i=Math.max(0,Math.min(i,r.length-1)),r[i]}function YM(r,e,t,n=!0){if(r.length===0||e<0||e>=r.length)return;let i=e-t;return n?i=(i%r.length+r.length)%r.length:i=Math.max(0,Math.min(i,r.length-1)),r[i]}function hm(r,e,t){const n=e.toLowerCase();if(n.endsWith(" ")){const h=n.slice(0,-1);if(r.filter(m=>m.toLowerCase().startsWith(h)).length<=1)return hm(r,h,t);const f=t?.toLowerCase();if(f&&f.startsWith(h)&&f.charAt(h.length)===" "&&e.trim()===h)return t;const p=r.filter(m=>m.toLowerCase().startsWith(n));if(p.length>0){const m=t?r.indexOf(t):-1;return H4(p,Math.max(m,0)).find(_=>_!==t)||t}}const a=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=a.toLowerCase(),o=t?r.indexOf(t):-1;let l=H4(r,Math.max(o,0));a.length===1&&(l=l.filter(h=>h!==t));const u=l.find(h=>h?.toLowerCase().startsWith(s));return u!==t?u:void 0}function H4(r,e){return r.map((t,n)=>r[(e+n)%r.length])}const QM=Ko({component:"checkbox",parts:["root","group","group-label","input"]}),JM=new Kn("Checkbox.Group"),q4=new Kn("Checkbox.Root");class dm{static create(e,t=null){return q4.set(new dm(e,t))}opts;group;#e=B(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return g(this.#e)}set trueName(e){I(this.#e,e)}#t=B(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current);get trueRequired(){return g(this.#t)}set trueRequired(e){I(this.#t,e)}#r=B(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current);get trueDisabled(){return g(this.#r)}set trueDisabled(e){I(this.#r,e)}attachment;constructor(e,t){this.opts=e,this.group=t,this.attachment=on(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),$r.pre([()=>Yd(this.group?.opts.value.current),()=>this.opts.value.current],([n,i])=>{!n||!i||(this.opts.checked.current=n.includes(i))}),$r.pre(()=>this.opts.checked.current,n=>{this.group&&(n?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.opts.disabled.current||(e.key===Yo&&e.preventDefault(),e.key===ks&&(e.preventDefault(),this.#n()))}#n(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){this.opts.disabled.current||this.#n()}#a=B(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return g(this.#a)}set snippetProps(e){I(this.#a,e)}#i=B(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":PT(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":NT(this.trueRequired),"data-disabled":xs(this.trueDisabled),"data-state":ZM(this.opts.checked.current,this.opts.indeterminate.current),[QM.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return g(this.#i)}set props(e){I(this.#i,e)}}class fm{static create(){return new fm(q4.get())}root;#e=B(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return g(this.#e)}set trueChecked(e){I(this.#e,e)}#t=B(()=>!!this.root.trueName);get shouldRender(){return g(this.#t)}set shouldRender(e){I(this.#t,e)}constructor(e){this.root=e}#r=B(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current}));get props(){return g(this.#r)}set props(e){I(this.#r,e)}}function ZM(r,e){return e?"indeterminate":r?"checked":"unchecked"}yA();var eI=$("<input/>"),tI=$("<input/>");function G4(r,e){ye(e,!0);let t=U(e,"value",15),n=qe(e,["$$slots","$$events","$$legacy","value"]);const i=B(()=>dr(n,{"aria-hidden":"true",tabindex:-1,style:cT}));var a=Z(),s=P(a);{var o=c=>{var u=eI();Vc(u),Ht(u,()=>({...g(i),value:t()})),w(c,u)},l=c=>{var u=tI();Vc(u),Ht(u,()=>({...g(i)})),qo(u,t),w(c,u)};le(s,c=>{g(i).type==="checkbox"?c(o):c(l,!1)})}w(r,a),we()}function rI(r,e){ye(e,!1);const t=fm.create();xC();var n=Z(),i=P(n);{var a=s=>{G4(s,tt(()=>t.props))};le(i,s=>{t.shouldRender&&s(a)})}w(r,n),we()}var nI=$("<button><!></button>"),iI=$("<!> <!>",1);function aI(r,e){const t=gn();ye(e,!0);let n=U(e,"checked",15,!1),i=U(e,"ref",15,null),a=U(e,"disabled",3,!1),s=U(e,"required",3,!1),o=U(e,"name",3,void 0),l=U(e,"value",3,"on"),c=U(e,"id",19,()=>pn(t)),u=U(e,"indeterminate",15,!1),h=U(e,"type",3,"button"),d=qe(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type"]);const f=JM.getOr(null);f&&l()&&(f.opts.value.current.includes(l())?n(!0):n(!1)),$r.pre(()=>l(),()=>{f&&l()&&(f.opts.value.current.includes(l())?n(!0):n(!1))});const p=dm.create({checked:ke.with(()=>n(),C=>{n(C),e.onCheckedChange?.(C)}),disabled:ke.with(()=>a()??!1),required:ke.with(()=>s()),name:ke.with(()=>o()),value:ke.with(()=>l()),id:ke.with(()=>c()),ref:ke.with(()=>i(),C=>i(C)),indeterminate:ke.with(()=>u(),C=>{u(C),e.onIndeterminateChange?.(C)}),type:ke.with(()=>h())},f),m=B(()=>dr({...d},p.props));var y=iI(),v=P(y);{var _=C=>{var k=Z(),M=P(k);{let N=B(()=>({props:g(m),...p.snippetProps}));Re(M,()=>e.child,()=>g(N))}w(C,k)},S=C=>{var k=nI();Ht(k,()=>({...g(m)}));var M=G(k);Re(M,()=>e.children??je,()=>p.snippetProps),j(k),w(C,k)};le(v,C=>{e.child?C(_):C(S,!1)})}var A=te(v,2);rI(A,{}),w(r,y),we()}const gm=Ko({component:"collapsible",parts:["root","content","trigger"]}),pm=new Kn("Collapsible.Root");class mm{static create(e){return pm.set(new mm(e))}opts;attachment;#e=ue(null);get contentNode(){return g(this.#e)}set contentNode(e){I(this.#e,e,!0)}#t=ue(void 0);get contentId(){return g(this.#t)}set contentId(e){I(this.#t,e,!0)}constructor(e){this.opts=e,this.toggleOpen=this.toggleOpen.bind(this),this.attachment=on(this.opts.ref),new Sh({ref:ke.with(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}toggleOpen(){this.opts.open.current=!this.opts.open.current}#r=B(()=>({id:this.opts.id.current,"data-state":Xo(this.opts.open.current),"data-disabled":xs(this.opts.disabled.current),[gm.root]:"",...this.attachment}));get props(){return g(this.#r)}set props(e){I(this.#r,e)}}class bm{static create(e){return new bm(e,pm.get())}opts;root;attachment;#e=B(()=>this.opts.forceMount.current||this.root.opts.open.current);get present(){return g(this.#e)}set present(e){I(this.#e,e)}#t;#r=ue(!1);#n=ue(0);#a=ue(0);constructor(e,t){this.opts=e,this.root=t,I(this.#r,t.opts.open.current,!0),this.root.contentId=this.opts.id.current,this.attachment=on(this.opts.ref,n=>this.root.contentNode=n),$r.pre(()=>this.opts.id.current,n=>{this.root.contentId=n}),Ii(()=>{const n=requestAnimationFrame(()=>{I(this.#r,!1)});return()=>{cancelAnimationFrame(n)}}),$r([()=>this.opts.ref.current,()=>this.present],([n])=>{n&&ja(()=>{if(!this.opts.ref.current)return;this.#t=this.#t||{transitionDuration:n.style.transitionDuration,animationName:n.style.animationName},n.style.transitionDuration="0s",n.style.animationName="none";const i=n.getBoundingClientRect();if(I(this.#a,i.height,!0),I(this.#n,i.width,!0),!g(this.#r)){const{animationName:a,transitionDuration:s}=this.#t;n.style.transitionDuration=s,n.style.animationName=a}})})}#i=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return g(this.#i)}set snippetProps(e){I(this.#i,e)}#s=B(()=>({id:this.opts.id.current,style:{"--bits-collapsible-content-height":g(this.#a)?`${g(this.#a)}px`:void 0,"--bits-collapsible-content-width":g(this.#n)?`${g(this.#n)}px`:void 0},"data-state":Xo(this.root.opts.open.current),"data-disabled":xs(this.root.opts.disabled.current),[gm.content]:"",...this.attachment}));get props(){return g(this.#s)}set props(e){I(this.#s,e)}}class vm{static create(e){return new vm(e,pm.get())}opts;root;attachment;#e=B(()=>this.opts.disabled.current||this.root.opts.disabled.current);constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){if(!g(this.#e)){if(e.button!==0)return e.preventDefault();this.root.toggleOpen()}}onkeydown(e){g(this.#e)||(e.key===ks||e.key===Yo)&&(e.preventDefault(),this.root.toggleOpen())}#t=B(()=>({id:this.opts.id.current,type:"button",disabled:g(this.#e),"aria-controls":this.root.contentId,"aria-expanded":Lp(this.root.opts.open.current),"data-state":Xo(this.root.opts.open.current),"data-disabled":xs(g(this.#e)),[gm.trigger]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}var sI=$("<div><!></div>");function oI(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"open",15,!1),s=U(e,"disabled",3,!1),o=U(e,"onOpenChange",3,xr),l=U(e,"onOpenChangeComplete",3,xr),c=qe(e,["$$slots","$$events","$$legacy","children","child","id","ref","open","disabled","onOpenChange","onOpenChangeComplete"]);const u=mm.create({open:ke.with(()=>a(),y=>{a(y),o()(y)}),disabled:ke.with(()=>s()),id:ke.with(()=>n()),ref:ke.with(()=>i(),y=>i(y)),onOpenChangeComplete:ke.with(()=>l())}),h=B(()=>dr(c,u.props));var d=Z(),f=P(d);{var p=y=>{var v=Z(),_=P(v);Re(_,()=>e.child,()=>({props:g(h)})),w(y,v)},m=y=>{var v=sI();Ht(v,()=>({...g(h)}));var _=G(v);Re(_,()=>e.children??je),j(v),w(y,v)};le(f,y=>{e.child?y(p):y(m,!1)})}w(r,d),we()}var lI=$("<div><!></div>");function cI(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"forceMount",3,!1),a=U(e,"id",19,()=>pn(t)),s=qe(e,["$$slots","$$events","$$legacy","child","ref","forceMount","children","id"]);const o=bm.create({id:ke.with(()=>a()),forceMount:ke.with(()=>i()),ref:ke.with(()=>n(),l=>n(l))});so(r,{forceMount:!0,get open(){return o.present},get ref(){return o.opts.ref},presence:(c,u)=>{let h=()=>u?.().present;var d=Z();const f=B(()=>dr(s,o.props,{hidden:i()?void 0:!h()}));var p=P(d);{var m=v=>{var _=Z(),S=P(_);{let A=B(()=>({...o.snippetProps,props:g(f)}));Re(S,()=>e.child,()=>g(A))}w(v,_)},y=v=>{var _=lI();Ht(_,()=>({...g(f)}));var S=G(_);Re(S,()=>e.children??je),j(_),w(v,_)};le(p,v=>{e.child?v(m):v(y,!1)})}w(c,d)},$$slots:{presence:!0}}),we()}var uI=$("<button><!></button>");function hI(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=U(e,"disabled",3,!1),s=qe(e,["$$slots","$$events","$$legacy","children","child","ref","id","disabled"]);const o=vm.create({id:ke.with(()=>i()),ref:ke.with(()=>n(),f=>n(f)),disabled:ke.with(()=>a())}),l=B(()=>dr(s,o.props));var c=Z(),u=P(c);{var h=f=>{var p=Z(),m=P(p);Re(m,()=>e.child,()=>({props:g(l)})),w(f,p)},d=f=>{var p=uI();Ht(p,()=>({...g(l)}));var m=G(p);Re(m,()=>e.children??je),j(p),w(f,p)};le(u,f=>{e.child?f(h):f(d,!1)})}w(r,c),we()}const dI=["top","right","bottom","left"],el=Math.min,xa=Math.max,Kf=Math.round,Yf=Math.floor,As=r=>({x:r,y:r}),fI={left:"right",right:"left",bottom:"top",top:"bottom"},gI={start:"end",end:"start"};function ym(r,e,t){return xa(r,el(e,t))}function oo(r,e){return typeof r=="function"?r(e):r}function lo(r){return r.split("-")[0]}function iu(r){return r.split("-")[1]}function wm(r){return r==="x"?"y":"x"}function xm(r){return r==="y"?"height":"width"}const pI=new Set(["top","bottom"]);function Cs(r){return pI.has(lo(r))?"y":"x"}function _m(r){return wm(Cs(r))}function mI(r,e,t){t===void 0&&(t=!1);const n=iu(r),i=_m(r),a=xm(i);let s=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=Qf(s)),[s,Qf(s)]}function bI(r){const e=Qf(r);return[Sm(r),e,Sm(e)]}function Sm(r){return r.replace(/start|end/g,e=>gI[e])}const $4=["left","right"],W4=["right","left"],vI=["top","bottom"],yI=["bottom","top"];function wI(r,e,t){switch(r){case"top":case"bottom":return t?e?W4:$4:e?$4:W4;case"left":case"right":return e?vI:yI;default:return[]}}function xI(r,e,t,n){const i=iu(r);let a=wI(lo(r),t==="start",n);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(Sm)))),a}function Qf(r){return r.replace(/left|right|bottom|top/g,e=>fI[e])}function _I(r){return{top:0,right:0,bottom:0,left:0,...r}}function V4(r){return typeof r!="number"?_I(r):{top:r,right:r,bottom:r,left:r}}function Jf(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function X4(r,e,t){let{reference:n,floating:i}=r;const a=Cs(e),s=_m(e),o=xm(s),l=lo(e),c=a==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,d=n[o]/2-i[o]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-i.width,y:h};break;default:f={x:n.x,y:n.y}}switch(iu(e)){case"start":f[s]-=d*(t&&c?-1:1);break;case"end":f[s]+=d*(t&&c?-1:1);break}return f}const SI=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:h}=X4(c,n,l),d=n,f={},p=0;for(let m=0;m<o.length;m++){const{name:y,fn:v}=o[m],{x:_,y:S,data:A,reset:C}=await v({x:u,y:h,initialPlacement:n,placement:d,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:r,floating:e}});u=_??u,h=S??h,f={...f,[y]:{...f[y],...A}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(d=C.placement),C.rects&&(c=C.rects===!0?await s.getElementRects({reference:r,floating:e,strategy:i}):C.rects),{x:u,y:h}=X4(c,d,l)),m=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function Ch(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:s,elements:o,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=oo(e,r),p=V4(f),y=o[d?h==="floating"?"reference":"floating":h],v=Jf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(y)))==null||t?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),_=h==="floating"?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(S))?await(a.getScale==null?void 0:a.getScale(S))||{x:1,y:1}:{x:1,y:1},C=Jf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:S,strategy:l}):_);return{top:(v.top-C.top+p.top)/A.y,bottom:(C.bottom-v.bottom+p.bottom)/A.y,left:(v.left-C.left+p.left)/A.x,right:(C.right-v.right+p.right)/A.x}}const kI=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=oo(r,e)||{};if(c==null)return{};const h=V4(u),d={x:t,y:n},f=_m(i),p=xm(f),m=await s.getDimensions(c),y=f==="y",v=y?"top":"left",_=y?"bottom":"right",S=y?"clientHeight":"clientWidth",A=a.reference[p]+a.reference[f]-d[f]-a.floating[p],C=d[f]-a.reference[f],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let M=k?k[S]:0;(!M||!await(s.isElement==null?void 0:s.isElement(k)))&&(M=o.floating[S]||a.floating[p]);const N=A/2-C/2,F=M/2-m[p]/2-1,z=el(h[v],F),W=el(h[_],F),V=z,Q=M-m[p]-W,K=M/2-m[p]/2+N,ie=ym(V,K,Q),L=!l.arrow&&iu(i)!=null&&K!==ie&&a.reference[p]/2-(K<V?z:W)-m[p]/2<0,J=L?K<V?K-V:K-Q:0;return{[f]:d[f]+J,data:{[f]:ie,centerOffset:K-ie-J,...L&&{alignmentOffset:J}},reset:L}}}),AI=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=oo(r,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const v=lo(i),_=Cs(o),S=lo(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=d||(S||!m?[Qf(o)]:bI(o)),k=p!=="none";!d&&k&&C.push(...xI(o,m,p,A));const M=[o,...C],N=await Ch(e,y),F=[];let z=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&F.push(N[v]),h){const K=mI(i,s,A);F.push(N[K[0]],N[K[1]])}if(z=[...z,{placement:i,overflows:F}],!F.every(K=>K<=0)){var W,V;const K=(((W=a.flip)==null?void 0:W.index)||0)+1,ie=M[K];if(ie&&(!(h==="alignment"?_!==Cs(ie):!1)||z.every(X=>X.overflows[0]>0&&Cs(X.placement)===_)))return{data:{index:K,overflows:z},reset:{placement:ie}};let L=(V=z.filter(J=>J.overflows[0]<=0).sort((J,X)=>J.overflows[1]-X.overflows[1])[0])==null?void 0:V.placement;if(!L)switch(f){case"bestFit":{var Q;const J=(Q=z.filter(X=>{if(k){const re=Cs(X.placement);return re===_||re==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(re=>re>0).reduce((re,D)=>re+D,0)]).sort((X,re)=>X[1]-re[1])[0])==null?void 0:Q[0];J&&(L=J);break}case"initialPlacement":L=o;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function K4(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function Y4(r){return dI.some(e=>r[e]>=0)}const CI=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=oo(r,e);switch(n){case"referenceHidden":{const a=await Ch(e,{...i,elementContext:"reference"}),s=K4(a,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Y4(s)}}}case"escaped":{const a=await Ch(e,{...i,altBoundary:!0}),s=K4(a,t.floating);return{data:{escapedOffsets:s,escaped:Y4(s)}}}default:return{}}}}},Q4=new Set(["left","top"]);async function EI(r,e){const{placement:t,platform:n,elements:i}=r,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=lo(t),o=iu(t),l=Cs(t)==="y",c=Q4.has(s)?-1:1,u=a&&l?-1:1,h=oo(e,r);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof p=="number"&&(f=o==="end"?p*-1:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const TI=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await EI(e,r);return s===((t=o.offset)==null?void 0:t.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},MI=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:y=>{let{x:v,y:_}=y;return{x:v,y:_}}},...l}=oo(r,e),c={x:t,y:n},u=await Ch(e,l),h=Cs(lo(i)),d=wm(h);let f=c[d],p=c[h];if(a){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",_=f+u[y],S=f-u[v];f=ym(_,f,S)}if(s){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",_=p+u[y],S=p-u[v];p=ym(_,p,S)}const m=o.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-t,y:m.y-n,enabled:{[d]:a,[h]:s}}}}}},II=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:i,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=oo(r,e),u={x:t,y:n},h=Cs(i),d=wm(h);let f=u[d],p=u[h];const m=oo(o,e),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const S=d==="y"?"height":"width",A=a.reference[d]-a.floating[S]+y.mainAxis,C=a.reference[d]+a.reference[S]-y.mainAxis;f<A?f=A:f>C&&(f=C)}if(c){var v,_;const S=d==="y"?"width":"height",A=Q4.has(lo(i)),C=a.reference[h]-a.floating[S]+(A&&((v=s.offset)==null?void 0:v[h])||0)+(A?0:y.crossAxis),k=a.reference[h]+a.reference[S]+(A?0:((_=s.offset)==null?void 0:_[h])||0)-(A?y.crossAxis:0);p<C?p=C:p>k&&(p=k)}return{[d]:f,[h]:p}}}},OI=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:i,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...c}=oo(r,e),u=await Ch(e,c),h=lo(i),d=iu(i),f=Cs(i)==="y",{width:p,height:m}=a.floating;let y,v;h==="top"||h==="bottom"?(y=h,v=d===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(v=h,y=d==="end"?"top":"bottom");const _=m-u.top-u.bottom,S=p-u.left-u.right,A=el(m-u[y],_),C=el(p-u[v],S),k=!e.middlewareData.shift;let M=A,N=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=S),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(M=_),k&&!d){const z=xa(u.left,0),W=xa(u.right,0),V=xa(u.top,0),Q=xa(u.bottom,0);f?N=p-2*(z!==0||W!==0?z+W:xa(u.left,u.right)):M=m-2*(V!==0||Q!==0?V+Q:xa(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:M});const F=await s.getDimensions(o.floating);return p!==F.width||m!==F.height?{reset:{rects:!0}}:{}}}};function Zf(){return typeof window<"u"}function au(r){return J4(r)?(r.nodeName||"").toLowerCase():"#document"}function _a(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Es(r){var e;return(e=(J4(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function J4(r){return Zf()?r instanceof Node||r instanceof _a(r).Node:!1}function ls(r){return Zf()?r instanceof Element||r instanceof _a(r).Element:!1}function Ts(r){return Zf()?r instanceof HTMLElement||r instanceof _a(r).HTMLElement:!1}function Z4(r){return!Zf()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof _a(r).ShadowRoot}const NI=new Set(["inline","contents"]);function Eh(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=cs(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!NI.has(i)}const PI=new Set(["table","td","th"]);function RI(r){return PI.has(au(r))}const FI=[":popover-open",":modal"];function e0(r){return FI.some(e=>{try{return r.matches(e)}catch{return!1}})}const DI=["transform","translate","scale","rotate","perspective"],LI=["transform","translate","scale","rotate","perspective","filter"],BI=["paint","layout","strict","content"];function km(r){const e=Am(),t=ls(r)?cs(r):r;return DI.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||LI.some(n=>(t.willChange||"").includes(n))||BI.some(n=>(t.contain||"").includes(n))}function zI(r){let e=tl(r);for(;Ts(e)&&!su(e);){if(km(e))return e;if(e0(e))return null;e=tl(e)}return null}function Am(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const UI=new Set(["html","body","#document"]);function su(r){return UI.has(au(r))}function cs(r){return _a(r).getComputedStyle(r)}function t0(r){return ls(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function tl(r){if(au(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Z4(r)&&r.host||Es(r);return Z4(e)?e.host:e}function ey(r){const e=tl(r);return su(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ts(e)&&Eh(e)?e:ey(e)}function Th(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=ey(r),a=i===((n=r.ownerDocument)==null?void 0:n.body),s=_a(i);if(a){const o=Cm(s);return e.concat(s,s.visualViewport||[],Eh(i)?i:[],o&&t?Th(o):[])}return e.concat(i,Th(i,[],t))}function Cm(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function ty(r){const e=cs(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ts(r),a=i?r.offsetWidth:t,s=i?r.offsetHeight:n,o=Kf(t)!==a||Kf(n)!==s;return o&&(t=a,n=s),{width:t,height:n,$:o}}function Em(r){return ls(r)?r:r.contextElement}function ou(r){const e=Em(r);if(!Ts(e))return As(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:a}=ty(e);let s=(a?Kf(t.width):t.width)/n,o=(a?Kf(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const jI=As(0);function ry(r){const e=_a(r);return!Am()||!e.visualViewport?jI:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function HI(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==_a(r)?!1:e}function nc(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),a=Em(r);let s=As(1);e&&(n?ls(n)&&(s=ou(n)):s=ou(r));const o=HI(a,t,n)?ry(a):As(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,u=i.width/s.x,h=i.height/s.y;if(a){const d=_a(a),f=n&&ls(n)?_a(n):n;let p=d,m=Cm(p);for(;m&&n&&f!==p;){const y=ou(m),v=m.getBoundingClientRect(),_=cs(m),S=v.left+(m.clientLeft+parseFloat(_.paddingLeft))*y.x,A=v.top+(m.clientTop+parseFloat(_.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,h*=y.y,l+=S,c+=A,p=_a(m),m=Cm(p)}}return Jf({width:u,height:h,x:l,y:c})}function Tm(r,e){const t=t0(r).scrollLeft;return e?e.left+t:nc(Es(r)).left+t}function ny(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=n.left+e.scrollLeft-(t?0:Tm(r,n)),a=n.top+e.scrollTop;return{x:i,y:a}}function qI(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const a=i==="fixed",s=Es(n),o=e?e0(e.floating):!1;if(n===s||o&&a)return t;let l={scrollLeft:0,scrollTop:0},c=As(1);const u=As(0),h=Ts(n);if((h||!h&&!a)&&((au(n)!=="body"||Eh(s))&&(l=t0(n)),Ts(n))){const f=nc(n);c=ou(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const d=s&&!h&&!a?ny(s,l,!0):As(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function GI(r){return Array.from(r.getClientRects())}function $I(r){const e=Es(r),t=t0(r),n=r.ownerDocument.body,i=xa(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=xa(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let s=-t.scrollLeft+Tm(r);const o=-t.scrollTop;return cs(n).direction==="rtl"&&(s+=xa(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:s,y:o}}function WI(r,e){const t=_a(r),n=Es(r),i=t.visualViewport;let a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const c=Am();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}const VI=new Set(["absolute","fixed"]);function XI(r,e){const t=nc(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,a=Ts(r)?ou(r):As(1),s=r.clientWidth*a.x,o=r.clientHeight*a.y,l=i*a.x,c=n*a.y;return{width:s,height:o,x:l,y:c}}function iy(r,e,t){let n;if(e==="viewport")n=WI(r,t);else if(e==="document")n=$I(Es(r));else if(ls(e))n=XI(e,t);else{const i=ry(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Jf(n)}function ay(r,e){const t=tl(r);return t===e||!ls(t)||su(t)?!1:cs(t).position==="fixed"||ay(t,e)}function KI(r,e){const t=e.get(r);if(t)return t;let n=Th(r,[],!1).filter(o=>ls(o)&&au(o)!=="body"),i=null;const a=cs(r).position==="fixed";let s=a?tl(r):r;for(;ls(s)&&!su(s);){const o=cs(s),l=km(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&VI.has(i.position)||Eh(s)&&!l&&ay(r,s))?n=n.filter(u=>u!==s):i=o,s=tl(s)}return e.set(r,n),n}function YI(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const s=[...t==="clippingAncestors"?e0(e)?[]:KI(e,this._c):[].concat(t),n],o=s[0],l=s.reduce((c,u)=>{const h=iy(e,u,i);return c.top=xa(h.top,c.top),c.right=el(h.right,c.right),c.bottom=el(h.bottom,c.bottom),c.left=xa(h.left,c.left),c},iy(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function QI(r){const{width:e,height:t}=ty(r);return{width:e,height:t}}function JI(r,e,t){const n=Ts(e),i=Es(e),a=t==="fixed",s=nc(r,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=As(0);function c(){l.x=Tm(i)}if(n||!n&&!a)if((au(e)!=="body"||Eh(i))&&(o=t0(e)),n){const f=nc(e,!0,a,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&c();a&&!n&&i&&c();const u=i&&!n&&!a?ny(i,o):As(0),h=s.left+o.scrollLeft-l.x-u.x,d=s.top+o.scrollTop-l.y-u.y;return{x:h,y:d,width:s.width,height:s.height}}function Mm(r){return cs(r).position==="static"}function sy(r,e){if(!Ts(r)||cs(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Es(r)===t&&(t=t.ownerDocument.body),t}function oy(r,e){const t=_a(r);if(e0(r))return t;if(!Ts(r)){let i=tl(r);for(;i&&!su(i);){if(ls(i)&&!Mm(i))return i;i=tl(i)}return t}let n=sy(r,e);for(;n&&RI(n)&&Mm(n);)n=sy(n,e);return n&&su(n)&&Mm(n)&&!km(n)?t:n||zI(r)||t}const ZI=async function(r){const e=this.getOffsetParent||oy,t=this.getDimensions,n=await t(r.floating);return{reference:JI(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function eO(r){return cs(r).direction==="rtl"}const tO={convertOffsetParentRelativeRectToViewportRelativeRect:qI,getDocumentElement:Es,getClippingRect:YI,getOffsetParent:oy,getElementRects:ZI,getClientRects:GI,getDimensions:QI,getScale:ou,isElement:ls,isRTL:eO};function ly(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function rO(r,e){let t=null,n;const i=Es(r);function a(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=r.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(o||e(),!d||!f)return;const p=Yf(h),m=Yf(i.clientWidth-(u+d)),y=Yf(i.clientHeight-(h+f)),v=Yf(u),S={rootMargin:-p+"px "+-m+"px "+-y+"px "+-v+"px",threshold:xa(0,el(1,l))||1};let A=!0;function C(k){const M=k[0].intersectionRatio;if(M!==l){if(!A)return s();M?s(!1,M):n=setTimeout(()=>{s(!1,1e-7)},1e3)}M===1&&!ly(c,r.getBoundingClientRect())&&s(),A=!1}try{t=new IntersectionObserver(C,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(C,S)}t.observe(r)}return s(!0),a}function nO(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Em(r),u=i||a?[...c?Th(c):[],...Th(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),a&&v.addEventListener("resize",t)});const h=c&&o?rO(c,t):null;let d=-1,f=null;s&&(f=new ResizeObserver(v=>{let[_]=v;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var S;(S=f)==null||S.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,m=l?nc(r):null;l&&y();function y(){const v=nc(r);m&&!ly(m,v)&&t(),m=v,p=requestAnimationFrame(y)}return t(),()=>{var v;u.forEach(_=>{i&&_.removeEventListener("scroll",t),a&&_.removeEventListener("resize",t)}),h?.(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const iO=TI,aO=MI,sO=AI,oO=OI,lO=CI,cO=kI,uO=II,hO=(r,e,t)=>{const n=new Map,i={platform:tO,...t},a={...i.platform,_c:n};return SI(r,e,{...i,platform:a})};function ic(r){return typeof r=="function"?r():r}function cy(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function uy(r,e){const t=cy(r);return Math.round(e*t)/t}function Mh(r){return{[`--bits-${r}-content-transform-origin`]:"var(--bits-floating-transform-origin)",[`--bits-${r}-content-available-width`]:"var(--bits-floating-available-width)",[`--bits-${r}-content-available-height`]:"var(--bits-floating-available-height)",[`--bits-${r}-anchor-width`]:"var(--bits-floating-anchor-width)",[`--bits-${r}-anchor-height`]:"var(--bits-floating-anchor-height)"}}function dO(r){const e=r.whileElementsMounted,t=B(()=>ic(r.open)??!0),n=B(()=>ic(r.middleware)),i=B(()=>ic(r.transform)??!0),a=B(()=>ic(r.placement)??"bottom"),s=B(()=>ic(r.strategy)??"absolute"),o=B(()=>ic(r.sideOffset)??0),l=B(()=>ic(r.alignOffset)??0),c=r.reference;let u=ue(0),h=ue(0);const d=ke(null);let f=ue(Mr(g(s))),p=ue(Mr(g(a))),m=ue(Mr({})),y=ue(!1);const v=B(()=>{const M=d.current?uy(d.current,g(u)):g(u),N=d.current?uy(d.current,g(h)):g(h);return g(i)?{position:g(f),left:"0",top:"0",transform:`translate(${M}px, ${N}px)`,...d.current&&cy(d.current)>=1.5&&{willChange:"transform"}}:{position:g(f),left:`${M}px`,top:`${N}px`}});let _;function S(){c.current===null||d.current===null||hO(c.current,d.current,{middleware:g(n),placement:g(a),strategy:g(s)}).then(M=>{if(!g(t)&&g(u)!==0&&g(h)!==0){const N=Math.max(Math.abs(g(o)),Math.abs(g(l)),15);if(M.x<=N&&M.y<=N)return}I(u,M.x,!0),I(h,M.y,!0),I(f,M.strategy,!0),I(p,M.placement,!0),I(m,M.middlewareData,!0),I(y,!0)})}function A(){typeof _=="function"&&(_(),_=void 0)}function C(){if(A(),e===void 0){S();return}c.current===null||d.current===null||(_=e(c.current,d.current,S))}function k(){g(t)||I(y,!1)}return Nt(S),Nt(C),Nt(k),Nt(()=>A),{floating:d,reference:c,get strategy(){return g(f)},get placement(){return g(p)},get middlewareData(){return g(m)},get isPositioned(){return g(y)},get floatingStyles(){return g(v)},get update(){return S}}}const fO={top:"bottom",right:"left",bottom:"top",left:"right"},Im=new Kn("Floating.Root"),Om=new Kn("Floating.Content"),Nm=new Kn("Floating.Root");class r0{static create(e=!1){return e?Nm.set(new r0):Im.set(new r0)}anchorNode=ke(null);customAnchorNode=ke(null);triggerNode=ke(null);constructor(){Nt(()=>{this.customAnchorNode.current?typeof this.customAnchorNode.current=="string"?this.anchorNode.current=document.querySelector(this.customAnchorNode.current):this.anchorNode.current=this.customAnchorNode.current:this.anchorNode.current=this.triggerNode.current})}}class n0{static create(e,t=!1){return t?Om.set(new n0(e,Nm.get())):Om.set(new n0(e,Im.get()))}opts;root;contentRef=ke(null);wrapperRef=ke(null);arrowRef=ke(null);contentAttachment=on(this.contentRef);wrapperAttachment=on(this.wrapperRef);arrowAttachment=on(this.arrowRef);arrowId=ke(ru());#e=B(()=>{if(typeof this.opts.style=="string")return xh(this.opts.style);if(!this.opts.style)return{}});#t=void 0;#r=new ST(()=>this.arrowRef.current??void 0);#n=B(()=>this.#r?.width??0);#a=B(()=>this.#r?.height??0);#i=B(()=>this.opts.side?.current+(this.opts.align.current!=="center"?`-${this.opts.align.current}`:""));#s=B(()=>Array.isArray(this.opts.collisionBoundary.current)?this.opts.collisionBoundary.current:[this.opts.collisionBoundary.current]);#o=B(()=>g(this.#s).length>0);get hasExplicitBoundaries(){return g(this.#o)}set hasExplicitBoundaries(e){I(this.#o,e)}#l=B(()=>({padding:this.opts.collisionPadding.current,boundary:g(this.#s).filter(oM),altBoundary:this.hasExplicitBoundaries}));get detectOverflowOptions(){return g(this.#l)}set detectOverflowOptions(e){I(this.#l,e)}#c=ue(void 0);#h=ue(void 0);#u=ue(void 0);#g=ue(void 0);#p=B(()=>[iO({mainAxis:this.opts.sideOffset.current+g(this.#a),alignmentAxis:this.opts.alignOffset.current}),this.opts.avoidCollisions.current&&aO({mainAxis:!0,crossAxis:!1,limiter:this.opts.sticky.current==="partial"?uO():void 0,...this.detectOverflowOptions}),this.opts.avoidCollisions.current&&sO({...this.detectOverflowOptions}),oO({...this.detectOverflowOptions,apply:({rects:e,availableWidth:t,availableHeight:n})=>{const{width:i,height:a}=e.reference;I(this.#c,t,!0),I(this.#h,n,!0),I(this.#u,i,!0),I(this.#g,a,!0)}}),this.arrowRef.current&&cO({element:this.arrowRef.current,padding:this.opts.arrowPadding.current}),gO({arrowWidth:g(this.#n),arrowHeight:g(this.#a)}),this.opts.hideWhenDetached.current&&lO({strategy:"referenceHidden",...this.detectOverflowOptions})].filter(Boolean));get middleware(){return g(this.#p)}set middleware(e){I(this.#p,e)}floating;#f=B(()=>pO(this.floating.placement));get placedSide(){return g(this.#f)}set placedSide(e){I(this.#f,e)}#d=B(()=>mO(this.floating.placement));get placedAlign(){return g(this.#d)}set placedAlign(e){I(this.#d,e)}#m=B(()=>this.floating.middlewareData.arrow?.x??0);get arrowX(){return g(this.#m)}set arrowX(e){I(this.#m,e)}#y=B(()=>this.floating.middlewareData.arrow?.y??0);get arrowY(){return g(this.#y)}set arrowY(e){I(this.#y,e)}#b=B(()=>this.floating.middlewareData.arrow?.centerOffset!==0);get cannotCenterArrow(){return g(this.#b)}set cannotCenterArrow(e){I(this.#b,e)}#w=ue();get contentZIndex(){return g(this.#w)}set contentZIndex(e){I(this.#w,e,!0)}#x=B(()=>fO[this.placedSide]);get arrowBaseSide(){return g(this.#x)}set arrowBaseSide(e){I(this.#x,e)}#v=B(()=>({id:this.opts.wrapperId.current,"data-bits-floating-content-wrapper":"",style:{...this.floating.floatingStyles,transform:this.floating.isPositioned?this.floating.floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:this.contentZIndex,"--bits-floating-transform-origin":`${this.floating.middlewareData.transformOrigin?.x} ${this.floating.middlewareData.transformOrigin?.y}`,"--bits-floating-available-width":`${g(this.#c)}px`,"--bits-floating-available-height":`${g(this.#h)}px`,"--bits-floating-anchor-width":`${g(this.#u)}px`,"--bits-floating-anchor-height":`${g(this.#g)}px`,...this.floating.middlewareData.hide?.referenceHidden&&{visibility:"hidden","pointer-events":"none"},...g(this.#e)},dir:this.opts.dir.current,...this.wrapperAttachment}));get wrapperProps(){return g(this.#v)}set wrapperProps(e){I(this.#v,e)}#S=B(()=>({"data-side":this.placedSide,"data-align":this.placedAlign,style:Pp({...g(this.#e)}),...this.contentAttachment}));get props(){return g(this.#S)}set props(e){I(this.#S,e)}#C=B(()=>({position:"absolute",left:this.arrowX?`${this.arrowX}px`:void 0,top:this.arrowY?`${this.arrowY}px`:void 0,[this.arrowBaseSide]:0,"transform-origin":{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[this.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[this.placedSide],visibility:this.cannotCenterArrow?"hidden":void 0}));get arrowStyle(){return g(this.#C)}set arrowStyle(e){I(this.#C,e)}constructor(e,t){this.opts=e,this.root=t,e.customAnchor&&(this.root.customAnchorNode.current=e.customAnchor.current),$r(()=>e.customAnchor.current,n=>{this.root.customAnchorNode.current=n}),this.floating=dO({strategy:()=>this.opts.strategy.current,placement:()=>g(this.#i),middleware:()=>this.middleware,reference:this.root.anchorNode,whileElementsMounted:(...n)=>nO(...n,{animationFrame:this.#t?.current==="always"}),open:()=>this.opts.enabled.current,sideOffset:()=>this.opts.sideOffset.current,alignOffset:()=>this.opts.alignOffset.current}),Nt(()=>{this.floating.isPositioned&&this.opts.onPlaced?.current()}),$r(()=>this.contentRef.current,n=>{if(!n)return;const i=Lf(n);this.contentZIndex=i.getComputedStyle(n).zIndex}),Nt(()=>{this.floating.floating.current=this.wrapperRef.current})}}class Pm{static create(e){return new Pm(e,Om.get())}opts;content;constructor(e,t){this.opts=e,this.content=t}#e=B(()=>({id:this.opts.id.current,style:this.content.arrowStyle,"data-side":this.content.placedSide,...this.content.arrowAttachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}class i0{static create(e,t=!1){return t?new i0(e,Nm.get()):new i0(e,Im.get())}opts;root;constructor(e,t){this.opts=e,this.root=t,e.virtualEl&&e.virtualEl.current?t.triggerNode=ke.from(e.virtualEl.current):t.triggerNode=e.ref}}function gO(r){return{name:"transformOrigin",options:r,fn(e){const{placement:t,rects:n,middlewareData:i}=e,s=i.arrow?.centerOffset!==0,o=s?0:r.arrowWidth,l=s?0:r.arrowHeight,[c,u]=Rm(t),h={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+o/2,f=(i.arrow?.y??0)+l/2;let p="",m="";return c==="bottom"?(p=s?h:`${d}px`,m=`${-l}px`):c==="top"?(p=s?h:`${d}px`,m=`${n.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=s?h:`${f}px`):c==="left"&&(p=`${n.floating.width+l}px`,m=s?h:`${f}px`),{data:{x:p,y:m}}}}}function Rm(r){const[e,t="center"]=r.split("-");return[e,t]}function pO(r){return Rm(r)[0]}function mO(r){return Rm(r)[1]}function Fm(r,e){ye(e,!0);let t=U(e,"tooltip",3,!1);r0.create(t());var n=Z(),i=P(n);Re(i,()=>e.children??je),w(r,n),we()}const bO={afterMs:1e4,onChange:xr};function Dm(r,e){const{afterMs:t,onChange:n,getWindow:i}={...bO,...e};let a=null,s=ue(Mr(r));function o(){return i().setTimeout(()=>{I(s,r,!0),n?.(r)},t)}return Nt(()=>()=>{a&&i().clearTimeout(a)}),ke.with(()=>g(s),l=>{I(s,l,!0),n?.(l),a&&i().clearTimeout(a),a=o()})}class vO{#e;#t=B(()=>this.#e.candidateValues());#r;constructor(e){this.#e=e,this.#r=Dm("",{afterMs:1e3,getWindow:this.#e.getWindow}),this.handleTypeaheadSearch=this.handleTypeaheadSearch.bind(this),this.resetTypeahead=this.resetTypeahead.bind(this)}handleTypeaheadSearch(e){if(!this.#e.enabled()||!g(this.#t).length)return;this.#r.current=this.#r.current+e;const t=this.#e.getCurrentItem(),n=g(this.#t).find(o=>o===t)??"",i=g(this.#t).map(o=>o??""),a=hm(i,this.#r.current,n),s=g(this.#t).find(o=>o===a);return s&&this.#e.onMatch(s),s}resetTypeahead(){this.#r.current=""}}class hy{#e;#t;#r=B(()=>this.#e.onMatch?this.#e.onMatch:e=>e.focus());#n=B(()=>this.#e.getCurrentItem?this.#e.getCurrentItem:this.#e.getActiveElement);constructor(e){this.#e=e,this.#t=Dm("",{afterMs:1e3,getWindow:e.getWindow}),this.handleTypeaheadSearch=this.handleTypeaheadSearch.bind(this),this.resetTypeahead=this.resetTypeahead.bind(this)}handleTypeaheadSearch(e,t){if(!t.length)return;this.#t.current=this.#t.current+e;const n=g(this.#n)(),i=t.find(l=>l===n)?.textContent?.trim()??"",a=t.map(l=>l.textContent?.trim()??""),s=hm(a,this.#t.current,i),o=t.find(l=>l.textContent?.trim()===s);return o&&g(this.#r)(o),o}resetTypeahead(){this.#t.current=""}get search(){return this.#t.current}}const yO=[_s,jp,zf],wO=[Ss,Up,Bf],xO=[...yO,...wO],_O=Ko({component:"select",parts:["trigger","content","item","viewport","scroll-up-button","scroll-down-button","group","group-label","separator","arrow","input","content-wrapper","item-text","value"]}),Ih=new Kn("Select.Root | Combobox.Root"),a0=new Kn("Select.Content | Combobox.Content");class dy{opts;#e=ue(!1);get touchedInput(){return g(this.#e)}set touchedInput(e){I(this.#e,e,!0)}#t=ue(null);get inputNode(){return g(this.#t)}set inputNode(e){I(this.#t,e,!0)}#r=ue(null);get contentNode(){return g(this.#r)}set contentNode(e){I(this.#r,e,!0)}#n=ue(null);get triggerNode(){return g(this.#n)}set triggerNode(e){I(this.#n,e,!0)}#a=ue("");get valueId(){return g(this.#a)}set valueId(e){I(this.#a,e,!0)}#i=ue(null);get highlightedNode(){return g(this.#i)}set highlightedNode(e){I(this.#i,e,!0)}#s=B(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-value"):null);get highlightedValue(){return g(this.#s)}set highlightedValue(e){I(this.#s,e)}#o=B(()=>{if(this.highlightedNode)return this.highlightedNode.id});get highlightedId(){return g(this.#o)}set highlightedId(e){I(this.#o,e)}#l=B(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-label"):null);get highlightedLabel(){return g(this.#l)}set highlightedLabel(e){I(this.#l,e)}isUsingKeyboard=!1;isCombobox=!1;domContext=new Vo(()=>null);constructor(e){this.opts=e,this.isCombobox=e.isCombobox,new Sh({ref:ke.with(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),Ii(()=>{this.opts.open.current||this.setHighlightedNode(null)})}#c=Jp(this.setHighlightedToFirstCandidate.bind(this),20);setHighlightedNode(e,t=!1){this.highlightedNode=e,e&&(this.isUsingKeyboard||t)&&e.scrollIntoView({block:this.opts.scrollAlignment.current})}getCandidateNodes(){const e=this.contentNode;return e?Array.from(e.querySelectorAll(`[${this.getBitsAttr("item")}]:not([data-disabled])`)):[]}setHighlightedToFirstCandidate(e={debounced:!1}){if(e.debounced){this.#c();return}this.setHighlightedNode(null);const t=this.getCandidateNodes();t.length&&this.setHighlightedNode(t[0])}getNodeByValue(e){return this.getCandidateNodes().find(n=>n.dataset.value===e)??null}setOpen(e){this.opts.open.current=e}toggleOpen(){this.opts.open.current=!this.opts.open.current}handleOpen(){this.setOpen(!0)}handleClose(){this.setHighlightedNode(null),this.setOpen(!1)}toggleMenu(){this.toggleOpen()}getBitsAttr=e=>_O.getAttr(e,this.isCombobox?"combobox":void 0)}class SO extends dy{opts;isMulti=!1;#e=B(()=>this.opts.value.current!=="");get hasValue(){return g(this.#e)}set hasValue(e){I(this.#e,e)}#t=B(()=>this.opts.items.current.length?this.opts.items.current.find(t=>t.value===this.opts.value.current)?.label??"":"");get currentLabel(){return g(this.#t)}set currentLabel(e){I(this.#t,e)}#r=B(()=>this.opts.items.current.length?this.opts.items.current.filter(t=>!t.disabled).map(t=>t.label):[]);get candidateLabels(){return g(this.#r)}set candidateLabels(e){I(this.#r,e)}#n=B(()=>!(this.isMulti||this.opts.items.current.length===0));get dataTypeaheadEnabled(){return g(this.#n)}set dataTypeaheadEnabled(e){I(this.#n,e)}constructor(e){super(e),this.opts=e,Nt(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),$r(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current===e}toggleItem(e,t=e){this.opts.value.current=this.includesItem(e)?"":e,this.opts.inputValue.current=t}setInitialHighlightedNode(){ja(()=>{if(this.highlightedNode&&this.domContext.getDocument().contains(this.highlightedNode))return;if(this.opts.value.current!==""){const t=this.getNodeByValue(this.opts.value.current);if(t){this.setHighlightedNode(t,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class kO extends dy{opts;isMulti=!0;#e=B(()=>this.opts.value.current.length>0);get hasValue(){return g(this.#e)}set hasValue(e){I(this.#e,e)}constructor(e){super(e),this.opts=e,Nt(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),$r(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current.includes(e)}toggleItem(e,t=e){this.includesItem(e)?this.opts.value.current=this.opts.value.current.filter(n=>n!==e):this.opts.value.current=[...this.opts.value.current,e],this.opts.inputValue.current=t}setInitialHighlightedNode(){ja(()=>{if(!this.domContext||this.highlightedNode&&this.domContext.getDocument().contains(this.highlightedNode))return;if(this.opts.value.current.length&&this.opts.value.current[0]!==""){const t=this.getNodeByValue(this.opts.value.current[0]);if(t){this.setHighlightedNode(t,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class AO{static create(e){const{type:t,...n}=e,i=t==="single"?new SO(n):new kO(n);return Ih.set(i)}}class Lm{static create(e){return new Lm(e,Ih.get())}opts;root;attachment;#e;#t;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(e.ref,n=>this.root.triggerNode=n),this.root.domContext=new Vo(e.ref),this.#e=new hy({getCurrentItem:()=>this.root.highlightedNode,onMatch:n=>{this.root.setHighlightedNode(n)},getActiveElement:()=>this.root.domContext.getActiveElement(),getWindow:()=>this.root.domContext.getWindow()}),this.#t=new vO({getCurrentItem:()=>this.root.isMulti?"":this.root.currentLabel,onMatch:n=>{if(this.root.isMulti||!this.root.opts.items.current)return;const i=this.root.opts.items.current.find(a=>a.label===n);i&&(this.root.opts.value.current=i.value)},enabled:()=>!this.root.isMulti&&this.root.dataTypeaheadEnabled,candidateValues:()=>this.root.isMulti?[]:this.root.candidateLabels,getWindow:()=>this.root.domContext.getWindow()}),this.onkeydown=this.onkeydown.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onclick=this.onclick.bind(this)}#r(){this.root.opts.open.current=!0,this.#t.resetTypeahead(),this.#e.resetTypeahead()}#n(e){this.#r()}#a(){const e=this.root.highlightedValue===this.root.opts.value.current;return!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti?(this.root.handleClose(),!0):(this.root.highlightedValue!==null&&this.root.toggleItem(this.root.highlightedValue,this.root.highlightedLabel??void 0),!this.root.isMulti&&!e?(this.root.handleClose(),!0):!1)}onkeydown(e){if(this.root.isUsingKeyboard=!0,(e.key===Ss||e.key===_s)&&e.preventDefault(),!this.root.opts.open.current){if(e.key===Yo||e.key===ks||e.key===_s||e.key===Ss)e.preventDefault(),this.root.handleOpen();else if(!this.root.isMulti&&this.root.dataTypeaheadEnabled){this.#t.handleTypeaheadSearch(e.key);return}if(this.root.hasValue)return;const s=this.root.getCandidateNodes();if(!s.length)return;if(e.key===_s){const o=s[0];this.root.setHighlightedNode(o)}else if(e.key===Ss){const o=s[s.length-1];this.root.setHighlightedNode(o)}return}if(e.key===Hp){this.root.handleClose();return}if((e.key===Yo||e.key===ks&&this.#e.search==="")&&!e.isComposing&&(e.preventDefault(),this.#a()))return;if(e.key===Ss&&e.altKey&&this.root.handleClose(),xO.includes(e.key)){e.preventDefault();const s=this.root.getCandidateNodes(),o=this.root.highlightedNode,l=o?s.indexOf(o):-1,c=this.root.opts.loop.current;let u;if(e.key===_s?u=VM(s,l,c):e.key===Ss?u=XM(s,l,c):e.key===Up?u=KM(s,l,10,c):e.key===jp?u=YM(s,l,10,c):e.key===zf?u=s[0]:e.key===Bf&&(u=s[s.length-1]),!u)return;this.root.setHighlightedNode(u);return}const t=e.ctrlKey||e.altKey||e.metaKey,n=e.key.length===1,i=e.key===ks,a=this.root.getCandidateNodes();if(e.key!==Hp){if(!t&&(n||i)){!this.#e.handleTypeaheadSearch(e.key,a)&&i&&(e.preventDefault(),this.#a());return}this.root.highlightedNode||this.root.setHighlightedToFirstCandidate()}}onclick(e){e.currentTarget.focus()}onpointerdown(e){if(this.root.opts.disabled.current)return;if(e.pointerType==="touch")return e.preventDefault();const t=e.target;t?.hasPointerCapture(e.pointerId)&&t?.releasePointerCapture(e.pointerId),e.button===0&&e.ctrlKey===!1&&(this.root.opts.open.current===!1?this.#n(e):this.root.handleClose())}onpointerup(e){this.root.opts.disabled.current||(e.preventDefault(),e.pointerType==="touch"&&(this.root.opts.open.current===!1?this.#n(e):this.root.handleClose()))}#i=B(()=>({id:this.opts.id.current,disabled:this.root.opts.disabled.current?!0:void 0,"aria-haspopup":"listbox","aria-expanded":Lp(this.root.opts.open.current),"aria-activedescendant":this.root.highlightedId,"data-state":Xo(this.root.opts.open.current),"data-disabled":xs(this.root.opts.disabled.current),"data-placeholder":this.root.hasValue?void 0:"",[this.root.getBitsAttr("trigger")]:"",onpointerdown:this.onpointerdown,onkeydown:this.onkeydown,onclick:this.onclick,onpointerup:this.onpointerup,...this.attachment}));get props(){return g(this.#i)}set props(e){I(this.#i,e)}}class Bm{static create(e){return a0.set(new Bm(e,Ih.get()))}opts;root;attachment;#e=ue(null);get viewportNode(){return g(this.#e)}set viewportNode(e){I(this.#e,e,!0)}#t=ue(!1);get isPositioned(){return g(this.#t)}set isPositioned(e){I(this.#t,e,!0)}domContext;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(e.ref,n=>this.root.contentNode=n),this.domContext=new Vo(this.opts.ref),this.root.domContext===null&&(this.root.domContext=this.domContext),Wo(()=>{this.root.contentNode=null,this.isPositioned=!1}),$r(()=>this.root.opts.open.current,()=>{this.root.opts.open.current||(this.isPositioned=!1)}),this.onpointermove=this.onpointermove.bind(this)}onpointermove(e){this.root.isUsingKeyboard=!1}#r=B(()=>Mh(this.root.isCombobox?"combobox":"select"));onInteractOutside=e=>{if(e.target===this.root.triggerNode||e.target===this.root.inputNode){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};#n=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return g(this.#n)}set snippetProps(e){I(this.#n,e)}#a=B(()=>({id:this.opts.id.current,role:"listbox","aria-multiselectable":this.root.isMulti?"true":void 0,"data-state":Xo(this.root.opts.open.current),[this.root.getBitsAttr("content")]:"",style:{display:"flex",flexDirection:"column",outline:"none",boxSizing:"border-box",pointerEvents:"auto",...g(this.#r)},onpointermove:this.onpointermove,...this.attachment}));get props(){return g(this.#a)}set props(e){I(this.#a,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus,trapFocus:!1,loop:!1,onPlaced:()=>{this.root.opts.open.current&&(this.isPositioned=!0)}}}class zm{static create(e){return new zm(e,Ih.get())}opts;root;attachment;#e=B(()=>this.root.includesItem(this.opts.value.current));get isSelected(){return g(this.#e)}set isSelected(e){I(this.#e,e)}#t=B(()=>this.root.highlightedValue===this.opts.value.current);get isHighlighted(){return g(this.#t)}set isHighlighted(e){I(this.#t,e)}prevHighlighted=new _4(()=>this.isHighlighted);#r=ue(!1);get mounted(){return g(this.#r)}set mounted(e){I(this.#r,e,!0)}constructor(e,t){this.opts=e,this.root=t,this.attachment=on(e.ref),Fp(()=>{this.root.setHighlightedToFirstCandidate({debounced:!0})}),Wo(()=>{this.root.setHighlightedToFirstCandidate({debounced:!0})}),$r([()=>this.isHighlighted,()=>this.prevHighlighted.current],()=>{this.isHighlighted?this.opts.onHighlight.current():this.prevHighlighted.current&&this.opts.onUnhighlight.current()}),$r(()=>this.mounted,()=>{this.mounted&&this.root.setInitialHighlightedNode()}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onpointermove=this.onpointermove.bind(this)}handleSelect(){if(this.opts.disabled.current)return;const e=this.opts.value.current===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti){this.root.handleClose();return}this.root.toggleItem(this.opts.value.current,this.opts.label.current),!this.root.isMulti&&!e&&this.root.handleClose()}#n=B(()=>({selected:this.isSelected,highlighted:this.isHighlighted}));get snippetProps(){return g(this.#n)}set snippetProps(e){I(this.#n,e)}onpointerdown(e){e.preventDefault()}onpointerup(e){if(!(e.defaultPrevented||!this.opts.ref.current)){if(e.pointerType==="touch"&&!Qp){Zr(this.opts.ref.current,"click",()=>{this.handleSelect(),this.root.setHighlightedNode(this.opts.ref.current)},{once:!0});return}e.preventDefault(),this.handleSelect(),e.pointerType==="touch"&&this.root.setHighlightedNode(this.opts.ref.current)}}onpointermove(e){e.pointerType!=="touch"&&this.root.highlightedNode!==this.opts.ref.current&&this.root.setHighlightedNode(this.opts.ref.current)}#a=B(()=>({id:this.opts.id.current,role:"option","aria-selected":this.root.includesItem(this.opts.value.current)?"true":void 0,"data-value":this.opts.value.current,"data-disabled":xs(this.opts.disabled.current),"data-highlighted":this.root.highlightedValue===this.opts.value.current&&!this.opts.disabled.current?"":void 0,"data-selected":this.root.includesItem(this.opts.value.current)?"":void 0,"data-label":this.opts.label.current,[this.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,...this.attachment}));get props(){return g(this.#a)}set props(e){I(this.#a,e)}}class Um{static create(e){return new Um(e,Ih.get())}opts;root;#e=B(()=>this.root.opts.name.current!=="");get shouldRender(){return g(this.#e)}set shouldRender(e){I(this.#e,e)}constructor(e,t){this.opts=e,this.root=t,this.onfocus=this.onfocus.bind(this)}onfocus(e){e.preventDefault(),this.root.isCombobox?this.root.inputNode?.focus():this.root.triggerNode?.focus()}#t=B(()=>({disabled:FT(this.root.opts.disabled.current),required:DT(this.root.opts.required.current),name:this.root.opts.name.current,value:this.opts.value.current,onfocus:this.onfocus}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class jm{static create(e){return new jm(e,a0.get())}opts;content;root;attachment;#e=ue(0);get prevScrollTop(){return g(this.#e)}set prevScrollTop(e){I(this.#e,e,!0)}constructor(e,t){this.opts=e,this.content=t,this.root=t.root,this.attachment=on(e.ref,n=>this.content.viewportNode=n)}#t=B(()=>({id:this.opts.id.current,role:"presentation",[this.root.getBitsAttr("viewport")]:"",style:{position:"relative",flex:1,overflow:"auto"},...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class fy{opts;content;root;attachment;autoScrollTimer=null;userScrollTimer=-1;isUserScrolling=!1;onAutoScroll=xr;#e=ue(!1);get mounted(){return g(this.#e)}set mounted(e){I(this.#e,e,!0)}constructor(e,t){this.opts=e,this.content=t,this.root=t.root,this.attachment=on(e.ref),$r([()=>this.mounted],()=>{if(!this.mounted){this.isUserScrolling=!1;return}this.isUserScrolling}),Nt(()=>{this.mounted||this.clearAutoScrollInterval()}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this)}handleUserScroll(){this.content.domContext.clearTimeout(this.userScrollTimer),this.isUserScrolling=!0,this.userScrollTimer=this.content.domContext.setTimeout(()=>{this.isUserScrolling=!1},200)}clearAutoScrollInterval(){this.autoScrollTimer!==null&&(this.content.domContext.clearTimeout(this.autoScrollTimer),this.autoScrollTimer=null)}onpointerdown(e){if(this.autoScrollTimer!==null)return;const t=n=>{this.onAutoScroll(),this.autoScrollTimer=this.content.domContext.setTimeout(()=>t(n+1),this.opts.delay.current(n))};this.autoScrollTimer=this.content.domContext.setTimeout(()=>t(1),this.opts.delay.current(0))}onpointermove(e){this.onpointerdown(e)}onpointerleave(e){this.clearAutoScrollInterval()}#t=B(()=>({id:this.opts.id.current,"aria-hidden":RT(!0),style:{flexShrink:0},onpointerdown:this.onpointerdown,onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class Hm{static create(e){return new Hm(new fy(e,a0.get()))}scrollButtonState;content;root;#e=ue(!1);get canScrollDown(){return g(this.#e)}set canScrollDown(e){I(this.#e,e,!0)}scrollIntoViewTimer=null;constructor(e){this.scrollButtonState=e,this.content=e.content,this.root=e.root,this.scrollButtonState.onAutoScroll=this.handleAutoScroll,$r([()=>this.content.viewportNode,()=>this.content.isPositioned],()=>{if(!(!this.content.viewportNode||!this.content.isPositioned))return this.handleScroll(!0),Zr(this.content.viewportNode,"scroll",()=>this.handleScroll())}),$r(()=>this.scrollButtonState.mounted,()=>{this.scrollButtonState.mounted&&(this.scrollIntoViewTimer&&clearTimeout(this.scrollIntoViewTimer),this.scrollIntoViewTimer=tu(5,()=>{this.root.highlightedNode?.scrollIntoView({block:this.root.opts.scrollAlignment.current})}))})}handleScroll=(e=!1)=>{if(e||this.scrollButtonState.handleUserScroll(),!this.content.viewportNode)return;const t=this.content.viewportNode.scrollHeight-this.content.viewportNode.clientHeight,n=Number.parseInt(getComputedStyle(this.content.viewportNode).paddingTop,10);this.canScrollDown=Math.ceil(this.content.viewportNode.scrollTop)<t-n};handleAutoScroll=()=>{const e=this.content.viewportNode,t=this.root.highlightedNode;!e||!t||(e.scrollTop=e.scrollTop+t.offsetHeight)};#t=B(()=>({...this.scrollButtonState.props,[this.root.getBitsAttr("scroll-down-button")]:""}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class qm{static create(e){return new qm(new fy(e,a0.get()))}scrollButtonState;content;root;#e=ue(!1);get canScrollUp(){return g(this.#e)}set canScrollUp(e){I(this.#e,e,!0)}constructor(e){this.scrollButtonState=e,this.content=e.content,this.root=e.root,this.scrollButtonState.onAutoScroll=this.handleAutoScroll,$r([()=>this.content.viewportNode,()=>this.content.isPositioned],()=>{if(!(!this.content.viewportNode||!this.content.isPositioned))return this.handleScroll(!0),Zr(this.content.viewportNode,"scroll",()=>this.handleScroll())})}handleScroll=(e=!1)=>{if(e||this.scrollButtonState.handleUserScroll(),!this.content.viewportNode)return;const t=Number.parseInt(getComputedStyle(this.content.viewportNode).paddingTop,10);this.canScrollUp=this.content.viewportNode.scrollTop-t>.1};handleAutoScroll=()=>{!this.content.viewportNode||!this.root.highlightedNode||(this.content.viewportNode.scrollTop=this.content.viewportNode.scrollTop-this.root.highlightedNode.offsetHeight)};#t=B(()=>({...this.scrollButtonState.props,[this.root.getBitsAttr("scroll-up-button")]:""}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}function gy(r,e){ye(e,!0);let t=U(e,"value",15,"");const n=Um.create({value:ke.with(()=>t())});var i=Z(),a=P(i);{var s=o=>{G4(o,tt(()=>n.props,{get autocomplete(){return e.autocomplete},get value(){return t()},set value(l){t(l)}}))};le(a,o=>{n.shouldRender&&o(s)})}w(r,i),we()}function Gm(r,e){ye(e,!0);let t=U(e,"tooltip",3,!1);i0.create({id:ke.with(()=>e.id),virtualEl:ke.with(()=>e.virtualEl),ref:e.ref},t());var n=Z(),i=P(n);Re(i,()=>e.children??je),w(r,n),we()}var CO=Ql('<svg viewBox="0 0 30 10" preserveAspectRatio="none" data-arrow=""><polygon points="0,0 30,0 15,10" fill="currentColor"></polygon></svg>'),EO=$("<span><!></span>");function TO(r,e){ye(e,!0);let t=U(e,"id",19,ru),n=U(e,"width",3,10),i=U(e,"height",3,5),a=qe(e,["$$slots","$$events","$$legacy","id","children","child","width","height"]);const s=B(()=>dr(a,{id:t()}));var o=Z(),l=P(o);{var c=h=>{var d=Z(),f=P(d);Re(f,()=>e.child,()=>({props:g(s)})),w(h,d)},u=h=>{var d=EO();Ht(d,()=>({...g(s)}));var f=G(d);{var p=y=>{var v=Z(),_=P(v);Re(_,()=>e.children??je),w(y,v)},m=y=>{var v=CO();Be(()=>{zt(v,"width",n()),zt(v,"height",i())}),w(y,v)};le(f,y=>{e.children?y(p):y(m,!1)})}j(d),w(h,d)};le(l,h=>{e.child?h(c):h(u,!1)})}w(r,o),we()}function MO(r,e){ye(e,!0);let t=U(e,"id",19,ru),n=U(e,"ref",15,null),i=qe(e,["$$slots","$$events","$$legacy","id","ref"]);const a=Pm.create({id:ke.with(()=>t()),ref:ke.with(()=>n(),o=>n(o))}),s=B(()=>dr(i,a.props));TO(r,tt(()=>g(s))),we()}function IO(r,e){ye(e,!0);let t=U(e,"side",3,"bottom"),n=U(e,"sideOffset",3,0),i=U(e,"align",3,"center"),a=U(e,"alignOffset",3,0),s=U(e,"arrowPadding",3,0),o=U(e,"avoidCollisions",3,!0),l=U(e,"collisionBoundary",19,()=>[]),c=U(e,"collisionPadding",3,0),u=U(e,"hideWhenDetached",3,!1),h=U(e,"onPlaced",3,()=>{}),d=U(e,"sticky",3,"partial"),f=U(e,"updatePositionStrategy",3,"optimized"),p=U(e,"strategy",3,"fixed"),m=U(e,"dir",3,"ltr"),y=U(e,"style",19,()=>({})),v=U(e,"wrapperId",19,ru),_=U(e,"customAnchor",3,null),S=U(e,"tooltip",3,!1);const A=n0.create({side:ke.with(()=>t()),sideOffset:ke.with(()=>n()),align:ke.with(()=>i()),alignOffset:ke.with(()=>a()),id:ke.with(()=>e.id),arrowPadding:ke.with(()=>s()),avoidCollisions:ke.with(()=>o()),collisionBoundary:ke.with(()=>l()),collisionPadding:ke.with(()=>c()),hideWhenDetached:ke.with(()=>u()),onPlaced:ke.with(()=>h()),sticky:ke.with(()=>d()),updatePositionStrategy:ke.with(()=>f()),strategy:ke.with(()=>p()),dir:ke.with(()=>m()),style:ke.with(()=>y()),enabled:ke.with(()=>e.enabled),wrapperId:ke.with(()=>v()),customAnchor:ke.with(()=>_())},S()),C=B(()=>dr(A.wrapperProps,{style:{pointerEvents:"auto"}}));var k=Z(),M=P(k);Re(M,()=>e.content??je,()=>({props:A.props,wrapperProps:g(C)})),w(r,k),we()}function OO(r,e){ye(e,!0),_i(()=>{e.onPlaced?.()});var t=Z(),n=P(t);Re(n,()=>e.content??je,()=>({props:{},wrapperProps:{}})),w(r,t),we()}function NO(r,e){let t=U(e,"isStatic",3,!1),n=qe(e,["$$slots","$$events","$$legacy","content","isStatic","onPlaced"]);var i=Z(),a=P(i);{var s=l=>{OO(l,{get content(){return e.content},get onPlaced(){return e.onPlaced}})},o=l=>{IO(l,tt({get content(){return e.content},get onPlaced(){return e.onPlaced}},()=>n))};le(a,l=>{t()?l(s):l(o,!1)})}w(r,i)}var PO=$("<!> <!>",1);function py(r,e){ye(e,!0);let t=U(e,"interactOutsideBehavior",3,"close"),n=U(e,"trapFocus",3,!0),i=U(e,"isValidEvent",3,()=>!1),a=U(e,"customAnchor",3,null),s=U(e,"isStatic",3,!1),o=U(e,"tooltip",3,!1),l=qe(e,["$$slots","$$events","$$legacy","popper","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","enabled","ref","tooltip"]);NO(r,{get isStatic(){return s()},get id(){return e.id},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return a()},get enabled(){return e.enabled},get tooltip(){return o()},content:(u,h)=>{let d=()=>h?.().props,f=()=>h?.().wrapperProps;var p=PO(),m=P(p);{var y=S=>{nu(S,{get preventScroll(){return e.preventScroll}})},v=S=>{var A=Z(),C=P(A);{var k=M=>{nu(M,{get preventScroll(){return e.preventScroll}})};le(C,M=>{e.forceMount||M(k)},!0)}w(S,A)};le(m,S=>{e.forceMount&&e.enabled?S(y):S(v,!1)})}var _=te(m,2);om(_,{get onOpenAutoFocus(){return e.onOpenAutoFocus},get onCloseAutoFocus(){return e.onCloseAutoFocus},get loop(){return e.loop},get enabled(){return e.enabled},get trapFocus(){return n()},get forceMount(){return e.forceMount},get ref(){return e.ref},focusScope:(A,C)=>{let k=()=>C?.().props;rm(A,{get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get enabled(){return e.enabled},get ref(){return e.ref},children:(M,N)=>{{const F=(z,W)=>{let V=()=>W?.().props;cm(z,{get id(){return e.id},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get enabled(){return e.enabled},get ref(){return e.ref},children:(Q,K)=>{var ie=Z(),L=P(ie);{let J=B(()=>({props:dr(l,d(),V(),k(),{style:{pointerEvents:"auto"}}),wrapperProps:f()}));Re(L,()=>e.popper??je,()=>g(J))}w(Q,ie)},$$slots:{default:!0}})};em(M,{get id(){return e.id},get onInteractOutside(){return e.onInteractOutside},get onFocusOutside(){return e.onFocusOutside},get interactOutsideBehavior(){return t()},isValidEvent:i(),get enabled(){return e.enabled},get ref(){return e.ref},children:F,$$slots:{default:!0}})}},$$slots:{default:!0}})},$$slots:{focusScope:!0}}),w(u,p)},$$slots:{content:!0}}),we()}function $m(r,e){let t=U(e,"interactOutsideBehavior",3,"close"),n=U(e,"trapFocus",3,!0),i=U(e,"isValidEvent",3,()=>!1),a=U(e,"customAnchor",3,null),s=U(e,"isStatic",3,!1),o=qe(e,["$$slots","$$events","$$legacy","popper","open","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","ref"]);so(r,{get open(){return e.open},get ref(){return e.ref},presence:c=>{py(c,tt({get popper(){return e.popper},get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get id(){return e.id},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get preventScroll(){return e.preventScroll},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return a()},get isStatic(){return s()},get enabled(){return e.open},get onInteractOutside(){return e.onInteractOutside},get onCloseAutoFocus(){return e.onCloseAutoFocus},get onOpenAutoFocus(){return e.onOpenAutoFocus},get interactOutsideBehavior(){return t()},get loop(){return e.loop},get trapFocus(){return n()},isValidEvent:i(),get onFocusOutside(){return e.onFocusOutside},forceMount:!1,get ref(){return e.ref}},()=>o))},$$slots:{presence:!0}})}function Wm(r,e){let t=U(e,"interactOutsideBehavior",3,"close"),n=U(e,"trapFocus",3,!0),i=U(e,"isValidEvent",3,()=>!1),a=U(e,"customAnchor",3,null),s=U(e,"isStatic",3,!1),o=qe(e,["$$slots","$$events","$$legacy","popper","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","enabled"]);py(r,tt({get popper(){return e.popper},get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get id(){return e.id},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get preventScroll(){return e.preventScroll},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return a()},get isStatic(){return s()},get enabled(){return e.enabled},get onInteractOutside(){return e.onInteractOutside},get onCloseAutoFocus(){return e.onCloseAutoFocus},get onOpenAutoFocus(){return e.onOpenAutoFocus},get interactOutsideBehavior(){return t()},get loop(){return e.loop},get trapFocus(){return n()},isValidEvent:i(),get onFocusOutside(){return e.onFocusOutside}},()=>o,{forceMount:!0}))}var RO=$("<div><div><!></div></div>"),FO=$("<div><div><!></div></div>");function DO(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"forceMount",3,!1),s=U(e,"side",3,"bottom"),o=U(e,"onInteractOutside",3,xr),l=U(e,"onEscapeKeydown",3,xr),c=U(e,"preventScroll",3,!1),u=qe(e,["$$slots","$$events","$$legacy","id","ref","forceMount","side","onInteractOutside","onEscapeKeydown","children","child","preventScroll"]);const h=Bm.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),v=>i(v)),onInteractOutside:ke.with(()=>o()),onEscapeKeydown:ke.with(()=>l())}),d=B(()=>dr(u,h.props));var f=Z(),p=P(f);{var m=v=>{Wm(v,tt(()=>g(d),()=>h.popperProps,{get ref(){return h.opts.ref},get side(){return s()},get enabled(){return h.root.opts.open.current},get id(){return n()},get preventScroll(){return c()},forceMount:!0,popper:(S,A)=>{let C=()=>A?.().props,k=()=>A?.().wrapperProps;var M=Z();const N=B(()=>dr(C(),{style:h.props.style}));var F=P(M);{var z=V=>{var Q=Z(),K=P(Q);{let ie=B(()=>({props:g(N),wrapperProps:k(),...h.snippetProps}));Re(K,()=>e.child,()=>g(ie))}w(V,Q)},W=V=>{var Q=RO();Ht(Q,()=>({...k()}));var K=G(Q);Ht(K,()=>({...g(N)}));var ie=G(K);Re(ie,()=>e.children??je),j(K),j(Q),w(V,Q)};le(F,V=>{e.child?V(z):V(W,!1)})}w(S,M)},$$slots:{popper:!0}}))},y=v=>{var _=Z(),S=P(_);{var A=C=>{$m(C,tt(()=>g(d),()=>h.popperProps,{get ref(){return h.opts.ref},get side(){return s()},get open(){return h.root.opts.open.current},get id(){return n()},get preventScroll(){return c()},forceMount:!1,popper:(M,N)=>{let F=()=>N?.().props,z=()=>N?.().wrapperProps;var W=Z();const V=B(()=>dr(F(),{style:h.props.style}));var Q=P(W);{var K=L=>{var J=Z(),X=P(J);{let re=B(()=>({props:g(V),wrapperProps:z(),...h.snippetProps}));Re(X,()=>e.child,()=>g(re))}w(L,J)},ie=L=>{var J=FO();Ht(J,()=>({...z()}));var X=G(J);Ht(X,()=>({...g(V)}));var re=G(X);Re(re,()=>e.children??je),j(X),j(J),w(L,J)};le(Q,L=>{e.child?L(K):L(ie,!1)})}w(M,W)},$$slots:{popper:!0}}))};le(S,C=>{a()||C(A)},!0)}w(v,_)};le(p,v=>{a()?v(m):v(y,!1)})}w(r,f),we()}function Vm(r,e){ye(e,!0);let t=U(e,"mounted",15,!1),n=U(e,"onMountedChange",3,xr);Fp(()=>(t(!0),n()(!0),()=>{t(!1),n()(!1)})),we()}var LO=$("<div><!></div>"),BO=$("<!> <!>",1);function zO(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"label",19,()=>e.value),s=U(e,"disabled",3,!1),o=U(e,"onHighlight",3,xr),l=U(e,"onUnhighlight",3,xr),c=qe(e,["$$slots","$$events","$$legacy","id","ref","value","label","disabled","children","child","onHighlight","onUnhighlight"]);const u=zm.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),v=>i(v)),value:ke.with(()=>e.value),disabled:ke.with(()=>s()),label:ke.with(()=>a()),onHighlight:ke.with(()=>o()),onUnhighlight:ke.with(()=>l())}),h=B(()=>dr(c,u.props));var d=BO(),f=P(d);{var p=v=>{var _=Z(),S=P(_);{let A=B(()=>({props:g(h),...u.snippetProps}));Re(S,()=>e.child,()=>g(A))}w(v,_)},m=v=>{var _=LO();Ht(_,()=>({...g(h)}));var S=G(_);Re(S,()=>e.children??je,()=>u.snippetProps),j(_),w(v,_)};le(f,v=>{e.child?v(p):v(m,!1)})}var y=te(f,2);Vm(y,{get mounted(){return u.mounted},set mounted(v){u.mounted=v}}),w(r,d),we()}var UO=$("<div><!></div>");function jO(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=qe(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const s=jm.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),d=>i(d))}),o=B(()=>dr(a,s.props));var l=Z(),c=P(l);{var u=d=>{var f=Z(),p=P(f);Re(p,()=>e.child,()=>({props:g(o)})),w(d,f)},h=d=>{var f=UO();Ht(f,()=>({...g(o)}));var p=G(f);Re(p,()=>e.children??je),j(f),w(d,f)};le(c,d=>{e.child?d(u):d(h,!1)})}w(r,l),we()}var HO=$("<div><!></div>"),qO=$("<!> <!>",1);function GO(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"delay",3,()=>50),s=qe(e,["$$slots","$$events","$$legacy","id","ref","delay","child","children"]);const o=Hm.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),d=>i(d)),delay:ke.with(()=>a())}),l=B(()=>dr(s,o.props));var c=Z(),u=P(c);{var h=d=>{var f=qO(),p=P(f);Vm(p,{get mounted(){return o.scrollButtonState.mounted},set mounted(_){o.scrollButtonState.mounted=_}});var m=te(p,2);{var y=_=>{var S=Z(),A=P(S);Re(A,()=>e.child,()=>({props:s})),w(_,S)},v=_=>{var S=HO();Ht(S,()=>({...g(l)}));var A=G(S);Re(A,()=>e.children??je),j(S),w(_,S)};le(m,_=>{e.child?_(y):_(v,!1)})}w(d,f)};le(u,d=>{o.canScrollDown&&d(h)})}w(r,c),we()}var $O=$("<div><!></div>"),WO=$("<!> <!>",1);function VO(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"delay",3,()=>50),s=qe(e,["$$slots","$$events","$$legacy","id","ref","delay","child","children"]);const o=qm.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),d=>i(d)),delay:ke.with(()=>a())}),l=B(()=>dr(s,o.props));var c=Z(),u=P(c);{var h=d=>{var f=WO(),p=P(f);Vm(p,{get mounted(){return o.scrollButtonState.mounted},set mounted(_){o.scrollButtonState.mounted=_}});var m=te(p,2);{var y=_=>{var S=Z(),A=P(S);Re(A,()=>e.child,()=>({props:s})),w(_,S)},v=_=>{var S=$O();Ht(S,()=>({...g(l)}));var A=G(S);Re(A,()=>e.children??je),j(S),w(_,S)};le(m,_=>{e.child?_(y):_(v,!1)})}w(d,f)};le(u,d=>{o.canScrollUp&&d(h)})}w(r,c),we()}const XO=[Yo,ks],KO=[_s,jp,zf],my=[Ss,Up,Bf],YO=[...KO,...my];function by(r){return r.pointerType==="mouse"}function QO(r,{select:e=!1}={}){if(!r||!r.focus)return;const t=_h(r);if(t.activeElement===r)return;const n=t.activeElement;r.focus({preventScroll:!0}),r!==n&&lM(r)&&e&&r.select()}function JO(r,{select:e=!1}={},t){const n=t();for(const i of r)if(QO(i,{select:e}),t()!==n)return!0}function Oh(){return{getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"}}function ZO(r,e){if(!am(r,Oh()))return eN(r,e);const t=_h(r),n=L4(t.body,Oh());e==="prev"&&n.reverse();const i=n.indexOf(r);return i===-1?t.body:n.slice(i+1)[0]}function eN(r,e){const t=_h(r);if(!z4(r,Oh()))return t.body;const n=B4(t.body,Oh());e==="prev"&&n.reverse();const i=n.indexOf(r);return i===-1?t.body:n.slice(i+1).find(s=>am(s,Oh()))??t.body}class vy{#e;#t;#r;#n=ue(null);constructor(e){this.#e=e,this.#t=B(()=>this.#e.enabled()),this.#r=Dm(!1,{afterMs:e.transitTimeout??300,onChange:t=>{g(this.#t)&&this.#e.setIsPointerInTransit?.(t)},getWindow:()=>Lf(this.#e.triggerNode())}),$r([e.triggerNode,e.contentNode,e.enabled],([t,n,i])=>{if(!t||!n||!i)return;const a=o=>{this.#i(o,n)},s=o=>{this.#i(o,t)};return io(Zr(t,"pointerleave",a),Zr(n,"pointerleave",s))}),$r(()=>g(this.#n),()=>{const t=i=>{if(!g(this.#n))return;const a=i.target;if(!kh(a))return;const s={x:i.clientX,y:i.clientY},o=e.triggerNode()?.contains(a)||e.contentNode()?.contains(a),l=!iN(s,g(this.#n));o?this.#a():l&&(this.#a(),e.onPointerExit())},n=_h(e.triggerNode()??e.contentNode());if(n)return Zr(n,"pointermove",t)})}#a(){I(this.#n,null),this.#r.current=!1}#i(e,t){const n=e.currentTarget;if(!Jo(n))return;const i={x:e.clientX,y:e.clientY},a=tN(i,n.getBoundingClientRect()),s=rN(i,a),o=nN(t.getBoundingClientRect()),l=aN([...s,...o]);I(this.#n,l,!0),this.#r.current=!0}}function tN(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),i=Math.abs(e.right-r.x),a=Math.abs(e.left-r.x);switch(Math.min(t,n,i,a)){case a:return"left";case i:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function rN(r,e,t=5){const n=t*1.5;switch(e){case"top":return[{x:r.x-t,y:r.y+t},{x:r.x,y:r.y-n},{x:r.x+t,y:r.y+t}];case"bottom":return[{x:r.x-t,y:r.y-t},{x:r.x,y:r.y+n},{x:r.x+t,y:r.y-t}];case"left":return[{x:r.x+t,y:r.y-t},{x:r.x-n,y:r.y},{x:r.x+t,y:r.y+t}];case"right":return[{x:r.x-t,y:r.y-t},{x:r.x+n,y:r.y},{x:r.x-t,y:r.y+t}]}}function nN(r){const{top:e,right:t,bottom:n,left:i}=r;return[{x:i,y:e},{x:t,y:e},{x:t,y:n},{x:i,y:n}]}function iN(r,e){const{x:t,y:n}=r;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a].x,l=e[a].y,c=e[s].x,u=e[s].y;l>n!=u>n&&t<(c-o)*(n-l)/(u-l)+o&&(i=!i)}return i}function aN(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),sN(e)}function sN(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const i=r[n];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const i=r[n];for(;t.length>=2;){const a=t[t.length-1],s=t[t.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const yy=new Kn("Menu.Root"),Xm=new Kn("Menu.Root | Menu.Sub"),wy=new Kn("Menu.Content"),oN=new pM("bitsmenuopen",{bubbles:!1,cancelable:!0}),lN=Ko({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]});class Km{static create(e){const t=new Km(e);return yy.set(t)}opts;isUsingKeyboard=new rl;#e=ue(!1);get ignoreCloseAutoFocus(){return g(this.#e)}set ignoreCloseAutoFocus(e){I(this.#e,e,!0)}#t=ue(!1);get isPointerInTransit(){return g(this.#t)}set isPointerInTransit(e){I(this.#t,e,!0)}constructor(e){this.opts=e}getBitsAttr=e=>lN.getAttr(e,this.opts.variant.current)}class Ym{static create(e,t){return Xm.set(new Ym(e,t,null))}opts;root;parentMenu;contentId=ke.with(()=>"");#e=ue(null);get contentNode(){return g(this.#e)}set contentNode(e){I(this.#e,e,!0)}#t=ue(null);get triggerNode(){return g(this.#t)}set triggerNode(e){I(this.#t,e,!0)}constructor(e,t,n){this.opts=e,this.root=t,this.parentMenu=n,new Sh({ref:ke.with(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),n&&$r(()=>n.opts.open.current,()=>{n.opts.open.current||(this.opts.open.current=!1)})}toggleOpen(){this.opts.open.current=!this.opts.open.current}onOpen(){this.opts.open.current=!0}onClose(){this.opts.open.current=!1}}class Qm{static create(e){return wy.set(new Qm(e,Xm.get()))}opts;parentMenu;rovingFocusGroup;domContext;attachment;#e=ue("");get search(){return g(this.#e)}set search(e){I(this.#e,e,!0)}#t=0;#r;#n=ue(!1);get mounted(){return g(this.#n)}set mounted(e){I(this.#n,e,!0)}#a;constructor(e,t){this.opts=e,this.parentMenu=t,this.domContext=new Vo(e.ref),this.attachment=on(this.opts.ref,n=>{this.parentMenu.contentNode!==n&&(this.parentMenu.contentNode=n)}),t.contentId=e.id,this.#a=e.isSub??!1,this.onkeydown=this.onkeydown.bind(this),this.onblur=this.onblur.bind(this),this.onfocus=this.onfocus.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this),new vy({contentNode:()=>this.parentMenu.contentNode,triggerNode:()=>this.parentMenu.triggerNode,enabled:()=>this.parentMenu.opts.open.current&&!!this.parentMenu.triggerNode?.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger")),onPointerExit:()=>{this.parentMenu.opts.open.current=!1},setIsPointerInTransit:n=>{this.parentMenu.root.isPointerInTransit=n}}),this.#r=new hy({getActiveElement:()=>this.domContext.getActiveElement(),getWindow:()=>this.domContext.getWindow()}).handleTypeaheadSearch,this.rovingFocusGroup=new qT({rootNode:ke.with(()=>this.parentMenu.contentNode),candidateAttr:this.parentMenu.root.getBitsAttr("item"),loop:this.opts.loop,orientation:ke.with(()=>"vertical")}),$r(()=>this.parentMenu.contentNode,n=>{if(!n)return;const i=()=>{ja(()=>{this.parentMenu.root.isUsingKeyboard.current&&this.rovingFocusGroup.focusFirstCandidate()})};return oN.listen(n,i)}),Nt(()=>{this.parentMenu.opts.open.current||this.domContext.getWindow().clearTimeout(this.#t)})}#i(){const e=this.parentMenu.contentNode;return e?Array.from(e.querySelectorAll(`[${this.parentMenu.root.getBitsAttr("item")}]:not([data-disabled])`)):[]}#s(){return this.parentMenu.root.isPointerInTransit}onCloseAutoFocus=e=>{this.opts.onCloseAutoFocus.current(e),!(e.defaultPrevented||this.#a)&&this.parentMenu.triggerNode&&am(this.parentMenu.triggerNode)&&this.parentMenu.triggerNode.focus()};handleTabKeyDown(e){let t=this.parentMenu;for(;t.parentMenu!==null;)t=t.parentMenu;if(!t.triggerNode)return;e.preventDefault();const n=ZO(t.triggerNode,e.shiftKey?"prev":"next");n?(this.parentMenu.root.ignoreCloseAutoFocus=!0,t.onClose(),ja(()=>{n.focus(),ja(()=>{this.parentMenu.root.ignoreCloseAutoFocus=!1})})):this.domContext.getDocument().body.focus()}onkeydown(e){if(e.defaultPrevented)return;if(e.key===Hp){this.handleTabKeyDown(e);return}const t=e.target,n=e.currentTarget;if(!Jo(t)||!Jo(n))return;const i=t.closest(`[${this.parentMenu.root.getBitsAttr("content")}]`)?.id===this.parentMenu.contentId.current,a=e.ctrlKey||e.altKey||e.metaKey,s=e.key.length===1;if(this.rovingFocusGroup.handleKeydown(t,e)||e.code==="Space")return;const l=this.#i();i&&!a&&s&&this.#r(e.key,l),e.target?.id===this.parentMenu.contentId.current&&YO.includes(e.key)&&(e.preventDefault(),my.includes(e.key)&&l.reverse(),JO(l,{select:!1},()=>this.domContext.getActiveElement()))}onblur(e){kh(e.currentTarget)&&kh(e.target)&&(e.currentTarget.contains?.(e.target)||(this.domContext.getWindow().clearTimeout(this.#t),this.search=""))}onfocus(e){this.parentMenu.root.isUsingKeyboard.current&&ja(()=>this.rovingFocusGroup.focusFirstCandidate())}onItemEnter(){return this.#s()}onItemLeave(e){if(e.currentTarget.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger"))||this.#s()||this.parentMenu.root.isUsingKeyboard.current)return;this.parentMenu.contentNode?.focus(),this.rovingFocusGroup.setCurrentTabStopId("")}onTriggerLeave(){return!!this.#s()}onOpenAutoFocus=e=>{if(e.defaultPrevented)return;e.preventDefault(),this.parentMenu.contentNode?.focus()};handleInteractOutside(e){if(!aM(e.target))return;const t=this.parentMenu.triggerNode?.id;if(e.target.id===t){e.preventDefault();return}e.target.closest(`#${t}`)&&e.preventDefault()}#o=B(()=>({open:this.parentMenu.opts.open.current}));get snippetProps(){return g(this.#o)}set snippetProps(e){I(this.#o,e)}#l=B(()=>({id:this.opts.id.current,role:"menu","aria-orientation":"vertical",[this.parentMenu.root.getBitsAttr("content")]:"","data-state":Xo(this.parentMenu.opts.open.current),onkeydown:this.onkeydown,onblur:this.onblur,onfocus:this.onfocus,dir:this.parentMenu.root.opts.dir.current,style:{pointerEvents:"auto"},...this.attachment}));get props(){return g(this.#l)}set props(e){I(this.#l,e)}popperProps={onCloseAutoFocus:e=>this.onCloseAutoFocus(e)}}class cN{opts;content;attachment;#e=ue(!1);constructor(e,t){this.opts=e,this.content=t,this.attachment=on(this.opts.ref),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this)}onpointermove(e){if(!e.defaultPrevented&&by(e))if(this.opts.disabled.current)this.content.onItemLeave(e);else{if(this.content.onItemEnter())return;const n=e.currentTarget;if(!Jo(n))return;n.focus()}}onpointerleave(e){e.defaultPrevented||by(e)&&this.content.onItemLeave(e)}onfocus(e){ja(()=>{e.defaultPrevented||this.opts.disabled.current||I(this.#e,!0)})}onblur(e){ja(()=>{e.defaultPrevented||I(this.#e,!1)})}#t=B(()=>({id:this.opts.id.current,tabindex:-1,role:"menuitem","aria-disabled":OT(this.opts.disabled.current),"data-disabled":xs(this.opts.disabled.current),"data-highlighted":g(this.#e)?"":void 0,[this.content.parentMenu.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,onfocus:this.onfocus,onblur:this.onblur,...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class Jm{static create(e){const t=new cN(e,wy.get());return new Jm(e,t)}opts;item;root;#e=!1;constructor(e,t){this.opts=e,this.item=t,this.root=t.content.parentMenu.root,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this)}#t(){if(this.item.opts.disabled.current)return;const e=new CustomEvent("menuitemselect",{bubbles:!0,cancelable:!0});if(this.opts.onSelect.current(e),e.defaultPrevented){this.item.content.parentMenu.root.isUsingKeyboard.current=!1;return}this.opts.closeOnSelect.current&&this.item.content.parentMenu.root.opts.onClose()}onkeydown(e){const t=this.item.content.search!=="";if(!(this.item.opts.disabled.current||t&&e.key===ks)&&XO.includes(e.key)){if(!Jo(e.currentTarget))return;e.currentTarget.click(),e.preventDefault()}}onclick(e){this.item.opts.disabled.current||this.#t()}onpointerup(e){if(!e.defaultPrevented&&!this.#e){if(!Jo(e.currentTarget))return;e.currentTarget?.click()}}onpointerdown(e){this.#e=!0}#r=B(()=>dr(this.item.props,{onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown}));get props(){return g(this.#r)}set props(e){I(this.#r,e)}}class Zm{static create(e){return new Zm(e,yy.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref)}#e=B(()=>({id:this.opts.id.current,role:"group",[this.root.getBitsAttr("separator")]:"",...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}class e2{static create(e){return new e2(e,Xm.get())}opts;parentMenu;attachment;constructor(e,t){this.opts=e,this.parentMenu=t,this.attachment=on(this.opts.ref,n=>this.parentMenu.triggerNode=n)}onpointerdown=e=>{if(!this.opts.disabled.current){if(e.pointerType==="touch")return e.preventDefault();e.button===0&&e.ctrlKey===!1&&(this.parentMenu.toggleOpen(),this.parentMenu.opts.open.current||e.preventDefault())}};onpointerup=e=>{this.opts.disabled.current||e.pointerType==="touch"&&(e.preventDefault(),this.parentMenu.toggleOpen())};onkeydown=e=>{if(!this.opts.disabled.current){if(e.key===ks||e.key===Yo){this.parentMenu.toggleOpen(),e.preventDefault();return}e.key===_s&&(this.parentMenu.onOpen(),e.preventDefault())}};#e=B(()=>{if(this.parentMenu.opts.open.current&&this.parentMenu.contentId.current)return this.parentMenu.contentId.current});#t=B(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"aria-haspopup":"menu","aria-expanded":Lp(this.parentMenu.opts.open.current),"aria-controls":g(this.#e),"data-disabled":xs(this.opts.disabled.current),"data-state":Xo(this.parentMenu.opts.open.current),[this.parentMenu.root.getBitsAttr("trigger")]:"",onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown,...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}var uN=$("<div><!></div>");function hN(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=U(e,"disabled",3,!1),s=U(e,"onSelect",3,xr),o=U(e,"closeOnSelect",3,!0),l=qe(e,["$$slots","$$events","$$legacy","child","children","ref","id","disabled","onSelect","closeOnSelect"]);const c=Jm.create({id:ke.with(()=>i()),disabled:ke.with(()=>a()),onSelect:ke.with(()=>s()),ref:ke.with(()=>n(),m=>n(m)),closeOnSelect:ke.with(()=>o())}),u=B(()=>dr(l,c.props));var h=Z(),d=P(h);{var f=m=>{var y=Z(),v=P(y);Re(v,()=>e.child,()=>({props:g(u)})),w(m,y)},p=m=>{var y=uN();Ht(y,()=>({...g(u)}));var v=G(y);Re(v,()=>e.children??je),j(y),w(m,y)};le(d,m=>{e.child?m(f):m(p,!1)})}w(r,h),we()}var dN=$("<div><!></div>");function fN(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=qe(e,["$$slots","$$events","$$legacy","ref","id","child","children"]);const s=Zm.create({id:ke.with(()=>i()),ref:ke.with(()=>n(),d=>n(d))}),o=B(()=>dr(a,s.props));var l=Z(),c=P(l);{var u=d=>{var f=Z(),p=P(f);Re(p,()=>e.child,()=>({props:g(o)})),w(d,f)},h=d=>{var f=dN();Ht(f,()=>({...g(o)}));var p=G(f);Re(p,()=>e.children??je),j(f),w(d,f)};le(c,d=>{e.child?d(u):d(h,!1)})}w(r,l),we()}function t2(r,e){ye(e,!0);let t=U(e,"open",15,!1),n=U(e,"onOpenChange",3,xr),i=U(e,"onOpenChangeComplete",3,xr);jf.create({variant:ke.with(()=>"dialog"),open:ke.with(()=>t(),o=>{t(o),n()(o)}),onOpenChangeComplete:ke.with(()=>i())});var a=Z(),s=P(a);Re(s,()=>e.children??je),w(r,a),we()}var gN=$("<button><!></button>");function r2(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"disabled",3,!1),s=qe(e,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const o=qp.create({variant:ke.with(()=>"close"),id:ke.with(()=>n()),ref:ke.with(()=>i(),f=>i(f)),disabled:ke.with(()=>!!a())}),l=B(()=>dr(s,o.props));var c=Z(),u=P(c);{var h=f=>{var p=Z(),m=P(p);Re(m,()=>e.child,()=>({props:g(l)})),w(f,p)},d=f=>{var p=gN();Ht(p,()=>({...g(l)}));var m=G(p);Re(m,()=>e.children??je),j(p),w(f,p)};le(u,f=>{e.child?f(h):f(d,!1)})}w(r,c),we()}var pN=$("<!> <!>",1),mN=$("<!> <div><!></div>",1);function n2(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"forceMount",3,!1),s=U(e,"onCloseAutoFocus",3,xr),o=U(e,"onOpenAutoFocus",3,xr),l=U(e,"onEscapeKeydown",3,xr),c=U(e,"onInteractOutside",3,xr),u=U(e,"trapFocus",3,!0),h=U(e,"preventScroll",3,!0),d=U(e,"restoreScrollDelay",3,null),f=qe(e,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onOpenAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const p=Hf.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),y=>i(y))}),m=B(()=>dr(f,p.props));{const y=_=>{{const S=(C,k)=>{let M=()=>k?.().props;rm(C,tt(()=>g(m),{get enabled(){return p.root.opts.open.current},get ref(){return p.opts.ref},onEscapeKeydown:N=>{l()(N),!N.defaultPrevented&&p.root.handleClose()},children:(N,F)=>{em(N,tt(()=>g(m),{get ref(){return p.opts.ref},get enabled(){return p.root.opts.open.current},onInteractOutside:z=>{c()(z),!z.defaultPrevented&&p.root.handleClose()},children:(z,W)=>{cm(z,tt(()=>g(m),{get ref(){return p.opts.ref},get enabled(){return p.root.opts.open.current},children:(V,Q)=>{var K=Z(),ie=P(K);{var L=X=>{var re=pN(),D=P(re);{var se=q=>{nu(q,{get preventScroll(){return h()},get restoreScrollDelay(){return d()}})};le(D,q=>{p.root.opts.open.current&&q(se)})}var ce=te(D,2);{let q=B(()=>({props:dr(g(m),M()),...p.snippetProps}));Re(ce,()=>e.child,()=>g(q))}w(X,re)},J=X=>{var re=mN(),D=P(re);nu(D,{get preventScroll(){return h()}});var se=te(D,2);Ht(se,q=>({...q}),[()=>dr(g(m),M())]);var ce=G(se);Re(ce,()=>e.children??je),j(se),w(X,re)};le(ie,X=>{e.child?X(L):X(J,!1)})}w(V,K)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))};let A=B(()=>j4({forceMount:a(),present:p.root.opts.open.current,open:p.root.opts.open.current}));om(_,{get ref(){return p.opts.ref},loop:!0,get trapFocus(){return u()},get enabled(){return g(A)},get onOpenAutoFocus(){return o()},onCloseAutoFocus:C=>{s()(C),!C.defaultPrevented&&tu(1,()=>p.root.triggerNode?.focus())},focusScope:S,$$slots:{focusScope:!0}})}};let v=B(()=>p.root.opts.open.current||a());so(r,tt(()=>g(m),{get forceMount(){return a()},get open(){return g(v)},get ref(){return p.opts.ref},presence:y,$$slots:{presence:!0}}))}we()}function bN(r,e){ye(e,!0);let t=U(e,"open",15,!1),n=U(e,"dir",3,"ltr"),i=U(e,"onOpenChange",3,xr),a=U(e,"onOpenChangeComplete",3,xr),s=U(e,"_internal_variant",3,"dropdown-menu");const o=Km.create({variant:ke.with(()=>s()),dir:ke.with(()=>n()),onClose:()=>{t(!1),i()(!1)}});Ym.create({open:ke.with(()=>t(),l=>{t(l),i()(l)}),onOpenChangeComplete:ke.with(()=>a())},o),Fm(r,{children:(l,c)=>{var u=Z(),h=P(u);Re(h,()=>e.children??je),w(l,u)},$$slots:{default:!0}}),we()}var vN=$("<div><div><!></div></div>"),yN=$("<div><div><!></div></div>");function wN(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"loop",3,!0),s=U(e,"onInteractOutside",3,xr),o=U(e,"onEscapeKeydown",3,xr),l=U(e,"onCloseAutoFocus",3,xr),c=U(e,"forceMount",3,!1),u=U(e,"trapFocus",3,!1),h=qe(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onEscapeKeydown","onCloseAutoFocus","forceMount","trapFocus"]);const d=Qm.create({id:ke.with(()=>n()),loop:ke.with(()=>a()),ref:ke.with(()=>i(),A=>i(A)),onCloseAutoFocus:ke.with(()=>l())}),f=B(()=>dr(h,d.props));function p(A){if(d.handleInteractOutside(A),!A.defaultPrevented&&(s()(A),!A.defaultPrevented)){if(A.target&&A.target instanceof Element){const C=`[${d.parentMenu.root.getBitsAttr("sub-content")}]`;if(A.target.closest(C))return}d.parentMenu.onClose()}}function m(A){o()(A),!A.defaultPrevented&&d.parentMenu.onClose()}var y=Z(),v=P(y);{var _=A=>{Wm(A,tt(()=>g(f),()=>d.popperProps,{get ref(){return d.opts.ref},get enabled(){return d.parentMenu.opts.open.current},onInteractOutside:p,onEscapeKeydown:m,get trapFocus(){return u()},get loop(){return a()},forceMount:!0,get id(){return n()},popper:(k,M)=>{let N=()=>M?.().props,F=()=>M?.().wrapperProps;var z=Z();const W=B(()=>dr(N(),{style:Mh("dropdown-menu")}));var V=P(z);{var Q=ie=>{var L=Z(),J=P(L);{let X=B(()=>({props:g(W),wrapperProps:F(),...d.snippetProps}));Re(J,()=>e.child,()=>g(X))}w(ie,L)},K=ie=>{var L=vN();Ht(L,()=>({...F()}));var J=G(L);Ht(J,()=>({...g(W)}));var X=G(J);Re(X,()=>e.children??je),j(J),j(L),w(ie,L)};le(V,ie=>{e.child?ie(Q):ie(K,!1)})}w(k,z)},$$slots:{popper:!0}}))},S=A=>{var C=Z(),k=P(C);{var M=N=>{$m(N,tt(()=>g(f),()=>d.popperProps,{get ref(){return d.opts.ref},get open(){return d.parentMenu.opts.open.current},onInteractOutside:p,onEscapeKeydown:m,get trapFocus(){return u()},get loop(){return a()},forceMount:!1,get id(){return n()},popper:(z,W)=>{let V=()=>W?.().props,Q=()=>W?.().wrapperProps;var K=Z();const ie=B(()=>dr(V(),{style:Mh("dropdown-menu")}));var L=P(K);{var J=re=>{var D=Z(),se=P(D);{let ce=B(()=>({props:g(ie),wrapperProps:Q(),...d.snippetProps}));Re(se,()=>e.child,()=>g(ce))}w(re,D)},X=re=>{var D=yN();Ht(D,()=>({...Q()}));var se=G(D);Ht(se,()=>({...g(ie)}));var ce=G(se);Re(ce,()=>e.children??je),j(se),j(D),w(re,D)};le(L,re=>{e.child?re(J):re(X,!1)})}w(z,K)},$$slots:{popper:!0}}))};le(k,N=>{c()||N(M)},!0)}w(A,C)};le(v,A=>{c()?A(_):A(S,!1)})}w(r,y),we()}var xN=$("<button><!></button>");function _N(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"disabled",3,!1),s=U(e,"type",3,"button"),o=qe(e,["$$slots","$$events","$$legacy","id","ref","child","children","disabled","type"]);const l=e2.create({id:ke.with(()=>n()),disabled:ke.with(()=>a()??!1),ref:ke.with(()=>i(),u=>i(u))}),c=B(()=>dr(o,l.props,{type:s()}));Gm(r,{get id(){return n()},get ref(){return l.opts.ref},children:(u,h)=>{var d=Z(),f=P(d);{var p=y=>{var v=Z(),_=P(v);Re(_,()=>e.child,()=>({props:g(c)})),w(y,v)},m=y=>{var v=xN();Ht(v,()=>({...g(c)}));var _=G(v);Re(_,()=>e.children??je),j(v),w(y,v)};le(f,y=>{e.child?y(p):y(m,!1)})}w(u,d)},$$slots:{default:!0}}),we()}const SN=Ko({component:"label",parts:["root"]});class i2{static create(e){return new i2(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=on(this.opts.ref),this.onmousedown=this.onmousedown.bind(this)}onmousedown(e){e.detail>1&&e.preventDefault()}#e=B(()=>({id:this.opts.id.current,[SN.root]:"",onmousedown:this.onmousedown,...this.attachment}));get props(){return g(this.#e)}set props(e){I(this.#e,e)}}var kN=$("<label><!></label>");function AN(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=qe(e,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const s=i2.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),d=>i(d))}),o=B(()=>dr(a,s.props,{for:e.for}));var l=Z(),c=P(l);{var u=d=>{var f=Z(),p=P(f);Re(p,()=>e.child,()=>({props:g(o)})),w(d,f)},h=d=>{var f=kN();Ht(f,()=>({...g(o),for:e.for}));var p=G(f);Re(p,()=>e.children??je),j(f),w(d,f)};le(c,d=>{e.child?d(u):d(h,!1)})}w(r,l),we()}class lu{#e;#t;constructor(e,t){this.#e=e,this.#t=t,this.handler=this.handler.bind(this),Nt(this.handler)}handler(){let e=0;const t=this.#e();if(!t)return;const n=new ResizeObserver(()=>{cancelAnimationFrame(e),e=window.requestAnimationFrame(this.#t)});return n.observe(t),()=>{window.cancelAnimationFrame(e),n.unobserve(t)}}}function CN(r,e,t){return Math.min(t,Math.max(e,r))}const Nh=Ko({component:"scroll-area",parts:["root","viewport","corner","thumb","scrollbar"]}),Ph=new Kn("ScrollArea.Root"),Rh=new Kn("ScrollArea.Scrollbar"),s0=new Kn("ScrollArea.ScrollbarVisible"),a2=new Kn("ScrollArea.ScrollbarAxis"),xy=new Kn("ScrollArea.ScrollbarShared");class s2{static create(e){return Ph.set(new s2(e))}opts;attachment;#e=ue(null);get scrollAreaNode(){return g(this.#e)}set scrollAreaNode(e){I(this.#e,e,!0)}#t=ue(null);get viewportNode(){return g(this.#t)}set viewportNode(e){I(this.#t,e,!0)}#r=ue(null);get contentNode(){return g(this.#r)}set contentNode(e){I(this.#r,e,!0)}#n=ue(null);get scrollbarXNode(){return g(this.#n)}set scrollbarXNode(e){I(this.#n,e,!0)}#a=ue(null);get scrollbarYNode(){return g(this.#a)}set scrollbarYNode(e){I(this.#a,e,!0)}#i=ue(0);get cornerWidth(){return g(this.#i)}set cornerWidth(e){I(this.#i,e,!0)}#s=ue(0);get cornerHeight(){return g(this.#s)}set cornerHeight(e){I(this.#s,e,!0)}#o=ue(!1);get scrollbarXEnabled(){return g(this.#o)}set scrollbarXEnabled(e){I(this.#o,e,!0)}#l=ue(!1);get scrollbarYEnabled(){return g(this.#l)}set scrollbarYEnabled(e){I(this.#l,e,!0)}domContext;constructor(e){this.opts=e,this.attachment=on(e.ref,t=>this.scrollAreaNode=t),this.domContext=new Vo(e.ref)}#c=B(()=>({id:this.opts.id.current,dir:this.opts.dir.current,style:{position:"relative","--bits-scroll-area-corner-height":`${this.cornerHeight}px`,"--bits-scroll-area-corner-width":`${this.cornerWidth}px`},[Nh.root]:"",...this.attachment}));get props(){return g(this.#c)}set props(e){I(this.#c,e)}}class o2{static create(e){return new o2(e,Ph.get())}opts;root;attachment;#e=ke(ru());#t=ke(null);contentAttachment=on(this.#t,e=>this.root.contentNode=e);constructor(e,t){this.opts=e,this.root=t,this.attachment=on(e.ref,n=>this.root.viewportNode=n)}#r=B(()=>({id:this.opts.id.current,style:{overflowX:this.root.scrollbarXEnabled?"scroll":"hidden",overflowY:this.root.scrollbarYEnabled?"scroll":"hidden"},[Nh.viewport]:"",...this.attachment}));get props(){return g(this.#r)}set props(e){I(this.#r,e)}#n=B(()=>({id:this.#e.current,"data-scroll-area-content":"",style:{minWidth:this.root.scrollbarXEnabled?"fit-content":void 0},...this.contentAttachment}));get contentProps(){return g(this.#n)}set contentProps(e){I(this.#n,e)}}class l2{static create(e){return Rh.set(new l2(e,Ph.get()))}opts;root;#e=B(()=>this.opts.orientation.current==="horizontal");get isHorizontal(){return g(this.#e)}set isHorizontal(e){I(this.#e,e)}#t=ue(!1);get hasThumb(){return g(this.#t)}set hasThumb(e){I(this.#t,e,!0)}constructor(e,t){this.opts=e,this.root=t,$r(()=>this.isHorizontal,n=>n?(this.root.scrollbarXEnabled=!0,()=>{this.root.scrollbarXEnabled=!1}):(this.root.scrollbarYEnabled=!0,()=>{this.root.scrollbarYEnabled=!1}))}}class c2{static create(){return new c2(Rh.get())}scrollbar;root;#e=ue(!1);get isVisible(){return g(this.#e)}set isVisible(e){I(this.#e,e,!0)}constructor(e){this.scrollbar=e,this.root=e.root,Nt(()=>{const t=this.root.scrollAreaNode,n=this.root.opts.scrollHideDelay.current;let i=0;if(!t)return;const a=()=>{this.root.domContext.clearTimeout(i),mn(()=>this.isVisible=!0)},s=()=>{i&&this.root.domContext.clearTimeout(i),i=this.root.domContext.setTimeout(()=>{mn(()=>{this.scrollbar.hasThumb=!1,this.isVisible=!1})},n)},o=io(Zr(t,"pointerenter",a),Zr(t,"pointerleave",s));return()=>{this.root.domContext.getWindow().clearTimeout(i),o()}})}#t=B(()=>({"data-state":this.isVisible?"visible":"hidden"}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class u2{static create(){return new u2(Rh.get())}scrollbar;root;machine=new A4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});#e=B(()=>this.machine.state.current==="hidden");get isHidden(){return g(this.#e)}set isHidden(e){I(this.#e,e)}constructor(e){this.scrollbar=e,this.root=e.root;const t=Df(()=>this.machine.dispatch("SCROLL_END"),100);Nt(()=>{const n=this.machine.state.current,i=this.root.opts.scrollHideDelay.current;if(n==="idle"){const a=this.root.domContext.setTimeout(()=>this.machine.dispatch("HIDE"),i);return()=>this.root.domContext.clearTimeout(a)}}),Nt(()=>{const n=this.root.viewportNode;if(!n)return;const i=this.scrollbar.isHorizontal?"scrollLeft":"scrollTop";let a=n[i];return Ah(n,"scroll",()=>{const l=n[i];a!==l&&(this.machine.dispatch("SCROLL"),t()),a=l})}),this.onpointerenter=this.onpointerenter.bind(this),this.onpointerleave=this.onpointerleave.bind(this)}onpointerenter(e){this.machine.dispatch("POINTER_ENTER")}onpointerleave(e){this.machine.dispatch("POINTER_LEAVE")}#t=B(()=>({"data-state":this.machine.state.current==="hidden"?"hidden":"visible",onpointerenter:this.onpointerenter,onpointerleave:this.onpointerleave}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class o0{static create(){return new o0(Rh.get())}scrollbar;root;#e=ue(!1);get isVisible(){return g(this.#e)}set isVisible(e){I(this.#e,e,!0)}constructor(e){this.scrollbar=e,this.root=e.root;const t=Df(()=>{const n=this.root.viewportNode;if(!n)return;const i=n.offsetWidth<n.scrollWidth,a=n.offsetHeight<n.scrollHeight;this.isVisible=this.scrollbar.isHorizontal?i:a},10);new lu(()=>this.root.viewportNode,t),new lu(()=>this.root.contentNode,t)}#t=B(()=>({"data-state":this.isVisible?"visible":"hidden"}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}}class h2{static create(){return s0.set(new h2(Rh.get()))}scrollbar;root;#e=ue(null);get thumbNode(){return g(this.#e)}set thumbNode(e){I(this.#e,e,!0)}#t=ue(0);get pointerOffset(){return g(this.#t)}set pointerOffset(e){I(this.#t,e,!0)}#r=ue({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}});get sizes(){return g(this.#r)}set sizes(e){I(this.#r,e)}#n=B(()=>_y(this.sizes.viewport,this.sizes.content));get thumbRatio(){return g(this.#n)}set thumbRatio(e){I(this.#n,e)}#a=B(()=>this.thumbRatio>0&&this.thumbRatio<1);get hasThumb(){return g(this.#a)}set hasThumb(e){I(this.#a,e)}#i=ue("");get prevTransformStyle(){return g(this.#i)}set prevTransformStyle(e){I(this.#i,e,!0)}constructor(e){this.scrollbar=e,this.root=e.root,Nt(()=>{this.scrollbar.hasThumb=this.hasThumb}),Nt(()=>{!this.scrollbar.hasThumb&&this.thumbNode&&(this.prevTransformStyle=this.thumbNode.style.transform)})}setSizes(e){this.sizes=e}getScrollPosition(e,t){return EN({pointerPos:e,pointerOffset:this.pointerOffset,sizes:this.sizes,dir:t})}onThumbPointerUp(){this.pointerOffset=0}onThumbPointerDown(e){this.pointerOffset=e}xOnThumbPositionChange(){if(!(this.root.viewportNode&&this.thumbNode))return;const e=this.root.viewportNode.scrollLeft,n=`translate3d(${Sy({scrollPos:e,sizes:this.sizes,dir:this.root.opts.dir.current})}px, 0, 0)`;this.thumbNode.style.transform=n,this.prevTransformStyle=n}xOnWheelScroll(e){this.root.viewportNode&&(this.root.viewportNode.scrollLeft=e)}xOnDragScroll(e){this.root.viewportNode&&(this.root.viewportNode.scrollLeft=this.getScrollPosition(e,this.root.opts.dir.current))}yOnThumbPositionChange(){if(!(this.root.viewportNode&&this.thumbNode))return;const e=this.root.viewportNode.scrollTop,n=`translate3d(0, ${Sy({scrollPos:e,sizes:this.sizes})}px, 0)`;this.thumbNode.style.transform=n,this.prevTransformStyle=n}yOnWheelScroll(e){this.root.viewportNode&&(this.root.viewportNode.scrollTop=e)}yOnDragScroll(e){this.root.viewportNode&&(this.root.viewportNode.scrollTop=this.getScrollPosition(e,this.root.opts.dir.current))}}class d2{static create(e){return a2.set(new d2(e,s0.get()))}opts;scrollbarVis;root;scrollbar;attachment;#e=ue();get computedStyle(){return g(this.#e)}set computedStyle(e){I(this.#e,e,!0)}constructor(e,t){this.opts=e,this.scrollbarVis=t,this.root=t.root,this.scrollbar=t.scrollbar,this.attachment=on(this.scrollbar.opts.ref,n=>this.root.scrollbarXNode=n),Nt(()=>{this.scrollbar.opts.ref.current&&this.opts.mounted.current&&(this.computedStyle=getComputedStyle(this.scrollbar.opts.ref.current))}),Nt(()=>{this.onResize()})}onThumbPointerDown=e=>{this.scrollbarVis.onThumbPointerDown(e.x)};onDragScroll=e=>{this.scrollbarVis.xOnDragScroll(e.x)};onThumbPointerUp=()=>{this.scrollbarVis.onThumbPointerUp()};onThumbPositionChange=()=>{this.scrollbarVis.xOnThumbPositionChange()};onWheelScroll=(e,t)=>{if(!this.root.viewportNode)return;const n=this.root.viewportNode.scrollLeft+e.deltaX;this.scrollbarVis.xOnWheelScroll(n),Ay(n,t)&&e.preventDefault()};onResize=()=>{this.scrollbar.opts.ref.current&&this.root.viewportNode&&this.computedStyle&&this.scrollbarVis.setSizes({content:this.root.viewportNode.scrollWidth,viewport:this.root.viewportNode.offsetWidth,scrollbar:{size:this.scrollbar.opts.ref.current.clientWidth,paddingStart:l0(this.computedStyle.paddingLeft),paddingEnd:l0(this.computedStyle.paddingRight)}})};#t=B(()=>c0(this.scrollbarVis.sizes));get thumbSize(){return g(this.#t)}set thumbSize(e){I(this.#t,e)}#r=B(()=>({id:this.scrollbar.opts.id.current,"data-orientation":"horizontal",style:{bottom:0,left:this.root.opts.dir.current==="rtl"?"var(--bits-scroll-area-corner-width)":0,right:this.root.opts.dir.current==="ltr"?"var(--bits-scroll-area-corner-width)":0,"--bits-scroll-area-thumb-width":`${this.thumbSize}px`},...this.attachment}));get props(){return g(this.#r)}set props(e){I(this.#r,e)}}class f2{static create(e){return a2.set(new f2(e,s0.get()))}opts;scrollbarVis;root;scrollbar;attachment;#e=ue();get computedStyle(){return g(this.#e)}set computedStyle(e){I(this.#e,e,!0)}constructor(e,t){this.opts=e,this.scrollbarVis=t,this.root=t.root,this.scrollbar=t.scrollbar,this.attachment=on(this.scrollbar.opts.ref,n=>this.root.scrollbarYNode=n),Nt(()=>{this.scrollbar.opts.ref.current&&this.opts.mounted.current&&(this.computedStyle=getComputedStyle(this.scrollbar.opts.ref.current))}),Nt(()=>{this.onResize()}),this.onThumbPointerDown=this.onThumbPointerDown.bind(this),this.onDragScroll=this.onDragScroll.bind(this),this.onThumbPointerUp=this.onThumbPointerUp.bind(this),this.onThumbPositionChange=this.onThumbPositionChange.bind(this),this.onWheelScroll=this.onWheelScroll.bind(this),this.onResize=this.onResize.bind(this)}onThumbPointerDown(e){this.scrollbarVis.onThumbPointerDown(e.y)}onDragScroll(e){this.scrollbarVis.yOnDragScroll(e.y)}onThumbPointerUp(){this.scrollbarVis.onThumbPointerUp()}onThumbPositionChange(){this.scrollbarVis.yOnThumbPositionChange()}onWheelScroll(e,t){if(!this.root.viewportNode)return;const n=this.root.viewportNode.scrollTop+e.deltaY;this.scrollbarVis.yOnWheelScroll(n),Ay(n,t)&&e.preventDefault()}onResize(){this.scrollbar.opts.ref.current&&this.root.viewportNode&&this.computedStyle&&this.scrollbarVis.setSizes({content:this.root.viewportNode.scrollHeight,viewport:this.root.viewportNode.offsetHeight,scrollbar:{size:this.scrollbar.opts.ref.current.clientHeight,paddingStart:l0(this.computedStyle.paddingTop),paddingEnd:l0(this.computedStyle.paddingBottom)}})}#t=B(()=>c0(this.scrollbarVis.sizes));get thumbSize(){return g(this.#t)}set thumbSize(e){I(this.#t,e)}#r=B(()=>({id:this.scrollbar.opts.id.current,"data-orientation":"vertical",style:{top:0,right:this.root.opts.dir.current==="ltr"?0:void 0,left:this.root.opts.dir.current==="rtl"?0:void 0,bottom:"var(--bits-scroll-area-corner-height)","--bits-scroll-area-thumb-height":`${this.thumbSize}px`},...this.attachment}));get props(){return g(this.#r)}set props(e){I(this.#r,e)}}class g2{static create(){return xy.set(new g2(a2.get()))}scrollbarState;root;scrollbarVis;scrollbar;#e=ue(null);get rect(){return g(this.#e)}set rect(e){I(this.#e,e)}#t=ue("");get prevWebkitUserSelect(){return g(this.#t)}set prevWebkitUserSelect(e){I(this.#t,e,!0)}handleResize;handleThumbPositionChange;handleWheelScroll;handleThumbPointerDown;handleThumbPointerUp;#r=B(()=>this.scrollbarVis.sizes.content-this.scrollbarVis.sizes.viewport);get maxScrollPos(){return g(this.#r)}set maxScrollPos(e){I(this.#r,e)}constructor(e){this.scrollbarState=e,this.root=e.root,this.scrollbarVis=e.scrollbarVis,this.scrollbar=e.scrollbarVis.scrollbar,this.handleResize=Df(()=>this.scrollbarState.onResize(),10),this.handleThumbPositionChange=this.scrollbarState.onThumbPositionChange,this.handleWheelScroll=this.scrollbarState.onWheelScroll,this.handleThumbPointerDown=this.scrollbarState.onThumbPointerDown,this.handleThumbPointerUp=this.scrollbarState.onThumbPointerUp,Nt(()=>{const t=this.maxScrollPos,n=this.scrollbar.opts.ref.current;this.root.viewportNode;const i=s=>{const o=s.target;n?.contains(o)&&this.handleWheelScroll(s,t)};return Ah(this.root.domContext.getDocument(),"wheel",i,{passive:!1})}),Ii(()=>{this.scrollbarVis.sizes,mn(()=>this.handleThumbPositionChange())}),new lu(()=>this.scrollbar.opts.ref.current,this.handleResize),new lu(()=>this.root.contentNode,this.handleResize),this.onpointerdown=this.onpointerdown.bind(this),this.onpointermove=this.onpointermove.bind(this),this.onpointerup=this.onpointerup.bind(this)}handleDragScroll(e){if(!this.rect)return;const t=e.clientX-this.rect.left,n=e.clientY-this.rect.top;this.scrollbarState.onDragScroll({x:t,y:n})}onpointerdown(e){if(e.button!==0)return;e.target.setPointerCapture(e.pointerId),this.rect=this.scrollbar.opts.ref.current?.getBoundingClientRect()??null,this.prevWebkitUserSelect=this.root.domContext.getDocument().body.style.webkitUserSelect,this.root.domContext.getDocument().body.style.webkitUserSelect="none",this.root.viewportNode&&(this.root.viewportNode.style.scrollBehavior="auto"),this.handleDragScroll(e)}onpointermove(e){this.handleDragScroll(e)}onpointerup(e){const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),this.root.domContext.getDocument().body.style.webkitUserSelect=this.prevWebkitUserSelect,this.root.viewportNode&&(this.root.viewportNode.style.scrollBehavior=""),this.rect=null}#n=B(()=>dr({...this.scrollbarState.props,style:{position:"absolute",...this.scrollbarState.props.style},[Nh.scrollbar]:"",onpointerdown:this.onpointerdown,onpointermove:this.onpointermove,onpointerup:this.onpointerup}));get props(){return g(this.#n)}set props(e){I(this.#n,e)}}class p2{static create(e){return new p2(e,xy.get())}opts;scrollbarState;attachment;#e;#t=ue();#r=Df(()=>{g(this.#t)&&(g(this.#t)(),I(this.#t,void 0))},100);constructor(e,t){this.opts=e,this.scrollbarState=t,this.#e=t.root,this.attachment=on(this.opts.ref,n=>this.scrollbarState.scrollbarVis.thumbNode=n),Nt(()=>{const n=this.#e.viewportNode;if(!n)return;const i=()=>{if(this.#r(),!g(this.#t)){const s=TN(n,this.scrollbarState.handleThumbPositionChange);I(this.#t,s,!0),this.scrollbarState.handleThumbPositionChange()}};return mn(()=>this.scrollbarState.handleThumbPositionChange()),Ah(n,"scroll",i)}),this.onpointerdowncapture=this.onpointerdowncapture.bind(this),this.onpointerup=this.onpointerup.bind(this)}onpointerdowncapture(e){const t=e.target;if(!t)return;const n=t.getBoundingClientRect(),i=e.clientX-n.left,a=e.clientY-n.top;this.scrollbarState.handleThumbPointerDown({x:i,y:a})}onpointerup(e){this.scrollbarState.handleThumbPointerUp()}#n=B(()=>({id:this.opts.id.current,"data-state":this.scrollbarState.scrollbarVis.hasThumb?"visible":"hidden",style:{width:"var(--bits-scroll-area-thumb-width)",height:"var(--bits-scroll-area-thumb-height)",transform:this.scrollbarState.scrollbarVis.prevTransformStyle},onpointerdowncapture:this.onpointerdowncapture,onpointerup:this.onpointerup,[Nh.thumb]:"",...this.attachment}));get props(){return g(this.#n)}set props(e){I(this.#n,e)}}class m2{static create(e){return new m2(e,Ph.get())}opts;root;attachment;#e=ue(0);#t=ue(0);#r=B(()=>!!(g(this.#e)&&g(this.#t)));get hasSize(){return g(this.#r)}set hasSize(e){I(this.#r,e)}constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref),new lu(()=>this.root.scrollbarXNode,()=>{const n=this.root.scrollbarXNode?.offsetHeight||0;this.root.cornerHeight=n,I(this.#t,n,!0)}),new lu(()=>this.root.scrollbarYNode,()=>{const n=this.root.scrollbarYNode?.offsetWidth||0;this.root.cornerWidth=n,I(this.#e,n,!0)})}#n=B(()=>({id:this.opts.id.current,style:{width:g(this.#e),height:g(this.#t),position:"absolute",right:this.root.opts.dir.current==="ltr"?0:void 0,left:this.root.opts.dir.current==="rtl"?0:void 0,bottom:0},[Nh.corner]:"",...this.attachment}));get props(){return g(this.#n)}set props(e){I(this.#n,e)}}function l0(r){return r?Number.parseInt(r,10):0}function _y(r,e){const t=r/e;return Number.isNaN(t)?0:t}function c0(r){const e=_y(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function EN({pointerPos:r,pointerOffset:e,sizes:t,dir:n="ltr"}){const i=c0(t),a=i/2,s=e||a,o=i-s,l=t.scrollbar.paddingStart+s,c=t.scrollbar.size-t.scrollbar.paddingEnd-o,u=t.content-t.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return ky([l,c],h)(r)}function Sy({scrollPos:r,sizes:e,dir:t="ltr"}){const n=c0(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,s=e.content-e.viewport,o=a-n,l=t==="ltr"?[0,s]:[s*-1,0],c=CN(r,l[0],l[1]);return ky([0,s],[0,o])(c)}function ky(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function Ay(r,e){return r>0&&r<e}function TN(r,e){let t={left:r.scrollLeft,top:r.scrollTop},n=0;const i=Lf(r);return function a(){const s={left:r.scrollLeft,top:r.scrollTop},o=t.left!==s.left,l=t.top!==s.top;(o||l)&&e(),t=s,n=i.requestAnimationFrame(a)}(),()=>i.cancelAnimationFrame(n)}var MN=$("<div><!></div>");function IN(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=U(e,"type",3,"hover"),s=U(e,"dir",3,"ltr"),o=U(e,"scrollHideDelay",3,600),l=qe(e,["$$slots","$$events","$$legacy","ref","id","type","dir","scrollHideDelay","children","child"]);const c=s2.create({type:ke.with(()=>a()),dir:ke.with(()=>s()),scrollHideDelay:ke.with(()=>o()),id:ke.with(()=>i()),ref:ke.with(()=>n(),m=>n(m))}),u=B(()=>dr(l,c.props));var h=Z(),d=P(h);{var f=m=>{var y=Z(),v=P(y);Re(v,()=>e.child,()=>({props:g(u)})),w(m,y)},p=m=>{var y=MN();Ht(y,()=>({...g(u)}));var v=G(y);Re(v,()=>e.children??je),j(y),w(m,y)};le(d,m=>{e.child?m(f):m(p,!1)})}w(r,h),we()}var ON=$("<div><div><!></div></div>");function NN(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=qe(e,["$$slots","$$events","$$legacy","ref","id","children"]);const s=o2.create({id:ke.with(()=>i()),ref:ke.with(()=>n(),d=>n(d))}),o=B(()=>dr(a,s.props)),l=B(()=>dr({},s.contentProps));var c=ON();Ht(c,()=>({...g(o)}));var u=G(c);Ht(u,()=>({...g(l)}));var h=G(u);Re(h,()=>e.children??je),j(u),j(c),w(r,c),we()}var PN=$("<div><!></div>");function Cy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy","child","children"]);const n=g2.create(),i=B(()=>dr(t,n.props));var a=Z(),s=P(a);{var o=c=>{var u=Z(),h=P(u);Re(h,()=>e.child,()=>({props:g(i)})),w(c,u)},l=c=>{var u=PN();Ht(u,()=>({...g(i)}));var h=G(u);Re(h,()=>e.children??je),j(u),w(c,u)};le(s,c=>{e.child?c(o):c(l,!1)})}w(r,a),we()}function RN(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=new Rp,i=d2.create({mounted:ke.with(()=>n.current)}),a=B(()=>dr(t,i.props));Cy(r,tt(()=>g(a))),we()}function FN(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=new Rp,i=f2.create({mounted:ke.with(()=>n.current)}),a=B(()=>dr(t,i.props));Cy(r,tt(()=>g(a))),we()}function u0(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=h2.create();var i=Z(),a=P(i);{var s=l=>{RN(l,tt(()=>t))},o=l=>{FN(l,tt(()=>t))};le(a,l=>{n.scrollbar.opts.orientation.current==="horizontal"?l(s):l(o,!1)})}w(r,i),we()}function DN(r,e){ye(e,!0);let t=U(e,"forceMount",3,!1),n=qe(e,["$$slots","$$events","$$legacy","forceMount"]);const i=o0.create(),a=B(()=>dr(n,i.props));{const s=l=>{u0(l,tt(()=>g(a)))};let o=B(()=>t()||i.isVisible);so(r,{get open(){return g(o)},get ref(){return i.scrollbar.opts.ref},presence:s,$$slots:{presence:!0}})}we()}function LN(r,e){ye(e,!0);let t=U(e,"forceMount",3,!1),n=qe(e,["$$slots","$$events","$$legacy","forceMount"]);const i=u2.create(),a=B(()=>dr(n,i.props));{const s=l=>{u0(l,tt(()=>g(a)))};let o=B(()=>t()||!i.isHidden);so(r,tt(()=>g(a),{get open(){return g(o)},get ref(){return i.scrollbar.opts.ref},presence:s,$$slots:{presence:!0}}))}we()}function BN(r,e){ye(e,!0);let t=U(e,"forceMount",3,!1),n=qe(e,["$$slots","$$events","$$legacy","forceMount"]);const i=c2.create(),a=o0.create(),s=B(()=>dr(n,i.props,a.props,{"data-state":i.isVisible?"visible":"hidden"})),o=B(()=>t()||i.isVisible&&a.isVisible);so(r,{get open(){return g(o)},get ref(){return a.scrollbar.opts.ref},presence:c=>{u0(c,tt(()=>g(s)))},$$slots:{presence:!0}}),we()}function zN(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=qe(e,["$$slots","$$events","$$legacy","ref","id","orientation"]);const s=l2.create({orientation:ke.with(()=>e.orientation),id:ke.with(()=>i()),ref:ke.with(()=>n(),d=>n(d))}),o=B(()=>s.root.opts.type.current);var l=Z(),c=P(l);{var u=d=>{BN(d,tt(()=>a,{get id(){return i()}}))},h=d=>{var f=Z(),p=P(f);{var m=v=>{LN(v,tt(()=>a,{get id(){return i()}}))},y=v=>{var _=Z(),S=P(_);{var A=k=>{DN(k,tt(()=>a,{get id(){return i()}}))},C=k=>{var M=Z(),N=P(M);{var F=z=>{u0(z,tt(()=>a,{get id(){return i()}}))};le(N,z=>{g(o)==="always"&&z(F)},!0)}w(k,M)};le(S,k=>{g(o)==="auto"?k(A):k(C,!1)},!0)}w(v,_)};le(p,v=>{g(o)==="scroll"?v(m):v(y,!1)},!0)}w(d,f)};le(c,d=>{g(o)==="hover"?d(u):d(h,!1)})}w(r,l),we()}var UN=$("<div><!></div>");function jN(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","id","child","children","present"]);const i=new Rp,a=p2.create({id:ke.with(()=>e.id),ref:ke.with(()=>t(),h=>t(h)),mounted:ke.with(()=>i.current)}),s=B(()=>dr(n,a.props,{style:{hidden:!e.present}}));var o=Z(),l=P(o);{var c=h=>{var d=Z(),f=P(d);Re(f,()=>e.child,()=>({props:g(s)})),w(h,d)},u=h=>{var d=UN();Ht(d,()=>({...g(s)}));var f=G(d);Re(f,()=>e.children??je),j(d),w(h,d)};le(l,h=>{e.child?h(c):h(u,!1)})}w(r,o),we()}function HN(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"forceMount",3,!1),s=qe(e,["$$slots","$$events","$$legacy","id","ref","forceMount"]);const o=s0.get();{const l=(u,h)=>{let d=()=>h?.().present;jN(u,tt(()=>s,{get id(){return n()},get present(){return d()},get ref(){return i()},set ref(f){i(f)}}))};let c=B(()=>a()||o.hasThumb);so(r,{get open(){return g(c)},get ref(){return o.scrollbar.opts.ref},presence:l,$$slots:{presence:!0}})}we()}var qN=$("<div><!></div>");function GN(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","id","children","child"]);const i=m2.create({id:ke.with(()=>e.id),ref:ke.with(()=>t(),u=>t(u))}),a=B(()=>dr(n,i.props));var s=Z(),o=P(s);{var l=u=>{var h=Z(),d=P(h);Re(d,()=>e.child,()=>({props:g(a)})),w(u,h)},c=u=>{var h=qN();Ht(h,()=>({...g(a)}));var d=G(h);Re(d,()=>e.children??je),j(h),w(u,h)};le(o,u=>{e.child?u(l):u(c,!1)})}w(r,s),we()}function $N(r,e){const t=gn();ye(e,!0);let n=U(e,"ref",15,null),i=U(e,"id",19,()=>pn(t)),a=qe(e,["$$slots","$$events","$$legacy","ref","id"]);const s=Ph.get(),o=B(()=>!!(s.scrollbarXNode&&s.scrollbarYNode)),l=B(()=>s.opts.type.current!=="scroll"&&g(o));var c=Z(),u=P(c);{var h=d=>{GN(d,tt(()=>a,{get id(){return i()},get ref(){return n()},set ref(f){n(f)}}))};le(u,d=>{g(l)&&d(h)})}w(r,c),we()}var WN=$("<!> <!>",1);function VN(r,e){ye(e,!0);let t=U(e,"value",15),n=U(e,"onValueChange",3,xr),i=U(e,"name",3,""),a=U(e,"disabled",3,!1),s=U(e,"open",15,!1),o=U(e,"onOpenChange",3,xr),l=U(e,"onOpenChangeComplete",3,xr),c=U(e,"loop",3,!1),u=U(e,"scrollAlignment",3,"nearest"),h=U(e,"required",3,!1),d=U(e,"items",19,()=>[]),f=U(e,"allowDeselect",3,!1);function p(){t()===void 0&&t(e.type==="single"?"":[])}p(),$r.pre(()=>t(),()=>{p()});let m=ue("");const y=AO.create({type:e.type,value:ke.with(()=>t(),k=>{t(k),n()(k)}),disabled:ke.with(()=>a()),required:ke.with(()=>h()),open:ke.with(()=>s(),k=>{s(k),o()(k)}),loop:ke.with(()=>c()),scrollAlignment:ke.with(()=>u()),name:ke.with(()=>i()),isCombobox:!1,items:ke.with(()=>d()),allowDeselect:ke.with(()=>f()),inputValue:ke.with(()=>g(m),k=>I(m,k,!0)),onOpenChangeComplete:ke.with(()=>l())});var v=WN(),_=P(v);Fm(_,{children:(k,M)=>{var N=Z(),F=P(N);Re(F,()=>e.children??je),w(k,N)},$$slots:{default:!0}});var S=te(_,2);{var A=k=>{var M=Z(),N=P(M);{var F=z=>{var W=Z(),V=P(W);dn(V,16,()=>y.opts.value.current,Q=>Q,(Q,K)=>{gy(Q,{get value(){return K},get autocomplete(){return e.autocomplete}})}),w(z,W)};le(N,z=>{y.opts.value.current.length&&z(F)})}w(k,M)},C=k=>{gy(k,{get autocomplete(){return e.autocomplete},get value(){return y.opts.value.current},set value(M){y.opts.value.current=M}})};le(S,k=>{Array.isArray(y.opts.value.current)?k(A):k(C,!1)})}w(r,v),we()}var XN=$("<button><!></button>");function KN(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"type",3,"button"),s=qe(e,["$$slots","$$events","$$legacy","id","ref","child","children","type"]);const o=Lm.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),h=>i(h))}),l=B(()=>dr(s,o.props,{type:a()}));var c=Z(),u=P(c);he(u,()=>Gm,(h,d)=>{d(h,{get id(){return n()},get ref(){return o.opts.ref},children:(f,p)=>{var m=Z(),y=P(m);{var v=S=>{var A=Z(),C=P(A);Re(C,()=>e.child,()=>({props:g(l)})),w(S,A)},_=S=>{var A=XN();Ht(A,()=>({...g(l)}));var C=G(A);Re(C,()=>e.children??je),j(A),w(S,A)};le(y,S=>{e.child?S(v):S(_,!1)})}w(f,m)},$$slots:{default:!0}})}),w(r,c),we()}const YN={immediate:!0};class b2{#e;#t;#r;#n=null;constructor(e,t,n={}){this.#r=e,this.#t=t,this.#e={...YN,...n},this.stop=this.stop.bind(this),this.start=this.start.bind(this),this.#e.immediate&&Mi&&this.start(),Wo(this.stop)}#a(){this.#n!==null&&(window.clearTimeout(this.#n),this.#n=null)}stop(){this.#a()}start(...e){this.#a(),this.#n=window.setTimeout(()=>{this.#n=null,this.#r(...e)},this.#t)}}const Ey=Ko({component:"tooltip",parts:["content","trigger"]}),Ty=new Kn("Tooltip.Provider"),v2=new Kn("Tooltip.Root");class y2{static create(e){return Ty.set(new y2(e))}opts;#e=ue(!0);get isOpenDelayed(){return g(this.#e)}set isOpenDelayed(e){I(this.#e,e,!0)}isPointerInTransit=ke(!1);#t;#r=ue(null);constructor(e){this.opts=e,this.#t=new b2(()=>{this.isOpenDelayed=!0},this.opts.skipDelayDuration.current,{immediate:!1})}#n=()=>{this.opts.skipDelayDuration.current!==0&&this.#t.start()};#a=()=>{this.#t.stop()};onOpen=e=>{g(this.#r)&&g(this.#r)!==e&&g(this.#r).handleClose(),this.#a(),this.isOpenDelayed=!1,I(this.#r,e,!0)};onClose=e=>{g(this.#r)===e&&I(this.#r,null),this.#n()};isTooltipOpen=e=>g(this.#r)===e}class w2{static create(e){return v2.set(new w2(e,Ty.get()))}opts;provider;#e=B(()=>this.opts.delayDuration.current??this.provider.opts.delayDuration.current);get delayDuration(){return g(this.#e)}set delayDuration(e){I(this.#e,e)}#t=B(()=>this.opts.disableHoverableContent.current??this.provider.opts.disableHoverableContent.current);get disableHoverableContent(){return g(this.#t)}set disableHoverableContent(e){I(this.#t,e)}#r=B(()=>this.opts.disableCloseOnTriggerClick.current??this.provider.opts.disableCloseOnTriggerClick.current);get disableCloseOnTriggerClick(){return g(this.#r)}set disableCloseOnTriggerClick(e){I(this.#r,e)}#n=B(()=>this.opts.disabled.current??this.provider.opts.disabled.current);get disabled(){return g(this.#n)}set disabled(e){I(this.#n,e)}#a=B(()=>this.opts.ignoreNonKeyboardFocus.current??this.provider.opts.ignoreNonKeyboardFocus.current);get ignoreNonKeyboardFocus(){return g(this.#a)}set ignoreNonKeyboardFocus(e){I(this.#a,e)}#i=ue(null);get contentNode(){return g(this.#i)}set contentNode(e){I(this.#i,e,!0)}#s=ue(null);get triggerNode(){return g(this.#s)}set triggerNode(e){I(this.#s,e,!0)}#o=ue(!1);#l;#c=B(()=>this.opts.open.current?g(this.#o)?"delayed-open":"instant-open":"closed");get stateAttr(){return g(this.#c)}set stateAttr(e){I(this.#c,e)}constructor(e,t){this.opts=e,this.provider=t,this.#l=new b2(()=>{I(this.#o,!0),this.opts.open.current=!0},this.delayDuration??0,{immediate:!1}),new Sh({open:this.opts.open,ref:ke.with(()=>this.contentNode),onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),$r(()=>this.delayDuration,()=>{this.delayDuration!==void 0&&(this.#l=new b2(()=>{I(this.#o,!0),this.opts.open.current=!0},this.delayDuration,{immediate:!1}))}),$r(()=>this.opts.open.current,n=>{n?this.provider.onOpen(this):this.provider.onClose(this)})}handleOpen=()=>{this.#l.stop(),I(this.#o,!1),this.opts.open.current=!0};handleClose=()=>{this.#l.stop(),this.opts.open.current=!1};#h=()=>{this.#l.stop();const e=!this.provider.isOpenDelayed,t=this.delayDuration??0;e||t===0?(I(this.#o,t>0&&e,!0),this.opts.open.current=!0):this.#l.start()};onTriggerEnter=()=>{this.#h()};onTriggerLeave=()=>{this.disableHoverableContent?this.handleClose():this.#l.stop()}}class x2{static create(e){return new x2(e,v2.get())}opts;root;attachment;#e=ke(!1);#t=ue(!1);#r=B(()=>this.opts.disabled.current||this.root.disabled);domContext;constructor(e,t){this.opts=e,this.root=t,this.domContext=new Vo(e.ref),this.attachment=on(this.opts.ref,n=>this.root.triggerNode=n)}handlePointerUp=()=>{this.#e.current=!1};#n=()=>{g(this.#r)||(this.#e.current=!1)};#a=()=>{g(this.#r)||(this.#e.current=!0,this.domContext.getDocument().addEventListener("pointerup",()=>{this.handlePointerUp()},{once:!0}))};#i=e=>{g(this.#r)||e.pointerType!=="touch"&&(g(this.#t)||this.root.provider.isPointerInTransit.current||(this.root.onTriggerEnter(),I(this.#t,!0)))};#s=()=>{g(this.#r)||(this.root.onTriggerLeave(),I(this.#t,!1))};#o=e=>{this.#e.current||g(this.#r)||this.root.ignoreNonKeyboardFocus&&!sM(e.currentTarget)||this.root.handleOpen()};#l=()=>{g(this.#r)||this.root.handleClose()};#c=()=>{this.root.disableCloseOnTriggerClick||g(this.#r)||this.root.handleClose()};#h=B(()=>({id:this.opts.id.current,"aria-describedby":this.root.opts.open.current?this.root.contentNode?.id:void 0,"data-state":this.root.stateAttr,"data-disabled":xs(g(this.#r)),"data-delay-duration":`${this.root.delayDuration}`,[Ey.trigger]:"",tabindex:g(this.#r)?void 0:0,disabled:this.opts.disabled.current,onpointerup:this.#n,onpointerdown:this.#a,onpointermove:this.#i,onpointerleave:this.#s,onfocus:this.#o,onblur:this.#l,onclick:this.#c,...this.attachment}));get props(){return g(this.#h)}set props(e){I(this.#h,e)}}class _2{static create(e){return new _2(e,v2.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=on(this.opts.ref,n=>this.root.contentNode=n),new vy({triggerNode:()=>this.root.triggerNode,contentNode:()=>this.root.contentNode,enabled:()=>this.root.opts.open.current&&!this.root.disableHoverableContent,onPointerExit:()=>{this.root.provider.isTooltipOpen(this.root)&&this.root.handleClose()},setIsPointerInTransit:n=>{this.root.provider.isPointerInTransit.current=n},transitTimeout:this.root.provider.opts.skipDelayDuration.current}),Fp(()=>Zr(window,"scroll",n=>{const i=n.target;i&&i.contains(this.root.triggerNode)&&this.root.handleClose()}))}onInteractOutside=e=>{if(kh(e.target)&&this.root.triggerNode?.contains(e.target)&&this.root.disableCloseOnTriggerClick){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current?.(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};#e=B(()=>({open:this.root.opts.open.current}));get snippetProps(){return g(this.#e)}set snippetProps(e){I(this.#e,e)}#t=B(()=>({id:this.opts.id.current,"data-state":this.root.stateAttr,"data-disabled":xs(this.root.disabled),style:{pointerEvents:"auto",outline:"none"},[Ey.content]:"",...this.attachment}));get props(){return g(this.#t)}set props(e){I(this.#t,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus}}function QN(r,e){ye(e,!0);let t=U(e,"open",15,!1),n=U(e,"onOpenChange",3,xr),i=U(e,"onOpenChangeComplete",3,xr);w2.create({open:ke.with(()=>t(),a=>{t(a),n()(a)}),delayDuration:ke.with(()=>e.delayDuration),disableCloseOnTriggerClick:ke.with(()=>e.disableCloseOnTriggerClick),disableHoverableContent:ke.with(()=>e.disableHoverableContent),ignoreNonKeyboardFocus:ke.with(()=>e.ignoreNonKeyboardFocus),disabled:ke.with(()=>e.disabled),onOpenChangeComplete:ke.with(()=>i())}),Fm(r,{tooltip:!0,children:(a,s)=>{var o=Z(),l=P(o);Re(l,()=>e.children??je),w(a,o)},$$slots:{default:!0}}),we()}var JN=$("<div><div><!></div></div>"),ZN=$("<div><div><!></div></div>");function eP(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"ref",15,null),a=U(e,"side",3,"top"),s=U(e,"sideOffset",3,0),o=U(e,"align",3,"center"),l=U(e,"avoidCollisions",3,!0),c=U(e,"arrowPadding",3,0),u=U(e,"sticky",3,"partial"),h=U(e,"hideWhenDetached",3,!1),d=U(e,"collisionPadding",3,0),f=U(e,"onInteractOutside",3,xr),p=U(e,"onEscapeKeydown",3,xr),m=U(e,"forceMount",3,!1),y=qe(e,["$$slots","$$events","$$legacy","children","child","id","ref","side","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","onInteractOutside","onEscapeKeydown","forceMount"]);const v=_2.create({id:ke.with(()=>n()),ref:ke.with(()=>i(),N=>i(N)),onInteractOutside:ke.with(()=>f()),onEscapeKeydown:ke.with(()=>p())}),_=B(()=>({side:a(),sideOffset:s(),align:o(),avoidCollisions:l(),arrowPadding:c(),sticky:u(),hideWhenDetached:h(),collisionPadding:d()})),S=B(()=>dr(y,g(_),v.props));var A=Z(),C=P(A);{var k=N=>{Wm(N,tt(()=>g(S),()=>v.popperProps,{get enabled(){return v.root.opts.open.current},get id(){return n()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,get ref(){return v.opts.ref},tooltip:!0,popper:(z,W)=>{let V=()=>W?.().props,Q=()=>W?.().wrapperProps;var K=Z();const ie=B(()=>dr(V(),{style:Mh("tooltip")}));var L=P(K);{var J=re=>{var D=Z(),se=P(D);{let ce=B(()=>({props:g(ie),wrapperProps:Q(),...v.snippetProps}));Re(se,()=>e.child,()=>g(ce))}w(re,D)},X=re=>{var D=JN();Ht(D,()=>({...Q()}));var se=G(D);Ht(se,()=>({...g(ie)}));var ce=G(se);Re(ce,()=>e.children??je),j(se),j(D),w(re,D)};le(L,re=>{e.child?re(J):re(X,!1)})}w(z,K)},$$slots:{popper:!0}}))},M=N=>{var F=Z(),z=P(F);{var W=V=>{$m(V,tt(()=>g(S),()=>v.popperProps,{get open(){return v.root.opts.open.current},get id(){return n()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,get ref(){return v.opts.ref},tooltip:!0,popper:(K,ie)=>{let L=()=>ie?.().props,J=()=>ie?.().wrapperProps;var X=Z();const re=B(()=>dr(L(),{style:Mh("tooltip")}));var D=P(X);{var se=q=>{var ae=Z(),fe=P(ae);{let xe=B(()=>({props:g(re),wrapperProps:J(),...v.snippetProps}));Re(fe,()=>e.child,()=>g(xe))}w(q,ae)},ce=q=>{var ae=ZN();Ht(ae,()=>({...J()}));var fe=G(ae);Ht(fe,()=>({...g(re)}));var xe=G(fe);Re(xe,()=>e.children??je),j(fe),j(ae),w(q,ae)};le(D,q=>{e.child?q(se):q(ce,!1)})}w(K,X)},$$slots:{popper:!0}}))};le(z,V=>{m()||V(W)},!0)}w(N,F)};le(C,N=>{m()?N(k):N(M,!1)})}w(r,A),we()}var tP=$("<button><!></button>");function rP(r,e){const t=gn();ye(e,!0);let n=U(e,"id",19,()=>pn(t)),i=U(e,"disabled",3,!1),a=U(e,"type",3,"button"),s=U(e,"ref",15,null),o=qe(e,["$$slots","$$events","$$legacy","children","child","id","disabled","type","ref"]);const l=x2.create({id:ke.with(()=>n()),disabled:ke.with(()=>i()??!1),ref:ke.with(()=>s(),u=>s(u))}),c=B(()=>dr(o,l.props,{type:a()}));Gm(r,{get id(){return n()},get ref(){return l.opts.ref},tooltip:!0,children:(u,h)=>{var d=Z(),f=P(d);{var p=y=>{var v=Z(),_=P(v);Re(_,()=>e.child,()=>({props:g(c)})),w(y,v)},m=y=>{var v=tP();Ht(v,()=>({...g(c)}));var _=G(v);Re(_,()=>e.children??je),j(v),w(y,v)};le(f,y=>{e.child?y(p):y(m,!1)})}w(u,d)},$$slots:{default:!0}}),we()}function nP(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref"]);MO(r,tt(()=>n,{get ref(){return t()},set ref(i){t(i)}})),we()}function iP(r,e){ye(e,!0);let t=U(e,"delayDuration",3,700),n=U(e,"disableCloseOnTriggerClick",3,!1),i=U(e,"disableHoverableContent",3,!1),a=U(e,"disabled",3,!1),s=U(e,"ignoreNonKeyboardFocus",3,!1),o=U(e,"skipDelayDuration",3,300);y2.create({delayDuration:ke.with(()=>t()),disableCloseOnTriggerClick:ke.with(()=>n()),disableHoverableContent:ke.with(()=>i()),disabled:ke.with(()=>a()),ignoreNonKeyboardFocus:ke.with(()=>s()),skipDelayDuration:ke.with(()=>o())});var l=Z(),c=P(l);Re(c,()=>e.children??je),w(r,l),we()}let Fh=ue(!1);class rl{static _refs=0;static _cleanup;constructor(){Nt(()=>(rl._refs===0&&(rl._cleanup=rh(()=>{const e=[],t=i=>{I(Fh,!1)},n=i=>{I(Fh,!0)};return e.push(Zr(document,"pointerdown",t,{capture:!0}),Zr(document,"pointermove",t,{capture:!0}),Zr(document,"keydown",n,{capture:!0})),io(...e)})),rl._refs++,()=>{rl._refs--,rl._refs===0&&(I(Fh,!1),rl._cleanup?.())}))}get current(){return g(Fh)}set current(e){I(Fh,e,!0)}}const S2="-",aP=r=>{const e=oP(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:s=>{const o=s.split(S2);return o[0]===""&&o.length!==1&&o.shift(),My(o,e)||sP(s)},getConflictingClassGroupIds:(s,o)=>{const l=t[s]||[];return o&&n[s]?[...l,...n[s]]:l}}},My=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?My(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=r.join(S2);return e.validators.find(({validator:s})=>s(a))?.classGroupId},Iy=/^\[(.+)\]$/,sP=r=>{if(Iy.test(r)){const e=Iy.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},oP=r=>{const{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(const i in t)k2(t[i],n,i,e);return n},k2=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const a=i===""?e:Oy(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(lP(i)){k2(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,s])=>{k2(s,Oy(e,a),t,n)})})},Oy=(r,e)=>{let t=r;return e.split(S2).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},lP=r=>r.isThemeGetter,cP=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(a,s)=>{t.set(a,s),e++,e>r&&(e=0,n=t,t=new Map)};return{get(a){let s=t.get(a);if(s!==void 0)return s;if((s=n.get(a))!==void 0)return i(a,s),s},set(a,s){t.has(a)?t.set(a,s):i(a,s)}}},A2="!",C2=":",uP=C2.length,hP=r=>{const{prefix:e,experimentalParseClassName:t}=r;let n=i=>{const a=[];let s=0,o=0,l=0,c;for(let p=0;p<i.length;p++){let m=i[p];if(s===0&&o===0){if(m===C2){a.push(i.slice(l,p)),l=p+uP;continue}if(m==="/"){c=p;continue}}m==="["?s++:m==="]"?s--:m==="("?o++:m===")"&&o--}const u=a.length===0?i:i.substring(l),h=dP(u),d=h!==u,f=c&&c>l?c-l:void 0;return{modifiers:a,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}};if(e){const i=e+C2,a=n;n=s=>s.startsWith(i)?a(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const i=n;n=a=>t({className:a,parseClassName:i})}return n},dP=r=>r.endsWith(A2)?r.substring(0,r.length-1):r.startsWith(A2)?r.substring(1):r,fP=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const i=[];let a=[];return n.forEach(s=>{s[0]==="["||e[s]?(i.push(...a.sort(),s),a=[]):a.push(s)}),i.push(...a.sort()),i}},gP=r=>({cache:cP(r.cacheSize),parseClassName:hP(r),sortModifiers:fP(r),...aP(r)}),pP=/\s+/,mP=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=e,s=[],o=r.trim().split(pP);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);if(h){l=u+(l.length>0?" "+l:l);continue}let y=!!m,v=n(y?p.substring(0,m):p);if(!v){if(!y){l=u+(l.length>0?" "+l:l);continue}if(v=n(p),!v){l=u+(l.length>0?" "+l:l);continue}y=!1}const _=a(d).join(":"),S=f?_+A2:_,A=S+v;if(s.includes(A))continue;s.push(A);const C=i(v,y);for(let k=0;k<C.length;++k){const M=C[k];s.push(S+M)}l=u+(l.length>0?" "+l:l)}return l};function bP(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Ny(e))&&(n&&(n+=" "),n+=t);return n}const Ny=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=Ny(r[n]))&&(t&&(t+=" "),t+=e);return t};function vP(r,...e){let t,n,i,a=s;function s(l){const c=e.reduce((u,h)=>h(u),r());return t=gP(c),n=t.cache.get,i=t.cache.set,a=o,o(l)}function o(l){const c=n(l);if(c)return c;const u=mP(l,t);return i(l,u),u}return function(){return a(bP.apply(null,arguments))}}const ai=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},Py=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ry=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yP=/^\d+\/\d+$/,wP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_P=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,SP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cu=r=>yP.test(r),Gr=r=>!!r&&!Number.isNaN(Number(r)),nl=r=>!!r&&Number.isInteger(Number(r)),E2=r=>r.endsWith("%")&&Gr(r.slice(0,-1)),co=r=>wP.test(r),AP=()=>!0,CP=r=>xP.test(r)&&!_P.test(r),Fy=()=>!1,EP=r=>SP.test(r),TP=r=>kP.test(r),MP=r=>!Xt(r)&&!Kt(r),IP=r=>uu(r,Uy,Fy),Xt=r=>Py.test(r),ac=r=>uu(r,jy,CP),T2=r=>uu(r,FP,Gr),Dy=r=>uu(r,By,Fy),OP=r=>uu(r,zy,TP),h0=r=>uu(r,Hy,EP),Kt=r=>Ry.test(r),Dh=r=>hu(r,jy),NP=r=>hu(r,DP),Ly=r=>hu(r,By),PP=r=>hu(r,Uy),RP=r=>hu(r,zy),d0=r=>hu(r,Hy,!0),uu=(r,e,t)=>{const n=Py.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},hu=(r,e,t=!1)=>{const n=Ry.exec(r);return n?n[1]?e(n[1]):t:!1},By=r=>r==="position"||r==="percentage",zy=r=>r==="image"||r==="url",Uy=r=>r==="length"||r==="size"||r==="bg-size",jy=r=>r==="length",FP=r=>r==="number",DP=r=>r==="family-name",Hy=r=>r==="shadow",LP=vP(()=>{const r=ai("color"),e=ai("font"),t=ai("text"),n=ai("font-weight"),i=ai("tracking"),a=ai("leading"),s=ai("breakpoint"),o=ai("container"),l=ai("spacing"),c=ai("radius"),u=ai("shadow"),h=ai("inset-shadow"),d=ai("text-shadow"),f=ai("drop-shadow"),p=ai("blur"),m=ai("perspective"),y=ai("aspect"),v=ai("ease"),_=ai("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...A(),Kt,Xt],k=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],N=()=>[Kt,Xt,l],F=()=>[cu,"full","auto",...N()],z=()=>[nl,"none","subgrid",Kt,Xt],W=()=>["auto",{span:["full",nl,Kt,Xt]},nl,Kt,Xt],V=()=>[nl,"auto",Kt,Xt],Q=()=>["auto","min","max","fr",Kt,Xt],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...N()],J=()=>[cu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],X=()=>[r,Kt,Xt],re=()=>[...A(),Ly,Dy,{position:[Kt,Xt]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",PP,IP,{size:[Kt,Xt]}],ce=()=>[E2,Dh,ac],q=()=>["","none","full",c,Kt,Xt],ae=()=>["",Gr,Dh,ac],fe=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>[Gr,E2,Ly,Dy],Ce=()=>["","none",p,Kt,Xt],Te=()=>["none",Gr,Kt,Xt],Ae=()=>["none",Gr,Kt,Xt],be=()=>[Gr,Kt,Xt],Ee=()=>[cu,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[co],breakpoint:[co],color:[AP],container:[co],"drop-shadow":[co],ease:["in","out","in-out"],font:[MP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[co],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[co],shadow:[co],spacing:["px",Gr],text:[co],"text-shadow":[co],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",cu,Xt,Kt,y]}],container:["container"],columns:[{columns:[Gr,Xt,Kt,o]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[nl,"auto",Kt,Xt]}],basis:[{basis:[cu,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Gr,cu,"auto","initial","none",Xt]}],grow:[{grow:["",Gr,Kt,Xt]}],shrink:[{shrink:["",Gr,Kt,Xt]}],order:[{order:[nl,"first","last","none",Kt,Xt]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Q()}],"auto-rows":[{"auto-rows":Q()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[o,"screen",...J()]}],"min-w":[{"min-w":[o,"screen","none",...J()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",t,Dh,ac]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Kt,T2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",E2,Xt]}],"font-family":[{font:[NP,Xt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Kt,Xt]}],"line-clamp":[{"line-clamp":[Gr,"none",Kt,T2]}],leading:[{leading:[a,...N()]}],"list-image":[{"list-image":["none",Kt,Xt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Kt,Xt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Gr,"from-font","auto",Kt,ac]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Gr,"auto",Kt,Xt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt,Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt,Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},nl,Kt,Xt],radial:["",Kt,Xt],conic:[nl,Kt,Xt]},RP,OP]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ce()}],"gradient-via-pos":[{via:ce()}],"gradient-to-pos":[{to:ce()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Gr,Kt,Xt]}],"outline-w":[{outline:["",Gr,Dh,ac]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",u,d0,h0]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,d0,h0]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Gr,ac]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",d,d0,h0]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Gr,Kt,Xt]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Gr]}],"mask-image-linear-from-pos":[{"mask-linear-from":pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":pe()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":pe()}],"mask-image-t-to-pos":[{"mask-t-to":pe()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":pe()}],"mask-image-r-to-pos":[{"mask-r-to":pe()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":pe()}],"mask-image-b-to-pos":[{"mask-b-to":pe()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":pe()}],"mask-image-l-to-pos":[{"mask-l-to":pe()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":pe()}],"mask-image-x-to-pos":[{"mask-x-to":pe()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":pe()}],"mask-image-y-to-pos":[{"mask-y-to":pe()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[Kt,Xt]}],"mask-image-radial-from-pos":[{"mask-radial-from":pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":pe()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Gr]}],"mask-image-conic-from-pos":[{"mask-conic-from":pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":pe()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Kt,Xt]}],filter:[{filter:["","none",Kt,Xt]}],blur:[{blur:Ce()}],brightness:[{brightness:[Gr,Kt,Xt]}],contrast:[{contrast:[Gr,Kt,Xt]}],"drop-shadow":[{"drop-shadow":["","none",f,d0,h0]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Gr,Kt,Xt]}],"hue-rotate":[{"hue-rotate":[Gr,Kt,Xt]}],invert:[{invert:["",Gr,Kt,Xt]}],saturate:[{saturate:[Gr,Kt,Xt]}],sepia:[{sepia:["",Gr,Kt,Xt]}],"backdrop-filter":[{"backdrop-filter":["","none",Kt,Xt]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[Gr,Kt,Xt]}],"backdrop-contrast":[{"backdrop-contrast":[Gr,Kt,Xt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Gr,Kt,Xt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Gr,Kt,Xt]}],"backdrop-invert":[{"backdrop-invert":["",Gr,Kt,Xt]}],"backdrop-opacity":[{"backdrop-opacity":[Gr,Kt,Xt]}],"backdrop-saturate":[{"backdrop-saturate":[Gr,Kt,Xt]}],"backdrop-sepia":[{"backdrop-sepia":["",Gr,Kt,Xt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Kt,Xt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Gr,"initial",Kt,Xt]}],ease:[{ease:["linear","initial",v,Kt,Xt]}],delay:[{delay:[Gr,Kt,Xt]}],animate:[{animate:["none",_,Kt,Xt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Kt,Xt]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:Ae()}],"scale-x":[{"scale-x":Ae()}],"scale-y":[{"scale-y":Ae()}],"scale-z":[{"scale-z":Ae()}],"scale-3d":["scale-3d"],skew:[{skew:be()}],"skew-x":[{"skew-x":be()}],"skew-y":[{"skew-y":be()}],transform:[{transform:[Kt,Xt,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt,Xt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt,Xt]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Gr,Dh,ac,T2]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function sr(...r){return LP(lh(r))}function f0(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("text-lg leading-none font-semibold",e.class));he(a,()=>Kp,(o,l)=>{l(o,tt({"data-slot":"dialog-title",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}var BP=$("<div><!></div>");function zP(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=BP();Ht(i,s=>({"data-slot":"dialog-footer",class:s,...n}),[()=>sr("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var UP=$("<div><!></div>");function qy(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=UP();Ht(i,s=>({"data-slot":"dialog-header",class:s,...n}),[()=>sr("flex flex-col gap-2 text-center sm:text-left",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}function Gy(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("fixed inset-0 z-50 bg-black/50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0",e.class));he(a,()=>Xf,(o,l)=>{l(o,tt({"data-slot":"dialog-overlay",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}const jP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var HP=Ql("<svg><!><!></svg>");function nr(r,e){ye(e,!0);const t=U(e,"color",3,"currentColor"),n=U(e,"size",3,24),i=U(e,"strokeWidth",3,2),a=U(e,"absoluteStrokeWidth",3,!1),s=U(e,"iconNode",19,()=>[]),o=qe(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var l=HP();Ht(l,h=>({...jP,...o,width:n(),height:n(),stroke:t(),"stroke-width":h,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>a()?Number(i())*24/Number(n()):i()]);var c=G(l);dn(c,17,s,u9,(h,d)=>{var f=B(()=>jk(g(d),2));let p=()=>g(f)[0],m=()=>g(f)[1];var y=Z(),v=P(y);f9(v,p,!0,(_,S)=>{Ht(_,()=>({...m()}))}),w(h,y)});var u=te(c);Re(u,()=>e.children??je),j(l),w(r,l),we()}function Ha(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];nr(r,tt({name:"x"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}var qP=$('<!> <span class="sr-only">Close</span>',1),GP=$("<!> <!>",1),$P=$("<!> <!>",1);function M2(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"showCloseButton",3,!0),i=qe(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children","showCloseButton"]);var a=Z(),s=P(a);he(s,()=>$y,(o,l)=>{l(o,tt(()=>e.portalProps,{children:(c,u)=>{var h=$P(),d=P(h);he(d,()=>Gy,(p,m)=>{m(p,{})});var f=te(d,2);{let p=B(()=>sr("fixed top-[50%] left-[50%] z-50 grid max-h-[100dvh] w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 overflow-y-auto rounded-lg border border-border/30 bg-background p-6 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 sm:max-w-lg md:max-h-[100vh]",e.class));he(f,()=>n2,(m,y)=>{y(m,tt({"data-slot":"dialog-content",get class(){return g(p)}},()=>i,{get ref(){return t()},set ref(v){t(v)},children:(v,_)=>{var S=GP(),A=P(S);Re(A,()=>e.children??je);var C=te(A,2);{var k=M=>{var N=Z(),F=P(N);he(F,()=>r2,(z,W)=>{W(z,{class:"absolute top-4 right-4 rounded-xs opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:(V,Q)=>{var K=qP(),ie=P(K);Ha(ie,{}),Et(2),w(V,K)},$$slots:{default:!0}})}),w(M,N)};le(C,M=>{n()&&M(k)})}w(v,S)},$$slots:{default:!0}}))})}w(c,h)},$$slots:{default:!0}}))}),w(r,a),we()}function WP(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("text-sm text-muted-foreground",e.class));he(a,()=>um,(o,l)=>{l(o,tt({"data-slot":"dialog-description",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}const I2=t2,$y=Zo;function VP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z"}]];nr(r,tt({name:"arrow-big-up"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Wy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]];nr(r,tt({name:"arrow-up"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function XP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];nr(r,tt({name:"book-open"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Vy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}],["path",{d:"m3.3 7 8.7 5 8.7-5"}],["path",{d:"M12 22V12"}]];nr(r,tt({name:"box"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function KP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18"}]];nr(r,tt({name:"brain"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function g0(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M20 6 9 17l-5-5"}]];nr(r,tt({name:"check"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function du(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m6 9 6 6 6-6"}]];nr(r,tt({name:"chevron-down"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Xy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m15 18-6-6 6-6"}]];nr(r,tt({name:"chevron-left"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function YP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m18 15-6-6-6 6"}]];nr(r,tt({name:"chevron-up"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function p0(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m9 18 6-6-6-6"}]];nr(r,tt({name:"chevron-right"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function QP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m7 15 5 5 5-5"}],["path",{d:"m7 9 5-5 5 5"}]];nr(r,tt({name:"chevrons-up-down"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Ky(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];nr(r,tt({name:"circle-alert"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function JP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];nr(r,tt({name:"circle-check-big"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function ZP(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];nr(r,tt({name:"circle-x"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Yy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]];nr(r,tt({name:"clock"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function eR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m16 18 6-6-6-6"}],["path",{d:"m8 6-6 6 6 6"}]];nr(r,tt({name:"code"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function il(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];nr(r,tt({name:"copy"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function tR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];nr(r,tt({name:"database"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function O2(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];nr(r,tt({name:"download"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function rR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];nr(r,tt({name:"ellipsis"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function nR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];nr(r,tt({name:"eye"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Lh(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];nr(r,tt({name:"file-text"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function iR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"m14.5 12.5-5 5"}],["path",{d:"m9.5 12.5 5 5"}]];nr(r,tt({name:"file-x"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Qy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}]];nr(r,tt({name:"file"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function aR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]];nr(r,tt({name:"funnel"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Jy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m12 14 4-4"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0"}]];nr(r,tt({name:"gauge"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Zy(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];nr(r,tt({name:"image"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function sR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];nr(r,tt({name:"info"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function oR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]];nr(r,tt({name:"key"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function uo(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];nr(r,tt({name:"loader-circle"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function lR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22"}]];nr(r,tt({name:"mic"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function cR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M5 12h14"}]];nr(r,tt({name:"minus"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function uR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];nr(r,tt({name:"monitor"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function hR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]];nr(r,tt({name:"moon"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function e6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M9 18V5l12-2v13"}],["circle",{cx:"6",cy:"18",r:"3"}],["circle",{cx:"18",cy:"16",r:"3"}]];nr(r,tt({name:"music"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function dR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]];nr(r,tt({name:"package"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function fR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}]];nr(r,tt({name:"panel-left"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function gR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M9 21V9"}]];nr(r,tt({name:"panels-top-left"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function pR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551"}]];nr(r,tt({name:"paperclip"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function mR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];nr(r,tt({name:"pencil"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function bR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];nr(r,tt({name:"play"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function vR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];nr(r,tt({name:"power"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function sc(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];nr(r,tt({name:"refresh-cw"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function N2(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];nr(r,tt({name:"rotate-ccw"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function Bh(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];nr(r,tt({name:"search"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function t6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18"}]];nr(r,tt({name:"server"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function r6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];nr(r,tt({name:"settings"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function yR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"}],["path",{d:"M20 3v4"}],["path",{d:"M22 5h-4"}],["path",{d:"M4 17v2"}],["path",{d:"M5 18H3"}]];nr(r,tt({name:"sparkles"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function n6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];nr(r,tt({name:"square-pen"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function wR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];nr(r,tt({name:"square"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function xR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];nr(r,tt({name:"sun"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function _R(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M10 2h4"}],["path",{d:"M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"}],["path",{d:"M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"}],["path",{d:"m2 2 20 20"}],["path",{d:"M12 12v-2"}]];nr(r,tt({name:"timer-off"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function oc(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];nr(r,tt({name:"trash-2"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function zh(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];nr(r,tt({name:"triangle-alert"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function i6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 3v12"}],["path",{d:"m17 8-5-5-5 5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}]];nr(r,tt({name:"upload"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function SR(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];nr(r,tt({name:"volume-2"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function a6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"7",cy:"12",r:"3"}],["path",{d:"M10 9v6"}],["circle",{cx:"17",cy:"12",r:"3"}],["path",{d:"M14 7v8"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1"}]];nr(r,tt({name:"whole-word"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}function s6(r,e){ye(e,!0);let t=qe(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}]];nr(r,tt({name:"wrench"},()=>t,{get iconNode(){return n},children:(i,a)=>{var s=Z(),o=P(s);Re(o,()=>e.children??je),w(i,s)},$$slots:{default:!0}})),we()}const Gi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),P2=[.001,0,0,.001,0,0],R2=1.35,Sa={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},al={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},o6="pdfjs_internal_editor_",Or={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},nn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},kR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},m0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Yn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},b0={ERRORS:0,WARNINGS:1,INFOS:5},v0={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},y0={moveTo:0,lineTo:1,curveTo:2,closePath:3},AR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let w0=b0.WARNINGS;function CR(r){Number.isInteger(r)&&(w0=r)}function ER(){return w0}function x0(r){w0>=b0.INFOS&&console.log(`Info: ${r}`)}function Nr(r){w0>=b0.WARNINGS&&console.log(`Warning: ${r}`)}function vn(r){throw new Error(r)}function Qn(r,e){r||vn(e)}function TR(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function l6(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=PR(r)}catch{}const n=e?URL.parse(r,e):URL.parse(r);return TR(n)?n:null}function c6(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&l6(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Wr(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const lc=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class u6 extends lc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class F2 extends lc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class D2 extends lc{constructor(e){super(e,"InvalidPDFException")}}class _0 extends lc{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class MR extends lc{constructor(e){super(e,"FormatError")}}class sl extends lc{constructor(e){super(e,"AbortException")}}function h6(r){(typeof r!="object"||r?.length===void 0)&&vn("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),s=r.subarray(i,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function Uh(r){typeof r!="string"&&vn("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function IR(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function OR(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function NR(){try{return new Function(""),!0}catch{return!1}}class ki{static get isLittleEndian(){return Wr(this,"isLittleEndian",OR())}static get isEvalSupported(){return Wr(this,"isEvalSupported",NR())}static get isOffscreenCanvasSupported(){return Wr(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Wr(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Wr(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Wr(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const L2=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class fr{static makeHexColor(e,t,n){return`#${L2[e]}${L2[t]}${L2[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,n=0){const i=e[n],a=e[n+1];e[n]=i*t[0]+a*t[2]+t[4],e[n+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],a=t[1],s=t[2],o=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const h=e[n+u],d=e[n+u+1];e[n+u]=h*i+d*s+l,e[n+u+1]=h*a+d*o+c}}static applyInverseTransform(e,t){const n=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const i=t[0],a=t[1],s=t[2],o=t[3],l=t[4],c=t[5],u=e[0],h=e[1],d=e[2],f=e[3];let p=i*u+l,m=p,y=i*d+l,v=y,_=o*h+c,S=_,A=o*f+c,C=A;if(a!==0||s!==0){const k=a*u,M=a*d,N=s*h,F=s*f;p+=N,v+=N,y+=F,m+=F,_+=k,C+=k,A+=M,S+=M}n[0]=Math.min(n[0],p,y,m,v),n[1]=Math.min(n[1],_,A,S,C),n[2]=Math.max(n[2],p,y,m,v),n[3]=Math.max(n[3],_,A,S,C)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],a=e[2],s=e[3],o=n**2+i**2,l=n*a+i*s,c=a**2+s**2,u=(o+c)/2,h=Math.sqrt(u**2-(o*c-l**2));t[0]=Math.sqrt(u+h||1),t[1]=Math.sqrt(u-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[n,a,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,i)}static#e(e,t,n,i,a,s,o,l,c,u){if(c<=0||c>=1)return;const h=1-c,d=c*c,f=d*c,p=h*(h*(h*e+3*c*t)+3*d*n)+f*i,m=h*(h*(h*a+3*c*s)+3*d*o)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],m),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],m)}static#t(e,t,n,i,a,s,o,l,c,u,h,d){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#e(e,t,n,i,a,s,o,l,-h/u,d);return}const f=u**2-4*h*c;if(f<0)return;const p=Math.sqrt(f),m=2*c;this.#e(e,t,n,i,a,s,o,l,(-u+p)/m,d),this.#e(e,t,n,i,a,s,o,l,(-u-p)/m,d)}static bezierBoundingBox(e,t,n,i,a,s,o,l,c){c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l),this.#t(e,n,a,o,t,i,s,l,3*(-e+3*(n-a)+o),6*(e-2*n+a),3*(n-e),c),this.#t(e,n,a,o,t,i,s,l,3*(-t+3*(i-s)+l),6*(t-2*i+s),3*(i-t),c)}}function PR(r){return decodeURIComponent(escape(r))}let B2=null,d6=null;function RR(r){return B2||(B2=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,d6=new Map([["ï¬","Å¿t"]])),r.replaceAll(B2,(e,t,n)=>t?t.normalize("NFKC"):d6.get(n))}function f6(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),h6(r)}const z2="pdfjs_internal_id_";function FR(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...a]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;const s=a.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(const l of a)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function $i(r,e,t){return Math.min(Math.max(r,e),t)}function g6(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(h6(r))}function DR(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Uh(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})}),typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});const ho="http://www.w3.org/2000/svg";class gu{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function jh(r,e="text"){if(qh(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Hh{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=s,n*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,y,v;u===0?(p=Math.abs(c-e[1])*n+a,m=Math.abs(l-e[0])*n+s,y=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+a,m=Math.abs(c-e[1])*n+s,y=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[u*n,h*n,d*n,f*n,p-u*n*l-d*n*c,m-h*n*l-f*n*c],this.width=y,this.height=v}get rawDims(){const e=this.viewBox;return Wr(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Hh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return fr.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];fr.applyTransform(t,this.transform);const n=[e[2],e[3]];return fr.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return fr.applyInverseTransform(n,this.transform),n}}class U2 extends lc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function S0(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function j2(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function LR(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function BR(r,e="document.pdf"){if(typeof r!="string")return e;if(S0(r))return Nr('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},a=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(a.test(s))return i(s);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const c of o)if(a.test(c))return i(c);const l=Array.from(n.searchParams.keys()).reverse();for(const c of l)if(a.test(c))return i(c)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class p6{started=Object.create(null);times=[];time(e){e in this.started&&Nr(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Nr(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function qh(r,e){const t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function qa(r){r.preventDefault()}function Jn(r){r.preventDefault(),r.stopPropagation()}function zR(r){console.log("Deprecated API usage: "+r)}class H2{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(s+=u,o+=h):c==="+"&&(s-=u,o-=h),new Date(Date.UTC(n,i,a,s,o,l))}}function UR(r,{scale:e=1,rotation:t=0}){const{width:n,height:i}=r.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new Hh({viewBox:a,userUnit:1,scale:e,rotation:t})}function k0(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Nr(`Not a valid color format: "${r}"`),[0,0,0])}function jR(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,k0(n))}e.remove()}function Fn(r){const{a:e,b:t,c:n,d:i,e:a,f:s}=r.getTransform();return[e,t,n,i,a,s]}function Ms(r){const{a:e,b:t,c:n,d:i,e:a,f:s}=r.getTransform().invertSelf();return[e,t,n,i,a,s]}function cc(r,e,t=!1,n=!0){if(e instanceof Hh){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=r,o=ki.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${a}px`,u=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(s.width=u,s.height=h):(s.width=h,s.height=u)}n&&r.setAttribute("data-main-rotation",e.rotation)}class Is{constructor(){const{pixelRatio:e}=Is;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,a=-1){let s=1/0,o=1/0,l=1/0;n=Is.capPixels(n,a),n>0&&(s=Math.sqrt(n/(e*t))),i!==-1&&(o=i/e,l=i/t);const c=Math.min(s,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const q2=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Gh{#e=null;#t=null;#r;#n=null;#a=null;#i=null;#s=null;static#o=null;constructor(e){this.#r=e,Gh.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#r._uiManager._signal;e.addEventListener("contextmenu",qa,{signal:t}),e.addEventListener("pointerdown",Gh.#l,{signal:t});const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const i=this.#r.toolbarPosition;if(i){const{style:a}=e,s=this.#r._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#r._focusEventsAllowed=!1,Jn(e)}#h(e){this.#r._focusEventsAllowed=!0,Jn(e)}#u(e){const t=this.#r._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",qa,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#r,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Gh.#o[e]),this.#u(n),n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#u(t),this.#n.append(t,this.#g),this.#a=e}addComment(e){if(this.#i)return;const t=e.render();t&&(this.#u(t),this.#n.prepend(t,this.#g),this.#i=e,e.toolbar=this)}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#u(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#s=await e.renderEditButton(this.#r);this.#u(t),this.#n.append(t,this.#g)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){this.#s&&(this.#s.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class HR{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",qa,{signal:this.#r._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#i(),e}#a(e,t){let n=0,i=0;for(const a of e){const s=a.y+a.height;if(s<n)continue;const o=a.x+(t?a.width:0);if(s>n){i=o,n=s;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,n]}show(e,t,n){const[i,a]=this.#a(t,n),{style:s}=this.#t||=this.#n();e.append(this.#t),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#r._signal;e.addEventListener("contextmenu",qa,{signal:n}),e.addEventListener("click",()=>{this.#r.highlightSelection("floating_button")},{signal:n}),this.#e.append(e)}}function m6(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}class qR{#e=0;get id(){return`${o6}${this.#e++}`}}class G2{#e=f6();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Wr(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#r||=new Map;let n=this.#r.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(n.url=t,i=await jh(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=G2._isSVGFittingCanvas,s=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,c()},s.onload=async()=>{const h=n.svgUrl=s.result;o.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=s.onerror=u});s.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Nr(i),n=null}return this.#r.set(e,n),n&&this.#r.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return this.#n(`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#r||=new Map;let n=this.#r.get(e);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,n),this.#r.set(n.id,n),n}getSvgUrl(e){const t=this.#r.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class GR{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(i&&e(),this.#t)return;const l={cmd:e,undo:t,post:n,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(l);return}if(s&&this.#e[this.#n].type===a){o&&(l.undo=this.#e[this.#n].undo),this.#e[this.#n]=l;return}const c=this.#n+1;c===this.#r?this.#e.splice(0,1):(this.#n=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class $h{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ki.platform;for(const[n,i,a={}]of e)for(const s of n){const o=s.startsWith("mac+");t&&o?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!o&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:o=null}}=n;o&&!o(e,t)||(i.bind(e,...s,t)(),a||Jn(t))}}class $2{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return jR(e),Wr(this,"_colors",e)}convert(e){const t=k0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,s)=>a===t[s]))return $2._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?fr.makeHexColor(...t):e}}class ol{#e=new AbortController;#t=null;#r=new Map;#n=new Map;#a=null;#i=null;#s=null;#o=new GR;#l=null;#c=null;#h=null;#u=0;#g=new Set;#p=null;#f=null;#d=new Set;_editorUndoBar=null;#m=!1;#y=!1;#b=!1;#w=null;#x=null;#v=null;#S=null;#C=!1;#k=null;#I=new qR;#M=!1;#T=!1;#E=null;#N=null;#L=null;#P=null;#j=null;#A=Or.NONE;#_=new Set;#B=null;#z=null;#H=null;#$=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#q=[0,0];#R=null;#F=null;#G=null;#Y=null;#D=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ol.prototype,t=s=>s.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Wr(this,"_keyboardManager",new $h([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&s.#F.contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&s.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,n,i,a,s,o,l,c,u,h,d,f,p,m,y){const v=this._signal=this.#e.signal;this.#F=e,this.#G=t,this.#Y=n,this.#a=i,this.#l=a,this.#z=s,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),this.#ae(),this.#ce(),this.#J(),this.#i=l.annotationStorage,this.#w=l.filterFactory,this.#H=c,this.#S=u||null,this.#m=h,this.#y=d,this.#b=f,this.#j=p||null,this.viewParameters={realScale:gu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=y!==!1}destroy(){this.#D?.resolve(),this.#D=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#r.clear(),this.#d.clear(),this.#P?.clear(),this.#t=null,this.#_.clear(),this.#o.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#k?.hide(),this.#k=null,this.#L?.destroy(),this.#L=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#R&&(clearTimeout(this.#R),this.#R=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Wr(this,"hcmFilter",this.#H?this.#w.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Wr(this,"direction",getComputedStyle(this.#F).direction)}get _highlightColors(){return Wr(this,"_highlightColors",this.#S?new Map(this.#S.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Wr(this,"highlightColors",null);const t=new Map,n=!!this.#H;for(const[i,a]of e){const s=i.endsWith("_HCM");if(n&&s){t.set(i.replace("_HCM",""),a);continue}!n&&!s&&t.set(i,a)}return Wr(this,"highlightColors",t)}get highlightColorNames(){return Wr(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=e}setMainHighlightColorPicker(e){this.#L=e}editAltText(e,t=!1){this.#a?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t){this.#l?.open(this,e,t)}getSignature(e){this.#z?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#z}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#b=t;break}}onPageChanging({pageNumber:e}){this.#u=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const n of this.#n.values()){const{x:i,y:a,width:s,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=a&&t<=a+o)return n}return null}disableUserSelect(e=!1){this.#G.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#d.add(e)}removeShouldRescale(e){this.#d.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*gu.PDF_TO_CSS_UNITS;for(const t of this.#d)t.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#X({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#Q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#n.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:s}=t,o=t.toString(),c=this.#X(t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const h=this.#Q(c),d=this.#A===Or.NONE,f=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:s,text:o}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(Or.HIGHLIGHT,f);return}f()}#ne(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#X(e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#k||=new HR(this),this.#k.show(n,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#Y;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#ie(){const e=document.getSelection();if(!e||e.isCollapsed){this.#B&&(this.#k?.hide(),this.#B=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#B)return;const i=this.#X(e).closest(".textLayer");if(!i){this.#B&&(this.#k?.hide(),this.#B=null,this.#O({hasSelectedText:!1}));return}if(this.#k?.hide(),this.#B=t,this.#O({hasSelectedText:!0}),!(this.#A!==Or.HIGHLIGHT&&this.#A!==Or.NONE)&&(this.#A===Or.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#A===Or.HIGHLIGHT?this.#Q(i):null;a?.toggleDrawing();const s=new AbortController,o=this.combinedSignal(s),l=c=>{c.type==="pointerup"&&c.button!==0||(s.abort(),a?.toggleDrawing(!0),c.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}}#K(e=""){this.#A===Or.HIGHLIGHT?this.highlightSelection(e):this.#m&&this.#ne()}#ae(){document.addEventListener("selectionchange",this.#ie.bind(this),{signal:this._signal})}#se(){if(this.#v)return;this.#v=new AbortController;const e=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#oe(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#_)if(t.div.contains(e)){this.#N=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[e,t]=this.#N;this.#N=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#J(){if(this.#E)return;this.#E=new AbortController;const e=this.combinedSignal(this.#E);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#le(){this.#E?.abort(),this.#E=null}#Z(){if(this.#c)return;this.#c=new AbortController;const e=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#ee(){this.#c?.abort(),this.#c=null}#ce(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#J(),this.#Z()}removeEditListeners(){this.#le(),this.#ee()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#_){const i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const s of this.#f)if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Nr(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const l of n){const c=await i.deserialize(l);if(!c)return;a.push(c)}const s=()=>{for(const l of a)this.#te(l);this.#re(a)},o=()=>{for(const l of a)l.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){Nr(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#A!==Or.NONE&&!this.isEditorHandlingKeyboard&&ol._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#O(e){Object.entries(e).some(([n,i])=>this.#W[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#A===Or.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#U([[nn.HIGHLIGHT_FREE,!0]]))}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#se(),this.#Z(),this.#O({isEditing:this.#A!==Or.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#oe(),this.#ee(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#f){this.#f=e;for(const t of this.#f)this.#U(t.defaultPropertiesToUpdate)}}getId(){return this.#I.id}get currentLayer(){return this.#n.get(this.#u)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#u}addLayer(e){this.#n.set(e.pageIndex,e),this.#M?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,a=!1){if(this.#A!==e&&!(this.#D&&(await this.#D.promise,!this.#D))){if(this.#D=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#A=e,e===Or.NONE){this.setEditingState(!1),this.#he(),this._editorUndoBar?.hide(),this.#D.resolve();return}e===Or.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#ue(),this.unselectAll();for(const s of this.#n.values())s.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),this.#D.resolve();return}for(const s of this.#r.values())s.annotationElementId===t||s.id===t?(this.setSelected(s),a?s.editComment():i&&s.enterInEditMode()):s.unselect();this.#D.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#f){switch(e){case nn.CREATE:this.currentLayer.addNewEditor(t);return;case nn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#$||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#_)n.updateParams(e,t);else for(const n of this.#f)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const a of this.#r.values())a.editorType===e&&a.show(t);(this.#$?.get(nn.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#U([[nn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#T!==e){this.#T=e;for(const t of this.#n.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ue(){if(!this.#M){this.#M=!0;const e=[];for(const t of this.#n.values())e.push(t.enable());await Promise.all(e);for(const t of this.#r.values())t.enable()}}#he(){if(this.unselectAll(),this.#M){this.#M=!1;for(const e of this.#n.values())e.disable();for(const e of this.#r.values())e.disable()}}getEditors(e){const t=[];for(const n of this.#r.values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#P?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#te(e){const t=this.#n.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}get#de(){let e=null;for(e of this.#_);return e}updateUI(e){this.#de===e&&this.#U(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#U(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#_.has(e)){this.#_.delete(e),e.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#_.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#h?.commitOrRemove();for(const t of this.#_)t!==e&&t.unselect();this.#_.clear(),this.#_.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(e){return this.#_.has(e)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(e){e.unselect(),this.#_.delete(e),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#O({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(e){this.#o.add(e),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}cleanUndoStack(e){this.#o.cleanType(e)}#V(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(const e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#_],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#te(a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#_)t.unselect();this.#_.clear();for(const t of e)t.isEmpty()||(this.#_.add(t),t.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#_)e.commit();this.#re(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#A!==Or.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const e of this.#_)e.unselect();this.#_.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#q[0]+=e,this.#q[1]+=t;const[i,a]=this.#q,s=[...this.#_],o=1e3;this.#R&&clearTimeout(this.#R),this.#R=setTimeout(()=>{this.#R=null,this.#q[0]=this.#q[1]=0,this.addCommands({cmd:()=>{for(const l of s)this.#r.has(l.id)&&(l.translateInPage(i,a),l.translationDone())},undo:()=>{for(const l of s)this.#r.has(l.id)&&(l.translateInPage(-i,-a),l.translationDone())},mustExec:!1})},o);for(const l of s)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#_)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:i,y:a,pageIndex:s},o]of e)o.newX=i,o.newY=a,o.newPageIndex=s,t||=i!==o.savedX||a!==o.savedY||s!==o.savedPageIndex;if(!t)return!1;const n=(i,a,s,o)=>{if(this.#r.has(i.id)){const l=this.#n.get(o);l?i._setParentAndPosition(l,a,s):(i.pageIndex=o,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:o}]of e)n(i,a,s,o)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:o}]of e)n(i,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const n of this.#p.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#A}get imageManager(){return Wr(this,"imageManager",new G2)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,u,h,d)=>({x:(u-i)/s,y:1-(c+h-n)/a,width:d/s,height:h/a});break;case"180":o=(c,u,h,d)=>({x:1-(c+h-n)/a,y:1-(u+d-i)/s,width:h/a,height:d/s});break;case"270":o=(c,u,h,d)=>({x:1-(u+d-i)/s,y:(c-n)/a,width:d/s,height:h/a});break;default:o=(c,u,h,d)=>({x:(c-n)/a,y:(u-i)/s,width:h/a,height:d/s});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const h=t.getRangeAt(c);if(!h.collapsed)for(const{x:d,y:f,width:p,height:m}of h.getClientRects())p===0||m===0||l.push(o(d,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#s||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#s?.delete(e)}renderAnnotationElement(e){const t=this.#s?.get(e.data.id);if(!t)return;const n=this.#i.getRawValue(t);n&&(this.#A===Or.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const i=this.#P?.get(e);i&&(i.setCanvas(t,n),this.#P.delete(e))}addMissingCanvas(e,t){(this.#P||=new Map).set(e,t)}}class Os{#e=null;#t=!1;#r=null;#n=null;#a=null;#i=null;#s=!1;#o=null;#l=null;#c=null;#h=null;#u=!1;static#g=null;static _l10n=null;constructor(e){this.#l=e,this.#u=e._uiManager.useNewAltTextFlow,Os.#g||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Os._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",Os.#g.missing),t.setAttribute("data-l10n-id",Os.#g["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#l._uiManager._signal;e.addEventListener("contextmenu",qa,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#s=!0,i(a))},{signal:n}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(e){this.#e===null&&(this.#c=e,this.#h=await Os._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#l.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#c===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(this.#c=n,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#f())}toggle(e=!1){this.#r&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r.disabled=!e)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#f(){const e=this.#r;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Os.#g[this.#p]),this.#n?.setAttribute("data-l10n-id",Os.#g[`${this.#p}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#l.id}`;const i=100,a=this.#l._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#a.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#a?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#l.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}let A0=class{#e=null;#t=!1;#r=null;#n=null;#a=null;#i=null;#s=!1;constructor(e){this.#r=e,this.toolbar=null}render(){if(!this.#r._uiManager.hasCommentManager())return null;const e=this.#e=document.createElement("button");e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=this.#r._uiManager._signal;e.addEventListener("contextmenu",qa,{signal:t}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:t});const n=i=>{i.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(this.#t=!0,n(i))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=this.#r.getClientDimensions(),i={top:e};this.#r._uiManager.direction==="ltr"?i.right=n:i.left=t,this.#r._uiManager.editComment(this.#r,i)}finish(){this.#e&&(this.#e.focus({focusVisible:this.#t}),this.#t=!1)}isDeleted(){return this.#s||this.#a===""}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#n}serialize(){return this.data}get data(){return{text:this.#a,date:this.#i,deleted:this.#s}}set data(e){if(e===null){this.#a="",this.#s=!0;return}this.#a=e,this.#i=new Date,this.#s=!1}setInitialText(e){this.#n=e,this.data=e}toggle(e=!1){this.#e&&(this.#e.disabled=!e)}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#r=null,this.#t=!1,this.#s=!1}};class C0{#e;#t=!1;#r=null;#n;#a;#i;#s;#o=null;#l;#c=null;#h;#u=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){this.#e=e,this.#r=n,this.#n=t,this.#a=i,this.#i=a,this.#s=s,this.#h=new AbortController,this.#l=AbortSignal.any([o,this.#h.signal]),e.addEventListener("touchstart",this.#g.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Is.pixelRatio}#g(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#l,i.signal]),s=this.#e,o={capture:!0,signal:a,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};s.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(Jn(c),l(c))},o),s.addEventListener("pointerup",l,o),s.addEventListener("pointercancel",l,o);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#l,this.#u.signal]),a=this.#e,s={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#p.bind(this),s);const o=this.#f.bind(this);a.addEventListener("touchend",o,s),a.addEventListener("touchcancel",o,s),s.capture=!0,a.addEventListener("pointerdown",Jn,s),a.addEventListener("pointermove",Jn,s),a.addEventListener("pointercancel",Jn,s),a.addEventListener("pointerup",Jn,s),this.#a?.()}if(Jn(e),e.touches.length!==2||this.#r?.()){this.#c=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#c={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#p(e){if(!this.#c||e.touches.length!==2)return;Jn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:s,screenY:o}=n,l=this.#c,{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,f=h-c,p=d-u,m=s-i,y=o-a,v=Math.hypot(m,y)||1,_=Math.hypot(f,p)||1;if(!this.#t&&Math.abs(_-v)<=C0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=a,l.touch1X=s,l.touch1Y=o,!this.#t){this.#t=!0;return}const S=[(i+s)/2,(a+o)/2];this.#i?.(S,_,v)}#f(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#s?.()),this.#c&&(Jn(e),this.#c=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class pr{#e=null;#t=null;#r=null;#n=null;#a=!1;#i=null;#s="";#o=!1;#l=null;#c=null;#h=null;#u=null;#g="";#p=!1;#f=null;#d=!1;#m=!1;#y=!1;#b=null;#w=0;#x=0;#v=null;#S=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#k=pr._zIndex++;static _borderLineWidth=-1;static _colorManager=new $2;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=pr.prototype._resizeWithKeyboard,t=ol.TRANSLATE_SMALL,n=ol.TRANSLATE_BIG;return Wr(this,"_resizerKeyboardManager",new $h([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],pr.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,s];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Wr(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new $R({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(pr._l10n??=e,pr._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),pr._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);pr._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){vn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(e){this.#C=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#k}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#G(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}#I([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#I(this.parentDimensions,e,t)}translateInPage(e,t){this.#f||=[this.x,this.y,this.width,this.height],this.#I(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#f||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[l,c]=this.getBaseTranslation();s+=l,o+=c;const{style:u}=n;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=pr,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:s,width:o,height:l}=this;if(o*=n,l*=i,a*=n,s*=i,this._mustFixPosition)switch(e){case 0:a=$i(a,0,n-o),s=$i(s,0,i-l);break;case 90:a=$i(a,0,n-l),s=$i(s,o,i);break;case 180:a=$i(a,o,n),s=$i(s,l,i);break;case 270:a=$i(a,l,n),s=$i(s,0,i-o);break}this.x=a/=n,this.y=s/=i;const[c,u]=this.getBaseTranslation();a+=c,s+=u,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#M(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return pr.#M(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return pr.#M(e,t,360-this.parentRotation)}#T(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/n).toFixed(2)}%`,this.#o||(a.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!this.#o&&t.endsWith("%");if(i&&a)return;const[s,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/s).toFixed(2)}%`),!this.#o&&!a&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#E(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");this.#l.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#N.bind(this,n),{signal:t}),i.addEventListener("contextmenu",qa,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#l)}#N(e,t){t.preventDefault();const{isMac:n}=ki.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#c=[t.screenX,t.screenY];const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Jn,{passive:!1,signal:s}),window.addEventListener("contextmenu",qa,{signal:s}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#P()};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}#L(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[a,s]=this.parentDimensions;this.setDims(a*n,s*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#P(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=this.#h;this.#h=null;const a=this.x,s=this.y,o=this.width,l=this.height;a===e&&s===t&&o===n&&l===i||this.addCommands({cmd:this.#L.bind(this,a,s,o,l),undo:this.#L.bind(this,e,t,n,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#j(e,t){const[n,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,c=pr.MIN_SIZE/n,u=pr.MIN_SIZE/i,h=this.#T(this.rotation),d=(L,J)=>[h[0]*L+h[2]*J,h[1]*L+h[3]*J],f=this.#T(360-this.rotation),p=(L,J)=>[f[0]*L+f[2]*J,f[1]*L+f[3]*J];let m,y,v=!1,_=!1;switch(e){case"topLeft":v=!0,m=(L,J)=>[0,0],y=(L,J)=>[L,J];break;case"topMiddle":m=(L,J)=>[L/2,0],y=(L,J)=>[L/2,J];break;case"topRight":v=!0,m=(L,J)=>[L,0],y=(L,J)=>[0,J];break;case"middleRight":_=!0,m=(L,J)=>[L,J/2],y=(L,J)=>[0,J/2];break;case"bottomRight":v=!0,m=(L,J)=>[L,J],y=(L,J)=>[0,0];break;case"bottomMiddle":m=(L,J)=>[L/2,J],y=(L,J)=>[L/2,0];break;case"bottomLeft":v=!0,m=(L,J)=>[0,J],y=(L,J)=>[L,0];break;case"middleLeft":_=!0,m=(L,J)=>[0,J/2],y=(L,J)=>[L,J/2];break}const S=m(o,l),A=y(o,l);let C=d(...A);const k=pr._round(a+C[0]),M=pr._round(s+C[1]);let N=1,F=1,z,W;if(t.fromKeyboard)({deltaX:z,deltaY:W}=t);else{const{screenX:L,screenY:J}=t,[X,re]=this.#c;[z,W]=this.screenToPageTranslation(L-X,J-re),this.#c[0]=L,this.#c[1]=J}if([z,W]=p(z/n,W/i),v){const L=Math.hypot(o,l);N=F=Math.max(Math.min(Math.hypot(A[0]-S[0]-z,A[1]-S[1]-W)/L,1/o,1/l),c/o,u/l)}else _?N=$i(Math.abs(A[0]-S[0]-z),c,1)/o:F=$i(Math.abs(A[1]-S[1]-W),u,1)/l;const V=pr._round(o*N),Q=pr._round(l*F);C=d(...y(V,Q));const K=k-C[0],ie=M-C[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=V,this.height=Q,this.x=K,this.y=ie,this.setDims(n*V,i*Q),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new Gh(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#r?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(Os.initialize(pr._l10n),this.#r=new Os(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}addCommentButton(){return this.#n?this.#n:this.#n=new A0(this)}get commentColor(){return null}get comment(){const e=this.#n;return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){this.#n||(this.#n=new A0(this)),this.#n.data=e}setCommentData(e){this.#n||(this.#n=new A0(this)),this.#n.setInitialText(e)}get hasEditedComment(){return this.#n?.hasBeenEdited()}async editComment(){this.#n||(this.#n=new A0(this)),this.#n.edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#a?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#$();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),m6(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new C0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#A.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#B.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#A(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const s=this.#T(this.rotation),o=(k,M)=>[s[0]*k+s[2]*M,s[1]*k+s[3]*M],[l,c]=this.parentDimensions,u=this.x,h=this.y,d=this.width,f=this.height,p=pr.MIN_SIZE/l,m=pr.MIN_SIZE/c;a=Math.max(Math.min(a,1/d,1/f),p/d,m/f);const y=pr._round(d*a),v=pr._round(f*a);if(y===d&&v===f)return;this.#f||=[u,h,d,f];const _=o(d/2,f/2),S=pr._round(u+_[0]),A=pr._round(h+_[1]),C=o(y/2,v/2);this.x=S-C[0],this.y=A-C[1],this.width=y,this.height=v,this.setDims(l*y,c*v),this.fixAndSetPosition(),this._onResizing()}#B(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#P()}pointerdown(e){const{isMac:t}=ki.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#H(e);return}this.#z(e)}#z(e){const{isMac:t}=ki.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},o=c=>{i.abort(),this.#i=null,this.#p=!1,this._uiManager.endDragSession()||this.#z(c),n&&this._onStopDragging()};t&&(this.#w=e.clientX,this.#x=e.clientY,this.#i=e.pointerId,this.#s=e.pointerType,window.addEventListener("pointermove",c=>{n||(n=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:d}=c;if(d!==this.#i){Jn(c);return}const[f,p]=this.screenToPageTranslation(u-this.#w,h-this.#x);this.#w=u,this.#x=h,this._uiManager.dragSelectedEditors(f,p)},s),window.addEventListener("touchmove",Jn,s),window.addEventListener("pointerdown",c=>{c.pointerType===this.#s&&(this.#S||c.isPrimary)&&o(c),Jn(c)},s));const l=c=>{if(!this.#i||this.#i===c.pointerId){o(c);return}Jn(c)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/i,u=t/i,h=this.x*a,d=this.y*s,f=this.width*a,p=this.height*s;switch(n){case 0:return[h+c+o,s-d-u-p+l,h+c+f+o,s-d-u+l];case 90:return[h+u+o,s-d+c+l,h+u+p+o,s-d+c+f+l];case 180:return[h-c-f+o,s-d+u+l,h-c+o,s-d+u+p+l];case 270:return[h-u-p+o,s-d-c-f+l,h-u+o,s-d-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,s]=e,o=a-n,l=s-i;switch(this.rotation){case 0:return[n,t-s,o,l];case 90:return[n,t-i,l,o];case 180:return[a,t-i,o,l];case 270:return[a,t-s,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&i>0&&e<a&&n>0}#$(){if(this.#u||!this.div)return;this.#u=new AbortController;const e=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#$()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){vn("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[o,l,c,u]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/a,i.y=l/s,i.width=c/a,i.height=u/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#G(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#E(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#l.children;if(!this.#t){this.#t=Array.from(t);const s=this.#W.bind(this),o=this.#q.bind(this),l=this._uiManager._signal;for(const c of this.#t){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",s,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#R.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",pr._l10nResizer[u])}}const n=this.#t[0];let i=0;for(const s of t){if(s===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let o=0;o<i-a;o++)this.#l.append(this.#l.firstChild);else if(a>i)for(let o=0;o<a-i;o++)this.#l.firstChild.before(this.#l.lastChild);let s=0;for(const o of t){const c=this.#t[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",pr._l10nResizer[c])}}this.#F(0),this.#y=!0,this.#l.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){pr._resizerKeyboardManager.exec(this,e)}#q(e){this.#y&&e.relatedTarget?.parentNode!==this.#l&&this.#G()}#R(e){this.#g=this.#y?e:""}#F(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#y&&this.#j(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#G(){this.#y=!1,this.#F(-1),this.#P()}_stopResizingWithKeyboard(){this.#G(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#d}set isEditing(e){this.#d=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#o=!0;const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#v||=new Map;const{action:n}=e;let i=this.#v.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(n),this.#v.size===0&&(this.#v=null)},pr._telemetryTimeout),this.#v.set(n,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class $R extends pr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const b6=3285377520,Ga=4294901760,Ns=65535;class v6{constructor(e){this.h1=e?e&4294967295:b6,this.h2=e?e&4294967295:b6}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let m=0,y=e.length;m<y;m++){const v=e.charCodeAt(m);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,s=new Uint32Array(t.buffer,0,i);let o=0,l=0,c=this.h1,u=this.h2;const h=3432918353,d=461845907,f=h&Ns,p=d&Ns;for(let m=0;m<i;m++)m&1?(o=s[m],o=o*h&Ga|o*f&Ns,o=o<<15|o>>>17,o=o*d&Ga|o*p&Ns,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=s[m],l=l*h&Ga|l*f&Ns,l=l<<15|l>>>17,l=l*d&Ga|l*p&Ns,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,a){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&Ga|o*f&Ns,o=o<<15|o>>>17,o=o*d&Ga|o*p&Ns,i&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ga|e*36045&Ns,t=t*4283543511&Ga|((t<<16|e>>>16)*2950163797&Ga)>>>16,e^=t>>>1,e=e*444984403&Ga|e*60499&Ns,t=t*3301882366&Ga|((t<<16|e>>>16)*3120437893&Ga)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const W2=Object.freeze({map:null,hash:"",transfer:void 0});class V2{#e=!1;#t=null;#r=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#r.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#r.get(e)}remove(e){if(this.#r.delete(e),this.#r.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#r.values())if(t instanceof pr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#r.get(e);let i=!1;if(n!==void 0)for(const[a,s]of Object.entries(t))n[a]!==s&&(i=!0,n[a]=s);else i=!0,this.#r.set(e,t);i&&this.#n(),t instanceof pr&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#r.has(e)}get size(){return this.#r.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new y6(this)}get serializable(){if(this.#r.size===0)return W2;const e=new Map,t=new v6,n=[],i=Object.create(null);let a=!1;for(const[s,o]of this.#r){const l=o instanceof pr?o.serialize(!1,i):o;l&&(e.set(s,l),t.update(`${s}:${JSON.stringify(l)}`),a||=!!l.bitmap)}if(a)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:W2}get editorStats(){let e=null;const t=new Map;for(const n of this.#r.values()){if(!(n instanceof pr))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(n).constructor),e||=Object.create(null);const s=e[a]||=new Map;for(const[o,l]of Object.entries(i)){if(o==="type")continue;let c=s.get(o);c||(c=new Map,s.set(o,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#r.values())!(t instanceof pr)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#r.entries()}}class y6 extends V2{#e;constructor(e){super();const{map:t,hash:n,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:n,transfer:i}}get print(){vn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Wr(this,"modifiedIds",{ids:new Set,hash:""})}}class WR{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Qn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,o=new FontFace(i,a,s);this.addNativeFontFace(o);try{await o.load(),this.#e.add(i),n?.(e)}catch{Nr(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}vn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Nr(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Wr(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Wr(this,"isSyncFontLoadingSupported",Gi||ki.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Qn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Wr(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,C){return A.charCodeAt(C)<<24|A.charCodeAt(C+1)<<16|A.charCodeAt(C+2)<<8|A.charCodeAt(C+3)&255}function i(A,C,k,M){const N=A.substring(0,C),F=A.substring(C+k);return N+M+F}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(A,C){if(++c>30){Nr("Load test font never loaded."),C();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(u.bind(null,A,C))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const p=16,m=1482184792;let y=n(d,p);for(a=0,s=h.length-3;a<s;a+=4)y=y-m+n(h,a)|0;a<h.length&&(y=y-m+n(h+"XXX",a)|0),d=i(d,p,4,IR(y));const v=`url(data:font/opentype;base64,${btoa(d)});`,_=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(_);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const A of[e.loadedName,h]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=A,S.append(C)}this._document.body.append(S),u(h,()=>{S.remove(),t.complete()})}}class VR{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${g6(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(s){Nr(`getPathGenerator - ignoring character: "${s}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}}function XR(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Gi)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function KR(r){if(Gi&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Uh(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function E0(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const X2=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,YR=r=>typeof r=="object"&&typeof r?.name=="string",QR=FR.bind(null,X2,YR);class JR{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Nr("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const T0={DATA:1,ERROR:2},Zn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function w6(){}function sa(r){if(r instanceof sl||r instanceof D2||r instanceof u6||r instanceof _0||r instanceof F2)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||vn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new sl(r.message);case"InvalidPDFException":return new D2(r.message);case"PasswordException":return new u6(r.message,r.code);case"ResponseException":return new _0(r.message,r.status,r.missing);case"UnknownErrorException":return new F2(r.message,r.details)}return new F2(r.message,r.toString())}class Wh{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===T0.DATA)i.resolve(e.data);else if(e.callback===T0.ERROR)i.reject(sa(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:n,targetName:i,callback:T0.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:n,targetName:i,callback:T0.ERROR,callbackId:e.callbackId,reason:sa(s)})});return}if(e.streamId){this.#r(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[a]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[a].pullCall=u,l.postMessage({sourceName:s,targetName:o,stream:Zn.PULL,streamId:a,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Qn(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[a].cancelCall=u,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:Zn.CANCEL,streamId:a,reason:sa(c)}),u.promise}},n)}#r(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],l={enqueue(c,u=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=u,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Zn.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Zn.CLOSE,streamId:t}),delete s.streamSinks[t])},error(c){Qn(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Zn.ERROR,streamId:t,reason:sa(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Zn.START_COMPLETE,streamId:t,success:!0})},function(c){a.postMessage({sourceName:n,targetName:i,stream:Zn.START_COMPLETE,streamId:t,reason:sa(c)})})}#n(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Zn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(sa(e.reason));break;case Zn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(sa(e.reason));break;case Zn.PULL:if(!o){a.postMessage({sourceName:n,targetName:i,stream:Zn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||w6).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Zn.PULL_COMPLETE,streamId:t,success:!0})},function(c){a.postMessage({sourceName:n,targetName:i,stream:Zn.PULL_COMPLETE,streamId:t,reason:sa(c)})});break;case Zn.ENQUEUE:if(Qn(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Zn.CLOSE:if(Qn(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#a(s,t);break;case Zn.ERROR:Qn(s,"error should have stream controller"),s.controller.error(sa(e.reason)),this.#a(s,t);break;case Zn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(sa(e.reason)),this.#a(s,t);break;case Zn.CANCEL:if(!o)break;const l=sa(e.reason);Promise.try(o.onCancel||w6,l).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Zn.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){a.postMessage({sourceName:n,targetName:i,stream:Zn.CANCEL_COMPLETE,streamId:t,reason:sa(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class x6{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){vn("Abstract method `_createCanvas` called.")}}class ZR extends x6{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class _6{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){vn("Abstract method `_fetch` called.")}}class S6 extends _6{async _fetch(e){const t=await jh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Uh(t)}}class k6{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}class eF extends k6{#e;#t;#r;#n;#a;#i;#s=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#l(){return this.#i||=new Map}get#c(){if(!this.#r){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#a.createElementNS(ho,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#r=this.#a.createElementNS(ho,"defs"),e.append(n),n.append(this.#r),this.#a.body.append(e)}return this.#r}#h(e){if(e.length===1){const l=e[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=l[h]/255;const u=c.join(",");return[u,u,u]}const[t,n,i]=e,a=new Array(256),s=new Array(256),o=new Array(256);for(let l=0;l<256;l++)a[l]=t[l]/255,s[l]=n[l]/255,o[l]=i[l]/255;return[a.join(","),s.join(","),o.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(S0(t)?Nr('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=c6(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,i,a]=this.#h(e),s=e.length===1?n:`${n}${i}${a}`;if(t=this.#o.get(s),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_transfer_map_${this.#s++}`,l=this.#u(o);this.#o.set(e,l),this.#o.set(s,l);const c=this.#f(o);return this.#m(n,i,a,c),l}addHCMFilter(e,t){const n=`${e}-${t}`,i="base";let a=this.#l.get(i);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#l.set(i,a)),!e||!t))return a.url;const s=this.#b(e);e=fr.makeHexColor(...s);const o=this.#b(t);if(t=fr.makeHexColor(...o),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const l=new Array(256);for(let f=0;f<=255;f++){const p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#n}_hcm_filter`,h=a.filter=this.#f(u);this.#m(c,c,c,h),this.#p(h);const d=(f,p)=>{const m=s[f]/255,y=o[f]/255,v=new Array(p+1);for(let _=0;_<=p;_++)v[_]=m+_/p*(y-m);return v.join(",")};return this.#m(d(0,5),d(1,5),d(2,5),h),a.url=this.#u(u),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#h([e]),i=`alpha_${n}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#s++}`,s=this.#u(a);this.#o.set(e,s),this.#o.set(i,s);const o=this.#f(a);return this.#y(n,o),s}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,i;if(e?([n]=this.#h([e]),i=`luminosity_${n}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#s++}`,s=this.#u(a);this.#o.set(e,s),this.#o.set(i,s);const o=this.#f(a);return this.#g(o),e&&this.#y(n,o),s}addHighlightHCMFilter(e,t,n,i,a){const s=`${t}-${n}-${i}-${a}`;let o=this.#l.get(e);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#l.set(e,o)),!t||!n))return o.url;const[l,c]=[t,n].map(this.#b.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,f]=[i,a].map(this.#b.bind(this));h<u&&([u,h,d,f]=[h,u,f,d]),this.#c.style.color="";const p=(v,_,S)=>{const A=new Array(256),C=(h-u)/S,k=v/255,M=(_-v)/(255*S);let N=0;for(let F=0;F<=S;F++){const z=Math.round(u+F*C),W=k+F*M;for(let V=N;V<=z;V++)A[V]=W;N=z+1}for(let F=N;F<256;F++)A[F]=A[N-1];return A.join(",")},m=`g_${this.#n}_hcm_${e}_filter`,y=o.filter=this.#f(m);return this.#p(y),this.#m(p(d[0],f[0],5),p(d[1],f[1],5),p(d[2],f[2],5),y),o.url=this.#u(m),o.url}destroy(e=!1){e&&this.#i?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#s=0)}#g(e){const t=this.#a.createElementNS(ho,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#a.createElementNS(ho,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#a.createElementNS(ho,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#d(e,t,n){const i=this.#a.createElementNS(ho,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}#m(e,t,n,i){const a=this.#a.createElementNS(ho,"feComponentTransfer");i.append(a),this.#d(a,"feFuncR",e),this.#d(a,"feFuncG",t),this.#d(a,"feFuncB",n)}#y(e,t){const n=this.#a.createElementNS(ho,"feComponentTransfer");t.append(n),this.#d(n,"feFuncA",e)}#b(e){return this.#c.style.color=e,k0(getComputedStyle(this.#c).getPropertyValue("color"))}}class A6{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){vn("Abstract method `_fetch` called.")}}class C6 extends A6{async _fetch(e){const t=await jh(e,"arraybuffer");return new Uint8Array(t)}}class E6{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){vn("Abstract method `_fetch` called.")}}class T6 extends E6{async _fetch(e){const t=await jh(e,"arraybuffer");return new Uint8Array(t)}}Gi&&Nr("Please use the `legacy` build in Node.js environments.");async function K2(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class tF extends k6{}class rF extends x6{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href)("@napi-rs/canvas").createCanvas(e,t)}}class nF extends _6{async _fetch(e){return K2(e)}}class iF extends A6{async _fetch(e){return K2(e)}}class aF extends E6{async _fetch(e){return K2(e)}}const Ai={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Y2(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}class Q2{isModifyingCurrentTransform(){return!1}getPattern(){vn("Abstract method `getPattern` called.")}}class sF extends Q2{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===Ai.STROKE||i===Ai.FILL){const s=t.current.getClippedPathBoundingBox(i,Fn(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-s[0],-s[1]),n=fr.transform(n,[1,0,0,1,s[0],s[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Y2(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(n);a.setTransform(h)}else Y2(e,this._bbox),a=this._createGradient(e);return a}}function J2(r,e,t,n,i,a,s,o){const l=e.coords,c=e.colors,u=r.data,h=r.width*4;let d;l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=a,a=s,s=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=o,o=d),l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=a,a=s,s=d);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,m=(l[n]+e.offsetX)*e.scaleX,y=(l[n+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,_=(l[i+1]+e.offsetY)*e.scaleY;if(p>=_)return;const S=c[a],A=c[a+1],C=c[a+2],k=c[s],M=c[s+1],N=c[s+2],F=c[o],z=c[o+1],W=c[o+2],V=Math.round(p),Q=Math.round(_);let K,ie,L,J,X,re,D,se;for(let ce=V;ce<=Q;ce++){if(ce<y){const pe=ce<p?0:(p-ce)/(p-y);K=f-(f-m)*pe,ie=S-(S-k)*pe,L=A-(A-M)*pe,J=C-(C-N)*pe}else{let pe;ce>_?pe=1:y===_?pe=0:pe=(y-ce)/(y-_),K=m-(m-v)*pe,ie=k-(k-F)*pe,L=M-(M-z)*pe,J=N-(N-W)*pe}let q;ce<p?q=0:ce>_?q=1:q=(p-ce)/(p-_),X=f-(f-v)*q,re=S-(S-F)*q,D=A-(A-z)*q,se=C-(C-W)*q;const ae=Math.round(Math.min(K,X)),fe=Math.round(Math.max(K,X));let xe=h*ce+ae*4;for(let pe=ae;pe<=fe;pe++)q=(K-pe)/(K-X),q<0?q=0:q>1&&(q=1),u[xe++]=ie-(ie-re)*q|0,u[xe++]=L-(L-D)*q|0,u[xe++]=J-(J-se)*q|0,u[xe++]=255}}function oF(r,e,t){const n=e.coords,i=e.colors;let a,s;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(a=0;a<l;a++){let u=a*o;for(let h=0;h<c;h++,u++)J2(r,t,n[u],n[u+1],n[u+o],i[u],i[u+1],i[u+o]),J2(r,t,n[u+o+1],n[u+1],n[u+o],i[u+o+1],i[u+1],i[u+o])}break;case"triangles":for(a=0,s=n.length;a<s;a+=3)J2(r,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class lF extends Q2{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/h,p=u/d,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},y=h+4,v=d+4,_=n.getCanvas("mesh",y,v),S=_.context,A=S.createImageData(h,d);if(t){const k=A.data;for(let M=0,N=k.length;M<N;M+=4)k[M]=t[0],k[M+1]=t[1],k[M+2]=t[2],k[M+3]=255}for(const k of this._figures)oF(A,k,m);return S.putImageData(A,2,2),{canvas:_.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Y2(e,this._bbox);const a=new Float32Array(2);if(i===Ai.SHADING)fr.singularValueDecompose2dScale(Fn(e),a);else if(this.matrix){fr.singularValueDecompose2dScale(this.matrix,a);const[o,l]=a;fr.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=o,a[1]*=l}else fr.singularValueDecompose2dScale(t.baseTransform,a);const s=this._createMeshCanvas(a,i===Ai.SHADING?null:this._background,t.cachedCanvases);return i!==Ai.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class cF extends Q2{getPattern(){return"hotpink"}}function uF(r){switch(r[0]){case"RadialAxial":return new sF(r);case"Mesh":return new lF(r);case"Dummy":return new cF}throw new Error(`Unknown IR type: ${r[0]}`)}const M6={COLORED:1,UNCOLORED:2};class Z2{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:a,color:s,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),x0("TilingType: "+a);const u=t[0],h=t[1],d=t[2],f=t[3],p=d-u,m=f-h,y=new Float32Array(2);fr.singularValueDecompose2dScale(this.matrix,y);const[v,_]=y;fr.singularValueDecompose2dScale(this.baseTransform,y);const S=v*y[0],A=_*y[1];let C=p,k=m,M=!1,N=!1;const F=Math.ceil(l*S),z=Math.ceil(c*A),W=Math.ceil(p*S),V=Math.ceil(m*A);F>=W?C=l:M=!0,z>=V?k=c:N=!0;const Q=this.getSizeAndScale(C,this.ctx.canvas.width,S),K=this.getSizeAndScale(k,this.ctx.canvas.height,A),ie=e.cachedCanvases.getCanvas("pattern",Q.size,K.size),L=ie.context,J=o.createCanvasGraphics(L);if(J.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(J,i,s),L.translate(-Q.scale*u,-K.scale*h),J.transform(Q.scale,0,0,K.scale,0,0),L.save(),this.clipBbox(J,u,h,d,f),J.baseTransform=Fn(J.ctx),J.executeOperatorList(n),J.endDrawing(),L.restore(),M||N){const X=ie.canvas;M&&(C=l),N&&(k=c);const re=this.getSizeAndScale(C,this.ctx.canvas.width,S),D=this.getSizeAndScale(k,this.ctx.canvas.height,A),se=re.size,ce=D.size,q=e.cachedCanvases.getCanvas("pattern-workaround",se,ce),ae=q.context,fe=M?Math.floor(p/l):0,xe=N?Math.floor(m/c):0;for(let pe=0;pe<=fe;pe++)for(let Ce=0;Ce<=xe;Ce++)ae.drawImage(X,se*pe,ce*Ce,se,ce,0,0,se,ce);return{canvas:q.canvas,scaleX:re.scale,scaleY:D.scale,offsetX:u,offsetY:h}}return{canvas:ie.canvas,scaleX:Q.scale,scaleY:K.scale,offsetX:u,offsetY:h}}getSizeAndScale(e,t,n){const i=Math.max(Z2.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const s=i-t,o=a-n;e.ctx.rect(t,n,s,o),fr.axialAlignedBoundingBox([t,n,i,a],Fn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case M6.COLORED:const{fillStyle:s,strokeStyle:o}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=o;break;case M6.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new MR(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let a=n;i!==Ai.SHADING&&(a=fr.transform(a,t.baseTransform),this.matrix&&(a=fr.transform(a,this.matrix)));const s=this.createPatternCanvas(t);let o=new DOMMatrix(a);o=o.translate(s.offsetX,s.offsetY),o=o.scale(1/s.scaleX,1/s.scaleY);const l=e.createPattern(s.canvas,"repeat");return l.setTransform(o),l}}function hF({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const o=ki.isLittleEndian?4278190080:255,[l,c]=s?[a,o]:[o,a],u=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(const y=e+u;e<y;e++){const v=e<d?r[e]:255;t[f++]=v&128?c:l,t[f++]=v&64?c:l,t[f++]=v&32?c:l,t[f++]=v&16?c:l,t[f++]=v&8?c:l,t[f++]=v&4?c:l,t[f++]=v&2?c:l,t[f++]=v&1?c:l}if(h===0)continue;const m=e<d?r[e++]:255;for(let y=0;y<h;y++)t[f++]=m&1<<7-y?c:l}return{srcPos:e,destPos:f}}const I6=16,O6=100,dF=15,N6=10,oa=16,eb=new DOMMatrix,ka=new Float32Array(2),pu=new Float32Array([1/0,1/0,-1/0,-1/0]);function fF(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,a,s,o){e.transform(t,n,i,a,s,o),this.__originalTransform(t,n,i,a,s,o)},r.setTransform=function(t,n,i,a,s,o){e.setTransform(t,n,i,a,s,o),this.__originalSetTransform(t,n,i,a,s,o)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,a,s,o){e.bezierCurveTo(t,n,i,a,s,o),this.__originalBezierCurveTo(t,n,i,a,s,o)},r.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class gF{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function M0(r,e,t,n,i,a,s,o,l,c){const[u,h,d,f,p,m]=Fn(r);if(h===0&&d===0){const _=s*u+p,S=Math.round(_),A=o*f+m,C=Math.round(A),k=(s+l)*u+p,M=Math.abs(Math.round(k)-S)||1,N=(o+c)*f+m,F=Math.abs(Math.round(N)-C)||1;return r.setTransform(Math.sign(u),0,0,Math.sign(f),S,C),r.drawImage(e,t,n,i,a,0,0,M,F),r.setTransform(u,h,d,f,p,m),[M,F]}if(u===0&&f===0){const _=o*d+p,S=Math.round(_),A=s*h+m,C=Math.round(A),k=(o+c)*d+p,M=Math.abs(Math.round(k)-S)||1,N=(s+l)*h+m,F=Math.abs(Math.round(N)-C)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,S,C),r.drawImage(e,t,n,i,a,0,0,F,M),r.setTransform(u,h,d,f,p,m),[F,M]}r.drawImage(e,t,n,i,a,s,o,l,c);const y=Math.hypot(u,h),v=Math.hypot(d,f);return[y*l,v*c]}class P6{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=P2;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Pi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t){this.clipBox=new Float32Array([0,0,e,t]),this.minMax=pu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ai.FILL,t=null){const n=this.minMax.slice();if(e===Ai.STROKE){t||vn("Stroke bounding box must include transform."),fr.singularValueDecompose2dScale(t,ka);const i=ka[0]*this.lineWidth/2,a=ka[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=fr.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(pu,0)}getClippedPathBoundingBox(e=Ai.FILL,t=null){return fr.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function R6(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%oa,a=(t-i)/oa,s=i===0?a:a+1,o=r.createImageData(n,oa);let l=0,c;const u=e.data,h=o.data;let d,f,p,m;if(e.kind===m0.GRAYSCALE_1BPP){const y=u.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),_=v.length,S=n+7>>3,A=4294967295,C=ki.isLittleEndian?4278190080:255;for(d=0;d<s;d++){for(p=d<a?oa:i,c=0,f=0;f<p;f++){const k=y-l;let M=0;const N=k>S?n:k*8-7,F=N&-8;let z=0,W=0;for(;M<F;M+=8)W=u[l++],v[c++]=W&128?A:C,v[c++]=W&64?A:C,v[c++]=W&32?A:C,v[c++]=W&16?A:C,v[c++]=W&8?A:C,v[c++]=W&4?A:C,v[c++]=W&2?A:C,v[c++]=W&1?A:C;for(;M<N;M++)z===0&&(W=u[l++],z=128),v[c++]=W&z?A:C,z>>=1}for(;c<_;)v[c++]=0;r.putImageData(o,0,d*oa)}}else if(e.kind===m0.RGBA_32BPP){for(f=0,m=n*oa*4,d=0;d<a;d++)h.set(u.subarray(l,l+m)),l+=m,r.putImageData(o,0,f),f+=oa;d<s&&(m=n*i*4,h.set(u.subarray(l,l+m)),r.putImageData(o,0,f))}else if(e.kind===m0.RGB_24BPP)for(p=oa,m=n*p,d=0;d<s;d++){for(d>=a&&(p=i,m=n*p),c=0,f=m;f--;)h[c++]=u[l++],h[c++]=u[l++],h[c++]=u[l++],h[c++]=255;r.putImageData(o,0,d*oa)}else throw new Error(`bad image kind: ${e.kind}`)}function F6(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%oa,a=(t-i)/oa,s=i===0?a:a+1,o=r.createImageData(n,oa);let l=0;const c=e.data,u=o.data;for(let h=0;h<s;h++){const d=h<a?oa:i;({srcPos:l}=hF({src:c,srcPos:l,dest:u,width:n,height:d,nonBlackColor:0})),r.putImageData(o,0,h*oa)}}function Vh(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function I0(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function D6(r,e){if(e)return!0;fr.singularValueDecompose2dScale(r,ka);const t=Math.fround(Is.pixelRatio*gu.PDF_TO_CSS_UNITS);return ka[0]<=t&&ka[1]<=t}const pF=["butt","round","square"],mF=["miter","round","bevel"],bF={},L6={};class mu{constructor(e,t,n,i,a,{optionalContentConfig:s,markedContentStack:o=null},l,c){this.ctx=e,this.current=new P6(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new gF(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Fn(this.compositeCtx))}this.ctx.save(),I0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Fn(this.ctx)}executeOperatorList(e,t,n,i){const a=e.argsArray,s=e.fnArray;let o=t||0;const l=a.length;if(l===o)return o;const c=l-o>N6&&typeof n=="function",u=c?Date.now()+dF:0;let h=0;const d=this.commonObjs,f=this.objs;let p;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,n),o;if(p=s[o],p!==v0.dependency)this[p].apply(this,a[o]);else for(const m of a[o]){const y=m.startsWith("g_")?d:f;if(!y.has(m))return y.get(m,n),o}if(o++,o===l)return o;if(c&&++h>N6){if(Date.now()>u)return n(),o;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),o=n,l=i,c="prescale1",u,h;for(;a>2&&o>1||s>2&&l>1;){let d=o,f=l;a>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/d),s>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/f),u=this.cachedCanvases.getCanvas(c,d,f),h=u.context,h.clearRect(0,0,d,f),h.drawImage(e,0,0,o,l,0,0,d,f),e=u.canvas,o=d,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,a=this.current.fillColor,s=this.current.patternFill,o=Fn(t);let l,c,u,h;if((e.bitmap||e.data)&&e.count>1){const F=e.bitmap||e.data.buffer;c=JSON.stringify(s?o:[o.slice(0,4),a]),l=this._cachedBitmapsMap.get(F),l||(l=new Map,this._cachedBitmapsMap.set(F,l));const z=l.get(c);if(z&&!s){const W=Math.round(Math.min(o[0],o[2])+o[4]),V=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:z,offsetX:W,offsetY:V}}u=z}u||(h=this.cachedCanvases.getCanvas("maskCanvas",n,i),F6(h.context,e));let d=fr.transform(o,[1/n,0,0,-1/i,0,0]);d=fr.transform(d,[1,0,0,1,0,-i]);const f=pu.slice();fr.axialAlignedBoundingBox([0,0,n,i],d,f);const[p,m,y,v]=f,_=Math.round(y-p)||1,S=Math.round(v-m)||1,A=this.cachedCanvases.getCanvas("fillCanvas",_,S),C=A.context,k=p,M=m;C.translate(-k,-M),C.transform(...d),u||(u=this._scaleImage(h.canvas,Ms(C)),u=u.img,l&&s&&l.set(c,u)),C.imageSmoothingEnabled=D6(Fn(C),e.interpolate),M0(C,u,0,0,u.width,u.height,0,0,n,i),C.globalCompositeOperation="source-in";const N=fr.transform(Ms(C),[1,0,0,1,-k,-M]);return C.fillStyle=s?a.getPattern(t,this,N,Ai.FILL):a,C.fillRect(0,0,n,i),l&&!s&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,A.canvas)),{canvas:A.canvas,offsetX:Math.round(k),offsetY:Math.round(M)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=pF[e]}setLineJoin(e){this.ctx.lineJoin=mF[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),Vh(this.suspendedCtx,a),fF(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Vh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],s=i[1],o=i[2]-a,l=i[3]-s;o===0||l===0||(this.genericComposeSMask(t.context,n,o,l,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,s,o,l,c,u,h){let d=e.canvas,f=l-u,p=c-h;if(s)if(f<0||p<0||f+n>d.width||p+i>d.height){const y=this.cachedCanvases.getCanvas("maskExtension",n,i),v=y.context;v.drawImage(d,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=s,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",d=y.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(f,p,n,i),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(f,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,c,n,i),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(d,f,p,n,i,l,c,n,i),t.restore()}save(){this.inSMaskMode&&Vh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Vh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,a,s){this.ctx.transform(e,t,n,i,a,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[i]=t;if(!n){i||=t[0]=new Path2D,this[e](i);return}if(!(i instanceof Path2D)){const a=t[0]=new Path2D;for(let s=0,o=i.length;s<o;)switch(i[s++]){case y0.moveTo:a.moveTo(i[s++],i[s++]);break;case y0.lineTo:a.lineTo(i[s++],i[s++]);break;case y0.curveTo:a.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case y0.closePath:a.closePath();break;default:Nr(`Unrecognized drawing path operator: ${i[s-1]}`);break}i=a}fr.axialAlignedBoundingBox(n,Fn(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&i?.getPattern){const a=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,Ms(n),Ai.STROKE),a){const s=new Path2D;s.addPath(e,n.getTransform().invertSelf().multiplySelf(a)),e=s}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(Ai.STROKE,Fn(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let s=!1;if(a){const l=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,Ms(n),Ai.FILL),l){const c=new Path2D;c.addPath(e,n.getTransform().invertSelf().multiplySelf(l)),e=c}s=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),s&&n.restore(),t&&this.consumePath(e,o)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=bF}eoClip(){this.pendingClip=L6}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:a,x:s,y:o,fontSize:l,path:c}of e)c&&n.addPath(c,new DOMMatrix(a).preMultiplySelf(i).translate(s,o).scale(l,-l));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||P2,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Nr("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const a=n.loadedName||"sans-serif",s=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const l=n.italic?"italic":"normal";let c=t;t<I6?c=I6:t>O6&&(c=O6),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${o} ${c}px ${s}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#r(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}paintChar(e,t,n,i,a){const s=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&Pi.FILL_STROKE_MASK,d=!!(c&Pi.ADD_TO_PATH_FLAG),f=o.patternFill&&!l.missingFile,p=o.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||d||f||p)&&!l.missingFile&&(m=l.getPathGenerator(this.commonObjs,e)),m&&(l.disableFontFace||f||p)){s.save(),s.translate(t,n),s.scale(u,-u);let y;if((h===Pi.FILL||h===Pi.FILL_STROKE)&&(i?(y=s.getTransform(),s.setTransform(...i),s.fill(this.#r(m,y,i))):s.fill(m)),h===Pi.STROKE||h===Pi.FILL_STROKE)if(a){y||=s.getTransform(),s.setTransform(...a);const{a:v,b:_,c:S,d:A}=y,C=fr.inverseTransform(a),k=fr.transform([v,_,S,A,0,0],C);fr.singularValueDecompose2dScale(k,ka),s.lineWidth*=Math.max(ka[0],ka[1])/u,s.stroke(this.#r(m,y,a))}else s.lineWidth/=u,s.stroke(m);s.restore()}else(h===Pi.FILL||h===Pi.FILL_STROKE)&&s.fillText(e,t,n),(h===Pi.STROKE||h===Pi.FILL_STROKE)&&s.strokeText(e,t,n);d&&(this.pendingTextPaths||=[]).push({transform:Fn(s),x:t,y:n,fontSize:u,path:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Wr(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const a=this.ctx,s=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,h=e.length,d=n.vertical,f=d?1:-1,p=n.defaultVMetrics,m=i*t.fontMatrix[0],y=t.textRenderingMode===Pi.FILL&&!n.disableFontFace&&!t.patternFill;a.save(),t.textMatrix&&a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),c>0?a.scale(u,-1):a.scale(u,1);let v,_;if(t.patternFill){a.save();const M=t.fillColor.getPattern(a,this,Ms(a),Ai.FILL);v=Fn(a),a.restore(),a.fillStyle=M}if(t.patternStroke){a.save();const M=t.strokeColor.getPattern(a,this,Ms(a),Ai.STROKE);_=Fn(a),a.restore(),a.strokeStyle=M}let S=t.lineWidth;const A=t.textMatrixScale;if(A===0||S===0){const M=t.textRenderingMode&Pi.FILL_STROKE_MASK;(M===Pi.STROKE||M===Pi.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=A;if(s!==1&&(a.scale(s,s),S/=s),a.lineWidth=S,n.isInvalidPDFjsFont){const M=[];let N=0;for(const F of e)M.push(F.unicode),N+=F.width;a.fillText(M.join(""),0,0),t.x+=N*m*u,a.restore(),this.compose();return}let C=0,k;for(k=0;k<h;++k){const M=e[k];if(typeof M=="number"){C+=f*M*i/1e3;continue}let N=!1;const F=(M.isSpace?l:0)+o,z=M.fontChar,W=M.accent;let V,Q,K=M.width;if(d){const L=M.vmetric||p,J=-(M.vmetric?L[1]:K*.5)*m,X=L[2]*m;K=L?-L[0]:K,V=J/s,Q=(C+X)/s}else V=C/s,Q=0;if(n.remeasure&&K>0){const L=a.measureText(z).width*1e3/i*s;if(K<L&&this.isFontSubpixelAAEnabled){const J=K/L;N=!0,a.save(),a.scale(J,1),V/=J}else K!==L&&(V+=(K-L)/2e3*i/s)}if(this.contentVisible&&(M.isInFont||n.missingFile)){if(y&&!W)a.fillText(z,V,Q);else if(this.paintChar(z,V,Q,v,_),W){const L=V+i*W.offset.x/s,J=Q-i*W.offset.y/s;this.paintChar(W.fontChar,L,J,v,_)}}const ie=d?K*m-F*c:K*m+F*c;C+=ie,N&&a.restore()}d?t.y-=C:t.x+=C*u,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,a=n.fontSize,s=n.fontDirection,o=i.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,u=n.textHScale*s,h=n.fontMatrix||P2,d=e.length,f=n.textRenderingMode===Pi.INVISIBLE;let p,m,y,v;if(!(f||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(u,s),p=0;p<d;++p){if(m=e[p],typeof m=="number"){v=o*m*a/1e3,this.ctx.translate(v,0),n.x+=v*u;continue}const _=(m.isSpace?c:0)+l,S=i.charProcOperatorList[m.operatorListId];S?this.contentVisible&&(this.save(),t.scale(a,a),t.transform(...h),this.executeOperatorList(S),this.restore()):Nr(`Type3 character "${m.operatorListId}" is not available.`);const A=[m.width,0];fr.applyTransform(A,h),y=A[0]*a+_,t.translate(y,0),n.x+=y*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,a,s){const o=new Path2D;o.rect(n,i,a-n,s-i),this.ctx.clip(o),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=this.baseTransform||Fn(this.ctx),i={createCanvasGraphics:a=>new mu(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Z2(e,this.ctx,i,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=uF(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Ms(t),Ai.SHADING);const i=Ms(t);if(i){const{width:a,height:s}=t.canvas,o=pu.slice();fr.axialAlignedBoundingBox([0,0,a,s],i,o);const[l,c,u,h]=o;this.ctx.fillRect(l,c,u-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){vn("Should not call beginInlineImage")}beginImageData(){vn("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Fn(this.ctx),t)){fr.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[n,i,a,s]=t,o=new Path2D;o.rect(n,i,a-n,s-i),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||x0("TODO: Support non-isolated groups."),e.knockout&&Nr("Knockout groups not supported.");const n=Fn(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=pu.slice();fr.axialAlignedBoundingBox(e.bbox,Fn(t),i);const a=[0,0,t.canvas.width,t.canvas.height];i=fr.intersect(i,a)||[0,0,0,0];const s=Math.floor(i[0]),o=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-s,1),c=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,l,c),d=h.context;d.translate(-s,-o),d.transform(...n);let f=new Path2D;const[p,m,y,v]=e.bbox;if(f.rect(p,m,y-p,v-m),e.matrix){const _=new Path2D;_.addPath(f,new DOMMatrix(e.matrix)),f=_}d.clip(f),e.smask?this.smaskStack.push({canvas:h.canvas,context:d,offsetX:s,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,o),t.save()),Vh(t,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Fn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=pu.slice();fr.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i,a),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,n,i,a){if(this.#e(),I0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const s=t[2]-t[0],o=t[3]-t[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=s,t[3]=o,fr.singularValueDecompose2dScale(Fn(this.ctx),ka);const{viewportScale:l}=this,c=Math.ceil(s*this.outputScaleX*l),u=Math.ceil(o*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:h,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(ka[0],0,0,-ka[1],0,o*ka[1]),I0(this.ctx)}else{I0(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],s,o),this.ctx.clip(l)}}this.current=new P6(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,i=0,a,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Fn(o);o.transform(t,n,i,a,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,h=s.length;u<h;u+=2){const d=fr.transform(l,[t,n,i,a,s[u],s[u+1]]);o.drawImage(c.canvas,d[4],d[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:s,width:o,height:l,transform:c}=a,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save();const d=this.getObject(s,a);F6(h,d),h.globalCompositeOperation="source-in",h.fillStyle=i?n.getPattern(h,this,Ms(t),Ai.FILL):n,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),M0(t,u.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Nr("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Nr("Dependent image isn't ready yet");return}const s=a.width,o=a.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[t,0,0,n,i[c],i[c+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;this.save();const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;R6(c,e),s=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(s,Ms(i));i.imageSmoothingEnabled=D6(Fn(i),e.interpolate),M0(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const a=e.width,s=e.height,l=this.cachedCanvases.getCanvas("inlineImage",a,s).context;R6(l,e),i=this.applyTransferMapsToCanvas(l)}for(const a of t)n.save(),n.transform(...a.transform),n.scale(1,-1),M0(n,i,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===L6?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Fn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let s,o;if(n===0&&i===0){const l=Math.abs(t),c=Math.abs(a);if(l===c)if(e===0)s=o=1/l;else{const u=l*e;s=o=u<1?1/u:1}else if(e===0)s=1/l,o=1/c;else{const u=l*e,h=c*e;s=u<1?1/u:1,o=h<1?1/h:1}}else{const l=Math.abs(t*a-n*i),c=Math.hypot(t,n),u=Math.hypot(i,a);if(e===0)s=u/l,o=c/l;else{const h=e*l;s=u>h?u/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){n.lineWidth=(i||1)*a,n.stroke(e);return}const o=n.getLineDash();t&&n.save(),n.scale(a,s),eb.a=1/a,eb.d=1/s;const l=new Path2D;if(l.addPath(e,eb),o.length>0){const c=Math.max(a,s);n.setLineDash(o.map(u=>u/c)),n.lineDashOffset/=c}n.lineWidth=i||1,n.stroke(l),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const r in v0)mu.prototype[r]!==void 0&&(mu.prototype[v0[r]]=mu.prototype[r]);class bu{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class vF{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const vu=Symbol("INTERNAL");class yF{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){this.#e=!!(e&Sa.DISPLAY),this.#t=!!(e&Sa.PRINT),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==vu&&vn("Internal method `_setVisible` called."),this.#r=n,this.#n=t}}class wF{#e=null;#t=new Map;#r=null;#n=null;constructor(e,t=Sa.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new yF(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(vu,!1);for(const n of e.on)this.#t.get(n)._setVisible(vu,!0);for(const n of e.off)this.#t.get(n)._setVisible(vu,!1);this.#r=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let s;if(Array.isArray(a))s=this.#a(a);else if(this.#t.has(a))s=this.#t.get(a).visible;else return Nr(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return x0("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Nr(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Nr(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Nr(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Nr(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Nr(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Nr(`Unknown optional content policy ${e.policy}.`),!0}return Nr(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const i=this.#t.get(e);if(!i){Nr(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const s of a)s!==e&&this.#t.get(s)?._setVisible(vu,!1,!0);i._setVisible(vu,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=this.#t.get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new v6;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class xF{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Qn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,a?.length>0){const l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Qn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Qn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new _F(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new SF(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class _F{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=j2(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class SF{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function kF(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let u=o(t);return u=unescape(u),u=l(u),u=c(u),a(u)}if(t=s(r),t){const u=c(t);return a(u)}if(t=n("filename","i").exec(r),t){t=t[1];let u=o(t);return u=c(u),a(u)}function n(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(u,{fatal:!0}),f=Uh(h);h=d.decode(f),e=!1}catch{}}return h}function a(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function s(u){const h=[];let d;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(u))!==null;){let[,m,y,v]=d;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[y,v]}const p=[];for(let m=0;m<h.length&&m in h;++m){let[y,v]=h[m];v=o(v),y&&(v=unescape(v),m===0&&(v=l(v))),p.push(v)}return p.join("")}function o(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function l(u){const h=u.indexOf("'");if(h===-1)return u;const d=u.slice(0,h),p=u.slice(h+1).replace(/^[^']*'/,"");return i(d,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,y){return String.fromCharCode(parseInt(y,16))}),i(d,p);try{p=atob(p)}catch{}return i(d,p)})}return""}function B6(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function O0(r){return URL.parse(r)?.origin??null}function z6({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(r.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function U6(r){const e=r.get("Content-Disposition");if(e){let t=kF(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(j2(t))return t}return null}function Xh(r,e){return new _0(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function j6(r){return r===200||r===206}function H6(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function q6(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Nr(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class AF{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=B6(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Qn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new CF(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new EF(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class CF{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,H6(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=O0(a.url),!j6(a.status))throw Xh(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:o,suggestedLength:l}=z6({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=U6(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new sl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:q6(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class EF{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const s=i.url;fetch(s,H6(a,this._withCredentials,this._abortController)).then(o=>{const l=O0(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!j6(o.status))throw Xh(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:q6(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const tb=200,rb=206;function TF(r){const e=r.response;return typeof e!="string"?e:Uh(e).buffer}class MF{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=B6(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,s]of this.headers)t.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=rb):i.expectedStatus=tb,t.responseType="arraybuffer",Qn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||tb;if(!(a===tb&&n.expectedStatus===rb)&&a!==n.expectedStatus){n.onError(i.status);return}const o=TF(i);if(a===rb){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:o}):(Nr('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class IF{constructor(e){this._source=e,this._manager=new MF(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Qn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new OF(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new NF(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class OF{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=O0(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=z6({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=U6(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Xh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class NF{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=O0(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Xh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const PF=/^[a-z][a-z0-9\-+.]+:/i;function RF(r){if(PF.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class FF{constructor(e){this.source=e,this.url=RF(e.url),Qn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Qn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new DF(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new LF(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class DF{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Xh(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new sl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class LF{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Kh=Symbol("INITIAL_DATA");class G6{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Kh}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const n=this.#e[e];if(!n||n.data===Kh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==Kh}delete(e){const t=this.#e[e];return!t||t.data===Kh?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Kh&&(yield[e,t])}}}const BF=1e5,$6=30;class Wi{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#i=null;#s=0;#o=0;#l=null;#c=null;#h=0;#u=0;#g=Object.create(null);#p=[];#f=null;#d=[];#m=new WeakMap;#y=null;static#b=new Map;static#w=new Map;static#x=new WeakMap;static#v=null;static#S=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=t,this.#u=n.scale*Is.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:s,pageY:o}=n.rawDims;this.#y=[1,0,0,-1,-s,o+a],this.#o=i,this.#s=a,Wi.#E(),cc(t,n),this.#e.promise.finally(()=>{Wi.#S.delete(this),this.#i=null,this.#g=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ki.platform;return Wr(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#l.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#g,t.styles),this.#C(t.items),e()},this.#e.reject)};return this.#l=this.#f.getReader(),Wi.#S.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*Is.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,cc(this.#c,{rotation:i})),n!==this.#u){t?.(),this.#u=n;const a={div:null,properties:null,ctx:Wi.#M(this.#a)};for(const s of this.#d)a.properties=this.#m.get(s),a.div=s,this.#I(a)}}cancel(){const e=new sl("TextLayer task cancelled.");this.#l?.cancel(e).catch(()=>{}),this.#l=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#p}#C(e){if(this.#r)return;this.#i.ctx??=Wi.#M(this.#a);const t=this.#d,n=this.#p;for(const i of e){if(t.length>BF){Nr("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(i.str),this.#k(i)}}#k(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(t);const i=fr.transform(this.#y,e.transform);let a=Math.atan2(i[1],i[0]);const s=this.#g[e.fontName];s.vertical&&(a+=Math.PI/2);let o=this.#n&&s.fontSubstitution||s.fontFamily;o=Wi.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),c=l*Wi.#N(o,s,this.#a);let u,h;a===0?(u=i[4],h=i[5]-c):(u=i[4]+c*Math.sin(a),h=i[5]-c*Math.cos(a));const d="calc(var(--total-scale-factor) *",f=t.style;this.#t===this.#c?(f.left=`${(100*u/this.#o).toFixed(2)}%`,f.top=`${(100*h/this.#s).toFixed(2)}%`):(f.left=`${d}${u.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(Wi.#v*l).toFixed(2)}px)`,f.fontFamily=o,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const m=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);m!==y&&Math.max(m,y)/Math.min(m,y)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),this.#m.set(t,n),this.#i.div=t,this.#i.properties=n,this.#I(this.#i),n.hasText&&this.#t.append(t),n.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this.#t.append(m)}}#I(e){const{div:t,properties:n,ctx:i}=e,{style:a}=t;let s="";if(Wi.#v>1&&(s=`scale(${1/Wi.#v})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:o}=a,{canvasWidth:l,fontSize:c}=n;Wi.#T(i,c*this.#u,o);const{width:u}=i.measureText(t.textContent);u>0&&(s=`scaleX(${l*this.#u/u}) ${s}`)}n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(a.transform=s)}static cleanup(){if(!(this.#S.size>0)){this.#b.clear();for(const{canvas:e}of this.#w.values())e.remove();this.#w.clear()}}static#M(e=null){let t=this.#w.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(e,t),this.#x.set(t,{size:0,family:""})}return t}static#T(e,t,n){const i=this.#x.get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)}static#E(){if(this.#v!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#v=e.getBoundingClientRect().height,e.remove()}static#N(e,t,n){const i=this.#b.get(e);if(i)return i;const a=this.#M(n);a.canvas.width=a.canvas.height=$6,this.#T(a,$6,e);const s=a.measureText(""),o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let c=.8;return o?c=o/(o+l):(ki.platform.isFirefox&&Nr("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),this.#b.set(e,c),c}}class Yh{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){if(!a)return;let s=null;const o=a.name;if(o==="#text")s=a.value;else if(Yh.shouldBuildText(o))a?.attributes?.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(const l of a.children)i(l)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const zF=100;function nb(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new ib,{docId:t}=e,n=r.url?XR(r.url):null,i=r.data?KR(r.data):null,a=r.httpHeaders||null,s=r.withCredentials===!0,o=r.password??null,l=r.range instanceof W6?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let u=r.worker instanceof Qh?r.worker:null;const h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!S0(r.docBaseUrl)?r.docBaseUrl:null,f=E0(r.cMapUrl),p=r.cMapPacked!==!1,m=r.CMapReaderFactory||(Gi?nF:S6),y=E0(r.iccUrl),v=E0(r.standardFontDataUrl),_=r.StandardFontDataFactory||(Gi?iF:C6),S=E0(r.wasmUrl),A=r.WasmFactory||(Gi?aF:T6),C=r.stopAtErrors!==!0,k=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,M=r.isEvalSupported!==!1,N=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Gi,F=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Gi&&(ki.platform.isFirefox||!globalThis.chrome),z=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,W=typeof r.disableFontFace=="boolean"?r.disableFontFace:Gi,V=r.fontExtraProperties===!0,Q=r.enableXfa===!0,K=r.ownerDocument||globalThis.document,ie=r.disableRange===!0,L=r.disableStream===!0,J=r.disableAutoFetch===!0,X=r.pdfBug===!0,re=r.CanvasFactory||(Gi?rF:ZR),D=r.FilterFactory||(Gi?tF:eF),se=r.enableHWA===!0,ce=r.useWasm!==!1,q=l?l.length:r.length??NaN,ae=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Gi&&!W,fe=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(m===S6&&_===C6&&A===T6&&f&&v&&S&&qh(f,document.baseURI)&&qh(v,document.baseURI)&&qh(S,document.baseURI)),xe=null;CR(h);const pe={canvasFactory:new re({ownerDocument:K,enableHWA:se}),filterFactory:new D({docId:t,ownerDocument:K}),cMapReaderFactory:fe?null:new m({baseUrl:f,isCompressed:p}),standardFontDataFactory:fe?null:new _({baseUrl:v}),wasmFactory:fe?null:new A({baseUrl:S})};u||(u=Qh.create({verbosity:h,port:bu.workerPort}),e._worker=u);const Ce={docId:t,apiVersion:"5.4.54",data:i,password:o,disableAutoFetch:J,rangeChunkSize:c,length:q,docBaseUrl:d,enableXfa:Q,evaluatorOptions:{maxImageSize:k,disableFontFace:W,ignoreErrors:C,isEvalSupported:M,isOffscreenCanvasSupported:N,isImageDecoderSupported:F,canvasMaxAreaInBytes:z,fontExtraProperties:V,useSystemFonts:ae,useWasm:ce,useWorkerFetch:fe,cMapUrl:f,iccUrl:y,standardFontDataUrl:v,wasmUrl:S}},Te={ownerDocument:K,pdfBug:X,styleElement:xe,loadingParams:{disableAutoFetch:J,enableXfa:Q}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ae=u.messageHandler.sendWithPromise("GetDocRequest",Ce,i?[i.buffer]:null);let be;if(l)be=new xF(l,{disableRange:ie,disableStream:L});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Ee=qh(n)?AF:Gi?FF:IF;be=new Ee({url:n,length:q,httpHeaders:a,withCredentials:s,rangeChunkSize:c,disableRange:ie,disableStream:L})}return Ae.then(Ee=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const $e=new Wh(t,Ee,u.port),Ye=new HF($e,e,be,Te,pe,se);e._transport=Ye,$e.send("Ready",null)})}).catch(e._capability.reject),e}class ib{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ib.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class W6{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#a=[];constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#a)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#r)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){vn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class UF{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Wr(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class jF{#e=!1;constructor(e,t,n,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new p6:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new G6,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new Hh({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Wr(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:a=al.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){this._stats?.time("Overall");const f=this._transport.getRenderingIntent(i,a,h,d),{renderingIntent:p,cacheKey:m}=f;this.#e=!1,l||=this._transport.getOptionalContentConfig(p);let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const v=!!(p&Sa.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(f));const _=C=>{y.renderTasks.delete(S),v&&(this.#e=!0),this.#t(),C?(S.capability.reject(C),this._abortOperatorList({intentState:y,reason:C instanceof Error?C:new Error(C)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new yu({callback:_,params:{canvas:t,canvasContext:e,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA});(y.renderTasks||=new Set).add(S);const A=S.task;return Promise.all([y.displayReadyCapability.promise,l]).then(([C,k])=>{if(this.destroyed){_();return}if(this._stats?.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:C,optionalContentConfig:k}),S.operatorListChanged()}).catch(_),A}getOperatorList({intent:e="display",annotationMode:t=al.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const s=this._transport.getRenderingIntent(e,t,n,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Yh.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){s.read().then(function({value:l,done:c}){if(c){n(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},i)}const s=t.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new p6),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},s).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const d of c.renderTasks)d.operatorListChanged();this.#t()}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof U2){let i=zF;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new sl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}const Nn=class Nn{constructor({name:e=null,port:t=null,verbosity:n=ER()}={}){Ys(this,Zi);Ys(this,Pl,Promise.withResolvers());Ys(this,fs,null);Ys(this,To,null);Ys(this,Cc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Rn(Nn,Tc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Rn(Nn,Tc).set(t,this),Qs(this,Zi,Fk).call(this,t)}else Qs(this,Zi,Dk).call(this)}get promise(){return Rn(this,Pl).promise}get port(){return Rn(this,To)}get messageHandler(){return Rn(this,fs)}destroy(){this.destroyed=!0,Rn(this,Cc)?.terminate(),ma(this,Cc,null),Rn(Nn,Tc).delete(Rn(this,To)),ma(this,To,null),Rn(this,fs)?.destroy(),ma(this,fs,null)}static create(e){const t=Rn(this,Tc).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Nn(e)}static get workerSrc(){if(bu.workerSrc)return bu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Wr(this,"_setupFakeWorkerGlobal",(async()=>Rn(this,Gu,bg)?Rn(this,Gu,bg):(await import(this.workerSrc)).WorkerMessageHandler)())}};Pl=new WeakMap,fs=new WeakMap,To=new WeakMap,Cc=new WeakMap,Z1=new WeakMap,Ec=new WeakMap,Tc=new WeakMap,Zi=new WeakSet,mg=function(){Rn(this,Pl).resolve(),Rn(this,fs).send("configure",{verbosity:this.verbosity})},Fk=function(e){ma(this,To,e),ma(this,fs,new Wh("main","worker",e)),Rn(this,fs).on("ready",()=>{}),Qs(this,Zi,mg).call(this)},Dk=function(){if(Rn(Nn,Ec)||Rn(Nn,Gu,bg)){Qs(this,Zi,Hd).call(this);return}let{workerSrc:e}=Nn;try{Nn._isSameOrigin(window.location,e)||(e=Nn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Wh("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?Rn(this,Pl).reject(new Error("Worker was destroyed")):Qs(this,Zi,Hd).call(this)},a=new AbortController;t.addEventListener("error",()=>{Rn(this,Cc)||i()},{signal:a.signal}),n.on("test",o=>{if(a.abort(),this.destroyed||!o){i();return}ma(this,fs,n),ma(this,To,t),ma(this,Cc,t),Qs(this,Zi,mg).call(this)}),n.on("ready",o=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{Qs(this,Zi,Hd).call(this)}});const s=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};s();return}catch{x0("The worker has been disabled.")}Qs(this,Zi,Hd).call(this)},Hd=function(){Rn(Nn,Ec)||(Nr("Setting up fake worker."),ma(Nn,Ec,!0)),Nn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Rn(this,Pl).reject(new Error("Worker was destroyed"));return}const t=new JR;ma(this,To,t);const n=`fake${Rk(Nn,Z1)._++}`,i=new Wh(n+"_worker",n,t);e.setup(i,t),ma(this,fs,new Wh(n,n+"_worker",t)),Qs(this,Zi,mg).call(this)}).catch(e=>{Rn(this,Pl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Gu=new WeakSet,bg=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ys(Nn,Gu),Ys(Nn,Z1,0),Ys(Nn,Ec,!1),Ys(Nn,Tc,new WeakMap),Gi&&(ma(Nn,Ec,!0),bu.workerSrc||="./pdf.worker.mjs"),Nn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},Nn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Nn.fromPort=e=>{if(zR("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Nn.create(e)};let Qh=Nn;class HF{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#a=null;constructor(e,t,n,i,a,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new G6,this.fontLoader=new WR({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}#i(e,t=null){const n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Wr(this,"annotationStorage",new V2)}getRenderingIntent(e,t=al.ENABLE,n=null,i=!1,a=!1){let s=Sa.DISPLAY,o=W2;switch(e){case"any":s=Sa.ANY;break;case"display":break;case"print":s=Sa.PRINT;break;default:Nr(`getRenderingIntent - invalid intent: ${e}`)}const l=s&Sa.PRINT&&n instanceof y6?n:this.annotationStorage;switch(t){case al.DISABLE:s+=Sa.ANNOTATIONS_DISABLE;break;case al.ENABLE:break;case al.ENABLE_FORMS:s+=Sa.ANNOTATIONS_FORMS;break;case al.ENABLE_STORAGE:s+=Sa.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Nr(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Sa.IS_EDITING),a&&(s+=Sa.OPLIST);const{ids:c,hash:u}=l.modifiedIds,h=[s,o.hash,u];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Wi.cleanup(),this._networkStream?.cancelAllRequests(new sl("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Qn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Qn(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Qn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){i.close();return}Qn(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new UF(n,this))}),e.on("DocException",n=>{t._capability.reject(sa(n))}),e.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!t.onPassword)throw sa(n);const i=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};t.onPassword(i,n.code)}catch(i){this.#a.reject(i)}return this.#a.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const c=a.error;Nr(`Error during font loading: ${c}`),this.commonObjs.resolve(n,c);break}const s=this._params.pdfBug&&globalThis.FontInspector?.enabled?(c,u)=>globalThis.FontInspector.fontAdded(c,u):null,o=new VR(a,s);this.fontLoader.bind(o).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!o.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(n,o)});break;case"CopyLocalImage":const{imageRef:l}=a;Qn(l,"The imageRef must be defined.");for(const c of this.#t.values())for(const[,u]of c.objs)if(u?.ref===l)return u.dataLen?(this.commonObjs.resolve(n,structuredClone(u)),u.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,s])=>{if(this.destroyed)return;const o=this.#t.get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){s?.bitmap?.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Nr("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#r.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const s=new jF(t,a,this,this._params.pdfBug);return this.#t.set(t,s),s});return this.#r.set(t,i),i}getPageIndex(e){return X2(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new wF(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new vF(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Wi.cleanup()}}cachedPageNumber(e){if(!X2(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class qF{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class yu{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new qF(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(yu.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");yu.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a}=this.params,s=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new mu(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),yu.#t.delete(this._canvas),e||=new U2(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),yu.#t.delete(this._canvas),this.callback())))}}const GF="5.4.54",$F="295fb3ec4";class $a{#e=null;#t=null;#r;#n=null;#a=!1;#i=!1;#s=null;#o;#l=null;#c=null;static#h=null;static get _keyboardManager(){return Wr(this,"_keyboardManager",new $h([[["Escape","mac+Escape"],$a.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$a.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$a.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$a.prototype._moveToPrevious],[["Home","mac+Home"],$a.prototype._moveToBeginning],[["End","mac+End"],$a.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#s=e):this.#i=!0,this.#c=e?._uiManager||t,this.#o=this.#c._eventBus,this.#r=e?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",$a.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#s&&(e.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const t=this.#c._signal;e.addEventListener("click",this.#f.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#r,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",qa,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(e.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,i]of this.#c.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",$a.#h[n]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===this.#r,a.addEventListener("click",this.#g.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#g(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:nn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#f(e);return}const t=e.target.getAttribute("data-color");t&&this.#g(t,e)}_moveToNext(e){if(!this.#m){this.#f(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#f(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#f(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#f(e);return}this.#n.lastChild?.focus()}#p(e){$a._keyboardManager.exec(this,e)}#f(e){if(this.#m){this.hideDropdown();return}if(this.#a=e.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#u();this.#e.append(t)}#d(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#s?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#c.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Jh{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,Jh.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Jh.#n[e]),i.addEventListener("input",()=>{this.#r.updateParams(t,i.value)},{signal:this.#r._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function V6(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Zh(r){return Math.max(0,Math.min(255,255*r))}class X6{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zh(e),[e,e,e]}static G_HTML([e]){const t=V6(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Zh)}static RGB_HTML(e){return`#${e.map(V6).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Zh(1-Math.min(1,e+i)),Zh(1-Math.min(1,n+i)),Zh(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,s=1-n,o=Math.min(i,a,s);return["CMYK",i,a,s,o]}}class WF{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){vn("Abstract method `_createSVG` called.")}}class N0 extends WF{_createSVG(e){return document.createElementNS(ho,e)}}class K6{static setupStorage(e,t,n,i,a){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const o of n.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:s}=t,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[l,c]of Object.entries(s))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&a.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:n});const o=a!=="richText",l=e.div;if(l.append(s),e.viewport){const h=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=h}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const h=document.createTextNode(i.value);s.append(h),o&&Yh.shouldBuildText(i.name)&&c.push(h)}return{textDivs:c}}const u=[[i,-1,s]];for(;u.length>0;){const[h,d,f]=u.at(-1);if(d+1===h.children.length){u.pop();continue}const p=h.children[++u.at(-1)[1]];if(p===null)continue;const{name:m}=p;if(m==="#text"){const v=document.createTextNode(p.value);c.push(v),f.append(v);continue}const y=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,m):document.createElement(m);if(f.append(y),p.attributes&&this.setAttributes({html:y,element:p,storage:t,intent:a,linkService:n}),p.children?.length>0)u.push([p,-1,y]);else if(p.value){const v=document.createTextNode(p.value);o&&Yh.shouldBuildText(m)&&c.push(v),y.append(v)}}for(const h of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const VF=9,uc=new WeakSet,XF=new Date().getTimezoneOffset()*60*1e3;class Y6{static create(e){switch(e.data.annotationType){case Yn.LINK:return new ab(e);case Yn.TEXT:return new KF(e);case Yn.WIDGET:switch(e.data.fieldType){case"Tx":return new YF(e);case"Btn":return e.data.radioButton?new Q6(e):e.data.checkBox?new JF(e):new ZF(e);case"Ch":return new eD(e);case"Sig":return new QF(e)}return new hc(e);case Yn.POPUP:return new sb(e);case Yn.FREETEXT:return new J6(e);case Yn.LINE:return new rD(e);case Yn.SQUARE:return new nD(e);case Yn.CIRCLE:return new iD(e);case Yn.POLYLINE:return new Z6(e);case Yn.CARET:return new sD(e);case Yn.INK:return new ob(e);case Yn.POLYGON:return new aD(e);case Yn.HIGHLIGHT:return new e7(e);case Yn.UNDERLINE:return new oD(e);case Yn.SQUIGGLY:return new lD(e);case Yn.STRIKEOUT:return new cD(e);case Yn.STAMP:return new t7(e);case Yn.FILEATTACHMENT:return new uD(e);default:return new Gn(e)}}}class Gn{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Gn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let i=this.#r?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#r.popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-o)/a}%`,t.top=`${100*(s-e[3]+l)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof hc)&&!(this instanceof ab)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof sb){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,a),a}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;if(m>0||y>0){const _=`calc(${m}px * var(--total-scale-factor)) / calc(${y}px * var(--total-scale-factor))`;s.borderRadius=_}else if(this instanceof Q6){const _=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;s.borderRadius=_}switch(t.borderStyle.style){case fu.SOLID:s.borderStyle="solid";break;case fu.DASHED:s.borderStyle="dashed";break;case fu.BEVELED:Nr("Unimplemented border style: beveled");break;case fu.INSET:Nr("Unimplemented border style: inset");break;case fu.UNDERLINE:s.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(this.#t=!0,s.borderColor=fr.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):s.borderWidth=0}const c=fr.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:h,pageX:d,pageY:f}=i.rawDims;s.left=`${100*(c[0]-d)/u}%`,s.top=`${100*(c[1]-f)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(s.width=`${100*o/u}%`,s.height=`${100*l/h}%`):this.setRotation(p,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),t.style.width=`${100*a/n}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],s=a[0],o=a.slice(1);i.target.style[n]=X6[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:X6[`${s}_rgb`](o)})};return Wr(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const s=n[i];if(s){const o={detail:{[i]:a},target:e};s(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,y,v,_]=e.subarray(2,6);if(i===m&&a===y&&t===v&&n===_)return}const{style:s}=this.container;let o;if(this.#t){const{borderColor:m,borderWidth:y}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=i-t,c=a-n,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const d=u.createElement("defs");h.append(d);const f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let m=2,y=e.length;m<y;m+=8){const v=e[m],_=e[m+1],S=e[m+2],A=e[m+3],C=u.createElement("rect"),k=(S-t)/l,M=(a-_)/c,N=(v-S)/l,F=(_-A)/c;C.setAttribute("x",k),C.setAttribute("y",M),C.setAttribute("width",N),C.setAttribute("height",F),f.append(C),o?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${M}" width="${N}" height="${F}"/>`)}this.#t&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const a=this.#r=new sb({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}render(){vn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:o}of i){if(a===-1||s===t)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${s}"]`);if(c&&!uc.has(c)){Nr(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:l,domElement:c})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==t&&uc.has(i)&&n.push({id:s,exportValue:a,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class ab extends Gn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#r(n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#r(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=n.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Nr('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:i,refs:a,include:s}=t,o=[];if(i.length!==0||a.length!==0){const u=new Set(a);for(const h of i){const d=this._fieldObjects[h]||[];for(const{id:f}of d)u.add(f)}for(const h of Object.values(this._fieldObjects))for(const d of h)u.has(d.id)===s&&o.push(d)}else for(const u of Object.values(this._fieldObjects))o.push(...u);const l=this.annotationStorage,c=[];for(const u of o){const{id:h}=u;switch(c.push(h),u.type){case"text":{const f=u.defaultValue||"";l.setValue(h,{value:f});break}case"checkbox":case"radiobutton":{const f=u.defaultValue===u.exportValues;l.setValue(h,{value:f});break}case"combobox":case"listbox":{const f=u.defaultValue||"";l.setValue(h,{value:f});break}default:continue}const d=document.querySelector(`[data-element-id="${h}"]`);if(d){if(!uc.has(d)){Nr(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class KF extends Gn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class hc extends Gn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ki.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}})})}_setEventListeners(e,t,n,i){for(const[a,s]of n)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fr.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||VF,a=e.style;let s;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(R2*i))||1,h=c/u;s=Math.min(i,l(h/R2))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(i,l(c/R2))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=fr.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class YF extends hc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),a.setValue(s.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&a.length>s&&(a=a.slice(0,s));let o=i.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:a,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",o??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),uc.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:c,datetimeType:u,timeStep:h}=this.data,d=!!u&&this.enableScripting;c&&(n.title=c),this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),l.formattedValue=null}),n.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";n.value=l.userValue=m,l.formattedValue=null});let f=p=>{const{formattedValue:m}=l;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",m=>{if(l.focused)return;const{target:y}=m;if(d&&(y.type=u,h&&(y.step=h)),l.userValue){const v=l.userValue;if(d)if(u==="time"){const _=new Date(v),S=[_.getHours(),_.getMinutes(),_.getSeconds()];y.value=S.map(A=>A.toString().padStart(2,"0")).join(":")}else y.value=new Date(v-XF).toISOString().split(u==="date"?"T":".",1)[0];else y.value=v}l.lastCommittedValue=y.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),n.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(v){l.userValue=v.detail.value??"",d||e.setValue(t,{value:l.userValue.toString()}),v.target.value=l.userValue},formattedValue(v){const{formattedValue:_}=v.detail;l.formattedValue=_,_!=null&&v.target!==document.activeElement&&(v.target.value=_);const S={formattedValue:_};d&&(S.value=_),e.setValue(t,S)},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:_}=v.detail,{target:S}=v;if(_===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",_);let A=l.userValue;!A||A.length<=_||(A=A.slice(0,_),S.value=l.userValue=A,e.setValue(t,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),n.addEventListener("keydown",m=>{l.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(l.commitKey=3),y===-1)return;const{value:v}=m.target;l.lastCommittedValue!==v&&(l.lastCommittedValue=v,l.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,n.addEventListener("blur",m=>{if(!l.focused||!m.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{target:y}=m;let{value:v}=y;if(d){if(v&&u==="time"){const _=v.split(":").map(S=>parseInt(S,10));v=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),y.step=""}else v=new Date(v).valueOf();y.type="text"}l.userValue=v,l.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:l.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}),p(m)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",m=>{l.lastCommittedValue=null;const{data:y,target:v}=m,{value:_,selectionStart:S,selectionEnd:A}=v;let C=S,k=A;switch(m.inputType){case"deleteWordBackward":{const M=_.substring(0,S).match(/\w*[^\w]*$/);M&&(C-=M[0].length);break}case"deleteWordForward":{const M=_.substring(S).match(/^[^\w]*\w*/);M&&(k+=M[0].length);break}case"deleteContentBackward":S===A&&(C-=1);break;case"deleteContentForward":S===A&&(k+=1);break}m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:y||"",willCommit:!1,selStart:C,selEnd:k}})}),this._setEventListeners(n,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class QF extends hc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class JF extends hc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return uc.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const c of this._getElementsByName(o,n)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(n,{value:l})}),a.addEventListener("resetform",s=>{const o=t.defaultFieldValue||"Off";s.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Q6 extends hc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(uc.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const c of this._getElementsByName(o,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:l})}),a.addEventListener("resetform",s=>{const o=t.defaultFieldValue;s.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;a.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=s===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const d=u&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ZF extends ab{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class eD extends hc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");uc.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const d of i.options)d.selected=d.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,n.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),a=!1),i.append(h)}let s=null;if(a){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),s=()=>{u.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=u=>{const h=u?"value":"textContent",{options:d,multiple:f}=i;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const c=u=>{const h=u.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const h={value(d){s?.();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of i.options)m.selected=p.has(m.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(d){i.multiple=!0},remove(d){const f=i.options,p=d.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,y=>y.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:c(d)}),l=o(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:m}=d.detail.insert,y=i.children[f],v=document.createElement("option");v.textContent=p,v.value=m,y?y.before(v):i.append(v),e.setValue(t,{value:o(!0),items:c(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;i.length!==0;)i.remove(0);for(const p of f){const{displayValue:m,exportValue:y}=p,v=document.createElement("option");v.textContent=m,v.value=y,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,u)}),i.addEventListener("input",u=>{const h=o(!0),d=o(!1);e.setValue(t,{value:h}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sb extends Gn{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Gn._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new tD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${z2}${i}`).join(",")),this.container}}class tD{#e=this.#I.bind(this);#t=this.#N.bind(this);#r=this.#E.bind(this);#n=this.#T.bind(this);#a=null;#i=null;#s=null;#o=null;#l=null;#c=null;#h=null;#u=!1;#g=null;#p=null;#f=null;#d=null;#m=null;#y=null;#b=null;#w=!1;constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:c,parentRect:u,open:h}){this.#i=e,this.#y=i,this.#s=s,this.#m=o,this.#c=l,this.#a=t,this.#d=c,this.#h=u,this.#l=n,this.#o=H2.toDateObject(a),this.trigger=n.flatMap(d=>d.getElementsToTriggerPopup()),this.#x(),this.#i.hidden=!0,h&&this.#T()}#x(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#n,{signal:e}),t.addEventListener("mouseenter",this.#r,{signal:e}),t.addEventListener("mouseleave",this.#t,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#e,{signal:e})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#a){const i=e.style.outlineColor=fr.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#y?.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=this.#y}if(e.append(t),this.#o){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),i.dateTime=this.#o.toISOString(),t.append(i)}const n=this.#v;if(n)K6.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(this.#s);e.append(i)}this.#i.append(e)}get#v(){const e=this.#m,t=this.#s;return e?.str&&(!t?.str||t.str===e.str)&&this.#m.html||null}get#S(){return this.#v?.attributes?.style?.fontSize||0}get#C(){return this.#v?.attributes?.style?.color||null}#k(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#C,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,s=i.length;a<s;++a){const o=i[a];n.append(document.createTextNode(o)),a<s-1&&n.append(document.createElement("br"))}return n}#I(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#u)&&this.#T()}updateEdited({rect:e,popup:t,deleted:n}){if(n||t?.deleted){this.remove();return}this.#x(),this.#b||={contentsObj:this.#s,richText:this.#m},e&&(this.#f=null),t&&(this.#m=this.#k(t.text),this.#o=H2.toDateObject(t.date),this.#s=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#b&&({contentsObj:this.#s,richText:this.#m}=this.#b,this.#b=null,this.#g?.remove(),this.#g=null,this.#f=null)}remove(){this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#w=!1,this.#u=!1;for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#M(){if(this.#f!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=this.#c;let s=!!this.#h,o=s?this.#h:this.#d;for(const p of this.#l)if(!o||fr.intersect(p.data.rect,o)!==null){o=p.data.rect,s=!0;break}const l=fr.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),u=s?o[2]-o[0]+5:0,h=l[0]+u,d=l[1];this.#f=[100*(h-i)/t,100*(d-a)/n];const{style:f}=this.#i;f.left=`${this.#f[0]}%`,f.top=`${this.#f[1]}%`}#T(){this.#u=!this.#u,this.#u?(this.#E(),this.#i.addEventListener("click",this.#n),this.#i.addEventListener("keydown",this.#e)):(this.#N(),this.#i.removeEventListener("click",this.#n),this.#i.removeEventListener("keydown",this.#e))}#E(){this.#g||this.render(),this.isVisible?this.#u&&this.#i.classList.add("focused"):(this.#M(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#N(){this.#i.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#w=this.isVisible,this.#w&&(this.#i.hidden=!0)}maybeShow(){this.#x(),this.#w&&(this.#g||this.#E(),this.#w=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class J6 extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Or.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class rD extends Gn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class nD extends Gn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",a/2),s.setAttribute("y",a/2),s.setAttribute("width",t-a),s.setAttribute("height",n-a),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class iD extends Gn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-a/2),s.setAttribute("ry",n/2-a/2),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Z6 extends Gn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:a,height:s}=this;if(!t)return this.container;const o=this.svgFactory.create(a,s,!0);let l=[];for(let u=0,h=t.length;u<h;u+=2){const d=t[u]-e[0],f=e[3]-t[u+1];l.push(`${d},${f}`)}l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class aD extends Z6{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sD extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ob extends Gn{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Or.HIGHLIGHT:Or.INK}#r(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:a}}=this,{transform:s,width:o,height:l}=this.#r(t,e),c=this.svgFactory.create(o,l,!0),u=this.#e=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",s);for(let h=0,d=n.length;h<d;h++){const f=this.svgFactory.createElement(this.svgElementName);this.#t.push(f),f.setAttribute("points",n[h].join(",")),u.append(f)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),n)for(let s=0,o=this.#t.length;s<o;s++)this.#t[s].setAttribute("points",n[s].join(","));if(i){const{transform:s,width:o,height:l}=this.#r(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),a.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class e7 extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Or.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class oD extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class lD extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class cD extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class t7 extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Or.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class uD extends Gn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:i}=ki.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class lb{#e=null;#t=null;#r=new Map;#n=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o}){this.div=e,this.#e=t,this.#t=n,this.#n=o||null,this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#r.size>0}async#a(e,t,n){const i=e.firstChild||e,a=i.id=`${z2}${t}`,s=await this.#n?.getAriaAttributes(a);if(s)for(const[o,l]of s)i.setAttribute(o,l);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,n=this.div;cc(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new N0,annotationStorage:e.annotationStorage||new V2,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const s of t){if(s.noHTML)continue;const o=s.annotationType===Yn.POPUP;if(o){const u=i.get(s.id);if(!u)continue;a.elements=u}else if(s.rect[2]===s.rect[0]||s.rect[3]===s.rect[1])continue;a.data=s;const l=Y6.create(a);if(!l.isRenderable)continue;if(!o&&s.popupRef){const u=i.get(s.popupRef);u?u.push(l):i.set(s.popupRef,[l])}const c=l.render();s.hidden&&(c.style.visibility="hidden"),await this.#a(c,s.id,a.elements),l._isEditable&&(this.#r.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#i()}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new N0,parent:this};for(const i of e){i.borderStyle||=lb._defaultBorderStyle,n.data=i;const a=Y6.create(n);if(!a.isRenderable)continue;const s=a.render();await this.#a(s,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,cc(t,{rotation:e.rotation}),this.#i(),t.hidden=!1}#i(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n);const s=this.#r.get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),s._hasNoCanvas=!1):s.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#r.values())}getEditableAnnotation(e){return this.#r.get(e)}static get _defaultBorderStyle(){return Wr(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const P0=/\r\n?|\n/g;class si extends pr{#e;#t="";#r=`${this.id}-editor`;#n=null;#a;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=si.prototype,t=a=>a.isEmpty(),n=ol.TRANSLATE_SMALL,i=ol.TRANSLATE_BIG;return Wr(this,"_keyboardManager",new $h([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Or.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||si._defaultColor||pr._defaultLineColor,this.#a=e.fontSize||si._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){pr.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case nn.FREETEXT_SIZE:si._defaultFontSize=t;break;case nn.FREETEXT_COLOR:si._defaultColor=t;break}}updateParams(e,t){switch(e){case nn.FREETEXT_SIZE:this.#i(t);break;case nn.FREETEXT_COLOR:this.#s(t);break}}static get defaultPropertiesToUpdate(){return[[nn.FREETEXT_SIZE,si._defaultFontSize],[nn.FREETEXT_COLOR,si._defaultColor||pr._defaultLineColor]]}get propertiesToUpdate(){return[[nn.FREETEXT_SIZE,this.#a],[nn.FREETEXT_COLOR,this.#e]]}get toolbarButtons(){return this._colorPicker||=new Jh(this),[["colorPicker",this._colorPicker]]}get colorType(){return nn.FREETEXT_COLOR}get colorValue(){return this.#e}#i(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#a)*this.parentScale),this.#a=i,this.#l()},n=this.#a;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#s(e){const t=i=>{this.#e=this.editorDiv.style.color=i,this._colorPicker?.update(i)},n=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-si._internalPadding*e,-(si._internalPadding+this.#a)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(si.#c(n)),t=n);return e.join(`
`)}#l(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,s=a.style.display,o=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#o().trimEnd();if(e===t)return;const n=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){si._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,n.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,u]=this.pageDimensions,[h,d]=this.pageTranslation;let f,p;switch(this.rotation){case 0:f=e+(s[0]-h)/c,p=t+this.height-(s[1]-d)/u;break;case 90:f=e+(s[0]-h)/c,p=t-(s[1]-d)/u,[o,l]=[l,-o];break;case 180:f=e-this.width+(s[0]-h)/c,p=t-(s[1]-d)/u,[o,l]=[-o,-l];break;case 270:f=e+(s[0]-h-this.height*u)/c,p=t+(s[1]-d-this.width*c)/u,[o,l]=[-l,o];break}this.setAt(f*i,p*a,o,l)}else this._moveAfterPaste(e,t);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(P0,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const i=si.#g(t.getData("text")||"").replaceAll(P0,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const s=a.getRangeAt(0);if(!i.includes(`
`)){s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:o,startOffset:l}=s,c=[],u=[];if(o.nodeType===Node.TEXT_NODE){const f=o.parentElement;if(u.push(o.nodeValue.slice(l).replaceAll(P0,"")),f!==this.editorDiv){let p=c;for(const m of this.editorDiv.childNodes){if(m===f){p=u;continue}p.push(si.#c(m))}}c.push(o.nodeValue.slice(0,l).replaceAll(P0,""))}else if(o===this.editorDiv){let f=c,p=0;for(const m of this.editorDiv.childNodes)p++===l&&(f=u),f.push(si.#c(m))}this.#t=`${c.join(`
`)}${i}${u.join(`
`)}`,this.#h();const h=new Range;let d=Math.sumPrecise(c.map(f=>f.length));for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const p=f.nodeValue.length;if(d<=p){h.setStart(f,d),h.setEnd(f,d);break}d-=p}a.removeAllRanges(),a.addRange(h)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#u(){return this.#t.replaceAll("Â "," ")}static#g(e){return e.replaceAll(" ","Â ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let i=null;if(e instanceof J6){const{data:{defaultAppearanceData:{fontSize:s,fontColor:o},rect:l,rotation:c,id:u,popupRef:h,contentsObj:d},textContent:f,textPosition:p,parent:{page:{pageNumber:m}}}=e;if(!f||f.length===0)return null;i=e={annotationType:Or.FREETEXT,color:Array.from(o),fontSize:s,value:f.join(`
`),position:p,pageIndex:m-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:h,comment:d?.str||null}}const a=await super.deserialize(e,t,n);return a.#a=e.fontSize,a.#e=fr.makeHexColor(...e.color),a.#t=si.#g(e.value),a._initialData=i,e.comment&&a.setCommentData(e.comment),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=si._internalPadding*this.parentScale,n=this.getRect(t,t),i=pr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),a={annotationType:Or.FREETEXT,color:i,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!this.#p(a)?null:(a.id=this.annotationElementId,a)}#p(e){const{value:t,fontSize:n,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((s,o)=>s!==i[o])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e),{style:n}=t;n.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,n.color=this.#e,t.replaceChildren();for(const s of this.#t.split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}const i=si._internalPadding*this.parentScale,a={rect:this.getRect(i,i)};return a.popup=this.hasEditedComment?this.comment:{text:this.#t},e.updateEdited(a),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Wt{static PRECISION=1e-4;toSVGPath(){vn("Abstract method `toSVGPath` must be implemented.")}get box(){vn("Abstract getter `box` must be implemented.")}serialize(e,t){vn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,s){s||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)s[o]=t+e[o]*i,s[o+1]=n+e[o+1]*a;return s}static _rescaleAndSwap(e,t,n,i,a,s){s||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)s[o]=t+e[o+1]*i,s[o+1]=n+e[o]*a;return s}static _translate(e,t,n,i){i||=new Float32Array(e.length);for(let a=0,s=e.length;a<s;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+s)/6,(n+a)/2,(i+s)/2]}}class dc{#e;#t=[];#r;#n;#a=[];#i=new Float32Array(18);#s;#o;#l;#c;#h;#u;#g=[];static#p=8;static#f=2;static#d=dc.#p+dc.#f;constructor({x:e,y:t},n,i,a,s,o=0){this.#e=n,this.#u=a*i,this.#n=s,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#r=o,this.#c=dc.#p*i,this.#l=dc.#d*i,this.#h=i,this.#g.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#m(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[n,i,a,s]=this.#e;return[(this.#s+(e[0]-t[0])/2-n)/a,(this.#o+(e[1]-t[1])/2-i)/s,(this.#s+(t[0]-e[0])/2-n)/a,(this.#o+(t[1]-e[1])/2-i)/s]}add({x:e,y:t}){this.#s=e,this.#o=t;const[n,i,a,s]=this.#e;let[o,l,c,u]=this.#i.subarray(8,12);const h=e-c,d=t-u,f=Math.hypot(h,d);if(f<this.#l)return!1;const p=f-this.#c,m=p/f,y=m*h,v=m*d;let _=o,S=l;o=c,l=u,c+=y,u+=v,this.#g?.push(e,t);const A=-v/p,C=y/p,k=A*this.#u,M=C*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([c+k,u+M],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([c-k,u-M],16),isNaN(this.#i[6])?(this.#a.length===0&&(this.#i.set([o+k,l+M],2),this.#a.push(NaN,NaN,NaN,NaN,(o+k-n)/a,(l+M-i)/s),this.#i.set([o-k,l-M],14),this.#t.push(NaN,NaN,NaN,NaN,(o-k-n)/a,(l-M-i)/s)),this.#i.set([_,S,o,l,c,u],6),!this.isEmpty()):(this.#i.set([_,S,o,l,c,u],6),Math.abs(Math.atan2(S-l,_-o)-Math.atan2(v,y))<Math.PI/2?([o,l,c,u]=this.#i.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+c)/2-n)/a,((l+u)/2-i)/s),[o,l,_,S]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+o)/2-n)/a,((S+l)/2-i)/s),!0):([_,S,o,l,c,u]=this.#i.subarray(0,6),this.#a.push(((_+5*o)/6-n)/a,((S+5*l)/6-i)/s,((5*o+c)/6-n)/a,((5*l+u)/6-i)/s,((o+c)/2-n)/a,((l+u)/2-i)/s),[c,u,o,l,_,S]=this.#i.subarray(12,18),this.#t.push(((_+5*o)/6-n)/a,((S+5*l)/6-i)/s,((5*o+c)/6-n)/a,((5*l+u)/6-i)/s,((o+c)/2-n)/a,((l+u)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#w(n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(n),n.join(" ")}#y(){const[e,t,n,i]=this.#e,[a,s,o,l]=this.#m();return`M${(this.#i[2]-e)/n} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/n} ${(this.#i[5]-t)/i} L${a} ${s} L${o} ${l} L${(this.#i[16]-e)/n} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/n} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#w(e){const[t,n,i,a]=this.#e,s=this.#i.subarray(4,6),o=this.#i.subarray(16,18),[l,c,u,h]=this.#m();e.push(`L${(s[0]-t)/i} ${(s[1]-n)/a} L${l} ${c} L${u} ${h} L${(o[0]-t)/i} ${(o[1]-n)/a}`)}newFreeDrawOutline(e,t,n,i,a,s){return new r7(e,t,n,i,a,s)}getOutlines(){const e=this.#a,t=this.#t,n=this.#i,[i,a,s,o]=this.#e,l=new Float32Array((this.#g?.length??0)+2);for(let h=0,d=l.length-2;h<d;h+=2)l[h]=(this.#g[h]-i)/s,l[h+1]=(this.#g[h+1]-a)/o;if(l[l.length-2]=(this.#s-i)/s,l[l.length-1]=(this.#o-a)/o,isNaN(n[6])&&!this.isEmpty())return this.#x(l);const c=new Float32Array(this.#a.length+24+this.#t.length);let u=e.length;for(let h=0;h<u;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}u=this.#S(c,u);for(let h=t.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(t[h+d])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[h+d],c[u+1]=t[h+d+1],u+=2}return this.#v(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#r,this.#n)}#x(e){const t=this.#i,[n,i,a,s]=this.#e,[o,l,c,u]=this.#m(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/s,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/s],0),this.newFreeDrawOutline(h,e,this.#e,this.#h,this.#r,this.#n)}#v(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#S(e,t){const n=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[a,s,o,l]=this.#e,[c,u,h,d]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/o,(n[1]-s)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/l],t),t+=24}}class r7 extends Wt{#e;#t=new Float32Array(4);#r;#n;#a;#i;#s;constructor(e,t,n,i,a,s){super(),this.#s=e,this.#a=t,this.#e=n,this.#i=i,this.#r=a,this.#n=s,this.lastPoint=[NaN,NaN],this.#o(s);const[o,l,c,u]=this.#t;for(let h=0,d=e.length;h<d;h+=2)e[h]=(e[h]-o)/c,e[h+1]=(e[h+1]-l)/u;for(let h=0,d=t.length;h<d;h+=2)t[h]=(t[h]-o)/c,t[h+1]=(t[h+1]-l)/u}toSVGPath(){const e=[`M${this.#s[4]} ${this.#s[5]}`];for(let t=6,n=this.#s.length;t<n;t+=6){if(isNaN(this.#s[t])){e.push(`L${this.#s[t+4]} ${this.#s[t+5]}`);continue}e.push(`C${this.#s[t]} ${this.#s[t+1]} ${this.#s[t+2]} ${this.#s[t+3]} ${this.#s[t+4]} ${this.#s[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,i],a){const s=n-e,o=i-t;let l,c;switch(a){case 0:l=Wt._rescale(this.#s,e,i,s,-o),c=Wt._rescale(this.#a,e,i,s,-o);break;case 90:l=Wt._rescaleAndSwap(this.#s,e,t,s,o),c=Wt._rescaleAndSwap(this.#a,e,t,s,o);break;case 180:l=Wt._rescale(this.#s,n,t,-s,o),c=Wt._rescale(this.#a,n,t,-s,o);break;case 270:l=Wt._rescaleAndSwap(this.#s,n,i,-s,-o),c=Wt._rescaleAndSwap(this.#a,n,i,-s,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}#o(e){const t=this.#s;let n=t[4],i=t[5];const a=[n,i,n,i];let s=n,o=i;const l=e?Math.max:Math.min;for(let u=6,h=t.length;u<h;u+=6){const d=t[u+4],f=t[u+5];if(isNaN(t[u]))fr.pointBoundingBox(d,f,a),o<f?(s=d,o=f):o===f&&(s=l(s,d));else{const p=[1/0,1/0,-1/0,-1/0];fr.bezierBoundingBox(n,i,...t.slice(u,u+6),p),fr.rectBoundingBox(...p,a),o<p[3]?(s=p[2],o=p[3]):o===p[3]&&(s=l(s,p[2]))}n=d,i=f}const c=this.#t;c[0]=a[0]-this.#r,c[1]=a[1]-this.#r,c[2]=a[2]-a[0]+2*this.#r,c[3]=a[3]-a[1]+2*this.#r,this.lastPoint=[s,o]}get box(){return this.#t}newOutliner(e,t,n,i,a,s=0){return new dc(e,t,n,i,a,s)}getNewOutline(e,t){const[n,i,a,s]=this.#t,[o,l,c,u]=this.#e,h=a*c,d=s*u,f=n*c+o,p=i*u+l,m=this.newOutliner({x:this.#a[0]*h+f,y:this.#a[1]*d+p},this.#e,this.#i,e,this.#n,t??this.#r);for(let y=2;y<this.#a.length;y+=2)m.add({x:this.#a[y]*h+f,y:this.#a[y+1]*d+p});return m.getOutlines()}}class cb{#e;#t;#r=[];#n=[];constructor(e,t=0,n=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:f,y:p,width:m,height:y}of e){const v=Math.floor((f-t)/s)*s,_=Math.ceil((f+m+t)/s)*s,S=Math.floor((p-t)/s)*s,A=Math.ceil((p+y+t)/s)*s,C=[v,S,A,!0],k=[_,S,A,!1];this.#r.push(C,k),fr.rectBoundingBox(v,S,_,A,a)}const o=a[2]-a[0]+2*n,l=a[3]-a[1]+2*n,c=a[0]-n,u=a[1]-n,h=this.#r.at(i?-1:-2),d=[h[0],h[2]];for(const f of this.#r){const[p,m,y]=f;f[0]=(p-c)/o,f[1]=(m-u)/l,f[2]=(y-u)/l}this.#e=new Float32Array([c,u,o,l]),this.#t=d}getOutlines(){this.#r.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#r)t[3]?(e.push(...this.#l(t)),this.#s(t)):(this.#o(t),e.push(...this.#l(t)));return this.#a(e)}#a(e){const t=[],n=new Set;for(const s of e){const[o,l,c]=s;t.push([o,l,s],[o,c,s])}t.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=t.length;s<o;s+=2){const l=t[s][2],c=t[s+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}const i=[];let a;for(;n.size>0;){const s=n.values().next().value;let[o,l,c,u,h]=s;n.delete(s);let d=o,f=l;for(a=[o,c],i.push(a);;){let p;if(n.has(u))p=u;else if(n.has(h))p=h;else break;n.delete(p),[o,l,c,u,h]=p,d!==o&&(a.push(d,f,o,f===l?l:c),d=o),f=f===l?c:l}a.push(d,f)}return new hD(i,this.#e,this.#t)}#i(e){const t=this.#n;let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,s=t[a][0];if(s===e)return a;s<e?n=a+1:i=a-1}return i+1}#s([,e,t]){const n=this.#i(e);this.#n.splice(n,0,[e,t])}#o([,e,t]){const n=this.#i(e);for(let i=n;i<this.#n.length;i++){const[a,s]=this.#n[i];if(a!==e)break;if(a===e&&s===t){this.#n.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,s]=this.#n[i];if(a!==e)break;if(a===e&&s===t){this.#n.splice(i,1);return}}}#l(e){const[t,n,i]=e,a=[[t,n,i]],s=this.#i(i);for(let o=0;o<s;o++){const[l,c]=this.#n[o];for(let u=0,h=a.length;u<h;u++){const[,d,f]=a[u];if(!(c<=d||f<=l)){if(d>=l){if(f>c)a[u][1]=c;else{if(h===1)return[];a.splice(u,1),u--,h--}continue}a[u][2]=l,f>c&&a.push([t,c,f])}}}return a}}class hD extends Wt{#e;#t;constructor(e,t,n){super(),this.#t=e,this.#e=t,this.lastPoint=n}toSVGPath(){const e=[];for(const t of this.#t){let[n,i]=t;e.push(`M${n} ${i}`);for(let a=2;a<t.length;a+=2){const s=t[a],o=t[a+1];s===n?(e.push(`V${o}`),i=o):o===i&&(e.push(`H${s}`),n=s)}e.push("Z")}return e.join(" ")}serialize([e,t,n,i],a){const s=[],o=n-e,l=i-t;for(const c of this.#t){const u=new Array(c.length);for(let h=0;h<c.length;h+=2)u[h]=e+c[h]*o,u[h+1]=i-c[h+1]*l;s.push(u)}return s}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class ub extends dc{newFreeDrawOutline(e,t,n,i,a,s){return new dD(e,t,n,i,a,s)}}class dD extends r7{newOutliner(e,t,n,i,a,s=0){return new ub(e,t,n,i,a,s)}}class $n extends pr{#e=null;#t=0;#r;#n=null;#a=null;#i=null;#s=null;#o=0;#l=null;#c=null;#h=null;#u=!1;#g=null;#p;#f=null;#d="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Or.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=$n.prototype;return Wr(this,"_keyboardManager",new $h([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||$n._defaultColor,this.#m=e.thickness||$n._defaultThickness,this.#p=e.opacity||$n._defaultOpacity,this.#r=e.boxes||null,this.#y=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#w(e),this.#k()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#s=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#k(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new cb(this.#r,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const t=new cb(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{lastPoint:n}=this.#i;this.#g=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#w({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#c=e;const i=1.5;if(this.#i=e.getNewOutline(this.#m/2+i,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:$n.#I(this.#c.box,(u-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:$n.#I(this.#i.box,u),path:{d:this.#i.toSVGPath()}})}const[a,s,o,l]=e.box;switch(this.rotation){case 0:this.x=a,this.y=s,this.width=o,this.height=l;break;case 90:{const[u,h]=this.parentDimensions;this.x=s,this.y=1-a,this.width=o*h/u,this.height=l*u/h;break}case 180:this.x=1-a,this.y=1-s,this.width=o,this.height=l;break;case 270:{const[u,h]=this.parentDimensions;this.x=1-s,this.y=a,this.width=o*h/u,this.height=l*u/h;break}}const{lastPoint:c}=this.#i;this.#g=[(c[0]-a)/o,(c[1]-s)/l]}static initialize(e,t){pr.initialize(e,t),$n._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case nn.HIGHLIGHT_COLOR:$n._defaultColor=t;break;case nn.HIGHLIGHT_THICKNESS:$n._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}updateParams(e,t){switch(e){case nn.HIGHLIGHT_COLOR:this.#x(t);break;case nn.HIGHLIGHT_THICKNESS:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[nn.HIGHLIGHT_COLOR,$n._defaultColor],[nn.HIGHLIGHT_THICKNESS,$n._defaultThickness]]}get propertiesToUpdate(){return[[nn.HIGHLIGHT_COLOR,this.color||$n._defaultColor],[nn.HIGHLIGHT_THICKNESS,this.#m||$n._defaultThickness],[nn.HIGHLIGHT_FREE,this.#u]]}#x(e){const t=(a,s)=>{this.color=a,this.#p=s,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:a,"fill-opacity":s}}),this.#a?.updateColor(a)},n=this.color,i=this.#p;this.addCommands({cmd:t.bind(this,e,$n._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#v(e){const t=this.#m,n=i=>{this.#m=i,this.#S(i)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new $a({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#E())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#E())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#S(e){if(!this.#u)return;this.#w({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#k(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#f=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#n))}static#I([e,t,n,i],a){switch(a){case 90:return[1-t-i,e,i,n];case 180:return[1-e-n,1-t-i,n,i];case 270:return[t,1-e-n,i,n]}return[e,t,n,i]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#u?(e=(e-this.rotation+360)%360,n=$n.#I(this.#c.box,e)):n=$n.#I([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#f,{bbox:$n.#I(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const t=this.#l=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n;const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),m6(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#M(e){$n._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#s,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}))}#E(){return this.#u?this.rotation:0}#N(){if(this.#u)return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,a=this.#r,s=new Float32Array(a.length*8);let o=0;for(const{x:l,y:c,width:u,height:h}of a){const d=l*e+n,f=(1-c)*t+i;s[o]=s[o+4]=d,s[o+1]=s[o+3]=f,s[o+2]=s[o+6]=d+u*e,s[o+5]=s[o+7]=f-h*t,o+=8}return s}#L(e){return this.#c.serialize(e,this.#E())}static startHighlighting(e,t,{target:n,x:i,y:a}){const{x:s,y:o,width:l,height:c}=n.getBoundingClientRect(),u=new AbortController,h=e.combinedSignal(u),d=f=>{u.abort(),this.#j(e,f)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",Jn,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",qa,{signal:h}),n.addEventListener("pointermove",this.#P.bind(this,e),{signal:h}),this._freeHighlight=new ub({x:i,y:a},[s,o,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let i=null;if(e instanceof e7){const{data:{quadPoints:p,rect:m,rotation:y,id:v,color:_,opacity:S,popupRef:A,contentsObj:C},parent:{page:{pageNumber:k}}}=e;i=e={annotationType:Or.HIGHLIGHT,color:Array.from(_),opacity:S,quadPoints:p,boxes:null,pageIndex:k-1,rect:m.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:A,comment:C?.str||null}}else if(e instanceof ob){const{data:{inkLists:p,rect:m,rotation:y,id:v,color:_,borderStyle:{rawWidth:S},popupRef:A,contentsObj:C},parent:{page:{pageNumber:k}}}=e;i=e={annotationType:Or.HIGHLIGHT,color:Array.from(_),thickness:S,inkLists:p,boxes:null,pageIndex:k-1,rect:m.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:A,comment:C?.str||null}}const{color:a,quadPoints:s,inkLists:o,opacity:l}=e,c=await super.deserialize(e,t,n);c.color=fr.makeHexColor(...a),c.#p=l||1,o&&(c.#m=e.thickness),c._initialData=i,e.comment&&c.setCommentData(e.comment);const[u,h]=c.pageDimensions,[d,f]=c.pageTranslation;if(s){const p=c.#r=[];for(let m=0;m<s.length;m+=8)p.push({x:(s[m]-d)/u,y:1-(s[m+1]-f)/h,width:(s[m+2]-s[m])/u,height:(s[m+1]-s[m+5])/h});c.#b(),c.#k(),c.rotate(c.rotation)}else if(o){c.#u=!0;const p=o[0],m={x:p[0]-d,y:h-(p[1]-f)},y=new ub(m,[0,0,u,h],1,c.#m/2,!0,.001);for(let S=0,A=p.length;S<A;S+=2)m.x=p[S]-d,m.y=h-(p[S+1]-f),y.add(m);const{id:v,clipPathId:_}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:y.toSVGPath()}},!0,!0);c.#w({highlightOutlines:y.getOutlines(),highlightId:v,clipPathId:_}),c.#k(),c.rotate(c.parentRotation)}return c}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=pr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:Or.HIGHLIGHT,color:n,opacity:this.#p,thickness:this.#m,quadPoints:this.#N(),outlines:this.#L(t),pageIndex:this.pageIndex,rect:t,rotation:this.#E(),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!this.#A(i)?null:(i.id=this.annotationElementId,i)}#A(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,i)=>n!==t[i])}renderAnnotationElement(e){const t={rect:this.getRect(0,0)};return this.hasEditedComment&&(t.popup=this.comment),e.updateEdited(t),null}static canCreateNewEmptyEditor(){return!1}}class n7{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){vn("Not implemented")}}class yr extends pr{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#a=null;static#i=NaN;static#s=null;static#o=null;static#l=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#c(e),this.#g())}#c({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(yr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))n.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){vn("Not implemented")}static get typesMap(){vn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(yr.#r.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,a=i[t],s=o=>{i.updateProperty(t,o);const l=this.#e.updateProperty(t,o);l&&this.#d(l),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this._colorPicker?.update(o)};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,yr._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#f()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,yr._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#f()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,yr._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#g(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#g(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#g(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#p([e,t,n,i]){const{parentDimensions:[a,s],rotation:o}=this;switch(o){case 90:return[t,1-e,n*(s/a),i*(a/s)];case 180:return[1-e,1-t,n,i];case 270:return[1-t,e,n*(s/a),i*(a/s)];default:return[e,t,n,i]}}#f(){const{x:e,y:t,width:n,height:i,parentDimensions:[a,s],rotation:o}=this;switch(o){case 90:return[1-t,e,n*(a/s),i*(s/a)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(a/s),i*(s/a)];default:return[e,t,n,i]}}#d(e){if([this.x,this.y,this.width,this.height]=this.#p(e),this.div){this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}this._onResized()}#m(){const{x:e,y:t,width:n,height:i,rotation:a,parentRotation:s,parentDimensions:[o,l]}=this;switch((a*4+s)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(o/l),i*(l/o),n*(o/l)];case 5:return[1-t,e,n*(o/l),i*(l/o)];case 6:return[1-e-i*(l/o),1-t,i*(l/o),n*(o/l)];case 7:return[t-n*(o/l),1-e-i*(l/o),n*(o/l),i*(l/o)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(l/o),t,i*(l/o),n*(o/l)];case 13:return[1-t-n*(o/l),e-i*(l/o),n*(o/l),i*(l/o)];case 14:return[1-e,1-t-n*(o/l),i*(l/o),n*(o/l)];case 15:return[t,1-e,n*(o/l),i*(l/o)];default:return[e,t,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,yr._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,s]=this.parentDimensions;return this.setDims(this.width*a,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,a){vn("Not implemented")}static startDrawing(e,t,n,i){const{target:a,offsetX:s,offsetY:o,pointerId:l,pointerType:c}=i;if(yr.#s&&yr.#s!==c)return;const{viewport:{rotation:u}}=e,{width:h,height:d}=a.getBoundingClientRect(),f=yr.#n=new AbortController,p=e.combinedSignal(f);if(yr.#i||=l,yr.#s??=c,window.addEventListener("pointerup",m=>{yr.#i===m.pointerId?this._endDraw(m):yr.#o?.delete(m.pointerId)},{signal:p}),window.addEventListener("pointercancel",m=>{yr.#i===m.pointerId?this._currentParent.endDrawingSession():yr.#o?.delete(m.pointerId)},{signal:p}),window.addEventListener("pointerdown",m=>{yr.#s===m.pointerType&&((yr.#o||=new Set).add(m.pointerId),yr.#r.isCancellable()&&(yr.#r.removeLastElement(),yr.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",qa,{signal:p}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:p}),a.addEventListener("touchmove",m=>{m.timeStamp===yr.#l&&Jn(m)},{signal:p}),e.toggleDrawing(),t._editorUndoBar?.hide(),yr.#r){e.drawLayer.updateProperties(this._currentDrawId,yr.#r.startNew(s,o,h,d,u));return}t.updateUIForDefaultProperties(this),yr.#r=this.createDrawerInstance(s,o,h,d,u),yr.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(yr.#a.toSVGProperties(),yr.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(yr.#l=-1,!yr.#r)return;const{offsetX:t,offsetY:n,pointerId:i}=e;if(yr.#i===i){if(yr.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,yr.#r.add(t,n)),yr.#l=e.timeStamp,Jn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,yr.#r=null,yr.#a=null,yr.#s=null,yr.#l=NaN),yr.#n&&(yr.#n.abort(),yr.#n=null,yr.#i=NaN,yr.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,yr.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=yr.#r,i=this._currentDrawId,a=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,n.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:nn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(nn.DRAW_STEP),!yr.#r.isEmpty()){const{pageDimensions:[n,i],scale:a}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:yr.#r.getOutlines(n*a,i*a,a,this._INNER_MARGIN),drawingOptions:yr.#a,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,a,s){vn("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:a,pageX:s,pageY:o}}=t.viewport,l=this.deserializeDraw(s,o,i,a,this._INNER_MARGIN,e),c=await super.deserialize(e,t,n);return c.createDrawingOptions(e),c.#c({drawOutlines:l}),c.#g(),c.onScaleChanging(),c.rotate(),c}serializeDraw(e){const[t,n]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,n,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class fD{#e=new Float64Array(6);#t;#r;#n;#a;#i;#s="";#o=0;#l=new ed;#c;#h;constructor(e,t,n,i,a,s){this.#c=n,this.#h=i,this.#n=a,this.#a=s,[e,t]=this.#u(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#r=[{line:o,points:this.#i}],this.#e.set(o,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#u(e,t){return Wt._normalizePoint(e,t,this.#c,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#u(e,t);const[n,i,a,s]=this.#e.subarray(2,6),o=e-a,l=t-s;return Math.hypot(this.#c*o,this.#h*l)<=2?null:(this.#i.push(e,t),isNaN(n)?(this.#e.set([a,s,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,i,a,s,e,t],0),this.#t.push(...Wt.createBezierPoints(n,i,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){this.#c=n,this.#h=i,this.#n=a,[e,t]=this.#u(e,t);const s=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const o=this.#r.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#r.push({line:s,points:this.#i}),this.#e.set(s,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#l.removeLastElement();this.#r.pop(),this.#s="";for(let e=0,t=this.#r.length;e<t;e++){const{line:n,points:i}=this.#r[e];this.#t=n,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const e=Wt.svgRound(this.#t[4]),t=Wt.svgRound(this.#t[5]);if(this.#i.length===2)return this.#s=`${this.#s} M ${e} ${t} Z`,this.#s;if(this.#i.length<=6){const i=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=Wt.svgRound(this.#t[10]),a=Wt.svgRound(this.#t[11]);return this.#s=`${this.#s} L ${i} ${a}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[s,o,l,c,u,h]=this.#t.slice(i,i+6).map(Wt.svgRound);n.push(`C${s} ${o} ${l} ${c} ${u} ${h}`)}return this.#s+=n.join(" "),this.#o=this.#t.length,this.#s}getOutlines(e,t,n,i){const a=this.#r.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#l.build(this.#r,e,t,n,this.#n,this.#a,i),this.#e=null,this.#t=null,this.#r=null,this.#s=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ed extends Wt{#e;#t=0;#r;#n;#a;#i;#s;#o;#l;build(e,t,n,i,a,s,o){this.#a=t,this.#i=n,this.#s=i,this.#o=a,this.#l=s,this.#r=o??0,this.#n=e,this.#u()}get thickness(){return this.#l}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Wt.svgRound(t[4])} ${Wt.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Wt.svgRound(t[10])} ${Wt.svgRound(t[11])}`);continue}for(let n=6,i=t.length;n<i;n+=6){const[a,s,o,l,c,u]=t.subarray(n,n+6).map(Wt.svgRound);e.push(`C${a} ${s} ${o} ${l} ${c} ${u}`)}}return e.join("")}serialize([e,t,n,i],a){const s=[],o=[],[l,c,u,h]=this.#h();let d,f,p,m,y,v,_,S,A;switch(this.#o){case 0:A=Wt._rescale,d=e,f=t+i,p=n,m=-i,y=e+l*n,v=t+(1-c-h)*i,_=e+(l+u)*n,S=t+(1-c)*i;break;case 90:A=Wt._rescaleAndSwap,d=e,f=t,p=n,m=i,y=e+c*n,v=t+l*i,_=e+(c+h)*n,S=t+(l+u)*i;break;case 180:A=Wt._rescale,d=e+n,f=t,p=-n,m=i,y=e+(1-l-u)*n,v=t+c*i,_=e+(1-l)*n,S=t+(c+h)*i;break;case 270:A=Wt._rescaleAndSwap,d=e+n,f=t+i,p=-n,m=-i,y=e+(1-c-h)*n,v=t+(1-l-u)*i,_=e+(1-c)*n,S=t+(1-l)*i;break}for(const{line:C,points:k}of this.#n)s.push(A(C,d,f,p,m,a?new Array(C.length):null)),o.push(A(k,d,f,p,m,a?new Array(k.length):null));return{lines:s,points:o,rect:[y,v,_,S]}}static deserialize(e,t,n,i,a,{paths:{lines:s,points:o},rotation:l,thickness:c}){const u=[];let h,d,f,p,m;switch(l){case 0:m=Wt._rescale,h=-e/n,d=t/i+1,f=1/n,p=-1/i;break;case 90:m=Wt._rescaleAndSwap,h=-t/i,d=-e/n,f=1/i,p=1/n;break;case 180:m=Wt._rescale,h=e/n+1,d=-t/i,f=-1/n,p=1/i;break;case 270:m=Wt._rescaleAndSwap,h=t/i+1,d=e/n+1,f=-1/i,p=-1/n;break}if(!s){s=[];for(const v of o){const _=v.length;if(_===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(_===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const S=new Float32Array(3*(_-2));s.push(S);let[A,C,k,M]=v.subarray(0,4);S.set([NaN,NaN,NaN,NaN,A,C],0);for(let N=4;N<_;N+=2){const F=v[N],z=v[N+1];S.set(Wt.createBezierPoints(A,C,k,M,F,z),(N-2)*3),[A,C,k,M]=[k,M,F,z]}}}for(let v=0,_=s.length;v<_;v++)u.push({line:m(s[v].map(S=>S??NaN),h,d,f,p),points:m(o[v].map(S=>S??NaN),h,d,f,p)});const y=new this.prototype.constructor;return y.build(u,n,i,1,l,c,a),y}#c(e=this.#l){const t=this.#r+e/2*this.#s;return this.#o%180===0?[t/this.#a,t/this.#i]:[t/this.#i,t/this.#a]}#h(){const[e,t,n,i]=this.#e,[a,s]=this.#c(0);return[e+a,t+s,n-2*a,i-2*s]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let o=4,l=i.length;o<l;o+=6)fr.pointBoundingBox(i[o],i[o+1],e);continue}let a=i[4],s=i[5];for(let o=6,l=i.length;o<l;o+=6){const[c,u,h,d,f,p]=i.subarray(o,o+6);fr.bezierBoundingBox(a,s,c,u,h,d,f,p,e),a=f,s=p}}const[t,n]=this.#c();e[0]=$i(e[0]-t,0,1),e[1]=$i(e[1]-n,0,1),e[2]=$i(e[2]+t,0,1),e[3]=$i(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#g(t):null}#g(e){const[t,n]=this.#c();this.#l=e;const[i,a]=this.#c(),[s,o]=[i-t,a-n],l=this.#e;return l[0]-=s,l[1]-=o,l[2]+=2*s,l[3]+=2*o,l}updateParentDimensions([e,t],n){const[i,a]=this.#c();this.#a=e,this.#i=t,this.#s=n;const[s,o]=this.#c(),l=s-i,c=o-a,u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Wt.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Wt.svgRound(e)} ${Wt.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,i=0,a=0,s=0,o=0,l=0;switch(this.#t){case 90:i=t/e,a=-e/t,o=e;break;case 180:n=-1,s=-1,o=e,l=t;break;case 270:i=-t/e,a=e/t,l=t;break;default:return""}return`matrix(${n} ${i} ${a} ${s} ${Wt.svgRound(o)} ${Wt.svgRound(l)})`}getPathResizingSVGProperties([e,t,n,i]){const[a,s]=this.#c(),[o,l,c,u]=this.#e;if(Math.abs(c-a)<=Wt.PRECISION||Math.abs(u-s)<=Wt.PRECISION){const m=e+n/2-(o+c/2),y=t+i/2-(l+u/2);return{path:{"transform-origin":`${Wt.svgRound(e)} ${Wt.svgRound(t)}`,transform:`${this.rotationTransform} translate(${m} ${y})`}}}const h=(n-2*a)/(c-2*a),d=(i-2*s)/(u-2*s),f=c/n,p=u/i;return{path:{"transform-origin":`${Wt.svgRound(o)} ${Wt.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${p}) translate(${Wt.svgRound(a)} ${Wt.svgRound(s)}) scale(${h} ${d}) translate(${Wt.svgRound(-a)} ${Wt.svgRound(-s)})`}}}getPathResizedSVGProperties([e,t,n,i]){const[a,s]=this.#c(),o=this.#e,[l,c,u,h]=o;if(o[0]=e,o[1]=t,o[2]=n,o[3]=i,Math.abs(u-a)<=Wt.PRECISION||Math.abs(h-s)<=Wt.PRECISION){const y=e+n/2-(l+u/2),v=t+i/2-(c+h/2);for(const{line:_,points:S}of this.#n)Wt._translate(_,y,v,_),Wt._translate(S,y,v,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Wt.svgRound(e)} ${Wt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(n-2*a)/(u-2*a),f=(i-2*s)/(h-2*s),p=-d*(l+a)+e+a,m=-f*(c+s)+t+s;if(d!==1||f!==1||p!==0||m!==0)for(const{line:y,points:v}of this.#n)Wt._rescale(y,p,m,d,f,y),Wt._rescale(v,p,m,d,f,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Wt.svgRound(e)} ${Wt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[i,a]=n,s=this.#e,o=e-s[0],l=t-s[1];if(this.#a===i&&this.#i===a)for(const{line:c,points:u}of this.#n)Wt._translate(c,o,l,c),Wt._translate(u,o,l,u);else{const c=this.#a/i,u=this.#i/a;this.#a=i,this.#i=a;for(const{line:h,points:d}of this.#n)Wt._rescale(h,o,l,c,u,h),Wt._rescale(d,o,l,c,u,d);s[2]*=c,s[3]*=u}return s[0]=e,s[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Wt.svgRound(e)} ${Wt.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Wt.svgRound(e[0])} ${Wt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class R0 extends n7{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:pr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new R0(this._viewParameters);return e.updateAll(this),e}}class hb extends yr{static _type="ink";static _editorType=Or.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){pr.initialize(e,t),this._defaultDrawingOptions=new R0(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Wr(this,"typesMap",new Map([[nn.INK_THICKNESS,"stroke-width"],[nn.INK_COLOR,"stroke"],[nn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,a){return new fD(e,t,n,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,a,s){return ed.deserialize(e,t,n,i,a,s)}static async deserialize(e,t,n){let i=null;if(e instanceof ob){const{data:{inkLists:s,rect:o,rotation:l,id:c,color:u,opacity:h,borderStyle:{rawWidth:d},popupRef:f,contentsObj:p},parent:{page:{pageNumber:m}}}=e;i=e={annotationType:Or.INK,color:Array.from(u),thickness:d,opacity:h,paths:{points:s},boxes:null,pageIndex:m-1,rect:o.slice(0),rotation:l,annotationElementId:c,id:c,deleted:!1,popupRef:f,comment:p?.str||null}}const a=await super.deserialize(e,t,n);return a._initialData=i,e.comment&&a.setCommentData(e.comment),a}get toolbarButtons(){return this._colorPicker||=new Jh(this),[["colorPicker",this._colorPicker]]}get colorType(){return nn.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=hb.getDefaultDrawingOptions({stroke:fr.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":s,"stroke-width":o}}=this,l={annotationType:Or.INK,color:pr._colorManager.convert(a),opacity:s,thickness:o,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:t,thickness:n,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((s,o)=>s!==t[o])||e.thickness!==n||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1),i={rect:n,thickness:this._drawingOptions["stroke-width"],points:t};return this.hasEditedComment&&(i.popup=this.comment),e.updateEdited(i),null}}class db extends ed{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const F0=8,td=3;class wu{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,i,a,s,o){const l=this.#t(n,i,a,s);for(let c=0;c<8;c++){const u=(-c+l-o+16)%8,h=this.#r[2*u],d=this.#r[2*u+1];if(e[(n+h)*t+(i+d)]!==0)return u}return-1}static#a(e,t,n,i,a,s,o){const l=this.#t(n,i,a,s);for(let c=0;c<8;c++){const u=(c+l+o+16)%8,h=this.#r[2*u],d=this.#r[2*u+1];if(e[(n+h)*t+(i+d)]!==0)return u}return-1}static#i(e,t,n,i){const a=e.length,s=new Int32Array(a);for(let u=0;u<a;u++)s[u]=e[u]<=i?1:0;for(let u=1;u<n-1;u++)s[u*t]=s[u*t+t-1]=0;for(let u=0;u<t;u++)s[u]=s[t*n-1-u]=0;let o=1,l;const c=[];for(let u=1;u<n-1;u++){l=1;for(let h=1;h<t-1;h++){const d=u*t+h,f=s[d];if(f===0)continue;let p=u,m=h;if(f===1&&s[d-1]===0)o+=1,m-=1;else if(f>=1&&s[d+1]===0)o+=1,m+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const y=[h,u],v=m===h+1,_={isHole:v,points:y,id:o,parent:0};c.push(_);let S;for(const W of c)if(W.id===l){S=W;break}S?S.isHole?_.parent=v?S.parent:l:_.parent=v?l:S.parent:_.parent=v?l:0;const A=this.#n(s,t,u,h,p,m,0);if(A===-1){s[d]=-o,s[d]!==1&&(l=Math.abs(s[d]));continue}let C=this.#r[2*A],k=this.#r[2*A+1];const M=u+C,N=h+k;p=M,m=N;let F=u,z=h;for(;;){const W=this.#a(s,t,F,z,p,m,1);C=this.#r[2*W],k=this.#r[2*W+1];const V=F+C,Q=z+k;y.push(Q,V);const K=F*t+z;if(s[K+1]===0?s[K]=-o:s[K]===1&&(s[K]=o),V===u&&Q===h&&F===M&&z===N){s[d]!==1&&(l=Math.abs(s[d]));break}else p=F,m=z,F=V,z=Q}}}return c}static#s(e,t,n,i){if(n-t<=4){for(let M=t;M<n-2;M+=2)i.push(e[M],e[M+1]);return}const a=e[t],s=e[t+1],o=e[n-4]-a,l=e[n-3]-s,c=Math.hypot(o,l),u=o/c,h=l/c,d=u*s-h*a,f=l/o,p=1/c,m=Math.atan(f),y=Math.cos(m),v=Math.sin(m),_=p*(Math.abs(y)+Math.abs(v)),S=p*(1-_+_**2),A=Math.max(Math.atan(Math.abs(v+y)*S),Math.atan(Math.abs(v-y)*S));let C=0,k=t;for(let M=t+2;M<n-2;M+=2){const N=Math.abs(d-u*e[M+1]+h*e[M]);N>C&&(k=M,C=N)}C>(c*A)**2?(this.#s(e,t,k+2,i),this.#s(e,k,n,i)):i.push(a,s)}static#o(e){const t=[],n=e.length;return this.#s(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#l(e,t,n,i,a,s){const o=new Float32Array(s**2),l=-2*i**2,c=s>>1;for(let m=0;m<s;m++){const y=(m-c)**2;for(let v=0;v<s;v++)o[m*s+v]=Math.exp((y+(v-c)**2)/l)}const u=new Float32Array(256),h=-2*a**2;for(let m=0;m<256;m++)u[m]=Math.exp(m**2/h);const d=e.length,f=new Uint8Array(d),p=new Uint32Array(256);for(let m=0;m<n;m++)for(let y=0;y<t;y++){const v=m*t+y,_=e[v];let S=0,A=0;for(let k=0;k<s;k++){const M=m+k-c;if(!(M<0||M>=n))for(let N=0;N<s;N++){const F=y+N-c;if(F<0||F>=t)continue;const z=e[M*t+F],W=o[k*s+N]*u[Math.abs(z-_)];S+=z*W,A+=W}}const C=f[v]=Math.round(S/A);p[C]++}return[f,p]}static#c(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let o=0,l=n.length;o<l;o++){const c=n[o]=e[o<<2];i=Math.max(i,c),a=Math.min(a,c)}const s=255/(i-a);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-a)*s;return n}static#u(e){let t,n=-1/0,i=-1/0;const a=e.findIndex(l=>l!==0);let s=a,o=a;for(t=a;t<256;t++){const l=e[t];l>n&&(t-s>i&&(i=t-s,o=t-1),n=l,s=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#g(e){const t=e,{width:n,height:i}=e,{maxDim:a}=this.#e;let s=n,o=i;if(n>a||i>a){let d=n,f=i,p=Math.log2(Math.max(n,i)/a);const m=Math.floor(p);p=p===m?m-1:m;for(let v=0;v<p;v++){s=Math.ceil(d/2),o=Math.ceil(f/2);const _=new OffscreenCanvas(s,o);_.getContext("2d").drawImage(e,0,0,d,f,0,0,s,o),d=s,f=o,e!==t&&e.close(),e=_.transferToImageBitmap()}const y=Math.min(a/s,a/o);s=Math.round(s*y),o=Math.round(o*y)}const c=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,s,o),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,s,o);const u=c.getImageData(0,0,s,o).data;return[this.#h(u),s,o]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},a,s,o,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=200,d=u.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:y,fontBoundingBoxAscent:v,fontBoundingBoxDescent:_,width:S}=u.measureText(e),A=1.5,C=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,S)*A),k=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||h,Math.abs(v)+Math.abs(_)||h)*A);c=new OffscreenCanvas(C,k),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=d,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,C,k),u.fillStyle="black",u.fillText(e,C*(A-1)/2,k*(3-A)/2);const M=this.#h(u.getImageData(0,0,C,k).data),N=this.#c(M),F=this.#u(N),z=this.#i(M,C,k,F);return this.processDrawnLines({lines:{curves:z,width:C,height:k},pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,a){const[s,o,l]=this.#g(e),[c,u]=this.#l(s,o,l,Math.hypot(o,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),h=this.#u(u),d=this.#i(c,o,l,h);return this.processDrawnLines({lines:{curves:d,width:o,height:l},pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:s,areContours:o}){i%180!==0&&([t,n]=[n,t]);const{curves:l,width:c,height:u}=e,h=e.thickness??0,d=[],f=Math.min(t/c,n/u),p=f/t,m=f/n,y=[];for(const{points:_}of l){const S=s?this.#o(_):_;if(!S)continue;y.push(S);const A=S.length,C=new Float32Array(A),k=new Float32Array(3*(A===2?2:A-2));if(d.push({line:k,points:C}),A===2){C[0]=S[0]*p,C[1]=S[1]*m,k.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[M,N,F,z]=S;M*=p,N*=m,F*=p,z*=m,C.set([M,N,F,z],0),k.set([NaN,NaN,NaN,NaN,M,N],0);for(let W=4;W<A;W+=2){const V=C[W]=S[W]*p,Q=C[W+1]=S[W+1]*m;k.set(Wt.createBezierPoints(M,N,F,z,V,Q),(W-2)*3),[M,N,F,z]=[F,z,V,Q]}}if(d.length===0)return null;const v=o?new db:new ed;return v.build(d,t,n,1,i,o?0:h,a),{outline:v,newCurves:y,areContours:o,thickness:h,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:a}){let s=1/0,o=-1/0,l=0;for(const S of e){l+=S.length;for(let A=2,C=S.length;A<C;A++){const k=S[A]-S[A-2];s=Math.min(s,k),o=Math.max(o,k)}}let c;s>=-128&&o<=127?c=Int8Array:s>=-32768&&o<=32767?c=Int16Array:c=Int32Array;const u=e.length,h=F0+td*u,d=new Uint32Array(h);let f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=i,d[f++]=a,d[f++]=t?0:1,d[f++]=Math.max(0,Math.floor(n??0)),d[f++]=u,d[f++]=c.BYTES_PER_ELEMENT;for(const S of e)d[f++]=S.length-2,d[f++]=S[0],d[f++]=S[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(d);const y=c.prototype.constructor;for(const S of e){const A=new y(S.length-2);for(let C=2,k=S.length;C<k;C++)A[C-2]=S[C]-S[C-2];m.write(A)}m.close();const v=await new Response(p.readable).arrayBuffer(),_=new Uint8Array(v);return g6(_)}static async decompressSignature(e){try{const t=DR(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(const S of n)s||=new Uint8Array(new Uint32Array(S.buffer,0,4)[0]),s.set(S,o),o+=S.length;const l=new Uint32Array(s.buffer,0,s.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],h=l[3],d=l[4]===0,f=l[5],p=l[6],m=l[7],y=[],v=(F0+td*p)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(m){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(s.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(s.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(s.buffer,v);break}o=0;for(let S=0;S<p;S++){const A=l[td*S+F0],C=new Float32Array(A+2);y.push(C);for(let k=0;k<td-1;k++)C[k]=l[td*S+F0+k+1];for(let k=0;k<A;k++)C[k+2]=C[k]+_[o++]}return{areContours:d,thickness:f,outlines:y,width:u,height:h}}catch(t){return Nr(`decompressSignature: ${t}`),null}}}class fb extends n7{constructor(){super(),super.updateProperties({fill:pr._defaultLineColor,"stroke-width":0})}clone(){const e=new fb;return e.updateAll(this),e}}class gb extends R0{constructor(e){super(e),super.updateProperties({stroke:pr._defaultLineColor,"stroke-width":1})}clone(){const e=new gb(this._viewParameters);return e.updateAll(this),e}}class Ps extends yr{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Or.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){pr.initialize(e,t),this._defaultDrawingOptions=new fb,this._defaultDrawnSignatureOptions=new gb(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Wr(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:i,mustSmooth:a,areContours:s,description:o,uuid:l,heightInPage:c}=this.#r,{rawDims:{pageWidth:u,pageHeight:h},rotation:d}=this.parent.viewport,f=wu.processDrawnLines({lines:i,pageWidth:u,pageHeight:h,rotation:d,innerMargin:Ps._INNER_MARGIN,mustSmooth:a,areContours:s});this.addSignature(f,c,o,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:a}=this.#r,s=Math.max(i,a),o=wu.processDrawnLines({lines:{curves:e.map(l=>({points:l})),thickness:n,width:i,height:a},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:a,y:s}=this,{outline:o}=this.#r=e;this.#e=o instanceof db,this.description=n;let l;this.#e?l=Ps.getDefaultDrawingOptions():(l=Ps._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:l});const[c,u]=this.parentDimensions,[,h]=this.pageDimensions;let d=t/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(c*this.width,u*this.height),this.x=a,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return wu.process(e,t,n,i,Ps._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return wu.extractContoursFromText(e,t,n,i,a,Ps._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return wu.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:Ps._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Ps.getDefaultDrawingOptions():(this._drawingOptions=Ps._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,s={annotationType:Or.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(s),e?(s.paths={lines:t,points:n},s.uuid=this.#n,s.isCopy=!0):s.lines=t,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(e,t,n,i,a,s){return s.areContours?db.deserialize(e,t,n,i,a,s):ed.deserialize(e,t,n,i,a,s)}static async deserialize(e,t,n){const i=await super.deserialize(e,t,n);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class gD extends pr{#e=null;#t=null;#r=null;#n=null;#a=null;#i="";#s=null;#o=!1;#l=null;#c=!1;#h=!1;static _type="stamp";static _editorType=Or.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){pr.initialize(e,t)}static isHandlingMimeForPasting(e){return q2.includes(e)}static paste(e,t){t.pasteEditor({mode:Or.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#u(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#i=e.file.name),this.#f()}#g(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:s}=e||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:i,width:a,height:s,channels:i.length/(a*s)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#u(n,!0)).finally(()=>this.#g());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#u(i)).finally(()=>this.#g());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(n).then(i=>this.#u(i)).finally(()=>this.#g());return}const e=document.createElement("input");e.type="file",e.accept=q2.join(",");const t=this._uiManager._signal;this.#r=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#g()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#s===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#f():this.#p()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,i&&(this.#e=i),this.#o=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);const e=200;this.#l=setTimeout(()=>{this.#l=null,this.#m()},e)}#f(){const{div:e}=this;let{width:t,height:n}=this.#e;const[i,a]=this.pageDimensions,s=.75;if(this.width)t=this.width*i,n=this.height*a;else if(t>s*i||n>s*a){const u=Math.min(s*i/t,s*a/n);t*=u,n*=u}const[o,l]=this.parentDimensions;this.setDims(t*o/i,n*l/a),this._uiManager.enableWaiting(!1);const c=this.#s=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/i,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:i,height:a}=this.#e,s=new Is;let o=this.#e,l=i,c=a,u=null;if(t){if(i>t||a>t){const k=Math.min(t/i,t/a);l=Math.floor(i*k),c=Math.floor(a*k)}u=document.createElement("canvas");const d=u.width=Math.ceil(l*s.sx),f=u.height=Math.ceil(c*s.sy);this.#c||(o=this.#d(d,f));const p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let m="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",y="#42414d");const v=15,_=v*s.sx,S=v*s.sy,A=new OffscreenCanvas(_*2,S*2),C=A.getContext("2d");C.fillStyle=m,C.fillRect(0,0,_*2,S*2),C.fillStyle=y,C.fillRect(0,0,_,S),C.fillRect(_,S,_,S),p.fillStyle=p.createPattern(A,"repeat"),p.fillRect(0,0,d,f),p.drawImage(o,0,0,o.width,o.height,0,0,d,f)}let h=null;if(n){let d,f;if(s.symmetric&&o.width<e&&o.height<e)d=o.width,f=o.height;else if(o=this.#e,i>e||a>e){const y=Math.min(e/i,e/a);d=Math.floor(i*y),f=Math.floor(a*y),this.#c||(o=this.#d(d,f))}const m=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});m.drawImage(o,0,0,o.width,o.height,0,0,d,f),h={width:d,height:f,data:m.getImageData(0,0,d,f).data}}return{canvas:u,width:l,height:c,imageData:h}}#d(e,t){const{width:n,height:i}=this.#e;let a=n,s=i,o=this.#e;for(;a>2*e||s>2*t;){const l=a,c=s;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const u=new OffscreenCanvas(a,s);u.getContext("2d").drawImage(o,0,0,l,c,0,0,a,s),o=u.transferToImageBitmap()}return o}#m(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,a=new Is,s=Math.ceil(n*e*a.sx),o=Math.ceil(i*t*a.sy),l=this.#s;if(!l||l.width===s&&l.height===o)return;l.width=s,l.height=o;const c=this.#c?this.#e:this.#d(s,o),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,s,o)}#y(e){if(e){if(this.#c){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){const[t,n]=this.pageDimensions,i=Math.round(this.width*t*gu.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*gu.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,a);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),s.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let i=null,a=!1;if(e instanceof t7){const{data:{rect:m,rotation:y,id:v,structParent:_,popupRef:S,contentsObj:A},container:C,parent:{page:{pageNumber:k}},canvas:M}=e;let N,F;M?(delete e.canvas,{id:N,bitmap:F}=n.imageManager.getFromCanvas(C.id,M),M.remove()):(a=!0,e._hasNoCanvas=!0);const z=(await t._structTree.getAriaAttributes(`${z2}${v}`))?.get("aria-label")||"";i=e={annotationType:Or.STAMP,bitmapId:N,bitmap:F,pageIndex:k-1,rect:m.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:z},isSvg:!1,structParent:_,popupRef:S,comment:A?.str||null}}const s=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=e;a?(n.addMissingCanvas(e.id,s),s.#o=!0):u&&n.imageManager.isValidId(u)?(s.#t=u,l&&(s.#e=l)):s.#n=c,s.#c=h;const[f,p]=s.pageDimensions;return s.width=(o[2]-o[0])/f,s.height=(o[3]-o[1])/p,d&&(s.altTextData=d),s._initialData=i,e.comment&&s.setCommentData(e.comment),s.#h=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Or.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(n),e)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const o=this.#b(n);if(o.isSame)return null;o.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,t===null)return n;t.stamps||=new Map;const s=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:s,serialized:n}),n.bitmap=this.#y(!1);else if(this.#c){const o=t.stamps.get(this.#t);s>o.area&&(o.area=s,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){const t={rect:this.getRect(0,0)};return this.hasEditedComment&&(t.popup=this.comment),e.updateEdited(t),null}}class fo{#e;#t=!1;#r=null;#n=null;#a=null;#i=new Map;#s=!1;#o=!1;#l=!1;#c=null;#h=null;#u=null;#g=null;#p=null;#f=-1;#d;static _initialized=!1;static#m=new Map([si,hb,gD,$n,Ps].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:l,viewport:c,l10n:u}){const h=[...fo.#m.values()];if(!fo._initialized){fo._initialized=!0;for(const d of h)d.initialize(u,e)}e.registerEditorTypes(h),this.#d=e,this.pageIndex=t,this.div=n,this.#e=a,this.#r=s,this.viewport=c,this.#u=l,this.drawLayer=o,this._structTree=i,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===Or.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case Or.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Or.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Or.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of fo.#m.values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}async enable(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const e=new Set;for(const n of this.#i.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#d.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!this.#r){this.#l=!1;return}const t=this.#r.getEditableAnnotations();for(const n of t){if(n.hide(),this.#d.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#l=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#p){this.#p=new AbortController;const i=this.#d.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",a=>{const{clientX:o,clientY:l,timeStamp:c}=a,u=this.#f;if(c-u>500){this.#f=c;return}this.#f=-1;const{classList:h}=this.div;h.toggle("getElements",!0);const d=document.elementsFromPoint(o,l);if(h.toggle("getElements",!1),!this.div.contains(d[0]))return;let f;const p=new RegExp(`^${o6}[0-9]+$`);for(const y of d)if(p.test(y.id)){f=y.id;break}if(!f)return;const m=this.#i.get(f);m?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),m.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of this.#i.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#r){const i=this.#r.getEditableAnnotations();for(const a of i){const{id:s}=a.data;if(this.#d.isDeletedAnnotationElement(s)){a.updateEdited({deleted:!0});continue}let o=t.get(s);if(o){o.resetAnnotationElement(a),o.show(!1),a.show();continue}o=e.get(s),o&&(this.#d.addChangedExistingAnnotation(o),o.renderAnnotationElement(a)&&o.show(!1)),a.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of fo.#m.values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#g){this.#g=new AbortController;const e=this.#d.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#g&&(this.#g.abort(),this.#g=null,this.#u.div.classList.remove("highlighting"))}#y(e){this.#d.unselectAll();const{target:t}=e;if(t===this.#u.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#u.div.contains(t)){const{isMac:n}=ki.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),$n.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#d.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#d.isDeletedAnnotationElement(t)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),pr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#l),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return this.#d.getId()}get#b(){return fo.#m.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#w(e){const t=this.#b;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:n,offsetY:i}=this.#x(),a=this.getNextId(),s=this.#w({parent:this,id:a,x:n,y:i,uiManager:this.#d,isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await fo.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=this.#w({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:t,...n});return a&&this.add(a),a}#x(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),s=Math.max(0,t),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+i),c=(a+o)/2-e,u=(s+l)/2-t,[h,d]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:d}}addNewEditor(e={}){this.createAndAddNewEditor(this.#x(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:t}=ki.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#d.getMode();if(n===Or.STAMP||n===Or.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===Or.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:t}=ki.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const n=this.#d.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#c){this.#b.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#c=new AbortController;const t=this.#d.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#b.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#d.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#b.endDrawing(e)):null}findNewParent(e,t,n){const i=this.#d.findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,cc(this.div,e);for(const t of this.#d.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,cc(this.div,{rotation:n}),t!==n)for(const i of this.#i.values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#d.viewParameters.realScale}}class Ci{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Wr(this,"_svgFactory",new N0)}static#a(e,[t,n,i,a]){const{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*a}%`}#i(){const e=Ci._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#s(e,t){const n=Ci._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Ci._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)}draw(e,t=!1,n=!1){const i=Ci.#n++,a=this.#i(),s=Ci._svgFactory.createElement("defs");a.append(s);const o=Ci._svgFactory.createElement("path");s.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(i,o);const c=n?this.#s(s,l):null,u=Ci._svgFactory.createElement("use");return a.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const n=Ci.#n++,i=this.#i(),a=Ci._svgFactory.createElement("defs");i.append(a);const s=Ci._svgFactory.createElement("path");a.append(s);const o=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Ci._svgFactory.createElement("mask");a.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=Ci._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Ci._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=Ci._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(n,i),n}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:a,path:s}=t,o=typeof e=="number"?this.#t.get(e):e;if(o){if(n&&this.#o(o,n),i&&Ci.#a(o,i),a){const{classList:l}=o;for(const[c,u]of Object.entries(a))l.toggle(c,u)}if(s){const c=o.firstChild.firstChild;this.#o(c,s)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:cb},globalThis.pdfjsLib={AbortException:sl,AnnotationEditorLayer:fo,AnnotationEditorParamsType:nn,AnnotationEditorType:Or,AnnotationEditorUIManager:ol,AnnotationLayer:lb,AnnotationMode:al,AnnotationType:Yn,build:$F,ColorPicker:$a,createValidAbsoluteUrl:l6,DOMSVGFactory:N0,DrawLayer:Ci,FeatureTest:ki,fetchData:jh,getDocument:nb,getFilenameFromUrl:LR,getPdfFilenameFromUrl:BR,getRGB:k0,getUuid:f6,getXfaPageViewport:UR,GlobalWorkerOptions:bu,ImageKind:m0,InvalidPDFException:D2,isDataScheme:S0,isPdfFile:j2,isValidExplicitDest:QR,MathClamp:$i,noContextMenu:qa,normalizeUnicode:RR,OPS:v0,OutputScale:Is,PasswordResponses:AR,PDFDataRangeTransport:W6,PDFDateString:H2,PDFWorker:Qh,PermissionFlag:kR,PixelsPerInch:gu,RenderingCancelledException:U2,ResponseException:_0,setLayerDimensions:cc,shadow:Wr,SignatureExtractor:wu,stopEvent:Jn,SupportedImageMimeTypes:q2,TextLayer:Wi,TouchManager:C0,updateUrlHash:c6,Util:fr,VerbosityLevel:b0,version:GF,XfaLayer:K6},$o(()=>Promise.resolve().then(()=>fse),void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href).then(r=>{const e=new Blob([r.default],{type:"application/javascript"});bu.workerSrc=URL.createObjectURL(e)}).catch(()=>{console.warn("Failed to load PDF.js worker, PDF processing may not work")});async function i7(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=i=>{i.target?.result?e(i.target.result):t(new Error("Failed to read file."))},n.onerror=()=>{t(new Error("Failed to read file."))},n.readAsArrayBuffer(r)})}async function a7(r){try{const e=await i7(r),t=await nb(e).promise,n=t.numPages,i=[];for(let o=1;o<=n;o++)i.push(t.getPage(o).then(l=>l.getTextContent()));return(await Promise.all(i)).flatMap(o=>o.items.map(l=>l.str??"")).join(`
`)}catch(e){throw console.error("Error converting PDF to text:",e),new Error(`Failed to convert PDF to text: ${e instanceof Error?e.message:"Unknown error"}`)}}async function s7(r,e=1.5){try{const t=await i7(r),n=await nb(t).promise,i=[];for(let a=1;a<=n.numPages;a++){const s=await n.getPage(a),o=s.getViewport({scale:e}),l=document.createElement("canvas"),c=l.getContext("2d");if(l.width=o.width,l.height=o.height,!c)throw new Error("Failed to get 2D context from canvas");const u=s.render({canvasContext:c,viewport:o,canvas:l});i.push(u.promise.then(()=>l.toDataURL(ya.PNG)))}return await Promise.all(i)}catch(t){throw console.error("Error converting PDF to images:",t),new Error(`Failed to convert PDF to images: ${t instanceof Error?t.message:"Unknown error"}`)}}var o7=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,la=r=>!r||typeof r!="object"||Object.keys(r).length===0,pD=(r,e)=>JSON.stringify(r)===JSON.stringify(e);function l7(r,e){r.forEach(function(t){Array.isArray(t)?l7(t,e):e.push(t)})}function c7(r){let e=[];return l7(r,e),e}var u7=(...r)=>c7(r).filter(Boolean),h7=(r,e)=>{let t={},n=Object.keys(r),i=Object.keys(e);for(let a of n)if(i.includes(a)){let s=r[a],o=e[a];Array.isArray(s)||Array.isArray(o)?t[a]=u7(o,s):typeof s=="object"&&typeof o=="object"?t[a]=h7(s,o):t[a]=o+" "+s}else t[a]=r[a];for(let a of i)n.includes(a)||(t[a]=e[a]);return t},d7=r=>!r||typeof r!="string"?r:r.replace(/\s+/g," ").trim();const pb="-",mD=r=>{const e=vD(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:s=>{const o=s.split(pb);return o[0]===""&&o.length!==1&&o.shift(),f7(o,e)||bD(s)},getConflictingClassGroupIds:(s,o)=>{const l=t[s]||[];return o&&n[s]?[...l,...n[s]]:l}}},f7=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?f7(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=r.join(pb);return e.validators.find(({validator:s})=>s(a))?.classGroupId},g7=/^\[(.+)\]$/,bD=r=>{if(g7.test(r)){const e=g7.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},vD=r=>{const{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(const i in t)mb(t[i],n,i,e);return n},mb=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const a=i===""?e:p7(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(yD(i)){mb(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,s])=>{mb(s,p7(e,a),t,n)})})},p7=(r,e)=>{let t=r;return e.split(pb).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},yD=r=>r.isThemeGetter,wD=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(a,s)=>{t.set(a,s),e++,e>r&&(e=0,n=t,t=new Map)};return{get(a){let s=t.get(a);if(s!==void 0)return s;if((s=n.get(a))!==void 0)return i(a,s),s},set(a,s){t.has(a)?t.set(a,s):i(a,s)}}},bb="!",vb=":",xD=vb.length,_D=r=>{const{prefix:e,experimentalParseClassName:t}=r;let n=i=>{const a=[];let s=0,o=0,l=0,c;for(let p=0;p<i.length;p++){let m=i[p];if(s===0&&o===0){if(m===vb){a.push(i.slice(l,p)),l=p+xD;continue}if(m==="/"){c=p;continue}}m==="["?s++:m==="]"?s--:m==="("?o++:m===")"&&o--}const u=a.length===0?i:i.substring(l),h=SD(u),d=h!==u,f=c&&c>l?c-l:void 0;return{modifiers:a,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}};if(e){const i=e+vb,a=n;n=s=>s.startsWith(i)?a(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const i=n;n=a=>t({className:a,parseClassName:i})}return n},SD=r=>r.endsWith(bb)?r.substring(0,r.length-1):r.startsWith(bb)?r.substring(1):r,kD=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const i=[];let a=[];return n.forEach(s=>{s[0]==="["||e[s]?(i.push(...a.sort(),s),a=[]):a.push(s)}),i.push(...a.sort()),i}},AD=r=>({cache:wD(r.cacheSize),parseClassName:_D(r),sortModifiers:kD(r),...mD(r)}),CD=/\s+/,ED=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=e,s=[],o=r.trim().split(CD);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);if(h){l=u+(l.length>0?" "+l:l);continue}let y=!!m,v=n(y?p.substring(0,m):p);if(!v){if(!y){l=u+(l.length>0?" "+l:l);continue}if(v=n(p),!v){l=u+(l.length>0?" "+l:l);continue}y=!1}const _=a(d).join(":"),S=f?_+bb:_,A=S+v;if(s.includes(A))continue;s.push(A);const C=i(v,y);for(let k=0;k<C.length;++k){const M=C[k];s.push(S+M)}l=u+(l.length>0?" "+l:l)}return l};function TD(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=m7(e))&&(n&&(n+=" "),n+=t);return n}const m7=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=m7(r[n]))&&(t&&(t+=" "),t+=e);return t};function yb(r,...e){let t,n,i,a=s;function s(l){const c=e.reduce((u,h)=>h(u),r());return t=AD(c),n=t.cache.get,i=t.cache.set,a=o,o(l)}function o(l){const c=n(l);if(c)return c;const u=ED(l,t);return i(l,u),u}return function(){return a(TD.apply(null,arguments))}}const gi=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},b7=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,v7=/^\((?:(\w[\w-]*):)?(.+)\)$/i,MD=/^\d+\/\d+$/,ID=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ND=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xu=r=>MD.test(r),en=r=>!!r&&!Number.isNaN(Number(r)),fc=r=>!!r&&Number.isInteger(Number(r)),y7=r=>r.endsWith("%")&&en(r.slice(0,-1)),ll=r=>ID.test(r),FD=()=>!0,DD=r=>OD.test(r)&&!ND.test(r),wb=()=>!1,LD=r=>PD.test(r),BD=r=>RD.test(r),zD=r=>!Qt(r)&&!Jt(r),UD=r=>_u(r,_7,wb),Qt=r=>b7.test(r),gc=r=>_u(r,S7,DD),xb=r=>_u(r,QD,en),jD=r=>_u(r,w7,wb),HD=r=>_u(r,x7,BD),qD=r=>_u(r,wb,LD),Jt=r=>v7.test(r),D0=r=>Su(r,S7),GD=r=>Su(r,JD),$D=r=>Su(r,w7),WD=r=>Su(r,_7),VD=r=>Su(r,x7),XD=r=>Su(r,ZD,!0),_u=(r,e,t)=>{const n=b7.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},Su=(r,e,t=!1)=>{const n=v7.exec(r);return n?n[1]?e(n[1]):t:!1},w7=r=>r==="position",KD=new Set(["image","url"]),x7=r=>KD.has(r),YD=new Set(["length","size","percentage"]),_7=r=>YD.has(r),S7=r=>r==="length",QD=r=>r==="number",JD=r=>r==="family-name",ZD=r=>r==="shadow",_b=()=>{const r=gi("color"),e=gi("font"),t=gi("text"),n=gi("font-weight"),i=gi("tracking"),a=gi("leading"),s=gi("breakpoint"),o=gi("container"),l=gi("spacing"),c=gi("radius"),u=gi("shadow"),h=gi("inset-shadow"),d=gi("drop-shadow"),f=gi("blur"),p=gi("perspective"),m=gi("aspect"),y=gi("ease"),v=gi("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],k=()=>[Jt,Qt,l],M=()=>[xu,"full","auto",...k()],N=()=>[fc,"none","subgrid",Jt,Qt],F=()=>["auto",{span:["full",fc,Jt,Qt]},Jt,Qt],z=()=>[fc,"auto",Jt,Qt],W=()=>["auto","min","max","fr",Jt,Qt],V=()=>["start","end","center","between","around","evenly","stretch","baseline"],Q=()=>["start","end","center","stretch"],K=()=>["auto",...k()],ie=()=>[xu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],L=()=>[r,Jt,Qt],J=()=>[y7,gc],X=()=>["","none","full",c,Jt,Qt],re=()=>["",en,D0,gc],D=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>["","none",f,Jt,Qt],q=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jt,Qt],ae=()=>["none",en,Jt,Qt],fe=()=>["none",en,Jt,Qt],xe=()=>[en,Jt,Qt],pe=()=>[xu,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ll],breakpoint:[ll],color:[FD],container:[ll],"drop-shadow":[ll],ease:["in","out","in-out"],font:[zD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ll],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ll],shadow:[ll],spacing:["px",en],text:[ll],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xu,Qt,Jt,m]}],container:["container"],columns:[{columns:[en,Qt,Jt,o]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...S(),Qt,Jt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[fc,"auto",Jt,Qt]}],basis:[{basis:[xu,"full","auto",o,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[en,xu,"auto","initial","none",Qt]}],grow:[{grow:["",en,Jt,Qt]}],shrink:[{shrink:["",en,Jt,Qt]}],order:[{order:[fc,"first","last","none",Jt,Qt]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...Q(),"baseline"]}],"align-self":[{self:["auto",...Q(),"baseline"]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[o,"screen",...ie()]}],"min-w":[{"min-w":[o,"screen","none",...ie()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...ie()]}],h:[{h:["screen",...ie()]}],"min-h":[{"min-h":["screen","none",...ie()]}],"max-h":[{"max-h":["screen",...ie()]}],"font-size":[{text:["base",t,D0,gc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Jt,xb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",y7,Qt]}],"font-family":[{font:[GD,Qt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Jt,Qt]}],"line-clamp":[{"line-clamp":[en,"none",Jt,xb]}],leading:[{leading:[a,...k()]}],"list-image":[{"list-image":["none",Jt,Qt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Jt,Qt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:[en,"from-font","auto",Jt,gc]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[en,"auto",Jt,Qt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt,Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt,Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...S(),$D,jD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",WD,UD]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},fc,Jt,Qt],radial:["",Jt,Qt],conic:[fc,Jt,Qt]},VD,HD]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:re()}],"border-w-x":[{"border-x":re()}],"border-w-y":[{"border-y":re()}],"border-w-s":[{"border-s":re()}],"border-w-e":[{"border-e":re()}],"border-w-t":[{"border-t":re()}],"border-w-r":[{"border-r":re()}],"border-w-b":[{"border-b":re()}],"border-w-l":[{"border-l":re()}],"divide-x":[{"divide-x":re()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":re()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...D(),"hidden","none"]}],"divide-style":[{divide:[...D(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...D(),"none","hidden"]}],"outline-offset":[{"outline-offset":[en,Jt,Qt]}],"outline-w":[{outline:["",en,D0,gc]}],"outline-color":[{outline:[r]}],shadow:[{shadow:["","none",u,XD,qD]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",Jt,Qt,h]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[en,gc]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":re()}],"inset-ring-color":[{"inset-ring":L()}],opacity:[{opacity:[en,Jt,Qt]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none",Jt,Qt]}],blur:[{blur:ce()}],brightness:[{brightness:[en,Jt,Qt]}],contrast:[{contrast:[en,Jt,Qt]}],"drop-shadow":[{"drop-shadow":["","none",d,Jt,Qt]}],grayscale:[{grayscale:["",en,Jt,Qt]}],"hue-rotate":[{"hue-rotate":[en,Jt,Qt]}],invert:[{invert:["",en,Jt,Qt]}],saturate:[{saturate:[en,Jt,Qt]}],sepia:[{sepia:["",en,Jt,Qt]}],"backdrop-filter":[{"backdrop-filter":["","none",Jt,Qt]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[en,Jt,Qt]}],"backdrop-contrast":[{"backdrop-contrast":[en,Jt,Qt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",en,Jt,Qt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[en,Jt,Qt]}],"backdrop-invert":[{"backdrop-invert":["",en,Jt,Qt]}],"backdrop-opacity":[{"backdrop-opacity":[en,Jt,Qt]}],"backdrop-saturate":[{"backdrop-saturate":[en,Jt,Qt]}],"backdrop-sepia":[{"backdrop-sepia":["",en,Jt,Qt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Jt,Qt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[en,"initial",Jt,Qt]}],ease:[{ease:["linear","initial",y,Jt,Qt]}],delay:[{delay:[en,Jt,Qt]}],animate:[{animate:["none",v,Jt,Qt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,Jt,Qt]}],"perspective-origin":[{"perspective-origin":q()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[Jt,Qt,"","none","gpu","cpu"]}],"transform-origin":[{origin:q()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt,Qt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt,Qt]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[en,D0,gc,xb]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},eL=(r,{cacheSize:e,prefix:t,experimentalParseClassName:n,extend:i={},override:a={}})=>(rd(r,"cacheSize",e),rd(r,"prefix",t),rd(r,"experimentalParseClassName",n),L0(r.theme,a.theme),L0(r.classGroups,a.classGroups),L0(r.conflictingClassGroups,a.conflictingClassGroups),L0(r.conflictingClassGroupModifiers,a.conflictingClassGroupModifiers),rd(r,"orderSensitiveModifiers",a.orderSensitiveModifiers),B0(r.theme,i.theme),B0(r.classGroups,i.classGroups),B0(r.conflictingClassGroups,i.conflictingClassGroups),B0(r.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),k7(r,i,"orderSensitiveModifiers"),r),rd=(r,e,t)=>{t!==void 0&&(r[e]=t)},L0=(r,e)=>{if(e)for(const t in e)rd(r,t,e[t])},B0=(r,e)=>{if(e)for(const t in e)k7(r,e,t)},k7=(r,e,t)=>{const n=e[t];n!==void 0&&(r[t]=r[t]?r[t].concat(n):n)},tL=(r,...e)=>typeof r=="function"?yb(_b,r,...e):yb(()=>eL(_b(),r),...e),rL=yb(_b);var nL={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},A7=r=>r||void 0,nd=(...r)=>A7(c7(r).filter(Boolean).join(" ")),Sb=null,go={},kb=!1,id=(...r)=>e=>e.twMerge?((!Sb||kb)&&(kb=!1,Sb=la(go)?rL:tL({...go,extend:{theme:go.theme,classGroups:go.classGroups,conflictingClassGroupModifiers:go.conflictingClassGroupModifiers,conflictingClassGroups:go.conflictingClassGroups,...go.extend}})),A7(Sb(nd(r)))):nd(r),C7=(r,e)=>{for(let t in e)r.hasOwnProperty(t)?r[t]=nd(r[t],e[t]):r[t]=e[t];return r},z0=(r,e)=>{let{extend:t=null,slots:n={},variants:i={},compoundVariants:a=[],compoundSlots:s=[],defaultVariants:o={}}=r,l={...nL,...e},c=t!=null&&t.base?nd(t.base,r?.base):r?.base,u=t!=null&&t.variants&&!la(t.variants)?h7(i,t.variants):i,h=t!=null&&t.defaultVariants&&!la(t.defaultVariants)?{...t.defaultVariants,...o}:o;!la(l.twMergeConfig)&&!pD(l.twMergeConfig,go)&&(kb=!0,go=l.twMergeConfig);let d=la(t?.slots),f=la(n)?{}:{base:nd(r?.base,d&&t?.base),...n},p=d?f:C7({...t?.slots},la(f)?{base:r?.base}:f),m=la(t?.compoundVariants)?a:u7(t?.compoundVariants,a),y=_=>{if(la(u)&&la(n)&&d)return id(c,_?.class,_?.className)(l);if(m&&!Array.isArray(m))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof m}`);if(s&&!Array.isArray(s))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof s}`);let S=(V,Q,K=[],ie)=>{let L=K;if(typeof Q=="string")L=L.concat(d7(Q).split(" ").map(J=>`${V}:${J}`));else if(Array.isArray(Q))L=L.concat(Q.reduce((J,X)=>J.concat(`${V}:${X}`),[]));else if(typeof Q=="object"&&typeof ie=="string"){for(let J in Q)if(Q.hasOwnProperty(J)&&J===ie){let X=Q[J];if(X&&typeof X=="string"){let re=d7(X);L[ie]?L[ie]=L[ie].concat(re.split(" ").map(D=>`${V}:${D}`)):L[ie]=re.split(" ").map(D=>`${V}:${D}`)}else Array.isArray(X)&&X.length>0&&(L[ie]=X.reduce((re,D)=>re.concat(`${V}:${D}`),[]))}}return L},A=(V,Q=u,K=null,ie=null)=>{var L;let J=Q[V];if(!J||la(J))return null;let X=(L=ie?.[V])!=null?L:_?.[V];if(X===null)return null;let re=o7(X),D=Array.isArray(l.responsiveVariants)&&l.responsiveVariants.length>0||l.responsiveVariants===!0,se=h?.[V],ce=[];if(typeof re=="object"&&D)for(let[fe,xe]of Object.entries(re)){let pe=J[xe];if(fe==="initial"){se=xe;continue}Array.isArray(l.responsiveVariants)&&!l.responsiveVariants.includes(fe)||(ce=S(fe,pe,ce,K))}let q=re!=null&&typeof re!="object"?re:o7(se),ae=J[q||"false"];return typeof ce=="object"&&typeof K=="string"&&ce[K]?C7(ce,ae):ce.length>0?(ce.push(ae),K==="base"?ce.join(" "):ce):ae},C=()=>u?Object.keys(u).map(V=>A(V,u)):null,k=(V,Q)=>{if(!u||typeof u!="object")return null;let K=new Array;for(let ie in u){let L=A(ie,u,V,Q),J=V==="base"&&typeof L=="string"?L:L&&L[V];J&&(K[K.length]=J)}return K},M={};for(let V in _)_[V]!==void 0&&(M[V]=_[V]);let N=(V,Q)=>{var K;let ie=typeof _?.[V]=="object"?{[V]:(K=_[V])==null?void 0:K.initial}:{};return{...h,...M,...ie,...Q}},F=(V=[],Q)=>{let K=[];for(let{class:ie,className:L,...J}of V){let X=!0;for(let[re,D]of Object.entries(J)){let se=N(re,Q)[re];if(Array.isArray(D)){if(!D.includes(se)){X=!1;break}}else{let ce=q=>q==null||q===!1;if(ce(D)&&ce(se))continue;if(se!==D){X=!1;break}}}X&&(ie&&K.push(ie),L&&K.push(L))}return K},z=V=>{let Q=F(m,V);if(!Array.isArray(Q))return Q;let K={};for(let ie of Q)if(typeof ie=="string"&&(K.base=id(K.base,ie)(l)),typeof ie=="object")for(let[L,J]of Object.entries(ie))K[L]=id(K[L],J)(l);return K},W=V=>{if(s.length<1)return null;let Q={};for(let{slots:K=[],class:ie,className:L,...J}of s){if(!la(J)){let X=!0;for(let re of Object.keys(J)){let D=N(re,V)[re];if(D===void 0||(Array.isArray(J[re])?!J[re].includes(D):J[re]!==D)){X=!1;break}}if(!X)continue}for(let X of K)Q[X]=Q[X]||[],Q[X].push([ie,L])}return Q};if(!la(n)||!d){let V={};if(typeof p=="object"&&!la(p))for(let Q of Object.keys(p))V[Q]=K=>{var ie,L;return id(p[Q],k(Q,K),((ie=z(K))!=null?ie:[])[Q],((L=W(K))!=null?L:[])[Q],K?.class,K?.className)(l)};return V}return id(c,C(),F(m),_?.class,_?.className)(l)},v=()=>{if(!(!u||typeof u!="object"))return Object.keys(u)};return y.variantKeys=v(),y.extend=t,y.base=c,y.slots=p,y.variants=u,y.defaultVariants=h,y.compoundSlots=s,y.compoundVariants=m,y};const ad=z0({base:"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-all focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-white",outline:"bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 border",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});var iL=$("<a><!></a>"),aL=$("<button><!></button>");function Lr(r,e){ye(e,!0);let t=U(e,"variant",3,"default"),n=U(e,"size",3,"default"),i=U(e,"ref",15,null),a=U(e,"href",3,void 0),s=U(e,"type",3,"button"),o=qe(e,["$$slots","$$events","$$legacy","class","variant","size","ref","href","type","disabled","children"]);var l=Z(),c=P(l);{var u=d=>{var f=iL();Ht(f,m=>({"data-slot":"button",class:m,href:e.disabled?void 0:a(),"aria-disabled":e.disabled,role:e.disabled?"link":void 0,tabindex:e.disabled?-1:void 0,...o}),[()=>sr(ad({variant:t(),size:n()}),e.class)],void 0,"svelte-1fk696n");var p=G(f);Re(p,()=>e.children??je),j(f),Fr(f,m=>i(m),()=>i()),w(d,f)},h=d=>{var f=aL();Ht(f,m=>({"data-slot":"button",class:m,type:s(),disabled:e.disabled,...o}),[()=>sr(ad({variant:t(),size:n()}),e.class)],void 0,"svelte-1fk696n");var p=G(f);Re(p,()=>e.children??je),j(f),Fr(f,m=>i(m),()=>i()),w(d,f)};le(c,d=>{a()?d(u):d(h,!1)})}w(r,l),we()}function Ab(r){if(r===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,n)).toFixed(2))+" "+t[n]}function sL(r){return r.split("/").pop()?.toUpperCase()||"FILE"}function E7(r){return r.length>150?r.substring(0,150)+"...":r}var oL=$("<span>â¢</span> <span> </span>",1),lL=$("<!> Text",1),cL=$('<div class="mr-1 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"></div>'),uL=$("<!> Pages",1),hL=$('<div class="flex items-center gap-2"><!> <!></div>'),dL=$('<div class="flex items-center justify-between"><div class="flex items-center gap-3"><!> <div><!> <div class="flex items-center gap-2 text-sm text-muted-foreground"><span> </span> <!></div></div></div> <!></div>'),fL=$('<div class="flex items-center justify-center"><img class="max-h-full rounded-lg object-contain shadow-lg"/></div>'),gL=$('<div class="flex items-center justify-center p-8"><div class="text-center"><div class="mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"></div> <p class="text-muted-foreground">Converting PDF to images...</p></div></div>'),pL=$('<div class="flex items-center justify-center p-8"><div class="text-center"><!> <p class="mb-4 text-muted-foreground">Failed to load PDF images</p> <p class="text-sm text-muted-foreground"> </p> <!></div></div>'),mL=$('<div class="text-center"><p class="mb-2 text-sm text-muted-foreground"> </p> <img class="mx-auto max-w-full rounded-lg shadow-lg"/></div>'),bL=$('<div class="max-h-[70vh] space-y-4 overflow-auto"></div>'),vL=$('<div class="flex items-center justify-center p-8"><div class="text-center"><!> <p class="mb-4 text-muted-foreground">No PDF pages available</p></div></div>'),yL=$('<div class="max-h-[60vh] overflow-auto rounded-lg bg-muted p-4 font-mono text-sm break-words whitespace-pre-wrap"> </div>'),wL=$('<audio controls class="mb-4 w-full">Your browser does not support the audio element.</audio>'),xL=$('<audio controls class="mb-4 w-full">Your browser does not support the audio element.</audio>'),_L=$('<p class="mb-4 text-muted-foreground">Audio preview not available</p>'),SL=$('<div class="flex items-center justify-center p-8"><div class="w-full max-w-md text-center"><!> <!> <p class="text-sm text-muted-foreground"> </p></div></div>'),kL=$('<div class="flex items-center justify-center p-8"><div class="text-center"><!> <p class="mb-4 text-muted-foreground">Preview not available for this file type</p></div></div>'),AL=$('<!> <div class="flex-1 overflow-auto"><!></div>',1);function CL(r,e){ye(e,!0);let t=U(e,"open",15),n=B(()=>e.uploadedFile?.name||e.attachment?.name||e.name||"Unknown File"),i=B(()=>e.uploadedFile?.preview||(e.attachment?.type==="imageFile"?e.attachment.base64Url:e.preview)),a=B(()=>e.uploadedFile?.type||(e.attachment?.type==="imageFile"?"image":e.attachment?.type==="textFile"?"text":e.attachment?.type==="audioFile"?e.attachment.mimeType||"audio":e.attachment?.type==="pdfFile"?tc.PDF:e.type||"unknown")),s=B(()=>e.uploadedFile?.size||e.size),o=B(()=>e.uploadedFile?.textContent||(e.attachment?.type==="textFile"||e.attachment?.type==="pdfFile"?e.attachment.content:e.textContent)),l=B(()=>wa(g(a))===an.AUDIO||g(a)==="audio"),c=B(()=>wa(g(a))===an.IMAGE||g(a)==="image"),u=B(()=>g(a)===tc.PDF),h=B(()=>wa(g(a))===an.TEXT||g(a)==="text"),d=B(()=>()=>g(c)?Zy:g(h)||g(u)?Lh:g(l)?e6:Qy),f=ue("pages"),p=ue(Mr([])),m=ue(!1),y=ue(null);async function v(){if(!(!g(u)||g(p).length>0||g(m))){I(m,!0),I(y,null);try{let A=null;if(e.uploadedFile?.file)A=e.uploadedFile.file;else if(e.attachment?.type==="pdfFile"){if(e.attachment.images&&Array.isArray(e.attachment.images)){I(p,e.attachment.images,!0);return}if(e.attachment.base64Data){const C=e.attachment.base64Data,k=atob(C),M=new Array(k.length);for(let F=0;F<k.length;F++)M[F]=k.charCodeAt(F);const N=new Uint8Array(M);A=new File([N],g(n),{type:tc.PDF})}}if(A)I(p,await s7(A),!0);else throw new Error("No PDF file available for conversion")}catch(A){I(y,A instanceof Error?A.message:"Failed to load PDF images",!0)}finally{I(m,!1)}}}Nt(()=>{t()&&(I(p,[],!0),I(m,!1),I(y,null),I(f,"pages"))}),Nt(()=>{t()&&g(u)&&g(f)==="pages"&&v()});var _=Z(),S=P(_);he(S,()=>I2,(A,C)=>{C(A,{get open(){return t()},set open(k){t(k)},children:(k,M)=>{var N=Z(),F=P(N);he(F,()=>M2,(z,W)=>{W(z,{class:"grid max-h-[90vh] max-w-5xl overflow-hidden !p-10 sm:w-auto sm:max-w-6xl",children:(V,Q)=>{var K=AL(),ie=P(K);he(ie,()=>qy,(D,se)=>{se(D,{class:"flex-shrink-0",children:(ce,q)=>{var ae=dL(),fe=G(ae),xe=G(fe);{var pe=rt=>{var Qe=Z(),ut=P(Qe);he(ut,()=>g(d),(ft,ht)=>{ht(ft,{class:"h-5 w-5 text-muted-foreground"})}),w(rt,Qe)};le(xe,rt=>{g(d)&&rt(pe)})}var Ce=te(xe,2),Te=G(Ce);he(Te,()=>f0,(rt,Qe)=>{Qe(rt,{class:"text-left",children:(ut,ft)=>{Et();var ht=tr();Be(()=>nt(ht,g(n))),w(ut,ht)},$$slots:{default:!0}})});var Ae=te(Te,2),be=G(Ae),Ee=G(be,!0);j(be);var $e=te(be,2);{var Ye=rt=>{var Qe=oL(),ut=te(P(Qe),2),ft=G(ut,!0);j(ut),Be(ht=>nt(ft,ht),[()=>Ab(g(s))]),w(rt,Qe)};le($e,rt=>{g(s)&&rt(Ye)})}j(Ae),j(Ce),j(fe);var He=te(fe,2);{var We=rt=>{var Qe=hL(),ut=G(Qe);{let ht=B(()=>g(f)==="text"?"default":"outline");Lr(ut,{get variant(){return g(ht)},size:"sm",onclick:()=>I(f,"text"),get disabled(){return g(m)},children:(it,Je)=>{var at=lL(),ct=P(at);Lh(ct,{class:"mr-1 h-4 w-4"}),Et(),w(it,at)},$$slots:{default:!0}})}var ft=te(ut,2);{let ht=B(()=>g(f)==="pages"?"default":"outline");Lr(ft,{get variant(){return g(ht)},size:"sm",onclick:()=>{I(f,"pages"),v()},get disabled(){return g(m)},children:(it,Je)=>{var at=uL(),ct=P(at);{var Se=et=>{var ot=cL();w(et,ot)},Le=et=>{nR(et,{class:"mr-1 h-4 w-4"})};le(ct,et=>{g(m)?et(Se):et(Le,!1)})}Et(),w(it,at)},$$slots:{default:!0}})}j(Qe),w(rt,Qe)};le(He,rt=>{g(u)&&rt(We)})}j(ae),Be(()=>nt(Ee,g(a))),w(ce,ae)},$$slots:{default:!0}})});var L=te(ie,2),J=G(L);{var X=D=>{var se=fL(),ce=G(se);j(se),Be(()=>{zt(ce,"src",g(i)),zt(ce,"alt",g(n))}),w(D,se)},re=D=>{var se=Z(),ce=P(se);{var q=fe=>{var xe=Z(),pe=P(xe);{var Ce=Ae=>{var be=gL();w(Ae,be)},Te=Ae=>{var be=Z(),Ee=P(be);{var $e=He=>{var We=pL(),rt=G(We),Qe=G(rt);Lh(Qe,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"});var ut=te(Qe,4),ft=G(ut,!0);j(ut);var ht=te(ut,2);Lr(ht,{class:"mt-4",onclick:()=>I(f,"text"),children:(it,Je)=>{Et();var at=tr("View as Text");w(it,at)},$$slots:{default:!0}}),j(rt),j(We),Be(()=>nt(ft,g(y))),w(He,We)},Ye=He=>{var We=Z(),rt=P(We);{var Qe=ft=>{var ht=bL();dn(ht,22,()=>g(p),it=>it,(it,Je,at)=>{var ct=mL(),Se=G(ct),Le=G(Se);j(Se);var et=te(Se,2);j(ct),Be(()=>{nt(Le,`Page ${g(at)+1}`),zt(et,"src",Je),zt(et,"alt",`PDF Page ${g(at)+1}`)}),w(it,ct)}),j(ht),w(ft,ht)},ut=ft=>{var ht=vL(),it=G(ht),Je=G(it);Lh(Je,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),Et(2),j(it),j(ht),w(ft,ht)};le(rt,ft=>{g(p).length>0?ft(Qe):ft(ut,!1)},!0)}w(He,We)};le(Ee,He=>{g(y)?He($e):He(Ye,!1)},!0)}w(Ae,be)};le(pe,Ae=>{g(m)?Ae(Ce):Ae(Te,!1)})}w(fe,xe)},ae=fe=>{var xe=Z(),pe=P(xe);{var Ce=Ae=>{var be=yL(),Ee=G(be,!0);j(be),Be(()=>nt(Ee,g(o))),w(Ae,be)},Te=Ae=>{var be=Z(),Ee=P(be);{var $e=He=>{var We=SL(),rt=G(We),Qe=G(rt);e6(Qe,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"});var ut=te(Qe,2);{var ft=at=>{var ct=wL();Be(()=>zt(ct,"src",`data:${e.attachment.mimeType??""};base64,${e.attachment.base64Data??""}`)),w(at,ct)},ht=at=>{var ct=Z(),Se=P(ct);{var Le=ot=>{var mt=xL();Be(()=>zt(mt,"src",e.uploadedFile.preview)),w(ot,mt)},et=ot=>{var mt=_L();w(ot,mt)};le(Se,ot=>{e.uploadedFile?.preview?ot(Le):ot(et,!1)},!0)}w(at,ct)};le(ut,at=>{e.attachment?.type==="audioFile"?at(ft):at(ht,!1)})}var it=te(ut,2),Je=G(it,!0);j(it),j(rt),j(We),Be(()=>nt(Je,g(n))),w(He,We)},Ye=He=>{var We=kL(),rt=G(We),Qe=G(rt);{var ut=ft=>{var ht=Z(),it=P(ht);he(it,()=>g(d),(Je,at)=>{at(Je,{class:"mx-auto mb-4 h-16 w-16 text-muted-foreground"})}),w(ft,ht)};le(Qe,ft=>{g(d)&&ft(ut)})}Et(2),j(rt),j(We),w(He,We)};le(Ee,He=>{g(l)?He($e):He(Ye,!1)},!0)}w(Ae,be)};le(pe,Ae=>{(g(h)||g(u)&&g(f)==="text")&&g(o)?Ae(Ce):Ae(Te,!1)},!0)}w(fe,xe)};le(ce,fe=>{g(u)&&g(f)==="pages"?fe(q):fe(ae,!1)},!0)}w(D,se)};le(J,D=>{g(c)&&g(i)?D(X):D(re,!1)})}j(L),w(V,K)},$$slots:{default:!0}})}),w(k,N)},$$slots:{default:!0}})}),w(r,_),we()}var EL=$("<div></div>"),TL=$("<!> <!>",1);function T7(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"attachments",19,()=>[]),i=U(e,"readonly",3,!1),a=U(e,"uploadedFiles",27,()=>Mr([])),s=U(e,"imageClass",3,""),o=U(e,"imageHeight",3,"h-24"),l=U(e,"imageWidth",3,"w-auto"),c=B(d),u=ue(!1),h=ue(null);function d(){const S=[];for(const A of a())S.push({id:A.id,name:A.name,size:A.size,preview:A.preview,type:A.type,isImage:wa(A.type)===an.IMAGE,uploadedFile:A,textContent:A.textContent});for(const[A,C]of n().entries())C.type==="imageFile"?S.push({id:`attachment-${A}`,name:C.name,preview:C.base64Url,type:"image",isImage:!0,attachment:C,attachmentIndex:A}):C.type==="textFile"?S.push({id:`attachment-${A}`,name:C.name,type:"text",isImage:!1,attachment:C,attachmentIndex:A,textContent:C.content}):C.type==="context"?S.push({id:`attachment-${A}`,name:C.name,type:"text",isImage:!1,attachment:C,attachmentIndex:A,textContent:C.content}):C.type==="audioFile"?S.push({id:`attachment-${A}`,name:C.name,type:C.mimeType||"audio",isImage:!1,attachment:C,attachmentIndex:A}):C.type==="pdfFile"&&S.push({id:`attachment-${A}`,name:C.name,type:"application/pdf",isImage:!1,attachment:C,attachmentIndex:A,textContent:C.content});return S}function f(S,A){A&&(A.preventDefault(),A.stopPropagation()),I(h,{uploadedFile:S.uploadedFile,attachment:S.attachment,preview:S.preview,name:S.name,type:S.type,size:S.size,textContent:S.textContent},!0),I(u,!0)}var p=TL(),m=P(p);{var y=S=>{var A=EL();dn(A,21,()=>g(c),C=>C.id,(C,k)=>{var M=Z(),N=P(M);{var F=W=>{qL(W,{class:"cursor-pointer",get id(){return g(k).id},get name(){return g(k).name},get preview(){return g(k).preview},get readonly(){return i()},get onRemove(){return e.onFileRemove},get height(){return o()},get width(){return l()},get imageClass(){return s()},onClick:V=>f(g(k),V)})},z=W=>{BL(W,{class:"cursor-pointer",get id(){return g(k).id},get name(){return g(k).name},get type(){return g(k).type},get size(){return g(k).size},get readonly(){return i()},get onRemove(){return e.onFileRemove},get textContent(){return g(k).textContent},onClick:V=>f(g(k),V)})};le(N,W=>{g(k).isImage&&g(k).preview?W(F):W(z,!1)})}w(C,M)}),j(A),Be(()=>er(A,1,`flex flex-wrap items-start ${i()?"justify-end":""} gap-3 ${t()??""}`)),w(S,A)};le(m,S=>{g(c).length>0&&S(y)})}var v=te(m,2);{var _=S=>{CL(S,{get uploadedFile(){return g(h).uploadedFile},get attachment(){return g(h).attachment},get preview(){return g(h).preview},get name(){return g(h).name},get type(){return g(h).type},get size(){return g(h).size},get textContent(){return g(h).textContent},get open(){return g(u)},set open(A){I(u,A,!0)}})};le(v,S=>{g(h)&&S(_)})}w(r,p),we()}var ML=$('<span class="text-xs text-muted-foreground"> </span>'),IL=$('<div class="pointer-events-none absolute right-0 bottom-0 left-0 h-6 bg-gradient-to-t from-muted to-transparent"></div>'),OL=$('<div class="relative mt-2 w-full"><div class="overflow-hidden font-mono text-xs leading-relaxed break-words whitespace-pre-wrap text-muted-foreground"> </div> <!></div>'),NL=$('<button type="button"><div class="flex items-start gap-3"><div class="flex min-w-0 flex-1 flex-col items-start text-left"><span class="w-full truncate text-sm font-medium text-foreground"> </span> <!> <!></div></div></button>'),PL=$('<div class="pointer-events-none absolute right-0 bottom-0 left-0 h-4 bg-gradient-to-t from-muted to-transparent"></div>'),RL=$('<div class="relative"><div class="overflow-hidden font-mono text-xs leading-relaxed break-words whitespace-pre-wrap text-muted-foreground" style="max-height: 3.6em; line-height: 1.2em;"> </div> <!></div>'),FL=$('<div><!> <div class="pr-8"><span class="mb-3 block truncate text-sm font-medium text-foreground"> </span> <!></div></div>'),DL=$('<span class="text-left text-xs text-muted-foreground"> </span>'),LL=$('<button><div class="flex h-8 w-8 items-center justify-center rounded bg-primary/10 text-xs font-medium text-primary"> </div> <div class="flex flex-col gap-1"><span class="max-w-36 truncate text-sm font-medium text-foreground md:max-w-72"> </span> <!></div> <!></button>');function BL(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"readonly",3,!1);var i=Z(),a=P(i);{var s=l=>{var c=Z(),u=P(c);{var h=f=>{var p=NL();p.__click=function(...M){e.onClick?.apply(this,M)};var m=G(p),y=G(m),v=G(y),_=G(v,!0);j(v);var S=te(v,2);{var A=M=>{var N=ML(),F=G(N,!0);j(N),Be(z=>nt(F,z),[()=>Ab(e.size)]),w(M,N)};le(S,M=>{e.size&&M(A)})}var C=te(S,2);{var k=M=>{var N=OL(),F=G(N),z=G(F,!0);j(F);var W=te(F,2);{var V=Q=>{var K=IL();w(Q,K)};le(W,Q=>{e.textContent.length>150&&Q(V)})}j(N),Be(Q=>nt(z,Q),[()=>E7(e.textContent)]),w(M,N)};le(C,M=>{e.textContent&&e.type==="text"&&M(k)})}j(y),j(m),j(p),Be(()=>{er(p,1,`cursor-pointer rounded-lg border border-border bg-muted p-3 transition-shadow hover:shadow-md ${t()??""} w-full max-w-2xl`),zt(p,"aria-label",`Preview ${e.name}`),nt(_,e.name)}),w(f,p)},d=f=>{var p=FL(),m=G(p);Lr(m,{type:"button",variant:"ghost",size:"sm",class:"absolute top-2 right-2 h-6 w-6 bg-white/20 p-0 hover:bg-white/30",onclick:()=>e.onRemove?.(e.id),"aria-label":"Remove file",children:(C,k)=>{Ha(C,{class:"h-3 w-3"})},$$slots:{default:!0}});var y=te(m,2),v=G(y),_=G(v,!0);j(v);var S=te(v,2);{var A=C=>{var k=RL(),M=G(k),N=G(M,!0);j(M);var F=te(M,2);{var z=W=>{var V=PL();w(W,V)};le(F,W=>{e.textContent.length>150&&W(z)})}j(k),Be(W=>nt(N,W),[()=>E7(e.textContent)]),w(C,k)};le(S,C=>{e.textContent&&C(A)})}j(y),j(p),Be(()=>{er(p,1,`relative rounded-lg border border-border bg-muted p-3 ${t()??""} w-64`),nt(_,e.name)}),w(f,p)};le(u,f=>{n()?f(h):f(d,!1)})}w(l,c)},o=l=>{var c=LL();c.__click=function(...S){e.onClick?.apply(this,S)};var u=G(c),h=G(u,!0);j(u);var d=te(u,2),f=G(d),p=G(f,!0);j(f);var m=te(f,2);{var y=S=>{var A=DL(),C=G(A,!0);j(A),Be(k=>nt(C,k),[()=>Ab(e.size)]),w(S,A)};le(m,S=>{e.size&&S(y)})}j(d);var v=te(d,2);{var _=S=>{Lr(S,{type:"button",variant:"ghost",size:"sm",class:"h-6 w-6 p-0",onclick:A=>{A.stopPropagation(),e.onRemove?.(e.id)},children:(A,C)=>{Ha(A,{class:"h-3 w-3"})},$$slots:{default:!0}})};le(v,S=>{n()||S(_)})}j(c),Be(S=>{er(c,1,`flex items-center gap-2 gap-3 rounded-lg border border-border bg-muted p-3 ${t()??""}`),nt(h,S),nt(p,e.name)},[()=>sL(e.type)]),w(l,c)};le(a,l=>{e.type===Ir.PLAIN||e.type===an.TEXT?l(s):l(o,!1)})}w(r,i),we()}Xn(["click"]);var zL=$('<button type="button" class="block h-full w-full rounded-lg focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:outline-none"><img/></button>'),UL=$("<img/>"),jL=$('<div class="absolute top-1 right-1 flex items-center justify-center opacity-0 transition-opacity hover:opacity-100"><!></div>'),HL=$("<div><!> <!></div>");function qL(r,e){ye(e,!0);let t=U(e,"readonly",3,!1),n=U(e,"class",3,""),i=U(e,"width",3,"w-auto"),a=U(e,"height",3,"h-24"),s=U(e,"imageClass",3,"");var o=HL(),l=G(o);{var c=f=>{var p=zL();p.__click=function(...y){e.onClick?.apply(this,y)};var m=G(p);j(p),Be(()=>{zt(p,"aria-label",`Preview ${e.name??""}`),zt(m,"src",e.preview),zt(m,"alt",e.name),er(m,1,`${a()??""} ${i()??""} cursor-pointer object-cover ${s()??""}`)}),w(f,p)},u=f=>{var p=UL();Be(()=>{zt(p,"src",e.preview),zt(p,"alt",e.name),er(p,1,`${a()??""} ${i()??""} cursor-pointer object-cover ${s()??""}`)}),w(f,p)};le(l,f=>{e.onClick?f(c):f(u,!1)})}var h=te(l,2);{var d=f=>{var p=jL(),m=G(p);Lr(m,{type:"button",variant:"ghost",size:"sm",class:"h-6 w-6 bg-white/20 p-0 text-white hover:bg-white/30",onclick:()=>e.onRemove?.(e.id),children:(y,v)=>{Ha(y,{class:"h-3 w-3"})},$$slots:{default:!0}}),j(p),w(f,p)};le(h,f=>{t()||f(d)})}j(o),Be(()=>er(o,1,`relative overflow-hidden rounded-lg border border-border bg-muted ${n()??""}`)),w(r,o),we()}Xn(["click"]);const Cb=`
    bg-muted/70 dark:bg-muted/85
    border border-border/30 focus-within:border-border  dark:border-border/20 dark:focus-within:border-border
    outline-none
    text-foreground
`,Wa={apiKey:"",systemMessage:"",theme:"system",showTokensPerSecond:!1,showThoughtInProgress:!1,disableReasoningFormat:!1,keepStatsVisible:!1,showMessageStats:!0,askForTitleConfirmation:!1,pasteLongTextToFileLen:2500,pdfAsImage:!1,copyTextAttachmentsAsPlainText:!1,enableContinueButton:!1,backendSampling:!1,showToolCallLabels:!1,renderUserContentAsMarkdown:!1,showMicrophoneOnEmptyInput:!1,disableAutoScroll:!1,alwaysShowSidebar:!1,autoShowSidebarOnNewChat:!0,samplers:"top_k;typ_p;top_p;min_p;temperature",temperature:.8,dynatemp_range:0,dynatemp_exponent:1,top_k:40,top_p:.95,min_p:.05,xtc_probability:0,xtc_threshold:.1,typ_p:1,repeat_last_n:64,repeat_penalty:1,presence_penalty:0,frequency_penalty:0,dry_multiplier:0,dry_base:1.75,dry_allowed_length:2,dry_penalty_last_n:-1,max_tokens:-1,custom:"",pyInterpreterEnabled:!1},cl={apiKey:"Set the API Key if you are using --api-key option for the server.",systemMessage:"The starting message that defines how model should behave.",theme:"Choose the color theme for the interface. You can choose between System (follows your device settings), Light, or Dark.",pasteLongTextToFileLen:"On pasting long text, it will be converted to a file. You can control the file length by setting the value of this parameter. Value 0 means disable.",samplers:'The order at which samplers are applied, in simplified way. Default is "top_k;typ_p;top_p;min_p;temperature": top_k->typ_p->top_p->min_p->temperature',temperature:"Controls the randomness of the generated text by affecting the probability distribution of the output tokens. Higher = more random, lower = more focused.",dynatemp_range:"Addon for the temperature sampler. The added value to the range of dynamic temperature, which adjusts probabilities by entropy of tokens.",dynatemp_exponent:"Addon for the temperature sampler. Smoothes out the probability redistribution based on the most probable token.",top_k:"Keeps only k top tokens.",top_p:"Limits tokens to those that together have a cumulative probability of at least p",min_p:"Limits tokens based on the minimum probability for a token to be considered, relative to the probability of the most likely token.",xtc_probability:"XTC sampler cuts out top tokens; this parameter controls the chance of cutting tokens at all. 0 disables XTC.",xtc_threshold:"XTC sampler cuts out top tokens; this parameter controls the token probability that is required to cut that token.",typ_p:"Sorts and limits tokens based on the difference between log-probability and entropy.",repeat_last_n:"Last n tokens to consider for penalizing repetition",repeat_penalty:"Controls the repetition of token sequences in the generated text",presence_penalty:"Limits tokens based on whether they appear in the output or not.",frequency_penalty:"Limits tokens based on how often they appear in the output.",dry_multiplier:"DRY sampling reduces repetition in generated text even across long contexts. This parameter sets the DRY sampling multiplier.",dry_base:"DRY sampling reduces repetition in generated text even across long contexts. This parameter sets the DRY sampling base value.",dry_allowed_length:"DRY sampling reduces repetition in generated text even across long contexts. This parameter sets the allowed length for DRY sampling.",dry_penalty_last_n:"DRY sampling reduces repetition in generated text even across long contexts. This parameter sets DRY penalty for the last n tokens.",max_tokens:"The maximum number of token per output. Use -1 for infinite (no limit).",custom:"Custom JSON parameters to send to the API. Must be valid JSON format.",showTokensPerSecond:"Display generation speed in tokens per second during streaming.",showThoughtInProgress:"Expand thought process by default when generating messages.",disableReasoningFormat:"Show raw LLM output without backend parsing and frontend Markdown rendering to inspect streaming across different models.",keepStatsVisible:"Keep processing statistics visible after generation finishes.",showMessageStats:"Display generation statistics (tokens/second, token count, duration) below each assistant message.",askForTitleConfirmation:"Ask for confirmation before automatically changing conversation title when editing the first message.",pdfAsImage:"Parse PDF as image instead of text. Automatically falls back to text processing for non-vision models.",copyTextAttachmentsAsPlainText:"When copying a message with text attachments, combine them into a single plain text string instead of a special format that can be pasted back as attachments.",enableContinueButton:'Enable "Continue" button for assistant messages. Currently works only with non-reasoning models.',backendSampling:"Enable backend-based samplers. When enabled, supported samplers run on the accelerator backend for faster sampling.",showToolCallLabels:"Display tool call labels and payloads from Harmony-compatible delta.tool_calls data below assistant messages.",renderUserContentAsMarkdown:"Render user messages using markdown formatting in the chat.",showMicrophoneOnEmptyInput:"Show microphone button instead of send when textarea is empty for models with audio modality support.",disableAutoScroll:"Disable automatic scrolling while messages stream so you can control the viewport position manually.",alwaysShowSidebar:"Always keep the sidebar visible on desktop instead of auto-hiding it.",autoShowSidebarOnNewChat:"Automatically show sidebar when starting a new chat. Disable to keep the sidebar hidden until you click on it.",pyInterpreterEnabled:"Enable Python interpreter using Pyodide. Allows running Python code in markdown code blocks."},M7=1e6;function po(r){return typeof r=="number"?Math.round(r*M7)/M7:r}const U0=[{key:"temperature",serverKey:"temperature",type:"number",canSync:!0},{key:"top_k",serverKey:"top_k",type:"number",canSync:!0},{key:"top_p",serverKey:"top_p",type:"number",canSync:!0},{key:"min_p",serverKey:"min_p",type:"number",canSync:!0},{key:"dynatemp_range",serverKey:"dynatemp_range",type:"number",canSync:!0},{key:"dynatemp_exponent",serverKey:"dynatemp_exponent",type:"number",canSync:!0},{key:"xtc_probability",serverKey:"xtc_probability",type:"number",canSync:!0},{key:"xtc_threshold",serverKey:"xtc_threshold",type:"number",canSync:!0},{key:"typ_p",serverKey:"typ_p",type:"number",canSync:!0},{key:"repeat_last_n",serverKey:"repeat_last_n",type:"number",canSync:!0},{key:"repeat_penalty",serverKey:"repeat_penalty",type:"number",canSync:!0},{key:"presence_penalty",serverKey:"presence_penalty",type:"number",canSync:!0},{key:"frequency_penalty",serverKey:"frequency_penalty",type:"number",canSync:!0},{key:"dry_multiplier",serverKey:"dry_multiplier",type:"number",canSync:!0},{key:"dry_base",serverKey:"dry_base",type:"number",canSync:!0},{key:"dry_allowed_length",serverKey:"dry_allowed_length",type:"number",canSync:!0},{key:"dry_penalty_last_n",serverKey:"dry_penalty_last_n",type:"number",canSync:!0},{key:"max_tokens",serverKey:"max_tokens",type:"number",canSync:!0},{key:"samplers",serverKey:"samplers",type:"string",canSync:!0}];class ul{static roundFloatingPoint(e){return po(e)}static extractServerDefaults(e){if(!e)return{};const t={};for(const n of U0)if(n.canSync&&n.serverKey in e){const i=e[n.serverKey];i!==void 0&&(t[n.key]=this.roundFloatingPoint(i))}return e.samplers&&Array.isArray(e.samplers)&&(t.samplers=e.samplers.join(";")),t}static mergeWithServerDefaults(e,t,n=new Set){const i={...e};for(const[a,s]of Object.entries(t))n.has(a)||(i[a]=this.roundFloatingPoint(s));return i}static getParameterInfo(e,t,n,i){const a=n[e]!==void 0,s=i.has(e);return{value:t,source:s?"custom":"default",serverDefault:a?n[e]:void 0,userOverride:s?t:void 0}}static canSyncParameter(e){return U0.some(t=>t.key===e&&t.canSync)}static getSyncableParameterKeys(){return U0.filter(e=>e.canSync).map(e=>e.key)}static validateServerParameter(e,t){const n=U0.find(i=>i.key===e);if(!n)return!1;switch(n.type){case"number":return typeof t=="number"&&!isNaN(t);case"string":return typeof t=="string";case"boolean":return typeof t=="boolean";default:return!1}}static createParameterDiff(e,t){const n={};for(const i of this.getSyncableParameterKeys()){const a=e[i],s=t[i];s!==void 0&&(n[i]={current:a,server:s,differs:a!==s})}return n}}const Eb="DeltaWebui.serverProps",GL="DeltaWebui.selectedModel",I7=8081;let hl="",Tb=!1,j0=null;function dl(){if(typeof window>"u")return`http://localhost:${I7}`;const{protocol:r,hostname:e}=window.location;return`${r}//${e}:${I7}`}function O7(){return typeof window>"u"||window.location.port!=="8080"?(hl=dl(),Promise.resolve()):(j0!==null||(j0=(async()=>{try{(await fetch("/api/models/available",{method:"GET"})).ok?hl="":hl=dl()}catch{hl=dl()}Tb=!0})()),j0)}function $L(){typeof window<"u"&&window.location.port==="8080"&&(hl=dl(),Tb=!0)}function us(){return typeof window>"u"||window.location.port!=="8080"||!Tb?dl():hl===""?"":hl}const N7=Object.freeze(Object.defineProperty({__proto__:null,forceModelApi8081:$L,getModelApiBaseUrl:us,resolveModelApiBaseUrl:O7},Symbol.toStringTag,{value:"Module"}));class Va{static async list(){const t=un().apiKey?.toString().trim(),n={...t?{Authorization:`Bearer ${t}`}:{}},i=await fetch(`${Si}/v1/models`,{headers:n});if(!i.ok)throw new Error(`Failed to fetch model list (status ${i.status})`);const a=await i.json();if(a.data&&a.data.length===0)try{const s=await fetch(`${Si}/models`,{headers:n});if(s.ok){const o=await s.json(),l=Array.isArray(o)?o:o?.items??o?.models??[];l.length>0&&(a.data=l.map((c,u)=>({id:c.id??c.name??c.path??`model-${u}`,object:"model",created:0,owned_by:""})))}}catch{}return a}static async listAvailable(){const e=await fetch(`${us()}/api/models/available`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to fetch available models (status ${e.status})`);const t=await e.json();return Array.isArray(t)?{models:t}:t}static async listInstalled(){const e=await fetch(`${us()}/api/models/list`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to fetch installed models (status ${e.status})`);const t=await e.json();return Array.isArray(t)?{models:t}:t}static async getDownloadProgress(e){try{const t=`${us()}/api/models/download/progress/${encodeURIComponent(e)}`;console.log("[ModelsService] Fetching progress from:",t);const n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw console.error("[ModelsService] Progress fetch failed:",n.status,n.statusText),new Error(`Failed to get download progress (status ${n.status})`);const i=await n.json();return console.log("[ModelsService] Progress data received:",i),i}catch(t){throw console.error("[ModelsService] Error fetching progress:",t),t}}static async download(e){let t;try{t=await fetch(`${us()}/api/models/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e})})}catch(n){const i=n instanceof Error&&n.message==="Failed to fetch"?"Cannot reach model server. Make sure Delta is running (e.g. run 'delta' in terminal or start delta-server).":n instanceof Error?n.message:"Failed to fetch";throw new Error(i)}if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error?.message||`Failed to download model (status ${t.status})`)}return t.json()}static async cancelDownload(e){const t=await fetch(`${us()}/api/models/download/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e})});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error?.message||`Failed to cancel download (status ${t.status})`)}return t.json()}static async remove(e){const t=await fetch(`${us()}/api/models/${encodeURIComponent(e)}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error?.message||`Failed to remove model (status ${t.status})`)}return t.json()}static async use(e,t){const n={model:e};t!=null&&t>0&&(n.ctx_size=t);const i=`${us()}/api/models/use`,a=async()=>fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});let s;try{s=await a()}catch(o){if(o instanceof TypeError&&(o.message==="Failed to fetch"||o.message.includes("fetch"))){await new Promise(c=>setTimeout(c,2500));try{s=await a()}catch{throw new Error("Cannot reach the server while loading the model. Make sure Delta is running (run 'delta' in terminal). If you just selected a model, the server may be restarting â wait a few seconds and try again.")}}else throw new Error(o instanceof Error?o.message:"Connection error while loading the model. Please try again.")}if(!s.ok){const o=await s.json().catch(()=>({}));throw new Error(o.error?.message||`Failed to switch model (status ${s.status})`)}return s.json()}static async unload(){const e=await fetch(`${us()}/api/models/unload`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error?.message||`Failed to unload model (status ${e.status})`)}return e.json()}static async getSystemRAM(){const e=await fetch(`${us()}/api/system/ram`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){if(typeof navigator<"u"&&"deviceMemory"in navigator){const t=navigator.deviceMemory;if(t)return{total_ram_gb:t,total_ram_bytes:t*1024*1024*1024}}throw new Error(`Failed to get system RAM (status ${e.status})`)}return e.json()}}class WL{callbacks=new Set;isStreamingActive=!1;lastKnownState=null;conversationStates=new Map;activeConversationId=null;loadedContextTotalOverride=null;startStreaming(){this.isStreamingActive=!0}stopStreaming(){this.isStreamingActive=!1}clearState(){this.lastKnownState=null,this.loadedContextTotalOverride=null;for(const e of this.callbacks)try{e(null)}catch(t){console.error("Error in clearState callback:",t)}}setLoadedContextTotal(e){if(e<=0)return;this.loadedContextTotalOverride=e;const t=un();this.lastKnownState={status:"idle",tokensDecoded:0,tokensRemaining:t?.max_tokens??-1,contextUsed:0,contextTotal:e,outputTokensUsed:0,outputTokensMax:t?.max_tokens??-1,temperature:t?.temperature??.8,topP:t?.top_p??.95,speculative:!1,hasNextToken:!1},this.notifyCallbacks()}isStreaming(){return this.isStreamingActive}setActiveConversation(e){this.activeConversationId=e,this.notifyCallbacks()}updateConversationState(e,t){this.conversationStates.set(e,t),e===this.activeConversationId&&(this.lastKnownState=t,this.notifyCallbacks())}getConversationState(e){return this.conversationStates.get(e)||null}clearConversationState(e){this.conversationStates.delete(e),e===this.activeConversationId&&(this.lastKnownState=null,this.notifyCallbacks())}notifyCallbacks(){const e=this.activeConversationId?this.conversationStates.get(this.activeConversationId)||null:this.lastKnownState;for(const t of this.callbacks)try{t(e)}catch(n){console.error("Error in slots service callback:",n)}}fetchAndNotify(){console.warn("SlotsService.fetchAndNotify() is deprecated - use timing data from ChatService instead")}subscribe(e){return this.callbacks.add(e),this.lastKnownState&&e(this.lastKnownState),()=>{this.callbacks.delete(e)}}async updateFromTimingData(e,t){const n=await this.parseCompletionTimingData(e);if(n===null){console.warn("Failed to parse timing data - skipping update");return}t?this.updateConversationState(t,n):(this.lastKnownState=n,this.notifyCallbacks())}async getContextTotal(){if(this.loadedContextTotalOverride!=null&&this.loadedContextTotalOverride>0)return this.loadedContextTotalOverride;if(this.lastKnownState&&this.lastKnownState.contextTotal>0)return this.lastKnownState.contextTotal;try{const t=un().apiKey?.toString().trim(),n=await fetch("./slots",{headers:{...t?{Authorization:`Bearer ${t}`}:{}}});if(n.ok){const i=await n.json();if(Array.isArray(i)&&i.length>0){const a=i[0];if(a.n_ctx&&a.n_ctx>0)return a.n_ctx}}}catch(e){console.warn("Failed to fetch context total from /slots:",e)}return 4096}async parseCompletionTimingData(e){const t=e.prompt_n||0,n=e.predicted_n||0,i=e.predicted_per_second||0,a=e.cache_n||0,s=e.predicted_ms||0,o=e.prompt_progress,l=await this.getContextTotal();if(l===null)return console.warn("No context total available - cannot calculate processing state"),null;const c=un(),u=c.max_tokens||-1,h=t+a+n,d=n,f=o?Math.round(o.processed/o.total*100):void 0,p=o&&o.time_ms>0?o.processed/o.time_ms*1e3:void 0;return{status:n>0?"generating":o?"preparing":"idle",tokensDecoded:n,tokensRemaining:u-n,contextUsed:h,contextTotal:l,outputTokensUsed:d,outputTokensMax:u,hasNextToken:n>0,tokensPerSecond:i,temperature:c.temperature??.8,topP:c.top_p??.95,speculative:!1,progressPercent:f,promptTokens:t,cacheTokens:a,promptProgressTimeMs:o?.time_ms,promptProgressProcessed:o?.processed,promptProgressTotal:o?.total,promptTokensPerSecond:p,generationTimeMs:s>0?s:void 0}}async getCurrentState(){if(this.activeConversationId){const e=this.conversationStates.get(this.activeConversationId);if(e)return e}if(this.lastKnownState)return this.lastKnownState;try{const{chatStore:e}=await $o(async()=>{const{chatStore:n}=await Promise.resolve().then(()=>FU);return{chatStore:n}},void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href),t=e.activeMessages;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.role==="assistant"&&i.timings){const a=await this.parseCompletionTimingData({prompt_n:i.timings.prompt_n||0,predicted_n:i.timings.predicted_n||0,predicted_per_second:i.timings.predicted_n&&i.timings.predicted_ms?i.timings.predicted_n/i.timings.predicted_ms*1e3:0,cache_n:i.timings.cache_n||0});if(a)return this.lastKnownState=a,a}}}catch(e){console.warn("Failed to restore timing data from messages:",e)}return null}}const En=new WL;function VL(r,e){let t=e;try{const i=localStorage.getItem(r);i!==null&&(t=JSON.parse(i))}catch(i){console.warn(`Failed to load ${r}:`,i)}const n=i=>{try{if(i==null){localStorage.removeItem(r);return}localStorage.setItem(r,JSON.stringify(i))}catch(a){console.warn(`Failed to persist ${r}:`,a)}};return{get value(){return t},set value(i){t=i,n(i)}}}class XL{#e=ue(Mr([]));get _models(){return g(this.#e)}set _models(e){I(this.#e,e,!0)}#t=ue(!1);get _loading(){return g(this.#t)}set _loading(e){I(this.#t,e,!0)}#r=ue(!1);get _updating(){return g(this.#r)}set _updating(e){I(this.#r,e,!0)}#n=ue(null);get _loadingModelId(){return g(this.#n)}set _loadingModelId(e){I(this.#n,e,!0)}#a=ue(null);get _error(){return g(this.#a)}set _error(e){I(this.#a,e,!0)}#i=ue(null);get _selectedModelId(){return g(this.#i)}set _selectedModelId(e){I(this.#i,e,!0)}#s=ue(null);get _selectedModelName(){return g(this.#s)}set _selectedModelName(e){I(this.#s,e,!0)}#o=ue(!1);get _modelLoadedOnServer(){return g(this.#o)}set _modelLoadedOnServer(e){I(this.#o,e,!0)}_persistedSelection=VL(GL,null);constructor(){}get models(){return this._models}get loading(){return this._loading}get updating(){return this._updating}get loadingModelId(){return this._loadingModelId}get error(){return this._error}get selectedModelId(){return this._selectedModelId}get selectedModelName(){return this._selectedModelName}get selectedModel(){return this._selectedModelId?this._models.find(e=>e.id===this._selectedModelId)??null:null}get modelLoadedOnServer(){return this._modelLoadedOnServer}async fetch(e=!1){if(!this._loading&&!(this._models.length>0&&!e)){this._loading=!0,this._error=null;try{const[t,n]=await Promise.allSettled([Va.list(),Va.listInstalled().catch(()=>null)]),i=new Ff;if(n.status==="fulfilled"&&n.value!==null){const l=n.value,c=Array.isArray(l)?l:l.models||[];if(!Array.isArray(c))throw console.error("Invalid response format from model API:",l),new Error("Invalid response format from model management API");for(const u of c){const h=u.name,d=u.display_name||this.toDisplayName(u.name);i.set(h,{id:h,name:d,model:u.name,description:u.description,capabilities:[],details:{quantization_level:u.quantization},meta:null})}}const a=Array.from(i.values());a.sort((l,c)=>l.name.localeCompare(c.name)),this._models=a;const s=l=>(l??"").toLowerCase().replace(/\s+/g,"").replace(/:/g,"-"),o=l=>a.find(c=>c.id===l||c.model===l||s(c.model)===s(l));if(e){if(!this._models.some(c=>c.id===this._selectedModelId)){const c=this._models.find(u=>u.model===this._selectedModelName||s(u.model)===s(this._selectedModelName??""));c?(this._selectedModelId=c.id,this._selectedModelName=c.model,this._persistedSelection.value={id:c.id,model:c.model}):(this._selectedModelId=null,this._selectedModelName=null,this._persistedSelection.value=null)}}else if(t.status==="fulfilled"&&t.value?.data?.length>0){const l=t.value.data[0]?.id,c=l?o(l):null;c?(this._selectedModelId=c.id,this._selectedModelName=c.model,this._persistedSelection.value={id:c.id,model:c.model},this._modelLoadedOnServer=!0):(this._selectedModelId=null,this._selectedModelName=null,this._persistedSelection.value=null,this._modelLoadedOnServer=!1)}else this._selectedModelId=null,this._selectedModelName=null,this._persistedSelection.value=null,this._modelLoadedOnServer=!1}catch(t){throw this._models=[],this._error=t instanceof Error?t.message:"Failed to load models",t}finally{this._loading=!1}}}async select(e){if(!e||this._updating||this._selectedModelId===e)return;const t=this._models.find(n=>n.id===e);if(!t)throw new Error("Selected model is not available");this._updating=!0,this._loadingModelId=e,this._error=null;try{const n=typeof window<"u"?(()=>{const i=localStorage.getItem("delta_model_ctx_"+t.model);if(!i)return;const a=parseInt(i,10);return Number.isNaN(a)?void 0:a})():void 0;try{const i=await Va.use(t.model,n!=null&&n>0?n:void 0),a=i.model_alias??i.model_name??i.model_path??t.model;if(this._selectedModelId=t.id,this._selectedModelName=a,this._persistedSelection.value={id:t.id,model:a},this._modelLoadedOnServer=!!i.loaded,i.loaded){if(await this.fetch(!0),i.ctx_size!=null&&i.ctx_size>0&&En.setLoadedContextTotal(i.ctx_size),typeof window<"u"&&window.location.port==="8080"){const{forceModelApi8081:s}=await $o(async()=>{const{forceModelApi8081:o}=await Promise.resolve().then(()=>N7);return{forceModelApi8081:o}},void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href);s()}}else if(typeof window<"u"){let l=0;const c=async()=>{l++;try{if((await Va.list())?.data?.length>0){if(this._modelLoadedOnServer=!0,window.location.port==="8080"){const{forceModelApi8081:h}=await $o(async()=>{const{forceModelApi8081:d}=await Promise.resolve().then(()=>N7);return{forceModelApi8081:d}},void 0,Er&&Er.tagName.toUpperCase()==="SCRIPT"&&Er.src||new URL("_app/immutable/bundle.Bspl8hCA.js",document.baseURI).href);h()}await this.fetch(!0);return}}catch{}l<30&&this._selectedModelId===t.id&&setTimeout(c,2e3)};setTimeout(c,2e3)}}catch(i){console.warn("Failed to switch model:",i);const a=i instanceof Error?i.message:String(i);this._error=a==="Failed to fetch"||i instanceof TypeError&&a.includes("fetch")?"Cannot reach the server while loading the model. Make sure Delta is running (run 'delta' in terminal). If you just selected a model, wait a few seconds and try again.":a,this._selectedModelId=t.id,this._selectedModelName=t.model,this._persistedSelection.value={id:t.id,model:t.model},this._modelLoadedOnServer=!1}}finally{this._updating=!1,this._loadingModelId=null}}toDisplayName(e){const n=e.split(/\\|\//).pop();return n&&n.trim().length>0?n:e}unload(){this._selectedModelId=null,this._selectedModelName=null,this._persistedSelection.value=null,this._modelLoadedOnServer=!1}}const Vi=new XL,P7=()=>Vi.models,KL=()=>Vi.loading,YL=()=>Vi.updating,QL=()=>Vi.loadingModelId,JL=()=>Vi.error,Mb=()=>Vi.selectedModelId,R7=()=>Vi.selectedModelName,ZL=()=>Vi.selectedModel,F7=()=>Vi.modelLoadedOnServer,eB=Vi.fetch.bind(Vi),D7=Vi.select.bind(Vi),L7=Vi.unload.bind(Vi);class ku{abortControllers=new Map;async sendMessage(e,t={},n){const{stream:i,onChunk:a,onComplete:s,onError:o,onReasoningChunk:l,onModel:c,onFirstValidChunk:u,temperature:h,max_tokens:d,dynatemp_range:f,dynatemp_exponent:p,top_k:m,top_p:y,min_p:v,xtc_probability:_,xtc_threshold:S,typ_p:A,repeat_last_n:C,repeat_penalty:k,presence_penalty:M,frequency_penalty:N,dry_multiplier:F,dry_base:z,dry_allowed_length:W,dry_penalty_last_n:V,samplers:Q,custom:K,timings_per_token:ie}=t,L=un(),J=n||"default";this.abortControllers.has(J)&&this.abortControllers.get(J)?.abort();const X=new AbortController;this.abortControllers.set(J,X);const re=e.map(fe=>{if("id"in fe&&"convId"in fe&&"timestamp"in fe){const xe=fe;return ku.convertMessageToChatServiceData(xe)}else return fe}).filter(fe=>fe.role==="system"?(typeof fe.content=="string"?fe.content:"").trim().length>0:!0),D=this.injectSystemMessage(re),ce={messages:ku.ensureAlternatingRoles(D).map(fe=>({role:fe.role,content:fe.content})),stream:i},ae=ZL()?.model??R7()??null;if(ae&&(ce.model=ae),ce.reasoning_format=L.disableReasoningFormat?"none":"auto",L.backendSampling&&(ce.backend_sampling=!0),h!==void 0&&(ce.temperature=h),d!==void 0&&(ce.max_tokens=d!==null&&d!==0?d:-1),f!==void 0&&(ce.dynatemp_range=f),p!==void 0&&(ce.dynatemp_exponent=p),m!==void 0&&(ce.top_k=m),y!==void 0&&(ce.top_p=y),v!==void 0&&(ce.min_p=v),_!==void 0&&(ce.xtc_probability=_),S!==void 0&&(ce.xtc_threshold=S),A!==void 0&&(ce.typ_p=A),C!==void 0&&(ce.repeat_last_n=C),k!==void 0&&(ce.repeat_penalty=k),M!==void 0&&(ce.presence_penalty=M),N!==void 0&&(ce.frequency_penalty=N),F!==void 0&&(ce.dry_multiplier=F),z!==void 0&&(ce.dry_base=z),W!==void 0&&(ce.dry_allowed_length=W),V!==void 0&&(ce.dry_penalty_last_n=V),Q!==void 0&&(ce.samplers=typeof Q=="string"?Q.split(";").filter(fe=>fe.trim()):Q),ie!==void 0&&(ce.timings_per_token=ie),K)try{const fe=typeof K=="string"?JSON.parse(K):K;Object.assign(ce,fe)}catch(fe){console.warn("Failed to parse custom parameters:",fe)}try{const fe=L.apiKey?.toString().trim(),xe=await fetch("./v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",...fe?{Authorization:`Bearer ${fe}`}:{}},body:JSON.stringify(ce),signal:X.signal});if(!xe.ok){const pe=await this.parseErrorResponse(xe);throw o&&o(pe),pe}if(i){await this.handleStreamResponse(xe,a,s,o,l,c,u,n,X.signal);return}else return this.handleNonStreamResponse(xe,s,o,c)}catch(fe){if(fe instanceof Error&&fe.name==="AbortError"){console.log("Chat completion request was aborted");return}let xe;throw fe instanceof Error?fe.name==="TypeError"&&fe.message.includes("fetch")?(xe=new Error("Unable to connect to server - please check if the server is running"),xe.name="NetworkError"):fe.message.includes("ECONNREFUSED")?(xe=new Error("Connection refused - server may be offline"),xe.name="NetworkError"):fe.message.includes("ETIMEDOUT")?(xe=new Error("Request timed out - the server took too long to respond"),xe.name="TimeoutError"):xe=fe:xe=new Error("Unknown error occurred while sending message"),console.error("Error in sendMessage:",fe),o&&o(xe),xe}finally{this.abortControllers.delete(J)}}async handleStreamResponse(e,t,n,i,a,s,o,l,c){const u=e.body?.getReader();if(!u)throw new Error("No response body");const h=new TextDecoder;let d="",f="",p=!1,m,y=!1,v=!1,_=!1;try{let S="";for(;!c?.aborted;){const{done:A,value:C}=await u.read();if(A||c?.aborted)break;S+=h.decode(C,{stream:!0});const k=S.split(`
`);S=k.pop()||"";for(const M of k){if(c?.aborted)break;if(M.startsWith("data: ")){const N=M.slice(6);if(N==="[DONE]"){y=!0;continue}try{const F=JSON.parse(N);!_&&F.object==="chat.completion.chunk"&&(_=!0,c?.aborted||o?.());const z=F.choices[0]?.delta?.content,W=F.choices[0]?.delta?.reasoning_content,V=F.timings,Q=F.prompt_progress,K=this.extractModelName(F);K&&!v&&(v=!0,s?.(K)),(V||Q)&&(this.updateProcessingState(V,Q,l),V&&(m=V)),z&&(p=!0,d+=z,c?.aborted||t?.(z)),W&&(p=!0,f+=W,c?.aborted||a?.(W))}catch(F){console.error("Error parsing JSON chunk:",F)}}}if(c?.aborted)break}if(c?.aborted)return;if(y){if(!p&&d.length===0)throw new Error("No response received from server. Please try again.");n?.(d,f||void 0,m)}}catch(S){const A=S instanceof Error?S:new Error("Stream error");throw i?.(A),A}finally{u.releaseLock()}}async handleNonStreamResponse(e,t,n,i){try{const a=await e.text();if(!a.trim())throw new Error("No response received from server. Please try again.");const s=JSON.parse(a),o=this.extractModelName(s);o&&i?.(o);const l=s.choices[0]?.message?.content||"",c=s.choices[0]?.message?.reasoning_content;if(c&&console.log("Full reasoning content:",c),!l.trim())throw new Error("No response received from server. Please try again.");return t?.(l,c),l}catch(a){const s=a instanceof Error?a:new Error("Parse error");throw n?.(s),s}}static convertMessageToChatServiceData(e){if(!e.extra||e.extra.length===0)return{role:e.role,content:e.content};const t=[];e.content&&t.push({type:"text",text:e.content});const n=e.extra.filter(l=>l.type==="imageFile");for(const l of n)t.push({type:"image_url",image_url:{url:l.base64Url}});const i=e.extra.filter(l=>l.type==="textFile");for(const l of i)t.push({type:"text",text:`

--- File: ${l.name} ---
${l.content}`});const a=e.extra.filter(l=>l.type==="context");for(const l of a)t.push({type:"text",text:`

--- File: ${l.name} ---
${l.content}`});const s=e.extra.filter(l=>l.type==="audioFile");for(const l of s)t.push({type:"input_audio",input_audio:{data:l.base64Data,format:l.mimeType.includes("wav")?"wav":"mp3"}});const o=e.extra.filter(l=>l.type==="pdfFile");for(const l of o)if(l.processedAsImages&&l.images)for(let c=0;c<l.images.length;c++)t.push({type:"image_url",image_url:{url:l.images[c]}});else t.push({type:"text",text:`

--- PDF File: ${l.name} ---
${l.content}`});return{role:e.role,content:t}}static async getServerProps(){const t=un().apiKey?.toString().trim(),n={"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}};try{const i=await fetch("./props",{headers:n});if(i.ok)return await i.json();if(i.status===404){const a=await fetch(`${us()}/api/props`,{headers:n});if(a.ok)return await a.json()}throw new Error(`Failed to fetch server props: ${i.status}`)}catch(i){throw console.error("Error fetching server props:",i),i}}abort(e){if(e){const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))}else{for(const t of this.abortControllers.values())t.abort();this.abortControllers.clear()}}injectSystemMessage(e){const n=un().systemMessage?.toString().trim();if(!n)return e;if(e.length>0&&e[0].role==="system"){if(e[0].content!==n){const a=[...e];return a[0]={role:"system",content:n},a}return e}return[{role:"system",content:n},...e]}static ensureAlternatingRoles(e){if(e.length<=1)return e;const t=[];let n=0;for(e[0].role==="system"&&(t.push(e[0]),n=1);n<e.length;){const i=e[n];if(i.role==="system"){n++;continue}const a=t[t.length-1];a&&a.role===i.role?a.content=ku.mergeContent(a.content,i.content):t.push({role:i.role,content:i.content}),n++}return t}static mergeContent(e,t){const n=s=>typeof s=="string"?s.trim()?[{type:"text",text:s}]:[]:s,i=n(e),a=n(t);return i.length===0?t:a.length===0?e:[...i,{type:"text",text:`

`},...a]}async parseErrorResponse(e){try{const t=await e.text(),i=JSON.parse(t).error?.message||"Unknown server error",a=new Error(i);return a.name=e.status===400?"ServerError":"HttpError",a}catch{const t=new Error(`Server error (${e.status}): ${e.statusText}`);return t.name="HttpError",t}}extractModelName(e){const t=c=>typeof c=="object"&&c!==null?c:void 0,n=c=>typeof c=="string"&&c.trim()?c.trim():void 0,i=t(e);if(!i)return;const a=n(i.model);if(a)return a;const s=Array.isArray(i.choices)?t(i.choices[0]):void 0;if(!s)return;const o=n(t(s.delta)?.model);if(o)return o;const l=n(t(s.message)?.model);if(l)return l}updateProcessingState(e,t,n){const i=e?.predicted_ms&&e?.predicted_n?e.predicted_n/e.predicted_ms*1e3:0;En.updateFromTimingData({prompt_n:e?.prompt_n||0,predicted_n:e?.predicted_n||0,predicted_per_second:i,predicted_ms:e?.predicted_ms||0,cache_n:e?.cache_n||0,prompt_progress:t},n).catch(a=>{console.warn("Failed to update processing state:",a)})}}const Ib=new ku;class tB{constructor(){const e=this.readCachedServerProps();e&&(this._serverProps=e)}#e=ue(null);get _serverProps(){return g(this.#e)}set _serverProps(e){I(this.#e,e,!0)}#t=ue(!1);get _loading(){return g(this.#t)}set _loading(e){I(this.#t,e,!0)}#r=ue(null);get _error(){return g(this.#r)}set _error(e){I(this.#r,e,!0)}#n=ue(null);get _serverWarning(){return g(this.#n)}set _serverWarning(e){I(this.#n,e,!0)}#a=ue(null);get _slotsEndpointAvailable(){return g(this.#a)}set _slotsEndpointAvailable(e){I(this.#a,e,!0)}fetchServerPropsPromise=null;readCachedServerProps(){try{const e=localStorage.getItem(Eb);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to read cached server props from localStorage:",e),null}}persistServerProps(e){try{e?localStorage.setItem(Eb,JSON.stringify(e)):localStorage.removeItem(Eb)}catch(t){console.warn("Failed to persist server props to localStorage:",t)}}get serverProps(){return this._serverProps}get loading(){return this._loading}get error(){return this._error}get serverWarning(){return this._serverWarning}get modelName(){return this._serverProps?.model_alias?this._serverProps.model_alias:this._serverProps?.model_path&&this._serverProps.model_path.split(/(\\|\/)/).pop()||null}get supportedModalities(){const e=[];return this._serverProps?.modalities?.audio&&e.push("audio"),this._serverProps?.modalities?.vision&&e.push("vision"),e}get supportsVision(){return this._serverProps?.modalities?.vision??!1}get supportsAudio(){return this._serverProps?.modalities?.audio??!1}get slotsEndpointAvailable(){return this._slotsEndpointAvailable}get serverDefaultParams(){return this._serverProps?.default_generation_settings?.params||null}async checkSlotsEndpointAvailability(){if(!this._serverProps){this._slotsEndpointAvailable=!1;return}if(this._serverProps.total_slots<=0){this._slotsEndpointAvailable=!1;return}try{const t=un().apiKey?.toString().trim();if((await fetch("./slots",{headers:{...t?{Authorization:`Bearer ${t}`}:{}}})).status===501){console.info("Slots endpoint not implemented - server started without --slots flag"),this._slotsEndpointAvailable=!1;return}this._slotsEndpointAvailable=!0}catch(e){console.warn("Unable to test slots endpoint availability:",e),this._slotsEndpointAvailable=!1}}async fetchServerProps(e={}){const{silent:t=!1}=e,n=t&&this._serverProps!==null;if(this.fetchServerPropsPromise)return this.fetchServerPropsPromise;n||(this._loading=!0,this._error=null,this._serverWarning=null);const i=this._serverProps!==null,a=(async()=>{try{const s=await ku.getServerProps();this._serverProps=s,this.persistServerProps(s),this._error=null,this._serverWarning=null,await this.checkSlotsEndpointAvailability()}catch(s){if(n&&i){console.warn("Silent server props refresh failed, keeping cached data:",s);return}this.handleFetchServerPropsError(s,i)}finally{n||(this._loading=!1),this.fetchServerPropsPromise=null}})();this.fetchServerPropsPromise=a,await a}handleFetchServerPropsError(e,t){const{errorMessage:n,isOfflineLikeError:i,isServerSideError:a}=this.normalizeFetchError(e);let s=null;t?(this._error=null,(i||a)&&(this._serverWarning=n),console.warn("Failed to refresh server properties, continuing with cached values:",n)):(s=this.readCachedServerProps(),s?(this._serverProps=s,this._error=null,(i||a)&&(this._serverWarning=n),console.warn("Failed to refresh server properties, using cached values from localStorage:",n)):this._error=n),console.error("Error fetching server properties:",e)}normalizeFetchError(e){let t="Failed to connect to server",n=!1,i=!1;if(e instanceof Error){const a=e.message||"";e.name==="TypeError"&&a.includes("fetch")?(t="Server is not running or unreachable",n=!0):a.includes("ECONNREFUSED")?(t="Connection refused - server may be offline",n=!0):a.includes("ENOTFOUND")?(t="Server not found - check server address",n=!0):a.includes("ETIMEDOUT")?(t="Request timed out - the server took too long to respond",n=!0):a.includes("503")?(t="Server temporarily unavailable - try again shortly",i=!0):a.includes("500")?(t="Server error - check server logs",i=!0):a.includes("404")?t="Server endpoint not found":(a.includes("403")||a.includes("401"))&&(t="Access denied")}return{errorMessage:t,isOfflineLikeError:n,isServerSideError:i}}clear(){this._serverProps=null,this._error=null,this._serverWarning=null,this._loading=!1,this._slotsEndpointAvailable=null,this.fetchServerPropsPromise=null,this.persistServerProps(null)}}const ei=new tB,rB=()=>ei.serverProps,Au=()=>ei.loading,nB=()=>ei.error,B7=()=>ei.serverWarning,iB=()=>ei.modelName,Rs=()=>ei.supportsVision,fl=()=>ei.supportsAudio;function sd(r,e,t){e in r&&(r[e]=t)}function od(r,e){return r[e]}function aB(r,e){const t={};for(const n of e){const i=od(r,n);i!==void 0&&(t[n]=i)}return t}class sB{#e=ue(Mr({...Wa}));get config(){return g(this.#e)}set config(e){I(this.#e,e,!0)}#t=ue("auto");get theme(){return g(this.#t)}set theme(e){I(this.#t,e,!0)}#r=ue(!1);get isInitialized(){return g(this.#r)}set isInitialized(e){I(this.#r,e,!0)}#n=ue(Mr(new Set));get userOverrides(){return g(this.#n)}set userOverrides(e){I(this.#n,e,!0)}getServerDefaults(){const e=ei.serverDefaultParams;return e?ul.extractServerDefaults(e):{}}constructor(){this.initialize()}initialize(){try{this.loadConfig(),this.loadTheme(),this.isInitialized=!0}catch(e){console.error("Failed to initialize settings store:",e)}}loadConfig(){try{const e=localStorage.getItem("config"),t=JSON.parse(e||"{}");this.config={...Wa,...t};const n=JSON.parse(localStorage.getItem("userOverrides")||"[]");this.userOverrides=new Set(n)}catch(e){console.warn("Failed to parse config from localStorage, using defaults:",e),this.config={...Wa},this.userOverrides=new Set}}loadTheme(){this.theme=localStorage.getItem("theme")||"auto"}updateConfig(e,t){if(this.config[e]=t,ul.canSyncParameter(e)){const i=this.getServerDefaults()[e];if(i!==void 0){const a=po(t),s=po(i);a===s?this.userOverrides.delete(e):this.userOverrides.add(e)}}this.saveConfig()}updateMultipleConfig(e){Object.assign(this.config,e);const t=this.getServerDefaults();for(const[n,i]of Object.entries(e))if(ul.canSyncParameter(n)){const a=t[n];if(a!==void 0){const s=po(i),o=po(a);s===o?this.userOverrides.delete(n):this.userOverrides.add(n)}}this.saveConfig()}saveConfig(){try{localStorage.setItem("config",JSON.stringify(this.config)),localStorage.setItem("userOverrides",JSON.stringify(Array.from(this.userOverrides)))}catch(e){console.error("Failed to save config to localStorage:",e)}}updateTheme(e){this.theme=e,this.saveTheme()}saveTheme(){try{this.theme==="auto"?localStorage.removeItem("theme"):localStorage.setItem("theme",this.theme)}catch(e){console.error("Failed to save theme to localStorage:",e)}}resetConfig(){this.config={...Wa},this.saveConfig()}resetTheme(){this.theme="auto",this.saveTheme()}resetAll(){this.resetConfig(),this.resetTheme()}getConfig(e){return this.config[e]}getAllConfig(){return{...this.config}}syncWithServerDefaults(){if(!ei.serverDefaultParams){console.warn("No server parameters available for initialization");return}const t=this.getServerDefaults();for(const[n,i]of Object.entries(t)){const a=od(this.config,n),s=po(a),o=po(i);s===o?(this.userOverrides.delete(n),sd(this.config,n,i)):this.userOverrides.has(n)||sd(this.config,n,i)}this.saveConfig(),console.log("Settings initialized with props defaults:",t),console.log("Current user overrides after sync:",Array.from(this.userOverrides))}clearAllUserOverrides(){this.userOverrides.clear(),this.saveConfig(),console.log("Cleared all user overrides")}forceSyncWithServerDefaults(){const e=this.getServerDefaults(),t=ul.getSyncableParameterKeys();for(const n of t){if(e[n]!==void 0){const i=po(e[n]);sd(this.config,n,i)}else if(n in Wa){const i=od(Wa,n);sd(this.config,n,i)}this.userOverrides.delete(n)}this.saveConfig()}getParameterInfo(e){const t=this.getServerDefaults(),n=od(this.config,e);return ul.getParameterInfo(e,n??"",t,this.userOverrides)}resetParameterToServerDefault(e){const t=this.getServerDefaults();if(t[e]!==void 0){const n=po(t[e]);this.config[e]=n}else if(e in Wa){const n=od(Wa,e);sd(this.config,e,n)}this.userOverrides.delete(e),this.saveConfig()}getParameterDiff(){const e=this.getServerDefaults();if(Object.keys(e).length===0)return{};const t=aB(this.config,ul.getSyncableParameterKeys());return ul.createParameterDiff(t,e)}}const ln=new sB,un=()=>ln.config,oB=ln.updateConfig.bind(ln),lB=ln.updateMultipleConfig.bind(ln);ln.updateTheme.bind(ln),ln.resetConfig.bind(ln),ln.resetTheme.bind(ln),ln.resetAll.bind(ln),ln.getConfig.bind(ln),ln.getAllConfig.bind(ln),ln.syncWithServerDefaults.bind(ln);const cB=ln.forceSyncWithServerDefaults.bind(ln),uB=ln.getParameterInfo.bind(ln),z7=ln.resetParameterToServerDefault.bind(ln);ln.getParameterDiff.bind(ln),ln.clearAllUserOverrides.bind(ln);class hB{mediaRecorder=null;audioChunks=[];stream=null;recordingState=!1;async startRecording(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.initializeRecorder(this.stream),this.audioChunks=[],this.mediaRecorder.start(100),this.recordingState=!0}catch(e){throw console.error("Failed to start recording:",e),new Error("Failed to access microphone. Please check permissions.")}}async stopRecording(){return new Promise((e,t)=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){t(new Error("No active recording to stop"));return}this.mediaRecorder.onstop=()=>{const n=this.mediaRecorder?.mimeType||Ni.WAV,i=new Blob(this.audioChunks,{type:n});this.cleanup(),e(i)},this.mediaRecorder.onerror=n=>{console.error("Recording error:",n),this.cleanup(),t(new Error("Recording failed"))},this.mediaRecorder.stop()})}isRecording(){return this.recordingState}cancelRecording(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.cleanup()}initializeRecorder(e){const t={};MediaRecorder.isTypeSupported(Ni.WAV)?t.mimeType=Ni.WAV:MediaRecorder.isTypeSupported(Ni.WEBM_OPUS)?t.mimeType=Ni.WEBM_OPUS:MediaRecorder.isTypeSupported(Ni.WEBM)?t.mimeType=Ni.WEBM:MediaRecorder.isTypeSupported(Ni.MP4)?t.mimeType=Ni.MP4:console.warn("No preferred audio format supported, using default"),this.mediaRecorder=new MediaRecorder(e,t),this.mediaRecorder.ondataavailable=n=>{n.data.size>0&&this.audioChunks.push(n.data)},this.mediaRecorder.onstop=()=>{this.recordingState=!1},this.mediaRecorder.onerror=n=>{console.error("MediaRecorder error:",n),this.recordingState=!1}}cleanup(){if(this.stream){for(const e of this.stream.getTracks())e.stop();this.stream=null}this.mediaRecorder=null,this.audioChunks=[],this.recordingState=!1}}async function dB(r){try{if(r.type.includes("wav"))return r;const e=await r.arrayBuffer(),t=new(window.AudioContext||window.webkitAudioContext),n=await t.decodeAudioData(e),i=fB(n);return t.close(),i}catch(e){return console.error("Failed to convert audio to WAV:",e),r}}function fB(r){const e=r.length,t=r.numberOfChannels,n=r.sampleRate,a=t*2,s=n*a,o=e*a,l=44+o,c=new ArrayBuffer(l),u=new DataView(c),h=(f,p)=>{for(let m=0;m<p.length;m++)u.setUint8(f+m,p.charCodeAt(m))};h(0,"RIFF"),u.setUint32(4,l-8,!0),h(8,"WAVE"),h(12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,t,!0),u.setUint32(24,n,!0),u.setUint32(28,s,!0),u.setUint16(32,a,!0),u.setUint16(34,16,!0),h(36,"data"),u.setUint32(40,o,!0);let d=44;for(let f=0;f<e;f++)for(let p=0;p<t;p++){const m=Math.max(-1,Math.min(1,r.getChannelData(p)[f]));u.setInt16(d,m*32767,!0),d+=2}return new Blob([c],{type:Ni.WAV})}function gB(r,e){const t=new Date().toISOString().replace(/[:.]/g,"-"),n=r.type.includes("wav")?"wav":"mp3",i=`recording-${t}.${n}`;return new File([r],i,{type:r.type,lastModified:Date.now()})}function pB(){return!!(typeof navigator<"u"&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof window<"u"&&window.MediaRecorder)}function U7(r){return r.isComposing||r.keyCode===229}var mB=$('<!> <form><!> <div class="flex-column relative min-h-[48px] items-center rounded-3xl px-5 py-3 shadow-sm transition-all focus-within:shadow-md"><!> <!></div></form> <!>',1);function j7(r,e){ye(e,!0);let t=U(e,"disabled",3,!1),n=U(e,"isLoading",3,!1),i=U(e,"showHelperText",3,!0),a=U(e,"uploadedFiles",31,()=>Mr([])),s,o=B(un),l=ue(void 0),c=ue(void 0),u=ue(!1),h=ue(""),d=B(()=>Number(g(o).pasteLongTextToFileLen)||2500),f=ue(Mr(n())),p=ue(!1),m=ue(void 0),y=ue(0),v=B(()=>!!Mb()&&F7());function _(){zg(y)}function S(re){switch(re){case an.IMAGE:return[...Object.values(no),...Object.values(ya)].join(",");case an.AUDIO:return[...Object.values(vh),...Object.values(Ni)].join(",");case an.PDF:return[...Object.values(Pf),...Object.values(tc)].join(",");case an.TEXT:return[...Object.values(zr),Ir.PLAIN].join(",");default:return""}}function A(re){e.onFileUpload?.(re)}function C(re){re?I(l,S(re),!0):I(l,void 0),setTimeout(()=>{g(c)?.click()},10)}async function k(re){if(re.key==="Enter"&&!re.shiftKey&&!U7(re)){if((g(h).trim().length>0||a().length>0)&&!g(v)){re.preventDefault(),_();return}if(re.preventDefault(),!g(h).trim()&&a().length===0||t()||n()||!g(v))return;const se=g(h).trim(),ce=[...a()];I(h,""),a([]),g(m)?.resetHeight(),await e.onSend?.(se,ce)||(I(h,se,!0),a(ce))}}function M(re){if(!re.clipboardData)return;const D=Array.from(re.clipboardData.items).filter(ce=>ce.kind==="file").map(ce=>ce.getAsFile()).filter(ce=>ce!==null);if(D.length>0){re.preventDefault(),e.onFileUpload?.(D);return}const se=re.clipboardData.getData(Ir.PLAIN);if(se.length>0&&g(d)>0&&se.length>g(d)){re.preventDefault();const ce=new File([se],"Pasted",{type:Ir.PLAIN});e.onFileUpload?.([ce])}}async function N(){if(!s||!g(p)){console.warn("Audio recording not supported");return}if(g(u))try{const re=await s.stopRecording(),D=await dB(re),se=gB(D);e.onFileUpload?.([se]),I(u,!1)}catch(re){console.error("Failed to stop recording:",re),I(u,!1)}else try{await s.startRecording(),I(u,!0)}catch(re){console.error("Failed to start recording:",re)}}function F(){e.onStop?.()}async function z(re){if(re.preventDefault(),(g(h).trim().length>0||a().length>0)&&!g(v)){_();return}if(!g(h).trim()&&a().length===0||t()||n()||!g(v))return;const se=g(h).trim(),ce=[...a()];I(h,""),a([]),g(m)?.resetHeight(),await e.onSend?.(se,ce)||(I(h,se,!0),a(ce))}_i(()=>{setTimeout(()=>g(m)?.focus(),10),I(p,pB(),!0),s=new hB}),r4(()=>{setTimeout(()=>g(m)?.focus(),10)}),Nt(()=>{g(f)&&!n()&&setTimeout(()=>g(m)?.focus(),10),I(f,n())});var W=mB(),V=P(W);Fr(Cz(V,{onFileSelect:A,get accept(){return g(l)},set accept(re){I(l,re,!0)}}),re=>I(c,re,!0),()=>g(c));var Q=te(V,2),K=G(Q);T7(K,{get onFileRemove(){return e.onFileRemove},class:"mb-3 px-5 pt-5",get uploadedFiles(){return a()},set uploadedFiles(re){a(re)}});var ie=te(K,2),L=G(ie);Fr(yB(L,{onKeydown:k,get disabled(){return t()},get value(){return g(h)},set value(re){I(h,re,!0)}}),re=>I(m,re,!0),()=>g(m));var J=te(L,2);{let re=B(()=>g(h).trim().length>0||a().length>0),D=B(()=>!g(h).trim()&&a().length===0),se=B(()=>!!g(o).showMicrophoneOnEmptyInput);yz(J,{get canSend(){return g(re)},get disabled(){return t()},get hasModel(){return g(v)},get isEmpty(){return g(D)},get isLoading(){return n()},get isRecording(){return g(u)},get recordingSupported(){return g(p)},get showMicrophoneOnEmptyInput(){return g(se)},get openModelDropdownTrigger(){return g(y)},onRequestOpenModelDropdown:_,onFileUpload:C,onMicClick:N,onStop:F})}j(ie),j(Q);var X=te(Q,2);xz(X,{get show(){return i()}}),Be(()=>er(Q,1,`${Cb} border-radius-bottom-none mx-auto max-w-[48rem] overflow-hidden rounded-3xl backdrop-blur-md ${e.class??""}`)),Bn("submit",Q,z),Bn("paste",ie,M),w(r,W),we()}function H7(r){r&&(r.style.height="1rem",r.style.height=r.scrollHeight+"px")}var bB=r=>H7(r.currentTarget),vB=$("<div><textarea></textarea></div>");function yB(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"disabled",3,!1),i=U(e,"placeholder",3,"Ask anything..."),a=U(e,"value",15,""),s;_i(()=>{s&&s.focus()});function o(){return s}function l(){s?.focus()}function c(){s&&(s.style.height="1rem")}var u=vB(),h=G(u);hf(h);let d;return h.__keydown=function(...f){e.onKeydown?.apply(this,f)},h.__input=[bB],Fr(h,f=>s=f,()=>s),j(u),Be(f=>{er(u,1,`flex-1 ${t()??""}`),d=er(h,1,"text-md max-h-32 min-h-12 w-full resize-none border-0 bg-transparent p-0 leading-6 outline-none placeholder:text-muted-foreground focus-visible:ring-0 focus-visible:ring-offset-0",null,d,f),h.disabled=n(),zt(h,"placeholder",i())},[()=>({"cursor-not-allowed":n()})]),Bn("paste",h,function(...f){e.onPaste?.apply(this,f)}),qo(h,a),w(r,u),we({getElement:o,focus:l,resetHeight:c})}Xn(["keydown","input"]);function Ob(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"sideOffset",3,4),i=qe(e,["$$slots","$$events","$$legacy","ref","sideOffset","portalProps","class"]);var a=Z(),s=P(a);he(s,()=>Zo,(o,l)=>{l(o,tt(()=>e.portalProps,{children:(c,u)=>{var h=Z(),d=P(h);{let f=B(()=>sr("z-50 max-h-(--bits-dropdown-menu-content-available-height) min-w-[8rem] origin-(--bits-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-md outline-none data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 dark:border-border/20",e.class));he(d,()=>wN,(p,m)=>{m(p,tt({"data-slot":"dropdown-menu-content",get sideOffset(){return n()},get class(){return g(f)}},()=>i,{get ref(){return t()},set ref(y){t(y)}}))})}w(c,h)},$$slots:{default:!0}}))}),w(r,a),we()}function Cu(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"variant",3,"default"),i=qe(e,["$$slots","$$events","$$legacy","ref","class","inset","variant"]);var a=Z(),s=P(a);{let o=B(()=>sr("relative flex cursor-pointer items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-highlighted:bg-accent data-highlighted:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 data-[variant=destructive]:text-destructive data-[variant=destructive]:data-highlighted:bg-destructive/10 data-[variant=destructive]:data-highlighted:text-destructive dark:data-[variant=destructive]:data-highlighted:bg-destructive/20 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground data-[variant=destructive]:*:[svg]:!text-destructive",e.class));he(s,()=>hN,(l,c)=>{c(l,tt({"data-slot":"dropdown-menu-item",get"data-inset"(){return e.inset},get"data-variant"(){return n()},get class(){return g(o)}},()=>i,{get ref(){return t()},set ref(u){t(u)}}))})}w(r,a),we()}function wB(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("-mx-1 my-1 h-px bg-border/20",e.class));he(a,()=>fN,(o,l)=>{l(o,tt({"data-slot":"dropdown-menu-separator",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}function Nb(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref"]);var i=Z(),a=P(i);he(a,()=>_N,(s,o)=>{o(s,tt({"data-slot":"dropdown-menu-trigger"},()=>n,{get ref(){return t()},set ref(l){t(l)}}))}),w(r,i),we()}const Pb=bN;function Tn(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref"]);var i=Z(),a=P(i);he(a,()=>rP,(s,o)=>{o(s,tt({"data-slot":"tooltip-trigger"},()=>n,{get ref(){return t()},set ref(l){t(l)}}))}),w(r,i),we()}var xB=$("<div></div>"),_B=$("<!> <!>",1);function Mn(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"sideOffset",3,0),i=U(e,"side",3,"top"),a=qe(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","side","children","arrowClasses"]);var s=Z(),o=P(s);he(o,()=>Zo,(l,c)=>{c(l,{children:(u,h)=>{var d=Z(),f=P(d);{let p=B(()=>sr("z-50 w-fit origin-(--bits-tooltip-content-transform-origin) animate-in rounded-md bg-primary px-3 py-1.5 text-xs text-balance text-primary-foreground fade-in-0 zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",e.class));he(f,()=>eP,(m,y)=>{y(m,tt({"data-slot":"tooltip-content",get sideOffset(){return n()},get side(){return i()},get class(){return g(p)}},()=>a,{get ref(){return t()},set ref(v){t(v)},children:(v,_)=>{var S=_B(),A=P(S);Re(A,()=>e.children??je);var C=te(A,2);{const k=(M,N)=>{let F=()=>N?.().props;var z=xB();Ht(z,W=>({class:W,...F()}),[()=>sr("z-50 size-2.5 rotate-45 rounded-[2px] bg-primary","data-[side=top]:translate-x-1/2 data-[side=top]:translate-y-[calc(-50%_+_2px)]","data-[side=bottom]:-translate-x-1/2 data-[side=bottom]:-translate-y-[calc(-50%_+_1px)]","data-[side=right]:translate-x-[calc(50%_+_2px)] data-[side=right]:translate-y-1/2","data-[side=left]:-translate-y-[calc(50%_-_3px)]",e.arrowClasses)]),w(M,z)};he(C,()=>nP,(M,N)=>{N(M,{child:k,$$slots:{child:!0}})})}w(v,S)},$$slots:{default:!0}}))})}w(u,d)},$$slots:{default:!0}})}),w(r,s),we()}const In=QN,gl=iP,Eu=100;var SB=$('<span class="sr-only">Attach files</span> <!>',1),kB=$("<p> </p>"),AB=$("<!> <!>",1),CB=$("<!> <span>Images</span>",1),EB=$("<p>Images require vision models to be processed</p>"),TB=$("<!> <!>",1),MB=$("<!> <span>Audio Files</span>",1),IB=$("<p>Audio files require audio models to be processed</p>"),OB=$("<!> <!>",1),NB=$("<!> <span>Text Files</span>",1),PB=$("<!> <span>PDF Files</span>",1),RB=$("<p>PDFs will be converted to text. Image-based PDFs may not work properly.</p>"),FB=$("<!> <!>",1),DB=$("<!> <!> <!> <!>",1),LB=$("<!> <!>",1),BB=$("<div><!></div>");function zB(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"disabled",3,!1);const i=B(()=>Rs()?"Attach files":"Text files and PDFs supported. Images, audio, and video require vision models.");function a(l){e.onFileUpload?.(l)}var s=BB(),o=G(s);he(o,()=>Pb,(l,c)=>{c(l,{children:(u,h)=>{var d=LB(),f=P(d);he(f,()=>Nb,(m,y)=>{y(m,{name:"Attach files",children:(v,_)=>{var S=Z(),A=P(S);he(A,()=>In,(C,k)=>{k(C,{get delayDuration(){return Eu},children:(M,N)=>{var F=AB(),z=P(F);he(z,()=>Tn,(V,Q)=>{Q(V,{children:(K,ie)=>{Lr(K,{class:"file-upload-button h-8 w-8 rounded-full bg-transparent p-0 text-muted-foreground hover:bg-foreground/10 hover:text-foreground",get disabled(){return n()},type:"button",children:(L,J)=>{var X=SB(),re=te(P(X),2);pR(re,{class:"h-4 w-4"}),w(L,X)},$$slots:{default:!0}})},$$slots:{default:!0}})});var W=te(z,2);he(W,()=>Mn,(V,Q)=>{Q(V,{children:(K,ie)=>{var L=kB(),J=G(L,!0);j(L),Be(()=>nt(J,g(i))),w(K,L)},$$slots:{default:!0}})}),w(M,F)},$$slots:{default:!0}})}),w(v,S)},$$slots:{default:!0}})});var p=te(f,2);he(p,()=>Ob,(m,y)=>{y(m,{align:"start",class:"w-48",children:(v,_)=>{var S=DB(),A=P(S);he(A,()=>In,(N,F)=>{F(N,{get delayDuration(){return Eu},children:(z,W)=>{var V=TB(),Q=P(V);he(Q,()=>Tn,(L,J)=>{J(L,{class:"w-full",children:(X,re)=>{var D=Z(),se=P(D);{let ce=B(()=>!Rs());he(se,()=>Cu,(q,ae)=>{ae(q,{class:"images-button flex cursor-pointer items-center gap-2",get disabled(){return g(ce)},onclick:()=>a(an.IMAGE),children:(fe,xe)=>{var pe=CB(),Ce=P(pe);Zy(Ce,{class:"h-4 w-4"}),Et(2),w(fe,pe)},$$slots:{default:!0}})})}w(X,D)},$$slots:{default:!0}})});var K=te(Q,2);{var ie=L=>{var J=Z(),X=P(J);he(X,()=>Mn,(re,D)=>{D(re,{children:(se,ce)=>{var q=EB();w(se,q)},$$slots:{default:!0}})}),w(L,J)};le(K,L=>{Rs()||L(ie)})}w(z,V)},$$slots:{default:!0}})});var C=te(A,2);he(C,()=>In,(N,F)=>{F(N,{get delayDuration(){return Eu},children:(z,W)=>{var V=OB(),Q=P(V);he(Q,()=>Tn,(L,J)=>{J(L,{class:"w-full",children:(X,re)=>{var D=Z(),se=P(D);{let ce=B(()=>!fl());he(se,()=>Cu,(q,ae)=>{ae(q,{class:"audio-button flex cursor-pointer items-center gap-2",get disabled(){return g(ce)},onclick:()=>a(an.AUDIO),children:(fe,xe)=>{var pe=MB(),Ce=P(pe);SR(Ce,{class:"h-4 w-4"}),Et(2),w(fe,pe)},$$slots:{default:!0}})})}w(X,D)},$$slots:{default:!0}})});var K=te(Q,2);{var ie=L=>{var J=Z(),X=P(J);he(X,()=>Mn,(re,D)=>{D(re,{children:(se,ce)=>{var q=IB();w(se,q)},$$slots:{default:!0}})}),w(L,J)};le(K,L=>{fl()||L(ie)})}w(z,V)},$$slots:{default:!0}})});var k=te(C,2);he(k,()=>Cu,(N,F)=>{F(N,{class:"flex cursor-pointer items-center gap-2",onclick:()=>a(an.TEXT),children:(z,W)=>{var V=NB(),Q=P(V);Lh(Q,{class:"h-4 w-4"}),Et(2),w(z,V)},$$slots:{default:!0}})});var M=te(k,2);he(M,()=>In,(N,F)=>{F(N,{get delayDuration(){return Eu},children:(z,W)=>{var V=FB(),Q=P(V);he(Q,()=>Tn,(L,J)=>{J(L,{class:"w-full",children:(X,re)=>{var D=Z(),se=P(D);he(se,()=>Cu,(ce,q)=>{q(ce,{class:"flex cursor-pointer items-center gap-2",onclick:()=>a(an.PDF),children:(ae,fe)=>{var xe=PB(),pe=P(xe);Qy(pe,{class:"h-4 w-4"}),Et(2),w(ae,xe)},$$slots:{default:!0}})}),w(X,D)},$$slots:{default:!0}})});var K=te(Q,2);{var ie=L=>{var J=Z(),X=P(J);he(X,()=>Mn,(re,D)=>{D(re,{children:(se,ce)=>{var q=RB();w(se,q)},$$slots:{default:!0}})}),w(L,J)};le(K,L=>{Rs()||L(ie)})}w(z,V)},$$slots:{default:!0}})}),w(v,S)},$$slots:{default:!0}})}),w(u,d)},$$slots:{default:!0}})}),j(s),Be(()=>er(s,1,`flex items-center gap-1 ${t()??""}`)),w(r,s),we()}var UB=$('<span class="sr-only"> </span> <!>',1),jB=$("<p>Current model does not support audio</p>"),HB=$("<!> <!>",1),qB=$("<div><!></div>");function GB(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"disabled",3,!1),i=U(e,"isLoading",3,!1),a=U(e,"isRecording",3,!1);var s=qB(),o=G(s);he(o,()=>In,(l,c)=>{c(l,{delayDuration:100,children:(u,h)=>{var d=HB(),f=P(d);he(f,()=>Tn,(y,v)=>{v(y,{children:(_,S)=>{{let A=B(()=>a()?"animate-pulse bg-red-500 text-white hover:bg-red-600":"bg-transparent text-muted-foreground hover:bg-foreground/10 hover:text-foreground"),C=B(()=>fl()?"":"cursor-not-allowed opacity-50"),k=B(()=>n()||i()||!fl());Lr(_,{get class(){return`h-8 w-8 rounded-full p-0 ${g(A)??""} ${g(C)??""}`},get disabled(){return g(k)},get onclick(){return e.onMicClick},type:"button",children:(M,N)=>{var F=UB(),z=P(F),W=G(z,!0);j(z);var V=te(z,2);lR(V,{class:"h-4 w-4"}),Be(()=>nt(W,a()?"Stop recording":"Start recording")),w(M,F)},$$slots:{default:!0}})}},$$slots:{default:!0}})});var p=te(f,2);{var m=y=>{var v=Z(),_=P(v);he(_,()=>Mn,(S,A)=>{A(S,{children:(C,k)=>{var M=jB();w(C,M)},$$slots:{default:!0}})}),w(y,v)};le(p,y=>{fl()||y(m)})}w(u,d)},$$slots:{default:!0}})}),j(s),Be(()=>er(s,1,`flex items-center gap-1 ${t()??""}`)),w(r,s),we()}function $B(r){if(typeof document>"u")return;const e=document.body;if(e)return e.appendChild(r),{destroy(){r.parentNode===e&&e.removeChild(r)}}}function WB(r,e,t,n,i,a){g(e)||g(t)||(g(n)?i():a())}async function VB(r,e){r.preventDefault(),r.stopPropagation();try{await Va.unload(),L7()}catch(t){console.error("Failed to unload model / stop server:",t),L7()}e()}var XB=$('<div class="flex items-center gap-2 text-xs text-muted-foreground"><!> Loading modelsâ¦</div>'),KB=$('<p class="text-xs text-muted-foreground">No models available.</p>'),YB=$('<span class="h-2.5 w-2.5 shrink-0 flex items-center justify-center" title="Loading model..."><!></span>'),QB=$('<span class="h-2.5 w-2.5 shrink-0 rounded-full bg-emerald-500 dark:bg-emerald-400" aria-hidden="true" title="Model loaded"></span>'),JB=r=>r.stopPropagation(),ZB=(r,e)=>I(e,""),ez=$('<button type="button" class="absolute right-2 rounded p-0.5 text-muted-foreground hover:bg-muted hover:text-foreground" aria-label="Clear search"><!></button>'),tz=(r,e,t)=>e(g(t).id),rz=$('<span class="text-xs text-muted-foreground"> </span>'),nz=$('<span class="mt-1 flex items-center gap-1.5 text-xs text-muted-foreground"><!> Loading model...</span>'),iz=$('<span class="flex h-8 w-8 shrink-0 items-center justify-center" aria-hidden="true" title="Loaded"><span class="h-2.5 w-2.5 rounded-full bg-emerald-500 dark:bg-emerald-400"></span></span> <button type="button" class="flex h-8 w-8 shrink-0 items-center justify-center rounded-md text-destructive hover:bg-destructive/15 focus:ring-2 focus:ring-ring focus:outline-none" title="Unload model" aria-label="Unload model"><!></button>',1),az=$('<span class="flex h-8 w-8 shrink-0 items-center justify-center text-muted-foreground" title="Loading model..."><!></span>'),sz=$('<span class="flex h-8 w-8 shrink-0 items-center justify-center" aria-hidden="true" title="Available"><span class="h-2 w-2 rounded-full bg-muted-foreground/50"></span></span>'),oz=$('<div><button type="button" class="flex min-w-0 flex-1 flex-col items-start gap-0.5 text-left focus:bg-muted focus:outline-none" role="option"><span class="block w-full truncate font-medium"> </span> <!> <!></button> <!></div>'),lz=$('<p class="px-3 py-4 text-center text-sm text-muted-foreground">No models match your search.</p>'),cz=$('<div role="listbox"><div class="border-b border-border/50 p-2"><div class="relative flex items-center"><!> <input type="text" class="h-9 w-full rounded-md border bg-background py-1.5 pr-8 pl-8 text-sm placeholder:text-muted-foreground focus:ring-2 focus:ring-ring focus:outline-none" placeholder="Search models..."/> <!></div></div> <div class="min-h-0 flex-1 overflow-y-auto py-1"><!> <!></div></div>'),uz=$('<div class="relative w-full"><button type="button" aria-haspopup="listbox"><!> <span class="max-w-[160px] truncate text-right font-medium"> </span> <!> <!></button> <!></div>'),hz=$('<p class="text-xs text-destructive"> </p>'),dz=$("<div><!> <!></div>");function fz(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"openTrigger",3,0),i=B(P7),a=B(KL),s=B(YL),o=B(QL),l=B(JL),c=B(Mb),u=B(F7),h=ue(!1),d=ue(!1),f=ue(""),p=null,m=ue(null),y=ue(null),v=B(()=>g(f).trim()?g(i).filter(ae=>ae.name.toLowerCase().includes(g(f).toLowerCase().trim())||(ae.description?.toLowerCase().includes(g(f).toLowerCase().trim())??!1)):g(i)),_=ue(null),S=null;_i(async()=>{try{await eB()}catch(ae){console.error("Unable to load models:",ae)}finally{I(h,!0)}});function A(ae){if(!p)return;const fe=ae.target;fe&&!p.contains(fe)&&!(g(y)&&g(y).contains(fe))&&Q()}function C(ae){ae.key==="Escape"&&Q()}function k(){g(d)&&L()}function M(){g(d)&&L()}async function N(ae){if(!ae)return;const fe=g(i).find(xe=>xe.id===ae);if(!fe){console.error("Model is no longer available");return}try{await D7(fe.id)}catch(xe){console.error("Failed to switch model:",xe)}}const F=8,z=6,W=320;async function V(){g(a)||g(s)||(I(f,""),I(d,!0),await jo(),L(),requestAnimationFrame(()=>L()))}function Q(){g(d)&&(I(d,!1),I(_,null),S=null)}async function K(ae){try{await N(ae)}finally{Q()}}let ie=ue(0);Nt(()=>{(g(a)||g(s))&&Q()}),Nt(()=>{const ae=n();ae>g(ie)&&g(i).length>0&&!g(a)&&!g(s)&&(I(ie,ae,!0),V())}),Nt(()=>{const ae=g(i).length;!g(d)||ae<=0||queueMicrotask(()=>L())});function L(){if(!g(d)||!g(m)||!g(y))return;const ae=g(m).getBoundingClientRect(),fe=window.innerWidth,xe=window.innerHeight;if(fe===0||xe===0)return;const pe=g(y).scrollWidth,Ce=g(y).scrollHeight,Te=Math.max(0,fe-F*2),Ae=Math.min(W,Te||W),be=Ae>0?Ae:Math.min(W,fe),Ee=Math.min(160,be||160);let $e=S;if($e===null){const at=Math.min(pe,be),ct=Math.max(ae.width,at,Ee);$e=Math.min(ct,be||ct),S=$e}else $e=Math.min(Math.max($e,Ee),be||$e);$e>0&&(g(y).style.width=`${$e}px`);const Ye=Math.max(0,xe-F-ae.bottom-z),He=Math.max(0,ae.top-F-z),We=Math.max(0,xe-F*2),rt=Math.max(1,We>0?We:Ce);function Qe(at){const ct=at==="bottom"?Ye:He,Se=ct>0?Math.min(ct,rt):rt,Le=Math.min(Ce,Se),et=Math.max(0,Le);let ot;if(at==="bottom"){const mt=ae.bottom+z,Gt=F,jt=xe-F-et;jt<Gt?ot=Gt:ot=Math.min(Math.max(mt,Gt),jt)}else{const mt=ae.top-z-et,Gt=F,jt=xe-F-et;jt<Gt?ot=Gt:ot=Math.max(Math.min(mt,jt),Gt)}return{placement:at,top:ot,height:et,maxHeight:Le}}const ut=Qe("bottom"),ft=Qe("top");let ht=ut;Ce>ut.maxHeight&&ft.maxHeight>ut.maxHeight&&(ht=ft),g(y).style.maxHeight=ht.maxHeight>0?`${Math.round(ht.maxHeight)}px`:"";let it=ae.right-$e;const Je=fe-F-$e;Je<F?it=F:(it>Je&&(it=Je),it<F&&(it=F)),I(_,{top:Math.round(ht.top),left:Math.round(it),width:Math.round($e),placement:ht.placement,maxHeight:Math.round(ht.maxHeight)},!0)}function J(){if(g(c))return g(i).find(ae=>ae.id===g(c))}var X=dz();Bn("resize",Kl,k),Bn("scroll",Kl,M),Bn("pointerdown",Hc,A),Bn("keydown",Hc,C);var re=G(X);{var D=ae=>{var fe=XB(),xe=G(fe);uo(xe,{class:"h-4 w-4 animate-spin"}),Et(),j(fe),w(ae,fe)},se=ae=>{var fe=Z(),xe=P(fe);{var pe=Te=>{var Ae=KB();w(Te,Ae)},Ce=Te=>{var Ae=uz();const be=B(J);var Ee=G(Ae);Ee.__click=[WB,a,s,d,Q,V];var $e=G(Ee);Vy($e,{class:"h-4 w-4 shrink-0 text-muted-foreground","aria-hidden":"true"});var Ye=te($e,2),He=G(Ye,!0);j(Ye);var We=te(Ye,2);{var rt=Je=>{var at=YB(),ct=G(at);uo(ct,{class:"h-2.5 w-2.5 animate-spin text-muted-foreground"}),j(at),w(Je,at)},Qe=Je=>{var at=Z(),ct=P(at);{var Se=Le=>{var et=QB();w(Le,et)};le(ct,Le=>{(g(be)||g(c))&&g(u)&&Le(Se)},!0)}w(Je,at)};le(We,Je=>{g(s)?Je(rt):Je(Qe,!1)})}var ut=te(We,2);{var ft=Je=>{{let at=B(()=>sr("h-4 w-4 shrink-0 text-muted-foreground transition-transform",g(d)?"rotate-180 text-foreground":""));du(Je,{get class(){return g(at)}})}};le(ut,Je=>{g(s)||Je(ft)})}j(Ee),Fr(Ee,Je=>I(m,Je),()=>g(m));var ht=te(Ee,2);{var it=Je=>{var at=cz();let ct;var Se=G(at),Le=G(Se),et=G(Le);Bh(et,{class:"absolute left-2.5 h-4 w-4 text-muted-foreground","aria-hidden":"true"});var ot=te(et,2);Vc(ot),ot.__keydown=[JB];var mt=te(ot,2);{var Gt=yt=>{var At=ez();At.__click=[ZB,f];var Vt=G(At);Ha(Vt,{class:"h-4 w-4"}),j(At),w(yt,At)};le(mt,yt=>{g(f)&&yt(Gt)})}j(Le),j(Se);var jt=te(Se,2);let Yt;var kr=G(jt);dn(kr,17,()=>g(v),yt=>yt.id,(yt,At)=>{var Vt=oz();const gt=B(()=>g(At).id===g(be)?.id),Bt=B(()=>g(At).id===g(o)&&g(s));var ar=G(Vt);ar.__click=[tz,K,At];var Cr=G(ar),de=G(Cr,!0);j(Cr);var Ve=te(Cr,2);{var dt=vt=>{var cr=rz(),tn=G(cr,!0);j(cr),Be(()=>nt(tn,g(At).description)),w(vt,cr)};le(Ve,vt=>{g(At).description&&vt(dt)})}var Pt=te(Ve,2);{var or=vt=>{var cr=nz(),tn=G(cr);uo(tn,{class:"h-3.5 w-3.5 animate-spin"}),Et(),j(cr),w(vt,cr)};le(Pt,vt=>{g(Bt)&&vt(or)})}j(ar);var Rr=te(ar,2);{var Ft=vt=>{var cr=iz(),tn=te(P(cr),2);tn.__click=[VB,Q];var Fi=G(tn);vR(Fi,{class:"h-4 w-4"}),j(tn),w(vt,cr)},Ot=vt=>{var cr=Z(),tn=P(cr);{var Fi=Un=>{var ea=az(),pi=G(ea);uo(pi,{class:"h-4 w-4 animate-spin"}),j(ea),w(Un,ea)},Za=Un=>{var ea=sz();w(Un,ea)};le(tn,Un=>{g(Bt)?Un(Fi):Un(Za,!1)},!0)}w(vt,cr)};le(Rr,vt=>{g(gt)&&g(u)&&!g(s)?vt(Ft):vt(Ot,!1)})}j(Vt),Be(vt=>{er(Vt,1,vt),zt(ar,"aria-selected",g(gt)),ar.disabled=g(Bt),zt(Cr,"title",g(At).name),nt(de,g(At).name)},[()=>di(sr("flex w-full items-center gap-2 px-3 py-2 text-left text-sm transition",g(gt)?"bg-emerald-500/10 text-foreground dark:bg-emerald-500/20":"hover:bg-muted"))]),w(yt,Vt)});var Ar=te(kr,2);{var st=yt=>{var At=lz();w(yt,At)};le(Ar,yt=>{g(v).length===0&&yt(st)})}j(jt),j(at),Fr(at,yt=>I(y,yt),()=>g(y)),sC(at,yt=>$B?.(yt)),Be((yt,At,Vt)=>{er(at,1,yt),zt(at,"data-placement",g(_)?.placement??"bottom"),ct=Ho(at,"",ct,At),Yt=Ho(jt,"",Yt,Vt)},[()=>di(sr("fixed z-[1000] flex flex-col overflow-hidden rounded-md border bg-popover shadow-lg transition-opacity",g(_)?"opacity-100":"pointer-events-none opacity-0")),()=>({top:g(_)?`${g(_).top}px`:void 0,left:g(_)?`${g(_).left}px`:void 0,width:g(_)?`${g(_).width}px`:void 0}),()=>({"max-height":g(_)&&g(_).maxHeight>0?`${g(_).maxHeight}px`:void 0})]),qo(ot,()=>g(f),yt=>I(f,yt)),w(Je,at)};le(ht,Je=>{g(d)&&Je(it)})}j(Ae),Be(Je=>{er(Ee,1,Je),zt(Ee,"aria-expanded",g(d)),Ee.disabled=g(a)||g(s),nt(He,g(be)?.name||"Select model")},[()=>di(sr("flex w-full items-center justify-end gap-2 rounded-md px-2 py-1.5 text-sm text-muted-foreground transition hover:text-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",g(d)?"text-foreground":""))]),w(Te,Ae)};le(xe,Te=>{g(i).length===0?Te(pe):Te(Ce,!1)},!0)}w(ae,fe)};le(re,ae=>{g(a)&&g(i).length===0&&!g(h)?ae(D):ae(se,!1)})}var ce=te(re,2);{var q=ae=>{var fe=hz(),xe=G(fe,!0);j(fe),Be(()=>nt(xe,g(l))),w(ae,fe)};le(ce,ae=>{g(l)&&ae(q)})}j(X),Fr(X,ae=>p=ae,()=>p),Be(ae=>er(X,1,ae),[()=>di(sr("relative z-10 flex max-w-[200px] min-w-[120px] flex-col items-end gap-1",t()))]),w(r,X),we()}Xn(["click","keydown"]);var gz=$('<span class="sr-only">Stop</span> <!>',1),pz=$('<span class="sr-only">Please select a model first</span> <!>',1),mz=$('<span class="sr-only">Send</span> <!>',1),bz=$("<!> <!>",1),vz=$("<div><!> <!> <!></div>");function yz(r,e){let t=U(e,"canSend",3,!1),n=U(e,"class",3,""),i=U(e,"disabled",3,!1),a=U(e,"hasModel",3,!0),s=U(e,"isLoading",3,!1),o=U(e,"isRecording",3,!1),l=U(e,"recordingSupported",3,!1),c=U(e,"showMicrophoneOnEmptyInput",3,!1),u=U(e,"isEmpty",3,!0),h=U(e,"openModelDropdownTrigger",3,0),d=B(()=>t()||!(u()&&c()&&l())),f=B(()=>!t()||i()||s()),p=B(()=>t()&&!a());var m=vz(),y=G(m);zB(y,{class:"mr-auto",get disabled(){return i()},get onFileUpload(){return e.onFileUpload}});var v=te(y,2);fz(v,{class:"shrink-0",get openTrigger(){return h()}});var _=te(v,2);{var S=C=>{Lr(C,{type:"button",get onclick(){return e.onStop},class:"h-8 w-8 bg-transparent p-0 hover:bg-destructive/20",children:(k,M)=>{var N=gz(),F=te(P(N),2);wR(F,{class:"h-8 w-8 fill-destructive stroke-destructive"}),w(k,N)},$$slots:{default:!0}})},A=C=>{var k=bz(),M=P(k);GB(M,{get disabled(){return i()},get isLoading(){return s()},get isRecording(){return o()},get onMicClick(){return e.onMicClick}});var N=te(M,2);{var F=z=>{var W=Z(),V=P(W);{var Q=ie=>{Lr(ie,{type:"button",class:"h-8 w-8 rounded-full p-0",title:"Please select a model first",get onclick(){return e.onRequestOpenModelDropdown},children:(L,J)=>{var X=pz(),re=te(P(X),2);Wy(re,{class:"h-12 w-12"}),w(L,X)},$$slots:{default:!0}})},K=ie=>{Lr(ie,{type:"submit",get disabled(){return g(f)},class:"h-8 w-8 rounded-full p-0",children:(L,J)=>{var X=mz(),re=te(P(X),2);Wy(re,{class:"h-12 w-12"}),w(L,X)},$$slots:{default:!0}})};le(V,ie=>{g(p)?ie(Q):ie(K,!1)})}w(z,W)};le(N,z=>{g(d)&&z(F)})}w(C,k)};le(_,C=>{s()?C(S):C(A,!1)})}j(m),Be(()=>er(m,1,`flex w-full items-center gap-2 ${n()??""}`)),w(r,m)}var wz=$('<div><p class="text-xs text-muted-foreground">Press <kbd class="rounded bg-muted px-1 py-0.5 font-mono text-xs">Enter</kbd> to send, <kbd class="rounded bg-muted px-1 py-0.5 font-mono text-xs">Shift + Enter</kbd> for new line</p></div>');function xz(r,e){let t=U(e,"class",3,""),n=U(e,"show",3,!0);var i=Z(),a=P(i);{var s=o=>{var l=wz();Be(()=>er(l,1,`mt-4 flex items-center justify-center ${t()??""}`)),w(o,l)};le(a,o=>{n()&&o(s)})}w(r,i)}function _z(r){const e=[],t=[],n={},i=Rs(),a=fl();for(const s of r){const o=wa(s.type);let l=!0,c="";switch(o){case an.IMAGE:i||(l=!1,c="Images require a vision-capable model");break;case an.AUDIO:a||(l=!1,c="Audio files require an audio-capable model");break;case an.TEXT:case an.PDF:break}l?e.push(s):(t.push(s),n[s.name]=c)}return{supportedFiles:e,unsupportedFiles:t,modalityReasons:n}}function Sz(){const r=Rs(),e=fl(),t=[],n=[];return t.push(...Object.values(zr)),n.push(...Object.values(Ir)),t.push(...Object.values(Pf)),n.push(...Object.values(tc)),r&&(t.push(...Object.values(no)),n.push(...Object.values(ya))),e&&(t.push(...Object.values(vh)),n.push(...Object.values(Ni))),[...t,...n].join(",")}function kz(r,e){const t=r.target;t.files&&e.onFileSelect?.(Array.from(t.files))}var Az=$('<input type="file"/>');function Cz(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"multiple",3,!0),i,a=B(()=>e.accept??Sz());function s(){i?.click()}var o=Az();return o.__change=[kz,e],Fr(o,l=>i=l,()=>i),Be(()=>{o.multiple=n(),zt(o,"accept",g(a)),er(o,1,`hidden ${t()??""}`)}),w(r,o),we({click:s})}Xn(["change"]);var H0={exports:{}},Ez=H0.exports,q7;function Tz(){return q7||(q7=1,function(r,e){(function(t,n){r.exports=n()})(Ez,function(){var t=function(b,x){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,R){T.__proto__=R}||function(T,R){for(var H in R)Object.prototype.hasOwnProperty.call(R,H)&&(T[H]=R[H])})(b,x)},n=function(){return(n=Object.assign||function(b){for(var x,T=1,R=arguments.length;T<R;T++)for(var H in x=arguments[T])Object.prototype.hasOwnProperty.call(x,H)&&(b[H]=x[H]);return b}).apply(this,arguments)};function i(b,x,T){for(var R,H=0,ee=x.length;H<ee;H++)!R&&H in x||((R=R||Array.prototype.slice.call(x,0,H))[H]=x[H]);return b.concat(R||Array.prototype.slice.call(x))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:XE,s=Object.keys,o=Array.isArray;function l(b,x){return typeof x!="object"||s(x).forEach(function(T){b[T]=x[T]}),b}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function h(b,x){return u.call(b,x)}function d(b,x){typeof x=="function"&&(x=x(c(b))),(typeof Reflect>"u"?s:Reflect.ownKeys)(x).forEach(function(T){p(b,T,x[T])})}var f=Object.defineProperty;function p(b,x,T,R){f(b,x,l(T&&h(T,"get")&&typeof T.get=="function"?{get:T.get,set:T.set,configurable:!0}:{value:T,configurable:!0,writable:!0},R))}function m(b){return{from:function(x){return b.prototype=Object.create(x.prototype),p(b.prototype,"constructor",b),{extend:d.bind(null,b.prototype)}}}}var y=Object.getOwnPropertyDescriptor,v=[].slice;function _(b,x,T){return v.call(b,x,T)}function S(b,x){return x(b)}function A(b){if(!b)throw new Error("Assertion Failed")}function C(b){a.setImmediate?setImmediate(b):setTimeout(b,0)}function k(b,x){if(typeof x=="string"&&h(b,x))return b[x];if(!x)return b;if(typeof x!="string"){for(var T=[],R=0,H=x.length;R<H;++R){var ee=k(b,x[R]);T.push(ee)}return T}var oe=x.indexOf(".");if(oe!==-1){var ve=b[x.substr(0,oe)];return ve==null?void 0:k(ve,x.substr(oe+1))}}function M(b,x,T){if(b&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(b)))if(typeof x!="string"&&"length"in x){A(typeof T!="string"&&"length"in T);for(var R=0,H=x.length;R<H;++R)M(b,x[R],T[R])}else{var ee,oe,ve=x.indexOf(".");ve!==-1?(ee=x.substr(0,ve),(oe=x.substr(ve+1))===""?T===void 0?o(b)&&!isNaN(parseInt(ee))?b.splice(ee,1):delete b[ee]:b[ee]=T:M(ve=!(ve=b[ee])||!h(b,ee)?b[ee]={}:ve,oe,T)):T===void 0?o(b)&&!isNaN(parseInt(x))?b.splice(x,1):delete b[x]:b[x]=T}}function N(b){var x,T={};for(x in b)h(b,x)&&(T[x]=b[x]);return T}var F=[].concat;function z(b){return F.apply([],b)}var Se="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(b){return["Int","Uint","Float"].map(function(x){return x+b+"Array"})}))).filter(function(b){return a[b]}),W=new Set(Se.map(function(b){return a[b]})),V=null;function Q(b){return V=new WeakMap,b=function x(T){if(!T||typeof T!="object")return T;var R=V.get(T);if(R)return R;if(o(T)){R=[],V.set(T,R);for(var H=0,ee=T.length;H<ee;++H)R.push(x(T[H]))}else if(W.has(T.constructor))R=T;else{var oe,ve=c(T);for(oe in R=ve===Object.prototype?{}:Object.create(ve),V.set(T,R),T)h(T,oe)&&(R[oe]=x(T[oe]))}return R}(b),V=null,b}var K={}.toString;function ie(b){return K.call(b).slice(8,-1)}var L=typeof Symbol<"u"?Symbol.iterator:"@@iterator",J=typeof L=="symbol"?function(b){var x;return b!=null&&(x=b[L])&&x.apply(b)}:function(){return null};function X(b,x){return x=b.indexOf(x),0<=x&&b.splice(x,1),0<=x}var re={};function D(b){var x,T,R,H;if(arguments.length===1){if(o(b))return b.slice();if(this===re&&typeof b=="string")return[b];if(H=J(b)){for(T=[];!(R=H.next()).done;)T.push(R.value);return T}if(b==null)return[b];if(typeof(x=b.length)!="number")return[b];for(T=new Array(x);x--;)T[x]=b[x];return T}for(x=arguments.length,T=new Array(x);x--;)T[x]=arguments[x];return T}var se=typeof Symbol<"u"?function(b){return b[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rs=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ct),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function q(b,x){this.name=b,this.message=x}function ae(b,x){return b+". Errors: "+Object.keys(x).map(function(T){return x[T].toString()}).filter(function(T,R,H){return H.indexOf(T)===R}).join(`
`)}function fe(b,x,T,R){this.failures=x,this.failedKeys=R,this.successCount=T,this.message=ae(b,x)}function xe(b,x){this.name="BulkError",this.failures=Object.keys(x).map(function(T){return x[T]}),this.failuresByPos=x,this.message=ae(b,this.failures)}m(q).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(fe).from(q),m(xe).from(q);var pe=rs.reduce(function(b,x){return b[x]=x+"Error",b},{}),Ce=q,Te=rs.reduce(function(b,x){var T=x+"Error";function R(H,ee){this.name=T,H?typeof H=="string"?(this.message="".concat(H).concat(ee?`
 `+ee:""),this.inner=ee||null):typeof H=="object"&&(this.message="".concat(H.name," ").concat(H.message),this.inner=H):(this.message=ce[x]||T,this.inner=null)}return m(R).from(Ce),b[x]=R,b},{});Te.Syntax=SyntaxError,Te.Type=TypeError,Te.Range=RangeError;var Ae=ct.reduce(function(b,x){return b[x+"Error"]=Te[x],b},{}),be=rs.reduce(function(b,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(b[x+"Error"]=Te[x]),b},{});function Ee(){}function $e(b){return b}function Ye(b,x){return b==null||b===$e?x:function(T){return x(b(T))}}function He(b,x){return function(){b.apply(this,arguments),x.apply(this,arguments)}}function We(b,x){return b===Ee?x:function(){var T=b.apply(this,arguments);T!==void 0&&(arguments[0]=T);var R=this.onsuccess,H=this.onerror;this.onsuccess=null,this.onerror=null;var ee=x.apply(this,arguments);return R&&(this.onsuccess=this.onsuccess?He(R,this.onsuccess):R),H&&(this.onerror=this.onerror?He(H,this.onerror):H),ee!==void 0?ee:T}}function rt(b,x){return b===Ee?x:function(){b.apply(this,arguments);var T=this.onsuccess,R=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?He(T,this.onsuccess):T),R&&(this.onerror=this.onerror?He(R,this.onerror):R)}}function Qe(b,x){return b===Ee?x:function(T){var R=b.apply(this,arguments);l(T,R);var H=this.onsuccess,ee=this.onerror;return this.onsuccess=null,this.onerror=null,T=x.apply(this,arguments),H&&(this.onsuccess=this.onsuccess?He(H,this.onsuccess):H),ee&&(this.onerror=this.onerror?He(ee,this.onerror):ee),R===void 0?T===void 0?void 0:T:l(R,T)}}function ut(b,x){return b===Ee?x:function(){return x.apply(this,arguments)!==!1&&b.apply(this,arguments)}}function ft(b,x){return b===Ee?x:function(){var T=b.apply(this,arguments);if(T&&typeof T.then=="function"){for(var R=this,H=arguments.length,ee=new Array(H);H--;)ee[H]=arguments[H];return T.then(function(){return x.apply(R,ee)})}return x.apply(this,arguments)}}be.ModifyError=fe,be.DexieError=q,be.BulkError=xe;var ht=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function it(b){ht=b}var Je={},at=100,Se=typeof Promise>"u"?[]:function(){var b=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[b,c(b),b];var x=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[x,c(x),b]}(),ct=Se[0],rs=Se[1],Se=Se[2],rs=rs&&rs.then,Le=ct&&ct.constructor,et=!!Se,ot=function(b,x){yt.push([b,x]),Gt&&(queueMicrotask(Pt),Gt=!1)},mt=!0,Gt=!0,jt=[],Yt=[],kr=$e,Ar={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ee,pgp:!1,env:{},finalize:Ee},st=Ar,yt=[],At=0,Vt=[];function gt(b){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=st;if(typeof b!="function"){if(b!==Je)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Cr(this,this._value))}this._state=null,this._value=null,++x.ref,function T(R,H){try{H(function(ee){if(R._state===null){if(ee===R)throw new TypeError("A promise cannot be resolved with itself.");var oe=R._lib&&or();ee&&typeof ee.then=="function"?T(R,function(ve,Me){ee instanceof gt?ee._then(ve,Me):ee.then(ve,Me)}):(R._state=!0,R._value=ee,de(R)),oe&&Rr()}},Cr.bind(null,R))}catch(ee){Cr(R,ee)}}(this,b)}var Bt={get:function(){var b=st,x=Un;function T(R,H){var ee=this,oe=!b.global&&(b!==st||x!==Un),ve=oe&&!es(),Me=new gt(function(Ne,De){Ve(ee,new ar(Mc(R,b,oe,ve),Mc(H,b,oe,ve),Ne,De,b))});return this._consoleTask&&(Me._consoleTask=this._consoleTask),Me}return T.prototype=Je,T},set:function(b){p(this,"then",b&&b.prototype===Je?Bt:{get:function(){return b},set:Bt.set})}};function ar(b,x,T,R,H){this.onFulfilled=typeof b=="function"?b:null,this.onRejected=typeof x=="function"?x:null,this.resolve=T,this.reject=R,this.psd=H}function Cr(b,x){var T,R;Yt.push(x),b._state===null&&(T=b._lib&&or(),x=kr(x),b._state=!1,b._value=x,R=b,jt.some(function(H){return H._value===R._value})||jt.push(R),de(b),T&&Rr())}function de(b){var x=b._listeners;b._listeners=[];for(var T=0,R=x.length;T<R;++T)Ve(b,x[T]);var H=b._PSD;--H.ref||H.finalize(),At===0&&(++At,ot(function(){--At==0&&Ft()},[]))}function Ve(b,x){if(b._state!==null){var T=b._state?x.onFulfilled:x.onRejected;if(T===null)return(b._state?x.resolve:x.reject)(b._value);++x.psd.ref,++At,ot(dt,[T,b,x])}else b._listeners.push(x)}function dt(b,x,T){try{var R,H=x._value;!x._state&&Yt.length&&(Yt=[]),R=ht&&x._consoleTask?x._consoleTask.run(function(){return b(H)}):b(H),x._state||Yt.indexOf(H)!==-1||function(ee){for(var oe=jt.length;oe;)if(jt[--oe]._value===ee._value)return jt.splice(oe,1)}(x),T.resolve(R)}catch(ee){T.reject(ee)}finally{--At==0&&Ft(),--T.psd.ref||T.psd.finalize()}}function Pt(){Oa(Ar,function(){or()&&Rr()})}function or(){var b=mt;return Gt=mt=!1,b}function Rr(){var b,x,T;do for(;0<yt.length;)for(b=yt,yt=[],T=b.length,x=0;x<T;++x){var R=b[x];R[0].apply(null,R[1])}while(0<yt.length);Gt=mt=!0}function Ft(){var b=jt;jt=[],b.forEach(function(R){R._PSD.onunhandled.call(null,R._value,R)});for(var x=Vt.slice(0),T=x.length;T;)x[--T]()}function Ot(b){return new gt(Je,!1,b)}function vt(b,x){var T=st;return function(){var R=or(),H=st;try{return Ti(T,!0),b.apply(this,arguments)}catch(ee){x&&x(ee)}finally{Ti(H,!1),R&&Rr()}}}d(gt.prototype,{then:Bt,_then:function(b,x){Ve(this,new ar(null,null,b,x,st))},catch:function(b){if(arguments.length===1)return this.then(null,b);var x=b,T=arguments[1];return typeof x=="function"?this.then(null,function(R){return(R instanceof x?T:Ot)(R)}):this.then(null,function(R){return(R&&R.name===x?T:Ot)(R)})},finally:function(b){return this.then(function(x){return gt.resolve(b()).then(function(){return x})},function(x){return gt.resolve(b()).then(function(){return Ot(x)})})},timeout:function(b,x){var T=this;return b<1/0?new gt(function(R,H){var ee=setTimeout(function(){return H(new Te.Timeout(x))},b);T.then(R,H).finally(clearTimeout.bind(null,ee))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&p(gt.prototype,Symbol.toStringTag,"Dexie.Promise"),Ar.env=$u(),d(gt,{all:function(){var b=D.apply(null,arguments).map(Ia);return new gt(function(x,T){b.length===0&&x([]);var R=b.length;b.forEach(function(H,ee){return gt.resolve(H).then(function(oe){b[ee]=oe,--R||x(b)},T)})})},resolve:function(b){return b instanceof gt?b:b&&typeof b.then=="function"?new gt(function(x,T){b.then(x,T)}):new gt(Je,!0,b)},reject:Ot,race:function(){var b=D.apply(null,arguments).map(Ia);return new gt(function(x,T){b.map(function(R){return gt.resolve(R).then(x,T)})})},PSD:{get:function(){return st},set:function(b){return st=b}},totalEchoes:{get:function(){return Un}},newPSD:pi,usePSD:Oa,scheduler:{get:function(){return ot},set:function(b){ot=b}},rejectionMapper:{get:function(){return kr},set:function(b){kr=b}},follow:function(b,x){return new gt(function(T,R){return pi(function(H,ee){var oe=st;oe.unhandleds=[],oe.onunhandled=ee,oe.finalize=He(function(){var ve,Me=this;ve=function(){Me.unhandleds.length===0?H():ee(Me.unhandleds[0])},Vt.push(function Ne(){ve(),Vt.splice(Vt.indexOf(Ne),1)}),++At,ot(function(){--At==0&&Ft()},[])},oe.finalize),b()},x,T,R)})}}),Le&&(Le.allSettled&&p(gt,"allSettled",function(){var b=D.apply(null,arguments).map(Ia);return new gt(function(x){b.length===0&&x([]);var T=b.length,R=new Array(T);b.forEach(function(H,ee){return gt.resolve(H).then(function(oe){return R[ee]={status:"fulfilled",value:oe}},function(oe){return R[ee]={status:"rejected",reason:oe}}).then(function(){return--T||x(R)})})})}),Le.any&&typeof AggregateError<"u"&&p(gt,"any",function(){var b=D.apply(null,arguments).map(Ia);return new gt(function(x,T){b.length===0&&T(new AggregateError([]));var R=b.length,H=new Array(R);b.forEach(function(ee,oe){return gt.resolve(ee).then(function(ve){return x(ve)},function(ve){H[oe]=ve,--R||T(new AggregateError(H))})})})}),Le.withResolvers&&(gt.withResolvers=Le.withResolvers));var cr={awaits:0,echoes:0,id:0},tn=0,Fi=[],Za=0,Un=0,ea=0;function pi(b,x,T,R){var H=st,ee=Object.create(H);return ee.parent=H,ee.ref=0,ee.global=!1,ee.id=++ea,Ar.env,ee.env=et?{Promise:gt,PromiseProp:{value:gt,configurable:!0,writable:!0},all:gt.all,race:gt.race,allSettled:gt.allSettled,any:gt.any,resolve:gt.resolve,reject:gt.reject}:{},x&&l(ee,x),++H.ref,ee.finalize=function(){--this.parent.ref||this.parent.finalize()},R=Oa(ee,b,T,R),ee.ref===0&&ee.finalize(),R}function $s(){return cr.id||(cr.id=++tn),++cr.awaits,cr.echoes+=at,cr.id}function es(){return!!cr.awaits&&(--cr.awaits==0&&(cr.id=0),cr.echoes=cr.awaits*at,!0)}function Ia(b){return cr.echoes&&b&&b.constructor===Le?($s(),b.then(function(x){return es(),x},function(x){return es(),Pn(x)})):b}function Ws(){var b=Fi[Fi.length-1];Fi.pop(),Ti(b,!1)}function Ti(b,x){var T,R=st;(x?!cr.echoes||Za++&&b===st:!Za||--Za&&b===st)||queueMicrotask(x?(function(H){++Un,cr.echoes&&--cr.echoes!=0||(cr.echoes=cr.awaits=cr.id=0),Fi.push(st),Ti(H,!0)}).bind(null,b):Ws),b!==st&&(st=b,R===Ar&&(Ar.env=$u()),et&&(T=Ar.env.Promise,x=b.env,(R.global||b.global)&&(Object.defineProperty(a,"Promise",x.PromiseProp),T.all=x.all,T.race=x.race,T.resolve=x.resolve,T.reject=x.reject,x.allSettled&&(T.allSettled=x.allSettled),x.any&&(T.any=x.any))))}function $u(){var b=a.Promise;return et?{Promise:b,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:b.all,race:b.race,allSettled:b.allSettled,any:b.any,resolve:b.resolve,reject:b.reject}:{}}function Oa(b,x,T,R,H){var ee=st;try{return Ti(b,!0),x(T,R,H)}finally{Ti(ee,!1)}}function Mc(b,x,T,R){return typeof b!="function"?b:function(){var H=st;T&&$s(),Ti(x,!0);try{return b.apply(this,arguments)}finally{Ti(H,!1),R&&queueMicrotask(es)}}}function ga(b){Promise===Le&&cr.echoes===0?Za===0?b():enqueueNativeMicroTask(b):setTimeout(b,0)}(""+rs).indexOf("[native code]")===-1&&($s=es=Ee);var Pn=gt.reject,Vs="ï¿¿",gs="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eg="String expected.",Rl=[],Mo="__dbnames",Nd="readonly",_t="readwrite";function Zt(b,x){return b?x?function(){return b.apply(this,arguments)&&x.apply(this,arguments)}:b:x}var Xr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function fn(b){return typeof b!="string"||/\./.test(b)?function(x){return x}:function(x){return x[b]===void 0&&b in x&&delete(x=Q(x))[b],x}}function jn(){throw Te.Type()}function Sr(b,x){try{var T=ps(b),R=ps(x);if(T!==R)return T==="Array"?1:R==="Array"?-1:T==="binary"?1:R==="binary"?-1:T==="string"?1:R==="string"?-1:T==="Date"?1:R!=="Date"?NaN:-1;switch(T){case"number":case"Date":case"string":return x<b?1:b<x?-1:0;case"binary":return function(H,ee){for(var oe=H.length,ve=ee.length,Me=oe<ve?oe:ve,Ne=0;Ne<Me;++Ne)if(H[Ne]!==ee[Ne])return H[Ne]<ee[Ne]?-1:1;return oe===ve?0:oe<ve?-1:1}(Ic(b),Ic(x));case"Array":return function(H,ee){for(var oe=H.length,ve=ee.length,Me=oe<ve?oe:ve,Ne=0;Ne<Me;++Ne){var De=Sr(H[Ne],ee[Ne]);if(De!==0)return De}return oe===ve?0:oe<ve?-1:1}(b,x)}}catch{}return NaN}function ps(b){var x=typeof b;return x!="object"?x:ArrayBuffer.isView(b)?"binary":(b=ie(b),b==="ArrayBuffer"?"binary":b)}function Ic(b){return b instanceof Uint8Array?b:ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):new Uint8Array(b)}var Di=(rn.prototype._trans=function(b,x,T){var R=this._tx||st.trans,H=this.name,ee=ht&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function oe(Ne,De,_e){if(!_e.schema[H])throw new Te.NotFound("Table "+H+" not part of transaction");return x(_e.idbtrans,_e)}var ve=or();try{var Me=R&&R.db._novip===this.db._novip?R===st.trans?R._promise(b,oe,T):pi(function(){return R._promise(b,oe,T)},{trans:R,transless:st.transless||st}):function Ne(De,_e,Ue,Oe){if(De.idbdb&&(De._state.openComplete||st.letThrough||De._vip)){var Fe=De._createTransaction(_e,Ue,De._dbSchema);try{Fe.create(),De._state.PR1398_maxLoop=3}catch(ze){return ze.name===pe.InvalidState&&De.isOpen()&&0<--De._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),De.close({disableAutoOpen:!1}),De.open().then(function(){return Ne(De,_e,Ue,Oe)})):Pn(ze)}return Fe._promise(_e,function(ze,Pe){return pi(function(){return st.trans=Fe,Oe(ze,Pe,Fe)})}).then(function(ze){if(_e==="readwrite")try{Fe.idbtrans.commit()}catch{}return _e==="readonly"?ze:Fe._completion.then(function(){return ze})})}if(De._state.openComplete)return Pn(new Te.DatabaseClosed(De._state.dbOpenError));if(!De._state.isBeingOpened){if(!De._state.autoOpen)return Pn(new Te.DatabaseClosed);De.open().catch(Ee)}return De._state.dbReadyPromise.then(function(){return Ne(De,_e,Ue,Oe)})}(this.db,b,[this.name],oe);return ee&&(Me._consoleTask=ee,Me=Me.catch(function(Ne){return console.trace(Ne),Pn(Ne)})),Me}finally{ve&&Rr()}},rn.prototype.get=function(b,x){var T=this;return b&&b.constructor===Object?this.where(b).first(x):b==null?Pn(new Te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(R){return T.core.get({trans:R,key:b}).then(function(H){return T.hook.reading.fire(H)})}).then(x)},rn.prototype.where=function(b){if(typeof b=="string")return new this.db.WhereClause(this,b);if(o(b))return new this.db.WhereClause(this,"[".concat(b.join("+"),"]"));var x=s(b);if(x.length===1)return this.where(x[0]).equals(b[x[0]]);var T=this.schema.indexes.concat(this.schema.primKey).filter(function(ve){if(ve.compound&&x.every(function(Ne){return 0<=ve.keyPath.indexOf(Ne)})){for(var Me=0;Me<x.length;++Me)if(x.indexOf(ve.keyPath[Me])===-1)return!1;return!0}return!1}).sort(function(ve,Me){return ve.keyPath.length-Me.keyPath.length})[0];if(T&&this.db._maxKey!==Vs){var ee=T.keyPath.slice(0,x.length);return this.where(ee).equals(ee.map(function(Me){return b[Me]}))}!T&&ht&&console.warn("The query ".concat(JSON.stringify(b)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var R=this.schema.idxByName;function H(ve,Me){return Sr(ve,Me)===0}var oe=x.reduce(function(_e,Me){var Ne=_e[0],De=_e[1],_e=R[Me],Ue=b[Me];return[Ne||_e,Ne||!_e?Zt(De,_e&&_e.multi?function(Oe){return Oe=k(Oe,Me),o(Oe)&&Oe.some(function(Fe){return H(Ue,Fe)})}:function(Oe){return H(Ue,k(Oe,Me))}):De]},[null,null]),ee=oe[0],oe=oe[1];return ee?this.where(ee.name).equals(b[ee.keyPath]).filter(oe):T?this.filter(oe):this.where(x).equals("")},rn.prototype.filter=function(b){return this.toCollection().and(b)},rn.prototype.count=function(b){return this.toCollection().count(b)},rn.prototype.offset=function(b){return this.toCollection().offset(b)},rn.prototype.limit=function(b){return this.toCollection().limit(b)},rn.prototype.each=function(b){return this.toCollection().each(b)},rn.prototype.toArray=function(b){return this.toCollection().toArray(b)},rn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},rn.prototype.orderBy=function(b){return new this.db.Collection(new this.db.WhereClause(this,o(b)?"[".concat(b.join("+"),"]"):b))},rn.prototype.reverse=function(){return this.toCollection().reverse()},rn.prototype.mapToClass=function(b){var x,T=this.db,R=this.name;function H(){return x!==null&&x.apply(this,arguments)||this}(this.schema.mappedClass=b).prototype instanceof jn&&(function(Me,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Class extends value "+String(Ne)+" is not a constructor or null");function De(){this.constructor=Me}t(Me,Ne),Me.prototype=Ne===null?Object.create(Ne):(De.prototype=Ne.prototype,new De)}(H,x=b),Object.defineProperty(H.prototype,"db",{get:function(){return T},enumerable:!1,configurable:!0}),H.prototype.table=function(){return R},b=H);for(var ee=new Set,oe=b.prototype;oe;oe=c(oe))Object.getOwnPropertyNames(oe).forEach(function(Me){return ee.add(Me)});function ve(Me){if(!Me)return Me;var Ne,De=Object.create(b.prototype);for(Ne in Me)if(!ee.has(Ne))try{De[Ne]=Me[Ne]}catch{}return De}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ve,this.hook("reading",ve),b},rn.prototype.defineClass=function(){return this.mapToClass(function(b){l(this,b)})},rn.prototype.add=function(b,x){var T=this,R=this.schema.primKey,H=R.auto,ee=R.keyPath,oe=b;return ee&&H&&(oe=fn(ee)(b)),this._trans("readwrite",function(ve){return T.core.mutate({trans:ve,type:"add",keys:x!=null?[x]:null,values:[oe]})}).then(function(ve){return ve.numFailures?gt.reject(ve.failures[0]):ve.lastResult}).then(function(ve){if(ee)try{M(b,ee,ve)}catch{}return ve})},rn.prototype.update=function(b,x){return typeof b!="object"||o(b)?this.where(":id").equals(b).modify(x):(b=k(b,this.schema.primKey.keyPath),b===void 0?Pn(new Te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(b).modify(x))},rn.prototype.put=function(b,x){var T=this,R=this.schema.primKey,H=R.auto,ee=R.keyPath,oe=b;return ee&&H&&(oe=fn(ee)(b)),this._trans("readwrite",function(ve){return T.core.mutate({trans:ve,type:"put",values:[oe],keys:x!=null?[x]:null})}).then(function(ve){return ve.numFailures?gt.reject(ve.failures[0]):ve.lastResult}).then(function(ve){if(ee)try{M(b,ee,ve)}catch{}return ve})},rn.prototype.delete=function(b){var x=this;return this._trans("readwrite",function(T){return x.core.mutate({trans:T,type:"delete",keys:[b]})}).then(function(T){return T.numFailures?gt.reject(T.failures[0]):void 0})},rn.prototype.clear=function(){var b=this;return this._trans("readwrite",function(x){return b.core.mutate({trans:x,type:"deleteRange",range:Xr})}).then(function(x){return x.numFailures?gt.reject(x.failures[0]):void 0})},rn.prototype.bulkGet=function(b){var x=this;return this._trans("readonly",function(T){return x.core.getMany({keys:b,trans:T}).then(function(R){return R.map(function(H){return x.hook.reading.fire(H)})})})},rn.prototype.bulkAdd=function(b,x,T){var R=this,H=Array.isArray(x)?x:void 0,ee=(T=T||(H?void 0:x))?T.allKeys:void 0;return this._trans("readwrite",function(oe){var Ne=R.schema.primKey,ve=Ne.auto,Ne=Ne.keyPath;if(Ne&&H)throw new Te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(H&&H.length!==b.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var Me=b.length,Ne=Ne&&ve?b.map(fn(Ne)):b;return R.core.mutate({trans:oe,type:"add",keys:H,values:Ne,wantResults:ee}).then(function(Fe){var _e=Fe.numFailures,Ue=Fe.results,Oe=Fe.lastResult,Fe=Fe.failures;if(_e===0)return ee?Ue:Oe;throw new xe("".concat(R.name,".bulkAdd(): ").concat(_e," of ").concat(Me," operations failed"),Fe)})})},rn.prototype.bulkPut=function(b,x,T){var R=this,H=Array.isArray(x)?x:void 0,ee=(T=T||(H?void 0:x))?T.allKeys:void 0;return this._trans("readwrite",function(oe){var Ne=R.schema.primKey,ve=Ne.auto,Ne=Ne.keyPath;if(Ne&&H)throw new Te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(H&&H.length!==b.length)throw new Te.InvalidArgument("Arguments objects and keys must have the same length");var Me=b.length,Ne=Ne&&ve?b.map(fn(Ne)):b;return R.core.mutate({trans:oe,type:"put",keys:H,values:Ne,wantResults:ee}).then(function(Fe){var _e=Fe.numFailures,Ue=Fe.results,Oe=Fe.lastResult,Fe=Fe.failures;if(_e===0)return ee?Ue:Oe;throw new xe("".concat(R.name,".bulkPut(): ").concat(_e," of ").concat(Me," operations failed"),Fe)})})},rn.prototype.bulkUpdate=function(b){var x=this,T=this.core,R=b.map(function(oe){return oe.key}),H=b.map(function(oe){return oe.changes}),ee=[];return this._trans("readwrite",function(oe){return T.getMany({trans:oe,keys:R,cache:"clone"}).then(function(ve){var Me=[],Ne=[];b.forEach(function(_e,Ue){var Oe=_e.key,Fe=_e.changes,ze=ve[Ue];if(ze){for(var Pe=0,Xe=Object.keys(Fe);Pe<Xe.length;Pe++){var Ke=Xe[Pe],Ze=Fe[Ke];if(Ke===x.schema.primKey.keyPath){if(Sr(Ze,Oe)!==0)throw new Te.Constraint("Cannot update primary key in bulkUpdate()")}else M(ze,Ke,Ze)}ee.push(Ue),Me.push(Oe),Ne.push(ze)}});var De=Me.length;return T.mutate({trans:oe,type:"put",keys:Me,values:Ne,updates:{keys:R,changeSpecs:H}}).then(function(_e){var Ue=_e.numFailures,Oe=_e.failures;if(Ue===0)return De;for(var Fe=0,ze=Object.keys(Oe);Fe<ze.length;Fe++){var Pe,Xe=ze[Fe],Ke=ee[Number(Xe)];Ke!=null&&(Pe=Oe[Xe],delete Oe[Xe],Oe[Ke]=Pe)}throw new xe("".concat(x.name,".bulkUpdate(): ").concat(Ue," of ").concat(De," operations failed"),Oe)})})})},rn.prototype.bulkDelete=function(b){var x=this,T=b.length;return this._trans("readwrite",function(R){return x.core.mutate({trans:R,type:"delete",keys:b})}).then(function(oe){var H=oe.numFailures,ee=oe.lastResult,oe=oe.failures;if(H===0)return ee;throw new xe("".concat(x.name,".bulkDelete(): ").concat(H," of ").concat(T," operations failed"),oe)})},rn);function rn(){}function Fl(b){function x(oe,ve){if(ve){for(var Me=arguments.length,Ne=new Array(Me-1);--Me;)Ne[Me-1]=arguments[Me];return T[oe].subscribe.apply(null,Ne),b}if(typeof oe=="string")return T[oe]}var T={};x.addEventType=ee;for(var R=1,H=arguments.length;R<H;++R)ee(arguments[R]);return x;function ee(oe,ve,Me){if(typeof oe!="object"){var Ne;ve=ve||ut;var De={subscribers:[],fire:Me=Me||Ee,subscribe:function(_e){De.subscribers.indexOf(_e)===-1&&(De.subscribers.push(_e),De.fire=ve(De.fire,_e))},unsubscribe:function(_e){De.subscribers=De.subscribers.filter(function(Ue){return Ue!==_e}),De.fire=De.subscribers.reduce(ve,Me)}};return T[oe]=x[oe]=De}s(Ne=oe).forEach(function(_e){var Ue=Ne[_e];if(o(Ue))ee(_e,Ne[_e][0],Ne[_e][1]);else{if(Ue!=="asap")throw new Te.InvalidArgument("Invalid event config");var Oe=ee(_e,$e,function(){for(var Fe=arguments.length,ze=new Array(Fe);Fe--;)ze[Fe]=arguments[Fe];Oe.subscribers.forEach(function(Pe){C(function(){Pe.apply(null,ze)})})})}})}}function Dl(b,x){return m(x).from({prototype:b}),x}function Io(b,x){return!(b.filter||b.algorithm||b.or)&&(x?b.justLimit:!b.replayFilter)}function Pd(b,x){b.filter=Zt(b.filter,x)}function Rd(b,x,T){var R=b.replayFilter;b.replayFilter=R?function(){return Zt(R(),x())}:x,b.justLimit=T&&!R}function Wu(b,x){if(b.isPrimKey)return x.primaryKey;var T=x.getIndexByKeyPath(b.index);if(!T)throw new Te.Schema("KeyPath "+b.index+" on object store "+x.name+" is not indexed");return T}function tg(b,x,T){var R=Wu(b,x.schema);return x.openCursor({trans:T,values:!b.keysOnly,reverse:b.dir==="prev",unique:!!b.unique,query:{index:R,range:b.range}})}function Oo(b,x,T,R){var H=b.replayFilter?Zt(b.filter,b.replayFilter()):b.filter;if(b.or){var ee={},oe=function(ve,Me,Ne){var De,_e;H&&!H(Me,Ne,function(Ue){return Me.stop(Ue)},function(Ue){return Me.fail(Ue)})||((_e=""+(De=Me.primaryKey))=="[object ArrayBuffer]"&&(_e=""+new Uint8Array(De)),h(ee,_e)||(ee[_e]=!0,x(ve,Me,Ne)))};return Promise.all([b.or._iterate(oe,T),Fd(tg(b,R,T),b.algorithm,oe,!b.keysOnly&&b.valueMapper)])}return Fd(tg(b,R,T),Zt(b.algorithm,H),x,!b.keysOnly&&b.valueMapper)}function Fd(b,x,T,R){var H=vt(R?function(ee,oe,ve){return T(R(ee),oe,ve)}:T);return b.then(function(ee){if(ee)return ee.start(function(){var oe=function(){return ee.continue()};x&&!x(ee,function(ve){return oe=ve},function(ve){ee.stop(ve),oe=Ee},function(ve){ee.fail(ve),oe=Ee})||H(ee.value,ee,function(ve){return oe=ve}),oe()})})}var Li=(rg.prototype.execute=function(b){var x=this["@@propmod"];if(x.add!==void 0){var T=x.add;if(o(T))return i(i([],o(b)?b:[],!0),T).sort();if(typeof T=="number")return(Number(b)||0)+T;if(typeof T=="bigint")try{return BigInt(b)+T}catch{return BigInt(0)+T}throw new TypeError("Invalid term ".concat(T))}if(x.remove!==void 0){var R=x.remove;if(o(R))return o(b)?b.filter(function(H){return!R.includes(H)}).sort():[];if(typeof R=="number")return Number(b)-R;if(typeof R=="bigint")try{return BigInt(b)-R}catch{return BigInt(0)-R}throw new TypeError("Invalid subtrahend ".concat(R))}return T=(T=x.replacePrefix)===null||T===void 0?void 0:T[0],T&&typeof b=="string"&&b.startsWith(T)?x.replacePrefix[1]+b.substring(T.length):b},rg);function rg(b){this["@@propmod"]=b}var Dd=(Dt.prototype._read=function(b,x){var T=this._ctx;return T.error?T.table._trans(null,Pn.bind(null,T.error)):T.table._trans("readonly",b).then(x)},Dt.prototype._write=function(b){var x=this._ctx;return x.error?x.table._trans(null,Pn.bind(null,x.error)):x.table._trans("readwrite",b,"locked")},Dt.prototype._addAlgorithm=function(b){var x=this._ctx;x.algorithm=Zt(x.algorithm,b)},Dt.prototype._iterate=function(b,x){return Oo(this._ctx,b,x,this._ctx.table.core)},Dt.prototype.clone=function(b){var x=Object.create(this.constructor.prototype),T=Object.create(this._ctx);return b&&l(T,b),x._ctx=T,x},Dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Dt.prototype.each=function(b){var x=this._ctx;return this._read(function(T){return Oo(x,b,T,x.table.core)})},Dt.prototype.count=function(b){var x=this;return this._read(function(T){var R=x._ctx,H=R.table.core;if(Io(R,!0))return H.count({trans:T,query:{index:Wu(R,H.schema),range:R.range}}).then(function(oe){return Math.min(oe,R.limit)});var ee=0;return Oo(R,function(){return++ee,!1},T,H).then(function(){return ee})}).then(b)},Dt.prototype.sortBy=function(b,x){var T=b.split(".").reverse(),R=T[0],H=T.length-1;function ee(Me,Ne){return Ne?ee(Me[T[Ne]],Ne-1):Me[R]}var oe=this._ctx.dir==="next"?1:-1;function ve(Me,Ne){return Sr(ee(Me,H),ee(Ne,H))*oe}return this.toArray(function(Me){return Me.sort(ve)}).then(x)},Dt.prototype.toArray=function(b){var x=this;return this._read(function(T){var R=x._ctx;if(R.dir==="next"&&Io(R,!0)&&0<R.limit){var H=R.valueMapper,ee=Wu(R,R.table.core.schema);return R.table.core.query({trans:T,limit:R.limit,values:!0,query:{index:ee,range:R.range}}).then(function(ve){return ve=ve.result,H?ve.map(H):ve})}var oe=[];return Oo(R,function(ve){return oe.push(ve)},T,R.table.core).then(function(){return oe})},b)},Dt.prototype.offset=function(b){var x=this._ctx;return b<=0||(x.offset+=b,Io(x)?Rd(x,function(){var T=b;return function(R,H){return T===0||(T===1?--T:H(function(){R.advance(T),T=0}),!1)}}):Rd(x,function(){var T=b;return function(){return--T<0}})),this},Dt.prototype.limit=function(b){return this._ctx.limit=Math.min(this._ctx.limit,b),Rd(this._ctx,function(){var x=b;return function(T,R,H){return--x<=0&&R(H),0<=x}},!0),this},Dt.prototype.until=function(b,x){return Pd(this._ctx,function(T,R,H){return!b(T.value)||(R(H),x)}),this},Dt.prototype.first=function(b){return this.limit(1).toArray(function(x){return x[0]}).then(b)},Dt.prototype.last=function(b){return this.reverse().first(b)},Dt.prototype.filter=function(b){var x;return Pd(this._ctx,function(T){return b(T.value)}),(x=this._ctx).isMatch=Zt(x.isMatch,b),this},Dt.prototype.and=function(b){return this.filter(b)},Dt.prototype.or=function(b){return new this.db.WhereClause(this._ctx.table,b,this)},Dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Dt.prototype.desc=function(){return this.reverse()},Dt.prototype.eachKey=function(b){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(T,R){b(R.key,R)})},Dt.prototype.eachUniqueKey=function(b){return this._ctx.unique="unique",this.eachKey(b)},Dt.prototype.eachPrimaryKey=function(b){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(T,R){b(R.primaryKey,R)})},Dt.prototype.keys=function(b){var x=this._ctx;x.keysOnly=!x.isMatch;var T=[];return this.each(function(R,H){T.push(H.key)}).then(function(){return T}).then(b)},Dt.prototype.primaryKeys=function(b){var x=this._ctx;if(x.dir==="next"&&Io(x,!0)&&0<x.limit)return this._read(function(R){var H=Wu(x,x.table.core.schema);return x.table.core.query({trans:R,values:!1,limit:x.limit,query:{index:H,range:x.range}})}).then(function(R){return R.result}).then(b);x.keysOnly=!x.isMatch;var T=[];return this.each(function(R,H){T.push(H.primaryKey)}).then(function(){return T}).then(b)},Dt.prototype.uniqueKeys=function(b){return this._ctx.unique="unique",this.keys(b)},Dt.prototype.firstKey=function(b){return this.limit(1).keys(function(x){return x[0]}).then(b)},Dt.prototype.lastKey=function(b){return this.reverse().firstKey(b)},Dt.prototype.distinct=function(){var b=this._ctx,b=b.index&&b.table.schema.idxByName[b.index];if(!b||!b.multi)return this;var x={};return Pd(this._ctx,function(H){var R=H.primaryKey.toString(),H=h(x,R);return x[R]=!0,!H}),this},Dt.prototype.modify=function(b){var x=this,T=this._ctx;return this._write(function(R){var H,ee,oe;oe=typeof b=="function"?b:(H=s(b),ee=H.length,function(Pe){for(var Xe=!1,Ke=0;Ke<ee;++Ke){var Ze=H[Ke],lt=b[Ze],St=k(Pe,Ze);lt instanceof Li?(M(Pe,Ze,lt.execute(St)),Xe=!0):St!==lt&&(M(Pe,Ze,lt),Xe=!0)}return Xe});var ve=T.table.core,_e=ve.schema.primaryKey,Me=_e.outbound,Ne=_e.extractKey,De=200,_e=x.db._options.modifyChunkSize;_e&&(De=typeof _e=="object"?_e[ve.name]||_e["*"]||200:_e);function Ue(Pe,Ze){var Ke=Ze.failures,Ze=Ze.numFailures;Fe+=Pe-Ze;for(var lt=0,St=s(Ke);lt<St.length;lt++){var It=St[lt];Oe.push(Ke[It])}}var Oe=[],Fe=0,ze=[];return x.clone().primaryKeys().then(function(Pe){function Xe(Ze){var lt=Math.min(De,Pe.length-Ze);return ve.getMany({trans:R,keys:Pe.slice(Ze,Ze+lt),cache:"immutable"}).then(function(St){for(var It=[],kt=[],Ct=Me?[]:null,Rt=[],Mt=0;Mt<lt;++Mt){var $t=St[Mt],Br={value:Q($t),primKey:Pe[Ze+Mt]};oe.call(Br,Br.value,Br)!==!1&&(Br.value==null?Rt.push(Pe[Ze+Mt]):Me||Sr(Ne($t),Ne(Br.value))===0?(kt.push(Br.value),Me&&Ct.push(Pe[Ze+Mt])):(Rt.push(Pe[Ze+Mt]),It.push(Br.value)))}return Promise.resolve(0<It.length&&ve.mutate({trans:R,type:"add",values:It}).then(function(Kr){for(var Yr in Kr.failures)Rt.splice(parseInt(Yr),1);Ue(It.length,Kr)})).then(function(){return(0<kt.length||Ke&&typeof b=="object")&&ve.mutate({trans:R,type:"put",keys:Ct,values:kt,criteria:Ke,changeSpec:typeof b!="function"&&b,isAdditionalChunk:0<Ze}).then(function(Kr){return Ue(kt.length,Kr)})}).then(function(){return(0<Rt.length||Ke&&b===Vu)&&ve.mutate({trans:R,type:"delete",keys:Rt,criteria:Ke,isAdditionalChunk:0<Ze}).then(function(Kr){return Ue(Rt.length,Kr)})}).then(function(){return Pe.length>Ze+lt&&Xe(Ze+De)})})}var Ke=Io(T)&&T.limit===1/0&&(typeof b!="function"||b===Vu)&&{index:T.index,range:T.range};return Xe(0).then(function(){if(0<Oe.length)throw new fe("Error modifying one or more objects",Oe,Fe,ze);return Pe.length})})})},Dt.prototype.delete=function(){var b=this._ctx,x=b.range;return Io(b)&&(b.isPrimKey||x.type===3)?this._write(function(T){var R=b.table.core.schema.primaryKey,H=x;return b.table.core.count({trans:T,query:{index:R,range:H}}).then(function(ee){return b.table.core.mutate({trans:T,type:"deleteRange",range:H}).then(function(oe){var ve=oe.failures;if(oe.lastResult,oe.results,oe=oe.numFailures,oe)throw new fe("Could not delete some values",Object.keys(ve).map(function(Me){return ve[Me]}),ee-oe);return ee-oe})})}):this.modify(Vu)},Dt);function Dt(){}var Vu=function(b,x){return x.value=null};function ui(b,x){return b<x?-1:b===x?0:1}function wn(b,x){return x<b?-1:b===x?0:1}function mi(b,x,T){return b=b instanceof rr?new b.Collection(b):b,b._ctx.error=new(T||TypeError)(x),b}function pa(b){return new b.Collection(b,function(){return Lt("")}).limit(0)}function Ll(b,x,T,R){var H,ee,oe,ve,Me,Ne,De,_e=T.length;if(!T.every(function(Fe){return typeof Fe=="string"}))return mi(b,eg);function Ue(Fe){H=Fe==="next"?function(Pe){return Pe.toUpperCase()}:function(Pe){return Pe.toLowerCase()},ee=Fe==="next"?function(Pe){return Pe.toLowerCase()}:function(Pe){return Pe.toUpperCase()},oe=Fe==="next"?ui:wn;var ze=T.map(function(Pe){return{lower:ee(Pe),upper:H(Pe)}}).sort(function(Pe,Xe){return oe(Pe.lower,Xe.lower)});ve=ze.map(function(Pe){return Pe.upper}),Me=ze.map(function(Pe){return Pe.lower}),De=(Ne=Fe)==="next"?"":R}Ue("next"),b=new b.Collection(b,function(){return ts(ve[0],Me[_e-1]+R)}),b._ondirectionchange=function(Fe){Ue(Fe)};var Oe=0;return b._addAlgorithm(function(Fe,ze,Pe){var Xe=Fe.key;if(typeof Xe!="string")return!1;var Ke=ee(Xe);if(x(Ke,Me,Oe))return!0;for(var Ze=null,lt=Oe;lt<_e;++lt){var St=function(It,kt,Ct,Rt,Mt,$t){for(var Br=Math.min(It.length,Rt.length),Kr=-1,Yr=0;Yr<Br;++Yr){var Na=kt[Yr];if(Na!==Rt[Yr])return Mt(It[Yr],Ct[Yr])<0?It.substr(0,Yr)+Ct[Yr]+Ct.substr(Yr+1):Mt(It[Yr],Rt[Yr])<0?It.substr(0,Yr)+Rt[Yr]+Ct.substr(Yr+1):0<=Kr?It.substr(0,Kr)+kt[Kr]+Ct.substr(Kr+1):null;Mt(It[Yr],Na)<0&&(Kr=Yr)}return Br<Rt.length&&$t==="next"?It+Ct.substr(It.length):Br<It.length&&$t==="prev"?It.substr(0,Ct.length):Kr<0?null:It.substr(0,Kr)+Rt[Kr]+Ct.substr(Kr+1)}(Xe,Ke,ve[lt],Me[lt],oe,Ne);St===null&&Ze===null?Oe=lt+1:(Ze===null||0<oe(Ze,St))&&(Ze=St)}return ze(Ze!==null?function(){Fe.continue(Ze+De)}:Pe),!1}),b}function ts(b,x,T,R){return{type:2,lower:b,upper:x,lowerOpen:T,upperOpen:R}}function Lt(b){return{type:1,lower:b,upper:b}}var rr=(Object.defineProperty(lr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),lr.prototype.between=function(b,x,T,R){T=T!==!1,R=R===!0;try{return 0<this._cmp(b,x)||this._cmp(b,x)===0&&(T||R)&&(!T||!R)?pa(this):new this.Collection(this,function(){return ts(b,x,!T,!R)})}catch{return mi(this,gs)}},lr.prototype.equals=function(b){return b==null?mi(this,gs):new this.Collection(this,function(){return Lt(b)})},lr.prototype.above=function(b){return b==null?mi(this,gs):new this.Collection(this,function(){return ts(b,void 0,!0)})},lr.prototype.aboveOrEqual=function(b){return b==null?mi(this,gs):new this.Collection(this,function(){return ts(b,void 0,!1)})},lr.prototype.below=function(b){return b==null?mi(this,gs):new this.Collection(this,function(){return ts(void 0,b,!1,!0)})},lr.prototype.belowOrEqual=function(b){return b==null?mi(this,gs):new this.Collection(this,function(){return ts(void 0,b)})},lr.prototype.startsWith=function(b){return typeof b!="string"?mi(this,eg):this.between(b,b+Vs,!0,!0)},lr.prototype.startsWithIgnoreCase=function(b){return b===""?this.startsWith(b):Ll(this,function(x,T){return x.indexOf(T[0])===0},[b],Vs)},lr.prototype.equalsIgnoreCase=function(b){return Ll(this,function(x,T){return x===T[0]},[b],"")},lr.prototype.anyOfIgnoreCase=function(){var b=D.apply(re,arguments);return b.length===0?pa(this):Ll(this,function(x,T){return T.indexOf(x)!==-1},b,"")},lr.prototype.startsWithAnyOfIgnoreCase=function(){var b=D.apply(re,arguments);return b.length===0?pa(this):Ll(this,function(x,T){return T.some(function(R){return x.indexOf(R)===0})},b,Vs)},lr.prototype.anyOf=function(){var b=this,x=D.apply(re,arguments),T=this._cmp;try{x.sort(T)}catch{return mi(this,gs)}if(x.length===0)return pa(this);var R=new this.Collection(this,function(){return ts(x[0],x[x.length-1])});R._ondirectionchange=function(ee){T=ee==="next"?b._ascending:b._descending,x.sort(T)};var H=0;return R._addAlgorithm(function(ee,oe,ve){for(var Me=ee.key;0<T(Me,x[H]);)if(++H===x.length)return oe(ve),!1;return T(Me,x[H])===0||(oe(function(){ee.continue(x[H])}),!1)}),R},lr.prototype.notEqual=function(b){return this.inAnyRange([[-1/0,b],[b,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},lr.prototype.noneOf=function(){var b=D.apply(re,arguments);if(b.length===0)return new this.Collection(this);try{b.sort(this._ascending)}catch{return mi(this,gs)}var x=b.reduce(function(T,R){return T?T.concat([[T[T.length-1][1],R]]):[[-1/0,R]]},null);return x.push([b[b.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},lr.prototype.inAnyRange=function(Xe,x){var T=this,R=this._cmp,H=this._ascending,ee=this._descending,oe=this._min,ve=this._max;if(Xe.length===0)return pa(this);if(!Xe.every(function(Ke){return Ke[0]!==void 0&&Ke[1]!==void 0&&H(Ke[0],Ke[1])<=0}))return mi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Te.InvalidArgument);var Me=!x||x.includeLowers!==!1,Ne=x&&x.includeUppers===!0,De,_e=H;function Ue(Ke,Ze){return _e(Ke[0],Ze[0])}try{(De=Xe.reduce(function(Ke,Ze){for(var lt=0,St=Ke.length;lt<St;++lt){var It=Ke[lt];if(R(Ze[0],It[1])<0&&0<R(Ze[1],It[0])){It[0]=oe(It[0],Ze[0]),It[1]=ve(It[1],Ze[1]);break}}return lt===St&&Ke.push(Ze),Ke},[])).sort(Ue)}catch{return mi(this,gs)}var Oe=0,Fe=Ne?function(Ke){return 0<H(Ke,De[Oe][1])}:function(Ke){return 0<=H(Ke,De[Oe][1])},ze=Me?function(Ke){return 0<ee(Ke,De[Oe][0])}:function(Ke){return 0<=ee(Ke,De[Oe][0])},Pe=Fe,Xe=new this.Collection(this,function(){return ts(De[0][0],De[De.length-1][1],!Me,!Ne)});return Xe._ondirectionchange=function(Ke){_e=Ke==="next"?(Pe=Fe,H):(Pe=ze,ee),De.sort(Ue)},Xe._addAlgorithm(function(Ke,Ze,lt){for(var St,It=Ke.key;Pe(It);)if(++Oe===De.length)return Ze(lt),!1;return!Fe(St=It)&&!ze(St)||(T._cmp(It,De[Oe][1])===0||T._cmp(It,De[Oe][0])===0||Ze(function(){_e===H?Ke.continue(De[Oe][0]):Ke.continue(De[Oe][1])}),!1)}),Xe},lr.prototype.startsWithAnyOf=function(){var b=D.apply(re,arguments);return b.every(function(x){return typeof x=="string"})?b.length===0?pa(this):this.inAnyRange(b.map(function(x){return[x,x+Vs]})):mi(this,"startsWithAnyOf() only works with strings")},lr);function lr(){}function Hr(b){return vt(function(x){return Hn(x),b(x.target.error),!1})}function Hn(b){b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault()}var ta="storagemutated",Ld="x-storagemutated-1",Xs=Fl(null,ta),gse=(Ks.prototype._lock=function(){return A(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this},Ks.prototype._unlock=function(){if(A(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var b=this._blockedFuncs.shift();try{Oa(b[1],b[0])}catch{}}return this},Ks.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},Ks.prototype.create=function(b){var x=this;if(!this.mode)return this;var T=this.db.idbdb,R=this.db._state.dbOpenError;if(A(!this.idbtrans),!b&&!T)switch(R&&R.name){case"DatabaseClosedError":throw new Te.DatabaseClosed(R);case"MissingAPIError":throw new Te.MissingAPI(R.message,R);default:throw new Te.OpenFailed(R)}if(!this.active)throw new Te.TransactionInactive;return A(this._completion._state===null),(b=this.idbtrans=b||(this.db.core||T).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(H){Hn(H),x._reject(b.error)}),b.onabort=vt(function(H){Hn(H),x.active&&x._reject(new Te.Abort(b.error)),x.active=!1,x.on("abort").fire(H)}),b.oncomplete=vt(function(){x.active=!1,x._resolve(),"mutatedParts"in b&&Xs.storagemutated.fire(b.mutatedParts)}),this},Ks.prototype._promise=function(b,x,T){var R=this;if(b==="readwrite"&&this.mode!=="readwrite")return Pn(new Te.ReadOnly("Transaction is readonly"));if(!this.active)return Pn(new Te.TransactionInactive);if(this._locked())return new gt(function(ee,oe){R._blockedFuncs.push([function(){R._promise(b,x,T).then(ee,oe)},st])});if(T)return pi(function(){var ee=new gt(function(oe,ve){R._lock();var Me=x(oe,ve,R);Me&&Me.then&&Me.then(oe,ve)});return ee.finally(function(){return R._unlock()}),ee._lib=!0,ee});var H=new gt(function(ee,oe){var ve=x(ee,oe,R);ve&&ve.then&&ve.then(ee,oe)});return H._lib=!0,H},Ks.prototype._root=function(){return this.parent?this.parent._root():this},Ks.prototype.waitFor=function(b){var x,T=this._root(),R=gt.resolve(b);T._waitingFor?T._waitingFor=T._waitingFor.then(function(){return R}):(T._waitingFor=R,T._waitingQueue=[],x=T.idbtrans.objectStore(T.storeNames[0]),function ee(){for(++T._spinCount;T._waitingQueue.length;)T._waitingQueue.shift()();T._waitingFor&&(x.get(-1/0).onsuccess=ee)}());var H=T._waitingFor;return new gt(function(ee,oe){R.then(function(ve){return T._waitingQueue.push(vt(ee.bind(null,ve)))},function(ve){return T._waitingQueue.push(vt(oe.bind(null,ve)))}).finally(function(){T._waitingFor===H&&(T._waitingFor=null)})})},Ks.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Te.Abort))},Ks.prototype.table=function(b){var x=this._memoizedTables||(this._memoizedTables={});if(h(x,b))return x[b];var T=this.schema[b];if(!T)throw new Te.NotFound("Table "+b+" not part of transaction");return T=new this.db.Table(b,T,this),T.core=this.db.core.table(b),x[b]=T},Ks);function Ks(){}function Gv(b,x,T,R,H,ee,oe){return{name:b,keyPath:x,unique:T,multi:R,auto:H,compound:ee,src:(T&&!oe?"&":"")+(R?"*":"")+(H?"++":"")+bk(x)}}function bk(b){return typeof b=="string"?b:b?"["+[].join.call(b,"+")+"]":""}function $v(b,x,T){return{name:b,primKey:x,indexes:T,mappedClass:null,idxByName:(R=function(H){return[H.name,H]},T.reduce(function(H,ee,oe){return oe=R(ee,oe),oe&&(H[oe[0]]=oe[1]),H},{}))};var R}var Bd=function(b){try{return b.only([[]]),Bd=function(){return[[]]},[[]]}catch{return Bd=function(){return Vs},Vs}};function Wv(b){return b==null?function(){}:typeof b=="string"?(x=b).split(".").length===1?function(T){return T[x]}:function(T){return k(T,x)}:function(T){return k(T,b)};var x}function vk(b){return[].slice.call(b)}var pse=0;function zd(b){return b==null?":id":typeof b=="string"?b:"[".concat(b.join("+"),"]")}function mse(b,x,Me){function R(Pe){if(Pe.type===3)return null;if(Pe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Oe=Pe.lower,Fe=Pe.upper,ze=Pe.lowerOpen,Pe=Pe.upperOpen;return Oe===void 0?Fe===void 0?null:x.upperBound(Fe,!!Pe):Fe===void 0?x.lowerBound(Oe,!!ze):x.bound(Oe,Fe,!!ze,!!Pe)}function H(Ue){var Oe,Fe=Ue.name;return{name:Fe,schema:Ue,mutate:function(ze){var Pe=ze.trans,Xe=ze.type,Ke=ze.keys,Ze=ze.values,lt=ze.range;return new Promise(function(St,It){St=vt(St);var kt=Pe.objectStore(Fe),Ct=kt.keyPath==null,Rt=Xe==="put"||Xe==="add";if(!Rt&&Xe!=="delete"&&Xe!=="deleteRange")throw new Error("Invalid operation type: "+Xe);var Mt,$t=(Ke||Ze||{length:1}).length;if(Ke&&Ze&&Ke.length!==Ze.length)throw new Error("Given keys array must have same length as given values array.");if($t===0)return St({numFailures:0,failures:{},results:[],lastResult:void 0});function Br(ra){++Na,Hn(ra)}var Kr=[],Yr=[],Na=0;if(Xe==="deleteRange"){if(lt.type===4)return St({numFailures:Na,failures:Yr,results:[],lastResult:void 0});lt.type===3?Kr.push(Mt=kt.clear()):Kr.push(Mt=kt.delete(R(lt)))}else{var Ct=Rt?Ct?[Ze,Ke]:[Ze,null]:[Ke,null],Dr=Ct[0],zi=Ct[1];if(Rt)for(var Ui=0;Ui<$t;++Ui)Kr.push(Mt=zi&&zi[Ui]!==void 0?kt[Xe](Dr[Ui],zi[Ui]):kt[Xe](Dr[Ui])),Mt.onerror=Br;else for(Ui=0;Ui<$t;++Ui)Kr.push(Mt=kt[Xe](Dr[Ui])),Mt.onerror=Br}function pg(ra){ra=ra.target.result,Kr.forEach(function(Pc,u5){return Pc.error!=null&&(Yr[u5]=Pc.error)}),St({numFailures:Na,failures:Yr,results:Xe==="delete"?Ke:Kr.map(function(Pc){return Pc.result}),lastResult:ra})}Mt.onerror=function(ra){Br(ra),pg(ra)},Mt.onsuccess=pg})},getMany:function(ze){var Pe=ze.trans,Xe=ze.keys;return new Promise(function(Ke,Ze){Ke=vt(Ke);for(var lt,St=Pe.objectStore(Fe),It=Xe.length,kt=new Array(It),Ct=0,Rt=0,Mt=function(Kr){Kr=Kr.target,kt[Kr._pos]=Kr.result,++Rt===Ct&&Ke(kt)},$t=Hr(Ze),Br=0;Br<It;++Br)Xe[Br]!=null&&((lt=St.get(Xe[Br]))._pos=Br,lt.onsuccess=Mt,lt.onerror=$t,++Ct);Ct===0&&Ke(kt)})},get:function(ze){var Pe=ze.trans,Xe=ze.key;return new Promise(function(Ke,Ze){Ke=vt(Ke);var lt=Pe.objectStore(Fe).get(Xe);lt.onsuccess=function(St){return Ke(St.target.result)},lt.onerror=Hr(Ze)})},query:(Oe=Ne,function(ze){return new Promise(function(Pe,Xe){Pe=vt(Pe);var Ke,Ze,lt,Ct=ze.trans,St=ze.values,It=ze.limit,Mt=ze.query,kt=It===1/0?void 0:It,Rt=Mt.index,Mt=Mt.range,Ct=Ct.objectStore(Fe),Rt=Rt.isPrimaryKey?Ct:Ct.index(Rt.name),Mt=R(Mt);if(It===0)return Pe({result:[]});Oe?((kt=St?Rt.getAll(Mt,kt):Rt.getAllKeys(Mt,kt)).onsuccess=function($t){return Pe({result:$t.target.result})},kt.onerror=Hr(Xe)):(Ke=0,Ze=!St&&"openKeyCursor"in Rt?Rt.openKeyCursor(Mt):Rt.openCursor(Mt),lt=[],Ze.onsuccess=function($t){var Br=Ze.result;return Br?(lt.push(St?Br.value:Br.primaryKey),++Ke===It?Pe({result:lt}):void Br.continue()):Pe({result:lt})},Ze.onerror=Hr(Xe))})}),openCursor:function(ze){var Pe=ze.trans,Xe=ze.values,Ke=ze.query,Ze=ze.reverse,lt=ze.unique;return new Promise(function(St,It){St=vt(St);var Rt=Ke.index,kt=Ke.range,Ct=Pe.objectStore(Fe),Ct=Rt.isPrimaryKey?Ct:Ct.index(Rt.name),Rt=Ze?lt?"prevunique":"prev":lt?"nextunique":"next",Mt=!Xe&&"openKeyCursor"in Ct?Ct.openKeyCursor(R(kt),Rt):Ct.openCursor(R(kt),Rt);Mt.onerror=Hr(It),Mt.onsuccess=vt(function($t){var Br,Kr,Yr,Na,Dr=Mt.result;Dr?(Dr.___id=++pse,Dr.done=!1,Br=Dr.continue.bind(Dr),Kr=(Kr=Dr.continuePrimaryKey)&&Kr.bind(Dr),Yr=Dr.advance.bind(Dr),Na=function(){throw new Error("Cursor not stopped")},Dr.trans=Pe,Dr.stop=Dr.continue=Dr.continuePrimaryKey=Dr.advance=function(){throw new Error("Cursor not started")},Dr.fail=vt(It),Dr.next=function(){var zi=this,Ui=1;return this.start(function(){return Ui--?zi.continue():zi.stop()}).then(function(){return zi})},Dr.start=function(zi){function Ui(){if(Mt.result)try{zi()}catch(ra){Dr.fail(ra)}else Dr.done=!0,Dr.start=function(){throw new Error("Cursor behind last entry")},Dr.stop()}var pg=new Promise(function(ra,Pc){ra=vt(ra),Mt.onerror=Hr(Pc),Dr.fail=Pc,Dr.stop=function(u5){Dr.stop=Dr.continue=Dr.continuePrimaryKey=Dr.advance=Na,ra(u5)}});return Mt.onsuccess=vt(function(ra){Mt.onsuccess=Ui,Ui()}),Dr.continue=Br,Dr.continuePrimaryKey=Kr,Dr.advance=Yr,Ui(),pg},St(Dr)):St(null)},It)})},count:function(ze){var Pe=ze.query,Xe=ze.trans,Ke=Pe.index,Ze=Pe.range;return new Promise(function(lt,St){var It=Xe.objectStore(Fe),kt=Ke.isPrimaryKey?It:It.index(Ke.name),It=R(Ze),kt=It?kt.count(It):kt.count();kt.onsuccess=vt(function(Ct){return lt(Ct.target.result)}),kt.onerror=Hr(St)})}}}var ee,oe,ve,De=(oe=Me,ve=vk((ee=b).objectStoreNames),{schema:{name:ee.name,tables:ve.map(function(Ue){return oe.objectStore(Ue)}).map(function(Ue){var Oe=Ue.keyPath,Pe=Ue.autoIncrement,Fe=o(Oe),ze={},Pe={name:Ue.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Oe==null,compound:Fe,keyPath:Oe,autoIncrement:Pe,unique:!0,extractKey:Wv(Oe)},indexes:vk(Ue.indexNames).map(function(Xe){return Ue.index(Xe)}).map(function(lt){var Ke=lt.name,Ze=lt.unique,St=lt.multiEntry,lt=lt.keyPath,St={name:Ke,compound:o(lt),keyPath:lt,unique:Ze,multiEntry:St,extractKey:Wv(lt)};return ze[zd(lt)]=St}),getIndexByKeyPath:function(Xe){return ze[zd(Xe)]}};return ze[":id"]=Pe.primaryKey,Oe!=null&&(ze[zd(Oe)]=Pe.primaryKey),Pe})},hasGetAll:0<ve.length&&"getAll"in oe.objectStore(ve[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Me=De.schema,Ne=De.hasGetAll,De=Me.tables.map(H),_e={};return De.forEach(function(Ue){return _e[Ue.name]=Ue}),{stack:"dbcore",transaction:b.transaction.bind(b),table:function(Ue){if(!_e[Ue])throw new Error("Table '".concat(Ue,"' not found"));return _e[Ue]},MIN_KEY:-1/0,MAX_KEY:Bd(x),schema:Me}}function bse(b,x,T,R){var H=T.IDBKeyRange;return T.indexedDB,{dbcore:(R=mse(x,H,R),b.dbcore.reduce(function(ee,oe){return oe=oe.create,n(n({},ee),oe(ee))},R))}}function ng(b,R){var T=R.db,R=bse(b._middlewares,T,b._deps,R);b.core=R.dbcore,b.tables.forEach(function(H){var ee=H.name;b.core.schema.tables.some(function(oe){return oe.name===ee})&&(H.core=b.core.table(ee),b[ee]instanceof b.Table&&(b[ee].core=H.core))})}function ig(b,x,T,R){T.forEach(function(H){var ee=R[H];x.forEach(function(oe){var ve=function Me(Ne,De){return y(Ne,De)||(Ne=c(Ne))&&Me(Ne,De)}(oe,H);(!ve||"value"in ve&&ve.value===void 0)&&(oe===b.Transaction.prototype||oe instanceof b.Transaction?p(oe,H,{get:function(){return this.table(H)},set:function(Me){f(this,H,{value:Me,writable:!0,configurable:!0,enumerable:!0})}}):oe[H]=new b.Table(H,ee))})})}function Vv(b,x){x.forEach(function(T){for(var R in T)T[R]instanceof b.Table&&delete T[R]})}function vse(b,x){return b._cfg.version-x._cfg.version}function yse(b,x,T,R){var H=b._dbSchema;T.objectStoreNames.contains("$meta")&&!H.$meta&&(H.$meta=$v("$meta",wk("")[0],[]),b._storeNames.push("$meta"));var ee=b._createTransaction("readwrite",b._storeNames,H);ee.create(T),ee._completion.catch(R);var oe=ee._reject.bind(ee),ve=st.transless||st;pi(function(){return st.trans=ee,st.transless=ve,x!==0?(ng(b,T),Ne=x,((Me=ee).storeNames.includes("$meta")?Me.table("$meta").get("version").then(function(De){return De??Ne}):gt.resolve(Ne)).then(function(De){return Ue=De,Oe=ee,Fe=T,ze=[],De=(_e=b)._versions,Pe=_e._dbSchema=sg(0,_e.idbdb,Fe),(De=De.filter(function(Xe){return Xe._cfg.version>=Ue})).length!==0?(De.forEach(function(Xe){ze.push(function(){var Ke=Pe,Ze=Xe._cfg.dbschema;og(_e,Ke,Fe),og(_e,Ze,Fe),Pe=_e._dbSchema=Ze;var lt=Xv(Ke,Ze);lt.add.forEach(function(Rt){Kv(Fe,Rt[0],Rt[1].primKey,Rt[1].indexes)}),lt.change.forEach(function(Rt){if(Rt.recreate)throw new Te.Upgrade("Not yet support for changing primary key");var Mt=Fe.objectStore(Rt.name);Rt.add.forEach(function($t){return ag(Mt,$t)}),Rt.change.forEach(function($t){Mt.deleteIndex($t.name),ag(Mt,$t)}),Rt.del.forEach(function($t){return Mt.deleteIndex($t)})});var St=Xe._cfg.contentUpgrade;if(St&&Xe._cfg.version>Ue){ng(_e,Fe),Oe._memoizedTables={};var It=N(Ze);lt.del.forEach(function(Rt){It[Rt]=Ke[Rt]}),Vv(_e,[_e.Transaction.prototype]),ig(_e,[_e.Transaction.prototype],s(It),It),Oe.schema=It;var kt,Ct=se(St);return Ct&&$s(),lt=gt.follow(function(){var Rt;(kt=St(Oe))&&Ct&&(Rt=es.bind(null,null),kt.then(Rt,Rt))}),kt&&typeof kt.then=="function"?gt.resolve(kt):lt.then(function(){return kt})}}),ze.push(function(Ke){var Ze,lt,St=Xe._cfg.dbschema;Ze=St,lt=Ke,[].slice.call(lt.db.objectStoreNames).forEach(function(It){return Ze[It]==null&&lt.db.deleteObjectStore(It)}),Vv(_e,[_e.Transaction.prototype]),ig(_e,[_e.Transaction.prototype],_e._storeNames,_e._dbSchema),Oe.schema=_e._dbSchema}),ze.push(function(Ke){_e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_e.idbdb.version/10)===Xe._cfg.version?(_e.idbdb.deleteObjectStore("$meta"),delete _e._dbSchema.$meta,_e._storeNames=_e._storeNames.filter(function(Ze){return Ze!=="$meta"})):Ke.objectStore("$meta").put(Xe._cfg.version,"version"))})}),function Xe(){return ze.length?gt.resolve(ze.shift()(Oe.idbtrans)).then(Xe):gt.resolve()}().then(function(){yk(Pe,Fe)})):gt.resolve();var _e,Ue,Oe,Fe,ze,Pe}).catch(oe)):(s(H).forEach(function(De){Kv(T,De,H[De].primKey,H[De].indexes)}),ng(b,T),void gt.follow(function(){return b.on.populate.fire(ee)}).catch(oe));var Me,Ne})}function wse(b,x){yk(b._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var T=sg(0,b.idbdb,x);og(b,b._dbSchema,x);for(var R=0,H=Xv(T,b._dbSchema).change;R<H.length;R++){var ee=function(oe){if(oe.change.length||oe.recreate)return console.warn("Unable to patch indexes of table ".concat(oe.name," because it has changes on the type of index or primary key.")),{value:void 0};var ve=x.objectStore(oe.name);oe.add.forEach(function(Me){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(oe.name,".").concat(Me.src)),ag(ve,Me)})}(H[R]);if(typeof ee=="object")return ee.value}}function Xv(b,x){var T,R={del:[],add:[],change:[]};for(T in b)x[T]||R.del.push(T);for(T in x){var H=b[T],ee=x[T];if(H){var oe={name:T,def:ee,recreate:!1,del:[],add:[],change:[]};if(""+(H.primKey.keyPath||"")!=""+(ee.primKey.keyPath||"")||H.primKey.auto!==ee.primKey.auto)oe.recreate=!0,R.change.push(oe);else{var ve=H.idxByName,Me=ee.idxByName,Ne=void 0;for(Ne in ve)Me[Ne]||oe.del.push(Ne);for(Ne in Me){var De=ve[Ne],_e=Me[Ne];De?De.src!==_e.src&&oe.change.push(_e):oe.add.push(_e)}(0<oe.del.length||0<oe.add.length||0<oe.change.length)&&R.change.push(oe)}}else R.add.push([T,ee])}return R}function Kv(b,x,T,R){var H=b.db.createObjectStore(x,T.keyPath?{keyPath:T.keyPath,autoIncrement:T.auto}:{autoIncrement:T.auto});return R.forEach(function(ee){return ag(H,ee)}),H}function yk(b,x){s(b).forEach(function(T){x.db.objectStoreNames.contains(T)||(ht&&console.debug("Dexie: Creating missing table",T),Kv(x,T,b[T].primKey,b[T].indexes))})}function ag(b,x){b.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function sg(b,x,T){var R={};return _(x.objectStoreNames,0).forEach(function(H){for(var ee=T.objectStore(H),oe=Gv(bk(Ne=ee.keyPath),Ne||"",!0,!1,!!ee.autoIncrement,Ne&&typeof Ne!="string",!0),ve=[],Me=0;Me<ee.indexNames.length;++Me){var De=ee.index(ee.indexNames[Me]),Ne=De.keyPath,De=Gv(De.name,Ne,!!De.unique,!!De.multiEntry,!1,Ne&&typeof Ne!="string",!1);ve.push(De)}R[H]=$v(H,oe,ve)}),R}function og(b,x,T){for(var R=T.db.objectStoreNames,H=0;H<R.length;++H){var ee=R[H],oe=T.objectStore(ee);b._hasGetAll="getAll"in oe;for(var ve=0;ve<oe.indexNames.length;++ve){var Me=oe.indexNames[ve],Ne=oe.index(Me).keyPath,De=typeof Ne=="string"?Ne:"["+_(Ne).join("+")+"]";!x[ee]||(Ne=x[ee].idxByName[De])&&(Ne.name=Me,delete x[ee].idxByName[De],x[ee].idxByName[Me]=Ne)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(b._hasGetAll=!1)}function wk(b){return b.split(",").map(function(x,T){var R=(x=x.trim()).replace(/([&*]|\+\+)/g,""),H=/^\[/.test(R)?R.match(/^\[(.*)\]$/)[1].split("+"):R;return Gv(R,H||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),o(H),T===0)})}var xse=(lg.prototype._parseStoresSpec=function(b,x){s(b).forEach(function(T){if(b[T]!==null){var R=wk(b[T]),H=R.shift();if(H.unique=!0,H.multi)throw new Te.Schema("Primary key cannot be multi-valued");R.forEach(function(ee){if(ee.auto)throw new Te.Schema("Only primary key can be marked as autoIncrement (++)");if(!ee.keyPath)throw new Te.Schema("Index must have a name and cannot be an empty string")}),x[T]=$v(T,H,R)}})},lg.prototype.stores=function(T){var x=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,T):T;var T=x._versions,R={},H={};return T.forEach(function(ee){l(R,ee._cfg.storesSource),H=ee._cfg.dbschema={},ee._parseStoresSpec(R,H)}),x._dbSchema=H,Vv(x,[x._allTables,x,x.Transaction.prototype]),ig(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],s(H),H),x._storeNames=s(H),this},lg.prototype.upgrade=function(b){return this._cfg.contentUpgrade=ft(this._cfg.contentUpgrade||Ee,b),this},lg);function lg(){}function Yv(b,x){var T=b._dbNamesDB;return T||(T=b._dbNamesDB=new No(Mo,{addons:[],indexedDB:b,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),T.table("dbnames")}function Qv(b){return b&&typeof b.databases=="function"}function Jv(b){return pi(function(){return st.letThrough=!0,b()})}function Zv(b){return!("from"in b)}var Bi=function(b,x){if(!this){var T=new Bi;return b&&"d"in b&&l(T,b),T}l(this,arguments.length?{d:1,from:b,to:1<arguments.length?x:b}:{d:0})};function Ud(b,x,T){var R=Sr(x,T);if(!isNaN(R)){if(0<R)throw RangeError();if(Zv(b))return l(b,{from:x,to:T,d:1});var H=b.l,R=b.r;if(Sr(T,b.from)<0)return H?Ud(H,x,T):b.l={from:x,to:T,d:1,l:null,r:null},_k(b);if(0<Sr(x,b.to))return R?Ud(R,x,T):b.r={from:x,to:T,d:1,l:null,r:null},_k(b);Sr(x,b.from)<0&&(b.from=x,b.l=null,b.d=R?R.d+1:1),0<Sr(T,b.to)&&(b.to=T,b.r=null,b.d=b.l?b.l.d+1:1),T=!b.r,H&&!b.l&&jd(b,H),R&&T&&jd(b,R)}}function jd(b,x){Zv(x)||function T(R,Me){var ee=Me.from,oe=Me.to,ve=Me.l,Me=Me.r;Ud(R,ee,oe),ve&&T(R,ve),Me&&T(R,Me)}(b,x)}function xk(b,x){var T=cg(x),R=T.next();if(R.done)return!1;for(var H=R.value,ee=cg(b),oe=ee.next(H.from),ve=oe.value;!R.done&&!oe.done;){if(Sr(ve.from,H.to)<=0&&0<=Sr(ve.to,H.from))return!0;Sr(H.from,ve.from)<0?H=(R=T.next(ve.from)).value:ve=(oe=ee.next(H.from)).value}return!1}function cg(b){var x=Zv(b)?null:{s:0,n:b};return{next:function(T){for(var R=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,R)for(;x.n.l&&Sr(T,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!R||Sr(T,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function _k(b){var x,T,R=(((x=b.r)===null||x===void 0?void 0:x.d)||0)-(((T=b.l)===null||T===void 0?void 0:T.d)||0),H=1<R?"r":R<-1?"l":"";H&&(x=H=="r"?"l":"r",T=n({},b),R=b[H],b.from=R.from,b.to=R.to,b[H]=R[H],T[H]=R[x],(b[x]=T).d=Sk(T)),b.d=Sk(b)}function Sk(T){var x=T.r,T=T.l;return(x?T?Math.max(x.d,T.d):x.d:T?T.d:0)+1}function ug(b,x){return s(x).forEach(function(T){b[T]?jd(b[T],x[T]):b[T]=function R(H){var ee,oe,ve={};for(ee in H)h(H,ee)&&(oe=H[ee],ve[ee]=!oe||typeof oe!="object"||W.has(oe.constructor)?oe:R(oe));return ve}(x[T])}),b}function e5(b,x){return b.all||x.all||Object.keys(b).some(function(T){return x[T]&&xk(x[T],b[T])})}d(Bi.prototype,((rs={add:function(b){return jd(this,b),this},addKey:function(b){return Ud(this,b,b),this},addKeys:function(b){var x=this;return b.forEach(function(T){return Ud(x,T,T)}),this},hasKey:function(b){var x=cg(this).next(b).value;return x&&Sr(x.from,b)<=0&&0<=Sr(x.to,b)}})[L]=function(){return cg(this)},rs));var Oc={},t5={},r5=!1;function hg(b){ug(t5,b),r5||(r5=!0,setTimeout(function(){r5=!1,n5(t5,!(t5={}))},0))}function n5(b,x){x===void 0&&(x=!1);var T=new Set;if(b.all)for(var R=0,H=Object.values(Oc);R<H.length;R++)kk(oe=H[R],b,T,x);else for(var ee in b){var oe,ve=/^idb\:\/\/(.*)\/(.*)\//.exec(ee);ve&&(ee=ve[1],ve=ve[2],(oe=Oc["idb://".concat(ee,"/").concat(ve)])&&kk(oe,b,T,x))}T.forEach(function(Me){return Me()})}function kk(b,x,T,R){for(var H=[],ee=0,oe=Object.entries(b.queries.query);ee<oe.length;ee++){for(var ve=oe[ee],Me=ve[0],Ne=[],De=0,_e=ve[1];De<_e.length;De++){var Ue=_e[De];e5(x,Ue.obsSet)?Ue.subscribers.forEach(function(Pe){return T.add(Pe)}):R&&Ne.push(Ue)}R&&H.push([Me,Ne])}if(R)for(var Oe=0,Fe=H;Oe<Fe.length;Oe++){var ze=Fe[Oe],Me=ze[0],Ne=ze[1];b.queries.query[Me]=Ne}}function _se(b){var x=b._state,T=b._deps.indexedDB;if(x.isBeingOpened||b.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?Pn(x.dbOpenError):b});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var R=x.openCanceller,H=Math.round(10*b.verno),ee=!1;function oe(){if(x.openCanceller!==R)throw new Te.DatabaseClosed("db.open() was cancelled")}function ve(){return new gt(function(Ue,Oe){if(oe(),!T)throw new Te.MissingAPI;var Fe=b.name,ze=x.autoSchema||!H?T.open(Fe):T.open(Fe,H);if(!ze)throw new Te.MissingAPI;ze.onerror=Hr(Oe),ze.onblocked=vt(b._fireOnBlocked),ze.onupgradeneeded=vt(function(Pe){var Xe;De=ze.transaction,x.autoSchema&&!b._options.allowEmptyDB?(ze.onerror=Hn,De.abort(),ze.result.close(),(Xe=T.deleteDatabase(Fe)).onsuccess=Xe.onerror=vt(function(){Oe(new Te.NoSuchDatabase("Database ".concat(Fe," doesnt exist")))})):(De.onerror=Hr(Oe),Pe=Pe.oldVersion>Math.pow(2,62)?0:Pe.oldVersion,_e=Pe<1,b.idbdb=ze.result,ee&&wse(b,De),yse(b,Pe/10,De,Oe))},Oe),ze.onsuccess=vt(function(){De=null;var Pe,Xe,Ke,Ze,lt,St=b.idbdb=ze.result,It=_(St.objectStoreNames);if(0<It.length)try{var kt=St.transaction((Ze=It).length===1?Ze[0]:Ze,"readonly");if(x.autoSchema)Xe=St,Ke=kt,(Pe=b).verno=Xe.version/10,Ke=Pe._dbSchema=sg(0,Xe,Ke),Pe._storeNames=_(Xe.objectStoreNames,0),ig(Pe,[Pe._allTables],s(Ke),Ke);else if(og(b,b._dbSchema,kt),((lt=Xv(sg(0,(lt=b).idbdb,kt),lt._dbSchema)).add.length||lt.change.some(function(Ct){return Ct.add.length||Ct.change.length}))&&!ee)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),St.close(),H=St.version+1,ee=!0,Ue(ve());ng(b,kt)}catch{}Rl.push(b),St.onversionchange=vt(function(Ct){x.vcFired=!0,b.on("versionchange").fire(Ct)}),St.onclose=vt(function(Ct){b.on("close").fire(Ct)}),_e&&(lt=b._deps,kt=Fe,St=lt.indexedDB,lt=lt.IDBKeyRange,Qv(St)||kt===Mo||Yv(St,lt).put({name:kt}).catch(Ee)),Ue()},Oe)}).catch(function(Ue){switch(Ue?.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ve();break;case"VersionError":if(0<H)return H=0,ve()}return gt.reject(Ue)})}var Me,Ne=x.dbReadyResolve,De=null,_e=!1;return gt.race([R,(typeof navigator>"u"?gt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ue){function Oe(){return indexedDB.databases().finally(Ue)}Me=setInterval(Oe,100),Oe()}).finally(function(){return clearInterval(Me)}):Promise.resolve()).then(ve)]).then(function(){return oe(),x.onReadyBeingFired=[],gt.resolve(Jv(function(){return b.on.ready.fire(b.vip)})).then(function Ue(){if(0<x.onReadyBeingFired.length){var Oe=x.onReadyBeingFired.reduce(ft,Ee);return x.onReadyBeingFired=[],gt.resolve(Jv(function(){return Oe(b.vip)})).then(Ue)}})}).finally(function(){x.openCanceller===R&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(Ue){x.dbOpenError=Ue;try{De&&De.abort()}catch{}return R===x.openCanceller&&b._close(),Pn(Ue)}).finally(function(){x.openComplete=!0,Ne()}).then(function(){var Ue;return _e&&(Ue={},b.tables.forEach(function(Oe){Oe.schema.indexes.forEach(function(Fe){Fe.name&&(Ue["idb://".concat(b.name,"/").concat(Oe.name,"/").concat(Fe.name)]=new Bi(-1/0,[[[]]]))}),Ue["idb://".concat(b.name,"/").concat(Oe.name,"/")]=Ue["idb://".concat(b.name,"/").concat(Oe.name,"/:dels")]=new Bi(-1/0,[[[]]])}),Xs(ta).fire(Ue),n5(Ue,!0)),b})}function i5(b){function x(ee){return b.next(ee)}var T=H(x),R=H(function(ee){return b.throw(ee)});function H(ee){return function(Me){var ve=ee(Me),Me=ve.value;return ve.done?Me:Me&&typeof Me.then=="function"?Me.then(T,R):o(Me)?Promise.all(Me).then(T,R):T(Me)}}return H(x)()}function dg(b,x,T){for(var R=o(b)?b.slice():[b],H=0;H<T;++H)R.push(x);return R}var Sse={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(b){return n(n({},b),{table:function(x){var T=b.table(x),R=T.schema,H={},ee=[];function oe(_e,Ue,Oe){var Fe=zd(_e),ze=H[Fe]=H[Fe]||[],Pe=_e==null?0:typeof _e=="string"?1:_e.length,Xe=0<Ue,Xe=n(n({},Oe),{name:Xe?"".concat(Fe,"(virtual-from:").concat(Oe.name,")"):Oe.name,lowLevelIndex:Oe,isVirtual:Xe,keyTail:Ue,keyLength:Pe,extractKey:Wv(_e),unique:!Xe&&Oe.unique});return ze.push(Xe),Xe.isPrimaryKey||ee.push(Xe),1<Pe&&oe(Pe===2?_e[0]:_e.slice(0,Pe-1),Ue+1,Oe),ze.sort(function(Ke,Ze){return Ke.keyTail-Ze.keyTail}),Xe}x=oe(R.primaryKey.keyPath,0,R.primaryKey),H[":id"]=[x];for(var ve=0,Me=R.indexes;ve<Me.length;ve++){var Ne=Me[ve];oe(Ne.keyPath,0,Ne)}function De(_e){var Ue,Oe=_e.query.index;return Oe.isVirtual?n(n({},_e),{query:{index:Oe.lowLevelIndex,range:(Ue=_e.query.range,Oe=Oe.keyTail,{type:Ue.type===1?2:Ue.type,lower:dg(Ue.lower,Ue.lowerOpen?b.MAX_KEY:b.MIN_KEY,Oe),lowerOpen:!0,upper:dg(Ue.upper,Ue.upperOpen?b.MIN_KEY:b.MAX_KEY,Oe),upperOpen:!0})}}):_e}return n(n({},T),{schema:n(n({},R),{primaryKey:x,indexes:ee,getIndexByKeyPath:function(_e){return(_e=H[zd(_e)])&&_e[0]}}),count:function(_e){return T.count(De(_e))},query:function(_e){return T.query(De(_e))},openCursor:function(_e){var Ue=_e.query.index,Oe=Ue.keyTail,Fe=Ue.isVirtual,ze=Ue.keyLength;return Fe?T.openCursor(De(_e)).then(function(Xe){return Xe&&Pe(Xe)}):T.openCursor(_e);function Pe(Xe){return Object.create(Xe,{continue:{value:function(Ke){Ke!=null?Xe.continue(dg(Ke,_e.reverse?b.MAX_KEY:b.MIN_KEY,Oe)):_e.unique?Xe.continue(Xe.key.slice(0,ze).concat(_e.reverse?b.MIN_KEY:b.MAX_KEY,Oe)):Xe.continue()}},continuePrimaryKey:{value:function(Ke,Ze){Xe.continuePrimaryKey(dg(Ke,b.MAX_KEY,Oe),Ze)}},primaryKey:{get:function(){return Xe.primaryKey}},key:{get:function(){var Ke=Xe.key;return ze===1?Ke[0]:Ke.slice(0,ze)}},value:{get:function(){return Xe.value}}})}}})}})}};function a5(b,x,T,R){return T=T||{},R=R||"",s(b).forEach(function(H){var ee,oe,ve;h(x,H)?(ee=b[H],oe=x[H],typeof ee=="object"&&typeof oe=="object"&&ee&&oe?(ve=ie(ee))!==ie(oe)?T[R+H]=x[H]:ve==="Object"?a5(ee,oe,T,R+H+"."):ee!==oe&&(T[R+H]=x[H]):ee!==oe&&(T[R+H]=x[H])):T[R+H]=void 0}),s(x).forEach(function(H){h(b,H)||(T[R+H]=x[H])}),T}function s5(b,x){return x.type==="delete"?x.keys:x.keys||x.values.map(b.extractKey)}var kse={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(b){return n(n({},b),{table:function(x){var T=b.table(x),R=T.schema.primaryKey;return n(n({},T),{mutate:function(H){var ee=st.trans,oe=ee.table(x).hook,ve=oe.deleting,Me=oe.creating,Ne=oe.updating;switch(H.type){case"add":if(Me.fire===Ee)break;return ee._promise("readwrite",function(){return De(H)},!0);case"put":if(Me.fire===Ee&&Ne.fire===Ee)break;return ee._promise("readwrite",function(){return De(H)},!0);case"delete":if(ve.fire===Ee)break;return ee._promise("readwrite",function(){return De(H)},!0);case"deleteRange":if(ve.fire===Ee)break;return ee._promise("readwrite",function(){return function _e(Ue,Oe,Fe){return T.query({trans:Ue,values:!1,query:{index:R,range:Oe},limit:Fe}).then(function(ze){var Pe=ze.result;return De({type:"delete",keys:Pe,trans:Ue}).then(function(Xe){return 0<Xe.numFailures?Promise.reject(Xe.failures[0]):Pe.length<Fe?{failures:[],numFailures:0,lastResult:void 0}:_e(Ue,n(n({},Oe),{lower:Pe[Pe.length-1],lowerOpen:!0}),Fe)})})}(H.trans,H.range,1e4)},!0)}return T.mutate(H);function De(_e){var Ue,Oe,Fe,ze=st.trans,Pe=_e.keys||s5(R,_e);if(!Pe)throw new Error("Keys missing");return(_e=_e.type==="add"||_e.type==="put"?n(n({},_e),{keys:Pe}):n({},_e)).type!=="delete"&&(_e.values=i([],_e.values)),_e.keys&&(_e.keys=i([],_e.keys)),Ue=T,Fe=Pe,((Oe=_e).type==="add"?Promise.resolve([]):Ue.getMany({trans:Oe.trans,keys:Fe,cache:"immutable"})).then(function(Xe){var Ke=Pe.map(function(Ze,lt){var St,It,kt,Ct=Xe[lt],Rt={onerror:null,onsuccess:null};return _e.type==="delete"?ve.fire.call(Rt,Ze,Ct,ze):_e.type==="add"||Ct===void 0?(St=Me.fire.call(Rt,Ze,_e.values[lt],ze),Ze==null&&St!=null&&(_e.keys[lt]=Ze=St,R.outbound||M(_e.values[lt],R.keyPath,Ze))):(St=a5(Ct,_e.values[lt]),(It=Ne.fire.call(Rt,St,Ze,Ct,ze))&&(kt=_e.values[lt],Object.keys(It).forEach(function(Mt){h(kt,Mt)?kt[Mt]=It[Mt]:M(kt,Mt,It[Mt])}))),Rt});return T.mutate(_e).then(function(Ze){for(var lt=Ze.failures,St=Ze.results,It=Ze.numFailures,Ze=Ze.lastResult,kt=0;kt<Pe.length;++kt){var Ct=(St||Pe)[kt],Rt=Ke[kt];Ct==null?Rt.onerror&&Rt.onerror(lt[kt]):Rt.onsuccess&&Rt.onsuccess(_e.type==="put"&&Xe[kt]?_e.values[kt]:Ct)}return{failures:lt,results:St,numFailures:It,lastResult:Ze}}).catch(function(Ze){return Ke.forEach(function(lt){return lt.onerror&&lt.onerror(Ze)}),Promise.reject(Ze)})})}}})}})}};function Ak(b,x,T){try{if(!x||x.keys.length<b.length)return null;for(var R=[],H=0,ee=0;H<x.keys.length&&ee<b.length;++H)Sr(x.keys[H],b[ee])===0&&(R.push(T?Q(x.values[H]):x.values[H]),++ee);return R.length===b.length?R:null}catch{return null}}var Ase={stack:"dbcore",level:-1,create:function(b){return{table:function(x){var T=b.table(x);return n(n({},T),{getMany:function(R){if(!R.cache)return T.getMany(R);var H=Ak(R.keys,R.trans._cache,R.cache==="clone");return H?gt.resolve(H):T.getMany(R).then(function(ee){return R.trans._cache={keys:R.keys,values:R.cache==="clone"?Q(ee):ee},ee})},mutate:function(R){return R.type!=="add"&&(R.trans._cache=null),T.mutate(R)}})}}}};function Ck(b,x){return b.trans.mode==="readonly"&&!!b.subscr&&!b.trans.explicit&&b.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function Ek(b,x){switch(b){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Cse={stack:"dbcore",level:0,name:"Observability",create:function(b){var x=b.schema.name,T=new Bi(b.MIN_KEY,b.MAX_KEY);return n(n({},b),{transaction:function(R,H,ee){if(st.subscr&&H!=="readonly")throw new Te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return b.transaction(R,H,ee)},table:function(R){var H=b.table(R),ee=H.schema,oe=ee.primaryKey,_e=ee.indexes,ve=oe.extractKey,Me=oe.outbound,Ne=oe.autoIncrement&&_e.filter(function(Oe){return Oe.compound&&Oe.keyPath.includes(oe.keyPath)}),De=n(n({},H),{mutate:function(Oe){function Fe(Mt){return Mt="idb://".concat(x,"/").concat(R,"/").concat(Mt),Ze[Mt]||(Ze[Mt]=new Bi)}var ze,Pe,Xe,Ke=Oe.trans,Ze=Oe.mutatedParts||(Oe.mutatedParts={}),lt=Fe(""),St=Fe(":dels"),It=Oe.type,Rt=Oe.type==="deleteRange"?[Oe.range]:Oe.type==="delete"?[Oe.keys]:Oe.values.length<50?[s5(oe,Oe).filter(function(Mt){return Mt}),Oe.values]:[],kt=Rt[0],Ct=Rt[1],Rt=Oe.trans._cache;return o(kt)?(lt.addKeys(kt),(Rt=It==="delete"||kt.length===Ct.length?Ak(kt,Rt):null)||St.addKeys(kt),(Rt||Ct)&&(ze=Fe,Pe=Rt,Xe=Ct,ee.indexes.forEach(function(Mt){var $t=ze(Mt.name||"");function Br(Yr){return Yr!=null?Mt.extractKey(Yr):null}function Kr(Yr){return Mt.multiEntry&&o(Yr)?Yr.forEach(function(Na){return $t.addKey(Na)}):$t.addKey(Yr)}(Pe||Xe).forEach(function(Yr,zi){var Dr=Pe&&Br(Pe[zi]),zi=Xe&&Br(Xe[zi]);Sr(Dr,zi)!==0&&(Dr!=null&&Kr(Dr),zi!=null&&Kr(zi))})}))):kt?(Ct={from:(Ct=kt.lower)!==null&&Ct!==void 0?Ct:b.MIN_KEY,to:(Ct=kt.upper)!==null&&Ct!==void 0?Ct:b.MAX_KEY},St.add(Ct),lt.add(Ct)):(lt.add(T),St.add(T),ee.indexes.forEach(function(Mt){return Fe(Mt.name).add(T)})),H.mutate(Oe).then(function(Mt){return!kt||Oe.type!=="add"&&Oe.type!=="put"||(lt.addKeys(Mt.results),Ne&&Ne.forEach(function($t){for(var Br=Oe.values.map(function(Dr){return $t.extractKey(Dr)}),Kr=$t.keyPath.findIndex(function(Dr){return Dr===oe.keyPath}),Yr=0,Na=Mt.results.length;Yr<Na;++Yr)Br[Yr][Kr]=Mt.results[Yr];Fe($t.name).addKeys(Br)})),Ke.mutatedParts=ug(Ke.mutatedParts||{},Ze),Mt})}}),_e=function(Fe){var ze=Fe.query,Fe=ze.index,ze=ze.range;return[Fe,new Bi((Fe=ze.lower)!==null&&Fe!==void 0?Fe:b.MIN_KEY,(ze=ze.upper)!==null&&ze!==void 0?ze:b.MAX_KEY)]},Ue={get:function(Oe){return[oe,new Bi(Oe.key)]},getMany:function(Oe){return[oe,new Bi().addKeys(Oe.keys)]},count:_e,query:_e,openCursor:_e};return s(Ue).forEach(function(Oe){De[Oe]=function(Fe){var ze=st.subscr,Pe=!!ze,Xe=Ck(st,H)&&Ek(Oe,Fe)?Fe.obsSet={}:ze;if(Pe){var Ke=function(Ct){return Ct="idb://".concat(x,"/").concat(R,"/").concat(Ct),Xe[Ct]||(Xe[Ct]=new Bi)},Ze=Ke(""),lt=Ke(":dels"),ze=Ue[Oe](Fe),Pe=ze[0],ze=ze[1];if((Oe==="query"&&Pe.isPrimaryKey&&!Fe.values?lt:Ke(Pe.name||"")).add(ze),!Pe.isPrimaryKey){if(Oe!=="count"){var St=Oe==="query"&&Me&&Fe.values&&H.query(n(n({},Fe),{values:!1}));return H[Oe].apply(this,arguments).then(function(Ct){if(Oe==="query"){if(Me&&Fe.values)return St.then(function(Br){return Br=Br.result,Ze.addKeys(Br),Ct});var Rt=Fe.values?Ct.result.map(ve):Ct.result;(Fe.values?Ze:lt).addKeys(Rt)}else if(Oe==="openCursor"){var Mt=Ct,$t=Fe.values;return Mt&&Object.create(Mt,{key:{get:function(){return lt.addKey(Mt.primaryKey),Mt.key}},primaryKey:{get:function(){var Br=Mt.primaryKey;return lt.addKey(Br),Br}},value:{get:function(){return $t&&Ze.addKey(Mt.primaryKey),Mt.value}}})}return Ct})}lt.add(T)}}return H[Oe].apply(this,arguments)}}),De}})}};function Tk(b,x,T){if(T.numFailures===0)return x;if(x.type==="deleteRange")return null;var R=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1;return T.numFailures===R?null:(x=n({},x),o(x.keys)&&(x.keys=x.keys.filter(function(H,ee){return!(ee in T.failures)})),"values"in x&&o(x.values)&&(x.values=x.values.filter(function(H,ee){return!(ee in T.failures)})),x)}function o5(b,x){return T=b,((R=x).lower===void 0||(R.lowerOpen?0<Sr(T,R.lower):0<=Sr(T,R.lower)))&&(b=b,(x=x).upper===void 0||(x.upperOpen?Sr(b,x.upper)<0:Sr(b,x.upper)<=0));var T,R}function Mk(b,x,Ue,R,H,ee){if(!Ue||Ue.length===0)return b;var oe=x.query.index,ve=oe.multiEntry,Me=x.query.range,Ne=R.schema.primaryKey.extractKey,De=oe.extractKey,_e=(oe.lowLevelIndex||oe).extractKey,Ue=Ue.reduce(function(Oe,Fe){var ze=Oe,Pe=[];if(Fe.type==="add"||Fe.type==="put")for(var Xe=new Bi,Ke=Fe.values.length-1;0<=Ke;--Ke){var Ze,lt=Fe.values[Ke],St=Ne(lt);Xe.hasKey(St)||(Ze=De(lt),(ve&&o(Ze)?Ze.some(function(Mt){return o5(Mt,Me)}):o5(Ze,Me))&&(Xe.addKey(St),Pe.push(lt)))}switch(Fe.type){case"add":var It=new Bi().addKeys(x.values?Oe.map(function($t){return Ne($t)}):Oe),ze=Oe.concat(x.values?Pe.filter(function($t){return $t=Ne($t),!It.hasKey($t)&&(It.addKey($t),!0)}):Pe.map(function($t){return Ne($t)}).filter(function($t){return!It.hasKey($t)&&(It.addKey($t),!0)}));break;case"put":var kt=new Bi().addKeys(Fe.values.map(function($t){return Ne($t)}));ze=Oe.filter(function($t){return!kt.hasKey(x.values?Ne($t):$t)}).concat(x.values?Pe:Pe.map(function($t){return Ne($t)}));break;case"delete":var Ct=new Bi().addKeys(Fe.keys);ze=Oe.filter(function($t){return!Ct.hasKey(x.values?Ne($t):$t)});break;case"deleteRange":var Rt=Fe.range;ze=Oe.filter(function($t){return!o5(Ne($t),Rt)})}return ze},b);return Ue===b?b:(Ue.sort(function(Oe,Fe){return Sr(_e(Oe),_e(Fe))||Sr(Ne(Oe),Ne(Fe))}),x.limit&&x.limit<1/0&&(Ue.length>x.limit?Ue.length=x.limit:b.length===x.limit&&Ue.length<x.limit&&(H.dirty=!0)),ee?Object.freeze(Ue):Ue)}function Ik(b,x){return Sr(b.lower,x.lower)===0&&Sr(b.upper,x.upper)===0&&!!b.lowerOpen==!!x.lowerOpen&&!!b.upperOpen==!!x.upperOpen}function Ese(b,x){return function(T,R,H,ee){if(T===void 0)return R!==void 0?-1:0;if(R===void 0)return 1;if((R=Sr(T,R))===0){if(H&&ee)return 0;if(H)return 1;if(ee)return-1}return R}(b.lower,x.lower,b.lowerOpen,x.lowerOpen)<=0&&0<=function(T,R,H,ee){if(T===void 0)return R!==void 0?1:0;if(R===void 0)return-1;if((R=Sr(T,R))===0){if(H&&ee)return 0;if(H)return-1;if(ee)return 1}return R}(b.upper,x.upper,b.upperOpen,x.upperOpen)}function Tse(b,x,T,R){b.subscribers.add(T),R.addEventListener("abort",function(){var H,ee;b.subscribers.delete(T),b.subscribers.size===0&&(H=b,ee=x,setTimeout(function(){H.subscribers.size===0&&X(ee,H)},3e3))})}var Mse={stack:"dbcore",level:0,name:"Cache",create:function(b){var x=b.schema.name;return n(n({},b),{transaction:function(T,R,H){var ee,oe,ve=b.transaction(T,R,H);return R==="readwrite"&&(oe=(ee=new AbortController).signal,H=function(Me){return function(){if(ee.abort(),R==="readwrite"){for(var Ne=new Set,De=0,_e=T;De<_e.length;De++){var Ue=_e[De],Oe=Oc["idb://".concat(x,"/").concat(Ue)];if(Oe){var Fe=b.table(Ue),ze=Oe.optimisticOps.filter(function($t){return $t.trans===ve});if(ve._explicit&&Me&&ve.mutatedParts)for(var Pe=0,Xe=Object.values(Oe.queries.query);Pe<Xe.length;Pe++)for(var Ke=0,Ze=(It=Xe[Pe]).slice();Ke<Ze.length;Ke++)e5((kt=Ze[Ke]).obsSet,ve.mutatedParts)&&(X(It,kt),kt.subscribers.forEach(function($t){return Ne.add($t)}));else if(0<ze.length){Oe.optimisticOps=Oe.optimisticOps.filter(function($t){return $t.trans!==ve});for(var lt=0,St=Object.values(Oe.queries.query);lt<St.length;lt++)for(var It,kt,Ct,Rt=0,Mt=(It=St[lt]).slice();Rt<Mt.length;Rt++)(kt=Mt[Rt]).res!=null&&ve.mutatedParts&&(Me&&!kt.dirty?(Ct=Object.isFrozen(kt.res),Ct=Mk(kt.res,kt.req,ze,Fe,kt,Ct),kt.dirty?(X(It,kt),kt.subscribers.forEach(function($t){return Ne.add($t)})):Ct!==kt.res&&(kt.res=Ct,kt.promise=gt.resolve({result:Ct}))):(kt.dirty&&X(It,kt),kt.subscribers.forEach(function($t){return Ne.add($t)})))}}}Ne.forEach(function($t){return $t()})}}},ve.addEventListener("abort",H(!1),{signal:oe}),ve.addEventListener("error",H(!1),{signal:oe}),ve.addEventListener("complete",H(!0),{signal:oe})),ve},table:function(T){var R=b.table(T),H=R.schema.primaryKey;return n(n({},R),{mutate:function(ee){var oe=st.trans;if(H.outbound||oe.db._options.cache==="disabled"||oe.explicit||oe.idbtrans.mode!=="readwrite")return R.mutate(ee);var ve=Oc["idb://".concat(x,"/").concat(T)];return ve?(oe=R.mutate(ee),ee.type!=="add"&&ee.type!=="put"||!(50<=ee.values.length||s5(H,ee).some(function(Me){return Me==null}))?(ve.optimisticOps.push(ee),ee.mutatedParts&&hg(ee.mutatedParts),oe.then(function(Me){0<Me.numFailures&&(X(ve.optimisticOps,ee),(Me=Tk(0,ee,Me))&&ve.optimisticOps.push(Me),ee.mutatedParts&&hg(ee.mutatedParts))}),oe.catch(function(){X(ve.optimisticOps,ee),ee.mutatedParts&&hg(ee.mutatedParts)})):oe.then(function(Me){var Ne=Tk(0,n(n({},ee),{values:ee.values.map(function(De,_e){var Ue;return Me.failures[_e]?De:(De=(Ue=H.keyPath)!==null&&Ue!==void 0&&Ue.includes(".")?Q(De):n({},De),M(De,H.keyPath,Me.results[_e]),De)})}),Me);ve.optimisticOps.push(Ne),queueMicrotask(function(){return ee.mutatedParts&&hg(ee.mutatedParts)})}),oe):R.mutate(ee)},query:function(ee){if(!Ck(st,R)||!Ek("query",ee))return R.query(ee);var oe=((Ne=st.trans)===null||Ne===void 0?void 0:Ne.db._options.cache)==="immutable",_e=st,ve=_e.requery,Me=_e.signal,Ne=function(Fe,ze,Pe,Xe){var Ke=Oc["idb://".concat(Fe,"/").concat(ze)];if(!Ke)return[];if(!(ze=Ke.queries[Pe]))return[null,!1,Ke,null];var Ze=ze[(Xe.query?Xe.query.index.name:null)||""];if(!Ze)return[null,!1,Ke,null];switch(Pe){case"query":var lt=Ze.find(function(St){return St.req.limit===Xe.limit&&St.req.values===Xe.values&&Ik(St.req.query.range,Xe.query.range)});return lt?[lt,!0,Ke,Ze]:[Ze.find(function(St){return("limit"in St.req?St.req.limit:1/0)>=Xe.limit&&(!Xe.values||St.req.values)&&Ese(St.req.query.range,Xe.query.range)}),!1,Ke,Ze];case"count":return lt=Ze.find(function(St){return Ik(St.req.query.range,Xe.query.range)}),[lt,!!lt,Ke,Ze]}}(x,T,"query",ee),De=Ne[0],_e=Ne[1],Ue=Ne[2],Oe=Ne[3];return De&&_e?De.obsSet=ee.obsSet:(_e=R.query(ee).then(function(Fe){var ze=Fe.result;if(De&&(De.res=ze),oe){for(var Pe=0,Xe=ze.length;Pe<Xe;++Pe)Object.freeze(ze[Pe]);Object.freeze(ze)}else Fe.result=Q(ze);return Fe}).catch(function(Fe){return Oe&&De&&X(Oe,De),Promise.reject(Fe)}),De={obsSet:ee.obsSet,promise:_e,subscribers:new Set,type:"query",req:ee,dirty:!1},Oe?Oe.push(De):(Oe=[De],(Ue=Ue||(Oc["idb://".concat(x,"/").concat(T)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ee.query.index.name||""]=Oe)),Tse(De,Oe,ve,Me),De.promise.then(function(Fe){return{result:Mk(Fe.result,ee,Ue?.optimisticOps,R,De,oe)}})}})}})}};function fg(b,x){return new Proxy(b,{get:function(T,R,H){return R==="db"?x:Reflect.get(T,R,H)}})}var No=(Vn.prototype.version=function(b){if(isNaN(b)||b<.1)throw new Te.Type("Given version is not a positive number");if(b=Math.round(10*b)/10,this.idbdb||this._state.isBeingOpened)throw new Te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,b);var x=this._versions,T=x.filter(function(R){return R._cfg.version===b})[0];return T||(T=new this.Version(b),x.push(T),x.sort(vse),T.stores({}),this._state.autoSchema=!1,T)},Vn.prototype._whenReady=function(b){var x=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?b():new gt(function(T,R){if(x._state.openComplete)return R(new Te.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void R(new Te.DatabaseClosed);x.open().catch(Ee)}x._state.dbReadyPromise.then(T,R)}).then(b)},Vn.prototype.use=function(b){var x=b.stack,T=b.create,R=b.level,H=b.name;return H&&this.unuse({stack:x,name:H}),b=this._middlewares[x]||(this._middlewares[x]=[]),b.push({stack:x,create:T,level:R??10,name:H}),b.sort(function(ee,oe){return ee.level-oe.level}),this},Vn.prototype.unuse=function(b){var x=b.stack,T=b.name,R=b.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(H){return R?H.create!==R:!!T&&H.name!==T})),this},Vn.prototype.open=function(){var b=this;return Oa(Ar,function(){return _se(b)})},Vn.prototype._close=function(){var b=this._state,x=Rl.indexOf(this);if(0<=x&&Rl.splice(x,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}b.isBeingOpened||(b.dbReadyPromise=new gt(function(T){b.dbReadyResolve=T}),b.openCanceller=new gt(function(T,R){b.cancelOpen=R}))},Vn.prototype.close=function(T){var x=(T===void 0?{disableAutoOpen:!0}:T).disableAutoOpen,T=this._state;x?(T.isBeingOpened&&T.cancelOpen(new Te.DatabaseClosed),this._close(),T.autoOpen=!1,T.dbOpenError=new Te.DatabaseClosed):(this._close(),T.autoOpen=this._options.autoOpen||T.isBeingOpened,T.openComplete=!1,T.dbOpenError=null)},Vn.prototype.delete=function(b){var x=this;b===void 0&&(b={disableAutoOpen:!0});var T=0<arguments.length&&typeof arguments[0]!="object",R=this._state;return new gt(function(H,ee){function oe(){x.close(b);var ve=x._deps.indexedDB.deleteDatabase(x.name);ve.onsuccess=vt(function(){var Me,Ne,De;Me=x._deps,Ne=x.name,De=Me.indexedDB,Me=Me.IDBKeyRange,Qv(De)||Ne===Mo||Yv(De,Me).delete(Ne).catch(Ee),H()}),ve.onerror=Hr(ee),ve.onblocked=x._fireOnBlocked}if(T)throw new Te.InvalidArgument("Invalid closeOptions argument to db.delete()");R.isBeingOpened?R.dbReadyPromise.then(oe):oe()})},Vn.prototype.backendDB=function(){return this.idbdb},Vn.prototype.isOpen=function(){return this.idbdb!==null},Vn.prototype.hasBeenClosed=function(){var b=this._state.dbOpenError;return b&&b.name==="DatabaseClosed"},Vn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Vn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Vn.prototype,"tables",{get:function(){var b=this;return s(this._allTables).map(function(x){return b._allTables[x]})},enumerable:!1,configurable:!0}),Vn.prototype.transaction=function(){var b=(function(x,T,R){var H=arguments.length;if(H<2)throw new Te.InvalidArgument("Too few arguments");for(var ee=new Array(H-1);--H;)ee[H-1]=arguments[H];return R=ee.pop(),[x,z(ee),R]}).apply(this,arguments);return this._transaction.apply(this,b)},Vn.prototype._transaction=function(b,x,T){var R=this,H=st.trans;H&&H.db===this&&b.indexOf("!")===-1||(H=null);var ee,oe,ve=b.indexOf("?")!==-1;b=b.replace("!","").replace("?","");try{if(oe=x.map(function(Ne){if(Ne=Ne instanceof R.Table?Ne.name:Ne,typeof Ne!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ne}),b=="r"||b===Nd)ee=Nd;else{if(b!="rw"&&b!=_t)throw new Te.InvalidArgument("Invalid transaction mode: "+b);ee=_t}if(H){if(H.mode===Nd&&ee===_t){if(!ve)throw new Te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");H=null}H&&oe.forEach(function(Ne){if(H&&H.storeNames.indexOf(Ne)===-1){if(!ve)throw new Te.SubTransaction("Table "+Ne+" not included in parent transaction.");H=null}}),ve&&H&&!H.active&&(H=null)}}catch(Ne){return H?H._promise(null,function(De,_e){_e(Ne)}):Pn(Ne)}var Me=(function Ne(De,_e,Ue,Oe,Fe){return gt.resolve().then(function(){var ze=st.transless||st,Pe=De._createTransaction(_e,Ue,De._dbSchema,Oe);if(Pe.explicit=!0,ze={trans:Pe,transless:ze},Oe)Pe.idbtrans=Oe.idbtrans;else try{Pe.create(),Pe.idbtrans._explicit=!0,De._state.PR1398_maxLoop=3}catch(Ze){return Ze.name===pe.InvalidState&&De.isOpen()&&0<--De._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),De.close({disableAutoOpen:!1}),De.open().then(function(){return Ne(De,_e,Ue,null,Fe)})):Pn(Ze)}var Xe,Ke=se(Fe);return Ke&&$s(),ze=gt.follow(function(){var Ze;(Xe=Fe.call(Pe,Pe))&&(Ke?(Ze=es.bind(null,null),Xe.then(Ze,Ze)):typeof Xe.next=="function"&&typeof Xe.throw=="function"&&(Xe=i5(Xe)))},ze),(Xe&&typeof Xe.then=="function"?gt.resolve(Xe).then(function(Ze){return Pe.active?Ze:Pn(new Te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ze.then(function(){return Xe})).then(function(Ze){return Oe&&Pe._resolve(),Pe._completion.then(function(){return Ze})}).catch(function(Ze){return Pe._reject(Ze),Pn(Ze)})})}).bind(null,this,ee,oe,H,T);return H?H._promise(ee,Me,"lock"):st.trans?Oa(st.transless,function(){return R._whenReady(Me)}):this._whenReady(Me)},Vn.prototype.table=function(b){if(!h(this._allTables,b))throw new Te.InvalidTable("Table ".concat(b," does not exist"));return this._allTables[b]},Vn);function Vn(b,x){var T=this;this._middlewares={},this.verno=0;var R=Vn.dependencies;this._options=x=n({addons:Vn.addons,autoOpen:!0,indexedDB:R.indexedDB,IDBKeyRange:R.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},R=x.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var H,ee,oe,ve,Me,Ne={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ee,dbReadyPromise:null,cancelOpen:Ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen};Ne.dbReadyPromise=new gt(function(_e){Ne.dbReadyResolve=_e}),Ne.openCanceller=new gt(function(_e,Ue){Ne.cancelOpen=Ue}),this._state=Ne,this.name=b,this.on=Fl(this,"populate","blocked","versionchange","close",{ready:[ft,Ee]}),this.on.ready.subscribe=S(this.on.ready.subscribe,function(_e){return function(Ue,Oe){Vn.vip(function(){var Fe,ze=T._state;ze.openComplete?(ze.dbOpenError||gt.resolve().then(Ue),Oe&&_e(Ue)):ze.onReadyBeingFired?(ze.onReadyBeingFired.push(Ue),Oe&&_e(Ue)):(_e(Ue),Fe=T,Oe||_e(function Pe(){Fe.on.ready.unsubscribe(Ue),Fe.on.ready.unsubscribe(Pe)}))})}}),this.Collection=(H=this,Dl(Dd.prototype,function(Xe,Pe){this.db=H;var Oe=Xr,Fe=null;if(Pe)try{Oe=Pe()}catch(Ke){Fe=Ke}var ze=Xe._ctx,Pe=ze.table,Xe=Pe.hook.reading.fire;this._ctx={table:Pe,index:ze.index,isPrimKey:!ze.index||Pe.schema.primKey.keyPath&&ze.index===Pe.schema.primKey.name,range:Oe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Fe,or:ze.or,valueMapper:Xe!==$e?Xe:null}})),this.Table=(ee=this,Dl(Di.prototype,function(_e,Ue,Oe){this.db=ee,this._tx=Oe,this.name=_e,this.schema=Ue,this.hook=ee._allTables[_e]?ee._allTables[_e].hook:Fl(null,{creating:[We,Ee],reading:[Ye,$e],updating:[Qe,Ee],deleting:[rt,Ee]})})),this.Transaction=(oe=this,Dl(gse.prototype,function(_e,Ue,Oe,Fe,ze){var Pe=this;this.db=oe,this.mode=_e,this.storeNames=Ue,this.schema=Oe,this.chromeTransactionDurability=Fe,this.idbtrans=null,this.on=Fl(this,"complete","error","abort"),this.parent=ze||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new gt(function(Xe,Ke){Pe._resolve=Xe,Pe._reject=Ke}),this._completion.then(function(){Pe.active=!1,Pe.on.complete.fire()},function(Xe){var Ke=Pe.active;return Pe.active=!1,Pe.on.error.fire(Xe),Pe.parent?Pe.parent._reject(Xe):Ke&&Pe.idbtrans&&Pe.idbtrans.abort(),Pn(Xe)})})),this.Version=(ve=this,Dl(xse.prototype,function(_e){this.db=ve,this._cfg={version:_e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Me=this,Dl(rr.prototype,function(_e,Ue,Oe){if(this.db=Me,this._ctx={table:_e,index:Ue===":id"?null:Ue,or:Oe},this._cmp=this._ascending=Sr,this._descending=function(Fe,ze){return Sr(ze,Fe)},this._max=function(Fe,ze){return 0<Sr(Fe,ze)?Fe:ze},this._min=function(Fe,ze){return Sr(Fe,ze)<0?Fe:ze},this._IDBKeyRange=Me._deps.IDBKeyRange,!this._IDBKeyRange)throw new Te.MissingAPI})),this.on("versionchange",function(_e){0<_e.newVersion?console.warn("Another connection wants to upgrade database '".concat(T.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(T.name,"'. Closing db now to resume the delete request.")),T.close({disableAutoOpen:!1})}),this.on("blocked",function(_e){!_e.newVersion||_e.newVersion<_e.oldVersion?console.warn("Dexie.delete('".concat(T.name,"') was blocked")):console.warn("Upgrade '".concat(T.name,"' blocked by other connection holding version ").concat(_e.oldVersion/10))}),this._maxKey=Bd(x.IDBKeyRange),this._createTransaction=function(_e,Ue,Oe,Fe){return new T.Transaction(_e,Ue,Oe,T._options.chromeTransactionDurability,Fe)},this._fireOnBlocked=function(_e){T.on("blocked").fire(_e),Rl.filter(function(Ue){return Ue.name===T.name&&Ue!==T&&!Ue._state.vcFired}).map(function(Ue){return Ue.on("versionchange").fire(_e)})},this.use(Ase),this.use(Mse),this.use(Cse),this.use(Sse),this.use(kse);var De=new Proxy(this,{get:function(_e,Ue,Oe){if(Ue==="_vip")return!0;if(Ue==="table")return function(ze){return fg(T.table(ze),De)};var Fe=Reflect.get(_e,Ue,Oe);return Fe instanceof Di?fg(Fe,De):Ue==="tables"?Fe.map(function(ze){return fg(ze,De)}):Ue==="_createTransaction"?function(){return fg(Fe.apply(this,arguments),De)}:Fe}});this.vip=De,R.forEach(function(_e){return _e(T)})}var gg,rs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ise=(l5.prototype.subscribe=function(b,x,T){return this._subscribe(b&&typeof b!="function"?b:{next:b,error:x,complete:T})},l5.prototype[rs]=function(){return this},l5);function l5(b){this._subscribe=b}try{gg={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{gg={indexedDB:null,IDBKeyRange:null}}function Ok(b){var x,T=!1,R=new Ise(function(H){var ee=se(b),oe,ve=!1,Me={},Ne={},De={get closed(){return ve},unsubscribe:function(){ve||(ve=!0,oe&&oe.abort(),_e&&Xs.storagemutated.unsubscribe(Oe))}};H.start&&H.start(De);var _e=!1,Ue=function(){return ga(Fe)},Oe=function(ze){ug(Me,ze),e5(Ne,Me)&&Ue()},Fe=function(){var ze,Pe,Xe;!ve&&gg.indexedDB&&(Me={},ze={},oe&&oe.abort(),oe=new AbortController,Xe=function(Ke){var Ze=or();try{ee&&$s();var lt=pi(b,Ke);return lt=ee?lt.finally(es):lt}finally{Ze&&Rr()}}(Pe={subscr:ze,signal:oe.signal,requery:Ue,querier:b,trans:null}),Promise.resolve(Xe).then(function(Ke){T=!0,x=Ke,ve||Pe.signal.aborted||(Me={},function(Ze){for(var lt in Ze)if(h(Ze,lt))return;return 1}(Ne=ze)||_e||(Xs(ta,Oe),_e=!0),ga(function(){return!ve&&H.next&&H.next(Ke)}))},function(Ke){T=!1,["DatabaseClosedError","AbortError"].includes(Ke?.name)||ve||ga(function(){ve||H.error&&H.error(Ke)})}))};return setTimeout(Ue,0),De});return R.hasValue=function(){return T},R.getValue=function(){return x},R}var Nc=No;function c5(b){var x=Bl;try{Bl=!0,Xs.storagemutated.fire(b),n5(b,!0)}finally{Bl=x}}d(Nc,n(n({},be),{delete:function(b){return new Nc(b,{addons:[]}).delete()},exists:function(b){return new Nc(b,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(b){try{return x=Nc.dependencies,T=x.indexedDB,x=x.IDBKeyRange,(Qv(T)?Promise.resolve(T.databases()).then(function(R){return R.map(function(H){return H.name}).filter(function(H){return H!==Mo})}):Yv(T,x).toCollection().primaryKeys()).then(b)}catch{return Pn(new Te.MissingAPI)}var x,T},defineClass:function(){return function(b){l(this,b)}},ignoreTransaction:function(b){return st.trans?Oa(st.transless,b):b()},vip:Jv,async:function(b){return function(){try{var x=i5(b.apply(this,arguments));return x&&typeof x.then=="function"?x:gt.resolve(x)}catch(T){return Pn(T)}}},spawn:function(b,x,T){try{var R=i5(b.apply(T,x||[]));return R&&typeof R.then=="function"?R:gt.resolve(R)}catch(H){return Pn(H)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(b,x){return x=gt.resolve(typeof b=="function"?Nc.ignoreTransaction(b):b).timeout(x||6e4),st.trans?st.trans.waitFor(x):x},Promise:gt,debug:{get:function(){return ht},set:function(b){it(b)}},derive:m,extend:l,props:d,override:S,Events:Fl,on:Xs,liveQuery:Ok,extendObservabilitySet:ug,getByKeyPath:k,setByKeyPath:M,delByKeyPath:function(b,x){typeof x=="string"?M(b,x,void 0):"length"in x&&[].map.call(x,function(T){M(b,T,void 0)})},shallowClone:N,deepClone:Q,getObjectDiff:a5,cmp:Sr,asap:C,minKey:-1/0,addons:[],connections:Rl,errnames:pe,dependencies:gg,cache:Oc,semVer:"4.0.11",version:"4.0.11".split(".").map(function(b){return parseInt(b)}).reduce(function(b,x,T){return b+x/Math.pow(10,2*T)})})),Nc.maxKey=Bd(Nc.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xs(ta,function(b){Bl||(b=new CustomEvent(Ld,{detail:b}),Bl=!0,dispatchEvent(b),Bl=!1)}),addEventListener(Ld,function(b){b=b.detail,Bl||c5(b)}));var Xu,Bl=!1,Nk=function(){};return typeof BroadcastChannel<"u"&&((Nk=function(){(Xu=new BroadcastChannel(Ld)).onmessage=function(b){return b.data&&c5(b.data)}})(),typeof Xu.unref=="function"&&Xu.unref(),Xs(ta,function(b){Bl||Xu.postMessage(b)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(b){if(!No.disableBfCache&&b.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),Xu?.close();for(var x=0,T=Rl;x<T.length;x++)T[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(b){!No.disableBfCache&&b.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),Nk(),c5({all:new Bi(-1/0,[[]])}))})),gt.rejectionMapper=function(b,x){return!b||b instanceof q||b instanceof TypeError||b instanceof SyntaxError||!b.name||!Ae[b.name]?b:(x=new Ae[b.name](x||b.message,b),"stack"in b&&p(x,"stack",{get:function(){return this.inner.stack}}),x)},it(ht),n(No,Object.freeze({__proto__:null,Dexie:No,liveQuery:Ok,Entity:jn,cmp:Sr,PropModification:Li,replacePrefix:function(b,x){return new Li({replacePrefix:[b,x]})},add:function(b){return new Li({add:b})},remove:function(b){return new Li({remove:b})},default:No,RangeSet:Bi,mergeRanges:jd,rangesOverlap:xk}),{default:No}),No})}(H0)),H0.exports}var Mz=Tz();const Rb=Rf(Mz),G7=Symbol.for("Dexie"),q0=globalThis[G7]||(globalThis[G7]=Rb);if(Rb.semVer!==q0.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rb.semVer} and ${q0.semVer}`);const{liveQuery:jse,mergeRanges:Hse,rangesOverlap:qse,RangeSet:Gse,cmp:$se,Entity:Wse,PropModification:Vse,replacePrefix:Xse,add:Kse,remove:Yse}=q0;function Tu(r,e,t=!1){const n=[],i=new Map;for(const o of r)i.set(o.id,o);let a=i.get(e);if(!a){let o=-1;for(const l of r)l.timestamp>o&&(a=l,o=l.timestamp)}let s=a;for(;s&&((s.type!=="root"||t)&&n.push(s),s.parent!==null);)s=i.get(s.parent);return n.sort((o,l)=>o.timestamp-l.timestamp),n}function G0(r,e){const t=new Map;for(const i of r)t.set(i.id,i);let n=t.get(e);for(;n&&n.children.length>0;){const i=n.children[n.children.length-1];n=t.get(i)}return n?.id??e}function $7(r,e){const t=new Map;for(const a of r)t.set(a.id,a);const n=[],i=[e];for(;i.length>0;){const a=i.shift(),s=t.get(a);if(s)for(const o of s.children)n.push(o),i.push(o)}return n}function Iz(r,e){const t=new Map;for(const l of r)t.set(l.id,l);const n=t.get(e);if(!n)return null;if(n.parent===null)return{message:n,siblingIds:[e],currentIndex:0,totalSiblings:1};const i=t.get(n.parent);if(!i)return{message:n,siblingIds:[e],currentIndex:0,totalSiblings:1};const a=i.children,s=a.map(l=>G0(r,l)),o=a.indexOf(e);return{message:n,siblingIds:s,currentIndex:o,totalSiblings:a.length}}const Ei=[];for(let r=0;r<256;++r)Ei.push((r+256).toString(16).slice(1));function Oz(r,e=0){return(Ei[r[e+0]]+Ei[r[e+1]]+Ei[r[e+2]]+Ei[r[e+3]]+"-"+Ei[r[e+4]]+Ei[r[e+5]]+"-"+Ei[r[e+6]]+Ei[r[e+7]]+"-"+Ei[r[e+8]]+Ei[r[e+9]]+"-"+Ei[r[e+10]]+Ei[r[e+11]]+Ei[r[e+12]]+Ei[r[e+13]]+Ei[r[e+14]]+Ei[r[e+15]]).toLowerCase()}let Fb;const Nz=new Uint8Array(16);function Pz(){if(!Fb){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fb=crypto.getRandomValues.bind(crypto)}return Fb(Nz)}const W7={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Rz(r,e,t){r=r||{};const n=r.random??r.rng?.()??Pz();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Oz(n)}function $0(r,e,t){return W7.randomUUID&&!r?W7.randomUUID():Rz(r)}class Fz extends q0{conversations;messages;constructor(){super("DeltaWebui"),this.version(1).stores({conversations:"id, lastModified, currNode, name",messages:"id, convId, type, role, timestamp, parent, children"})}}const Pr=new Fz;class ur{static async addMessage(e){const t={...e,id:$0()};return await Pr.messages.add(t),t}static async createConversation(e){const t={id:$0(),name:e,lastModified:Date.now(),currNode:""};return await Pr.conversations.add(t),t}static async createMessageBranch(e,t){return await Pr.transaction("rw",[Pr.conversations,Pr.messages],async()=>{if(t!==null&&!await Pr.messages.get(t))throw new Error(`Parent message ${t} not found`);const n={...e,id:$0(),parent:t,children:[]};if(await Pr.messages.add(n),t!==null){const i=await Pr.messages.get(t);i&&await Pr.messages.update(t,{children:[...i.children,n.id]})}return await this.updateConversation(e.convId,{currNode:n.id}),n})}static async createRootMessage(e){const t={id:$0(),convId:e,type:"root",timestamp:Date.now(),role:"system",content:"",parent:null,thinking:"",children:[]};return await Pr.messages.add(t),t.id}static async deleteConversation(e){await Pr.transaction("rw",[Pr.conversations,Pr.messages],async()=>{await Pr.conversations.delete(e),await Pr.messages.where("convId").equals(e).delete()})}static async deleteAllConversations(){await Pr.transaction("rw",[Pr.conversations,Pr.messages],async()=>{await Pr.messages.clear(),await Pr.conversations.clear()})}static async deleteMessage(e){await Pr.transaction("rw",Pr.messages,async()=>{const t=await Pr.messages.get(e);if(t){if(t.parent){const n=await Pr.messages.get(t.parent);n&&(n.children=n.children.filter(i=>i!==e),await Pr.messages.put(n))}await Pr.messages.delete(e)}})}static async deleteMessageCascading(e,t){return await Pr.transaction("rw",Pr.messages,async()=>{const n=await Pr.messages.where("convId").equals(e).toArray(),i=$7(n,t),a=[t,...i],s=await Pr.messages.get(t);if(s&&s.parent){const o=await Pr.messages.get(s.parent);o&&(o.children=o.children.filter(l=>l!==t),await Pr.messages.put(o))}return await Pr.messages.bulkDelete(a),a})}static async getAllConversations(){return await Pr.conversations.orderBy("lastModified").reverse().toArray()}static async getConversation(e){return await Pr.conversations.get(e)}static async getConversationLeafNodes(e){return(await this.getConversationMessages(e)).filter(n=>n.children.length===0).map(n=>n.id)}static async getConversationMessages(e){return await Pr.messages.where("convId").equals(e).sortBy("timestamp")}static async getConversationPath(e){const t=await this.getConversation(e);if(!t)return[];const n=await this.getConversationMessages(e);if(n.length===0)return[];const i=t.currNode||n.reduce((a,s)=>s.timestamp>a.timestamp?s:a).id;return Tu(n,i,!1)}static async updateConversation(e,t){await Pr.conversations.update(e,{...t,lastModified:Date.now()})}static async updateCurrentNode(e,t){await this.updateConversation(e,{currNode:t})}static async updateMessage(e,t){await Pr.messages.update(e,t)}static async importConversations(e){let t=0,n=0;return await Pr.transaction("rw",[Pr.conversations,Pr.messages],async()=>{for(const i of e){const{conv:a,messages:s}=i;if(await Pr.conversations.get(a.id)){console.warn(`Conversation "${a.name}" already exists, skipping...`),n++;continue}await Pr.conversations.add(a);for(const l of s)await Pr.messages.put(l);t++}return{imported:t,skipped:n}})}}function Dz(r){const e=r.trim();if(!e)return"";const i=e.split(/[\\/]/).pop()?.trim();return i&&i.length>0?i:e}const Lz=Array(12).fill(0);var Bz=$('<div class="sonner-loading-bar"></div>'),zz=$('<div><div class="sonner-spinner"></div></div>');function Uz(r,e){ye(e,!0);var t=zz(),n=G(t);dn(n,23,()=>Lz,(i,a)=>`spinner-bar-${a}`,(i,a)=>{var s=Bz();w(i,s)}),j(n),j(t),Be(i=>{er(t,1,i),zt(t,"data-visible",e.visible)},[()=>di(["sonner-loading-wrapper",e.class].filter(Boolean).join(" "))]),w(r,t),we()}function mo(...r){return r.filter(Boolean).join(" ")}const jz=typeof document<"u",Hz=typeof window<"u"?window:void 0;function qz(r){let e=r.activeElement;for(;e?.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}let Gz=class{#e;#t;constructor(e={}){const{window:t=Hz,document:n=t?.document}=e;t!==void 0&&(this.#e=n,this.#t=Vl(i=>{const a=Zr(t,"focusin",i),s=Zr(t,"focusout",i);return()=>{a(),s()}}))}get current(){return this.#t?.(),this.#e?qz(this.#e):null}};new Gz;class $z{#e;#t;constructor(e){this.#e=e,this.#t=Symbol(e)}get key(){return this.#t}exists(){return Ng(this.#t)}get(){const e=Bc(this.#t);if(e===void 0)throw new Error(`Context "${this.#e}" not found`);return e}getOr(e){const t=Bc(this.#t);return t===void 0?e:t}set(e){return Zd(this.#t,e)}}const Wz=new $z("<Toaster/>");let V7=0;class Vz{#e=ue(Mr([]));get toasts(){return g(this.#e)}set toasts(e){I(this.#e,e,!0)}#t=ue(Mr([]));get heights(){return g(this.#t)}set heights(e){I(this.#t,e,!0)}#r=e=>{const t=this.toasts.findIndex(n=>n.id===e);return t===-1?null:t};addToast=e=>{jz&&this.toasts.unshift(e)};updateToast=({id:e,data:t,type:n,message:i})=>{const a=this.toasts.findIndex(o=>o.id===e),s=this.toasts[a];this.toasts[a]={...s,...t,id:e,title:i,type:n,updated:!0}};create=e=>{const{message:t,...n}=e,i=typeof e?.id=="number"||e.id&&e.id?.length>0?e.id:V7++,a=e.dismissable===void 0?!0:e.dismissable,s=e.type===void 0?"default":e.type;return mn(()=>{this.toasts.find(l=>l.id===i)?this.updateToast({id:i,data:e,type:s,message:t,dismissable:a}):this.addToast({...n,id:i,title:t,dismissable:a,type:s})}),i};dismiss=e=>(mn(()=>{if(e===void 0){this.toasts=this.toasts.map(n=>({...n,dismiss:!0}));return}const t=this.toasts.findIndex(n=>n.id===e);this.toasts[t]&&(this.toasts[t]={...this.toasts[t],dismiss:!0})}),e);remove=e=>{if(e===void 0){this.toasts=[];return}const t=this.#r(e);if(t!==null)return this.toasts.splice(t,1),e};message=(e,t)=>this.create({...t,type:"default",message:e});error=(e,t)=>this.create({...t,type:"error",message:e});success=(e,t)=>this.create({...t,type:"success",message:e});info=(e,t)=>this.create({...t,type:"info",message:e});warning=(e,t)=>this.create({...t,type:"warning",message:e});loading=(e,t)=>this.create({...t,type:"loading",message:e});promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:typeof t.loading=="string"?t.loading:t.loading()}));const i=e instanceof Promise?e:e();let a=n!==void 0;return i.then(s=>{if(typeof s=="object"&&s&&"ok"in s&&typeof s.ok=="boolean"&&!s.ok){a=!1;const o=Xz(s);this.create({id:n,type:"error",message:o})}else if(t.success!==void 0){a=!1;const o=typeof t.success=="function"?t.success(s):t.success;this.create({id:n,type:"success",message:o})}}).catch(s=>{if(t.error!==void 0){a=!1;const o=typeof t.error=="function"?t.error(s):t.error;this.create({id:n,type:"error",message:o})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),t.finally?.()}),n};custom=(e,t)=>{const n=t?.id||V7++;return this.create({component:e,id:n,...t}),n};removeHeight=e=>{this.heights=this.heights.filter(t=>t.toastId!==e)};setHeight=e=>{const t=this.#r(e.toastId);if(t===null){this.heights.push(e);return}this.heights[t]=e};reset=()=>{this.toasts=[],this.heights=[]}}function Xz(r){return r&&typeof r=="object"&&"status"in r?`HTTP error! Status: ${r.status}`:`Error! ${r}`}const bn=new Vz;function Kz(r,e){return bn.create({message:r,...e})}class Yz{#e=B(()=>bn.toasts.filter(e=>!e.dismiss));get toasts(){return g(this.#e)}}const oi=Object.assign(Kz,{success:bn.success,info:bn.info,warning:bn.warning,error:bn.error,custom:bn.custom,message:bn.message,promise:bn.promise,dismiss:bn.dismiss,loading:bn.loading,getActiveToasts:()=>bn.toasts.filter(r=>!r.dismiss)});function W0(r){return r.label!==void 0}function Qz(){let r=ue(Mr(typeof document<"u"?document.hidden:!1));return Nt(()=>Zr(document,"visibilitychange",()=>{I(r,document.hidden,!0)})),{get current(){return g(r)}}}const X7=4e3,Jz=14,Zz=45,eU=200,tU=.05,rU={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""};function nU(r){const[e,t]=r.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}function K7(r){return 1/(1.5+Math.abs(r)/20)}var iU=$("<div><!></div>"),aU=(r,e,t,n,i)=>{g(e)||!g(t)||(n(),i.toast.onDismiss?.(i.toast))},sU=$('<button data-close-button=""><!></button>'),oU=$('<div data-icon=""><!> <!></div>'),lU=$('<div data-description=""><!></div>'),cU=(r,e,t,n)=>{W0(e.toast.cancel)&&g(t)&&(e.toast.cancel?.onClick?.(r),n())},uU=$('<button data-button="" data-cancel=""> </button>'),hU=(r,e,t)=>{W0(e.toast.action)&&(e.toast.action?.onClick(r),!r.defaultPrevented&&t())},dU=$('<button data-button=""> </button>'),fU=$('<!> <div data-content=""><div data-title=""><!></div> <!></div> <!> <!>',1),gU=$('<li data-sonner-toast=""><!> <!></li>');function pU(r,e){ye(e,!0);const t=it=>{var Je=Z(),at=P(Je);{var ct=Le=>{var et=iU(),ot=G(et);Re(ot,()=>e.loadingIcon),j(et),Be(mt=>{er(et,1,mt),zt(et,"data-visible",g(k)==="loading")},[()=>di(mo(g(re)?.loader,e.toast?.classes?.loader,"sonner-loader"))]),w(Le,et)},Se=Le=>{{let et=B(()=>mo(g(re)?.loader,e.toast.classes?.loader)),ot=B(()=>g(k)==="loading");Uz(Le,{get class(){return g(et)},get visible(){return g(ot)}})}};le(at,Le=>{e.loadingIcon?Le(ct):Le(Se,!1)})}w(it,Je)};let n=U(e,"cancelButtonStyle",3,""),i=U(e,"actionButtonStyle",3,""),a=U(e,"descriptionClass",3,""),s=U(e,"unstyled",3,!1),o=U(e,"defaultRichColors",3,!1);const l={...rU};let c=ue(!1),u=ue(!1),h=ue(!1),d=ue(!1),f=ue(!1),p=ue(0),m=ue(0),y=e.toast.duration||e.duration||X7,v=ue(void 0),_=ue(null),S=ue(null);const A=B(()=>e.index===0),C=B(()=>e.index+1<=e.visibleToasts),k=B(()=>e.toast.type),M=B(()=>e.toast.dismissable!==!1),N=B(()=>e.toast.class||""),F=B(()=>e.toast.descriptionClass||""),z=B(()=>bn.heights.findIndex(it=>it.toastId===e.toast.id)||0),W=B(()=>e.toast.closeButton??e.closeButton),V=B(()=>e.toast.duration??e.duration??X7);let Q=null;const K=B(()=>e.position.split("-")),ie=B(()=>bn.heights.reduce((it,Je,at)=>at>=g(z)?it:it+Je.height,0)),L=Qz(),J=B(()=>e.toast.invert||e.invert),X=B(()=>g(k)==="loading"),re=B(()=>({...l,...e.classes})),D=B(()=>e.toast.title),se=B(()=>e.toast.description);let ce=ue(0),q=ue(0);const ae=B(()=>Math.round(g(z)*Jz+g(ie)));Nt(()=>{g(D),g(se);let it;e.expanded||e.expandByDefault?it=1:it=1-e.index*tU;const Je=mn(()=>g(v));if(Je===void 0)return;Je.style.setProperty("height","auto");const at=Je.offsetHeight,ct=Je.getBoundingClientRect().height,Se=Math.round(ct/it+Number.EPSILON&100)/100;Je.style.removeProperty("height");let Le;Math.abs(Se-at)<1?Le=Se:Le=at,I(m,Le,!0),mn(()=>{bn.setHeight({toastId:e.toast.id,height:Le})})});function fe(){I(u,!0),I(p,g(ae),!0),bn.removeHeight(e.toast.id),setTimeout(()=>{bn.remove(e.toast.id)},eU)}let xe;const pe=B(()=>e.toast.promise&&g(k)==="loading"||e.toast.duration===Number.POSITIVE_INFINITY);function Ce(){I(ce,new Date().getTime(),!0),xe=setTimeout(()=>{e.toast.onAutoClose?.(e.toast),fe()},y)}function Te(){if(g(q)<g(ce)){const it=new Date().getTime()-g(ce);y=y-it}I(q,new Date().getTime(),!0)}Nt(()=>{e.toast.updated&&(clearTimeout(xe),y=g(V),Ce())}),Nt(()=>(g(pe)||(e.expanded||e.interacting||L.current?Te():Ce()),()=>clearTimeout(xe))),_i(()=>{I(c,!0);const it=g(v)?.getBoundingClientRect().height;return I(m,it,!0),bn.setHeight({toastId:e.toast.id,height:it}),()=>{bn.removeHeight(e.toast.id)}}),Nt(()=>{e.toast.delete&&mn(()=>{fe(),e.toast.onDismiss?.(e.toast)})});const Ae=it=>{if(g(X))return;I(p,g(ae),!0);const Je=it.target;Je.setPointerCapture(it.pointerId),Je.tagName!=="BUTTON"&&(I(h,!0),Q={x:it.clientX,y:it.clientY})},be=()=>{if(g(d)||!g(M))return;Q=null;const it=Number(g(v)?.style.getPropertyValue("--swipe-amount-x").replace("px","")||0),Je=Number(g(v)?.style.getPropertyValue("--swipe-amount-y").replace("px","")||0),at=new Date().getTime()-0,ct=g(_)==="x"?it:Je,Se=Math.abs(ct)/at;if(Math.abs(ct)>=Zz||Se>.11){I(p,g(ae),!0),e.toast.onDismiss?.(e.toast),g(_)==="x"?I(S,it>0?"right":"left",!0):I(S,Je>0?"down":"up",!0),fe(),I(d,!0);return}else g(v)?.style.setProperty("--swipe-amount-x","0px"),g(v)?.style.setProperty("--swipe-amount-y","0px");I(f,!1),I(h,!1),I(_,null)},Ee=it=>{if(!Q||!g(M)||(window.getSelection()?.toString().length??-1)>0)return;const at=it.clientY-Q.y,ct=it.clientX-Q.x,Se=e.swipeDirections??nU(e.position);!g(_)&&(Math.abs(ct)>1||Math.abs(at)>1)&&I(_,Math.abs(ct)>Math.abs(at)?"x":"y",!0);let Le={x:0,y:0};if(g(_)==="y"){if(Se.includes("top")||Se.includes("bottom"))if(Se.includes("top")&&at<0||Se.includes("bottom")&&at>0)Le.y=at;else{const et=at*K7(at);Le.y=Math.abs(et)<Math.abs(at)?et:at}}else if(g(_)==="x"&&(Se.includes("left")||Se.includes("right")))if(Se.includes("left")&&ct<0||Se.includes("right")&&ct>0)Le.x=ct;else{const et=ct*K7(ct);Le.x=Math.abs(et)<Math.abs(ct)?et:ct}(Math.abs(Le.x)>0||Math.abs(Le.y)>0)&&I(f,!0),g(v)?.style.setProperty("--swipe-amount-x",`${Le.x}px`),g(v)?.style.setProperty("--swipe-amount-y",`${Le.y}px`)},$e=()=>{I(h,!1),I(_,null),Q=null},Ye=B(()=>e.toast.icon?e.toast.icon:g(k)==="success"?e.successIcon:g(k)==="error"?e.errorIcon:g(k)==="warning"?e.warningIcon:g(k)==="info"?e.infoIcon:g(k)==="loading"?e.loadingIcon:null);var He=gU();zt(He,"tabindex",0);let We;He.__pointermove=Ee,He.__pointerup=be,He.__pointerdown=Ae;var rt=G(He);{var Qe=it=>{var Je=sU();Je.__click=[aU,X,M,fe,e];var at=G(Je);Re(at,()=>e.closeIcon??je),j(Je),Be(ct=>{zt(Je,"aria-label",e.closeButtonAriaLabel),zt(Je,"data-disabled",g(X)),er(Je,1,ct)},[()=>di(mo(g(re)?.closeButton,e.toast?.classes?.closeButton))]),w(it,Je)};le(rt,it=>{g(W)&&!e.toast.component&&g(k)!=="loading"&&e.closeIcon!==null&&it(Qe)})}var ut=te(rt,2);{var ft=it=>{var Je=Z();const at=B(()=>e.toast.component);var ct=P(Je);he(ct,()=>g(at),(Se,Le)=>{Le(Se,tt(()=>e.toast.componentProps,{closeToast:fe}))}),w(it,Je)},ht=it=>{var Je=fU(),at=P(Je);{var ct=st=>{var yt=oU(),At=G(yt);{var Vt=ar=>{var Cr=Z(),de=P(Cr);{var Ve=Pt=>{var or=Z(),Rr=P(or);he(Rr,()=>e.toast.icon,(Ft,Ot)=>{Ot(Ft,{})}),w(Pt,or)},dt=Pt=>{t(Pt)};le(de,Pt=>{e.toast.icon?Pt(Ve):Pt(dt,!1)})}w(ar,Cr)};le(At,ar=>{(e.toast.promise||g(k)==="loading")&&ar(Vt)})}var gt=te(At,2);{var Bt=ar=>{var Cr=Z(),de=P(Cr);{var Ve=Pt=>{var or=Z(),Rr=P(or);he(Rr,()=>e.toast.icon,(Ft,Ot)=>{Ot(Ft,{})}),w(Pt,or)},dt=Pt=>{var or=Z(),Rr=P(or);{var Ft=vt=>{var cr=Z(),tn=P(cr);Re(tn,()=>e.successIcon??je),w(vt,cr)},Ot=vt=>{var cr=Z(),tn=P(cr);{var Fi=Un=>{var ea=Z(),pi=P(ea);Re(pi,()=>e.errorIcon??je),w(Un,ea)},Za=Un=>{var ea=Z(),pi=P(ea);{var $s=Ia=>{var Ws=Z(),Ti=P(Ws);Re(Ti,()=>e.warningIcon??je),w(Ia,Ws)},es=Ia=>{var Ws=Z(),Ti=P(Ws);{var $u=Oa=>{var Mc=Z(),ga=P(Mc);Re(ga,()=>e.infoIcon??je),w(Oa,Mc)};le(Ti,Oa=>{g(k)==="info"&&Oa($u)},!0)}w(Ia,Ws)};le(pi,Ia=>{g(k)==="warning"?Ia($s):Ia(es,!1)},!0)}w(Un,ea)};le(tn,Un=>{g(k)==="error"?Un(Fi):Un(Za,!1)},!0)}w(vt,cr)};le(Rr,vt=>{g(k)==="success"?vt(Ft):vt(Ot,!1)},!0)}w(Pt,or)};le(de,Pt=>{e.toast.icon?Pt(Ve):Pt(dt,!1)})}w(ar,Cr)};le(gt,ar=>{e.toast.type!=="loading"&&ar(Bt)})}j(yt),Be(ar=>er(yt,1,ar),[()=>di(mo(g(re)?.icon,e.toast?.classes?.icon))]),w(st,yt)};le(at,st=>{(g(k)||e.toast.icon||e.toast.promise)&&e.toast.icon!==null&&(g(Ye)!==null||e.toast.icon)&&st(ct)})}var Se=te(at,2),Le=G(Se),et=G(Le);{var ot=st=>{var yt=Z(),At=P(yt);{var Vt=Bt=>{var ar=Z();const Cr=B(()=>e.toast.title);var de=P(ar);he(de,()=>g(Cr),(Ve,dt)=>{dt(Ve,tt(()=>e.toast.componentProps))}),w(Bt,ar)},gt=Bt=>{var ar=tr();Be(()=>nt(ar,e.toast.title)),w(Bt,ar)};le(At,Bt=>{typeof e.toast.title!="string"?Bt(Vt):Bt(gt,!1)})}w(st,yt)};le(et,st=>{e.toast.title&&st(ot)})}j(Le);var mt=te(Le,2);{var Gt=st=>{var yt=lU(),At=G(yt);{var Vt=Bt=>{var ar=Z();const Cr=B(()=>e.toast.description);var de=P(ar);he(de,()=>g(Cr),(Ve,dt)=>{dt(Ve,tt(()=>e.toast.componentProps))}),w(Bt,ar)},gt=Bt=>{var ar=tr();Be(()=>nt(ar,e.toast.description)),w(Bt,ar)};le(At,Bt=>{typeof e.toast.description!="string"?Bt(Vt):Bt(gt,!1)})}j(yt),Be(Bt=>er(yt,1,Bt),[()=>di(mo(a(),g(F),g(re)?.description,e.toast.classes?.description))]),w(st,yt)};le(mt,st=>{e.toast.description&&st(Gt)})}j(Se);var jt=te(Se,2);{var Yt=st=>{var yt=Z(),At=P(yt);{var Vt=Bt=>{var ar=Z(),Cr=P(ar);he(Cr,()=>e.toast.cancel,(de,Ve)=>{Ve(de,{})}),w(Bt,ar)},gt=Bt=>{var ar=Z(),Cr=P(ar);{var de=Ve=>{var dt=uU();dt.__click=[cU,e,M,fe];var Pt=G(dt,!0);j(dt),Be(or=>{Ho(dt,e.toast.cancelButtonStyle??n()),er(dt,1,or),nt(Pt,e.toast.cancel.label)},[()=>di(mo(g(re)?.cancelButton,e.toast?.classes?.cancelButton))]),w(Ve,dt)};le(Cr,Ve=>{W0(e.toast.cancel)&&Ve(de)},!0)}w(Bt,ar)};le(At,Bt=>{typeof e.toast.cancel=="function"?Bt(Vt):Bt(gt,!1)})}w(st,yt)};le(jt,st=>{e.toast.cancel&&st(Yt)})}var kr=te(jt,2);{var Ar=st=>{var yt=Z(),At=P(yt);{var Vt=Bt=>{var ar=Z(),Cr=P(ar);he(Cr,()=>e.toast.action,(de,Ve)=>{Ve(de,{})}),w(Bt,ar)},gt=Bt=>{var ar=Z(),Cr=P(ar);{var de=Ve=>{var dt=dU();dt.__click=[hU,e,fe];var Pt=G(dt,!0);j(dt),Be(or=>{Ho(dt,e.toast.actionButtonStyle??i()),er(dt,1,or),nt(Pt,e.toast.action.label)},[()=>di(mo(g(re)?.actionButton,e.toast?.classes?.actionButton))]),w(Ve,dt)};le(Cr,Ve=>{W0(e.toast.action)&&Ve(de)},!0)}w(Bt,ar)};le(At,Bt=>{typeof e.toast.action=="function"?Bt(Vt):Bt(gt,!1)})}w(st,yt)};le(kr,st=>{e.toast.action&&st(Ar)})}Be(st=>er(Le,1,st),[()=>di(mo(g(re)?.title,e.toast?.classes?.title))]),w(it,Je)};le(ut,it=>{e.toast.component?it(ft):it(ht,!1)})}j(He),Fr(He,it=>I(v,it),()=>g(v)),Be((it,Je,at,ct)=>{er(He,1,it),zt(He,"data-rich-colors",e.toast.richColors??o()),zt(He,"data-styled",!(e.toast.component||e.toast.unstyled||s())),zt(He,"data-mounted",g(c)),zt(He,"data-promise",Je),zt(He,"data-swiped",g(f)),zt(He,"data-removed",g(u)),zt(He,"data-visible",g(C)),zt(He,"data-y-position",g(K)[0]),zt(He,"data-x-position",g(K)[1]),zt(He,"data-index",e.index),zt(He,"data-front",g(A)),zt(He,"data-swiping",g(h)),zt(He,"data-dismissable",g(M)),zt(He,"data-type",g(k)),zt(He,"data-invert",g(J)),zt(He,"data-swipe-out",g(d)),zt(He,"data-swipe-direction",g(S)),zt(He,"data-expanded",at),We=Ho(He,`${e.style} ${e.toast.style}`,We,ct)},[()=>di(mo(e.class,g(N),g(re)?.toast,e.toast?.classes?.toast,g(re)?.[g(k)],e.toast?.classes?.[g(k)])),()=>!!e.toast.promise,()=>!!(e.expanded||e.expandByDefault&&g(c)),()=>({"--index":e.index,"--toasts-before":e.index,"--z-index":bn.toasts.length-e.index,"--offset":`${g(u)?g(p):g(ae)}px`,"--initial-height":e.expandByDefault?"auto":`${g(m)}px`})]),Bn("dragend",He,$e),w(r,He),we()}Xn(["pointermove","pointerup","pointerdown","click"]);var mU=Ql('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-success-icon=""><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>');function bU(r){var e=mU();w(r,e)}var vU=Ql('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-error-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>');function yU(r){var e=vU();w(r,e)}var wU=Ql('<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" data-sonner-warning-icon="" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>');function xU(r){var e=wU();w(r,e)}var _U=Ql('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-info-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>');function SU(r){var e=_U();w(r,e)}var kU=Ql('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-sonner-close-icon=""><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');function AU(r){var e=kU();w(r,e)}const CU=3,Y7="24px",Q7="16px",EU=4e3,TU=356,MU=14,Db="dark",V0="light";function IU(r,e){const t={};return[r,e].forEach((n,i)=>{const a=i===1,s=a?"--mobile-offset":"--offset",o=a?Q7:Y7;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${s}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{const u=n[c];u===void 0?t[`${s}-${c}`]=o:t[`${s}-${c}`]=typeof u=="number"?`${u}px`:u}):l(o)}),t}var OU=$("<ol></ol>"),NU=$('<section aria-live="polite" aria-relevant="additions text" aria-atomic="false" class="svelte-tppj9g"><!></section>');function PU(r,e){ye(e,!0);function t(ae){return ae!=="system"?ae:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Db:V0}let n=U(e,"invert",3,!1),i=U(e,"position",3,"bottom-right"),a=U(e,"hotkey",19,()=>["altKey","KeyT"]),s=U(e,"expand",3,!1),o=U(e,"closeButton",3,!1),l=U(e,"offset",3,Y7),c=U(e,"mobileOffset",3,Q7),u=U(e,"theme",3,"light"),h=U(e,"richColors",3,!1),d=U(e,"duration",3,EU),f=U(e,"visibleToasts",3,CU),p=U(e,"toastOptions",19,()=>({})),m=U(e,"dir",7,"auto"),y=U(e,"gap",3,MU),v=U(e,"containerAriaLabel",3,"Notifications"),_=U(e,"closeButtonAriaLabel",3,"Close toast"),S=qe(e,["$$slots","$$events","$$legacy","invert","position","hotkey","expand","closeButton","offset","mobileOffset","theme","richColors","duration","visibleToasts","toastOptions","dir","gap","loadingIcon","successIcon","errorIcon","warningIcon","closeIcon","infoIcon","containerAriaLabel","class","closeButtonAriaLabel","onblur","onfocus","onmouseenter","onmousemove","onmouseleave","ondragend","onpointerdown","onpointerup"]);function A(){if(m()!=="auto")return m();if(typeof window>"u"||typeof document>"u")return"ltr";const ae=document.documentElement.getAttribute("dir");return ae==="auto"||!ae?(mn(()=>m(window.getComputedStyle(document.documentElement).direction??"ltr")),m()):(mn(()=>m(ae)),ae)}const C=B(()=>Array.from(new Set([i(),...bn.toasts.filter(ae=>ae.position).map(ae=>ae.position)].filter(Boolean))));let k=ue(!1),M=ue(!1),N=ue(Mr(t(u()))),F=ue(void 0),z=ue(null),W=ue(!1);const V=B(()=>a().join("+").replace(/Key/g,"").replace(/Digit/g,""));Nt(()=>{bn.toasts.length<=1&&I(k,!1)}),Nt(()=>{const ae=bn.toasts.filter(fe=>fe.dismiss&&!fe.delete);if(ae.length>0){const fe=bn.toasts.map(xe=>ae.find(Ce=>Ce.id===xe.id)?{...xe,delete:!0}:xe);bn.toasts=fe}}),Nt(()=>()=>{g(F)&&g(z)&&(g(z).focus({preventScroll:!0}),I(z,null),I(W,!1))}),_i(()=>(bn.reset(),Zr(document,"keydown",fe=>{a().every(pe=>fe[pe]||fe.code===pe)&&(I(k,!0),g(F)?.focus()),fe.code==="Escape"&&(document.activeElement===g(F)||g(F)?.contains(document.activeElement))&&I(k,!1)}))),Nt(()=>{if(u()!=="system"&&I(N,u()),typeof window<"u"){u()==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I(N,Db):I(N,V0));const ae=window.matchMedia("(prefers-color-scheme: dark)"),fe=({matches:xe})=>{I(N,xe?Db:V0,!0)};"addEventListener"in ae?ae.addEventListener("change",fe):ae.addListener(fe)}});const Q=ae=>{e.onblur?.(ae),g(W)&&!ae.currentTarget.contains(ae.relatedTarget)&&(I(W,!1),g(z)&&(g(z).focus({preventScroll:!0}),I(z,null)))},K=ae=>{e.onfocus?.(ae),!(ae.target instanceof HTMLElement&&ae.target.dataset.dismissable==="false")&&(g(W)||(I(W,!0),I(z,ae.relatedTarget,!0)))},ie=ae=>{e.onpointerdown?.(ae),!(ae.target instanceof HTMLElement&&ae.target.dataset.dismissable==="false")&&I(M,!0)},L=ae=>{e.onmouseenter?.(ae),I(k,!0)},J=ae=>{e.onmouseleave?.(ae),g(M)||I(k,!1)},X=ae=>{e.onmousemove?.(ae),I(k,!0)},re=ae=>{e.ondragend?.(ae),I(k,!1)},D=ae=>{e.onpointerup?.(ae),I(M,!1)};Wz.set(new Yz);var se=NU();zt(se,"tabindex",-1);var ce=G(se);{var q=ae=>{var fe=Z(),xe=P(fe);dn(xe,18,()=>g(C),pe=>pe,(pe,Ce,Te,Ae)=>{var be=OU();const Ee=B(()=>{const[Ye,He]=Ce.split("-");return{y:Ye,x:He}}),$e=B(()=>IU(l(),c()));Ht(be,(Ye,He)=>({tabindex:-1,dir:Ye,class:e.class,"data-sonner-toaster":!0,"data-sonner-theme":g(N),"data-y-position":g(Ee).y,"data-x-position":g(Ee).x,style:e.style,onblur:Q,onfocus:K,onmouseenter:L,onmousemove:X,onmouseleave:J,ondragend:re,onpointerdown:ie,onpointerup:D,...S,[Wc]:He}),[A,()=>({"--front-toast-height":`${bn.heights[0]?.height}px`,"--width":`${TU}px`,"--gap":`${y()}px`,"--offset-top":g($e)["--offset-top"],"--offset-right":g($e)["--offset-right"],"--offset-bottom":g($e)["--offset-bottom"],"--offset-left":g($e)["--offset-left"],"--mobile-offset-top":g($e)["--mobile-offset-top"],"--mobile-offset-right":g($e)["--mobile-offset-right"],"--mobile-offset-bottom":g($e)["--mobile-offset-bottom"],"--mobile-offset-left":g($e)["--mobile-offset-left"]})],void 0,"svelte-tppj9g"),dn(be,23,()=>bn.toasts.filter(Ye=>!Ye.position&&g(Te)===0||Ye.position===Ce),Ye=>Ye.id,(Ye,He,We,rt)=>{{const Qe=jt=>{var Yt=Z(),kr=P(Yt);{var Ar=yt=>{var At=Z(),Vt=P(At);Re(Vt,()=>e.successIcon??je),w(yt,At)},st=yt=>{var At=Z(),Vt=P(At);{var gt=Bt=>{bU(Bt)};le(Vt,Bt=>{e.successIcon!==null&&Bt(gt)},!0)}w(yt,At)};le(kr,yt=>{e.successIcon?yt(Ar):yt(st,!1)})}w(jt,Yt)},ut=jt=>{var Yt=Z(),kr=P(Yt);{var Ar=yt=>{var At=Z(),Vt=P(At);Re(Vt,()=>e.errorIcon??je),w(yt,At)},st=yt=>{var At=Z(),Vt=P(At);{var gt=Bt=>{yU(Bt)};le(Vt,Bt=>{e.errorIcon!==null&&Bt(gt)},!0)}w(yt,At)};le(kr,yt=>{e.errorIcon?yt(Ar):yt(st,!1)})}w(jt,Yt)},ft=jt=>{var Yt=Z(),kr=P(Yt);{var Ar=yt=>{var At=Z(),Vt=P(At);Re(Vt,()=>e.warningIcon??je),w(yt,At)},st=yt=>{var At=Z(),Vt=P(At);{var gt=Bt=>{xU(Bt)};le(Vt,Bt=>{e.warningIcon!==null&&Bt(gt)},!0)}w(yt,At)};le(kr,yt=>{e.warningIcon?yt(Ar):yt(st,!1)})}w(jt,Yt)},ht=jt=>{var Yt=Z(),kr=P(Yt);{var Ar=yt=>{var At=Z(),Vt=P(At);Re(Vt,()=>e.infoIcon??je),w(yt,At)},st=yt=>{var At=Z(),Vt=P(At);{var gt=Bt=>{SU(Bt)};le(Vt,Bt=>{e.infoIcon!==null&&Bt(gt)},!0)}w(yt,At)};le(kr,yt=>{e.infoIcon?yt(Ar):yt(st,!1)})}w(jt,Yt)},it=jt=>{var Yt=Z(),kr=P(Yt);{var Ar=yt=>{var At=Z(),Vt=P(At);Re(Vt,()=>e.closeIcon??je),w(yt,At)},st=yt=>{var At=Z(),Vt=P(At);{var gt=Bt=>{AU(Bt)};le(Vt,Bt=>{e.closeIcon!==null&&Bt(gt)},!0)}w(yt,At)};le(kr,yt=>{e.closeIcon?yt(Ar):yt(st,!1)})}w(jt,Yt)};let Je=B(()=>p()?.duration??d()),at=B(()=>p()?.class??""),ct=B(()=>p()?.descriptionClass||""),Se=B(()=>p()?.style??""),Le=B(()=>p().classes||{}),et=B(()=>p().unstyled??!1),ot=B(()=>p()?.cancelButtonStyle??""),mt=B(()=>p()?.actionButtonStyle??""),Gt=B(()=>p()?.closeButtonAriaLabel??_());pU(Ye,{get index(){return g(We)},get toast(){return g(He)},get defaultRichColors(){return h()},get duration(){return g(Je)},get class(){return g(at)},get descriptionClass(){return g(ct)},get invert(){return n()},get visibleToasts(){return f()},get closeButton(){return o()},get interacting(){return g(M)},get position(){return Ce},get style(){return g(Se)},get classes(){return g(Le)},get unstyled(){return g(et)},get cancelButtonStyle(){return g(ot)},get actionButtonStyle(){return g(mt)},get closeButtonAriaLabel(){return g(Gt)},get expandByDefault(){return s()},get expanded(){return g(k)},get loadingIcon(){return e.loadingIcon},successIcon:Qe,errorIcon:ut,warningIcon:ft,infoIcon:ht,closeIcon:it,$$slots:{successIcon:!0,errorIcon:!0,warningIcon:!0,infoIcon:!0,closeIcon:!0}})}}),j(be),Fr(be,Ye=>I(F,Ye),()=>g(F)),Be(()=>be.dir=be.dir),w(pe,be)}),w(ae,fe)};le(ce,ae=>{bn.toasts.length>0&&ae(q)})}j(se),Be(()=>zt(se,"aria-label",`${v()??""} ${g(V)??""}`)),w(r,se),we()}class RU{#e=ue(null);get activeConversation(){return g(this.#e)}set activeConversation(e){I(this.#e,e,!0)}#t=ue(Mr([]));get activeMessages(){return g(this.#t)}set activeMessages(e){I(this.#t,e,!0)}#r=ue(Mr([]));get conversations(){return g(this.#r)}set conversations(e){I(this.#r,e,!0)}#n=ue("");get currentResponse(){return g(this.#n)}set currentResponse(e){I(this.#n,e,!0)}#a=ue(null);get errorDialogState(){return g(this.#a)}set errorDialogState(e){I(this.#a,e,!0)}#i=ue(!1);get isInitialized(){return g(this.#i)}set isInitialized(e){I(this.#i,e,!0)}#s=ue(!1);get isLoading(){return g(this.#s)}set isLoading(e){I(this.#s,e,!0)}conversationLoadingStates=new Ff;conversationStreamingStates=new Ff;titleUpdateConfirmationCallback;constructor(){this.initialize()}async initialize(){try{await this.loadConversations(),this.isInitialized=!0}catch(e){console.error("Failed to initialize chat store:",e)}}async loadConversations(){this.conversations=await ur.getAllConversations()}async createConversation(e){const t=e||`Chat ${new Date().toLocaleString()}`,n=await ur.createConversation(t);this.conversations.unshift(n),this.activeConversation=n,this.activeMessages=[],En.setActiveConversation(n.id);const i=this.isConversationLoading(n.id);return this.isLoading=i,this.currentResponse="",await Go(`#/chat/${n.id}`),n.id}async loadConversation(e){try{const t=await ur.getConversation(e);if(!t)return!1;this.activeConversation=t,En.setActiveConversation(e);const n=this.isConversationLoading(e);this.isLoading=n;const i=this.getConversationStreaming(e);if(this.currentResponse=i?.response||"",t.currNode){const a=await ur.getConversationMessages(e);this.activeMessages=Tu(a,t.currNode,!1)}else this.activeMessages=await ur.getConversationMessages(e);return!0}catch(t){return console.error("Failed to load conversation:",t),!1}}async addMessage(e,t,n="text",i="-1",a){if(!this.activeConversation)return console.error("No active conversation when trying to add message"),null;try{let s=null;if(i==="-1")if(this.activeMessages.length>0)s=this.activeMessages[this.activeMessages.length-1].id;else{const c=(await ur.getConversationMessages(this.activeConversation.id)).find(u=>u.parent===null&&u.type==="root");c?s=c.id:s=await ur.createRootMessage(this.activeConversation.id)}else s=i;const o=await ur.createMessageBranch({convId:this.activeConversation.id,role:e,content:t,type:n,timestamp:Date.now(),thinking:"",children:[],extra:a},s);return this.activeMessages.push(o),await ur.updateCurrentNode(this.activeConversation.id,o.id),this.activeConversation.currNode=o.id,this.updateConversationTimestamp(),o}catch(s){return console.error("Failed to add message:",s),null}}getApiOptions(){const e=un(),t=i=>i!=null&&i!=="",n={stream:!0,timings_per_token:!0};return t(e.temperature)&&(n.temperature=Number(e.temperature)),t(e.max_tokens)&&(n.max_tokens=Number(e.max_tokens)),t(e.dynatemp_range)&&(n.dynatemp_range=Number(e.dynatemp_range)),t(e.dynatemp_exponent)&&(n.dynatemp_exponent=Number(e.dynatemp_exponent)),t(e.top_k)&&(n.top_k=Number(e.top_k)),t(e.top_p)&&(n.top_p=Number(e.top_p)),t(e.min_p)&&(n.min_p=Number(e.min_p)),t(e.xtc_probability)&&(n.xtc_probability=Number(e.xtc_probability)),t(e.xtc_threshold)&&(n.xtc_threshold=Number(e.xtc_threshold)),t(e.typ_p)&&(n.typ_p=Number(e.typ_p)),t(e.repeat_last_n)&&(n.repeat_last_n=Number(e.repeat_last_n)),t(e.repeat_penalty)&&(n.repeat_penalty=Number(e.repeat_penalty)),t(e.presence_penalty)&&(n.presence_penalty=Number(e.presence_penalty)),t(e.frequency_penalty)&&(n.frequency_penalty=Number(e.frequency_penalty)),t(e.dry_multiplier)&&(n.dry_multiplier=Number(e.dry_multiplier)),t(e.dry_base)&&(n.dry_base=Number(e.dry_base)),t(e.dry_allowed_length)&&(n.dry_allowed_length=Number(e.dry_allowed_length)),t(e.dry_penalty_last_n)&&(n.dry_penalty_last_n=Number(e.dry_penalty_last_n)),e.samplers&&(n.samplers=e.samplers),e.custom&&(n.custom=e.custom),n}setConversationLoading(e,t){t?(this.conversationLoadingStates.set(e,!0),this.activeConversation?.id===e&&(this.isLoading=!0)):(this.conversationLoadingStates.delete(e),this.activeConversation?.id===e&&(this.isLoading=!1))}isConversationLoading(e){return this.conversationLoadingStates.get(e)||!1}setConversationStreaming(e,t,n){this.conversationStreamingStates.set(e,{response:t,messageId:n}),this.activeConversation?.id===e&&(this.currentResponse=t)}clearConversationStreaming(e){this.conversationStreamingStates.delete(e),this.activeConversation?.id===e&&(this.currentResponse="")}getConversationStreaming(e){return this.conversationStreamingStates.get(e)}async streamChatCompletion(e,t,n,i,a){let s=a?.initialContent??"",o=a?.initialThinking??"",l=null,c=!1,u=!1;const h=()=>{if(u)return;u=!0;const f=ei.serverProps!==null;ei.fetchServerProps({silent:f}).then(()=>{}).catch(p=>{console.warn("Failed to refresh server props after streaming started:",p)})},d=(f,p=!0)=>{const m=ei.modelName,y=f??m??null;if(!y)return;const v=Dz(y);if(!v||v===l)return;l=v;const _=this.findMessageIndex(t.id);this.updateMessageAtIndex(_,{model:v}),p&&!c&&(c=!0,ur.updateMessage(t.id,{model:v}).catch(S=>{console.error("Failed to persist model name:",S),c=!1,l=null}))};En.startStreaming(),En.setActiveConversation(t.convId),await Ib.sendMessage(e,{...this.getApiOptions(),onFirstValidChunk:()=>{h()},onChunk:f=>{s+=f,this.setConversationStreaming(t.convId,s,t.id);const p=this.findMessageIndex(t.id);this.updateMessageAtIndex(p,{content:s})},onReasoningChunk:f=>{o+=f;const p=this.findMessageIndex(t.id);this.updateMessageAtIndex(p,{thinking:o})},onModel:f=>{d(f)},onComplete:async(f,p,m)=>{En.stopStreaming();const y={content:f||s,thinking:p||o,timings:m};l&&!c&&(y.model=l,c=!0),await ur.updateMessage(t.id,y);const v=this.findMessageIndex(t.id),_={timings:m};y.model&&(_.model=y.model),this.updateMessageAtIndex(v,_),await ur.updateCurrentNode(t.convId,t.id),this.activeConversation?.id===t.convId&&(this.activeConversation.currNode=t.id,await this.refreshActiveMessages()),n&&await n(s),this.setConversationLoading(t.convId,!1),this.clearConversationStreaming(t.convId),En.clearConversationState(t.convId)},onError:f=>{if(En.stopStreaming(),this.isAbortError(f)){this.setConversationLoading(t.convId,!1),this.clearConversationStreaming(t.convId),En.clearConversationState(t.convId);return}console.error("Streaming error:",f),this.setConversationLoading(t.convId,!1),this.clearConversationStreaming(t.convId),En.clearConversationState(t.convId);const p=this.activeMessages.findIndex(y=>y.id===t.id);if(p!==-1){const[y]=this.activeMessages.splice(p,1);y&&ur.deleteMessage(y.id).catch(v=>{console.error("Failed to remove assistant message after error:",v)})}const m=f.name==="TimeoutError"?"timeout":"server";this.showErrorDialog(m,f.message),i&&i(f)}},t.convId)}isAbortError(e){return e instanceof Error&&(e.name==="AbortError"||e instanceof DOMException)}showErrorDialog(e,t){t&&(t==="Loading model"||t.toLowerCase().includes("loading")&&t.toLowerCase().includes("model"))||(this.errorDialogState={type:e,message:t})}dismissErrorDialog(){this.errorDialogState=null}findMessageIndex(e){return this.activeMessages.findIndex(t=>t.id===e)}updateMessageAtIndex(e,t){e!==-1&&Object.assign(this.activeMessages[e],t)}async createAssistantMessage(e){return this.activeConversation?await ur.createMessageBranch({convId:this.activeConversation.id,type:"text",role:"assistant",content:"",timestamp:Date.now(),thinking:"",children:[],model:null},e||null):null}updateConversationTimestamp(){if(!this.activeConversation)return;const e=this.conversations.findIndex(t=>t.id===this.activeConversation.id);if(e!==-1){this.conversations[e].lastModified=Date.now();const t=this.conversations.splice(e,1)[0];this.conversations.unshift(t)}}async sendMessage(e,t){if(!e.trim()&&(!t||t.length===0))return;if(this.activeConversation&&this.isConversationLoading(this.activeConversation.id)){console.log("Cannot send message: current conversation is already processing a message");return}let n=!1;if(this.activeConversation||(await this.createConversation(),n=!0),!this.activeConversation){console.error("No active conversation available for sending message");return}this.errorDialogState=null,this.setConversationLoading(this.activeConversation.id,!0),this.clearConversationStreaming(this.activeConversation.id);let i=null;try{if(i=await this.addMessage("user",e,"text","-1",t),!i)throw new Error("Failed to add user message");if(n&&e){const o=e.trim();await this.updateConversationName(this.activeConversation.id,o)}const a=await this.createAssistantMessage(i.id);if(!a)throw new Error("Failed to create assistant message");this.activeMessages.push(a);const s=this.activeMessages.slice(0,-1);await this.streamChatCompletion(s,a)}catch(a){if(this.isAbortError(a)){this.setConversationLoading(this.activeConversation.id,!1);return}if(console.error("Failed to send message:",a),this.setConversationLoading(this.activeConversation.id,!1),!this.errorDialogState)if(a instanceof Error){const s=a.name==="TimeoutError"?"timeout":"server";this.showErrorDialog(s,a.message)}else this.showErrorDialog("server","Unknown error occurred while sending message")}}async stopGeneration(){if(!this.activeConversation)return;const e=this.activeConversation.id;await this.savePartialResponseIfNeeded(e),En.stopStreaming(),Ib.abort(e),this.setConversationLoading(e,!1),this.clearConversationStreaming(e),En.clearConversationState(e)}async gracefulStop(){this.isLoading&&(En.stopStreaming(),Ib.abort(),await this.savePartialResponseIfNeeded(),this.conversationLoadingStates.clear(),this.conversationStreamingStates.clear(),this.isLoading=!1,this.currentResponse="")}async savePartialResponseIfNeeded(e){const t=e||this.activeConversation?.id;if(!t)return;const n=this.conversationStreamingStates.get(t);if(!n||!n.response.trim())return;const i=t===this.activeConversation?.id?this.activeMessages:await ur.getConversationMessages(t);if(!i.length)return;const a=i[i.length-1];if(a&&a.role==="assistant")try{const s={content:n.response};a.thinking?.trim()&&(s.thinking=a.thinking);const o=await En.getCurrentState();o&&(s.timings={prompt_n:o.promptTokens||0,predicted_n:o.tokensDecoded||0,cache_n:o.cacheTokens||0,predicted_ms:o.tokensPerSecond&&o.tokensDecoded?o.tokensDecoded/o.tokensPerSecond*1e3:void 0}),await ur.updateMessage(a.id,s),a.content=this.currentResponse,s.thinking!==void 0&&(a.thinking=s.thinking),s.timings&&(a.timings=s.timings)}catch(s){a.content=this.currentResponse,console.error("Failed to save partial response:",s)}else console.error("Last message is not an assistant message")}async updateMessage(e,t){if(this.activeConversation){this.isLoading&&this.stopGeneration();try{const n=this.findMessageIndex(e);if(n===-1){console.error("Message not found for update");return}const i=this.activeMessages[n],a=i.content;if(i.role!=="user"){console.error("Only user messages can be edited");return}const o=(await ur.getConversationMessages(this.activeConversation.id)).find(u=>u.type==="root"&&u.parent===null),l=o&&i.parent===o.id&&i.role==="user";this.updateMessageAtIndex(n,{content:t}),await ur.updateMessage(e,{content:t}),l&&t.trim()&&await this.updateConversationTitleWithConfirmation(this.activeConversation.id,t.trim(),this.titleUpdateConfirmationCallback);const c=this.activeMessages.slice(n+1);for(const u of c)await ur.deleteMessage(u.id);this.activeMessages=this.activeMessages.slice(0,n+1),this.updateConversationTimestamp(),this.setConversationLoading(this.activeConversation.id,!0),this.clearConversationStreaming(this.activeConversation.id);try{const u=await this.createAssistantMessage();if(!u)throw new Error("Failed to create assistant message");this.activeMessages.push(u),await ur.updateCurrentNode(this.activeConversation.id,u.id),this.activeConversation.currNode=u.id,await this.streamChatCompletion(this.activeMessages.slice(0,-1),u,void 0,()=>{const h=this.findMessageIndex(e);this.updateMessageAtIndex(h,{content:a})})}catch(u){console.error("Failed to regenerate response:",u),this.setConversationLoading(this.activeConversation.id,!1);const h=this.findMessageIndex(e);this.updateMessageAtIndex(h,{content:a})}}catch(n){if(this.isAbortError(n))return;console.error("Failed to update message:",n)}}}async regenerateMessage(e){if(!(!this.activeConversation||this.isLoading))try{const t=this.findMessageIndex(e);if(t===-1){console.error("Message not found for regeneration");return}if(this.activeMessages[t].role!=="assistant"){console.error("Only assistant messages can be regenerated");return}const i=this.activeMessages.slice(t);for(const a of i)await ur.deleteMessage(a.id);this.activeMessages=this.activeMessages.slice(0,t),this.updateConversationTimestamp(),this.setConversationLoading(this.activeConversation.id,!0),this.clearConversationStreaming(this.activeConversation.id);try{const a=this.activeMessages.length>0?this.activeMessages[this.activeMessages.length-1].id:null,s=await this.createAssistantMessage(a);if(!s)throw new Error("Failed to create assistant message");this.activeMessages.push(s);const o=this.activeMessages.slice(0,-1);await this.streamChatCompletion(o,s)}catch(a){console.error("Failed to regenerate response:",a),this.setConversationLoading(this.activeConversation.id,!1)}}catch(t){if(this.isAbortError(t))return;console.error("Failed to regenerate message:",t)}}async continueMessage(e){if(!(!this.activeConversation||this.isLoading))try{const t=await ur.getConversationPath(this.activeConversation.id),n=t.findIndex(s=>s.id===e);if(n===-1||t[n].role!=="assistant"){console.error("Message not found or not an assistant message");return}const i=t[n],a=t.slice(0,n+1);this.setConversationLoading(this.activeConversation.id,!0),this.clearConversationStreaming(this.activeConversation.id);try{await this.streamChatCompletion(a,i,void 0,void 0,{initialContent:i.content,initialThinking:i.thinking??""})}finally{this.setConversationLoading(this.activeConversation.id,!1)}}catch(t){if(this.isAbortError(t))return;console.error("Failed to continue message:",t)}}async updateConversationName(e,t){try{await ur.updateConversation(e,{name:t});const n=this.conversations.findIndex(i=>i.id===e);n!==-1&&(this.conversations[n].name=t),this.activeConversation?.id===e&&(this.activeConversation.name=t)}catch(n){console.error("Failed to update conversation name:",n)}}setTitleUpdateConfirmationCallback(e){this.titleUpdateConfirmationCallback=e}async updateConversationTitleWithConfirmation(e,t,n){try{if(un().askForTitleConfirmation&&n){const a=await ur.getConversation(e);if(!a||!await n(a.name,t))return!1}return await this.updateConversationName(e,t),!0}catch(i){return console.error("Failed to update conversation title with confirmation:",i),!1}}async downloadConversation(e){if(!this.activeConversation||this.activeConversation.id!==e){const t=await ur.getConversation(e);if(!t)return;const n=await ur.getConversationMessages(e),i={conv:t,messages:n};this.triggerDownload(i)}else{const t={conv:this.activeConversation,messages:this.activeMessages};this.triggerDownload(t)}}triggerDownload(e,t){const n="conv"in e?e.conv:Array.isArray(e)?e[0]?.conv:void 0;if(!n){console.error("Invalid data: missing conversation");return}const i=n.name?n.name.trim():"",a=n.id||"unknown",s=i.toLowerCase().replace(/[^a-z0-9]/gi,"_").replace(/_+/g,"_").substring(0,20),o=t||`conversation_${a}_${s}.json`,l=JSON.stringify(e,null,2),c=new Blob([l],{type:"application/json"}),u=URL.createObjectURL(c),h=document.createElement("a");h.href=u,h.download=o,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)}async exportAllConversations(){try{const e=await ur.getAllConversations();if(e.length===0)throw new Error("No conversations to export");const t=await Promise.all(e.map(async s=>{const o=await ur.getConversationMessages(s.id);return{conv:s,messages:o}})),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");return a.href=i,a.download=`all_conversations_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),oi.success(`All conversations (${e.length}) prepared for download`),e}catch(e){throw console.error("Failed to export conversations:",e),e}}async importConversations(){return new Promise((e,t)=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=async i=>{const a=i.target?.files?.[0];if(!a){t(new Error("No file selected"));return}try{const s=await a.text(),o=JSON.parse(s);let l;if(Array.isArray(o))l=o;else if(o&&typeof o=="object"&&"conv"in o&&"messages"in o)l=[o];else throw new Error("Invalid file format: expected array of conversations or single conversation object");const c=await ur.importConversations(l);await this.loadConversations(),oi.success(`Imported ${c.imported} conversation(s), skipped ${c.skipped}`);const u=l.map(h=>h.conv);e(u)}catch(s){const o=s instanceof Error?s.message:"Unknown error";console.error("Failed to import conversations:",s),oi.error("Import failed",{description:o}),t(new Error(`Import failed: ${o}`))}},n.click()})}async deleteConversation(e){try{await ur.deleteConversation(e),this.conversations=this.conversations.filter(t=>t.id!==e),this.activeConversation?.id===e&&(this.activeConversation=null,this.activeMessages=[],await Go("?new_chat=true#/"))}catch(t){console.error("Failed to delete conversation:",t)}}async getDeletionInfo(e){if(!this.activeConversation)return{totalCount:0,userMessages:0,assistantMessages:0,messageTypes:[]};const t=await ur.getConversationMessages(this.activeConversation.id),n=$7(t,e),i=[e,...n],a=t.filter(c=>i.includes(c.id));let s=0,o=0;const l=[];for(const c of a)c.role==="user"?(s++,l.includes("user message")||l.push("user message")):c.role==="assistant"&&(o++,l.includes("assistant response")||l.push("assistant response"));return{totalCount:i.length,userMessages:s,assistantMessages:o,messageTypes:l}}async deleteMessage(e){try{if(!this.activeConversation)return;const t=await ur.getConversationMessages(this.activeConversation.id),n=t.find(s=>s.id===e);if(!n){console.error("Message to delete not found");return}if(Tu(t,this.activeConversation.currNode||"",!1).some(s=>s.id===e)&&n.parent){const s=t.filter(o=>o.parent===n.parent&&o.id!==e);if(s.length>0){const o=s.reduce((c,u)=>u.timestamp>c.timestamp?u:c),l=G0(t,o.id);await ur.updateCurrentNode(this.activeConversation.id,l),this.activeConversation.currNode=l}else if(n.parent){const o=G0(t,n.parent);await ur.updateCurrentNode(this.activeConversation.id,o),this.activeConversation.currNode=o}}await ur.deleteMessageCascading(this.activeConversation.id,e),await this.refreshActiveMessages(),this.updateConversationTimestamp()}catch(t){console.error("Failed to delete message:",t)}}clearActiveConversation(){this.activeConversation=null,this.activeMessages=[],this.isLoading=!1,this.currentResponse="",En.setActiveConversation(null)}async refreshActiveMessages(){if(!this.activeConversation)return;const e=await ur.getConversationMessages(this.activeConversation.id);if(e.length===0){this.activeMessages=[];return}const t=this.activeConversation.currNode||e.reduce((i,a)=>a.timestamp>i.timestamp?a:i).id,n=Tu(e,t,!1);this.activeMessages.length=0,this.activeMessages.push(...n)}async navigateToSibling(e){if(!this.activeConversation)return;const t=await ur.getConversationMessages(this.activeConversation.id),n=t.find(s=>s.type==="root"&&s.parent===null),i=this.activeMessages.find(s=>s.role==="user"&&s.parent===n?.id),a=G0(t,e);if(await ur.updateCurrentNode(this.activeConversation.id,a),this.activeConversation.currNode=a,await this.refreshActiveMessages(),n&&this.activeMessages.length>0){const s=this.activeMessages.find(o=>o.role==="user"&&o.parent===n.id);s&&s.content.trim()&&(!i||s.id!==i.id||s.content.trim()!==i.content.trim())&&await this.updateConversationTitleWithConfirmation(this.activeConversation.id,s.content.trim(),this.titleUpdateConfirmationCallback)}}async editAssistantMessage(e,t,n){if(!(!this.activeConversation||this.isLoading))try{const i=this.findMessageIndex(e);if(i===-1){console.error("Message not found for editing");return}const a=this.activeMessages[i];if(a.role!=="assistant"){console.error("Only assistant messages can be edited with this method");return}if(n){const s=await ur.createMessageBranch({convId:a.convId,type:a.type,timestamp:Date.now(),role:a.role,content:t,thinking:a.thinking||"",children:[],model:a.model},a.parent);await ur.updateCurrentNode(this.activeConversation.id,s.id),this.activeConversation.currNode=s.id}else await ur.updateMessage(a.id,{content:t,timestamp:Date.now()}),this.updateMessageAtIndex(i,{content:t,timestamp:Date.now()});this.updateConversationTimestamp(),await this.refreshActiveMessages()}catch(i){console.error("Failed to edit assistant message:",i)}}async editMessageWithBranching(e,t){if(!(!this.activeConversation||this.isLoading))try{const n=this.findMessageIndex(e);if(n===-1){console.error("Message not found for editing");return}const i=this.activeMessages[n];if(i.role!=="user"){console.error("Only user messages can be edited");return}const a=await ur.getConversationMessages(this.activeConversation.id),s=a.find(u=>u.type==="root"&&u.parent===null),o=s&&i.parent===s.id&&i.role==="user";let l=i.parent;if(l==null){const u=a.find(h=>h.type==="root"&&h.parent===null);if(u)l=u.id;else{console.error("No root message found for editing");return}}const c=await ur.createMessageBranch({convId:i.convId,type:i.type,timestamp:Date.now(),role:i.role,content:t,thinking:i.thinking||"",children:[],extra:i.extra?JSON.parse(JSON.stringify(i.extra)):void 0,model:i.model},l);await ur.updateCurrentNode(this.activeConversation.id,c.id),this.activeConversation.currNode=c.id,this.updateConversationTimestamp(),o&&t.trim()&&await this.updateConversationTitleWithConfirmation(this.activeConversation.id,t.trim(),this.titleUpdateConfirmationCallback),await this.refreshActiveMessages(),i.role==="user"&&await this.generateResponseForMessage(c.id)}catch(n){console.error("Failed to edit message with branching:",n)}}async regenerateMessageWithBranching(e){if(!(!this.activeConversation||this.isLoading))try{const t=this.findMessageIndex(e);if(t===-1){console.error("Message not found for regeneration");return}const n=this.activeMessages[t];if(n.role!=="assistant"){console.error("Only assistant messages can be regenerated");return}const a=(await ur.getConversationMessages(this.activeConversation.id)).find(c=>c.id===n.parent);if(!a){console.error("Parent message not found for regeneration");return}this.setConversationLoading(this.activeConversation.id,!0),this.clearConversationStreaming(this.activeConversation.id);const s=await ur.createMessageBranch({convId:this.activeConversation.id,type:"text",timestamp:Date.now(),role:"assistant",content:"",thinking:"",children:[],model:null},a.id);await ur.updateCurrentNode(this.activeConversation.id,s.id),this.activeConversation.currNode=s.id,this.updateConversationTimestamp(),await this.refreshActiveMessages();const o=await ur.getConversationMessages(this.activeConversation.id),l=Tu(o,a.id,!1);await this.streamChatCompletion(l,s)}catch(t){if(this.isAbortError(t))return;console.error("Failed to regenerate message with branching:",t),this.setConversationLoading(this.activeConversation.id,!1)}}async generateResponseForMessage(e){if(this.activeConversation){this.errorDialogState=null,this.setConversationLoading(this.activeConversation.id,!0),this.clearConversationStreaming(this.activeConversation.id);try{const t=await ur.getConversationMessages(this.activeConversation.id),n=Tu(t,e,!1),i=await ur.createMessageBranch({convId:this.activeConversation.id,type:"text",timestamp:Date.now(),role:"assistant",content:"",thinking:"",children:[],model:null},e);this.activeMessages.push(i),await this.streamChatCompletion(n,i)}catch(t){console.error("Failed to generate response:",t),this.setConversationLoading(this.activeConversation.id,!1)}}}isConversationLoadingPublic(e){return this.isConversationLoading(e)}getConversationStreamingPublic(e){return this.getConversationStreaming(e)}getAllLoadingConversations(){return Array.from(this.conversationLoadingStates.keys())}getAllStreamingConversations(){return Array.from(this.conversationStreamingStates.keys())}}const mr=new RU,ld=()=>mr.conversations,bo=()=>mr.activeConversation,cd=()=>mr.activeMessages,vo=()=>mr.isLoading,J7=()=>mr.isInitialized,Z7=()=>mr.errorDialogState;mr.createConversation.bind(mr);const ew=mr.downloadConversation.bind(mr);mr.exportAllConversations.bind(mr),mr.importConversations.bind(mr);const Lb=mr.deleteConversation.bind(mr),tw=mr.sendMessage.bind(mr),rw=mr.dismissErrorDialog.bind(mr);mr.gracefulStop.bind(mr),mr.refreshActiveMessages.bind(mr);const nw=mr.navigateToSibling.bind(mr),iw=mr.editAssistantMessage.bind(mr),aw=mr.editMessageWithBranching.bind(mr),sw=mr.regenerateMessageWithBranching.bind(mr),ow=mr.continueMessage.bind(mr),lw=mr.deleteMessage.bind(mr),cw=mr.getDeletionInfo.bind(mr),uw=mr.updateConversationName.bind(mr),hw=mr.setTitleUpdateConfirmationCallback.bind(mr);function X0(){mr.stopGeneration()}const dw=()=>mr.getAllLoadingConversations(),FU=Object.freeze(Object.defineProperty({__proto__:null,activeConversation:bo,activeMessages:cd,chatStore:mr,continueMessage:ow,conversations:ld,deleteConversation:Lb,deleteMessage:lw,dismissErrorDialog:rw,downloadConversation:ew,editAssistantMessage:iw,editMessageWithBranching:aw,errorDialog:Z7,getAllLoadingConversations:dw,getDeletionInfo:cw,isInitialized:J7,isLoading:vo,navigateToSibling:nw,regenerateMessageWithBranching:sw,sendMessage:tw,setTitleUpdateConfirmationCallback:hw,stopGeneration:X0,updateConversationName:uw},Symbol.toStringTag,{value:"Module"}));async function K0(r,e="Copied to clipboard",t="Failed to copy to clipboard"){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(r),oi.success(e),!0;const n=document.createElement("textarea");n.value=r,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();const i=document.execCommand("copy");if(document.body.removeChild(n),i)return oi.success(e),!0;throw new Error("execCommand failed")}catch(n){return console.error("Failed to copy to clipboard:",n),oi.error(t),!1}}async function DU(r,e="Code copied to clipboard",t="Failed to copy code"){const n=r.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'");return K0(n,e,t)}function fw(){let r=ue(!1),e=ue(null),t=ue(null),n=null;async function i(){if(!g(r)){I(r,!0),n=En.subscribe(u=>{I(e,u,!0),u?I(t,u,!0):I(t,null)});try{const u=await En.getCurrentState();u&&(I(e,u,!0),I(t,u,!0)),En.isStreaming()&&En.startStreaming()}catch(u){console.warn("Failed to start slots monitoring:",u)}}}function a(){if(!g(r))return;I(r,!1),un().keepStatsVisible?g(t)&&I(e,g(t),!0):I(e,null),n&&(n(),n=null)}function s(){if(!g(e))return"Processing...";switch(g(e).status){case"initializing":return"Initializing...";case"preparing":if(g(e).progressPercent!==void 0){const u=o(g(e));return u!==null&&u>0?`Processing ${g(e).progressPercent}% (ETA: ${Math.round(u)}s)`:`Processing ${g(e).progressPercent}%`}return"Preparing response...";case"generating":return g(e).tokensDecoded>0?`Generating... (${g(e).tokensDecoded} tokens)`:"Generating...";default:return"Processing..."}}function o(u){if(u.progressPercent===void 0||u.progressPercent<=0||u.progressPercent>=100||!u.promptProgressTimeMs||u.promptProgressTimeMs<=0)return null;const h=u.promptProgressTimeMs/1e3,d=u.progressPercent/100;if(d<=0)return null;const p=h/d-h;return p>0?p:null}function l(){const u=g(e)||g(t);if(!u)return[];const h=[],d=un();if(u.status==="preparing"){if(u.promptTokens!==void 0&&u.promptTokens>0&&h.push(`${u.promptTokens} tokens`),u.promptProgressTimeMs!==void 0&&u.promptProgressTimeMs>0){const f=(u.promptProgressTimeMs/1e3).toFixed(2);h.push(`${f}s`)}u.promptTokensPerSecond!==void 0&&u.promptTokensPerSecond>0&&h.push(`${u.promptTokensPerSecond.toFixed(2)} tokens/s`)}if(u.status==="generating"){u.tokensDecoded>0&&h.push(`${u.tokensDecoded} tokens`);let f=null;u.generationTimeMs!==void 0&&u.generationTimeMs>0?f=(u.generationTimeMs/1e3).toFixed(2):u.tokensDecoded>0&&u.tokensPerSecond&&u.tokensPerSecond>0&&(f=(u.tokensDecoded/u.tokensPerSecond*1e3/1e3).toFixed(2)),f&&h.push(`${f}s`),d.showTokensPerSecond&&u.tokensPerSecond&&u.tokensPerSecond>0&&h.push(`${u.tokensPerSecond.toFixed(2)} tokens/s`)}if(u.contextUsed>=0&&u.contextTotal>0){const f=Math.round(u.contextUsed/u.contextTotal*100);h.push(`Context: ${u.contextUsed}/${u.contextTotal} (${f}%)`)}if(u.outputTokensUsed>0)if(u.outputTokensMax<=0)h.push(`Output: ${u.outputTokensUsed}/â`);else{const f=Math.round(u.outputTokensUsed/u.outputTokensMax*100);h.push(`Output: ${u.outputTokensUsed}/${u.outputTokensMax} (${f}%)`)}return u.speculative&&h.push("Speculative decoding enabled"),h}function c(){return g(e)!==null&&g(e).status!=="idle"}return{get processingState(){return g(e)},getProcessingDetails:l,getProcessingMessage:s,shouldShowDetails:c,startMonitoring:i,stopMonitoring:a}}const LU=r=>r;function Bb(r){const e=r-1;return e*e*e+1}function gw(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}function Y0(r,{delay:e=0,duration:t=400,easing:n=LU}={}){const i=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:a=>`opacity: ${a*i}`}}function Fs(r,{delay:e=0,duration:t=400,easing:n=Bb,x:i=0,y:a=0,opacity:s=0}={}){const o=getComputedStyle(r),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=l*(1-s),[h,d]=gw(i),[f,p]=gw(a);return{delay:e,duration:t,easing:n,css:(m,y)=>`
			transform: ${c} translate(${(1-m)*h}${d}, ${(1-m)*f}${p});
			opacity: ${l-u*y}`}}function BU(r,{delay:e=0,duration:t=400,easing:n=Bb,axis:i="y"}={}){const a=getComputedStyle(r),s=+a.opacity,o=i==="y"?"height":"width",l=parseFloat(a[o]),c=i==="y"?["top","bottom"]:["left","right"],u=c.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),h=parseFloat(a[`padding${u[0]}`]),d=parseFloat(a[`padding${u[1]}`]),f=parseFloat(a[`margin${u[0]}`]),p=parseFloat(a[`margin${u[1]}`]),m=parseFloat(a[`border${u[0]}Width`]),y=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:t,easing:n,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*s};${o}: ${v*l}px;padding-${c[0]}: ${v*h}px;padding-${c[1]}: ${v*d}px;margin-${c[0]}: ${v*f}px;margin-${c[1]}: ${v*p}px;border-${c[0]}-width: ${v*m}px;border-${c[1]}-width: ${v*y}px;min-${o}: 0`}}function pw(r,{delay:e=0,duration:t=400,easing:n=Bb,start:i=0,opacity:a=0}={}){const s=getComputedStyle(r),o=+s.opacity,l=s.transform==="none"?"":s.transform,c=1-i,u=o*(1-a);return{delay:e,duration:t,easing:n,css:(h,d)=>`
			transform: ${l} scale(${1-c*d});
			opacity: ${o-u*d}
		`}}var zU=$('<div data-slot="checkbox-indicator" class="text-current transition-none"><!></div>');function Q0(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"checked",15,!1),i=U(e,"indeterminate",15,!1),a=qe(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","class"]);var s=Z(),o=P(s);{const l=(u,h)=>{let d=()=>h?.().checked,f=()=>h?.().indeterminate;var p=zU(),m=G(p);{var y=_=>{g0(_,{class:"size-3.5"})},v=_=>{var S=Z(),A=P(S);{var C=k=>{cR(k,{class:"size-3.5"})};le(A,k=>{f()&&k(C)},!0)}w(_,S)};le(m,_=>{d()?_(y):_(v,!1)})}j(p),w(u,p)};let c=B(()=>sr("peer flex size-4 shrink-0 items-center justify-center rounded-[4px] border border-input shadow-xs transition-shadow outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:data-[state=checked]:bg-primary",e.class));he(o,()=>aI,(u,h)=>{h(u,tt({"data-slot":"checkbox",get class(){return g(c)}},()=>a,{get ref(){return t()},set ref(d){t(d)},get checked(){return n()},set checked(d){n(d)},get indeterminate(){return i()},set indeterminate(d){i(d)},children:l,$$slots:{default:!0}}))})}w(r,s),we()}var UU=$("<p>Previous version</p>"),jU=$("<!> <!>",1),HU=$("<p>Next version</p>"),qU=$("<!> <!>",1),GU=$('<div role="navigation"><!> <span class="px-1 font-mono text-xs"> </span> <!></div>');function $U(r,e){ye(e,!0);let t=U(e,"class",3,""),n=B(()=>e.siblingInfo&&e.siblingInfo.currentIndex>0),i=B(()=>e.siblingInfo&&e.siblingInfo.currentIndex<e.siblingInfo.totalSiblings-1),a=B(()=>g(i)?e.siblingInfo.siblingIds[e.siblingInfo.currentIndex+1]:null),s=B(()=>g(n)?e.siblingInfo.siblingIds[e.siblingInfo.currentIndex-1]:null);function o(){g(a)&&e.onNavigateToSibling?.(g(a))}function l(){g(s)&&e.onNavigateToSibling?.(g(s))}var c=Z(),u=P(c);{var h=d=>{var f=GU(),p=G(f);he(p,()=>In,(_,S)=>{S(_,{children:(A,C)=>{var k=jU(),M=P(k);he(M,()=>Tn,(F,z)=>{z(F,{children:(W,V)=>{{let Q=B(()=>g(n)?"":"cursor-not-allowed opacity-30"),K=B(()=>!g(n));Lr(W,{"aria-label":"Previous message version",get class(){return`h-5 w-5 p-0 ${g(Q)??""}`},get disabled(){return g(K)},onclick:l,size:"sm",variant:"ghost",children:(ie,L)=>{Xy(ie,{class:"h-3 w-3"})},$$slots:{default:!0}})}},$$slots:{default:!0}})});var N=te(M,2);he(N,()=>Mn,(F,z)=>{z(F,{children:(W,V)=>{var Q=UU();w(W,Q)},$$slots:{default:!0}})}),w(A,k)},$$slots:{default:!0}})});var m=te(p,2),y=G(m);j(m);var v=te(m,2);he(v,()=>In,(_,S)=>{S(_,{children:(A,C)=>{var k=qU(),M=P(k);he(M,()=>Tn,(F,z)=>{z(F,{children:(W,V)=>{{let Q=B(()=>g(i)?"":"cursor-not-allowed opacity-30"),K=B(()=>!g(i));Lr(W,{"aria-label":"Next message version",get class(){return`h-5 w-5 p-0 ${g(Q)??""}`},get disabled(){return g(K)},onclick:o,size:"sm",variant:"ghost",children:(ie,L)=>{p0(ie,{class:"h-3 w-3"})},$$slots:{default:!0}})}},$$slots:{default:!0}})});var N=te(M,2);he(N,()=>Mn,(F,z)=>{z(F,{children:(W,V)=>{var Q=HU();w(W,Q)},$$slots:{default:!0}})}),w(A,k)},$$slots:{default:!0}})}),j(f),Be(()=>{zt(f,"aria-label",`Message version ${e.siblingInfo.currentIndex+1} of ${e.siblingInfo.totalSiblings??""}`),er(f,1,`flex items-center gap-1 text-xs text-muted-foreground ${t()??""}`),nt(y,`${e.siblingInfo.currentIndex+1}/${e.siblingInfo.totalSiblings??""}`)}),w(d,f)};le(u,d=>{e.siblingInfo&&e.siblingInfo.totalSiblings>1&&d(h)})}w(r,c),we()}var WU=$('<div><div><!> <div class="pointer-events-auto inset-0 flex items-center gap-1 opacity-100 transition-all duration-150"><!> <!> <!> <!> <!></div></div></div> <!>',1);function mw(r,e){ye(e,!0);let t=U(e,"siblingInfo",3,null),n=U(e,"showDeleteDialog",7);function i(){e.onConfirmDelete(),e.onShowDeleteDialogChange(!1)}var a=WU(),s=P(a),o=G(s),l=G(o);{var c=A=>{$U(A,{get siblingInfo(){return t()},get onNavigateToSibling(){return e.onNavigateToSibling}})};le(l,A=>{t()&&t().totalSiblings>1&&A(c)})}var u=te(l,2),h=G(u);Od(h,{get icon(){return il},tooltip:"Copy",get onclick(){return e.onCopy}});var d=te(h,2);{var f=A=>{Od(A,{get icon(){return n6},tooltip:"Edit",get onclick(){return e.onEdit}})};le(d,A=>{e.onEdit&&A(f)})}var p=te(d,2);{var m=A=>{Od(A,{get icon(){return sc},tooltip:"Regenerate",get onclick(){return e.onRegenerate}})};le(p,A=>{e.role==="assistant"&&e.onRegenerate&&A(m)})}var y=te(p,2);{var v=A=>{Od(A,{get icon(){return bR},tooltip:"Continue",get onclick(){return e.onContinue}})};le(y,A=>{e.role==="assistant"&&e.onContinue&&A(v)})}var _=te(y,2);Od(_,{get icon(){return oc},tooltip:"Delete",get onclick(){return e.onDelete}}),j(u),j(o),j(s);var S=te(s,2);{let A=B(()=>e.deletionInfo&&e.deletionInfo.totalCount>1?`This will delete ${e.deletionInfo.totalCount} messages including: ${e.deletionInfo.userMessages} user message${e.deletionInfo.userMessages>1?"s":""} and ${e.deletionInfo.assistantMessages} assistant response${e.deletionInfo.assistantMessages>1?"s":""}. All messages in this branch and their responses will be permanently removed. This action cannot be undone.`:"Are you sure you want to delete this message? This action cannot be undone."),C=B(()=>e.deletionInfo&&e.deletionInfo.totalCount>1?`Delete ${e.deletionInfo.totalCount} Messages`:"Delete");qv(S,{title:"Delete Message",get description(){return g(A)},get confirmText(){return g(C)},cancelText:"Cancel",variant:"destructive",get icon(){return oc},onConfirm:i,onCancel:()=>e.onShowDeleteDialogChange(!1),get open(){return n()},set open(k){n(k)}})}Be(()=>{er(s,1,`relative ${e.justify==="start"?"mt-2":""} flex h-6 items-center justify-${e.justify??""}`),er(o,1,`absolute top-0 ${e.actionsPosition==="left"?"left-0":"right-0"} flex items-center gap-2 opacity-100 transition-opacity`)}),w(r,a),we()}var VU=(r,e)=>I(e,"reading"),XU=$('<button type="button" aria-label="Reading (prompt processing)"><!></button>'),KU=$("<p>Reading (prompt processing)</p>"),YU=$("<!> <!>",1),QU=(r,e)=>I(e,"generation"),JU=$('<button type="button" aria-label="Generation (token output)"><!></button>'),ZU=$("<p>Generation (token output)</p>"),ej=$("<!> <!>",1),tj=(r,e,t)=>e(g(t),"Prompt tokens"),rj=$('<button type="button" class="inline-flex items-center gap-1 rounded-sm bg-muted/40 px-1.5 py-1 hover:bg-muted/60"><!> <span> </span> <!></button>'),nj=$("<p>Copy prompt tokens</p>"),ij=$("<!> <!>",1),aj=(r,e,t)=>e(g(t),"Prompt processing time"),sj=$('<button type="button" class="inline-flex items-center gap-1 rounded-sm bg-muted/40 px-1.5 py-1 hover:bg-muted/60"><!> <span> </span> <!></button>'),oj=$("<p>Copy prompt processing time</p>"),lj=$("<!> <!>",1),cj=(r,e,t)=>e(g(t),"Prompt processing speed"),uj=$('<button type="button" class="inline-flex items-center gap-1 rounded-sm bg-muted/40 px-1.5 py-1 hover:bg-muted/60"><!> <span> </span> <!></button>'),hj=$("<p>Copy prompt processing speed</p>"),dj=$("<!> <!>",1),fj=$('<div class="inline-flex flex-wrap items-center gap-2"><!> <!> <!></div>'),gj=(r,e,t)=>e(g(t),"Generated tokens"),pj=$('<button type="button" class="inline-flex items-center gap-1 rounded-sm bg-muted/40 px-1.5 py-1 hover:bg-muted/60"><!> <span> </span> <!></button>'),mj=$("<p>Generated tokens</p>"),bj=$("<!> <!>",1),vj=(r,e,t)=>e(g(t),"Generation time"),yj=$('<button type="button" class="inline-flex items-center gap-1 rounded-sm bg-muted/40 px-1.5 py-1 hover:bg-muted/60"><!> <span> </span> <!></button>'),wj=$("<p>Generation time</p>"),xj=$("<!> <!>",1),_j=(r,e,t)=>e(g(t),"Generation speed"),Sj=$('<button type="button" class="inline-flex items-center gap-1 rounded-sm bg-muted/40 px-1.5 py-1 hover:bg-muted/60"><!> <span> </span> <!></button>'),kj=$("<p>Generation speed</p>"),Aj=$("<!> <!>",1),Cj=$('<div class="inline-flex flex-wrap items-center gap-2"><!> <!> <!></div>'),Ej=$('<div class="flex flex-wrap items-center gap-3"><div class="flex items-center gap-1 rounded-md border border-border/50 bg-muted/20 p-0.5"><!> <!></div> <!></div>');function Tj(r,e){ye(e,!0);const t=150;let n=U(e,"liveState",3,null),i=ue("generation");const a=B(()=>n()!=null&&n().status!=="idle"),s=B(()=>g(a)&&n()?.status==="preparing"),o=B(()=>g(a)&&n()?.status==="generating"),l=B(()=>g(a)&&n()?.status==="preparing"?n().promptProgressProcessed??n().promptTokens??0:e.promptTokens),c=B(()=>g(a)&&n()?.status==="preparing"&&n().promptProgressTimeMs!=null?n().promptProgressTimeMs:e.promptMs),u=B(()=>g(a)&&n()?.status==="generating"?n().tokensDecoded:e.predictedTokens),h=B(()=>g(a)&&n()?.status==="generating"?n().generationTimeMs??(n().tokensPerSecond&&n().tokensPerSecond>0?n().tokensDecoded/n().tokensPerSecond*1e3:0):e.predictedMs),d=B(()=>g(c)>0?g(l)/g(c)*1e3:n()?.promptTokensPerSecond??0),f=B(()=>g(h)>0?g(u)/g(h)*1e3:n()?.tokensPerSecond??0),p=B(()=>g(s)&&g(l)===0?"â":String(g(l))),m=B(()=>g(s)&&g(c)===0?"âs":(g(c)/1e3).toFixed(2)+"s"),y=B(()=>g(s)&&g(d)===0?"â":g(d).toFixed(2)+" tokens/s"),v=B(()=>g(o)&&g(u)===0?"â":String(g(u))),_=B(()=>g(o)&&g(h)===0?"âs":(g(h)/1e3).toFixed(2)+"s"),S=B(()=>g(o)&&g(f)===0?"â":g(f).toFixed(2)+" tokens/s");Nt(()=>{!n()||n().status==="idle"||(n().status==="preparing"?I(i,"reading"):n().status==="generating"&&I(i,"generation"))});async function A(V,Q){await K0(V,`${Q} copied`)}var C=Ej(),k=G(C),M=G(k);he(M,()=>In,(V,Q)=>{Q(V,{delayDuration:t,children:(K,ie)=>{var L=YU(),J=P(L);he(J,()=>Tn,(re,D)=>{D(re,{children:(se,ce)=>{var q=XU();q.__click=[VU,i];var ae=G(q);XP(ae,{class:"h-3.5 w-3.5 shrink-0"}),j(q),Be(()=>er(q,1,`inline-flex items-center justify-center rounded px-2 py-1.5 transition ${g(i)==="reading"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`)),w(se,q)},$$slots:{default:!0}})});var X=te(J,2);he(X,()=>Mn,(re,D)=>{D(re,{children:(se,ce)=>{var q=KU();w(se,q)},$$slots:{default:!0}})}),w(K,L)},$$slots:{default:!0}})});var N=te(M,2);he(N,()=>In,(V,Q)=>{Q(V,{delayDuration:t,children:(K,ie)=>{var L=ej(),J=P(L);he(J,()=>Tn,(re,D)=>{D(re,{children:(se,ce)=>{var q=JU();q.__click=[QU,i];var ae=G(q);yR(ae,{class:"h-3.5 w-3.5 shrink-0"}),j(q),Be(()=>er(q,1,`inline-flex items-center justify-center rounded px-2 py-1.5 transition ${g(i)==="generation"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`)),w(se,q)},$$slots:{default:!0}})});var X=te(J,2);he(X,()=>Mn,(re,D)=>{D(re,{children:(se,ce)=>{var q=ZU();w(se,q)},$$slots:{default:!0}})}),w(K,L)},$$slots:{default:!0}})}),j(k);var F=te(k,2);{var z=V=>{var Q=fj(),K=G(Q);he(K,()=>In,(J,X)=>{X(J,{delayDuration:t,children:(re,D)=>{var se=ij(),ce=P(se);he(ce,()=>Tn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=rj();Ce.__click=[tj,A,p];var Te=G(Ce);a6(Te,{class:"h-3 w-3"});var Ae=te(Te,2),be=G(Ae);j(Ae);var Ee=te(Ae,2);il(Ee,{class:"h-3 w-3 opacity-70"}),j(Ce),Be(()=>{zt(Ce,"aria-label",g(s)&&g(l)===0?"Prompt tokens: updating. Copy to clipboard":`Prompt tokens: ${g(l)}. Copy to clipboard`),nt(be,`${g(p)??""} tokens`)}),w(xe,Ce)},$$slots:{default:!0}})});var q=te(ce,2);he(q,()=>Mn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=nj();w(xe,Ce)},$$slots:{default:!0}})}),w(re,se)},$$slots:{default:!0}})});var ie=te(K,2);he(ie,()=>In,(J,X)=>{X(J,{delayDuration:t,children:(re,D)=>{var se=lj(),ce=P(se);he(ce,()=>Tn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=sj();Ce.__click=[aj,A,m];var Te=G(Ce);Yy(Te,{class:"h-3 w-3"});var Ae=te(Te,2),be=G(Ae,!0);j(Ae);var Ee=te(Ae,2);il(Ee,{class:"h-3 w-3 opacity-70"}),j(Ce),Be($e=>{zt(Ce,"aria-label",$e),nt(be,g(m))},[()=>g(s)&&g(c)===0?"Prompt processing time: updating. Copy to clipboard":`Prompt processing time: ${(g(c)/1e3).toFixed(2)} seconds. Copy to clipboard`]),w(xe,Ce)},$$slots:{default:!0}})});var q=te(ce,2);he(q,()=>Mn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=oj();w(xe,Ce)},$$slots:{default:!0}})}),w(re,se)},$$slots:{default:!0}})});var L=te(ie,2);he(L,()=>In,(J,X)=>{X(J,{delayDuration:t,children:(re,D)=>{var se=dj(),ce=P(se);he(ce,()=>Tn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=uj();Ce.__click=[cj,A,y];var Te=G(Ce);Jy(Te,{class:"h-3 w-3"});var Ae=te(Te,2),be=G(Ae,!0);j(Ae);var Ee=te(Ae,2);il(Ee,{class:"h-3 w-3 opacity-70"}),j(Ce),Be($e=>{zt(Ce,"aria-label",$e),nt(be,g(y))},[()=>g(s)&&g(d)===0?"Prompt processing speed: updating. Copy to clipboard":`Prompt processing speed: ${g(d).toFixed(2)} tokens per second. Copy to clipboard`]),w(xe,Ce)},$$slots:{default:!0}})});var q=te(ce,2);he(q,()=>Mn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=hj();w(xe,Ce)},$$slots:{default:!0}})}),w(re,se)},$$slots:{default:!0}})}),j(Q),w(V,Q)},W=V=>{var Q=Cj(),K=G(Q);he(K,()=>In,(J,X)=>{X(J,{delayDuration:t,children:(re,D)=>{var se=bj(),ce=P(se);he(ce,()=>Tn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=pj();Ce.__click=[gj,A,v];var Te=G(Ce);a6(Te,{class:"h-3 w-3"});var Ae=te(Te,2),be=G(Ae);j(Ae);var Ee=te(Ae,2);il(Ee,{class:"h-3 w-3 opacity-70"}),j(Ce),Be(()=>{zt(Ce,"aria-label",g(o)&&g(u)===0?"Generated tokens: updating. Copy to clipboard":`Generated tokens: ${g(u)}. Copy to clipboard`),nt(be,`${g(v)??""} tokens`)}),w(xe,Ce)},$$slots:{default:!0}})});var q=te(ce,2);he(q,()=>Mn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=mj();w(xe,Ce)},$$slots:{default:!0}})}),w(re,se)},$$slots:{default:!0}})});var ie=te(K,2);he(ie,()=>In,(J,X)=>{X(J,{delayDuration:t,children:(re,D)=>{var se=xj(),ce=P(se);he(ce,()=>Tn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=yj();Ce.__click=[vj,A,_];var Te=G(Ce);Yy(Te,{class:"h-3 w-3"});var Ae=te(Te,2),be=G(Ae,!0);j(Ae);var Ee=te(Ae,2);il(Ee,{class:"h-3 w-3 opacity-70"}),j(Ce),Be($e=>{zt(Ce,"aria-label",$e),nt(be,g(_))},[()=>g(o)&&g(h)===0?"Generation time: updating. Copy to clipboard":`Generation time: ${(g(h)/1e3).toFixed(2)} seconds. Copy to clipboard`]),w(xe,Ce)},$$slots:{default:!0}})});var q=te(ce,2);he(q,()=>Mn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=wj();w(xe,Ce)},$$slots:{default:!0}})}),w(re,se)},$$slots:{default:!0}})});var L=te(ie,2);he(L,()=>In,(J,X)=>{X(J,{delayDuration:t,children:(re,D)=>{var se=Aj(),ce=P(se);he(ce,()=>Tn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=Sj();Ce.__click=[_j,A,S];var Te=G(Ce);Jy(Te,{class:"h-3 w-3"});var Ae=te(Te,2),be=G(Ae,!0);j(Ae);var Ee=te(Ae,2);il(Ee,{class:"h-3 w-3 opacity-70"}),j(Ce),Be($e=>{zt(Ce,"aria-label",$e),nt(be,g(S))},[()=>g(o)&&g(f)===0?"Generation speed: updating. Copy to clipboard":`Generation speed: ${g(f).toFixed(2)} tokens per second. Copy to clipboard`]),w(xe,Ce)},$$slots:{default:!0}})});var q=te(ce,2);he(q,()=>Mn,(ae,fe)=>{fe(ae,{children:(xe,pe)=>{var Ce=kj();w(xe,Ce)},$$slots:{default:!0}})}),w(re,se)},$$slots:{default:!0}})}),j(Q),w(V,Q)};le(F,V=>{g(i)==="reading"?V(z):V(W,!1)})}j(C),w(r,C),we()}Xn(["click"]);function ud(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e.class));he(a,()=>AN,(o,l)=>{l(o,tt({"data-slot":"label",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}var Mj=$('<div class="mt-6 w-full max-w-[48rem]"><div class="processing-container svelte-1o1upd5"><span class="processing-text svelte-1o1upd5"> </span></div></div>'),Ij=(r,e)=>{H7(r.currentTarget),e.onEditedContentChange?.(r.currentTarget.value)},Oj=$("<!> Cancel",1),Nj=$("<!> Save",1),Pj=$('<div class="w-full"><textarea placeholder="Edit assistant message..."></textarea> <div class="mt-2 flex items-center justify-between"><div class="flex items-center space-x-2"><!> <!></div> <div class="flex gap-2"><!> <!></div></div></div>'),Rj=$('<pre class="raw-output svelte-1o1upd5"> </pre>'),Fj=$('<div class="text-sm whitespace-pre-wrap"> </div>'),Dj=$('<!> <span class="max-w-[180px] truncate"> </span> <!>',1),Lj=$('<span class="truncate"> </span>'),Bj=$("<!> <!>",1),zj=$('<div class="inline-flex flex-wrap items-start gap-2"><!> <!></div>'),Uj=(r,e,t)=>e(g(t).copyValue),jj=$('<button type="button" class="tool-call-badge inline-flex cursor-pointer items-center gap-1 rounded-sm bg-muted-foreground/15 px-1.5 py-0.75 hover:bg-muted-foreground/25 svelte-1o1upd5"><span class="max-w-[12rem] truncate"> </span></button>'),Hj=$('<span class="inline-flex flex-wrap items-center gap-2"><span class="inline-flex items-center gap-1"><!> <span>Tool calls:</span></span> <!></span>'),qj=$('<div role="group" aria-label="Assistant message with actions"><!> <!> <!> <div class="info my-6 grid gap-4 text-xs text-muted-foreground tabular-nums"><!> <!></div> <!></div>');function Gj(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"editedContent",7,""),i=U(e,"isEditing",3,!1),a=U(e,"shouldBranchAfterEdit",7,!1),s=U(e,"siblingInfo",3,null),o=U(e,"textareaElement",15);const l=fw();let c=B(un),u=B(P7),h=B(Mb);function d(){const L=e.message.model;return L?g(u).find(X=>X.id===L||X.model===L)?.name??L.split(/[/\\]/).pop()?.replace(/\.gguf$/i,"")??L:g(h)?g(u).find(X=>X.id===g(h))?.name??g(h):"Unknown model"}async function f(L){const J=e.message.model??g(h);if(L!==J)try{await D7(L),e.onRegenerate()}catch(X){console.error("Failed to switch model:",X)}}function p(L,J){const X=J+1,D=L.name?.trim()||`Call #${X}`,se={};if(L.name&&(se.name=L.name),L.arguments)try{se.arguments=JSON.parse(L.arguments)}catch{se.arguments=L.arguments}const ce=JSON.stringify(Object.keys(se).length>0?se:{name:L.name,arguments:L.arguments},null,2);return{label:D,copyValue:ce}}function m(L){K0(L,"Tool call copied to clipboard")}let y=B(()=>e.message.timings);var v=qj(),_=G(v);{var S=L=>{{let J=B(()=>!e.message.timestamp),X=B(()=>!!e.messageContent?.trim());dH(L,{get reasoningContent(){return e.thinkingContent},get isStreaming(){return g(J)},get hasRegularContent(){return g(X)}})}};le(_,L=>{e.thinkingContent&&L(S)})}var A=te(_,2);{var C=L=>{var J=Mj(),X=G(J),re=G(X),D=G(re,!0);j(re),j(X),j(J),Be(se=>nt(D,se),[()=>l.getProcessingMessage()]),xi(1,J,()=>Y0),w(L,J)};le(A,L=>{e.message?.role==="assistant"&&vo()&&!e.message?.content?.trim()&&L(C)})}var k=te(A,2);{var M=L=>{var J=Pj(),X=G(J);hf(X),X.__keydown=function(...xe){e.onEditKeydown?.apply(this,xe)},X.__input=[Ij,e],Fr(X,xe=>o(xe),()=>o());var re=te(X,2),D=G(re),se=G(D);Q0(se,{id:"branch-after-edit",onCheckedChange:xe=>e.onShouldBranchAfterEditChange?.(xe===!0),get checked(){return a()},set checked(xe){a(xe)}});var ce=te(se,2);ud(ce,{for:"branch-after-edit",class:"cursor-pointer text-sm text-muted-foreground",children:(xe,pe)=>{Et();var Ce=tr("Branch conversation after edit");w(xe,Ce)},$$slots:{default:!0}}),j(D);var q=te(D,2),ae=G(q);Lr(ae,{class:"h-8 px-3",get onclick(){return e.onCancelEdit},size:"sm",variant:"outline",children:(xe,pe)=>{var Ce=Oj(),Te=P(Ce);Ha(Te,{class:"mr-1 h-3 w-3"}),Et(),w(xe,Ce)},$$slots:{default:!0}});var fe=te(ae,2);{let xe=B(()=>!n()?.trim());Lr(fe,{class:"h-8 px-3",get onclick(){return e.onSaveEdit},get disabled(){return g(xe)},size:"sm",children:(pe,Ce)=>{var Te=Nj(),Ae=P(Te);g0(Ae,{class:"mr-1 h-3 w-3"}),Et(),w(pe,Te)},$$slots:{default:!0}})}j(q),j(re),j(J),Be(()=>er(X,1,`min-h-[50vh] w-full resize-y rounded-2xl px-3 py-2 text-sm ${Cb}`,"svelte-1o1upd5")),qo(X,n),w(L,J)},N=L=>{var J=Z(),X=P(J);{var re=se=>{var ce=Z(),q=P(ce);{var ae=xe=>{var pe=Rj(),Ce=G(pe,!0);j(pe),Be(()=>nt(Ce,e.messageContent||"")),w(xe,pe)},fe=xe=>{{let pe=B(()=>e.messageContent||"");gk(xe,{get content(){return g(pe)}})}};le(q,xe=>{un().disableReasoningFormat?xe(ae):xe(fe,!1)})}w(se,ce)},D=se=>{var ce=Fj(),q=G(ce,!0);j(ce),Be(()=>nt(q,e.messageContent)),w(se,ce)};le(X,se=>{e.message.role==="assistant"?se(re):se(D,!1)},!0)}w(L,J)};le(k,L=>{i()?L(M):L(N,!1)})}var F=te(k,2),z=G(F);{var W=L=>{var J=zj(),X=G(J);he(X,()=>Pb,(se,ce)=>{ce(se,{children:(q,ae)=>{var fe=Bj(),xe=P(fe);he(xe,()=>Nb,(Ce,Te)=>{Te(Ce,{class:"inline-flex items-center gap-1.5 rounded-md border border-border/50 bg-muted/30 px-2.5 py-1.5 font-medium text-foreground hover:bg-muted/50 focus:ring-2 focus:ring-ring focus:outline-none",children:(Ae,be)=>{var Ee=Dj(),$e=P(Ee);Vy($e,{class:"h-3.5 w-3.5 shrink-0"});var Ye=te($e,2),He=G(Ye,!0);j(Ye);var We=te(Ye,2);du(We,{class:"h-3.5 w-3.5 shrink-0"}),Be(rt=>nt(He,rt),[d]),w(Ae,Ee)},$$slots:{default:!0}})});var pe=te(xe,2);he(pe,()=>Ob,(Ce,Te)=>{Te(Ce,{align:"start",class:"max-h-[min(60vh,320px)] overflow-y-auto",children:(Ae,be)=>{var Ee=Z(),$e=P(Ee);dn($e,17,()=>g(u),Ye=>Ye.id,(Ye,He)=>{var We=Z(),rt=P(We);he(rt,()=>Cu,(Qe,ut)=>{ut(Qe,{onclick:()=>f(g(He).id),class:"cursor-pointer",children:(ft,ht)=>{var it=Lj(),Je=G(it,!0);j(it),Be(()=>nt(Je,g(He).name)),w(ft,it)},$$slots:{default:!0}})}),w(Ye,We)}),w(Ae,Ee)},$$slots:{default:!0}})}),w(q,fe)},$$slots:{default:!0}})});var re=te(X,2);{var D=se=>{{let ce=B(()=>g(y)?.prompt_n??0),q=B(()=>g(y)?.prompt_ms??0),ae=B(()=>g(y)?.predicted_n??0),fe=B(()=>g(y)?.predicted_ms??0),xe=B(()=>e.message.role==="assistant"&&vo()&&!e.message.timestamp?l.processingState:null);Tj(se,{get promptTokens(){return g(ce)},get promptMs(){return g(q)},get predictedTokens(){return g(ae)},get predictedMs(){return g(fe)},get liveState(){return g(xe)}})}};le(re,se=>{g(c).showMessageStats&&(g(y)||e.message.role==="assistant"&&vo())&&se(D)})}j(J),w(L,J)};le(z,L=>{e.message.role==="assistant"&&L(W)})}var V=te(z,2);{var Q=L=>{var J=Hj(),X=G(J),re=G(X);s6(re,{class:"h-3.5 w-3.5"}),Et(2),j(X);var D=te(X,2);dn(D,19,()=>e.message.tool_calls,(se,ce)=>se.name??String(ce),(se,ce,q)=>{var ae=jj();const fe=B(()=>p(g(ce),g(q)));ae.__click=[Uj,m,fe];var xe=G(ae),pe=G(xe,!0);j(xe),j(ae),Be(()=>{zt(ae,"title",g(fe).copyValue),zt(ae,"aria-label",`Copy tool call ${g(fe).label??""}`),nt(pe,g(fe).label)}),w(se,ae)}),j(J),w(L,J)};le(V,L=>{g(c).showToolCallLabels&&e.message.tool_calls&&e.message.tool_calls.length>0&&L(Q)})}j(F);var K=te(F,2);{var ie=L=>{{let J=B(()=>g(c).enableContinueButton&&!e.thinkingContent?e.onContinue:void 0);mw(L,{role:"assistant",justify:"start",actionsPosition:"left",get siblingInfo(){return s()},get showDeleteDialog(){return e.showDeleteDialog},get deletionInfo(){return e.deletionInfo},get onCopy(){return e.onCopy},get onEdit(){return e.onEdit},get onRegenerate(){return e.onRegenerate},get onContinue(){return g(J)},get onDelete(){return e.onDelete},get onConfirmDelete(){return e.onConfirmDelete},get onNavigateToSibling(){return e.onNavigateToSibling},get onShowDeleteDialogChange(){return e.onShowDeleteDialogChange}})}};le(K,L=>{e.message.timestamp&&!i()&&L(ie)})}j(v),Be(()=>er(v,1,`text-md group w-full leading-7.5 ${t()??""}`,"svelte-1o1upd5")),w(r,v),we()}Xn(["keydown","input","click"]);var $j=$("<div><!></div>");function bw(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=$j();Ht(i,s=>({"data-slot":"card",class:s,...n}),[()=>sr("flex flex-col gap-6 rounded-xl border bg-card py-6 text-card-foreground shadow-sm",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var Wj=(r,e)=>e.onEditedContentChange(r.currentTarget.value),Vj=$("<!> Cancel",1),Xj=$("<!> Send",1),Kj=$('<div class="w-full max-w-[80%]"><textarea placeholder="Edit your message..."></textarea> <div class="mt-2 flex justify-end gap-2"><!> <!></div></div>'),Yj=$('<div class="mb-2 max-w-[80%]"><!></div>'),Qj=$('<div class="text-md"><!></div>'),Jj=$('<span class="text-md whitespace-pre-wrap"> </span>'),Zj=$('<div class="max-w-[80%]"><!></div>'),eH=$("<!> <!> <!>",1),tH=$('<div aria-label="User message with actions" role="group"><!></div>');function rH(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"editedContent",7),i=U(e,"siblingInfo",3,null),a=U(e,"textareaElement",15),s=ue(!1),o=ue(void 0);const l=un();Nt(()=>{if(!g(o)||!e.message.content.trim())return;if(e.message.content.includes(`
`)){I(s,!0);return}const f=new ResizeObserver(p=>{for(const m of p){const y=m.target;I(s,y.offsetHeight>24*1.5)}});return f.observe(g(o)),()=>{f.disconnect()}});var c=tH(),u=G(c);{var h=f=>{var p=Kj(),m=G(p);hf(m),m.__keydown=function(...S){e.onEditKeydown?.apply(this,S)},m.__input=[Wj,e],Fr(m,S=>a(S),()=>a());var y=te(m,2),v=G(y);Lr(v,{class:"h-8 px-3",get onclick(){return e.onCancelEdit},size:"sm",variant:"outline",children:(S,A)=>{var C=Vj(),k=P(C);Ha(k,{class:"mr-1 h-3 w-3"}),Et(),w(S,C)},$$slots:{default:!0}});var _=te(v,2);{let S=B(()=>!n().trim());Lr(_,{class:"h-8 px-3",get onclick(){return e.onSaveEdit},get disabled(){return g(S)},size:"sm",children:(A,C)=>{var k=Xj(),M=P(k);g0(M,{class:"mr-1 h-3 w-3"}),Et(),w(A,k)},$$slots:{default:!0}})}j(y),j(p),Be(()=>er(m,1,`min-h-[60px] w-full resize-none rounded-2xl px-3 py-2 text-sm ${Cb}`)),qo(m,n),w(f,p)},d=f=>{var p=eH(),m=P(p);{var y=C=>{var k=Yj(),M=G(k);T7(M,{get attachments(){return e.message.extra},readonly:!0,imageHeight:"h-80"}),j(k),w(C,k)};le(m,C=>{e.message.extra&&e.message.extra.length>0&&C(y)})}var v=te(m,2);{var _=C=>{{let k=B(()=>g(s)?"":void 0);bw(C,{class:"max-w-[80%] rounded-[1.125rem] bg-primary px-3.75 py-1.5 text-primary-foreground data-[multiline]:py-2.5",get"data-multiline"(){return g(k)},children:(M,N)=>{var F=Z(),z=P(F);{var W=Q=>{var K=Qj(),ie=G(K);gk(ie,{class:"markdown-user-content text-primary-foreground",get content(){return e.message.content}}),j(K),Fr(K,L=>I(o,L),()=>g(o)),w(Q,K)},V=Q=>{var K=Jj(),ie=G(K,!0);j(K),Fr(K,L=>I(o,L),()=>g(o)),Be(()=>nt(ie,e.message.content)),w(Q,K)};le(z,Q=>{l.renderUserContentAsMarkdown?Q(W):Q(V,!1)})}w(M,F)},$$slots:{default:!0}})}};le(v,C=>{e.message.content.trim()&&C(_)})}var S=te(v,2);{var A=C=>{var k=Zj(),M=G(k);mw(M,{actionsPosition:"right",get deletionInfo(){return e.deletionInfo},justify:"end",get onConfirmDelete(){return e.onConfirmDelete},get onCopy(){return e.onCopy},get onDelete(){return e.onDelete},get onEdit(){return e.onEdit},get onNavigateToSibling(){return e.onNavigateToSibling},get onShowDeleteDialogChange(){return e.onShowDeleteDialogChange},get siblingInfo(){return i()},get showDeleteDialog(){return e.showDeleteDialog},role:"user"}),j(k),w(C,k)};le(S,C=>{e.message.timestamp&&C(A)})}w(f,p)};le(u,f=>{e.isEditing?f(h):f(d,!1)})}j(c),Be(()=>er(c,1,`group flex flex-col items-end gap-3 md:gap-2 ${t()??""}`)),w(r,c),we()}Xn(["keydown","input"]);function nH(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"siblingInfo",3,null),i=ue(null),a=ue(Mr(e.message.content)),s=ue(!1),o=ue(!1),l=ue(!1),c=ue(void 0),u=B(()=>{if(e.message.role==="assistant"){const F=e.message.thinking?.trim();return F||null}return null});function h(){I(s,!1),I(a,e.message.content,!0)}async function d(){let F=e.message.content;if(un().copyTextAttachmentsAsPlainText&&e.message.extra?.length){const W=[e.message.content].filter(Boolean);for(const V of e.message.extra)(V.type==="textFile"&&"content"in V||V.type==="context"&&"content"in V||V.type==="pdfFile"&&"content"in V)&&W.push(V.content);F=W.join(`

`)}await K0(F,"Message copied to clipboard"),e.onCopy?.(e.message)}function f(){e.onDelete?.(e.message),I(o,!1)}async function p(){I(i,await cw(e.message.id),!0),I(o,!0)}function m(){I(s,!0),I(a,e.message.content,!0),setTimeout(()=>{g(c)&&(g(c).focus(),g(c).setSelectionRange(g(c).value.length,g(c).value.length))},0)}function y(F){I(a,F,!0)}function v(F){F.key==="Enter"&&!F.shiftKey&&!U7(F)?(F.preventDefault(),S()):F.key==="Escape"&&(F.preventDefault(),h())}function _(){e.onRegenerateWithBranching?.(e.message)}function S(){e.message.role==="user"?e.onEditWithBranching?.(e.message,g(a).trim()):e.onEditWithReplacement?.(e.message,g(a).trim(),g(l)),I(s,!1),I(l,!1)}function A(F){I(o,F,!0)}var C=Z(),k=P(C);{var M=F=>{rH(F,{get class(){return t()},get deletionInfo(){return g(i)},get editedContent(){return g(a)},get isEditing(){return g(s)},get message(){return e.message},onCancelEdit:h,onConfirmDelete:f,onCopy:d,onDelete:p,onEdit:m,onEditKeydown:v,onEditedContentChange:y,get onNavigateToSibling(){return e.onNavigateToSibling},onSaveEdit:S,onShowDeleteDialogChange:A,get showDeleteDialog(){return g(o)},get siblingInfo(){return n()},get textareaElement(){return g(c)},set textareaElement(z){I(c,z,!0)}})},N=F=>{{let z=B(()=>e.onContinueWithMessage?()=>e.onContinueWithMessage(e.message):void 0);Gj(F,{get class(){return t()},get deletionInfo(){return g(i)},get editedContent(){return g(a)},get isEditing(){return g(s)},get message(){return e.message},get messageContent(){return e.message.content},onCancelEdit:h,onConfirmDelete:f,onCopy:d,onDelete:p,onEdit:m,onEditKeydown:v,onEditedContentChange:y,get onNavigateToSibling(){return e.onNavigateToSibling},onRegenerate:_,get onContinue(){return g(z)},onSaveEdit:S,onShowDeleteDialogChange:A,get shouldBranchAfterEdit(){return g(l)},onShouldBranchAfterEditChange:W=>I(l,W,!0),get showDeleteDialog(){return g(o)},get siblingInfo(){return n()},get thinkingContent(){return g(u)},get textareaElement(){return g(c)},set textareaElement(W){I(c,W,!0)}})}};le(k,F=>{e.message.role==="user"?F(M):F(N,!1)})}w(r,C),we()}var iH=$('<div style="height: auto; "></div>');function aH(r,e){ye(e,!0);let t=U(e,"messages",19,()=>[]),n=ue(Mr([]));function i(){const f=bo();f?ur.getConversationMessages(f.id).then(p=>{I(n,p,!0)}):I(n,[],!0)}Nt(()=>{bo()&&i()});let a=B(()=>t().length?t().map(f=>{const p=Iz(g(n),f.id);return{message:f,siblingInfo:p||{message:f,siblingIds:[f.id],currentIndex:0,totalSiblings:1}}}):[]);async function s(f){await nw(f)}async function o(f,p){e.onUserAction?.(),await aw(f.id,p),i()}async function l(f,p,m){e.onUserAction?.(),await iw(f.id,p,m),i()}async function c(f){e.onUserAction?.(),await sw(f.id),i()}async function u(f){e.onUserAction?.(),await ow(f.id),i()}async function h(f){await lw(f.id),i()}var d=iH();dn(d,21,()=>g(a),({message:f,siblingInfo:p})=>f.id,(f,p)=>{let m=()=>g(p).message,y=()=>g(p).siblingInfo;nH(f,{class:"mx-auto w-full max-w-[48rem]",get message(){return m()},get siblingInfo(){return y()},onDelete:h,onNavigateToSibling:s,onEditWithBranching:o,onEditWithReplacement:l,onRegenerateWithBranching:c,onContinueWithMessage:u})}),j(d),Be(()=>er(d,1,`flex h-full flex-col space-y-10 pt-16 md:pt-24 ${e.class??""}`)),w(r,d),we()}function sH(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"open",15,!1),i=qe(e,["$$slots","$$events","$$legacy","ref","open"]);var a=Z(),s=P(a);he(s,()=>oI,(o,l)=>{l(o,tt({"data-slot":"collapsible"},()=>i,{get ref(){return t()},set ref(c){t(c)},get open(){return n()},set open(c){n(c)}}))}),w(r,a),we()}function oH(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref"]);var i=Z(),a=P(i);he(a,()=>hI,(s,o)=>{o(s,tt({"data-slot":"collapsible-trigger"},()=>n,{get ref(){return t()},set ref(l){t(l)}}))}),w(r,i),we()}function lH(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref"]);var i=Z(),a=P(i);he(a,()=>cI,(s,o)=>{o(s,tt({"data-slot":"collapsible-content"},()=>n,{get ref(){return t()},set ref(l){t(l)}}))}),w(r,i),we()}var cH=$('<div class="flex items-center gap-2 text-muted-foreground"><!> <span class="text-sm font-medium"> </span></div> <div><!> <span class="sr-only">Toggle reasoning content</span></div>',1),uH=$('<div class="border-t border-muted px-3 pb-3"><div class="pt-3"><div class="text-xs leading-relaxed break-words whitespace-pre-wrap"> </div></div></div>'),hH=$("<!> <!>",1);function dH(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"hasRegularContent",3,!1),i=U(e,"isStreaming",3,!1);const a=un();let s=ue(Mr(a.showThoughtInProgress));Nt(()=>{n()&&e.reasoningContent&&a.showThoughtInProgress&&I(s,!1)});var o=Z(),l=P(o);he(l,()=>sH,(c,u)=>{u(c,{get class(){return`mb-6 ${t()??""}`},get open(){return g(s)},set open(h){I(s,h,!0)},children:(h,d)=>{bw(h,{class:"gap-0 border-muted bg-muted/30 py-0",children:(f,p)=>{var m=hH(),y=P(m);he(y,()=>oH,(_,S)=>{S(_,{class:"flex cursor-pointer items-center justify-between p-3",children:(A,C)=>{var k=cH(),M=P(k),N=G(M);KP(N,{class:"h-4 w-4"});var F=te(N,2),z=G(F,!0);j(F),j(M);var W=te(M,2),V=G(W);QP(V,{class:"h-4 w-4"}),Et(2),j(W),Be(Q=>{nt(z,i()?"Reasoning...":"Reasoning"),er(W,1,Q)},[()=>di(ad({variant:"ghost",size:"sm",class:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground"}))]),w(A,k)},$$slots:{default:!0}})});var v=te(y,2);he(v,()=>lH,(_,S)=>{S(_,{children:(A,C)=>{var k=uH(),M=G(k),N=G(M),F=G(N,!0);j(N),j(M),j(k),Be(()=>nt(F,e.reasoningContent??"")),w(A,k)},$$slots:{default:!0}})}),w(f,m)},$$slots:{default:!0}})},$$slots:{default:!0}})}),w(r,o),we()}const fH=2e3;var gH=$('<span class="chat-processing-info-detail svelte-1m2w9ag"> </span>'),pH=$('<div><div class="chat-processing-info-content svelte-1m2w9ag"></div></div>');function mH(r,e){ye(e,!0);const t=fw();let n=B(vo),i=B(()=>t.getProcessingDetails()),a=B(()=>g(n)||un().keepStatsVisible);Nt(()=>{const c=un().keepStatsVisible;(c||g(n))&&t.startMonitoring(),!g(n)&&!c&&setTimeout(()=>{un().keepStatsVisible||t.stopMonitoring()},fH)}),Nt(()=>{const c=bo(),u=cd();if(un().keepStatsVisible&&c){if(u.length===0){En.clearConversationState(c.id);return}let d=!1;for(let f=u.length-1;f>=0;f--){const p=u[f];if(p.role==="assistant"&&p.timings){d=!0,En.updateFromTimingData({prompt_n:p.timings.prompt_n||0,predicted_n:p.timings.predicted_n||0,predicted_per_second:p.timings.predicted_n&&p.timings.predicted_ms?p.timings.predicted_n/p.timings.predicted_ms*1e3:0,cache_n:p.timings.cache_n||0},c.id).catch(m=>{console.warn("Failed to update processing state from stored timings:",m)});break}}d||En.clearConversationState(c.id)}});var s=pH();let o;var l=G(s);dn(l,20,()=>g(i),c=>c,(c,u)=>{var h=gH(),d=G(h,!0);j(h),Be(()=>nt(d,u)),w(c,h)}),j(l),j(s),Be(c=>o=er(s,1,"chat-processing-info-container svelte-1m2w9ag",null,o,c),[()=>({visible:g(a)})]),w(r,s),we()}var bH=$('<header class="md:background-transparent pointer-events-none fixed top-0 right-0 left-0 z-50 flex items-center justify-end bg-background/40 p-4 backdrop-blur-xl md:left-[var(--sidebar-width)]"><div class="pointer-events-auto flex items-center space-x-2"><!></div></header> <!>',1);function vH(r){let e=ue(!1);function t(){I(e,!0)}var n=bH(),i=P(n),a=G(i),s=G(a);Lr(s,{variant:"ghost",size:"sm",onclick:t,children:(l,c)=>{r6(l,{class:"h-4 w-4"})},$$slots:{default:!0}}),j(a),j(i);var o=te(i,2);w$(o,{get open(){return g(e)},onOpenChange:l=>I(e,l,!0)}),w(r,n)}function yH(){ei.fetchServerProps()}var wH=$('<div><div class="rounded-md border border-yellow-200 bg-yellow-50 px-3 py-2 dark:border-yellow-800 dark:bg-yellow-950"><div class="flex items-center justify-between"><div class="flex items-center"><!> <p class="ml-2 text-sm text-yellow-800 dark:text-yellow-200">Server `/props` endpoint not available - using cached data</p></div> <button class="ml-3 flex items-center gap-1.5 rounded bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-800 hover:bg-yellow-200 disabled:opacity-50 dark:bg-yellow-900 dark:text-yellow-200 dark:hover:bg-yellow-800"><!> </button></div></div></div>');function vw(r,e){ye(e,!0);let t=U(e,"class",3,"");var n=wH(),i=G(n),a=G(i),s=G(a),o=G(s);zh(o,{class:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),Et(2),j(s);var l=te(s,2);l.__click=[yH];var c=G(l);{let h=B(()=>Au()?"animate-spin":"");sc(c,{get class(){return`h-3 w-3 ${g(h)??""}`}})}var u=te(c);j(l),j(a),j(i),j(n),Be((h,d)=>{er(n,1,`mb-3 ${t()??""}`),l.disabled=h,nt(u,` ${d??""}`)},[Au,()=>Au()?"Checking...":"Retry"]),xi(1,n,()=>Fs,()=>({y:10,duration:250})),w(r,n),we()}Xn(["click"]);function pl(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("text-lg font-semibold",e.class));he(a,()=>Kp,(o,l)=>{l(o,tt({"data-slot":"alert-dialog-title",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}function pc(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr(ad(),e.class));he(a,()=>eM,(o,l)=>{l(o,tt({"data-slot":"alert-dialog-action",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}function J0(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr(ad({variant:"outline"}),e.class));he(a,()=>rM,(o,l)=>{l(o,tt({"data-slot":"alert-dialog-cancel",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}var xH=$("<div><!></div>");function ml(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=xH();Ht(i,s=>({"data-slot":"alert-dialog-footer",class:s,...n}),[()=>sr("mt-6 flex flex-row gap-2 sm:mt-0 sm:justify-end [&>*]:flex-1 sm:[&>*]:flex-none",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var _H=$("<div><!></div>");function bl(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=_H();Ht(i,s=>({"data-slot":"alert-dialog-header",class:s,...n}),[()=>sr("flex flex-col gap-2 text-center sm:text-left",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}function yw(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("fixed inset-0 z-50 bg-black/50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0",e.class));he(a,()=>Xf,(o,l)=>{l(o,tt({"data-slot":"alert-dialog-overlay",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}var SH=$("<!> <!>",1);function vl(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","portalProps"]);var i=Z(),a=P(i);he(a,()=>Zo,(s,o)=>{o(s,tt(()=>e.portalProps,{children:(l,c)=>{var u=SH(),h=P(u);yw(h,{});var d=te(h,2);{let f=B(()=>sr("fixed z-[999999] grid w-full gap-4 border bg-background p-6 shadow-lg duration-200","right-0 bottom-0 left-0 max-h-[100dvh] translate-x-0 translate-y-0 overflow-y-auto rounded-t-lg","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-bottom-full","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:slide-in-from-bottom-full","sm:top-[50%] sm:right-auto sm:bottom-auto sm:left-[50%] sm:max-h-[100vh] sm:max-w-lg sm:translate-x-[-50%] sm:translate-y-[-50%] sm:rounded-lg","sm:data-[state=closed]:slide-out-to-bottom-0 sm:data-[state=closed]:zoom-out-95","sm:data-[state=open]:slide-in-from-bottom-0 sm:data-[state=open]:zoom-in-95",e.class));he(d,()=>GM,(p,m)=>{m(p,tt({"data-slot":"alert-dialog-content",get class(){return g(f)}},()=>n,{get ref(){return t()},set ref(y){t(y)}}))})}w(l,u)},$$slots:{default:!0}}))}),w(r,i),we()}function yl(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("text-sm text-muted-foreground",e.class));he(a,()=>um,(o,l)=>{l(o,tt({"data-slot":"alert-dialog-description",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}const wl=QT,kH=Zo,ww=100,xw=50,AH=10;function _w(r,e="white"){return new Promise((t,n)=>{try{const i=new Image;i.onload=()=>{const a=document.createElement("canvas"),s=a.getContext("2d");if(!s){n(new Error("Failed to get 2D canvas context."));return}const o=i.naturalWidth||300,l=i.naturalHeight||300;a.width=o,a.height=l,e&&(s.fillStyle=e,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,o,l),t(a.toDataURL(ya.PNG))},i.onerror=()=>{n(new Error("Failed to load SVG image. Ensure the SVG data is valid."))},i.src=r}catch(i){const s=`Error converting SVG to PNG: ${i instanceof Error?i.message:String(i)}`;console.error(s,i),n(new Error(s))}})}function Sw(r){return r===ya.SVG}function kw(r,e="white"){return new Promise((t,n)=>{try{const i=new Image;i.onload=()=>{const a=document.createElement("canvas"),s=a.getContext("2d");if(!s){n(new Error("Failed to get 2D canvas context."));return}const o=i.naturalWidth||300,l=i.naturalHeight||300;a.width=o,a.height=l,e&&(s.fillStyle=e,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,o,l),t(a.toDataURL(ya.PNG))},i.onerror=()=>{n(new Error("Failed to load WebP image. Ensure the WebP data is valid."))},i.src=r}catch(i){const s=`Error converting WebP to PNG: ${i instanceof Error?i.message:String(i)}`;console.error(s,i),n(new Error(s))}})}function Aw(r){return r===ya.WEBP}const CH={prefixLength:1024*10,suspiciousCharThresholdRatio:.15,maxAbsoluteNullBytes:2};function EH(r){return Object.values(zr).some(t=>r.toLowerCase().endsWith(t))}async function TH(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=i=>{i.target?.result!==null&&i.target?.result!==void 0?e(i.target.result):t(new Error("Failed to read file"))},n.onerror=()=>t(new Error("File reading error")),n.readAsText(r)})}function MH(r,e={}){if(!r)return!0;const t={...CH,...e},n=r.substring(0,t.prefixLength);let i=0,a=0;for(let s=0;s<n.length;s++){const o=n.charCodeAt(s);if(o===0){i++;continue}o<32&&o!==9&&o!==10&&o!==13&&(o<8||o>13&&o<27)&&a++,o===65533&&a++}return!(i>t.maxAbsoluteNullBytes||a/n.length>t.suspiciousCharThresholdRatio)}function Cw(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const a=n.result.split(",")[1];e(a)},n.onerror=()=>t(n.error),n.readAsDataURL(r)})}async function IH(r){const e=[],t=[];for(const n of r)if(wa(n.type)===an.IMAGE){if(n.preview){let i=n.preview;if(Sw(n.type))try{i=await _w(i)}catch(a){console.error("Failed to convert SVG to PNG for database storage:",a)}else if(Aw(n.type))try{i=await kw(i)}catch(a){console.error("Failed to convert WebP to PNG for database storage:",a)}e.push({type:"imageFile",name:n.name,base64Url:i})}}else if(wa(n.type)===an.AUDIO)try{const i=await Cw(n.file);e.push({type:"audioFile",name:n.name,base64Data:i,mimeType:n.type})}catch(i){console.error(`Failed to process audio file ${n.name}:`,i)}else if(wa(n.type)===an.PDF)try{const i=await Cw(n.file),a=un(),s=Rs();let o=!!a.pdfAsImage&&s;if(a.pdfAsImage&&!s&&(console.log("Non-vision model detected: forcing PDF-to-text mode and updating settings"),ln.updateConfig("pdfAsImage",!1),oi.warning("PDF setting changed: Non-vision model detected, PDFs will be processed as text instead of images.",{duration:5e3}),o=!1),o)try{const l=await s7(n.file);oi.success(`PDF "${n.name}" processed as ${l.length} images for vision model.`,{duration:3e3}),e.push({type:"pdfFile",name:n.name,content:`PDF file with ${l.length} pages`,images:l,processedAsImages:!0,base64Data:i})}catch(l){console.warn(`Failed to process PDF ${n.name} as images, falling back to text:`,l);const c=await a7(n.file);e.push({type:"pdfFile",name:n.name,content:c,processedAsImages:!1,base64Data:i})}else{const l=await a7(n.file);oi.success(`PDF "${n.name}" processed as text content.`,{duration:3e3}),e.push({type:"pdfFile",name:n.name,content:l,processedAsImages:!1,base64Data:i})}}catch(i){console.error(`Failed to process PDF file ${n.name}:`,i)}else try{const i=await TH(n.file);i.trim()===""?(console.warn(`File ${n.name} is empty and will be skipped`),t.push(n.name)):MH(i)?e.push({type:"textFile",name:n.name,content:i}):console.warn(`File ${n.name} appears to be binary and will be skipped`)}catch(i){console.error(`Failed to read file ${n.name}:`,i)}return{extras:e,emptyFiles:t}}function Ew(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>t(n.error),n.readAsDataURL(r)})}function OH(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>t(n.error),n.readAsText(r)})}async function NH(r){const e=[];for(const t of r){const i={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:t.name,size:t.size,type:t.type,file:t};try{if(wa(t.type)===an.IMAGE){let a=await Ew(t);if(Sw(t.type))try{a=await _w(a)}catch(s){console.error("Failed to convert SVG to PNG:",s)}else if(Aw(t.type))try{a=await kw(a)}catch(s){console.error("Failed to convert WebP to PNG:",s)}e.push({...i,preview:a})}else if(wa(t.type)===an.TEXT||EH(t.name))try{const a=await OH(t);e.push({...i,textContent:a})}catch(a){console.warn("Failed to read text file, adding without content:",a),e.push(i)}else if(wa(t.type)===an.PDF){e.push(i);const a=Rs(),s=ln.config;a&&!s.pdfAsImage&&oi.info("You can enable parsing PDF as images with vision models.",{duration:8e3,action:{label:"Enable PDF as Images",onClick:()=>{ln.updateConfig("pdfAsImage",!0),oi.success("PDF parsing as images enabled!",{duration:3e3})}}})}else if(wa(t.type)===an.AUDIO){const a=await Ew(t);e.push({...i,preview:a})}else e.push(i)}catch(a){console.error("Error processing file",t.name,a),e.push(i)}}return e}var PH=$('<div class="pointer-events-none fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"><div class="flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-border bg-background p-12 shadow-lg"><!> <p class="text-lg font-medium text-foreground">Attach a file</p> <p class="text-sm text-muted-foreground">Drop your files here to upload</p></div></div>');function RH(r){var e=PH(),t=G(e),n=G(t);i6(n,{class:"mb-4 h-12 w-12 text-muted-foreground"}),Et(4),j(t),j(e),w(r,e)}var FH=$('<div aria-label="Chat interface with file drop zone" class="flex h-full flex-col overflow-y-auto px-4 md:px-6" role="main"><!> <div class="pointer-events-none sticky right-0 bottom-0 left-0 mt-auto"><!> <!> <div class="conversation-chat-form pointer-events-auto rounded-t-3xl pb-4 svelte-sn2p3p"><!></div></div></div>'),DH=$('<div aria-label="Welcome screen with file drop zone" class="flex h-full items-center justify-center" role="main"><div class="w-full max-w-2xl px-4"><div class="mb-8 text-center"><h1 class="mb-2 text-3xl font-semibold tracking-tight">Delta</h1> <p class="text-lg text-muted-foreground">How can I help you today?</p></div> <!> <div><!></div></div></div>'),LH=$("<!> <!>",1),BH=$('<div class="rounded-md bg-destructive/10 px-3 py-2"><p class="font-mono text-sm break-all text-destructive"> </p> <p class="mt-1 text-xs text-muted-foreground">File type not supported</p></div>'),zH=$('<div class="space-y-2"><h4 class="text-sm font-medium text-destructive">Unsupported File Types</h4> <div class="space-y-1"></div></div>'),UH=$('<div class="rounded-md bg-destructive/10 px-3 py-2"><p class="font-mono text-sm break-all text-destructive"> </p> <p class="mt-1 text-xs text-muted-foreground"> </p></div>'),jH=$('<div class="space-y-2"><h4 class="text-sm font-medium text-destructive">Model Compatibility Issues</h4> <div class="space-y-1"></div></div>'),HH=$('<!> <div class="space-y-4"><!> <!> <div class="rounded-md bg-muted/50 p-3"><h4 class="mb-2 text-sm font-medium">This model supports:</h4> <p class="text-sm text-muted-foreground"> </p></div></div> <!>',1),qH=$("<!> <!>",1),GH=$("<!> <!> <!> <!> <!> <!> <!>",1);function Tw(r,e){ye(e,!0);let t=U(e,"showCenteredEmpty",3,!1),n=B(un),i=ue(!0),a=B(()=>!g(n).disableAutoScroll&&g(i)),s=ue(void 0),o=ue(0),l=ue(!1),c=ue(0),u,h,d=ue(!1),f=ue(Mr([])),p=ue(!1),m=ue(Mr({generallyUnsupported:[],modalityUnsupported:[],modalityReasons:{},supportedTypes:[]})),y=ue(!1),v=ue(!1),_=ue(Mr([])),S=B(()=>t()&&!bo()&&cd().length===0&&!vo()),A=B(Z7),C=B(Au),k=B(vo);async function M(){const be=bo();be&&await Lb(be.id),I(y,!1)}function N(be){be.preventDefault(),zg(o),be.dataTransfer?.types.includes("Files")&&I(l,!0)}function F(be){be.preventDefault(),zg(o,-1),g(o)===0&&I(l,!1)}function z(be){be||rw()}function W(be){be.preventDefault()}function V(be){be.preventDefault(),I(l,!1),I(o,0),be.dataTransfer?.files&&X(Array.from(be.dataTransfer.files))}function Q(be){I(f,g(f).filter(Ee=>Ee.id!==be),!0)}function K(be){X(be)}function ie(be){(be.ctrlKey||be.metaKey)&&be.shiftKey&&(be.key==="d"||be.key==="D")&&(be.preventDefault(),bo()&&I(y,!0))}function L(){if(!g(s))return;const{scrollTop:be,scrollHeight:Ee,clientHeight:$e}=g(s),He=Ee-be-$e<AH;be<g(c)&&!He?(I(p,!0),I(i,!1)):He&&g(p)&&(I(p,!1),I(i,!0)),h&&clearTimeout(h),h=setTimeout(()=>{He&&(I(p,!1),I(i,!0))},ww),I(c,be,!0)}async function J(be,Ee){const $e=Ee?await IH(Ee):void 0;if($e?.emptyFiles&&$e.emptyFiles.length>0){if(I(_,$e.emptyFiles,!0),I(v,!0),Ee){const He=new Set($e.emptyFiles);I(f,g(f).filter(We=>!He.has(We.name)),!0)}return!1}const Ye=$e?.extras;return I(p,!1),I(i,!0),await tw(be,Ye),g(n).disableAutoScroll||re(),!0}async function X(be){const Ee=[],$e=[];for(const Qe of be)zE(Qe.name,Qe.type)?Ee.push(Qe):$e.push(Qe);const{supportedFiles:Ye,unsupportedFiles:He,modalityReasons:We}=_z(Ee);if([...$e,...He].length>0){const Qe=["text files","PDFs"];Rs()&&Qe.push("images"),fl()&&Qe.push("audio files"),I(m,{generallyUnsupported:$e,modalityUnsupported:He,modalityReasons:We,supportedTypes:Qe},!0),I(d,!0)}if(Ye.length>0){const Qe=await NH(Ye);I(f,[...g(f),...Qe],!0)}}function re(be="smooth"){g(s)?.scrollTo({top:g(s)?.scrollHeight,behavior:be})}r4(()=>{g(n).disableAutoScroll||setTimeout(()=>re("instant"),xw)}),_i(()=>{g(n).disableAutoScroll||setTimeout(()=>re("instant"),xw)}),Nt(()=>{g(k)&&g(a)?u=setInterval(re,ww):u&&(clearInterval(u),u=void 0)});var D=GH();Bn("keydown",Kl,ie);var se=P(D);{var ce=be=>{RH(be)};le(se,be=>{g(l)&&be(ce)})}var q=te(se,2);vH(q);var ae=te(q,2);{var fe=be=>{var Ee=FH(),$e=G(Ee);{let ft=B(cd);aH($e,{class:"mb-16 md:mb-24",get messages(){return g(ft)},onUserAction:()=>{I(p,!1),I(i,!0),g(n).disableAutoScroll||re()}})}var Ye=te($e,2),He=G(Ye);mH(He,{});var We=te(He,2);{var rt=ft=>{vw(ft,{class:"pointer-events-auto mx-auto max-w-[48rem] px-4"})};le(We,ft=>{B7()&&ft(rt)})}var Qe=te(We,2),ut=G(Qe);j7(ut,{get isLoading(){return g(k)},onFileRemove:Q,onFileUpload:K,onSend:J,onStop:()=>X0(),showHelperText:!1,get uploadedFiles(){return g(f)},set uploadedFiles(ft){I(f,ft,!0)}}),j(Qe),j(Ye),j(Ee),Fr(Ee,ft=>I(s,ft),()=>g(s)),Bn("dragenter",Ee,N),Bn("dragleave",Ee,F),Bn("dragover",Ee,W),Bn("drop",Ee,V),Bn("scroll",Ee,L),xi(1,Ye,()=>BU,()=>({duration:150,axis:"y"})),w(be,Ee)},xe=be=>{var Ee=Z(),$e=P(Ee);{var Ye=We=>{Rae(We,{})},He=We=>{var rt=Z(),Qe=P(rt);{var ut=ht=>{pk(ht,{get error(){return ei.error}})},ft=ht=>{var it=Z(),Je=P(it);{var at=ct=>{var Se=DH(),Le=G(Se),et=G(Le),ot=te(et,2);{var mt=Yt=>{vw(Yt,{})};le(ot,Yt=>{B7()&&Yt(mt)})}var Gt=te(ot,2),jt=G(Gt);j7(jt,{get isLoading(){return g(k)},onFileRemove:Q,onFileUpload:K,onSend:J,onStop:()=>X0(),showHelperText:!0,get uploadedFiles(){return g(f)},set uploadedFiles(Yt){I(f,Yt,!0)}}),j(Gt),j(Le),j(Se),Bn("dragenter",Se,N),Bn("dragleave",Se,F),Bn("dragover",Se,W),Bn("drop",Se,V),xi(1,et,()=>Y0,()=>({duration:300})),xi(1,Gt,()=>Fs,()=>({y:10,duration:250,delay:300})),w(ct,Se)};le(Je,ct=>{ei.serverProps!=null&&ct(at)},!0)}w(ht,it)};le(Qe,ht=>{ei.error&&!ei.modelName?ht(ut):ht(ft,!1)},!0)}w(We,rt)};le($e,We=>{g(C)?We(Ye):We(He,!1)},!0)}w(be,Ee)};le(ae,be=>{g(S)?be(xe,!1):be(fe)})}var pe=te(ae,2);he(pe,()=>wl,(be,Ee)=>{Ee(be,{get open(){return g(d)},set open($e){I(d,$e,!0)},children:($e,Ye)=>{var He=Z(),We=P(He);he(We,()=>kH,(rt,Qe)=>{Qe(rt,{children:(ut,ft)=>{var ht=qH(),it=P(ht);he(it,()=>yw,(at,ct)=>{ct(at,{})});var Je=te(it,2);he(Je,()=>vl,(at,ct)=>{ct(at,{class:"max-w-md",children:(Se,Le)=>{var et=HH(),ot=P(et);he(ot,()=>bl,(Vt,gt)=>{gt(Vt,{children:(Bt,ar)=>{var Cr=LH(),de=P(Cr);he(de,()=>pl,(dt,Pt)=>{Pt(dt,{children:(or,Rr)=>{Et();var Ft=tr("File Upload Error");w(or,Ft)},$$slots:{default:!0}})});var Ve=te(de,2);he(Ve,()=>yl,(dt,Pt)=>{Pt(dt,{class:"text-sm text-muted-foreground",children:(or,Rr)=>{Et();var Ft=tr("Some files cannot be uploaded with the current model.");w(or,Ft)},$$slots:{default:!0}})}),w(Bt,Cr)},$$slots:{default:!0}})});var mt=te(ot,2),Gt=G(mt);{var jt=Vt=>{var gt=zH(),Bt=te(G(gt),2);dn(Bt,21,()=>g(m).generallyUnsupported,ar=>ar.name,(ar,Cr)=>{var de=BH(),Ve=G(de),dt=G(Ve,!0);j(Ve),Et(2),j(de),Be(()=>nt(dt,g(Cr).name)),w(ar,de)}),j(Bt),j(gt),w(Vt,gt)};le(Gt,Vt=>{g(m).generallyUnsupported.length>0&&Vt(jt)})}var Yt=te(Gt,2);{var kr=Vt=>{var gt=jH(),Bt=te(G(gt),2);dn(Bt,21,()=>g(m).modalityUnsupported,ar=>ar.name,(ar,Cr)=>{var de=UH(),Ve=G(de),dt=G(Ve,!0);j(Ve);var Pt=te(Ve,2),or=G(Pt,!0);j(Pt),j(de),Be(()=>{nt(dt,g(Cr).name),nt(or,g(m).modalityReasons[g(Cr).name]||"Not supported by current model")}),w(ar,de)}),j(Bt),j(gt),w(Vt,gt)};le(Yt,Vt=>{g(m).modalityUnsupported.length>0&&Vt(kr)})}var Ar=te(Yt,2),st=te(G(Ar),2),yt=G(st,!0);j(st),j(Ar),j(mt);var At=te(mt,2);he(At,()=>ml,(Vt,gt)=>{gt(Vt,{children:(Bt,ar)=>{var Cr=Z(),de=P(Cr);he(de,()=>pc,(Ve,dt)=>{dt(Ve,{onclick:()=>I(d,!1),children:(Pt,or)=>{Et();var Rr=tr("Got it");w(Pt,Rr)},$$slots:{default:!0}})}),w(Bt,Cr)},$$slots:{default:!0}})}),Be(Vt=>nt(yt,Vt),[()=>g(m).supportedTypes.join(", ")]),w(Se,et)},$$slots:{default:!0}})}),w(ut,ht)},$$slots:{default:!0}})}),w($e,He)},$$slots:{default:!0}})});var Ce=te(pe,2);qv(Ce,{title:"Delete Conversation",description:"Are you sure you want to delete this conversation? This action cannot be undone and will permanently remove all messages in this conversation.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive",get icon(){return oc},onConfirm:M,onCancel:()=>I(y,!1),get open(){return g(y)},set open(be){I(y,be,!0)}});var Te=te(Ce,2);_V(Te,{get emptyFiles(){return g(_)},onOpenChange:be=>{be||I(_,[],!0)},get open(){return g(v)},set open(be){I(v,be,!0)}});var Ae=te(Te,2);{let be=B(()=>g(A)?.message??""),Ee=B(()=>!!g(A)),$e=B(()=>g(A)?.type??"server");bV(Ae,{get message(){return g(be)},onOpenChange:z,get open(){return g(Ee)},get type(){return g($e)}})}w(r,D),we()}var $H=$("<input/>"),WH=$("<input/>");function Mu(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"value",15),i=U(e,"files",15),a=qe(e,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var s=Z(),o=P(s);{var l=u=>{var h=$H();Vc(h),Ht(h,d=>({"data-slot":"input",class:d,type:"file",...a}),[()=>sr("flex h-9 w-full min-w-0 rounded-md border border-input bg-transparent px-3 pt-1.5 text-sm font-medium shadow-xs ring-offset-background transition-[color,box-shadow] outline-none selection:bg-primary selection:text-primary-foreground placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-input/30","focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50","aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40",e.class)]),Fr(h,d=>t(d),()=>t()),yC(h,i),qo(h,n),w(u,h)},c=u=>{var h=WH();Vc(h),Ht(h,d=>({"data-slot":"input",class:d,type:e.type,...a}),[()=>sr("flex h-9 w-full min-w-0 rounded-md border border-input bg-background px-3 py-1 text-base shadow-xs ring-offset-background transition-[color,box-shadow] outline-none selection:bg-primary selection:text-primary-foreground placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-input/30","focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50","aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40",e.class)]),Fr(h,d=>t(d),()=>t()),qo(h,n),w(u,h)};le(o,u=>{e.type==="file"?u(l):u(c,!1)})}w(r,s),we()}var VH=$("<!> <!>",1);function Mw(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"orientation",3,"vertical"),i=qe(e,["$$slots","$$events","$$legacy","ref","class","orientation","children"]);var a=Z(),s=P(a);{let o=B(()=>sr("flex touch-none p-px transition-colors select-none",n()==="vertical"&&"h-full w-2.5 border-l border-l-transparent",n()==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e.class));he(s,()=>zN,(l,c)=>{c(l,tt({"data-slot":"scroll-area-scrollbar",get orientation(){return n()},get class(){return g(o)}},()=>i,{get ref(){return t()},set ref(u){t(u)},children:(u,h)=>{var d=VH(),f=P(d);Re(f,()=>e.children??je);var p=te(f,2);he(p,()=>HN,(m,y)=>{y(m,{"data-slot":"scroll-area-thumb",class:"relative flex-1 rounded-full bg-border"})}),w(u,d)},$$slots:{default:!0}}))})}w(r,a),we()}var XH=$("<!> <!> <!> <!>",1);function zb(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"orientation",3,"vertical"),i=U(e,"scrollbarXClasses",3,""),a=U(e,"scrollbarYClasses",3,""),s=qe(e,["$$slots","$$events","$$legacy","ref","class","orientation","scrollbarXClasses","scrollbarYClasses","children"]);var o=Z(),l=P(o);{let c=B(()=>sr("relative",e.class));he(l,()=>IN,(u,h)=>{h(u,tt({"data-slot":"scroll-area",get class(){return g(c)}},()=>s,{get ref(){return t()},set ref(d){t(d)},children:(d,f)=>{var p=XH(),m=P(p);he(m,()=>NN,(C,k)=>{k(C,{"data-slot":"scroll-area-viewport",class:"size-full rounded-[inherit] ring-ring/10 outline-ring/50 transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1 dark:ring-ring/20 dark:outline-ring/40",children:(M,N)=>{var F=Z(),z=P(F);Re(z,()=>e.children??je),w(M,F)},$$slots:{default:!0}})});var y=te(m,2);{var v=C=>{Mw(C,{orientation:"vertical",get class(){return a()}})};le(y,C=>{(n()==="vertical"||n()==="both")&&C(v)})}var _=te(y,2);{var S=C=>{Mw(C,{orientation:"horizontal",get class(){return i()}})};le(_,C=>{(n()==="horizontal"||n()==="both")&&C(S)})}var A=te(_,2);he(A,()=>$N,(C,k)=>{k(C,{})}),w(d,p)},$$slots:{default:!0}}))})}w(r,o),we()}var KH=$("<!> <!>",1),YH=(r,e)=>I(e,""),QH=$('<button class="absolute top-1/2 right-3 -translate-y-1/2 text-muted-foreground hover:text-foreground" type="button"><!></button>'),JH=$('<tr><td colspan="3" class="p-8 text-center text-sm text-muted-foreground"><!></td></tr>'),ZH=(r,e,t)=>e(g(t).id,r.shiftKey),eq=$('<tr class="cursor-pointer border-b transition-colors hover:bg-muted/50"><td class="p-3"><!></td><td class="p-3 text-sm"><div class="max-w-[17rem] truncate"> </div></td><td class="p-3 text-sm text-muted-foreground"> </td></tr>'),tq=$('<table class="w-full"><thead class="sticky top-0 z-10 bg-muted"><tr class="border-b"><th class="w-12 p-3 text-left"><!></th><th class="p-3 text-left text-sm font-medium">Conversation Name</th><th class="w-32 p-3 text-left text-sm font-medium">Messages</th></tr></thead><tbody><!></tbody></table>'),rq=$("<!> <!>",1),nq=$('<!> <div class="space-y-4"><div class="relative"><!> <!> <!></div> <div class="flex items-center justify-between text-sm text-muted-foreground"><span> <!></span></div> <div class="overflow-hidden rounded-md border"><!></div></div> <!>',1),iq=$("<!> <!>",1);function Iw(r,e){ye(e,!0);let t=U(e,"messageCountMap",19,()=>new Map),n=U(e,"open",15,!1),i=ue(""),a=ue(new ao(e.conversations.map(v=>v.id))),s=ue(null),o=B(()=>e.conversations.filter(v=>(v.name||"Untitled conversation").toLowerCase().includes(g(i).toLowerCase()))),l=B(()=>g(o).length>0&&g(o).every(v=>g(a).has(v.id))),c=B(()=>g(o).some(v=>g(a).has(v.id))&&!g(l));function u(v,_=!1){const S=new ao(g(a));if(_&&g(s)!==null){const A=g(o).findIndex(k=>k.id===g(s)),C=g(o).findIndex(k=>k.id===v);if(A!==-1&&C!==-1){const k=Math.min(A,C),M=Math.max(A,C),N=!S.has(v);for(let F=k;F<=M;F++)N?S.add(g(o)[F].id):S.delete(g(o)[F].id);I(a,S);return}}S.has(v)?S.delete(v):S.add(v),I(a,S),I(s,v,!0)}function h(){if(g(l)){const v=new ao(g(a));g(o).forEach(_=>v.delete(_.id)),I(a,v)}else{const v=new ao(g(a));g(o).forEach(_=>v.add(_.id)),I(a,v)}}function d(){const v=e.conversations.filter(_=>g(a).has(_.id));e.onConfirm(v)}function f(){I(a,new ao(e.conversations.map(v=>v.id))),I(i,""),I(s,null),e.onCancel()}let p=ue(!1);Nt(()=>{n()&&!g(p)?(I(a,new ao(e.conversations.map(v=>v.id))),I(i,""),I(s,null)):!n()&&g(p)&&e.onCancel(),I(p,n(),!0)});var m=Z(),y=P(m);he(y,()=>I2,(v,_)=>{_(v,{get open(){return n()},set open(S){n(S)},children:(S,A)=>{var C=Z(),k=P(C);he(k,()=>$y,(M,N)=>{N(M,{children:(F,z)=>{var W=iq(),V=P(W);he(V,()=>Gy,(K,ie)=>{ie(K,{class:"z-[1000000]"})});var Q=te(V,2);he(Q,()=>M2,(K,ie)=>{ie(K,{class:"z-[1000001] max-w-2xl",children:(L,J)=>{var X=nq(),re=P(X);he(re,()=>qy,(Ye,He)=>{He(Ye,{children:(We,rt)=>{var Qe=KH(),ut=P(Qe);he(ut,()=>f0,(ht,it)=>{it(ht,{children:(Je,at)=>{Et();var ct=tr();Be(()=>nt(ct,`Select Conversations to ${e.mode==="export"?"Export":"Import"}`)),w(Je,ct)},$$slots:{default:!0}})});var ft=te(ut,2);he(ft,()=>WP,(ht,it)=>{it(ht,{children:(Je,at)=>{var ct=Z(),Se=P(ct);{var Le=ot=>{var mt=tr(`Choose which conversations you want to export. Selected conversations will be downloaded
						as a JSON file.`);w(ot,mt)},et=ot=>{var mt=tr(`Choose which conversations you want to import. Selected conversations will be merged
						with your existing conversations.`);w(ot,mt)};le(Se,ot=>{e.mode==="export"?ot(Le):ot(et,!1)})}w(Je,ct)},$$slots:{default:!0}})}),w(We,Qe)},$$slots:{default:!0}})});var D=te(re,2),se=G(D),ce=G(se);Bh(ce,{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"});var q=te(ce,2);Mu(q,{placeholder:"Search conversations...",class:"pr-9 pl-9",get value(){return g(i)},set value(Ye){I(i,Ye,!0)}});var ae=te(q,2);{var fe=Ye=>{var He=QH();He.__click=[YH,i];var We=G(He);Ha(We,{class:"h-4 w-4"}),j(He),w(Ye,He)};le(ae,Ye=>{g(i)&&Ye(fe)})}j(se);var xe=te(se,2),pe=G(xe),Ce=G(pe),Te=te(Ce);{var Ae=Ye=>{var He=tr();Be(()=>nt(He,`(${g(o).length??""} shown)`)),w(Ye,He)};le(Te,Ye=>{g(i)&&Ye(Ae)})}j(pe),j(xe);var be=te(xe,2),Ee=G(be);zb(Ee,{class:"h-[400px]",children:(Ye,He)=>{var We=tq(),rt=G(We),Qe=G(rt),ut=G(Qe),ft=G(ut);Q0(ft,{get checked(){return g(l)},get indeterminate(){return g(c)},onCheckedChange:h}),j(ut),Et(2),j(Qe),j(rt);var ht=te(rt),it=G(ht);{var Je=ct=>{var Se=JH(),Le=G(Se),et=G(Le);{var ot=Gt=>{var jt=tr();Be(()=>nt(jt,`No conversations found matching "${g(i)??""}"`)),w(Gt,jt)},mt=Gt=>{var jt=tr("No conversations available");w(Gt,jt)};le(et,Gt=>{g(i)?Gt(ot):Gt(mt,!1)})}j(Le),j(Se),w(ct,Se)},at=ct=>{var Se=Z(),Le=P(Se);dn(Le,17,()=>g(o),et=>et.id,(et,ot)=>{var mt=eq();mt.__click=[ZH,u,ot];var Gt=G(mt),jt=G(Gt);{let At=B(()=>g(a).has(g(ot).id));Q0(jt,{get checked(){return g(At)},onclick:Vt=>{Vt.preventDefault(),Vt.stopPropagation(),u(g(ot).id,Vt.shiftKey)}})}j(Gt);var Yt=te(Gt),kr=G(Yt),Ar=G(kr,!0);j(kr),j(Yt);var st=te(Yt),yt=G(st,!0);j(st),j(mt),Be(At=>{zt(kr,"title",g(ot).name||"Untitled conversation"),nt(Ar,g(ot).name||"Untitled conversation"),nt(yt,At)},[()=>t().get(g(ot).id)??0]),w(et,mt)}),w(ct,Se)};le(it,ct=>{g(o).length===0?ct(Je):ct(at,!1)})}j(ht),j(We),w(Ye,We)},$$slots:{default:!0}}),j(be),j(D);var $e=te(D,2);he($e,()=>zP,(Ye,He)=>{He(Ye,{children:(We,rt)=>{var Qe=rq(),ut=P(Qe);Lr(ut,{variant:"outline",onclick:f,children:(ht,it)=>{Et();var Je=tr("Cancel");w(ht,Je)},$$slots:{default:!0}});var ft=te(ut,2);{let ht=B(()=>g(a).size===0);Lr(ft,{onclick:d,get disabled(){return g(ht)},children:(it,Je)=>{Et();var at=tr();Be(()=>nt(at,`${e.mode==="export"?"Export":"Import"} (${g(a).size??""})`)),w(it,at)},$$slots:{default:!0}})}w(We,Qe)},$$slots:{default:!0}})}),Be(()=>nt(Ce,`${g(a).size??""} of ${e.conversations.length??""} selected `)),w(L,X)},$$slots:{default:!0}})}),w(F,W)},$$slots:{default:!0}})}),w(S,C)},$$slots:{default:!0}})}),w(r,m),we()}Xn(["click"]);function Ow(r){const e=new Map;for(const t of r)e.set(t.conv.id,t.messages.length);return e}var aq=$("<!> Export conversations",1),sq=$('<li class="truncate"> </li>'),oq=$('<li class="italic"> </li>'),lq=$('<div class="mt-4 grid overflow-x-auto rounded-lg border border-border/50 bg-muted/30 p-4"><h5 class="mb-2 text-sm font-medium"> </h5> <ul class="space-y-1 text-sm text-muted-foreground"><!> <!></ul></div>'),cq=$("<!> Import conversations",1),uq=$('<li class="truncate"> </li>'),hq=$('<li class="italic"> </li>'),dq=$('<div class="mt-4 grid overflow-x-auto rounded-lg border border-border/50 bg-muted/30 p-4"><h5 class="mb-2 text-sm font-medium"> </h5> <ul class="space-y-1 text-sm text-muted-foreground"><!> <!></ul></div>'),fq=$("<!> ",1),gq=$(`<div class="space-y-6"><div class="space-y-4"><div class="grid"><h4 class="mb-2 text-sm font-medium">Export Conversations</h4> <p class="mb-4 text-sm text-muted-foreground">Download all your conversations as a JSON file. This includes all messages, attachments, and
				conversation history.</p> <!> <!></div> <div class="grid border-t border-border/30 pt-4"><h4 class="mb-2 text-sm font-medium">Import Conversations</h4> <p class="mb-4 text-sm text-muted-foreground">Import one or more conversations from a previously exported JSON file. This will merge with
				your existing conversations.</p> <!> <!></div> <div class="grid border-t border-border/30 pt-4"><h4 class="mb-2 text-sm font-medium text-destructive">Delete All Conversations</h4> <p class="mb-4 text-sm text-destructive">Permanently delete all conversations and their messages. This action cannot be undone.
				Consider exporting your conversations first if you want to keep a backup.</p> <!></div></div></div> <!> <!>`,1);function pq(r,e){ye(e,!0);let t=ue(Mr([])),n=ue(Mr([])),i=ue(!1),a=ue(!1),s=ue(!1),o=ue(!1),l=ue(!1),c=ue(Mr([])),u=ue(Mr(new Map)),h=ue(Mr([]));async function d(){if(confirm("Permanently delete all conversations and their messages? This action cannot be undone. Consider exporting first if you want a backup."))try{I(l,!0),await ur.deleteAllConversations(),await mr.loadConversations()}catch(L){console.error("Failed to delete all conversations:",L),alert("Failed to delete all conversations")}finally{I(l,!1)}}async function f(){try{const L=await ur.getAllConversations();if(L.length===0){alert("No conversations to export");return}const J=await Promise.all(L.map(async X=>{const re=await ur.getConversationMessages(X.id);return{conv:X,messages:re}}));I(u,Ow(J),!0),I(c,L,!0),I(s,!0)}catch(L){console.error("Failed to load conversations:",L),alert("Failed to load conversations")}}async function p(L){try{const J=await Promise.all(L.map(async se=>{const ce=await ur.getConversationMessages(se.id);return{conv:Yd(se),messages:Yd(ce)}})),X=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),re=URL.createObjectURL(X),D=document.createElement("a");D.href=re,D.download=`conversations_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(re),I(t,L,!0),I(i,!0),I(a,!1),I(s,!1)}catch(J){console.error("Export failed:",J),alert("Failed to export conversations")}}async function m(){try{const L=document.createElement("input");L.type="file",L.accept=".json",L.onchange=async J=>{const X=J.target?.files?.[0];if(X)try{const re=await X.text(),D=JSON.parse(re);let se;if(Array.isArray(D))se=D;else if(D&&typeof D=="object"&&"conv"in D&&"messages"in D)se=[D];else throw new Error("Invalid file format: expected array of conversations or single conversation object");I(h,se,!0),I(c,se.map(ce=>ce.conv),!0),I(u,Ow(se),!0),I(o,!0)}catch(re){const D=re instanceof Error?re.message:"Unknown error";console.error("Failed to parse file:",re),alert(`Failed to parse file: ${D}`)}},L.click()}catch(L){console.error("Import failed:",L),alert("Failed to import conversations")}}async function y(L){try{const J=new Set(L.map(re=>re.id)),X=Yd(g(h)).filter(re=>J.has(re.conv.id));await ur.importConversations(X),await mr.loadConversations(),I(n,L,!0),I(a,!0),I(i,!1),I(o,!1)}catch(J){console.error("Import failed:",J),alert("Failed to import conversations. Please check the file format.")}}var v=gq(),_=P(v),S=G(_),A=G(S),C=te(G(A),4);Lr(C,{class:"w-full justify-start justify-self-start md:w-auto",onclick:f,variant:"outline",children:(L,J)=>{var X=aq(),re=P(X);O2(re,{class:"mr-2 h-4 w-4"}),Et(),w(L,X)},$$slots:{default:!0}});var k=te(C,2);{var M=L=>{var J=lq(),X=G(J),re=G(X);j(X);var D=te(X,2),se=G(D);dn(se,17,()=>g(t).slice(0,10),ae=>ae.id,(ae,fe)=>{var xe=sq(),pe=G(xe);j(xe),Be(()=>nt(pe,`â¢ ${g(fe).name||"Untitled conversation"}`)),w(ae,xe)});var ce=te(se,2);{var q=ae=>{var fe=oq(),xe=G(fe);j(fe),Be(()=>nt(xe,`... and ${g(t).length-10} more`)),w(ae,fe)};le(ce,ae=>{g(t).length>10&&ae(q)})}j(D),j(J),Be(()=>nt(re,`Exported ${g(t).length??""} conversation${g(t).length===1?"":"s"}`)),w(L,J)};le(k,L=>{g(i)&&g(t).length>0&&L(M)})}j(A);var N=te(A,2),F=te(G(N),4);Lr(F,{class:"w-full justify-start justify-self-start md:w-auto",onclick:m,variant:"outline",children:(L,J)=>{var X=cq(),re=P(X);i6(re,{class:"mr-2 h-4 w-4"}),Et(),w(L,X)},$$slots:{default:!0}});var z=te(F,2);{var W=L=>{var J=dq(),X=G(J),re=G(X);j(X);var D=te(X,2),se=G(D);dn(se,17,()=>g(n).slice(0,10),ae=>ae.id,(ae,fe)=>{var xe=uq(),pe=G(xe);j(xe),Be(()=>nt(pe,`â¢ ${g(fe).name||"Untitled conversation"}`)),w(ae,xe)});var ce=te(se,2);{var q=ae=>{var fe=hq(),xe=G(fe);j(fe),Be(()=>nt(xe,`... and ${g(n).length-10} more`)),w(ae,fe)};le(ce,ae=>{g(n).length>10&&ae(q)})}j(D),j(J),Be(()=>nt(re,`Imported ${g(n).length??""} conversation${g(n).length===1?"":"s"}`)),w(L,J)};le(z,L=>{g(a)&&g(n).length>0&&L(W)})}j(N);var V=te(N,2),Q=te(G(V),4);Lr(Q,{variant:"destructive",class:"gap-2",onclick:d,get disabled(){return g(l)},children:(L,J)=>{var X=fq(),re=P(X);oc(re,{class:"h-4 w-4"});var D=te(re);Be(()=>nt(D,` ${g(l)?"Deletingâ¦":"Delete all conversations"}`)),w(L,X)},$$slots:{default:!0}}),j(V),j(S),j(_);var K=te(_,2);Iw(K,{get conversations(){return g(c)},get messageCountMap(){return g(u)},mode:"export",onCancel:()=>I(s,!1),onConfirm:p,get open(){return g(s)},set open(L){I(s,L,!0)}});var ie=te(K,2);Iw(ie,{get conversations(){return g(c)},get messageCountMap(){return g(u)},mode:"import",onCancel:()=>I(o,!1),onConfirm:y,get open(){return g(o)},set open(L){I(o,L,!0)}}),w(r,v),we()}function _r(r){return Math.ceil(r*1.5+2)}const Z0=[{id:"HY-2Bit",name:"HY 2Bit",description:"HY-1.8B-2Bit, a high-efficiency 2-bit LLM built for on-device deployment. This model scales the 1.8B base down to an effective 0.3B parameter footprint, requiring only 600MB of storage, making it smaller than many mobile apps.",icon:"angleslim logo.webp",models:[{name:"HY-2Bit:1.8b",display_name:"HY-2Bit 1.8B",download_url:"AngelSlim/HY-1.8B-2Bit-GGUF",file_size_gb:1.08,context_size:8192,required_ram_gb:_r(1.08),quantization:"Q4_0"}]},{id:"ministral-3",name:"Ministral 3",description:"Mistral AI's compact edge models with vision capabilities. Offers best cost-to-performance ratio for on-device deployment in 3B, 8B, 14B sizes.",icon:"ministral logo.png",models:[{name:"ministral-3:3b",display_name:"Ministral 3 3B",download_url:"mistralai/Ministral-3-3B-Instruct-GGUF",file_size_gb:2.1,context_size:16384,required_ram_gb:_r(2.1),quantization:"Q4_K_M"},{name:"ministral-3:8b",display_name:"Ministral 3 8B",download_url:"mistralai/Ministral-3-8B-Instruct-GGUF",file_size_gb:5.5,context_size:16384,required_ram_gb:_r(5.5),quantization:"Q4_K_M"},{name:"ministral-3:14b",display_name:"Ministral 3 14B",download_url:"mistralai/Ministral-3-14B-Instruct-GGUF",file_size_gb:9.5,context_size:16384,required_ram_gb:_r(9.5),quantization:"Q4_K_M"}]},{id:"qwen3-vl",name:"Qwen3 VL",description:"Alibaba's vision-language model for understanding text, images, and video. Features OCR in 32 languages, GUI agents, and spatial reasoning.",icon:"qwen logo.jpeg",models:[{name:"qwen3-vl:2b",display_name:"Qwen3 VL 2B",download_url:"Qwen/Qwen3-VL-2B-Instruct-GGUF",file_size_gb:1.8,context_size:8192,required_ram_gb:_r(1.8),quantization:"Q4_K_M"},{name:"qwen3-vl:4b",display_name:"Qwen3 VL 4B",download_url:"Qwen/Qwen3-VL-4B-Instruct-GGUF",file_size_gb:2.5,context_size:8192,required_ram_gb:_r(2.5),quantization:"Q4_K_M"},{name:"qwen3-vl:8b",display_name:"Qwen3 VL 8B",download_url:"Qwen/Qwen3-VL-8B-Instruct-GGUF",file_size_gb:5.5,context_size:8192,required_ram_gb:_r(5.5),quantization:"Q4_K_M"},{name:"qwen3-vl:30b-a3b",display_name:"Qwen3 VL 30B-A3B",download_url:"Qwen/Qwen3-VL-30B-A3B-Instruct-GGUF",file_size_gb:20,context_size:8192,required_ram_gb:_r(20),quantization:"Q4_K_M"}]},{id:"gemma-3",name:"Gemma 3",description:"Google's multimodal models built from Gemini technology. Supports 140+ languages, vision, and text tasks with up to 128K context for edge to cloud deployment.",icon:"gemma logo.svg",models:[{name:"gemma3:270m",display_name:"Gemma 3 270M",download_url:"google/gemma-3-270m-it-GGUF",file_size_gb:.2,context_size:32768,required_ram_gb:_r(.2),quantization:"Q8_0"},{name:"gemma3:1b",display_name:"Gemma 3 1B",download_url:"google/gemma-3-1b-it-GGUF",file_size_gb:.7,context_size:8192,required_ram_gb:_r(.7),quantization:"Q8_0"},{name:"gemma3:4b",display_name:"Gemma 3 4B",download_url:"google/gemma-3-4b-it-GGUF",file_size_gb:2.5,context_size:32768,required_ram_gb:_r(2.5),quantization:"Q4_K_M"},{name:"gemma3:12b",display_name:"Gemma 3 12B",download_url:"google/gemma-3-12b-it-GGUF",file_size_gb:7.3,context_size:32768,required_ram_gb:_r(7.3),quantization:"Q4_K_M"},{name:"gemma3:27b",display_name:"Gemma 3 27B",download_url:"google/gemma-3-27b-it-GGUF",file_size_gb:16.5,context_size:32768,required_ram_gb:_r(16.5),quantization:"Q4_K_M"}]},{id:"gemma3n",name:"Gemma 3N",description:"Gemma 3n Our powerful and efficient open model designed to run locally on phones, tablets, and laptops.",icon:"gemma logo.svg",models:[{name:"gemma3n:e2b",display_name:"Gemma 3N E2B",download_url:"unsloth/gemma-3n-E2B-it-GGUF",file_size_gb:3.03,context_size:32768,required_ram_gb:_r(3.03),quantization:"Q4_K_M"},{name:"gemma3n:e4b",display_name:"Gemma 3N E4B",download_url:"unsloth/gemma-3n-E4B-it-GGUF",file_size_gb:4.54,context_size:32768,required_ram_gb:_r(4.54),quantization:"Q4_K_M"}]},{id:"translate-gemma",name:"TRANSLATE GEMMA",description:"A new collection of open translation models built on Gemma 3, helping people communicate across 55 languages.",icon:"gemma logo.svg",models:[{name:"translategemma:4b",display_name:"TranslateGemma 4B",download_url:"bullerwins/translategemma-27b-it-GGUF",file_size_gb:2.49,context_size:32768,required_ram_gb:_r(2.49),quantization:"Q4_K_M"},{name:"translategemma:12b",display_name:"TranslateGemma 12B",download_url:"bullerwins/translategemma-12b-it-GGUF",file_size_gb:7.3,context_size:32768,required_ram_gb:_r(7.3),quantization:"Q4_K_M"},{name:"translategemma:27b",display_name:"TranslateGemma 27B",download_url:"bullerwins/translategemma-27b-it-GGUF",file_size_gb:16.5,context_size:32768,required_ram_gb:_r(16.5),quantization:"Q4_K_M"}]},{id:"medgemma",name:"MedGemma",description:"Collection of Gemma 3 variants for performance on medical text and image comprehension to accelerate building healthcare-based AI applications.",icon:"gemma logo.svg",models:[{name:"medgemma1.5:4b",display_name:"MedGemma 1.5 4B",download_url:"unsloth/medgemma-1.5-4b-it-GGUF",file_size_gb:2.49,context_size:32768,required_ram_gb:_r(2.49),quantization:"Q4_K_M"},{name:"medgemma:4b",display_name:"MedGemma 4B",download_url:"unsloth/medgemma-4b-it-GGUF",file_size_gb:2.49,context_size:32768,required_ram_gb:_r(2.49),quantization:"Q4_K_M"},{name:"medgemma:27b",display_name:"MedGemma 27B",download_url:"unsloth/medgemma-27b-it-GGUF",file_size_gb:16.5,context_size:32768,required_ram_gb:_r(16.5),quantization:"Q4_K_M"}]},{id:"qwen3",name:"Qwen3",description:"Alibaba's hybrid reasoning models with thinking/non-thinking modes. Excels at coding, math, and multilingual tasks across 119 languages.",icon:"qwen logo.jpeg",models:[{name:"qwen3:0.6b",display_name:"Qwen3 0.6B",download_url:"Qwen/Qwen3-0.6B-GGUF",file_size_gb:1.5,context_size:32768,required_ram_gb:_r(1.5),quantization:"F16"},{name:"qwen3:1.7b",display_name:"Qwen3 1.7B",download_url:"Qwen/Qwen3-1.7B-GGUF",file_size_gb:1.1,context_size:32768,required_ram_gb:_r(1.1),quantization:"F16"},{name:"qwen3:4b",display_name:"Qwen3 4B",download_url:"Qwen/Qwen3-4B-GGUF",file_size_gb:2.5,context_size:32768,required_ram_gb:_r(2.5),quantization:"Q4_K_M"},{name:"qwen3:8b",display_name:"Qwen3 8B",download_url:"Qwen/Qwen3-8B-GGUF",file_size_gb:5,context_size:32768,required_ram_gb:_r(5),quantization:"Q4_K_M"},{name:"qwen3:14b",display_name:"Qwen3 14B",download_url:"Qwen/Qwen3-14B-GGUF",file_size_gb:9,context_size:32768,required_ram_gb:_r(9),quantization:"Q4_K_M"},{name:"qwen3:30b-a3b",display_name:"Qwen3 30B-A3B",download_url:"Qwen/Qwen3-30B-A3B-GGUF",file_size_gb:20,context_size:32768,required_ram_gb:_r(20),quantization:"Q4_K_M"}]},{id:"glm",name:"GLM",description:"Zhipu AI's agentic reasoning and coding models. Built for software engineering, browser automation, and multi-turn tool use.",icon:"glm logo.svg",models:[{name:"glm-4.7:flash",display_name:"GLM 4.7 Flash",download_url:"unsloth/GLM-4.7-Flash-GGUF",file_size_gb:18.3,context_size:131072,required_ram_gb:_r(18.3),quantization:"Q4_K_M"},{name:"GML-4.6V-Flash",display_name:"GLM 4.6V Flash",download_url:"ggml-org/GLM-4.6V-Flash-GGUF",file_size_gb:6.17,context_size:131072,required_ram_gb:_r(6.17),quantization:"Q4_K_M"},{name:"AutoGLM-Phone:9B",display_name:"GLM 4.1V 9B Base",download_url:"ggml-org/AutoGLM-Phone-9B-GGUF",file_size_gb:6.17,context_size:65536,required_ram_gb:_r(6.17),quantization:"Q4_K_M"}]},{id:"devstral-2",name:"Devstral 2",description:"Mistral AI's agentic coding models for software engineering tasks. Excels at exploring codebases, multi-file editing, and powering code agents.",icon:"ministral logo.png",models:[{name:"devstral-2:24b",display_name:"Devstral 2 24B",download_url:"mistralai/Devstral-2-24B-Instruct-GGUF",file_size_gb:15,context_size:131072,required_ram_gb:_r(15),quantization:"Q4_K_M"},{name:"devstral-2:123b",display_name:"Devstral 2 123B",download_url:"mistralai/Devstral-2-123B-Instruct-GGUF",file_size_gb:75,context_size:131072,required_ram_gb:_r(75),quantization:"Q4_K_M"}]},{id:"nemotron-nano-3",name:"Nemotron Nano 3",description:"NVIDIA's efficient hybrid MoE model for agentic AI. Built for reasoning, coding, and tool use with 1M token context and 4x faster throughput.",icon:"nemotron logo.png",models:[{name:"nemotron-nano-3:30b-a3b",display_name:"Nemotron Nano 3 30B-A3B",download_url:"nvidia/Nemotron-Nano-3-30B-A3B-GGUF",file_size_gb:20,context_size:1048576,required_ram_gb:_r(20),quantization:"Q4_K_M"}]},{id:"gpt-oss",name:"GPT-OSS",description:"OpenAI's first open-weight models since GPT-2. Built for reasoning, agentic tasks, and developer use with function calling and tool use capabilities.",icon:"GPT logo.png",models:[{name:"gpt-oss:20b",display_name:"GPT-OSS 20B",download_url:"openai/gpt-oss-20b-GGUF",file_size_gb:12,context_size:131072,required_ram_gb:_r(12),quantization:"Q4_K_M"},{name:"gpt-oss:120b",display_name:"GPT-OSS 120B",download_url:"openai/gpt-oss-120b-GGUF",file_size_gb:70,context_size:131072,required_ram_gb:_r(70),quantization:"Q4_K_M"}]},{id:"qwen3-coder",name:"Qwen3 Coder",description:"Alibaba's specialized coding model for agentic software engineering. Optimized for function calling, tool use, and repository-scale reasoning.",icon:"qwen logo.jpeg",models:[{name:"qwen3-coder:30b-a3b",display_name:"Qwen3 Coder 30B-A3B",download_url:"Qwen/Qwen3-Coder-30B-A3B-GGUF",file_size_gb:20,context_size:131072,required_ram_gb:_r(20),quantization:"Q4_K_M"}]},{id:"deepseek-r1",name:"DeepSeek R1",description:"DeepSeek-R1 is a family of open reasoning models with performance approaching that of leading models, such as O3 and Gemini 2.5 Pro.",icon:"deepseek logo.webp",models:[{name:"deepseek-r1:1.5b",display_name:"DeepSeek R1 1.5B",download_url:"unsloth/DeepSeek-R1-Distill-Qwen-1.5B-GGUF",file_size_gb:1.89,context_size:131072,required_ram_gb:_r(1.89),quantization:"Q8_0"},{name:"deepseek-r1:7b",display_name:"DeepSeek R1 7B",download_url:"unsloth/DeepSeek-R1-Distill-Qwen-7B-GGUF",file_size_gb:4.68,context_size:131072,required_ram_gb:_r(4.68),quantization:"Q4_K_M"},{name:"deepseek-r1:8b",display_name:"DeepSeek R1 8B",download_url:"unsloth/DeepSeek-R1-Distill-Llama-8B-GGUF",file_size_gb:4.92,context_size:131072,required_ram_gb:_r(4.92),quantization:"Q4_K_M"},{name:"deepseek-r1:14b",display_name:"DeepSeek R1 14B",download_url:"unsloth/DeepSeek-R1-Distill-Qwen-14B-GGUF",file_size_gb:8.99,context_size:131072,required_ram_gb:_r(8.99),quantization:"Q4_K_M"},{name:"deepseek-r1:32b",display_name:"DeepSeek R1 32B",download_url:"unsloth/DeepSeek-R1-Distill-Qwen-32B-GGUF",file_size_gb:19.9,context_size:131072,required_ram_gb:_r(19.9),quantization:"Q4_K_M"}]},{id:"deepseek-ocr",name:"DeepSeek OCR",description:"DeepSeek-OCR is a vision-language model that can perform token-efficient OCR.",icon:"deepseek logo.webp",models:[{name:"deepseek-ocr",display_name:"DeepSeek OCR",download_url:"NexaAI/DeepSeek-OCR-GGUF",file_size_gb:2.61,context_size:131072,required_ram_gb:_r(2.61),quantization:"Q6_K"}]},{id:"deepseek-coder",name:"DeepSeek Coder",description:"DeepSeek-Coder is a coding model that can perform token-efficient coding.",icon:"deepseek logo.webp",models:[{name:"deepseek-coder-1.3b",display_name:"DeepSeek Coder 1.3B",download_url:"TheBloke/deepseek-coder-1.3b-instruct-GGUF",file_size_gb:1.43,context_size:131072,required_ram_gb:_r(1.43),quantization:"Q8_0"},{name:"deepseek-coder-6.7b",display_name:"DeepSeek Coder 6.7B",download_url:"TheBloke/deepseek-coder-6.7B-instruct-GGUF",file_size_gb:6.7,context_size:131072,required_ram_gb:_r(6.7),quantization:"Q4_K_M"},{name:"deepseek-coder-7b",display_name:"DeepSeek Coder 7B",download_url:"mradermacher/deepseek-coder-7b-instruct-v1.5-i1-GGUF",file_size_gb:4.22,context_size:131072,required_ram_gb:_r(4.22),quantization:"Q4_K_M"}]}];function mq(){return Z0.flatMap(r=>r.models)}function e1(r){return mq().find(e=>e.name===r)}const xl={gemma:"gemma logo.svg",qwen:"qwen logo.jpeg",ministral:"ministral logo.png",glm:"glm logo.svg",nemotron:"nemotron logo.png",gpt:"GPT logo.png",deepseek:"deepseek logo.webp",angelslim:"angelslim logo.webp"};function Ub(r){return/\.(svg|png|jpe?g|webp)$/i.test(r.trim())}function bq(r){if(e1(r)){for(const n of Z0)if(n.models.some(i=>i.name===r))return n.icon}const t=r.toLowerCase();return t.includes("gemma")?xl.gemma:t.includes("qwen")?xl.qwen:t.includes("ministral")||t.includes("mistral")||t.includes("devstral")?xl.ministral:t.includes("glm")?xl.glm:t.includes("nemotron")?xl.nemotron:t.includes("gpt")?xl.gpt:t.includes("deepseek")?xl.deepseek:t.includes("angleslim")?xl.angelslim:"â"}const Nw=[4096,8192,16384,32768];function vq(r){return r==null||r<=0?[...Nw]:Nw.filter(e=>e<=r)}function yq(r,e){const t=r<1,n=r*(t?1.5:1.24);if(e<=4096)return Math.round(n*10)/10;const s=Math.log2(e/4096)*(t?.165:.08)*r;return Math.round((n+s)*10)/10}function wq(r,e){if(r.required_ram_gb<=e)return[];const t=[],n={...r,name:`${r.name}-q4`,display_name:`${r.display_name} (Q4)`,file_size_gb:r.file_size_gb*.6,required_ram_gb:_r(r.file_size_gb*.6),quantization:"Q4_K_M"};n.required_ram_gb<=e&&t.push(n);const i={...r,name:`${r.name}-q5`,display_name:`${r.display_name} (Q5)`,file_size_gb:r.file_size_gb*.7,required_ram_gb:_r(r.file_size_gb*.7),quantization:"Q5_K_M"};return i.required_ram_gb<=e&&t.push(i),t}var xq=$('<img alt="" class="h-6 w-6 object-contain"/>'),_q=$('<div class="flex h-8 w-8 flex-shrink-0 items-center justify-center overflow-hidden rounded-full bg-muted text-lg"><!></div>'),Sq=$('<span class="rounded bg-primary/20 px-2 py-0.5 text-xs text-primary">Installed</span>'),kq=$("<span>â¢</span> <span> </span>",1),Aq=$('<div class="flex items-center gap-3 text-xs text-muted-foreground"><span> </span> <span>â¢</span> <span> </span> <!></div>'),Cq=$('<div class="inline-flex cursor-help items-center gap-1 text-xs text-destructive"><!> <span> </span></div>'),Eq=$("<li> </li>"),Tq=$('<p class="mt-2 font-medium">Consider these smaller variants:</p> <ul class="list-inside list-disc text-xs"></ul>',1),Mq=$('<div class="space-y-1 text-sm"><p> </p> <p> </p> <!></div>'),Iq=$("<!> <!>",1),Oq=$('<p class="text-xs text-destructive"> </p>'),Nq=$('<div class="mt-3 space-y-1.5"><div class="flex items-center justify-between text-xs text-muted-foreground"><span class="font-medium"> </span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-muted"><div class="h-full rounded-full bg-primary transition-all duration-300 ease-out"></div></div> <!></div>'),Pq=$("<!> <!>",1),Rq=$("<p> </p>"),Fq=$("<!> <!>",1),Dq=$("<!> Incompatible",1),Lq=$('<div class="space-y-1 text-sm"><p> </p> <p> </p></div>'),Bq=$("<!> <!>",1),zq=$('<div><!> <div class="min-w-0 flex-1"><div class="mb-1 flex items-center gap-2"><h4> </h4> <!></div> <!> <!></div> <div class="flex flex-shrink-0 items-center gap-2"><!></div></div>');function Uq(r,e){ye(e,!0);let t=U(e,"downloading",3,!1);const n=B(()=>e.model.icon??e.familyIcon??""),i=B(()=>e.model.required_ram_gb<=e.systemRAMGB),a=B(()=>e.systemRAMGB<e.model.required_ram_gb),s=B(()=>g(a)?wq(e.model,e.systemRAMGB):[]);function o(W){return W>=1e6?`${(W/1e6).toFixed(1)}M ctx`:W>=1e3?`${(W/1e3).toFixed(0)}k ctx`:`${W} ctx`}function l(W){return W<1?`${(W*1024).toFixed(0)} MB`:`${W.toFixed(1)} GB`}var c=zq(),u=G(c);{var h=W=>{var V=_q(),Q=G(V);{var K=L=>{var J=xq();Be(X=>zt(J,"src",X),[()=>`${Si}/${encodeURIComponent(g(n))}`]),w(L,J)},ie=L=>{var J=tr();Be(()=>nt(J,g(n))),w(L,J)};le(Q,L=>{Ub(g(n))?L(K):L(ie,!1)})}j(V),w(W,V)};le(u,W=>{g(n)&&W(h)})}var d=te(u,2),f=G(d),p=G(f),m=G(p,!0);j(p);var y=te(p,2);{var v=W=>{var V=Sq();w(W,V)};le(y,W=>{e.isInstalled&&W(v)})}j(f);var _=te(f,2);{var S=W=>{var V=Aq(),Q=G(V),K=G(Q,!0);j(Q);var ie=te(Q,4),L=G(ie,!0);j(ie);var J=te(ie,2);{var X=re=>{var D=kq(),se=te(P(D),2),ce=G(se,!0);j(se),Be(()=>nt(ce,e.model.quantization)),w(re,D)};le(J,re=>{e.model.quantization&&re(X)})}j(V),Be((re,D)=>{nt(K,re),nt(L,D)},[()=>l(e.model.file_size_gb),()=>o(e.model.context_size)]),w(W,V)},A=W=>{var V=Z(),Q=P(V);he(Q,()=>gl,(K,ie)=>{ie(K,{children:(L,J)=>{var X=Z(),re=P(X);he(re,()=>In,(D,se)=>{se(D,{children:(ce,q)=>{var ae=Iq(),fe=P(ae);he(fe,()=>Tn,(pe,Ce)=>{Ce(pe,{children:(Te,Ae)=>{var be=Cq(),Ee=G(be);Ky(Ee,{class:"h-3 w-3"});var $e=te(Ee,2),Ye=G($e);j($e),j(be),Be(()=>nt(Ye,`Requires Mac with ${e.model.required_ram_gb??""} GB+ of memory`)),w(Te,be)},$$slots:{default:!0}})});var xe=te(fe,2);he(xe,()=>Mn,(pe,Ce)=>{Ce(pe,{children:(Te,Ae)=>{var be=Mq(),Ee=G(be),$e=G(Ee);j(Ee);var Ye=te(Ee,2),He=G(Ye);j(Ye);var We=te(Ye,2);{var rt=Qe=>{var ut=Tq(),ft=te(P(ut),2);dn(ft,21,()=>g(s),ht=>ht.name,(ht,it)=>{var Je=Eq(),at=G(Je,!0);j(Je),Be(()=>nt(at,g(it).display_name)),w(ht,Je)}),j(ft),w(Qe,ut)};le(We,Qe=>{g(s).length>0&&Qe(rt)})}j(be),Be(()=>{nt($e,`This model requires ${e.model.required_ram_gb??""} GB of RAM.`),nt(He,`Your system has ${e.systemRAMGB??""} GB available.`)}),w(Te,be)},$$slots:{default:!0}})}),w(ce,ae)},$$slots:{default:!0}})}),w(L,X)},$$slots:{default:!0}})}),w(W,V)};le(_,W=>{g(i)?W(S):W(A,!1)})}var C=te(_,2);{var k=W=>{var V=Nq(),Q=G(V),K=G(Q),ie=G(K);j(K);var L=te(K,2),J=G(L);j(L),j(Q);var X=te(Q,2),re=G(X);j(X);var D=te(X,2);{var se=ce=>{var q=Oq(),ae=G(q,!0);j(q),Be(()=>nt(ae,e.downloadProgress.error_message)),w(ce,q)};le(D,ce=>{e.downloadProgress.failed&&e.downloadProgress.error_message&&ce(se)})}j(V),Be((ce,q,ae,fe)=>{nt(ie,`${ce??""}%`),nt(J,`${q??""} MB / ${ae??""} MB`),Ho(re,`width: ${fe??""}%;`)},[()=>e.downloadProgress.progress.toFixed(1),()=>(e.downloadProgress.current_bytes/1048576).toFixed(1),()=>(e.downloadProgress.total_bytes/1048576).toFixed(1),()=>Math.max(0,Math.min(100,e.downloadProgress.progress))]),w(W,V)};le(C,W=>{t()&&e.downloadProgress&&W(k)})}j(d);var M=te(d,2),N=G(M);{var F=W=>{},z=W=>{var V=Z(),Q=P(V);{var K=L=>{var J=Z(),X=P(J);{var re=D=>{var se=Z(),ce=P(se);he(ce,()=>gl,(q,ae)=>{ae(q,{children:(fe,xe)=>{var pe=Z(),Ce=P(pe);he(Ce,()=>In,(Te,Ae)=>{Ae(Te,{children:(be,Ee)=>{var $e=Fq(),Ye=P($e);he(Ye,()=>Tn,(We,rt)=>{rt(We,{children:(Qe,ut)=>{var ft=Pq(),ht=P(ft);{var it=at=>{Lr(at,{variant:"ghost",size:"icon",class:"h-8 w-8 rounded-full border border-border bg-muted text-muted-foreground hover:bg-accent hover:text-destructive",onclick:()=>e.onStopDownload(e.model.name),children:(ct,Se)=>{Ha(ct,{class:"h-4 w-4"})},$$slots:{default:!0}})};le(ht,at=>{t()&&e.onStopDownload&&at(it)})}var Je=te(ht,2);Lr(Je,{variant:"default",size:"sm",onclick:()=>e.onDownload(e.model.name),get disabled(){return t()},children:(at,ct)=>{var Se=Z(),Le=P(Se);{var et=mt=>{uo(mt,{class:"h-4 w-4 animate-spin"})},ot=mt=>{O2(mt,{class:"h-4 w-4"})};le(Le,mt=>{t()?mt(et):mt(ot,!1)})}w(at,Se)},$$slots:{default:!0}}),w(Qe,ft)},$$slots:{default:!0}})});var He=te(Ye,2);he(He,()=>Mn,(We,rt)=>{rt(We,{children:(Qe,ut)=>{var ft=Rq(),ht=G(ft);j(ft),Be(it=>nt(ht,`Download ${e.model.display_name??""} (${it??""})`),[()=>l(e.model.file_size_gb)]),w(Qe,ft)},$$slots:{default:!0}})}),w(be,$e)},$$slots:{default:!0}})}),w(fe,pe)},$$slots:{default:!0}})}),w(D,se)};le(X,D=>{e.onDownload&&D(re)})}w(L,J)},ie=L=>{var J=Z(),X=P(J);he(X,()=>gl,(re,D)=>{D(re,{children:(se,ce)=>{var q=Z(),ae=P(q);he(ae,()=>In,(fe,xe)=>{xe(fe,{children:(pe,Ce)=>{var Te=Bq(),Ae=P(Te);he(Ae,()=>Tn,(Ee,$e)=>{$e(Ee,{children:(Ye,He)=>{Lr(Ye,{variant:"outline",size:"sm",class:"cursor-not-allowed text-muted-foreground",disabled:!0,children:(We,rt)=>{var Qe=Dq(),ut=P(Qe);Ky(ut,{class:"mr-2 h-4 w-4"}),Et(),w(We,Qe)},$$slots:{default:!0}})},$$slots:{default:!0}})});var be=te(Ae,2);he(be,()=>Mn,(Ee,$e)=>{$e(Ee,{children:(Ye,He)=>{var We=Lq(),rt=G(We),Qe=G(rt);j(rt);var ut=te(rt,2),ft=G(ut);j(ut),j(We),Be(()=>{nt(Qe,`Requires ${e.model.required_ram_gb??""} GB RAM`),nt(ft,`You have ${e.systemRAMGB??""} GB available`)}),w(Ye,We)},$$slots:{default:!0}})}),w(pe,Te)},$$slots:{default:!0}})}),w(se,q)},$$slots:{default:!0}})}),w(L,J)};le(Q,L=>{g(i)?L(K):L(ie,!1)},!0)}w(W,V)};le(N,W=>{e.isInstalled?W(F):W(z,!1)})}j(M),j(c),Be(()=>{er(c,1,`model-card group flex items-center gap-4 rounded-lg border border-border px-4 py-3 transition-all duration-200 ${g(i)?"bg-muted hover:bg-accent/50 hover:border-border":"bg-background opacity-60"}`,"svelte-ojs10j"),er(p,1,`text-sm font-semibold ${g(i)?"text-foreground":"text-muted-foreground"}`),nt(m,e.model.display_name)}),w(r,c),we()}function jq(r,e){I(e,!g(e))}var Hq=$('<img alt="" class="h-7 w-7 object-contain"/>'),qq=$('<div class="border-t border-border bg-background"><div class="space-y-3 p-4"></div></div>'),Gq=$('<div class="family-accordion overflow-hidden rounded-lg border border-border bg-muted transition-all duration-200 hover:border-border"><button class="flex w-full cursor-pointer items-center justify-between px-4 py-4 text-left transition-colors hover:bg-accent/50" type="button"><div class="flex min-w-0 flex-1 items-center gap-4"><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center overflow-hidden rounded-full bg-background text-xl"><!></div> <div class="min-w-0 flex-1"><h3 class="mb-1 text-base font-semibold text-foreground"> </h3> <p class="line-clamp-1 text-sm text-muted-foreground"> </p></div></div> <div class="ml-4 flex-shrink-0"><!></div></button> <!></div>');function $q(r,e){ye(e,!0);let t=U(e,"expanded",3,!1),n=ue(Mr(t()));var i=Gq(),a=G(i);a.__click=[jq,n];var s=G(a),o=G(s),l=G(o);{var c=k=>{var M=Hq();Be(N=>zt(M,"src",N),[()=>`${Si}/${encodeURIComponent(e.family.icon)}`]),w(k,M)},u=k=>{var M=tr();Be(()=>nt(M,e.family.icon)),w(k,M)};le(l,k=>{Ub(e.family.icon)?k(c):k(u,!1)})}j(o);var h=te(o,2),d=G(h),f=G(d,!0);j(d);var p=te(d,2),m=G(p,!0);j(p),j(h),j(s);var y=te(s,2),v=G(y);{var _=k=>{du(k,{class:"h-5 w-5 text-muted-foreground"})},S=k=>{p0(k,{class:"h-5 w-5 text-muted-foreground"})};le(v,k=>{g(n)?k(_):k(S,!1)})}j(y),j(a);var A=te(a,2);{var C=k=>{var M=qq(),N=G(M);dn(N,21,()=>e.family.models,F=>F.name,(F,z)=>{{let W=B(()=>e.installedModelNames.has(g(z).name)),V=B(()=>e.downloadingModel===g(z).name),Q=B(()=>e.removingModel===g(z).name),K=B(()=>e.downloadingModel===g(z).name?e.downloadProgress:null);Uq(F,{get model(){return g(z)},get familyIcon(){return e.family.icon},get systemRAMGB(){return e.systemRAMGB},get isInstalled(){return g(W)},get onDownload(){return e.onModelDownload},get onRemove(){return e.onModelRemove},get onStopDownload(){return e.onModelStopDownload},get downloading(){return g(V)},get removing(){return g(Q)},get downloadProgress(){return g(K)}})}}),j(N),j(M),xi(3,M,()=>Fs,()=>({y:-10,duration:200})),w(k,M)};le(A,k=>{g(n)&&k(C)})}j(i),Be(()=>{nt(f,e.family.name),nt(m,e.family.description)}),w(r,i),we()}Xn(["click"]);function Wq(r,e){I(e,!g(e))}var Vq=$('<img alt="" class="h-7 w-7 object-contain"/>'),Xq=$('<span class="text-xs font-normal text-muted-foreground" aria-hidden="true"> </span>'),Kq=$('<span> </span> <span class="text-muted-foreground/70">|</span>',1),Yq=$('<span> </span> <span class="text-muted-foreground/70">|</span>',1),Qq=$("<p>Copy model path</p>"),Jq=$("<!> <!>",1),Zq=$("<p>Delete model</p>"),eG=$("<!> <!>",1),tG=$("<p>Estimated RAM for each context size. Options above your system RAM are disabled.</p>"),rG=$("<!> <!>",1),nG=(r,e,t,n)=>{g(e)||t(n())},iG=$('<span class="text-xs text-destructive"> </span>'),aG=$("<p> </p>"),sG=$("<!> <!>",1),oG=$('<label><input type="radio" class="h-4 w-4 border-border bg-muted text-primary focus:ring-ring"/> <span> </span> <!></label>'),lG=$('<div class="border-t border-border bg-background"><div class="space-y-3 p-4 pl-6"><div class="flex items-center gap-2 text-sm text-muted-foreground"><span>Context length</span> <!></div> <div class="flex flex-col gap-2"></div></div></div>'),cG=$('<div class="installed-model-row group flex flex-col overflow-hidden rounded-lg border border-border bg-muted transition-all duration-200 hover:bg-accent/50"><div class="flex min-h-0 items-center gap-4 px-4 py-3"><button class="flex min-w-0 flex-1 cursor-pointer items-center gap-4 rounded-md border-0 bg-transparent p-0 text-left outline-none transition-colors hover:bg-transparent focus:ring-0 focus:ring-offset-0" type="button"><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center overflow-hidden rounded-full bg-background text-xl text-foreground"><!></div> <div class="min-w-0 flex-1"><div class="mb-1 flex flex-wrap items-center gap-2"><h4 class="truncate text-sm font-semibold text-foreground"> </h4> <!></div> <div class="flex flex-wrap items-center gap-2 text-xs text-muted-foreground"><!> <!> <span class="font-medium text-primary"> </span></div></div> <div class="flex flex-shrink-0"><!></div></button> <div class="flex flex-shrink-0 items-center gap-2"><!> <!></div></div> <!></div>');function uG(r,e){ye(e,!0);const t="delta_model_ctx_";let n=U(e,"removing",3,!1),i=U(e,"systemRAMGB",3,null),a=ue(!1);const s=B(()=>e.model.size_bytes>0?e.model.size_bytes/(1024*1024*1024):e1(e.model.name)?.file_size_gb??1),o=B(()=>e1(e.model.name)),l=B(()=>vq(g(o)?.context_size));let c=ue(8192);Nt(()=>{const Ae=g(l);if(Ae.length===0)return;const be=typeof window<"u"?localStorage.getItem(t+e.model.name):null;if(be){const Ee=parseInt(be,10);Ae.includes(Ee)&&I(c,Ee,!0)}else Ae.includes(g(c))||I(c,Ae[0],!0)});function u(Ae){I(c,Ae,!0),typeof window<"u"&&localStorage.setItem(t+e.model.name,String(Ae)),e.onContextChange?.(e.model.name,Ae)}const h=B(()=>bq(e.model.name)),d=B(()=>{const Ae=[],be=e.model.display_name||e.model.name;return(be.includes("â")||g(o)?.context_size&&g(o).context_size>=128e3)&&Ae.push("â"),e.model.quantization&&Ae.push("Q"),be.toLowerCase().includes("thinking")&&Ae.push("ââ"),Ae});function f(){if(g(l).length>0&&g(l).includes(g(c)))return g(c)>=1e6?`${(g(c)/1e6).toFixed(1)}M ctx`:g(c)>=1e3?`${(g(c)/1e3).toFixed(0)}k ctx`:`${g(c)} ctx`;const Ae=e1(e.model.name);if(Ae?.context_size){const be=Ae.context_size;return be>=1e6?`${(be/1e6).toFixed(1)}M ctx`:be>=1e3?`${(be/1e3).toFixed(0)}k ctx`:`${be} ctx`}return"32k ctx"}function p(Ae){Ae.stopPropagation(),navigator.clipboard.writeText(e.model.name)}function m(Ae){Ae.stopPropagation(),e.onRemove?.(e.model.name)}const y=B(()=>g(l).map(Ae=>({ctx:Ae,memGB:yq(g(s),Ae)})));var v=cG(),_=G(v),S=G(_);S.__click=[Wq,a];var A=G(S),C=G(A);{var k=Ae=>{var be=Vq();Be(Ee=>zt(be,"src",Ee),[()=>`${Si}/${encodeURIComponent(g(h))}`]),w(Ae,be)},M=Ae=>{var be=tr();Be(()=>nt(be,g(h))),w(Ae,be)};le(C,Ae=>{Ub(g(h))?Ae(k):Ae(M,!1)})}j(A);var N=te(A,2),F=G(N),z=G(F),W=G(z,!0);j(z);var V=te(z,2);dn(V,16,()=>g(d),Ae=>Ae,(Ae,be)=>{var Ee=Xq(),$e=G(Ee,!0);j(Ee),Be(()=>nt($e,be)),w(Ae,Ee)}),j(F);var Q=te(F,2),K=G(Q);{var ie=Ae=>{var be=Kq(),Ee=P(be),$e=G(Ee,!0);j(Ee),Et(2),Be(()=>nt($e,e.model.size_str)),w(Ae,be)};le(K,Ae=>{e.model.size_str&&Ae(ie)})}var L=te(K,2);{var J=Ae=>{var be=Yq(),Ee=P(be),$e=G(Ee,!0);j(Ee),Et(2),Be(()=>nt($e,e.model.quantization)),w(Ae,be)};le(L,Ae=>{e.model.quantization&&Ae(J)})}var X=te(L,2),re=G(X,!0);j(X),j(Q),j(N);var D=te(N,2),se=G(D);{var ce=Ae=>{du(Ae,{class:"h-5 w-5 text-muted-foreground"})},q=Ae=>{p0(Ae,{class:"h-5 w-5 text-muted-foreground"})};le(se,Ae=>{g(a)?Ae(ce):Ae(q,!1)})}j(D),j(S);var ae=te(S,2),fe=G(ae);he(fe,()=>gl,(Ae,be)=>{be(Ae,{children:(Ee,$e)=>{var Ye=Z(),He=P(Ye);he(He,()=>In,(We,rt)=>{rt(We,{children:(Qe,ut)=>{var ft=Jq(),ht=P(ft);he(ht,()=>Tn,(Je,at)=>{at(Je,{children:(ct,Se)=>{Lr(ct,{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground",onclick:p,children:(Le,et)=>{il(Le,{class:"h-4 w-4"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var it=te(ht,2);he(it,()=>Mn,(Je,at)=>{at(Je,{children:(ct,Se)=>{var Le=Qq();w(ct,Le)},$$slots:{default:!0}})}),w(Qe,ft)},$$slots:{default:!0}})}),w(Ee,Ye)},$$slots:{default:!0}})});var xe=te(fe,2);{var pe=Ae=>{var be=Z(),Ee=P(be);he(Ee,()=>gl,($e,Ye)=>{Ye($e,{children:(He,We)=>{var rt=Z(),Qe=P(rt);he(Qe,()=>In,(ut,ft)=>{ft(ut,{children:(ht,it)=>{var Je=eG(),at=P(Je);he(at,()=>Tn,(Se,Le)=>{Le(Se,{children:(et,ot)=>{Lr(et,{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-muted-foreground transition-colors hover:bg-destructive/10 hover:text-destructive",onclick:m,get disabled(){return n()},children:(mt,Gt)=>{var jt=Z(),Yt=P(jt);{var kr=st=>{uo(st,{class:"h-4 w-4 animate-spin"})},Ar=st=>{oc(st,{class:"h-4 w-4"})};le(Yt,st=>{n()?st(kr):st(Ar,!1)})}w(mt,jt)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ct=te(at,2);he(ct,()=>Mn,(Se,Le)=>{Le(Se,{children:(et,ot)=>{var mt=Zq();w(et,mt)},$$slots:{default:!0}})}),w(ht,Je)},$$slots:{default:!0}})}),w(He,rt)},$$slots:{default:!0}})}),w(Ae,be)};le(xe,Ae=>{e.onRemove&&Ae(pe)})}j(ae),j(_);var Ce=te(_,2);{var Te=Ae=>{var be=lG(),Ee=G(be),$e=G(Ee),Ye=te(G($e),2);he(Ye,()=>gl,(We,rt)=>{rt(We,{children:(Qe,ut)=>{var ft=Z(),ht=P(ft);he(ht,()=>In,(it,Je)=>{Je(it,{children:(at,ct)=>{var Se=rG(),Le=P(Se);he(Le,()=>Tn,(ot,mt)=>{mt(ot,{children:(Gt,jt)=>{sR(Gt,{class:"h-4 w-4 shrink-0 text-muted-foreground","aria-label":"Context length info"})},$$slots:{default:!0}})});var et=te(Le,2);he(et,()=>Mn,(ot,mt)=>{mt(ot,{children:(Gt,jt)=>{var Yt=tG();w(Gt,Yt)},$$slots:{default:!0}})}),w(at,Se)},$$slots:{default:!0}})}),w(Qe,ft)},$$slots:{default:!0}})}),j($e);var He=te($e,2);dn(He,21,()=>g(y),({ctx:We,memGB:rt})=>We,(We,rt)=>{let Qe=()=>g(rt).ctx,ut=()=>g(rt).memGB;var ft=oG();const ht=B(()=>typeof ut()=="number"&&!Number.isNaN(ut())?ut().toFixed(1):"â"),it=B(()=>i()!=null&&ut()>i());var Je=G(ft);Vc(Je),Je.__change=[nG,it,u,Qe];var at=te(Je,2),ct=G(at);j(at);var Se=te(at,2);{var Le=et=>{var ot=Z(),mt=P(ot);he(mt,()=>gl,(Gt,jt)=>{jt(Gt,{children:(Yt,kr)=>{var Ar=Z(),st=P(Ar);he(st,()=>In,(yt,At)=>{At(yt,{children:(Vt,gt)=>{var Bt=sG(),ar=P(Bt);he(ar,()=>Tn,(de,Ve)=>{Ve(de,{children:(dt,Pt)=>{var or=iG(),Rr=G(or);j(or),Be(()=>nt(Rr,`Requires ${g(ht)??""} GB+`)),w(dt,or)},$$slots:{default:!0}})});var Cr=te(ar,2);he(Cr,()=>Mn,(de,Ve)=>{Ve(de,{children:(dt,Pt)=>{var or=aG(),Rr=G(or);j(or),Be(()=>nt(Rr,`Needs ${g(ht)??""} GB+ RAM (system has ${i()??""} GB)`)),w(dt,or)},$$slots:{default:!0}})}),w(Vt,Bt)},$$slots:{default:!0}})}),w(Yt,Ar)},$$slots:{default:!0}})}),w(et,ot)};le(Se,et=>{g(it)&&i()!=null&&et(Le)})}j(ft),Be(et=>{er(ft,1,`flex cursor-pointer items-center gap-3 rounded-md px-2 py-1.5 text-sm transition-colors ${g(it)?"cursor-not-allowed opacity-50":"hover:bg-muted"} ${g(c)===Qe()?"text-primary":"text-foreground"}`),zt(Je,"name",`ctx-${e.model.name??""}`),hC(Je,Qe()),dC(Je,g(c)===Qe()),Je.disabled=g(it),nt(ct,`${et??""}k ctx on ${g(ht)??""} GB mem`)},[()=>Qe()>=1e3?Math.round(Qe()/1e3):Qe()]),w(We,ft)}),j(He),j(Ee),j(be),xi(3,be,()=>Fs,()=>({y:-10,duration:200})),w(Ae,be)};le(Ce,Ae=>{g(a)&&g(l).length>0&&Ae(Te)})}j(v),Be(Ae=>{zt(S,"aria-expanded",g(a)),zt(S,"aria-label",`${(e.model.display_name||e.model.name)??""} â click to ${g(a)?"collapse":"expand"} context length`),nt(W,e.model.display_name||e.model.name),nt(re,Ae)},[f]),w(r,v),we()}Xn(["click","change"]);var hG=(r,e,t)=>{I(e,"installed"),I(t,"")},dG=(r,e,t)=>{I(e,"catalog"),I(t,"")},fG=$('<div class="text-sm text-muted-foreground">System RAM: <span class="font-bold text-foreground"> </span></div>'),gG=$('<div class="flex items-center gap-2 text-sm text-muted-foreground"><!> Detecting system RAM...</div>'),pG=$('<div class="flex items-center justify-center py-16"><!></div>'),mG=$('<p class="text-sm">Switch to the "Catalog" tab to download models.</p>'),bG=$('<div class="py-16 text-center text-muted-foreground"><p class="mb-2"><!></p> <!></div>'),vG=$('<div class="space-y-2"></div>'),yG=$('<div class="py-16 text-center text-muted-foreground"><p>Unable to detect system RAM. Hardware-aware filtering disabled.</p></div>'),wG=$('<div class="py-16 text-center text-muted-foreground"><p>No model families match your search.</p></div>'),xG=$('<div class="space-y-4"></div>'),_G=$("<!> <!>",1),SG=$("<!> <!>",1),kG=$("<!> <!>",1),AG=$('<div class="model-management-container min-h-[400px] rounded-lg border border-border bg-background p-6 text-foreground"><div class="mb-6 flex flex-col gap-4"><div class="flex items-center justify-between gap-4"><div class="flex items-center gap-2 rounded-full border border-border bg-muted p-1"><button type="button"> </button> <button type="button">Catalog</button></div> <div class="relative max-w-md flex-1"><!> <!></div> <!></div> <div class="flex items-center justify-end"><!></div></div> <!></div> <!>',1);function CG(r,e){ye(e,!0);let t=ue("installed"),n=ue(""),i=ue(null),a=ue(!1),s=ue(Mr([])),o=ue(!1),l=ue(null),c=ue(null),u=null,h=ue(null),d=ue(null);const f=B(R7),p=B(()=>new Set(g(s).map(pe=>pe.name))),m=B(()=>{if(!g(n).trim())return Z0;const pe=g(n).toLowerCase();return Z0.filter(Ce=>Ce.name.toLowerCase().includes(pe)||Ce.description.toLowerCase().includes(pe)||Ce.models.some(Te=>Te.name.toLowerCase().includes(pe)||Te.display_name.toLowerCase().includes(pe)))}),y=B(()=>{if(!g(n).trim())return g(s);const pe=g(n).toLowerCase();return g(s).filter(Ce=>Ce.name.toLowerCase().includes(pe)||Ce.display_name.toLowerCase().includes(pe)||Ce.description.toLowerCase().includes(pe))});async function v(){I(a,!0);try{const pe=await Va.getSystemRAM();I(i,pe.total_ram_gb,!0)}catch(pe){if(console.error("Failed to load system RAM:",pe),typeof navigator<"u"&&"deviceMemory"in navigator){const Ce=navigator.deviceMemory;Ce&&I(i,Ce,!0)}g(i)===null&&I(i,8)}finally{I(a,!1)}}async function _(){I(o,!0);try{const pe=await Va.listInstalled();I(s,Array.isArray(pe)?pe:pe.models||[],!0)}catch(pe){console.error("Error loading installed models:",pe),I(s,[],!0)}finally{I(o,!1)}}async function S(pe){console.log("[Download] Starting download for:",pe),I(l,pe,!0),I(c,{progress:0,current_bytes:0,total_bytes:0,completed:!1,failed:!1},!0);try{await Va.download(pe);const Ce=async()=>{try{const Te=await Va.getDownloadProgress(pe);I(c,Te,!0),(Te.completed||Te.failed)&&(u&&(clearInterval(u),u=null),Te.completed?(oi.success(`Model ${pe} downloaded successfully`),await _(),setTimeout(()=>{I(c,null),I(l,null)},2e3)):Te.failed&&(oi.error(Te.error_message||"Download failed"),I(c,null),I(l,null)))}catch(Te){console.error("[Download] Error polling progress:",Te)}};await Ce(),u=setInterval(Ce,500)}catch(Ce){const Te=Ce instanceof Error?Ce.message:"Failed to download model";oi.error(Te),console.error("[Download] Error downloading model:",Ce),u&&(clearInterval(u),u=null),I(c,null),I(l,null)}}async function A(pe){if(console.log("[Download] Stopping download for:",pe),g(l)===pe){u&&(clearInterval(u),u=null);try{await Va.cancelDownload(pe)}catch(Ce){const Te=Ce instanceof Error?Ce.message:"Failed to cancel download";oi.error(Te),console.error("[Download] Error cancelling download:",Ce)}finally{I(c,null),I(l,null)}}}async function C(pe){I(h,pe,!0);try{await Va.remove(pe),oi.success(`Model ${pe} removed successfully`),await _()}catch(Ce){const Te=Ce instanceof Error?Ce.message:"Failed to remove model";oi.error(Te),console.error("Error removing model:",Ce)}finally{I(h,null),I(d,null)}}async function k(pe,Ce){if(g(f)===pe)try{const Te=await Va.use(pe,Ce);oi.success(`Context set to ${Ce>=1e3?Ce/1e3+"k":Ce} for ${pe}`),Te.loaded&&Te.ctx_size!=null&&Te.ctx_size>0&&En.setLoadedContextTotal(Te.ctx_size)}catch(Te){console.error("Failed to set context:",Te),oi.error(`Failed to set context: ${Te instanceof Error?Te.message:String(Te)}`)}}_i(async()=>{console.log("ModelManagementTab mounted"),await v(),await _()}),ip(()=>{u&&clearInterval(u)});var M=AG(),N=P(M),F=G(N),z=G(F),W=G(z),V=G(W);V.__click=[hG,t,n];var Q=G(V);j(V);var K=te(V,2);K.__click=[dG,t,n],j(W);var ie=te(W,2),L=G(ie);Bh(L,{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"});var J=te(L,2);Mu(J,{type:"text",placeholder:"Search models...",class:"w-full pl-9",get value(){return g(n)},set value(pe){I(n,pe,!0)}}),j(ie);var X=te(ie,2);Lr(X,{variant:"ghost",size:"sm",class:"text-muted-foreground hover:bg-accent hover:text-accent-foreground",onclick:_,get disabled(){return g(o)},children:(pe,Ce)=>{{let Te=B(()=>g(o)?"animate-spin":"");sc(pe,{get class(){return`h-4 w-4 ${g(Te)??""}`}})}},$$slots:{default:!0}}),j(z);var re=te(z,2),D=G(re);{var se=pe=>{var Ce=fG(),Te=te(G(Ce)),Ae=G(Te);j(Te),j(Ce),Be(()=>nt(Ae,`${g(i)??""} GB`)),w(pe,Ce)},ce=pe=>{var Ce=Z(),Te=P(Ce);{var Ae=be=>{var Ee=gG(),$e=G(Ee);uo($e,{class:"h-4 w-4 animate-spin"}),Et(),j(Ee),w(be,Ee)};le(Te,be=>{g(a)&&be(Ae)},!0)}w(pe,Ce)};le(D,pe=>{g(i)!==null?pe(se):pe(ce,!1)})}j(re),j(F);var q=te(F,2);{var ae=pe=>{var Ce=Z(),Te=P(Ce);{var Ae=Ee=>{var $e=pG(),Ye=G($e);uo(Ye,{class:"h-8 w-8 animate-spin text-primary"}),j($e),w(Ee,$e)},be=Ee=>{var $e=Z(),Ye=P($e);{var He=rt=>{var Qe=bG(),ut=G(Qe),ft=G(ut);{var ht=ct=>{var Se=tr("No installed models match your search.");w(ct,Se)},it=ct=>{var Se=tr("No models installed.");w(ct,Se)};le(ft,ct=>{g(n)?ct(ht):ct(it,!1)})}j(ut);var Je=te(ut,2);{var at=ct=>{var Se=mG();w(ct,Se)};le(Je,ct=>{g(n)||ct(at)})}j(Qe),w(rt,Qe)},We=rt=>{var Qe=vG();dn(Qe,21,()=>g(y),ut=>ut.name,(ut,ft)=>{{let ht=B(()=>g(h)===g(ft).name);uG(ut,{get model(){return g(ft)},onRemove:C,onContextChange:k,get removing(){return g(ht)},get systemRAMGB(){return g(i)}})}}),j(Qe),w(rt,Qe)};le(Ye,rt=>{g(y).length===0?rt(He):rt(We,!1)},!0)}w(Ee,$e)};le(Te,Ee=>{g(o)&&g(s).length===0?Ee(Ae):Ee(be,!1)})}w(pe,Ce)},fe=pe=>{var Ce=Z(),Te=P(Ce);{var Ae=Ee=>{var $e=yG();w(Ee,$e)},be=Ee=>{var $e=Z(),Ye=P($e);{var He=rt=>{var Qe=wG();w(rt,Qe)},We=rt=>{var Qe=xG();dn(Qe,21,()=>g(m),ut=>ut.id,(ut,ft)=>{{let ht=B(()=>g(i)||8);$q(ut,{get family(){return g(ft)},expanded:!1,get systemRAMGB(){return g(ht)},get installedModelNames(){return g(p)},onModelDownload:S,onModelRemove:C,onModelStopDownload:A,get downloadingModel(){return g(l)},get removingModel(){return g(h)},get downloadProgress(){return g(c)}})}}),j(Qe),w(rt,Qe)};le(Ye,rt=>{g(m).length===0?rt(He):rt(We,!1)},!0)}w(Ee,$e)};le(Te,Ee=>{g(i)===null&&!g(a)?Ee(Ae):Ee(be,!1)},!0)}w(pe,Ce)};le(q,pe=>{g(t)==="installed"?pe(ae):pe(fe,!1)})}j(N);var xe=te(N,2);{let pe=B(()=>g(d)!==null);he(xe,()=>wl,(Ce,Te)=>{Te(Ce,{get open(){return g(pe)},children:(Ae,be)=>{var Ee=Z(),$e=P(Ee);he($e,()=>vl,(Ye,He)=>{He(Ye,{children:(We,rt)=>{var Qe=kG(),ut=P(Qe);he(ut,()=>bl,(ht,it)=>{it(ht,{children:(Je,at)=>{var ct=_G(),Se=P(ct);he(Se,()=>pl,(et,ot)=>{ot(et,{children:(mt,Gt)=>{Et();var jt=tr("Delete Model");w(mt,jt)},$$slots:{default:!0}})});var Le=te(Se,2);he(Le,()=>yl,(et,ot)=>{ot(et,{children:(mt,Gt)=>{Et();var jt=tr();Be(()=>nt(jt,`Are you sure you want to delete "${g(d)??""}"? This action cannot be undone.`)),w(mt,jt)},$$slots:{default:!0}})}),w(Je,ct)},$$slots:{default:!0}})});var ft=te(ut,2);he(ft,()=>ml,(ht,it)=>{it(ht,{children:(Je,at)=>{var ct=SG(),Se=P(ct);he(Se,()=>J0,(et,ot)=>{ot(et,{onclick:()=>I(d,null),children:(mt,Gt)=>{Et();var jt=tr("Cancel");w(mt,jt)},$$slots:{default:!0}})});var Le=te(Se,2);he(Le,()=>pc,(et,ot)=>{ot(et,{onclick:()=>{g(d)&&C(g(d))},children:(mt,Gt)=>{Et();var jt=tr("Delete");w(mt,jt)},$$slots:{default:!0}})}),w(Je,ct)},$$slots:{default:!0}})}),w(We,Qe)},$$slots:{default:!0}})}),w(Ae,Ee)},$$slots:{default:!0}})})}Be(()=>{er(V,1,`rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200 ${g(t)==="installed"?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`),nt(Q,`Installed (${g(s).length??""})`),er(K,1,`rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200 ${g(t)==="catalog"?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`)}),w(r,M),we()}Xn(["click"]);const Pw=typeof window<"u"?window:void 0;function EG(r){let e=r.activeElement;for(;e?.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}let TG=class{#e;#t;constructor(e={}){const{window:t=Pw,document:n=t?.document}=e;t!==void 0&&(this.#e=n,this.#t=Vl(i=>{const a=Zr(t,"focusin",i),s=Zr(t,"focusout",i);return()=>{a(),s()}}))}get current(){return this.#t?.(),this.#e?EG(this.#e):null}};new TG;function MG(r,e){switch(r){case"post":Nt(e);break;case"pre":Ii(e);break}}function Rw(r,e,t,n={}){const{lazy:i=!1}=n;let a=!i,s=Array.isArray(r)?[]:void 0;MG(e,()=>{const o=Array.isArray(r)?r.map(c=>c()):r();if(!a){a=!0,s=o;return}const l=mn(()=>t(o,s));return s=o,l})}function jb(r,e,t){Rw(r,"post",e,t)}function IG(r,e,t){Rw(r,"pre",e,t)}jb.pre=IG;function OG(r,e){switch(r){case"local":return e.localStorage;case"session":return e.sessionStorage}}class Fw{#e;#t;#r;#n;#a;#i=ue(0);constructor(e,t,n={}){const{storage:i="local",serializer:a={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:s=!0,window:o=Pw}=n;if(this.#e=t,this.#t=e,this.#r=a,o===void 0)return;const l=OG(i,o);this.#n=l;const c=l.getItem(e);c!==null?this.#e=this.#o(c):this.#l(t),s&&i==="local"&&(this.#a=Vl(()=>Zr(o,"storage",this.#s)))}get current(){this.#a?.(),g(this.#i);const e=this.#o(this.#n?.getItem(this.#t))??this.#e,t=new WeakMap,n=i=>{if(i===null||i?.constructor.name==="Date"||typeof i!="object")return i;let a=t.get(i);return a||(a=new Proxy(i,{get:(s,o)=>(g(this.#i),n(Reflect.get(s,o))),set:(s,o,l)=>(I(this.#i,g(this.#i)+1),Reflect.set(s,o,l),this.#l(e),!0)}),t.set(i,a)),a};return n(e)}set current(e){this.#l(e),I(this.#i,g(this.#i)+1)}#s=e=>{e.key!==this.#t||e.newValue===null||(this.#e=this.#o(e.newValue),I(this.#i,g(this.#i)+1))};#o(e){try{return this.#r.deserialize(e)}catch(t){console.error(`Error when parsing "${e}" from persisted store "${this.#t}"`,t);return}}#l(e){try{e!=null&&this.#n?.setItem(this.#t,this.#r.serialize(e))}catch(t){console.error(`Error when writing value from persisted store "${this.#t}" to ${this.#n}`,t)}}}function Dw(r){return r.filter(e=>e.length>0)}const Lw={getItem:r=>null,setItem:(r,e)=>{}},hd=typeof document<"u";function NG(r){return typeof r=="function"}function PG(r){return r!==null&&typeof r=="object"}const dd=Symbol("box"),Hb=Symbol("is-writable");function RG(r){return PG(r)&&dd in r}function FG(r){return ti.isBox(r)&&Hb in r}function ti(r){let e=ue(Mr(r));return{[dd]:!0,[Hb]:!0,get current(){return g(e)},set current(t){I(e,t,!0)}}}function DG(r,e){const t=B(r);return e?{[dd]:!0,[Hb]:!0,get current(){return g(t)},set current(n){e(n)}}:{[dd]:!0,get current(){return r()}}}function LG(r){return ti.isBox(r)?r:NG(r)?ti.with(r):ti(r)}function BG(r){return Object.entries(r).reduce((e,[t,n])=>ti.isBox(n)?(ti.isWritableBox(n)?Object.defineProperty(e,t,{get(){return n.current},set(i){n.current=i}}):Object.defineProperty(e,t,{get(){return n.current}}),e):Object.assign(e,{[t]:n}),{})}function zG(r){return ti.isWritableBox(r)?{[dd]:!0,get current(){return r.current}}:r}ti.from=LG,ti.with=DG,ti.flatten=BG,ti.readonly=zG,ti.isBox=RG,ti.isWritableBox=FG;function UG(r,e){const t=RegExp(r,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(t)?n.replace(t,e):n}}const jG=UG(/[A-Z]/,r=>`-${r.toLowerCase()}`);function HG(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError(`expected an argument of type object, but got ${typeof r}`);return Object.keys(r).map(e=>`${jG(e)}: ${r[e]};`).join(`
`)}function qG(r={}){return HG(r).replace(`
`," ")}qG({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"});const GG=typeof window<"u"?window:void 0;function $G(r){let e=r.activeElement;for(;e?.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}class WG{#e;#t;constructor(e={}){const{window:t=GG,document:n=t?.document}=e;t!==void 0&&(this.#e=n,this.#t=Vl(i=>{const a=Zr(t,"focusin",i),s=Zr(t,"focusout",i);return()=>{a(),s()}}))}get current(){return this.#t?.(),this.#e?$G(this.#e):null}}new WG;const mc=ti("mode-watcher-mode"),bc=ti("mode-watcher-theme"),VG=["dark","light","system"];function qb(r){return typeof r!="string"?!1:VG.includes(r)}class XG{#e="system";#t=hd?localStorage:Lw;#r=this.#t.getItem(mc.current);#n=qb(this.#r)?this.#r:this.#e;#a=ue(Mr(this.#i()));#i(e=this.#n){return new Fw(mc.current,e,{serializer:{serialize:t=>t,deserialize:t=>qb(t)?t:this.#e}})}constructor(){rh(()=>jb.pre(()=>mc.current,(e,t)=>{const n=g(this.#a).current;I(this.#a,this.#i(n),!0),t&&localStorage.removeItem(t)}))}get current(){return g(this.#a).current}set current(e){g(this.#a).current=e}}class KG{#e=void 0;#t=!0;#r=ue(Mr(this.#e));#n=typeof window<"u"&&typeof window.matchMedia=="function"?new v4("prefers-color-scheme: light"):{current:!1};query(){hd&&I(this.#r,this.#n.current?"light":"dark",!0)}tracking(e){this.#t=e}constructor(){rh(()=>{Ii(()=>{this.#t&&this.query()})}),this.query=this.query.bind(this),this.tracking=this.tracking.bind(this)}get current(){return g(this.#r)}}const Gb=new XG,$b=new KG;class YG{#e=hd?localStorage:Lw;#t=this.#e.getItem(bc.current);#r=this.#t===null||this.#t===void 0?"":this.#t;#n=ue(Mr(this.#a()));#a(e=this.#r){return new Fw(bc.current,e,{serializer:{serialize:t=>typeof t!="string"?"":t,deserialize:t=>t}})}constructor(){rh(()=>jb.pre(()=>bc.current,(e,t)=>{const n=g(this.#n).current;I(this.#n,this.#a(n),!0),t&&localStorage.removeItem(t)}))}get current(){return g(this.#n).current}set current(e){g(this.#n).current=e}}const t1=new YG;let Bw,zw,Uw=!1,fd=null;function QG(){return fd||(fd=document.createElement("style"),fd.appendChild(document.createTextNode(`* {
		-webkit-transition: none !important;
		-moz-transition: none !important;
		-o-transition: none !important;
		-ms-transition: none !important;
		transition: none !important;
	}`)),fd)}function jw(r,e=!1){if(typeof document>"u")return;if(!Uw){Uw=!0,r();return}if(typeof window<"u"&&window.__vitest_worker__){r();return}clearTimeout(Bw),clearTimeout(zw);const n=QG(),i=()=>document.head.appendChild(n),a=()=>{n.parentNode&&document.head.removeChild(n)};function s(){r(),window.requestAnimationFrame(a)}if(typeof window.requestAnimationFrame<"u"){i(),e?s():window.requestAnimationFrame(()=>{s()});return}i(),Bw=window.setTimeout(()=>{r(),zw=window.setTimeout(a,16)},16)}const _l=ti(void 0),r1=ti(!0),n1=ti(!1),Wb=ti([]),Vb=ti([]);function JG(){const r=B(()=>{if(!hd)return;const e=Gb.current==="system"?$b.current:Gb.current,t=Dw(Wb.current),n=Dw(Vb.current);function i(){const a=document.documentElement,s=document.querySelector('meta[name="theme-color"]');e==="light"?(t.length&&a.classList.remove(...t),n.length&&a.classList.add(...n),a.style.colorScheme="light",s&&_l.current&&s.setAttribute("content",_l.current.light)):(n.length&&a.classList.remove(...n),t.length&&a.classList.add(...t),a.style.colorScheme="dark",s&&_l.current&&s.setAttribute("content",_l.current.dark))}return r1.current?jw(i,n1.current):i(),e});return{get current(){return g(r)}}}function ZG(){const r=B(()=>{if(t1.current,!hd)return;function e(){document.documentElement.setAttribute("data-theme",t1.current)}return r1.current?jw(e,mn(()=>n1.current)):e(),t1.current});return{get current(){return g(r)}}}const Hw=JG(),e$=ZG();function i1(r){Gb.current=r}function t$(r){t1.current=r}function eoe(r){return r}function r$({defaultMode:r="system",themeColors:e,darkClassNames:t=["dark"],lightClassNames:n=[],defaultTheme:i="",modeStorageKey:a="mode-watcher-mode",themeStorageKey:s="mode-watcher-theme"}){const o=document.documentElement,l=localStorage.getItem(a)??r,c=localStorage.getItem(s)??i,u=l==="light"||l==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(u?(t.length&&o.classList.remove(...t.filter(Boolean)),n.length&&o.classList.add(...n.filter(Boolean))):(n.length&&o.classList.remove(...n.filter(Boolean)),t.length&&o.classList.add(...t.filter(Boolean))),o.style.colorScheme=u?"light":"dark",e){const h=document.querySelector('meta[name="theme-color"]');h&&h.setAttribute("content",l==="light"?e.light:e.dark)}c&&(o.setAttribute("data-theme",c),localStorage.setItem(s,c)),localStorage.setItem(a,l)}var n$=$('<meta name="theme-color"/>');function i$(r,e){ye(e,!0);var t=Z(),n=P(t);{var i=a=>{var s=n$();Be(()=>zt(s,"content",e.themeColors.dark)),w(a,s)};le(n,a=>{e.themeColors&&a(i)})}w(r,t),we()}var a$=$('<meta name="theme-color"/>'),s$=$("<!> <!>",1);function o$(r,e){ye(e,!0);let t=U(e,"trueNonce",3,"");df(n=>{var i=s$(),a=P(i);{var s=l=>{var c=a$();Be(()=>zt(c,"content",e.themeColors.dark)),w(l,c)};le(a,l=>{e.themeColors&&l(s)})}var o=te(a,2);d9(o,()=>`<script${t()?` nonce=${t()}`:""}>(`+r$.toString()+")("+JSON.stringify(e.initConfig)+");<\/script>"),w(n,i)}),we()}function l$(r,e){ye(e,!0);let t=U(e,"track",3,!0),n=U(e,"defaultMode",3,"system"),i=U(e,"disableTransitions",3,!0),a=U(e,"darkClassNames",19,()=>["dark"]),s=U(e,"lightClassNames",19,()=>[]),o=U(e,"defaultTheme",3,""),l=U(e,"nonce",3,""),c=U(e,"themeStorageKey",3,"mode-watcher-theme"),u=U(e,"modeStorageKey",3,"mode-watcher-mode"),h=U(e,"disableHeadScriptInjection",3,!1),d=U(e,"synchronousModeChanges",3,!1);mc.current=u(),bc.current=c(),Wb.current=a(),Vb.current=s(),r1.current=i(),_l.current=e.themeColors,n1.current=d(),Ii(()=>{n1.current=d()}),Ii(()=>{r1.current=i()}),Ii(()=>{_l.current=e.themeColors}),Ii(()=>{Wb.current=a()}),Ii(()=>{Vb.current=s()}),Ii(()=>{mc.current=u()}),Ii(()=>{bc.current=c()}),Ii(()=>{Hw.current,mc.current,bc.current,e$.current}),_i(()=>{$b.tracking(t()),$b.query();const S=localStorage.getItem(mc.current);i1(qb(S)?S:n());const A=localStorage.getItem(bc.current);t$(A||o())});const f={defaultMode:n(),themeColors:e.themeColors,darkClassNames:a(),lightClassNames:s(),defaultTheme:o(),modeStorageKey:u(),themeStorageKey:c()},p=B(()=>typeof window>"u"?l():"");var m=Z(),y=P(m);{var v=S=>{i$(S,{get themeColors(){return _l.current}})},_=S=>{o$(S,{get trueNonce(){return g(p)},get initConfig(){return f},get themeColors(){return _l.current}})};le(y,S=>{h()?S(v):S(_,!1)})}w(r,m),we()}function c$(r,e){g(e)&&g(e).scrollBy({left:-250,behavior:"smooth"})}function u$(r,e){g(e)&&g(e).scrollBy({left:250,behavior:"smooth"})}var h$=(r,e,t)=>I(e,g(t).title,!0),d$=$('<button><!> <span class="ml-2"> </span></button>'),f$=(r,e,t,n)=>{I(e,g(t).title,!0),n(r.currentTarget)},g$=$("<button><!> <span> </span></button>"),p$=$(`<div class="space-y-6"><p class="text-sm text-muted-foreground">Manage your installed models and download new ones. Use the model selector in the
									chat input to choose models in the chat interface.</p> <div class="model-management-container" style="min-height: 200px;"><!></div></div>`),m$=$('<div class="space-y-6"><!></div>'),b$=$('<div class="space-y-6"><!></div>'),v$=$(`<div class="space-y-6 p-4 md:p-6"><div class="grid"><div class="mb-6 flex hidden items-center gap-2 border-b border-border/30 pb-6 md:flex"><!> <h3 class="text-lg font-semibold"> </h3></div> <!></div> <div class="mt-8 border-t pt-6"><p class="text-xs text-muted-foreground">Settings are saved in browser's localStorage</p></div></div>`),y$=$('<div class="flex flex-1 flex-col overflow-hidden md:flex-row"><div class="hidden w-64 border-r border-border/30 p-6 md:block"><nav class="space-y-1 py-2"><!> <!></nav></div> <div class="flex flex-col md:hidden"><div class="border-b border-border/30 py-4"><!> <div class="relative flex items-center" style="scroll-padding: 1rem;"><button aria-label="Scroll left"><!></button> <div class="scrollbar-hide overflow-x-auto py-2"><div class="flex min-w-max gap-2"></div></div> <button aria-label="Scroll right"><!></button></div></div></div> <!></div> <!>',1);function w$(r,e){ye(e,!0);let t=U(e,"open",3,!1);const n=[{title:"General",icon:r6,fields:[{key:"apiKey",label:"API Key",type:"input"},{key:"systemMessage",label:"System Message (will be disabled if left empty)",type:"textarea"},{key:"theme",label:"Theme",type:"select",options:[{value:"system",label:"System",icon:uR},{value:"light",label:"Light",icon:xR},{value:"dark",label:"Dark",icon:hR}]},{key:"askForTitleConfirmation",label:"Ask for confirmation before changing conversation title",type:"checkbox"},{key:"pasteLongTextToFileLen",label:"Paste long text to file length",type:"input"},{key:"copyTextAttachmentsAsPlainText",label:"Copy text attachments as plain text",type:"checkbox"},{key:"enableContinueButton",label:'Enable "Continue" button',type:"checkbox"},{key:"pdfAsImage",label:"Parse PDF as image",type:"checkbox"}]},{title:"Display",icon:gR,fields:[{key:"showMessageStats",label:"Show message generation statistics",type:"checkbox"},{key:"showThoughtInProgress",label:"Show thought in progress",type:"checkbox"},{key:"keepStatsVisible",label:"Keep stats visible after generation",type:"checkbox"},{key:"showMicrophoneOnEmptyInput",label:"Show microphone on empty input",type:"checkbox"},{key:"renderUserContentAsMarkdown",label:"Render user content as Markdown",type:"checkbox"},{key:"disableAutoScroll",label:"Disable automatic scroll",type:"checkbox"},{key:"alwaysShowSidebar",label:"Always show sidebar on desktop",type:"checkbox"},{key:"autoShowSidebarOnNewChat",label:"Auto-show sidebar on new chat",type:"checkbox"}]},{title:"Sampling",icon:aR,fields:[{key:"backendSampling",label:"Backend sampling",type:"checkbox"},{key:"temperature",label:"Temperature",type:"input"},{key:"dynatemp_range",label:"Dynamic temperature range",type:"input"},{key:"dynatemp_exponent",label:"Dynamic temperature exponent",type:"input"},{key:"top_k",label:"Top K",type:"input"},{key:"top_p",label:"Top P",type:"input"},{key:"min_p",label:"Min P",type:"input"},{key:"xtc_probability",label:"XTC probability",type:"input"},{key:"xtc_threshold",label:"XTC threshold",type:"input"},{key:"typ_p",label:"Typical P",type:"input"},{key:"max_tokens",label:"Max tokens",type:"input"},{key:"samplers",label:"Samplers",type:"input"}]},{title:"Penalties",icon:zh,fields:[{key:"repeat_last_n",label:"Repeat last N",type:"input"},{key:"repeat_penalty",label:"Repeat penalty",type:"input"},{key:"presence_penalty",label:"Presence penalty",type:"input"},{key:"frequency_penalty",label:"Frequency penalty",type:"input"},{key:"dry_multiplier",label:"DRY multiplier",type:"input"},{key:"dry_base",label:"DRY base",type:"input"},{key:"dry_allowed_length",label:"DRY allowed length",type:"input"},{key:"dry_penalty_last_n",label:"DRY penalty last N",type:"input"}]},{title:"Import/Export",icon:tR,fields:[]},{title:"Model Management",icon:dR,fields:[]},{title:"Developer",icon:eR,fields:[{key:"showToolCallLabels",label:"Show tool call labels",type:"checkbox",help:"Display tool call labels and payloads from Harmony-compatible delta.tool_calls data below assistant messages."},{key:"disableReasoningFormat",label:"Show raw LLM output",type:"checkbox",help:"Show raw LLM output without backend parsing and frontend Markdown rendering to inspect streaming across different models."},{key:"custom",label:"Custom JSON",type:"textarea"}]}];let i=ue("General"),a=B(()=>n.find(A=>A.title===g(i))||n[0]),s=ue(Mr({...un()})),o=ue(""),l=ue(!1),c=ue(!1),u=ue(void 0);function h(A){g(s).theme=A,i1(A)}function d(A,C){g(s)[A]=C}function f(){g(s).theme!==g(o)&&i1(g(o)),e.onOpenChange?.(!1)}function p(){I(s,{...un()},!0),i1(g(s).theme),I(o,g(s).theme,!0)}function m(){if(g(s).custom&&typeof g(s).custom=="string"&&g(s).custom.trim())try{JSON.parse(g(s).custom)}catch(k){alert("Invalid JSON in custom parameters. Please check the format and try again."),console.error(k);return}const A={...g(s)},C=["temperature","top_k","top_p","min_p","max_tokens","pasteLongTextToFileLen","dynatemp_range","dynatemp_exponent","typ_p","xtc_probability","xtc_threshold","repeat_last_n","repeat_penalty","presence_penalty","frequency_penalty","dry_multiplier","dry_base","dry_allowed_length","dry_penalty_last_n"];for(const k of C)if(A[k]!==void 0&&A[k]!==""){const M=Number(A[k]);if(!isNaN(M))A[k]=M;else{alert(`Invalid numeric value for ${k}. Please enter a valid number.`);return}}lB(A),e.onOpenChange?.(!1)}function y(A){if(!g(u))return;const C=g(u).getBoundingClientRect(),k=A.getBoundingClientRect(),M=k.left+k.width/2,N=C.left+C.width/2,F=M-N;g(u).scrollBy({left:F,behavior:"smooth"})}function v(){if(!g(u))return;const{scrollLeft:A,scrollWidth:C,clientWidth:k}=g(u);I(l,A>0),I(c,A<C-k-1)}Nt(()=>{t()&&(I(s,{...un()},!0),I(o,un().theme,!0),setTimeout(v,100))}),Nt(()=>{g(u)&&v()});var _=Z(),S=P(_);he(S,()=>I2,(A,C)=>{C(A,{get open(){return t()},onOpenChange:f,children:(k,M)=>{var N=Z(),F=P(N);he(F,()=>M2,(z,W)=>{W(z,{class:`z-999999 flex h-[100dvh] max-h-[100dvh] min-h-[100dvh] flex-col gap-0 rounded-none p-0
			md:h-[64vh] md:max-h-[64vh] md:min-h-0 md:rounded-lg`,style:"max-width: 48rem;",children:(V,Q)=>{var K=y$(),ie=P(K),L=G(ie),J=G(L),X=G(J);he(X,()=>f0,(Ee,$e)=>{$e(Ee,{class:"mb-6 flex items-center gap-2",children:(Ye,He)=>{Et();var We=tr("Settings");w(Ye,We)},$$slots:{default:!0}})});var re=te(X,2);dn(re,17,()=>n,Ee=>Ee.title,(Ee,$e)=>{var Ye=d$();Ye.__click=[h$,i,$e];var He=G(Ye);he(He,()=>g($e).icon,(Qe,ut)=>{ut(Qe,{class:"h-4 w-4"})});var We=te(He,2),rt=G(We,!0);j(We),j(Ye),Be(()=>{er(Ye,1,`flex w-full cursor-pointer items-center gap-3 rounded-lg px-3 py-2 text-left text-sm transition-colors hover:bg-accent ${g(i)===g($e).title?"bg-accent text-accent-foreground":"text-muted-foreground"}`),nt(rt,g($e).title)}),w(Ee,Ye)}),j(J),j(L);var D=te(L,2),se=G(D),ce=G(se);he(ce,()=>f0,(Ee,$e)=>{$e(Ee,{class:"mb-6 flex items-center gap-2 px-4",children:(Ye,He)=>{Et();var We=tr("Settings");w(Ye,We)},$$slots:{default:!0}})});var q=te(ce,2),ae=G(q);ae.__click=[c$,u];var fe=G(ae);Xy(fe,{class:"h-4 w-4"}),j(ae);var xe=te(ae,2),pe=G(xe);dn(pe,21,()=>n,Ee=>Ee.title,(Ee,$e)=>{var Ye=g$();Ye.__click=[f$,i,$e,y];var He=G(Ye);he(He,()=>g($e).icon,(Qe,ut)=>{ut(Qe,{class:"h-4 w-4 flex-shrink-0"})});var We=te(He,2),rt=G(We,!0);j(We),j(Ye),Be(()=>{er(Ye,1,`flex cursor-pointer items-center gap-2 rounded-lg px-3 py-2 text-sm whitespace-nowrap transition-colors first:ml-4 last:mr-4 hover:bg-accent ${g(i)===g($e).title?"bg-accent text-accent-foreground":"text-muted-foreground"}`),nt(rt,g($e).title)}),w(Ee,Ye)}),j(pe),j(xe),Fr(xe,Ee=>I(u,Ee),()=>g(u));var Ce=te(xe,2);Ce.__click=[u$,u];var Te=G(Ce);p0(Te,{class:"h-4 w-4"}),j(Ce),j(q),j(se),j(D);var Ae=te(D,2);zb(Ae,{class:"max-h-[calc(100dvh-13.5rem)] flex-1 md:max-h-[calc(100vh-13.5rem)]",children:(Ee,$e)=>{var Ye=v$(),He=G(Ye),We=G(He),rt=G(We);he(rt,()=>g(a).icon,(Je,at)=>{at(Je,{class:"h-5 w-5"})});var Qe=te(rt,2),ut=G(Qe,!0);j(Qe),j(We);var ft=te(We,2);{var ht=Je=>{pq(Je,{})},it=Je=>{var at=Z(),ct=P(at);{var Se=et=>{var ot=p$(),mt=te(G(ot),2),Gt=G(mt);CG(Gt,{}),j(mt),j(ot),w(et,ot)},Le=et=>{var ot=Z(),mt=P(ot);{var Gt=Yt=>{var kr=m$(),Ar=G(kr);Gw(Ar,{get fields(){return g(a).fields},get localConfig(){return g(s)},onConfigChange:d,onThemeChange:h}),j(kr),w(Yt,kr)},jt=Yt=>{var kr=b$(),Ar=G(kr);Gw(Ar,{get fields(){return g(a).fields},get localConfig(){return g(s)},onConfigChange:d,onThemeChange:h}),j(kr),w(Yt,kr)};le(mt,Yt=>{g(a).title==="Developer"?Yt(Gt):Yt(jt,!1)},!0)}w(et,ot)};le(ct,et=>{g(a).title==="Model Management"?et(Se):et(Le,!1)},!0)}w(Je,at)};le(ft,Je=>{g(a).title==="Import/Export"?Je(ht):Je(it,!1)})}j(He),Et(2),j(Ye),Be(()=>nt(ut,g(a).title)),w(Ee,Ye)},$$slots:{default:!0}}),j(ie);var be=te(ie,2);C$(be,{onReset:p,onSave:m}),Be(()=>{er(ae,1,`absolute left-2 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-muted shadow-md backdrop-blur-sm transition-opacity hover:bg-accent ${g(l)?"opacity-100":"pointer-events-none opacity-0"}`),er(Ce,1,`absolute right-2 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-muted shadow-md backdrop-blur-sm transition-opacity hover:bg-accent ${g(c)?"opacity-100":"pointer-events-none opacity-0"}`)}),Bn("scroll",xe,v),w(V,K)},$$slots:{default:!0}})}),w(k,N)},$$slots:{default:!0}})}),w(r,_),we()}Xn(["click"]);var x$=$("<!> Reset to default",1),_$=$("<!> <!>",1),S$=$("<!> <!>",1),k$=$("<!> <!>",1),A$=$('<div class="flex justify-between border-t border-border/30 p-6"><div class="flex gap-2"><!></div> <!></div> <!>',1);function C$(r,e){ye(e,!0);let t=ue(!1);function n(){I(t,!0)}function i(){cB(),e.onReset?.(),I(t,!1)}function a(){e.onSave?.()}var s=A$(),o=P(s),l=G(o),c=G(l);Lr(c,{variant:"outline",onclick:n,children:(d,f)=>{var p=x$(),m=P(p);N2(m,{class:"h-3 w-3"}),Et(),w(d,p)},$$slots:{default:!0}}),j(l);var u=te(l,2);Lr(u,{onclick:a,children:(d,f)=>{Et();var p=tr("Save settings");w(d,p)},$$slots:{default:!0}}),j(o);var h=te(o,2);he(h,()=>wl,(d,f)=>{f(d,{get open(){return g(t)},set open(p){I(t,p,!0)},children:(p,m)=>{var y=Z(),v=P(y);he(v,()=>vl,(_,S)=>{S(_,{children:(A,C)=>{var k=k$(),M=P(k);he(M,()=>bl,(F,z)=>{z(F,{children:(W,V)=>{var Q=_$(),K=P(Q);he(K,()=>pl,(L,J)=>{J(L,{children:(X,re)=>{Et();var D=tr("Reset Settings to Default");w(X,D)},$$slots:{default:!0}})});var ie=te(K,2);he(ie,()=>yl,(L,J)=>{J(L,{children:(X,re)=>{Et();var D=tr(`Are you sure you want to reset all settings to their default values? This will reset all
				parameters to the values provided by the server's /props endpoint and remove all your custom
				configurations.`);w(X,D)},$$slots:{default:!0}})}),w(W,Q)},$$slots:{default:!0}})});var N=te(M,2);he(N,()=>ml,(F,z)=>{z(F,{children:(W,V)=>{var Q=S$(),K=P(Q);he(K,()=>J0,(L,J)=>{J(L,{children:(X,re)=>{Et();var D=tr("Cancel");w(X,D)},$$slots:{default:!0}})});var ie=te(K,2);he(ie,()=>pc,(L,J)=>{J(L,{onclick:i,children:(X,re)=>{Et();var D=tr("Reset to Default");w(X,D)},$$slots:{default:!0}})}),w(W,Q)},$$slots:{default:!0}})}),w(A,k)},$$slots:{default:!0}})}),w(p,y)},$$slots:{default:!0}})}),w(r,s),we()}var E$=$('<span class="absolute right-2 flex size-3.5 items-center justify-center"><!></span> <!>',1);function T$(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","value","label","children"]);var i=Z(),a=P(i);{const s=(l,c)=>{let u=()=>c?.().selected,h=()=>c?.().highlighted;var d=E$(),f=P(d),p=G(f);{var m=S=>{g0(S,{class:"size-4"})};le(p,S=>{u()&&S(m)})}j(f);var y=te(f,2);{var v=S=>{var A=Z(),C=P(A);Re(C,()=>e.children,()=>({selected:u(),highlighted:h()})),w(S,A)},_=S=>{var A=tr();Be(()=>nt(A,e.label||e.value)),w(S,A)};le(y,S=>{e.children?S(v):S(_,!1)})}w(l,d)};let o=B(()=>sr("relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e.class));he(a,()=>zO,(l,c)=>{c(l,tt({get value(){return e.value},"data-slot":"select-item",get class(){return g(o)}},()=>n,{get ref(){return t()},set ref(u){t(u)},children:s,$$slots:{default:!0}}))})}w(r,i),we()}function M$(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("flex cursor-default items-center justify-center py-1",e.class));he(a,()=>VO,(o,l)=>{l(o,tt({"data-slot":"select-scroll-up-button",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)},children:(c,u)=>{YP(c,{class:"size-4"})},$$slots:{default:!0}}))})}w(r,i),we()}function I$(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("flex cursor-default items-center justify-center py-1",e.class));he(a,()=>GO,(o,l)=>{l(o,tt({"data-slot":"select-scroll-down-button",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)},children:(c,u)=>{du(c,{class:"size-4"})},$$slots:{default:!0}}))})}w(r,i),we()}var O$=$("<!> <!> <!>",1);function N$(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"sideOffset",3,4),i=qe(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","portalProps","children"]),a;_i(()=>{const l={passive:!1},c=h=>{if(!t())return;const d=h.target;(!d||!t().contains(d))&&(h.preventDefault(),h.stopPropagation())},u=h=>{if(!t())return;const d=h.target;(!d||!t().contains(d))&&(h.preventDefault(),h.stopPropagation())};return document.addEventListener("wheel",c,l),document.addEventListener("touchmove",u,l),()=>{document.removeEventListener("wheel",c,l),document.removeEventListener("touchmove",u,l)}}),Nt(()=>{const l=t();if(a?.(),!l)return;const c=h=>{h.stopPropagation()},u=h=>{h.stopPropagation()};l.addEventListener("wheel",c),l.addEventListener("touchmove",u),a=()=>{l.removeEventListener("wheel",c),l.removeEventListener("touchmove",u)}}),ip(()=>{a?.()});var s=Z(),o=P(s);he(o,()=>Zo,(l,c)=>{c(l,tt(()=>e.portalProps,{children:(u,h)=>{var d=Z(),f=P(d);{let p=B(()=>sr("relative z-[var(--layer-popover,1000000)] max-h-(--bits-select-content-available-height) min-w-[8rem] origin-(--bits-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[side=bottom]:translate-y-1 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:-translate-x-1 data-[side=left]:slide-in-from-right-2 data-[side=right]:translate-x-1 data-[side=right]:slide-in-from-left-2 data-[side=top]:-translate-y-1 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95",e.class));he(f,()=>DO,(m,y)=>{y(m,tt({get sideOffset(){return n()},"data-slot":"select-content",get class(){return g(p)}},()=>i,{get ref(){return t()},set ref(v){t(v)},children:(v,_)=>{var S=O$(),A=P(S);M$(A,{});var C=te(A,2);{let M=B(()=>sr("h-(--bits-select-anchor-height) w-full min-w-(--bits-select-anchor-width) scroll-my-1 p-1"));he(C,()=>jO,(N,F)=>{F(N,{get class(){return g(M)},children:(z,W)=>{var V=Z(),Q=P(V);Re(Q,()=>e.children??je),w(z,V)},$$slots:{default:!0}})})}var k=te(C,2);I$(k,{}),w(v,S)},$$slots:{default:!0}}))})}w(u,d)},$$slots:{default:!0}}))}),w(r,s),we()}var P$=$("<!> <!>",1);function R$(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"size",3,"default"),i=U(e,"variant",3,"default"),a=qe(e,["$$slots","$$events","$$legacy","ref","class","children","size","variant"]);const s=B(()=>i()==="plain"?"group inline-flex w-full items-center justify-end gap-2 whitespace-nowrap px-0 py-0 text-sm font-medium text-muted-foreground transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 data-[placeholder]:text-muted-foreground data-[size=default]:h-9 data-[size=sm]:h-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-3 [&_svg:not([class*='text-'])]:text-muted-foreground":"flex w-fit items-center justify-between gap-2 rounded-md border border-input bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none select-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[placeholder]:text-muted-foreground data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 dark:bg-input/30 dark:hover:bg-input/50 dark:aria-invalid:ring-destructive/40 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground"),o=B(()=>i()==="plain"?"size-3 opacity-60 transition-transform group-data-[state=open]:-rotate-180":"size-4 opacity-50");var l=Z(),c=P(l);{let u=B(()=>sr(g(s),e.class));he(c,()=>KN,(h,d)=>{d(h,tt({"data-slot":"select-trigger",get"data-size"(){return n()},get class(){return g(u)}},()=>a,{get ref(){return t()},set ref(f){t(f)},children:(f,p)=>{var m=P$(),y=P(m);Re(y,()=>e.children??je);var v=te(y,2);du(v,{get class(){return g(o)}}),w(f,m)},$$slots:{default:!0}}))})}w(r,l),we()}const F$=VN;var D$=$("<textarea></textarea>");function L$(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"value",15),i=qe(e,["$$slots","$$events","$$legacy","ref","value","class"]);var a=D$();hf(a),Ht(a,s=>({"data-slot":"textarea",class:s,...i}),[()=>sr("flex field-sizing-content min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 md:text-sm dark:bg-input/30 dark:aria-invalid:ring-destructive/40",e.class)]),Fr(a,s=>t(s),()=>t()),qo(a,n),w(r,a),we()}const B$=z0({base:"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex w-fit shrink-0 items-center justify-center gap-1 overflow-hidden whitespace-nowrap rounded-md border px-2 py-0.5 text-xs font-medium transition-[color,box-shadow] focus-visible:ring-[3px] [&>svg]:pointer-events-none [&>svg]:size-3",variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90 border-transparent",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90 border-transparent",destructive:"bg-destructive [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70 border-transparent text-white",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xb(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"variant",3,"default"),i=qe(e,["$$slots","$$events","$$legacy","ref","href","class","variant","children"]);var a=Z(),s=P(a);f9(s,()=>e.href?"a":"span",!1,(o,l)=>{Fr(o,h=>t(h),()=>t()),Ht(o,h=>({"data-slot":"badge",href:e.href,class:h,...i}),[()=>sr(B$({variant:n()}),e.class)]);var c=Z(),u=P(c);Re(u,()=>e.children??je),w(l,c)}),w(r,a),we()}var z$=$("<!> Custom",1);function qw(r,e){let t=U(e,"class",3,"");Xb(r,{variant:"secondary",get class(){return`h-5 bg-orange-100 px-1.5 py-0.5 text-xs text-orange-800 dark:bg-orange-900 dark:text-orange-200 ${t()??""}`},children:(n,i)=>{var a=z$(),s=P(a);s6(s,{class:"mr-1 h-3 w-3"}),Et(),w(n,a)},$$slots:{default:!0}})}var U$=(r,e,t,n)=>{z7(g(e).key);const i=g(t)??Wa[g(e).key];n.onConfigChange(g(e).key,String(i))},j$=$('<button type="button" class="absolute top-1/2 right-2 inline-flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded transition-colors hover:bg-muted" aria-label="Reset to default" title="Reset to default"><!></button>'),H$=$('<p class="mt-1 text-xs text-muted-foreground"> </p>'),q$=$('<div class="flex items-center gap-2"><!> <!></div> <div class="relative w-full md:max-w-md"><!> <!></div> <!>',1),G$=$('<p class="mt-1 text-xs text-muted-foreground"> </p>'),$$=$("<!> <!> <!>",1),W$=$('<div class="flex items-center gap-2"><!> </div>'),V$=(r,e,t,n)=>{z7(g(e).key);const i=g(t)??Wa[g(e).key];n.onConfigChange(g(e).key,String(i))},X$=$('<button type="button" class="absolute top-1/2 right-8 inline-flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded transition-colors hover:bg-muted" aria-label="Reset to default" title="Reset to default"><!></button>'),K$=$('<div class="flex items-center gap-2"><!> </div>'),Y$=$('<div class="relative w-full md:w-auto md:max-w-md"><!> <!></div> <!>',1),Q$=$('<p class="mt-1 text-xs text-muted-foreground"> </p>'),J$=$('<div class="flex items-center gap-2"><!> <!></div> <!> <!>',1),Z$=$('<p class="text-xs text-muted-foreground"> </p>'),eW=$('<p class="text-xs text-muted-foreground">For non-vision models, PDFs will be processed as text automatically.</p>'),tW=$('<div class="flex items-start space-x-3"><!> <div class="space-y-1"><label class="cursor-pointer text-sm leading-none font-medium"> </label> <!></div></div>'),rW=$('<div class="space-y-2"><!></div>');function Gw(r,e){ye(e,!0);function t(a){return ul.canSyncParameter(a)?uB(a):null}var n=Z(),i=P(n);dn(i,17,()=>e.fields,a=>a.key,(a,s)=>{var o=rW(),l=G(o);{var c=h=>{var d=q$();const f=B(()=>t(g(s).key)),p=B(()=>String(e.localConfig[g(s).key]??"")),m=B(()=>g(f)?.serverDefault),y=B(()=>(()=>{if(!g(f)||g(m)===void 0)return!1;const W=g(p),V=parseFloat(W),Q=isNaN(V)?W:Math.round(V*1e6)/1e6,K=typeof g(m)=="number"?Math.round(g(m)*1e6)/1e6:g(m);return Q!==K})());var v=P(d),_=G(v);ud(_,{get for(){return g(s).key},class:"text-sm font-medium",children:(W,V)=>{Et();var Q=tr();Be(()=>nt(Q,g(s).label)),w(W,Q)},$$slots:{default:!0}});var S=te(_,2);{var A=W=>{qw(W,{})};le(S,W=>{g(y)&&W(A)})}j(v);var C=te(v,2),k=G(C);{let W=B(()=>`Default: ${Wa[g(s).key]??"none"}`),V=B(()=>g(y)?"pr-8":"");Mu(k,{get id(){return g(s).key},get value(){return g(p)},oninput:Q=>{e.onConfigChange(g(s).key,Q.currentTarget.value)},get placeholder(){return g(W)},get class(){return`w-full ${g(V)??""}`}})}var M=te(k,2);{var N=W=>{var V=j$();V.__click=[U$,s,m,e];var Q=G(V);N2(Q,{class:"h-3 w-3"}),j(V),w(W,V)};le(M,W=>{g(y)&&W(N)})}j(C);var F=te(C,2);{var z=W=>{var V=H$(),Q=G(V,!0);j(V),Be(()=>nt(Q,g(s).help||cl[g(s).key])),w(W,V)};le(F,W=>{(g(s).help||cl[g(s).key])&&W(z)})}w(h,d)},u=h=>{var d=Z(),f=P(d);{var p=y=>{var v=$$(),_=P(v);ud(_,{get for(){return g(s).key},class:"block text-sm font-medium",children:(k,M)=>{Et();var N=tr();Be(()=>nt(N,g(s).label)),w(k,N)},$$slots:{default:!0}});var S=te(_,2);{let k=B(()=>String(e.localConfig[g(s).key]??"")),M=B(()=>`Default: ${Wa[g(s).key]??"none"}`);L$(S,{get id(){return g(s).key},get value(){return g(k)},onchange:N=>e.onConfigChange(g(s).key,N.currentTarget.value),get placeholder(){return g(M)},class:"min-h-[100px] w-full md:max-w-2xl"})}var A=te(S,2);{var C=k=>{var M=G$(),N=G(M,!0);j(M),Be(()=>nt(N,g(s).help||cl[g(s).key])),w(k,M)};le(A,k=>{(g(s).help||cl[g(s).key])&&k(C)})}w(y,v)},m=y=>{var v=Z(),_=P(v);{var S=C=>{var k=J$();const M=B(()=>g(s).options?.find(re=>re.value===e.localConfig[g(s).key])),N=B(()=>t(g(s).key)),F=B(()=>e.localConfig[g(s).key]),z=B(()=>g(N)?.serverDefault),W=B(()=>!g(N)||g(z)===void 0?!1:g(F)!==g(z));var V=P(k),Q=G(V);ud(Q,{get for(){return g(s).key},class:"text-sm font-medium",children:(re,D)=>{Et();var se=tr();Be(()=>nt(se,g(s).label)),w(re,se)},$$slots:{default:!0}});var K=te(Q,2);{var ie=re=>{qw(re,{})};le(K,re=>{g(W)&&re(ie)})}j(V);var L=te(V,2);he(L,()=>F$,(re,D)=>{D(re,{type:"single",get value(){return g(F)},onValueChange:se=>{g(s).key==="theme"&&se&&e.onThemeChange?e.onThemeChange(se):e.onConfigChange(g(s).key,se)},children:(se,ce)=>{var q=Y$(),ae=P(q),fe=G(ae);he(fe,()=>R$,(Te,Ae)=>{Ae(Te,{class:"w-full",children:(be,Ee)=>{var $e=W$(),Ye=G($e);{var He=rt=>{var Qe=Z();const ut=B(()=>g(M).icon);var ft=P(Qe);he(ft,()=>g(ut),(ht,it)=>{it(ht,{class:"h-4 w-4"})}),w(rt,Qe)};le(Ye,rt=>{g(M)?.icon&&rt(He)})}var We=te(Ye);j($e),Be(rt=>nt(We,` ${rt??""}`),[()=>g(M)?.label||`Select ${g(s).label.toLowerCase()}`]),w(be,$e)},$$slots:{default:!0}})});var xe=te(fe,2);{var pe=Te=>{var Ae=X$();Ae.__click=[V$,s,z,e];var be=G(Ae);N2(be,{class:"h-3 w-3"}),j(Ae),w(Te,Ae)};le(xe,Te=>{g(W)&&Te(pe)})}j(ae);var Ce=te(ae,2);he(Ce,()=>N$,(Te,Ae)=>{Ae(Te,{children:(be,Ee)=>{var $e=Z(),Ye=P($e);{var He=We=>{var rt=Z(),Qe=P(rt);dn(Qe,17,()=>g(s).options,ut=>ut.value,(ut,ft)=>{var ht=Z(),it=P(ht);he(it,()=>T$,(Je,at)=>{at(Je,{get value(){return g(ft).value},get label(){return g(ft).label},children:(ct,Se)=>{var Le=K$(),et=G(Le);{var ot=Gt=>{var jt=Z();const Yt=B(()=>g(ft).icon);var kr=P(jt);he(kr,()=>g(Yt),(Ar,st)=>{st(Ar,{class:"h-4 w-4"})}),w(Gt,jt)};le(et,Gt=>{g(ft).icon&&Gt(ot)})}var mt=te(et);j(Le),Be(()=>nt(mt,` ${g(ft).label??""}`)),w(ct,Le)},$$slots:{default:!0}})}),w(ut,ht)}),w(We,rt)};le(Ye,We=>{g(s).options&&We(He)})}w(be,$e)},$$slots:{default:!0}})}),w(se,q)},$$slots:{default:!0}})});var J=te(L,2);{var X=re=>{var D=Q$(),se=G(D,!0);j(D),Be(()=>nt(se,g(s).help||cl[g(s).key])),w(re,D)};le(J,re=>{(g(s).help||cl[g(s).key])&&re(X)})}w(C,k)},A=C=>{var k=Z(),M=P(k);{var N=F=>{var z=tW(),W=G(z);{let X=B(()=>!!e.localConfig[g(s).key]);Q0(W,{get id(){return g(s).key},get checked(){return g(X)},onCheckedChange:re=>e.onConfigChange(g(s).key,re),class:"mt-1"})}var V=te(W,2),Q=G(V),K=G(Q,!0);j(Q);var ie=te(Q,2);{var L=X=>{var re=Z$(),D=G(re,!0);j(re),Be(()=>nt(D,g(s).help||cl[g(s).key])),w(X,re)},J=X=>{var re=Z(),D=P(re);{var se=ce=>{var q=eW();w(ce,q)};le(D,ce=>{g(s).key==="pdfAsImage"&&!Rs()&&ce(se)},!0)}w(X,re)};le(ie,X=>{g(s).help||cl[g(s).key]?X(L):X(J,!1)})}j(V),j(z),Be(()=>{zt(Q,"for",g(s).key),nt(K,g(s).label)}),w(F,z)};le(M,F=>{g(s).type==="checkbox"&&F(N)},!0)}w(C,k)};le(_,C=>{g(s).type==="select"?C(S):C(A,!1)},!0)}w(y,v)};le(f,y=>{g(s).type==="textarea"?y(p):y(m,!1)},!0)}w(h,d)};le(l,h=>{g(s).type==="input"?h(c):h(u,!1)})}j(o),w(a,o)}),w(r,n),we()}Xn(["click"]);const nW=768;class iW extends v4{constructor(e=nW){super(`max-width: ${e-1}px`)}}const aW="sidebar:state",sW=3600*24*7,oW="18rem",lW="18rem",cW="3rem",uW="b";class hW{props;#e=B(()=>this.props.open());get open(){return g(this.#e)}set open(e){I(this.#e,e)}#t=ue(!1);get openMobile(){return g(this.#t)}set openMobile(e){I(this.#t,e,!0)}setOpen;#r;#n=B(()=>this.open?"expanded":"collapsed");get state(){return g(this.#n)}set state(e){I(this.#n,e)}constructor(e){this.setOpen=e.setOpen,this.#r=new iW,this.props=e}get isMobile(){return this.#r.current}handleShortcutKeydown=e=>{e.key===uW&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),this.toggle())};setOpenMobile=e=>{this.openMobile=e};toggle=()=>this.#r.current?this.openMobile=!this.openMobile:this.setOpen(!this.open)}const $w="scn-sidebar";function dW(r){return Zd(Symbol.for($w),new hW(r))}function Kb(){return Bc(Symbol.for($w))}var fW=$("<div><!></div>");function gW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=fW();Ht(i,s=>({"data-slot":"sidebar-group-content","data-sidebar":"group-content",class:s,...n}),[()=>sr("w-full text-sm",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var pW=$("<div><!></div>");function mW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","children","child","class"]);const i=B(()=>({class:sr("text-sidebar-foreground/70 ring-sidebar-ring outline-hidden flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e.class),"data-slot":"sidebar-group-label","data-sidebar":"group-label",...n}));var a=Z(),s=P(a);{var o=c=>{var u=Z(),h=P(u);Re(h,()=>e.child,()=>({props:g(i)})),w(c,u)},l=c=>{var u=pW();Ht(u,()=>({...g(i)}));var h=G(u);Re(h,()=>e.children??je),j(u),Fr(u,d=>t(d),()=>t()),w(c,u)};le(s,c=>{e.child?c(o):c(l,!1)})}w(r,a),we()}var bW=$("<div><!></div>");function vW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=bW();Ht(i,s=>({"data-slot":"sidebar-group","data-sidebar":"group",class:s,...n}),[()=>sr("relative flex w-full min-w-0 flex-col p-2",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var yW=$("<div><!></div>");function wW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=yW();Ht(i,s=>({"data-slot":"sidebar-header","data-sidebar":"header",class:s,...n}),[()=>sr("flex flex-col gap-2 p-2",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var xW=$("<main><!></main>");function _W(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=xW();Ht(i,s=>({"data-slot":"sidebar-inset",class:s,...n}),[()=>sr("relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}z0({base:"peer/menu-button outline-hidden ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground group-has-data-[sidebar=menu-action]/menu-item:pr-8 data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm transition-[width,height,padding] focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:font-medium [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background hover:bg-sidebar-accent hover:text-sidebar-accent-foreground shadow-[0_0_0_1px_var(--sidebar-border)] hover:shadow-[0_0_0_1px_var(--sidebar-accent)]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"group-data-[collapsible=icon]:p-0! h-12 text-sm"}},defaultVariants:{variant:"default",size:"default"}});var SW=$("<li><!></li>");function kW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=SW();Ht(i,s=>({"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",class:s,...n}),[()=>sr("group/menu-item relative",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var AW=$("<ul><!></ul>");function CW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=AW();Ht(i,s=>({"data-slot":"sidebar-menu","data-sidebar":"menu",class:s,...n}),[()=>sr("flex w-full min-w-0 flex-col gap-1",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}var EW=$("<div><!></div>");function TW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"open",15,!0),i=U(e,"onOpenChange",3,()=>{}),a=qe(e,["$$slots","$$events","$$legacy","ref","open","onOpenChange","class","style","children"]);const s=dW({open:()=>n(),setOpen:c=>{n(c),i()(c),document.cookie=`${aW}=${n()}; path=/; max-age=${sW}`}});var o=Z();Bn("keydown",Kl,function(...c){s.handleShortcutKeydown?.apply(this,c)});var l=P(o);he(l,()=>gl,(c,u)=>{u(c,{delayDuration:0,children:(h,d)=>{var f=EW();Ht(f,m=>({"data-slot":"sidebar-wrapper",style:`--sidebar-width: ${oW}; --sidebar-width-icon: ${cW}; ${e.style??""}`,class:m,...a}),[()=>sr("group/sidebar-wrapper flex min-h-svh w-full has-data-[variant=inset]:bg-sidebar",e.class)]);var p=G(f);Re(p,()=>e.children??je),j(f),Fr(f,m=>t(m),()=>t()),w(h,f)},$$slots:{default:!0}})}),w(r,o),we()}var MW=$('<!> <span class="sr-only">Toggle Sidebar</span>',1);function IW(r,e){ye(e,!0),U(e,"ref",11,null);let t=qe(e,["$$slots","$$events","$$legacy","ref","class","onclick"]);const n=Kb();{let i=B(()=>sr("size-7",e.class));Lr(r,tt({"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",get class(){return g(i)},type:"button",onclick:a=>{e.onclick?.(a),n.toggle()}},()=>t,{children:(a,s)=>{var o=MW(),l=P(o);fR(l,{}),Et(2),w(a,o)},$$slots:{default:!0}}))}we()}function OW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("fixed inset-0 z-50 bg-black/50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0",e.class));he(a,()=>Xf,(o,l)=>{l(o,tt({"data-slot":"sheet-overlay",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}const NW=z0({base:"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",variants:{side:{top:"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",bottom:"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",left:"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",right:"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}});var PW=$('<!> <span class="sr-only">Close</span>',1),RW=$("<!> <!>",1),FW=$("<!> <!>",1);function DW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"side",3,"right"),i=qe(e,["$$slots","$$events","$$legacy","ref","class","side","portalProps","children"]);var a=Z(),s=P(a);he(s,()=>Zo,(o,l)=>{l(o,tt(()=>e.portalProps,{children:(c,u)=>{var h=FW(),d=P(h);OW(d,{});var f=te(d,2);{let p=B(()=>sr(NW({side:n()}),e.class));he(f,()=>n2,(m,y)=>{y(m,tt({"data-slot":"sheet-content",get class(){return g(p)}},()=>i,{get ref(){return t()},set ref(v){t(v)},children:(v,_)=>{var S=RW(),A=P(S);Re(A,()=>e.children??je);var C=te(A,2);he(C,()=>r2,(k,M)=>{M(k,{class:"absolute top-4 right-4 rounded-xs opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-hidden disabled:pointer-events-none",children:(N,F)=>{var z=PW(),W=P(z);Ha(W,{class:"size-4"}),Et(2),w(N,z)},$$slots:{default:!0}})}),w(v,S)},$$slots:{default:!0}}))})}w(c,h)},$$slots:{default:!0}}))}),w(r,a),we()}var LW=$("<div><!></div>");function BW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=LW();Ht(i,s=>({"data-slot":"sheet-header",class:s,...n}),[()=>sr("flex flex-col gap-1.5 p-4",e.class)]);var a=G(i);Re(a,()=>e.children??je),j(i),Fr(i,s=>t(s),()=>t()),w(r,i),we()}function zW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("font-semibold text-foreground",e.class));he(a,()=>Kp,(o,l)=>{l(o,tt({"data-slot":"sheet-title",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}function UW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=qe(e,["$$slots","$$events","$$legacy","ref","class"]);var i=Z(),a=P(i);{let s=B(()=>sr("text-sm text-muted-foreground",e.class));he(a,()=>um,(o,l)=>{l(o,tt({"data-slot":"sheet-description",get class(){return g(s)}},()=>n,{get ref(){return t()},set ref(c){t(c)}}))})}w(r,i),we()}const jW=t2;var HW=$("<div><!></div>"),qW=$("<!> <!>",1),GW=$('<!> <div class="flex h-full w-full flex-col"><!></div>',1),$W=$('<div class="group peer hidden text-sidebar-foreground md:block" data-slot="sidebar"><div data-slot="sidebar-gap"></div> <div><div data-sidebar="sidebar" data-slot="sidebar-inner" class="flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow-sm"><!></div></div></div>');function WW(r,e){ye(e,!0);let t=U(e,"ref",15,null),n=U(e,"side",3,"left"),i=U(e,"variant",3,"sidebar"),a=U(e,"collapsible",3,"offcanvas"),s=qe(e,["$$slots","$$events","$$legacy","ref","side","variant","collapsible","class","children"]);const o=Kb();var l=Z(),c=P(l);{var u=d=>{var f=HW();Ht(f,m=>({class:m,...s}),[()=>sr("flex h-full w-(--sidebar-width) flex-col bg-sidebar text-sidebar-foreground",e.class)]);var p=G(f);Re(p,()=>e.children??je),j(f),Fr(f,m=>t(m),()=>t()),w(d,f)},h=d=>{var f=Z(),p=P(f);{var m=v=>{var _=Z(),S=P(_),A=()=>o.openMobile,C=k=>o.setOpenMobile(k);he(S,()=>jW,(k,M)=>{M(k,tt({get open(){return A()},set open(N){C(N)}},()=>s,{children:(N,F)=>{var z=Z(),W=P(z);he(W,()=>DW,(V,Q)=>{Q(V,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",class:"z-99999 w-(--sidebar-width) bg-sidebar p-0 text-sidebar-foreground sm:z-99 [&>button]:hidden",get style(){return`--sidebar-width: ${lW};`},get side(){return n()},children:(K,ie)=>{var L=GW(),J=P(L);he(J,()=>BW,(D,se)=>{se(D,{class:"sr-only",children:(ce,q)=>{var ae=qW(),fe=P(ae);he(fe,()=>zW,(pe,Ce)=>{Ce(pe,{children:(Te,Ae)=>{Et();var be=tr("Sidebar");w(Te,be)},$$slots:{default:!0}})});var xe=te(fe,2);he(xe,()=>UW,(pe,Ce)=>{Ce(pe,{children:(Te,Ae)=>{Et();var be=tr("Displays the mobile sidebar.");w(Te,be)},$$slots:{default:!0}})}),w(ce,ae)},$$slots:{default:!0}})});var X=te(J,2),re=G(X);Re(re,()=>e.children??je),j(X),w(K,L)},$$slots:{default:!0}})}),w(N,z)},$$slots:{default:!0}}))}),w(v,_)},y=v=>{var _=$W(),S=G(_),A=te(S,2);Ht(A,M=>({"data-slot":"sidebar-container",class:M,...s}),[()=>sr("fixed inset-y-0 z-999 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:z-0 md:flex",n()==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",i()==="floating"||i()==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)",e.class)]);var C=G(A),k=G(C);Re(k,()=>e.children??je),j(C),j(A),j(_),Fr(_,M=>t(M),()=>t()),Be(M=>{zt(_,"data-state",o.state),zt(_,"data-collapsible",o.state==="collapsed"?a():""),zt(_,"data-variant",i()),zt(_,"data-side",n()),er(S,1,M)},[()=>di(sr("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",i()==="floating"||i()==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)"))]),w(v,_)};le(p,v=>{o.isMobile?v(m):v(y,!1)},!0)}w(d,f)};le(c,d=>{a()==="none"?d(u):d(h,!1)})}w(r,l),we()}var VW=$('<div class="relative"><!> <!> <!></div>'),XW=$('<div class="flex items-center gap-2"><!> New chat</div> <!>',1),KW=$('<div class="flex items-center gap-2"><!> Search conversations</div> <!>',1),YW=$("<!> <!>",1),QW=$('<div class="space-y-0.5"><!></div>');function JW(r,e){ye(e,!0);let t=U(e,"isSearchModeActive",15),n=U(e,"searchQuery",15),i=ue(null);function a(){t(!1),n("")}Nt(()=>{t()&&g(i)?.focus()});var s=QW(),o=G(s);{var l=u=>{var h=VW(),d=G(h);Bh(d,{class:"absolute top-2.5 left-2 h-4 w-4 text-muted-foreground"});var f=te(d,2);Mu(f,{onkeydown:m=>m.key==="Escape"&&a(),placeholder:"Search conversations...",class:"pl-8",get ref(){return g(i)},set ref(m){I(i,m,!0)},get value(){return n()},set value(m){n(m)}});var p=te(f,2);Ha(p,{class:"cursor-pointertext-muted-foreground absolute top-2.5 right-2 h-4 w-4",onclick:a}),j(h),w(u,h)},c=u=>{var h=YW(),d=P(h);Lr(d,{class:"w-full justify-between hover:[&>kbd]:opacity-100",href:"?new_chat=true#/",get onclick(){return e.handleMobileSidebarItemClick},variant:"ghost",children:(p,m)=>{var y=XW(),v=P(y),_=G(v);n6(_,{class:"h-4 w-4"}),Et(),j(v);var S=te(v,2);Yb(S,{keys:["shift","cmd","o"]}),w(p,y)},$$slots:{default:!0}});var f=te(d,2);Lr(f,{class:"w-full justify-between hover:[&>kbd]:opacity-100",onclick:()=>{t(!0)},variant:"ghost",children:(p,m)=>{var y=KW(),v=P(y),_=G(v);Bh(_,{class:"h-4 w-4"}),Et(),j(v);var S=te(v,2);Yb(S,{keys:["cmd","k"]}),w(p,y)},$$slots:{default:!0}}),w(u,h)};le(o,u=>{t()?u(l):u(c,!1)})}j(s),w(r,s),we()}var ZW=$('<a href="#/"><h1 class="inline-flex items-center gap-1 px-2 text-xl font-semibold">Delta</h1></a> <!>',1),eV=$('<div class="px-2 py-4 text-center"><p class="mb-4 p-4 text-sm text-muted-foreground"> </p></div>'),tV=$("<!> <!>",1),rV=$("<!> <!>",1),nV=$('<!> <!> <div class="bottom-0 z-10 bg-sidebar bg-sidebar/50 px-4 py-4 backdrop-blur-lg md:sticky"></div>',1),iV=$("<!> <!>",1),aV=$("<!> <!>",1),sV=$("<!> <!>",1),oV=$("<!> <!> <!>",1);function lV(r,e){ye(e,!0);const t=Kb();let n=B(()=>ws.params.id),i=ue(!1),a=ue(""),s=ue(!1),o=ue(!1),l=ue(null),c=ue(""),u=B(()=>g(a).trim().length>0?ld().filter(M=>M.name.toLowerCase().includes(g(a).toLowerCase())):ld());async function h(M){const N=ld().find(F=>F.id===M);N&&(I(l,N,!0),I(s,!0))}async function d(M){const N=ld().find(F=>F.id===M);N&&(I(l,N,!0),I(c,N.name,!0),I(o,!0))}function f(){g(l)&&(I(s,!1),setTimeout(()=>{Lb(g(l).id),I(l,null)},100))}function p(){!g(c).trim()||!g(l)||(I(o,!1),uw(g(l).id,g(c)),I(l,null))}function m(){t.isMobile&&t.toggle()}function y(){I(i,!0)}function v(){if(g(n)&&g(u).find(N=>N.id===g(n))){const N=new CustomEvent("edit-active-conversation",{detail:{conversationId:g(n)}});document.dispatchEvent(N)}}async function _(M){g(i)&&(I(i,!1),I(a,"")),await Go(`#/chat/${M}`)}var S=oV(),A=P(S);zb(A,{class:"h-[100vh]",children:(M,N)=>{var F=nV(),z=P(F);he(z,()=>wW,(V,Q)=>{Q(V,{class:" top-0 z-10 gap-6 bg-sidebar/50 px-4 pt-4 pb-2 backdrop-blur-lg md:sticky",children:(K,ie)=>{var L=ZW(),J=P(L);J.__click=m;var X=te(J,2);JW(X,{handleMobileSidebarItemClick:m,get isSearchModeActive(){return g(i)},set isSearchModeActive(re){I(i,re,!0)},get searchQuery(){return g(a)},set searchQuery(re){I(a,re,!0)}}),w(K,L)},$$slots:{default:!0}})});var W=te(z,2);he(W,()=>vW,(V,Q)=>{Q(V,{class:"mt-4 space-y-2 p-0 px-4",children:(K,ie)=>{var L=rV(),J=P(L);{var X=D=>{var se=Z(),ce=P(se);he(ce,()=>mW,(q,ae)=>{ae(q,{children:(fe,xe)=>{Et();var pe=tr();Be(()=>nt(pe,g(i)?"Search results":"Conversations")),w(fe,pe)},$$slots:{default:!0}})}),w(D,se)};le(J,D=>{(g(u).length>0&&g(i)||!g(i))&&D(X)})}var re=te(J,2);he(re,()=>gW,(D,se)=>{se(D,{children:(ce,q)=>{var ae=Z(),fe=P(ae);he(fe,()=>CW,(xe,pe)=>{pe(xe,{children:(Ce,Te)=>{var Ae=tV(),be=P(Ae);dn(be,17,()=>g(u),Ye=>Ye.id,(Ye,He)=>{var We=Z(),rt=P(We);he(rt,()=>kW,(Qe,ut)=>{ut(Qe,{class:"mb-1",children:(ft,ht)=>{{let it=B(()=>({id:g(He).id,name:g(He).name,lastModified:g(He).lastModified,currNode:g(He).currNode})),Je=B(()=>g(n)===g(He).id);fV(ft,{get conversation(){return g(it)},handleMobileSidebarItemClick:m,get isActive(){return g(Je)},onSelect:_,onEdit:d,onDelete:h})}},$$slots:{default:!0}})}),w(Ye,We)});var Ee=te(be,2);{var $e=Ye=>{var He=eV(),We=G(He),rt=G(We,!0);j(We),j(He),Be(()=>nt(rt,g(a).length>0?"No results found":g(i)?"Start typing to see results":"No conversations yet")),w(Ye,He)};le(Ee,Ye=>{g(u).length===0&&Ye($e)})}w(Ce,Ae)},$$slots:{default:!0}})}),w(ce,ae)},$$slots:{default:!0}})}),w(K,L)},$$slots:{default:!0}})}),Et(2),w(M,F)},$$slots:{default:!0}});var C=te(A,2);{let M=B(()=>g(l)?`Are you sure you want to delete "${g(l).name}"? This action cannot be undone and will permanently remove all messages in this conversation.`:"");qv(C,{title:"Delete Conversation",get description(){return g(M)},confirmText:"Delete",cancelText:"Cancel",variant:"destructive",get icon(){return oc},onConfirm:f,onCancel:()=>{I(s,!1),I(l,null)},get open(){return g(s)},set open(N){I(s,N,!0)}})}var k=te(C,2);return he(k,()=>wl,(M,N)=>{N(M,{get open(){return g(o)},set open(F){I(o,F,!0)},children:(F,z)=>{var W=Z(),V=P(W);he(V,()=>vl,(Q,K)=>{K(Q,{children:(ie,L)=>{var J=sV(),X=P(J);he(X,()=>bl,(D,se)=>{se(D,{children:(ce,q)=>{var ae=iV(),fe=P(ae);he(fe,()=>pl,(pe,Ce)=>{Ce(pe,{children:(Te,Ae)=>{Et();var be=tr("Edit Conversation Name");w(Te,be)},$$slots:{default:!0}})});var xe=te(fe,2);he(xe,()=>yl,(pe,Ce)=>{Ce(pe,{children:(Te,Ae)=>{Mu(Te,{class:"mt-4 text-foreground",onkeydown:be=>{be.key==="Enter"&&(be.preventDefault(),p())},placeholder:"Enter a new name",type:"text",get value(){return g(c)},set value(be){I(c,be,!0)}})},$$slots:{default:!0}})}),w(ce,ae)},$$slots:{default:!0}})});var re=te(X,2);he(re,()=>ml,(D,se)=>{se(D,{children:(ce,q)=>{var ae=aV(),fe=P(ae);he(fe,()=>J0,(pe,Ce)=>{Ce(pe,{onclick:()=>{I(o,!1),I(l,null)},children:(Te,Ae)=>{Et();var be=tr("Cancel");w(Te,be)},$$slots:{default:!0}})});var xe=te(fe,2);he(xe,()=>pc,(pe,Ce)=>{Ce(pe,{onclick:p,children:(Te,Ae)=>{Et();var be=tr("Save");w(Te,be)},$$slots:{default:!0}})}),w(ce,ae)},$$slots:{default:!0}})}),w(ie,J)},$$slots:{default:!0}})}),w(F,W)},$$slots:{default:!0}})}),w(r,S),we({handleMobileSidebarItemClick:m,activateSearchMode:y,editActiveConversation:v})}Xn(["click"]);function cV(r,e){I(e,!0)}function uV(r,e){e.onSelect?.(e.conversation.id)}var hV=$('<div class="actions flex items-center"><!></div>'),dV=$('<button><div class="flex min-w-0 flex-1 items-center gap-2"><!>  <span class="truncate text-sm font-medium"> </span></div> <!></button>');function fV(r,e){ye(e,!0);let t=U(e,"isActive",3,!1),n=ue(!1),i=ue(!1),a=B(()=>dw().includes(e.conversation.id));function s(_){_.stopPropagation(),e.onEdit?.(e.conversation.id)}function o(_){_.stopPropagation(),e.onDelete?.(e.conversation.id)}function l(_){_.detail.conversationId===e.conversation.id&&t()&&s(_)}function c(){g(i)||I(n,!1)}Nt(()=>{g(i)||I(n,!1)}),_i(()=>(document.addEventListener("edit-active-conversation",l),()=>{document.removeEventListener("edit-active-conversation",l)}));var u=dV();u.__click=[uV,e],u.__mouseover=[cV,n];var h=G(u),d=G(h);{var f=_=>{uo(_,{class:"h-3.5 w-3.5 shrink-0 animate-spin text-muted-foreground"})};le(d,_=>{g(a)&&_(f)})}var p=te(d,2);p.__click=function(..._){e.handleMobileSidebarItemClick?.apply(this,_)};var m=G(p,!0);j(p),j(h);var y=te(h,2);{var v=_=>{var S=hV(),A=G(S);{let C=B(()=>[{icon:mR,label:"Edit",onclick:s,shortcut:["shift","cmd","e"]},{icon:O2,label:"Export",onclick:k=>{k.stopPropagation(),ew(e.conversation.id)},shortcut:["shift","cmd","s"]},{icon:oc,label:"Delete",onclick:o,variant:"destructive",shortcut:["shift","cmd","d"],separator:!0}]);qae(A,{get triggerIcon(){return rR},triggerTooltip:"More actions",get actions(){return g(C)},get open(){return g(i)},set open(k){I(i,k,!0)}})}j(S),w(_,S)};le(y,_=>{g(n)&&_(v)})}j(u),Be(()=>{er(u,1,`group flex min-h-9 w-full cursor-pointer items-center justify-between space-x-3 rounded-lg px-3 py-1.5 text-left transition-colors hover:bg-foreground/10 ${t()?"bg-foreground/5 text-accent-foreground":""}`,"svelte-5d6dyd"),nt(m,e.conversation.name)}),Bn("mouseleave",u,c),w(r,u),we()}Xn(["click","mouseover"]);var gV=$("<!> ",1),pV=$("<!> <!>",1),mV=$('<!> <div><p class="font-medium"> </p></div> <!>',1);function bV(r,e){ye(e,!0);let t=U(e,"open",15);const n=B(()=>e.type==="timeout"),i=B(()=>g(n)?"TCP Timeout":"Server Error"),a=B(()=>g(n)?"The request did not receive a response from the server before timing out.":"The server responded with an error message. Review the details below."),s=B(()=>g(n)?"text-destructive":"text-amber-500"),o=B(()=>g(n)?"border-destructive/40 bg-destructive/10 text-destructive":"border-amber-500/40 bg-amber-500/10 text-amber-600 dark:text-amber-400");function l(h){t(h),e.onOpenChange?.(h)}var c=Z(),u=P(c);he(u,()=>wl,(h,d)=>{d(h,{get open(){return t()},onOpenChange:l,children:(f,p)=>{var m=Z(),y=P(m);he(y,()=>vl,(v,_)=>{_(v,{children:(S,A)=>{var C=mV(),k=P(C);he(k,()=>bl,(W,V)=>{V(W,{children:(Q,K)=>{var ie=pV(),L=P(ie);he(L,()=>pl,(X,re)=>{re(X,{class:"flex items-center gap-2",children:(D,se)=>{var ce=gV(),q=P(ce);{var ae=pe=>{{let Ce=B(()=>`h-5 w-5 ${g(s)}`);_R(pe,{get class(){return g(Ce)}})}},fe=pe=>{{let Ce=B(()=>`h-5 w-5 ${g(s)}`);zh(pe,{get class(){return g(Ce)}})}};le(q,pe=>{g(n)?pe(ae):pe(fe,!1)})}var xe=te(q);Be(()=>nt(xe,` ${g(i)??""}`)),w(D,ce)},$$slots:{default:!0}})});var J=te(L,2);he(J,()=>yl,(X,re)=>{re(X,{children:(D,se)=>{Et();var ce=tr();Be(()=>nt(ce,g(a))),w(D,ce)},$$slots:{default:!0}})}),w(Q,ie)},$$slots:{default:!0}})});var M=te(k,2),N=G(M),F=G(N,!0);j(N),j(M);var z=te(M,2);he(z,()=>ml,(W,V)=>{V(W,{children:(Q,K)=>{var ie=Z(),L=P(ie);he(L,()=>pc,(J,X)=>{X(J,{onclick:()=>l(!1),children:(re,D)=>{Et();var se=tr("Close");w(re,se)},$$slots:{default:!0}})}),w(Q,ie)},$$slots:{default:!0}})}),Be(()=>{er(M,1,`rounded-lg border px-4 py-3 text-sm ${g(o)}`),nt(F,e.message)}),w(S,C)},$$slots:{default:!0}})}),w(f,m)},$$slots:{default:!0}})}),w(r,c),we()}var vV=$("<!> Empty Files Detected",1),yV=$("<!> <!>",1),wV=$('<li class="font-mono text-sm"> </li>'),xV=$('<!> <div class="space-y-3 text-sm"><div class="rounded-lg bg-muted p-3"><div class="mb-2 font-medium">Empty Files:</div> <ul class="list-inside list-disc space-y-1 text-muted-foreground"></ul></div> <div><div class="mb-2 font-medium">What happened:</div> <ul class="list-inside list-disc space-y-1 text-muted-foreground"><li>Empty files cannot be processed or sent to the AI model</li> <li>These files have been automatically removed from your attachments</li> <li>You can try uploading files with content instead</li></ul></div></div> <!>',1);function _V(r,e){ye(e,!0);let t=U(e,"open",15);function n(s){t(s),e.onOpenChange?.(s)}var i=Z(),a=P(i);he(a,()=>wl,(s,o)=>{o(s,{get open(){return t()},onOpenChange:n,children:(l,c)=>{var u=Z(),h=P(u);he(h,()=>vl,(d,f)=>{f(d,{children:(p,m)=>{var y=xV(),v=P(y);he(v,()=>bl,(k,M)=>{M(k,{children:(N,F)=>{var z=yV(),W=P(z);he(W,()=>pl,(Q,K)=>{K(Q,{class:"flex items-center gap-2",children:(ie,L)=>{var J=vV(),X=P(J);iR(X,{class:"h-5 w-5 text-destructive"}),Et(),w(ie,J)},$$slots:{default:!0}})});var V=te(W,2);he(V,()=>yl,(Q,K)=>{K(Q,{children:(ie,L)=>{Et();var J=tr("The following files are empty and have been removed from your attachments:");w(ie,J)},$$slots:{default:!0}})}),w(N,z)},$$slots:{default:!0}})});var _=te(v,2),S=G(_),A=te(G(S),2);dn(A,20,()=>e.emptyFiles,k=>k,(k,M)=>{var N=wV(),F=G(N,!0);j(N),Be(()=>nt(F,M)),w(k,N)}),j(A),j(S),Et(2),j(_);var C=te(_,2);he(C,()=>ml,(k,M)=>{M(k,{children:(N,F)=>{var z=Z(),W=P(z);he(W,()=>pc,(V,Q)=>{Q(V,{onclick:()=>n(!1),children:(K,ie)=>{Et();var L=tr("Got it");w(K,L)},$$slots:{default:!0}})}),w(N,z)},$$slots:{default:!0}})}),w(p,y)},$$slots:{default:!0}})}),w(l,u)},$$slots:{default:!0}})}),w(r,i),we()}var SV=$("<!> <!>",1),kV=$("<!> <!>",1),AV=$('<!> <div class="space-y-4 pt-2 pb-6"><div class="space-y-2"><p class="text-sm font-medium text-muted-foreground">Current title:</p> <p class="rounded-md bg-muted/50 p-3 text-sm font-medium"> </p></div> <div class="space-y-2"><p class="text-sm font-medium text-muted-foreground">New title would be:</p> <p class="rounded-md bg-muted/50 p-3 text-sm font-medium"> </p></div></div> <!>',1);function CV(r,e){ye(e,!0);let t=U(e,"open",15);var n=Z(),i=P(n);he(i,()=>wl,(a,s)=>{s(a,{get open(){return t()},set open(o){t(o)},children:(o,l)=>{var c=Z(),u=P(c);he(u,()=>vl,(h,d)=>{d(h,{children:(f,p)=>{var m=AV(),y=P(m);he(y,()=>bl,(F,z)=>{z(F,{children:(W,V)=>{var Q=SV(),K=P(Q);he(K,()=>pl,(L,J)=>{J(L,{children:(X,re)=>{Et();var D=tr("Update Conversation Title?");w(X,D)},$$slots:{default:!0}})});var ie=te(K,2);he(ie,()=>yl,(L,J)=>{J(L,{children:(X,re)=>{Et();var D=tr("Do you want to update the conversation title to match the first message content?");w(X,D)},$$slots:{default:!0}})}),w(W,Q)},$$slots:{default:!0}})});var v=te(y,2),_=G(v),S=te(G(_),2),A=G(S,!0);j(S),j(_);var C=te(_,2),k=te(G(C),2),M=G(k,!0);j(k),j(C),j(v);var N=te(v,2);he(N,()=>ml,(F,z)=>{z(F,{children:(W,V)=>{var Q=kV(),K=P(Q);Lr(K,{variant:"outline",get onclick(){return e.onCancel},children:(L,J)=>{Et();var X=tr("Keep Current Title");w(L,X)},$$slots:{default:!0}});var ie=te(K,2);Lr(ie,{get onclick(){return e.onConfirm},children:(L,J)=>{Et();var X=tr("Update Title");w(L,X)},$$slots:{default:!0}}),w(W,Q)},$$slots:{default:!0}})}),Be(()=>{nt(A,e.currentTitle),nt(M,e.newTitle)}),w(f,m)},$$slots:{default:!0}})}),w(o,c)},$$slots:{default:!0}})}),w(r,n),we()}var EV=$("<span>â</span>"),TV=$("<span></span>"),MV=$("<!> <!>",1),IV=$("<kbd></kbd>");function Yb(r,e){ye(e,!0);let t=U(e,"variant",3,"default"),n=U(e,"class",3,""),i=t()==="destructive"?"text-destructive":"text-muted-foreground";var a=IV();dn(a,21,()=>e.keys,u9,(s,o,l)=>{var c=MV(),u=P(c);{var h=m=>{{let y=B(()=>t()==="destructive"?"text-destructive":"");VP(m,{get class(){return`h-1 w-1 ${g(y)??""} -mr-1`}})}},d=m=>{var y=Z(),v=P(y);{var _=A=>{var C=EV();Be(()=>er(C,1,di(t()==="destructive"?"text-destructive":""))),w(A,C)},S=A=>{var C=tr();Be(k=>nt(C,k),[()=>g(o).toUpperCase()]),w(A,C)};le(v,A=>{g(o)==="cmd"?A(_):A(S,!1)},!0)}w(m,y)};le(u,m=>{g(o)==="shift"?m(h):m(d,!1)})}var f=te(u,2);{var p=m=>{var y=TV();w(m,y)};le(f,m=>{l<e.keys.length-1&&m(p)})}w(s,c)}),j(a),Be(()=>er(a,1,`px-1 pointer-events-none inline-flex select-none items-center gap-0.5 font-sans text-md font-medium opacity-0 transition-opacity -my-1 ${i} ${n()??""}`)),w(r,a),we()}const OV={};function Qb(r,e){const t=OV,n=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Ww(r,n,i)}function Ww(r,e,t){if(NV(r)){if("value"in r)return r.type==="html"&&!t?"":r.value;if(e&&"alt"in r&&r.alt)return r.alt;if("children"in r)return Vw(r.children,e,t)}return Array.isArray(r)?Vw(r,e,t):""}function Vw(r,e,t){const n=[];let i=-1;for(;++i<r.length;)n[i]=Ww(r[i],e,t);return n.join("")}function NV(r){return!!(r&&typeof r=="object")}const Xw=document.createElement("i");function Jb(r){const e="&"+r+";";Xw.innerHTML=e;const t=Xw.textContent;return t.charCodeAt(t.length-1)===59&&r!=="semi"||t===e?!1:t}function Aa(r,e,t,n){const i=r.length;let a=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,n.length<1e4)s=Array.from(n),s.unshift(e,t),r.splice(...s);else for(t&&r.splice(e,t);a<n.length;)s=n.slice(a,a+1e4),s.unshift(e,0),r.splice(...s),a+=1e4,e+=1e4}function Xa(r,e){return r.length>0?(Aa(r,r.length,0,e),r):e}const Kw={}.hasOwnProperty;function Yw(r){const e={};let t=-1;for(;++t<r.length;)PV(e,r[t]);return e}function PV(r,e){let t;for(t in e){const i=(Kw.call(r,t)?r[t]:void 0)||(r[t]={}),a=e[t];let s;if(a)for(s in a){Kw.call(i,s)||(i[s]=[]);const o=a[s];RV(i[s],Array.isArray(o)?o:o?[o]:[])}}}function RV(r,e){let t=-1;const n=[];for(;++t<e.length;)(e[t].add==="after"?r:n).push(e[t]);Aa(r,0,0,n)}function Qw(r,e){const t=Number.parseInt(r,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"ï¿½":String.fromCodePoint(t)}function hs(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xi=Sl(/[A-Za-z]/),Ri=Sl(/[\dA-Za-z]/),FV=Sl(/[#-'*+\--9=?A-Z^-~]/);function a1(r){return r!==null&&(r<32||r===127)}const Zb=Sl(/\d/),DV=Sl(/[\dA-Fa-f]/),LV=Sl(/[!-/:-@[-`{-~]/);function ir(r){return r!==null&&r<-2}function xn(r){return r!==null&&(r<0||r===32)}function Qr(r){return r===-2||r===-1||r===32}const s1=Sl(new RegExp("\\p{P}|\\p{S}","u")),vc=Sl(/\s/);function Sl(r){return e;function e(t){return t!==null&&t>-1&&r.test(String.fromCharCode(t))}}function Iu(r){const e=[];let t=-1,n=0,i=0;for(;++t<r.length;){const a=r.charCodeAt(t);let s="";if(a===37&&Ri(r.charCodeAt(t+1))&&Ri(r.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const o=r.charCodeAt(t+1);a<56320&&o>56319&&o<57344?(s=String.fromCharCode(a,o),i=1):s="ï¿½"}else s=String.fromCharCode(a);s&&(e.push(r.slice(n,t),encodeURIComponent(s)),n=t+i+1,s=""),i&&(t+=i,i=0)}return e.join("")+r.slice(n)}function Vr(r,e,t,n){const i=n?n-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(l){return Qr(l)?(r.enter(t),o(l)):e(l)}function o(l){return Qr(l)&&a++<i?(r.consume(l),o):(r.exit(t),e(l))}}const BV={tokenize:zV};function zV(r){const e=r.attempt(this.parser.constructs.contentInitial,n,i);let t;return e;function n(o){if(o===null){r.consume(o);return}return r.enter("lineEnding"),r.consume(o),r.exit("lineEnding"),Vr(r,e,"linePrefix")}function i(o){return r.enter("paragraph"),a(o)}function a(o){const l=r.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,s(o)}function s(o){if(o===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(o);return}return ir(o)?(r.consume(o),r.exit("chunkText"),a):(r.consume(o),s)}}const UV={tokenize:jV},Jw={tokenize:HV};function jV(r){const e=this,t=[];let n=0,i,a,s;return o;function o(S){if(n<t.length){const A=t[n];return e.containerState=A[1],r.attempt(A[0].continuation,l,c)(S)}return c(S)}function l(S){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const A=e.events.length;let C=A,k;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){k=e.events[C][1].end;break}v(n);let M=A;for(;M<e.events.length;)e.events[M][1].end={...k},M++;return Aa(e.events,C+1,0,e.events.slice(A)),e.events.length=M,c(S)}return o(S)}function c(S){if(n===t.length){if(!i)return d(S);if(i.currentConstruct&&i.currentConstruct.concrete)return p(S);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},r.check(Jw,u,h)(S)}function u(S){return i&&_(),v(n),d(S)}function h(S){return e.parser.lazy[e.now().line]=n!==t.length,s=e.now().offset,p(S)}function d(S){return e.containerState={},r.attempt(Jw,f,p)(S)}function f(S){return n++,t.push([e.currentConstruct,e.containerState]),d(S)}function p(S){if(S===null){i&&_(),v(0),r.consume(S);return}return i=i||e.parser.flow(e.now()),r.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),m(S)}function m(S){if(S===null){y(r.exit("chunkFlow"),!0),v(0),r.consume(S);return}return ir(S)?(r.consume(S),y(r.exit("chunkFlow")),n=0,e.interrupt=void 0,o):(r.consume(S),m)}function y(S,A){const C=e.sliceStream(S);if(A&&C.push(null),S.previous=a,a&&(a.next=S),a=S,i.defineSkip(S.start),i.write(C),e.parser.lazy[S.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<s&&(!i.events[k][1].end||i.events[k][1].end.offset>s))return;const M=e.events.length;let N=M,F,z;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){if(F){z=e.events[N][1].end;break}F=!0}for(v(n),k=M;k<e.events.length;)e.events[k][1].end={...z},k++;Aa(e.events,N+1,0,e.events.slice(M)),e.events.length=k}}function v(S){let A=t.length;for(;A-- >S;){const C=t[A];e.containerState=C[1],C[0].exit.call(e,r)}t.length=S}function _(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function HV(r,e,t){return Vr(r,r.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ou(r){if(r===null||xn(r)||vc(r))return 1;if(s1(r))return 2}function o1(r,e,t){const n=[];let i=-1;for(;++i<r.length;){const a=r[i].resolveAll;a&&!n.includes(a)&&(e=a(e,t),n.push(a))}return e}const e3={name:"attention",resolveAll:qV,tokenize:GV};function qV(r,e){let t=-1,n,i,a,s,o,l,c,u;for(;++t<r.length;)if(r[t][0]==="enter"&&r[t][1].type==="attentionSequence"&&r[t][1]._close){for(n=t;n--;)if(r[n][0]==="exit"&&r[n][1].type==="attentionSequence"&&r[n][1]._open&&e.sliceSerialize(r[n][1]).charCodeAt(0)===e.sliceSerialize(r[t][1]).charCodeAt(0)){if((r[n][1]._close||r[t][1]._open)&&(r[t][1].end.offset-r[t][1].start.offset)%3&&!((r[n][1].end.offset-r[n][1].start.offset+r[t][1].end.offset-r[t][1].start.offset)%3))continue;l=r[n][1].end.offset-r[n][1].start.offset>1&&r[t][1].end.offset-r[t][1].start.offset>1?2:1;const h={...r[n][1].end},d={...r[t][1].start};Zw(h,-l),Zw(d,l),s={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...r[n][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...r[t][1].start},end:d},a={type:l>1?"strongText":"emphasisText",start:{...r[n][1].end},end:{...r[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...s.start},end:{...o.end}},r[n][1].end={...s.start},r[t][1].start={...o.end},c=[],r[n][1].end.offset-r[n][1].start.offset&&(c=Xa(c,[["enter",r[n][1],e],["exit",r[n][1],e]])),c=Xa(c,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",a,e]]),c=Xa(c,o1(e.parser.constructs.insideSpan.null,r.slice(n+1,t),e)),c=Xa(c,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",i,e]]),r[t][1].end.offset-r[t][1].start.offset?(u=2,c=Xa(c,[["enter",r[t][1],e],["exit",r[t][1],e]])):u=0,Aa(r,n-1,t-n+3,c),t=n+c.length-u-2;break}}for(t=-1;++t<r.length;)r[t][1].type==="attentionSequence"&&(r[t][1].type="data");return r}function GV(r,e){const t=this.parser.constructs.attentionMarkers.null,n=this.previous,i=Ou(n);let a;return s;function s(l){return a=l,r.enter("attentionSequence"),o(l)}function o(l){if(l===a)return r.consume(l),o;const c=r.exit("attentionSequence"),u=Ou(l),h=!u||u===2&&i||t.includes(l),d=!i||i===2&&u||t.includes(n);return c._open=!!(a===42?h:h&&(i||!d)),c._close=!!(a===42?d:d&&(u||!h)),e(l)}}function Zw(r,e){r.column+=e,r.offset+=e,r._bufferIndex+=e}const $V={name:"autolink",tokenize:WV};function WV(r,e,t){let n=0;return i;function i(f){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(f),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),a}function a(f){return Xi(f)?(r.consume(f),s):f===64?t(f):c(f)}function s(f){return f===43||f===45||f===46||Ri(f)?(n=1,o(f)):c(f)}function o(f){return f===58?(r.consume(f),n=0,l):(f===43||f===45||f===46||Ri(f))&&n++<32?(r.consume(f),o):(n=0,c(f))}function l(f){return f===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(f),r.exit("autolinkMarker"),r.exit("autolink"),e):f===null||f===32||f===60||a1(f)?t(f):(r.consume(f),l)}function c(f){return f===64?(r.consume(f),u):FV(f)?(r.consume(f),c):t(f)}function u(f){return Ri(f)?h(f):t(f)}function h(f){return f===46?(r.consume(f),n=0,u):f===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(f),r.exit("autolinkMarker"),r.exit("autolink"),e):d(f)}function d(f){if((f===45||Ri(f))&&n++<63){const p=f===45?d:h;return r.consume(f),p}return t(f)}}const gd={partial:!0,tokenize:VV};function VV(r,e,t){return n;function n(a){return Qr(a)?Vr(r,i,"linePrefix")(a):i(a)}function i(a){return a===null||ir(a)?e(a):t(a)}}const e8={continuation:{tokenize:KV},exit:YV,name:"blockQuote",tokenize:XV};function XV(r,e,t){const n=this;return i;function i(s){if(s===62){const o=n.containerState;return o.open||(r.enter("blockQuote",{_container:!0}),o.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(s),r.exit("blockQuoteMarker"),a}return t(s)}function a(s){return Qr(s)?(r.enter("blockQuotePrefixWhitespace"),r.consume(s),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),e):(r.exit("blockQuotePrefix"),e(s))}}function KV(r,e,t){const n=this;return i;function i(s){return Qr(s)?Vr(r,a,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return r.attempt(e8,e,t)(s)}}function YV(r){r.exit("blockQuote")}const t8={name:"characterEscape",tokenize:QV};function QV(r,e,t){return n;function n(a){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(a),r.exit("escapeMarker"),i}function i(a){return LV(a)?(r.enter("characterEscapeValue"),r.consume(a),r.exit("characterEscapeValue"),r.exit("characterEscape"),e):t(a)}}const r8={name:"characterReference",tokenize:JV};function JV(r,e,t){const n=this;let i=0,a,s;return o;function o(h){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(h),r.exit("characterReferenceMarker"),l}function l(h){return h===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(h),r.exit("characterReferenceMarkerNumeric"),c):(r.enter("characterReferenceValue"),a=31,s=Ri,u(h))}function c(h){return h===88||h===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(h),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),a=6,s=DV,u):(r.enter("characterReferenceValue"),a=7,s=Zb,u(h))}function u(h){if(h===59&&i){const d=r.exit("characterReferenceValue");return s===Ri&&!Jb(n.sliceSerialize(d))?t(h):(r.enter("characterReferenceMarker"),r.consume(h),r.exit("characterReferenceMarker"),r.exit("characterReference"),e)}return s(h)&&i++<a?(r.consume(h),u):t(h)}}const n8={partial:!0,tokenize:eX},i8={concrete:!0,name:"codeFenced",tokenize:ZV};function ZV(r,e,t){const n=this,i={partial:!0,tokenize:C};let a=0,s=0,o;return l;function l(k){return c(k)}function c(k){const M=n.events[n.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,o=k,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),u(k)}function u(k){return k===o?(s++,r.consume(k),u):s<3?t(k):(r.exit("codeFencedFenceSequence"),Qr(k)?Vr(r,h,"whitespace")(k):h(k))}function h(k){return k===null||ir(k)?(r.exit("codeFencedFence"),n.interrupt?e(k):r.check(n8,m,A)(k)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),d(k))}function d(k){return k===null||ir(k)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),h(k)):Qr(k)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Vr(r,f,"whitespace")(k)):k===96&&k===o?t(k):(r.consume(k),d)}function f(k){return k===null||ir(k)?h(k):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||ir(k)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),h(k)):k===96&&k===o?t(k):(r.consume(k),p)}function m(k){return r.attempt(i,A,y)(k)}function y(k){return r.enter("lineEnding"),r.consume(k),r.exit("lineEnding"),v}function v(k){return a>0&&Qr(k)?Vr(r,_,"linePrefix",a+1)(k):_(k)}function _(k){return k===null||ir(k)?r.check(n8,m,A)(k):(r.enter("codeFlowValue"),S(k))}function S(k){return k===null||ir(k)?(r.exit("codeFlowValue"),_(k)):(r.consume(k),S)}function A(k){return r.exit("codeFenced"),e(k)}function C(k,M,N){let F=0;return z;function z(ie){return k.enter("lineEnding"),k.consume(ie),k.exit("lineEnding"),W}function W(ie){return k.enter("codeFencedFence"),Qr(ie)?Vr(k,V,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ie):V(ie)}function V(ie){return ie===o?(k.enter("codeFencedFenceSequence"),Q(ie)):N(ie)}function Q(ie){return ie===o?(F++,k.consume(ie),Q):F>=s?(k.exit("codeFencedFenceSequence"),Qr(ie)?Vr(k,K,"whitespace")(ie):K(ie)):N(ie)}function K(ie){return ie===null||ir(ie)?(k.exit("codeFencedFence"),M(ie)):N(ie)}}}function eX(r,e,t){const n=this;return i;function i(s){return s===null?t(s):(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}const t3={name:"codeIndented",tokenize:rX},tX={partial:!0,tokenize:nX};function rX(r,e,t){const n=this;return i;function i(c){return r.enter("codeIndented"),Vr(r,a,"linePrefix",5)(c)}function a(c){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):t(c)}function s(c){return c===null?l(c):ir(c)?r.attempt(tX,s,l)(c):(r.enter("codeFlowValue"),o(c))}function o(c){return c===null||ir(c)?(r.exit("codeFlowValue"),s(c)):(r.consume(c),o)}function l(c){return r.exit("codeIndented"),e(c)}}function nX(r,e,t){const n=this;return i;function i(s){return n.parser.lazy[n.now().line]?t(s):ir(s)?(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),i):Vr(r,a,"linePrefix",5)(s)}function a(s){const o=n.events[n.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):ir(s)?i(s):t(s)}}const iX={name:"codeText",previous:sX,resolve:aX,tokenize:oX};function aX(r){let e=r.length-4,t=3,n,i;if((r[t][1].type==="lineEnding"||r[t][1].type==="space")&&(r[e][1].type==="lineEnding"||r[e][1].type==="space")){for(n=t;++n<e;)if(r[n][1].type==="codeTextData"){r[t][1].type="codeTextPadding",r[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(n=t-1,e++;++n<=e;)i===void 0?n!==e&&r[n][1].type!=="lineEnding"&&(i=n):(n===e||r[n][1].type==="lineEnding")&&(r[i][1].type="codeTextData",n!==i+2&&(r[i][1].end=r[n-1][1].end,r.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return r}function sX(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function oX(r,e,t){let n=0,i,a;return s;function s(h){return r.enter("codeText"),r.enter("codeTextSequence"),o(h)}function o(h){return h===96?(r.consume(h),n++,o):(r.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(r.enter("space"),r.consume(h),r.exit("space"),l):h===96?(a=r.enter("codeTextSequence"),i=0,u(h)):ir(h)?(r.enter("lineEnding"),r.consume(h),r.exit("lineEnding"),l):(r.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||ir(h)?(r.exit("codeTextData"),l(h)):(r.consume(h),c)}function u(h){return h===96?(r.consume(h),i++,u):i===n?(r.exit("codeTextSequence"),r.exit("codeText"),e(h)):(a.type="codeTextData",c(h))}}class lX{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=t??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&pd(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),pd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),pd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);pd(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);pd(this.left,t.reverse())}}}function pd(r,e){let t=0;if(e.length<1e4)r.push(...e);else for(;t<e.length;)r.push(...e.slice(t,t+1e4)),t+=1e4}function a8(r){const e={};let t=-1,n,i,a,s,o,l,c;const u=new lX(r);for(;++t<u.length;){for(;t in e;)t=e[t];if(n=u.get(t),t&&n[1].type==="chunkFlow"&&u.get(t-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,cX(u,t)),t=e[t],c=!0);else if(n[1]._container){for(a=t,i=void 0;a--;)if(s=u.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(n[1].end={...u.get(i)[1].start},o=u.slice(i,t),o.unshift(n),u.splice(i,t-i+1,o))}}return Aa(r,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function cX(r,e){const t=r.get(e)[1],n=r.get(e)[2];let i=e-1;const a=[];let s=t._tokenizer;s||(s=n.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const o=s.events,l=[],c={};let u,h,d=-1,f=t,p=0,m=0;const y=[m];for(;f;){for(;r.get(++i)[1]!==f;);a.push(i),f._tokenizer||(u=n.sliceStream(f),f.next||u.push(null),h&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=t;++d<o.length;)o[d][0]==="exit"&&o[d-1][0]==="enter"&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(m=d+1,y.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),d=y.length;d--;){const v=o.slice(y[d],y[d+1]),_=a.pop();l.push([_,_+v.length-1]),r.splice(_,2,v)}for(l.reverse(),d=-1;++d<l.length;)c[p+l[d][0]]=p+l[d][1],p+=l[d][1]-l[d][0]-1;return c}const uX={resolve:dX,tokenize:fX},hX={partial:!0,tokenize:gX};function dX(r){return a8(r),r}function fX(r,e){let t;return n;function n(o){return r.enter("content"),t=r.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?a(o):ir(o)?r.check(hX,s,a)(o):(r.consume(o),i)}function a(o){return r.exit("chunkContent"),r.exit("content"),e(o)}function s(o){return r.consume(o),r.exit("chunkContent"),t.next=r.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function gX(r,e,t){const n=this;return i;function i(s){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),Vr(r,a,"linePrefix")}function a(s){if(s===null||ir(s))return t(s);const o=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):r.interrupt(n.parser.constructs.flow,t,e)(s)}}function s8(r,e,t,n,i,a,s,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(r.enter(n),r.enter(i),r.enter(a),r.consume(v),r.exit(a),d):v===null||v===32||v===41||a1(v)?t(v):(r.enter(n),r.enter(s),r.enter(o),r.enter("chunkString",{contentType:"string"}),m(v))}function d(v){return v===62?(r.enter(a),r.consume(v),r.exit(a),r.exit(i),r.exit(n),e):(r.enter(o),r.enter("chunkString",{contentType:"string"}),f(v))}function f(v){return v===62?(r.exit("chunkString"),r.exit(o),d(v)):v===null||v===60||ir(v)?t(v):(r.consume(v),v===92?p:f)}function p(v){return v===60||v===62||v===92?(r.consume(v),f):f(v)}function m(v){return!u&&(v===null||v===41||xn(v))?(r.exit("chunkString"),r.exit(o),r.exit(s),r.exit(n),e(v)):u<c&&v===40?(r.consume(v),u++,m):v===41?(r.consume(v),u--,m):v===null||v===32||v===40||a1(v)?t(v):(r.consume(v),v===92?y:m)}function y(v){return v===40||v===41||v===92?(r.consume(v),m):m(v)}}function o8(r,e,t,n,i,a){const s=this;let o=0,l;return c;function c(f){return r.enter(n),r.enter(i),r.consume(f),r.exit(i),r.enter(a),u}function u(f){return o>999||f===null||f===91||f===93&&!l||f===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?t(f):f===93?(r.exit(a),r.enter(i),r.consume(f),r.exit(i),r.exit(n),e):ir(f)?(r.enter("lineEnding"),r.consume(f),r.exit("lineEnding"),u):(r.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||ir(f)||o++>999?(r.exit("chunkString"),u(f)):(r.consume(f),l||(l=!Qr(f)),f===92?d:h)}function d(f){return f===91||f===92||f===93?(r.consume(f),o++,h):h(f)}}function l8(r,e,t,n,i,a){let s;return o;function o(d){return d===34||d===39||d===40?(r.enter(n),r.enter(i),r.consume(d),r.exit(i),s=d===40?41:d,l):t(d)}function l(d){return d===s?(r.enter(i),r.consume(d),r.exit(i),r.exit(n),e):(r.enter(a),c(d))}function c(d){return d===s?(r.exit(a),l(s)):d===null?t(d):ir(d)?(r.enter("lineEnding"),r.consume(d),r.exit("lineEnding"),Vr(r,c,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===s||d===null||ir(d)?(r.exit("chunkString"),c(d)):(r.consume(d),d===92?h:u)}function h(d){return d===s||d===92?(r.consume(d),u):u(d)}}function md(r,e){let t;return n;function n(i){return ir(i)?(r.enter("lineEnding"),r.consume(i),r.exit("lineEnding"),t=!0,n):Qr(i)?Vr(r,n,t?"linePrefix":"lineSuffix")(i):e(i)}}const pX={name:"definition",tokenize:bX},mX={partial:!0,tokenize:vX};function bX(r,e,t){const n=this;let i;return a;function a(f){return r.enter("definition"),s(f)}function s(f){return o8.call(n,r,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return i=hs(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),f===58?(r.enter("definitionMarker"),r.consume(f),r.exit("definitionMarker"),l):t(f)}function l(f){return xn(f)?md(r,c)(f):c(f)}function c(f){return s8(r,u,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return r.attempt(mX,h,h)(f)}function h(f){return Qr(f)?Vr(r,d,"whitespace")(f):d(f)}function d(f){return f===null||ir(f)?(r.exit("definition"),n.parser.defined.push(i),e(f)):t(f)}}function vX(r,e,t){return n;function n(o){return xn(o)?md(r,i)(o):t(o)}function i(o){return l8(r,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return Qr(o)?Vr(r,s,"whitespace")(o):s(o)}function s(o){return o===null||ir(o)?e(o):t(o)}}const yX={name:"hardBreakEscape",tokenize:wX};function wX(r,e,t){return n;function n(a){return r.enter("hardBreakEscape"),r.consume(a),i}function i(a){return ir(a)?(r.exit("hardBreakEscape"),e(a)):t(a)}}const xX={name:"headingAtx",resolve:_X,tokenize:SX};function _X(r,e){let t=r.length-2,n=3,i,a;return r[n][1].type==="whitespace"&&(n+=2),t-2>n&&r[t][1].type==="whitespace"&&(t-=2),r[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&r[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(i={type:"atxHeadingText",start:r[n][1].start,end:r[t][1].end},a={type:"chunkText",start:r[n][1].start,end:r[t][1].end,contentType:"text"},Aa(r,n,t-n+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),r}function SX(r,e,t){let n=0;return i;function i(u){return r.enter("atxHeading"),a(u)}function a(u){return r.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&n++<6?(r.consume(u),s):u===null||xn(u)?(r.exit("atxHeadingSequence"),o(u)):t(u)}function o(u){return u===35?(r.enter("atxHeadingSequence"),l(u)):u===null||ir(u)?(r.exit("atxHeading"),e(u)):Qr(u)?Vr(r,o,"whitespace")(u):(r.enter("atxHeadingText"),c(u))}function l(u){return u===35?(r.consume(u),l):(r.exit("atxHeadingSequence"),o(u))}function c(u){return u===null||u===35||xn(u)?(r.exit("atxHeadingText"),o(u)):(r.consume(u),c)}}const kX=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],c8=["pre","script","style","textarea"],AX={concrete:!0,name:"htmlFlow",resolveTo:TX,tokenize:MX},CX={partial:!0,tokenize:OX},EX={partial:!0,tokenize:IX};function TX(r){let e=r.length;for(;e--&&!(r[e][0]==="enter"&&r[e][1].type==="htmlFlow"););return e>1&&r[e-2][1].type==="linePrefix"&&(r[e][1].start=r[e-2][1].start,r[e+1][1].start=r[e-2][1].start,r.splice(e-2,2)),r}function MX(r,e,t){const n=this;let i,a,s,o,l;return c;function c(q){return u(q)}function u(q){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(q),h}function h(q){return q===33?(r.consume(q),d):q===47?(r.consume(q),a=!0,m):q===63?(r.consume(q),i=3,n.interrupt?e:D):Xi(q)?(r.consume(q),s=String.fromCharCode(q),y):t(q)}function d(q){return q===45?(r.consume(q),i=2,f):q===91?(r.consume(q),i=5,o=0,p):Xi(q)?(r.consume(q),i=4,n.interrupt?e:D):t(q)}function f(q){return q===45?(r.consume(q),n.interrupt?e:D):t(q)}function p(q){const ae="CDATA[";return q===ae.charCodeAt(o++)?(r.consume(q),o===ae.length?n.interrupt?e:V:p):t(q)}function m(q){return Xi(q)?(r.consume(q),s=String.fromCharCode(q),y):t(q)}function y(q){if(q===null||q===47||q===62||xn(q)){const ae=q===47,fe=s.toLowerCase();return!ae&&!a&&c8.includes(fe)?(i=1,n.interrupt?e(q):V(q)):kX.includes(s.toLowerCase())?(i=6,ae?(r.consume(q),v):n.interrupt?e(q):V(q)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(q):a?_(q):S(q))}return q===45||Ri(q)?(r.consume(q),s+=String.fromCharCode(q),y):t(q)}function v(q){return q===62?(r.consume(q),n.interrupt?e:V):t(q)}function _(q){return Qr(q)?(r.consume(q),_):z(q)}function S(q){return q===47?(r.consume(q),z):q===58||q===95||Xi(q)?(r.consume(q),A):Qr(q)?(r.consume(q),S):z(q)}function A(q){return q===45||q===46||q===58||q===95||Ri(q)?(r.consume(q),A):C(q)}function C(q){return q===61?(r.consume(q),k):Qr(q)?(r.consume(q),C):S(q)}function k(q){return q===null||q===60||q===61||q===62||q===96?t(q):q===34||q===39?(r.consume(q),l=q,M):Qr(q)?(r.consume(q),k):N(q)}function M(q){return q===l?(r.consume(q),l=null,F):q===null||ir(q)?t(q):(r.consume(q),M)}function N(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||xn(q)?C(q):(r.consume(q),N)}function F(q){return q===47||q===62||Qr(q)?S(q):t(q)}function z(q){return q===62?(r.consume(q),W):t(q)}function W(q){return q===null||ir(q)?V(q):Qr(q)?(r.consume(q),W):t(q)}function V(q){return q===45&&i===2?(r.consume(q),L):q===60&&i===1?(r.consume(q),J):q===62&&i===4?(r.consume(q),se):q===63&&i===3?(r.consume(q),D):q===93&&i===5?(r.consume(q),re):ir(q)&&(i===6||i===7)?(r.exit("htmlFlowData"),r.check(CX,ce,Q)(q)):q===null||ir(q)?(r.exit("htmlFlowData"),Q(q)):(r.consume(q),V)}function Q(q){return r.check(EX,K,ce)(q)}function K(q){return r.enter("lineEnding"),r.consume(q),r.exit("lineEnding"),ie}function ie(q){return q===null||ir(q)?Q(q):(r.enter("htmlFlowData"),V(q))}function L(q){return q===45?(r.consume(q),D):V(q)}function J(q){return q===47?(r.consume(q),s="",X):V(q)}function X(q){if(q===62){const ae=s.toLowerCase();return c8.includes(ae)?(r.consume(q),se):V(q)}return Xi(q)&&s.length<8?(r.consume(q),s+=String.fromCharCode(q),X):V(q)}function re(q){return q===93?(r.consume(q),D):V(q)}function D(q){return q===62?(r.consume(q),se):q===45&&i===2?(r.consume(q),D):V(q)}function se(q){return q===null||ir(q)?(r.exit("htmlFlowData"),ce(q)):(r.consume(q),se)}function ce(q){return r.exit("htmlFlow"),e(q)}}function IX(r,e,t){const n=this;return i;function i(s){return ir(s)?(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a):t(s)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}function OX(r,e,t){return n;function n(i){return r.enter("lineEnding"),r.consume(i),r.exit("lineEnding"),r.attempt(gd,e,t)}}const NX={name:"htmlText",tokenize:PX};function PX(r,e,t){const n=this;let i,a,s;return o;function o(D){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(D),l}function l(D){return D===33?(r.consume(D),c):D===47?(r.consume(D),C):D===63?(r.consume(D),S):Xi(D)?(r.consume(D),N):t(D)}function c(D){return D===45?(r.consume(D),u):D===91?(r.consume(D),a=0,p):Xi(D)?(r.consume(D),_):t(D)}function u(D){return D===45?(r.consume(D),f):t(D)}function h(D){return D===null?t(D):D===45?(r.consume(D),d):ir(D)?(s=h,J(D)):(r.consume(D),h)}function d(D){return D===45?(r.consume(D),f):h(D)}function f(D){return D===62?L(D):D===45?d(D):h(D)}function p(D){const se="CDATA[";return D===se.charCodeAt(a++)?(r.consume(D),a===se.length?m:p):t(D)}function m(D){return D===null?t(D):D===93?(r.consume(D),y):ir(D)?(s=m,J(D)):(r.consume(D),m)}function y(D){return D===93?(r.consume(D),v):m(D)}function v(D){return D===62?L(D):D===93?(r.consume(D),v):m(D)}function _(D){return D===null||D===62?L(D):ir(D)?(s=_,J(D)):(r.consume(D),_)}function S(D){return D===null?t(D):D===63?(r.consume(D),A):ir(D)?(s=S,J(D)):(r.consume(D),S)}function A(D){return D===62?L(D):S(D)}function C(D){return Xi(D)?(r.consume(D),k):t(D)}function k(D){return D===45||Ri(D)?(r.consume(D),k):M(D)}function M(D){return ir(D)?(s=M,J(D)):Qr(D)?(r.consume(D),M):L(D)}function N(D){return D===45||Ri(D)?(r.consume(D),N):D===47||D===62||xn(D)?F(D):t(D)}function F(D){return D===47?(r.consume(D),L):D===58||D===95||Xi(D)?(r.consume(D),z):ir(D)?(s=F,J(D)):Qr(D)?(r.consume(D),F):L(D)}function z(D){return D===45||D===46||D===58||D===95||Ri(D)?(r.consume(D),z):W(D)}function W(D){return D===61?(r.consume(D),V):ir(D)?(s=W,J(D)):Qr(D)?(r.consume(D),W):F(D)}function V(D){return D===null||D===60||D===61||D===62||D===96?t(D):D===34||D===39?(r.consume(D),i=D,Q):ir(D)?(s=V,J(D)):Qr(D)?(r.consume(D),V):(r.consume(D),K)}function Q(D){return D===i?(r.consume(D),i=void 0,ie):D===null?t(D):ir(D)?(s=Q,J(D)):(r.consume(D),Q)}function K(D){return D===null||D===34||D===39||D===60||D===61||D===96?t(D):D===47||D===62||xn(D)?F(D):(r.consume(D),K)}function ie(D){return D===47||D===62||xn(D)?F(D):t(D)}function L(D){return D===62?(r.consume(D),r.exit("htmlTextData"),r.exit("htmlText"),e):t(D)}function J(D){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(D),r.exit("lineEnding"),X}function X(D){return Qr(D)?Vr(r,re,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):re(D)}function re(D){return r.enter("htmlTextData"),s(D)}}const r3={name:"labelEnd",resolveAll:LX,resolveTo:BX,tokenize:zX},RX={tokenize:UX},FX={tokenize:jX},DX={tokenize:HX};function LX(r){let e=-1;const t=[];for(;++e<r.length;){const n=r[e][1];if(t.push(r[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",e+=i}}return r.length!==t.length&&Aa(r,0,r.length,t),r}function BX(r,e){let t=r.length,n=0,i,a,s,o;for(;t--;)if(i=r[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;r[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(r[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(s=t);const l={type:r[a][1].type==="labelLink"?"link":"image",start:{...r[a][1].start},end:{...r[r.length-1][1].end}},c={type:"label",start:{...r[a][1].start},end:{...r[s][1].end}},u={type:"labelText",start:{...r[a+n+2][1].end},end:{...r[s-2][1].start}};return o=[["enter",l,e],["enter",c,e]],o=Xa(o,r.slice(a+1,a+n+3)),o=Xa(o,[["enter",u,e]]),o=Xa(o,o1(e.parser.constructs.insideSpan.null,r.slice(a+n+4,s-3),e)),o=Xa(o,[["exit",u,e],r[s-2],r[s-1],["exit",c,e]]),o=Xa(o,r.slice(s+1)),o=Xa(o,[["exit",l,e]]),Aa(r,a,r.length,o),r}function zX(r,e,t){const n=this;let i=n.events.length,a,s;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){a=n.events[i][1];break}return o;function o(d){return a?a._inactive?h(d):(s=n.parser.defined.includes(hs(n.sliceSerialize({start:a.end,end:n.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(d),r.exit("labelMarker"),r.exit("labelEnd"),l):t(d)}function l(d){return d===40?r.attempt(RX,u,s?u:h)(d):d===91?r.attempt(FX,u,s?c:h)(d):s?u(d):h(d)}function c(d){return r.attempt(DX,u,h)(d)}function u(d){return e(d)}function h(d){return a._balanced=!0,t(d)}}function UX(r,e,t){return n;function n(h){return r.enter("resource"),r.enter("resourceMarker"),r.consume(h),r.exit("resourceMarker"),i}function i(h){return xn(h)?md(r,a)(h):a(h)}function a(h){return h===41?u(h):s8(r,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return xn(h)?md(r,l)(h):u(h)}function o(h){return t(h)}function l(h){return h===34||h===39||h===40?l8(r,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return xn(h)?md(r,u)(h):u(h)}function u(h){return h===41?(r.enter("resourceMarker"),r.consume(h),r.exit("resourceMarker"),r.exit("resource"),e):t(h)}}function jX(r,e,t){const n=this;return i;function i(o){return o8.call(n,r,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return n.parser.defined.includes(hs(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function s(o){return t(o)}}function HX(r,e,t){return n;function n(a){return r.enter("reference"),r.enter("referenceMarker"),r.consume(a),r.exit("referenceMarker"),i}function i(a){return a===93?(r.enter("referenceMarker"),r.consume(a),r.exit("referenceMarker"),r.exit("reference"),e):t(a)}}const qX={name:"labelStartImage",resolveAll:r3.resolveAll,tokenize:GX};function GX(r,e,t){const n=this;return i;function i(o){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(o),r.exit("labelImageMarker"),a}function a(o){return o===91?(r.enter("labelMarker"),r.consume(o),r.exit("labelMarker"),r.exit("labelImage"),s):t(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(o):e(o)}}const $X={name:"labelStartLink",resolveAll:r3.resolveAll,tokenize:WX};function WX(r,e,t){const n=this;return i;function i(s){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(s),r.exit("labelMarker"),r.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(s):e(s)}}const n3={name:"lineEnding",tokenize:VX};function VX(r,e){return t;function t(n){return r.enter("lineEnding"),r.consume(n),r.exit("lineEnding"),Vr(r,e,"linePrefix")}}const l1={name:"thematicBreak",tokenize:XX};function XX(r,e,t){let n=0,i;return a;function a(c){return r.enter("thematicBreak"),s(c)}function s(c){return i=c,o(c)}function o(c){return c===i?(r.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||ir(c))?(r.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===i?(r.consume(c),n++,l):(r.exit("thematicBreakSequence"),Qr(c)?Vr(r,o,"whitespace")(c):o(c))}}const ca={continuation:{tokenize:JX},exit:eK,name:"list",tokenize:QX},KX={partial:!0,tokenize:tK},YX={partial:!0,tokenize:ZX};function QX(r,e,t){const n=this,i=n.events[n.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return o;function o(f){const p=n.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!n.containerState.marker||f===n.containerState.marker:Zb(f)){if(n.containerState.type||(n.containerState.type=p,r.enter(p,{_container:!0})),p==="listUnordered")return r.enter("listItemPrefix"),f===42||f===45?r.check(l1,t,c)(f):c(f);if(!n.interrupt||f===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),l(f)}return t(f)}function l(f){return Zb(f)&&++s<10?(r.consume(f),l):(!n.interrupt||s<2)&&(n.containerState.marker?f===n.containerState.marker:f===41||f===46)?(r.exit("listItemValue"),c(f)):t(f)}function c(f){return r.enter("listItemMarker"),r.consume(f),r.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||f,r.check(gd,n.interrupt?t:u,r.attempt(KX,d,h))}function u(f){return n.containerState.initialBlankLine=!0,a++,d(f)}function h(f){return Qr(f)?(r.enter("listItemPrefixWhitespace"),r.consume(f),r.exit("listItemPrefixWhitespace"),d):t(f)}function d(f){return n.containerState.size=a+n.sliceSerialize(r.exit("listItemPrefix"),!0).length,e(f)}}function JX(r,e,t){const n=this;return n.containerState._closeFlow=void 0,r.check(gd,i,a);function i(o){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Vr(r,e,"listItemIndent",n.containerState.size+1)(o)}function a(o){return n.containerState.furtherBlankLines||!Qr(o)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s(o)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,r.attempt(YX,e,s)(o))}function s(o){return n.containerState._closeFlow=!0,n.interrupt=void 0,Vr(r,r.attempt(ca,e,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function ZX(r,e,t){const n=this;return Vr(r,i,"listItemIndent",n.containerState.size+1);function i(a){const s=n.events[n.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===n.containerState.size?e(a):t(a)}}function eK(r){r.exit(this.containerState.type)}function tK(r,e,t){const n=this;return Vr(r,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=n.events[n.events.length-1];return!Qr(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const u8={name:"setextUnderline",resolveTo:rK,tokenize:nK};function rK(r,e){let t=r.length,n,i,a;for(;t--;)if(r[t][0]==="enter"){if(r[t][1].type==="content"){n=t;break}r[t][1].type==="paragraph"&&(i=t)}else r[t][1].type==="content"&&r.splice(t,1),!a&&r[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:{...r[n][1].start},end:{...r[r.length-1][1].end}};return r[i][1].type="setextHeadingText",a?(r.splice(i,0,["enter",s,e]),r.splice(a+1,0,["exit",r[n][1],e]),r[n][1].end={...r[a][1].end}):r[n][1]=s,r.push(["exit",s,e]),r}function nK(r,e,t){const n=this;let i;return a;function a(c){let u=n.events.length,h;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){h=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(r.enter("setextHeadingLine"),i=c,s(c)):t(c)}function s(c){return r.enter("setextHeadingLineSequence"),o(c)}function o(c){return c===i?(r.consume(c),o):(r.exit("setextHeadingLineSequence"),Qr(c)?Vr(r,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ir(c)?(r.exit("setextHeadingLine"),e(c)):t(c)}}const iK={tokenize:aK};function aK(r){const e=this,t=r.attempt(gd,n,r.attempt(this.parser.constructs.flowInitial,i,Vr(r,r.attempt(this.parser.constructs.flow,i,r.attempt(uX,i)),"linePrefix")));return t;function n(a){if(a===null){r.consume(a);return}return r.enter("lineEndingBlank"),r.consume(a),r.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){r.consume(a);return}return r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),e.currentConstruct=void 0,t}}const sK={resolveAll:d8()},oK=h8("string"),lK=h8("text");function h8(r){return{resolveAll:d8(r==="text"?cK:void 0),tokenize:e};function e(t){const n=this,i=this.parser.constructs[r],a=t.attempt(i,s,o);return s;function s(u){return c(u)?a(u):o(u)}function o(u){if(u===null){t.consume(u);return}return t.enter("data"),t.consume(u),l}function l(u){return c(u)?(t.exit("data"),a(u)):(t.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}function d8(r){return e;function e(t,n){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return r?r(t,n):t}}function cK(r,e){let t=0;for(;++t<=r.length;)if((t===r.length||r[t][1].type==="lineEnding")&&r[t-1][1].type==="data"){const n=r[t-1][1],i=e.sliceStream(n);let a=i.length,s=-1,o=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(c===-2)l=!0,o++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===r.length&&(o=0),o){const c={type:t===r.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:n.start._bufferIndex+s,_index:n.start._index+a,line:n.end.line,column:n.end.column-o,offset:n.end.offset-o},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(r.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return r}const uK=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:{91:pX},disable:{null:[]},document:{42:ca,43:ca,45:ca,48:ca,49:ca,50:ca,51:ca,52:ca,53:ca,54:ca,55:ca,56:ca,57:ca,62:e8},flow:{35:xX,42:l1,45:[u8,l1],60:AX,61:u8,95:l1,96:i8,126:i8},flowInitial:{[-2]:t3,[-1]:t3,32:t3},insideSpan:{null:[e3,sK]},string:{38:r8,92:t8},text:{[-5]:n3,[-4]:n3,[-3]:n3,33:qX,38:r8,42:e3,60:[$V,NX],91:$X,92:[yX,t8],93:r3,95:e3,96:iX}},Symbol.toStringTag,{value:"Module"}));function hK(r,e,t){let n={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let s=[],o=[];const l={attempt:M(C),check:M(k),consume:_,enter:S,exit:A,interrupt:M(k,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:r,previous:null,sliceSerialize:d,sliceStream:f,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function h(W){return s=Xa(s,W),y(),s[s.length-1]!==null?[]:(N(e,0),c.events=o1(a,c.events,c),c.events)}function d(W,V){return fK(f(W),V)}function f(W){return dK(s,W)}function p(){const{_bufferIndex:W,_index:V,line:Q,column:K,offset:ie}=n;return{_bufferIndex:W,_index:V,line:Q,column:K,offset:ie}}function m(W){i[W.line]=W.column,z()}function y(){let W;for(;n._index<s.length;){const V=s[n._index];if(typeof V=="string")for(W=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===W&&n._bufferIndex<V.length;)v(V.charCodeAt(n._bufferIndex));else v(V)}}function v(W){u=u(W)}function _(W){ir(W)?(n.line++,n.column=1,n.offset+=W===-3?2:1,z()):W!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=W}function S(W,V){const Q=V||{};return Q.type=W,Q.start=p(),c.events.push(["enter",Q,c]),o.push(Q),Q}function A(W){const V=o.pop();return V.end=p(),c.events.push(["exit",V,c]),V}function C(W,V){N(W,V.from)}function k(W,V){V.restore()}function M(W,V){return Q;function Q(K,ie,L){let J,X,re,D;return Array.isArray(K)?ce(K):"tokenize"in K?ce([K]):se(K);function se(xe){return pe;function pe(Ce){const Te=Ce!==null&&xe[Ce],Ae=Ce!==null&&xe.null,be=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return ce(be)(Ce)}}function ce(xe){return J=xe,X=0,xe.length===0?L:q(xe[X])}function q(xe){return pe;function pe(Ce){return D=F(),re=xe,xe.partial||(c.currentConstruct=xe),xe.name&&c.parser.constructs.disable.null.includes(xe.name)?fe():xe.tokenize.call(V?Object.assign(Object.create(c),V):c,l,ae,fe)(Ce)}}function ae(xe){return W(re,D),ie}function fe(xe){return D.restore(),++X<J.length?q(J[X]):L}}}function N(W,V){W.resolveAll&&!a.includes(W)&&a.push(W),W.resolve&&Aa(c.events,V,c.events.length-V,W.resolve(c.events.slice(V),c)),W.resolveTo&&(c.events=W.resolveTo(c.events,c))}function F(){const W=p(),V=c.previous,Q=c.currentConstruct,K=c.events.length,ie=Array.from(o);return{from:K,restore:L};function L(){n=W,c.previous=V,c.currentConstruct=Q,c.events.length=K,o=ie,z()}}function z(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function dK(r,e){const t=e.start._index,n=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let s;if(t===i)s=[r[t].slice(n,a)];else{if(s=r.slice(t,i),n>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(n):s.shift()}a>0&&s.push(r[i].slice(0,a))}return s}function fK(r,e){let t=-1;const n=[];let i;for(;++t<r.length;){const a=r[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,n.push(s)}return n.join("")}function gK(r){const n={constructs:Yw([uK,...(r||{}).extensions||[]]),content:i(BV),defined:[],document:i(UV),flow:i(iK),lazy:{},string:i(oK),text:i(lK)};return n;function i(a){return s;function s(o){return hK(n,a,o)}}}function pK(r){for(;!a8(r););return r}const f8=/[\0\t\n\r]/g;function mK(){let r=1,e="",t=!0,n;return i;function i(a,s,o){const l=[];let c,u,h,d,f;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),h=0,e="",t&&(a.charCodeAt(0)===65279&&h++,t=void 0);h<a.length;){if(f8.lastIndex=h,c=f8.exec(a),d=c&&c.index!==void 0?c.index:a.length,f=a.charCodeAt(d),!c){e=a.slice(h);break}if(f===10&&h===d&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),h<d&&(l.push(a.slice(h,d)),r+=d-h),f){case 0:{l.push(65533),r++;break}case 9:{for(u=Math.ceil(r/4)*4,l.push(-2);r++<u;)l.push(-1);break}case 10:{l.push(-4),r=1;break}default:n=!0,r=1}h=d+1}return o&&(n&&l.push(-5),e&&l.push(e),l.push(null)),l}}const bK=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function g8(r){return r.replace(bK,vK)}function vK(r,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return Qw(t.slice(a?2:1),a?16:10)}return Jb(t)||r}function c1(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?p8(r.position):"start"in r||"end"in r?p8(r):"line"in r||"column"in r?i3(r):""}function i3(r){return m8(r&&r.line)+":"+m8(r&&r.column)}function p8(r){return i3(r&&r.start)+"-"+i3(r&&r.end)}function m8(r){return r&&typeof r=="number"?r:1}const b8={}.hasOwnProperty;function yK(r,e,t){return typeof e!="string"&&(t=e,e=void 0),wK(t)(pK(gK(t).document().write(mK()(r,e,!0))))}function wK(r){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ut),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(He),blockQuote:a(Ae),characterEscape:F,characterReference:F,codeFenced:a(be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(be,s),codeText:a(Ee,s),codeTextData:F,data:F,codeFlowValue:F,definition:a($e),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Ye),hardBreakEscape:a(We),hardBreakTrailing:a(We),htmlFlow:a(rt,s),htmlFlowData:F,htmlText:a(rt,s),htmlTextData:F,image:a(Qe),label:s,link:a(ut),listItem:a(ht),listItemValue:d,listOrdered:a(ft,h),listUnordered:a(ft),paragraph:a(it),reference:q,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(He),strong:a(Je),thematicBreak:a(ct)},exit:{atxHeading:l(),atxHeadingSequence:C,autolink:l(),autolinkEmail:Te,autolinkProtocol:Ce,blockQuote:l(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:xe,characterReference:pe,codeFenced:l(y),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:z,codeIndented:l(v),codeText:l(ie),codeTextData:z,data:z,definition:l(),definitionDestinationString:A,definitionLabelString:_,definitionTitleString:S,emphasis:l(),hardBreakEscape:l(V),hardBreakTrailing:l(V),htmlFlow:l(Q),htmlFlowData:z,htmlText:l(K),htmlTextData:z,image:l(J),label:re,labelText:X,lineEnding:W,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ae,resourceDestinationString:D,resourceTitleString:se,resource:ce,setextHeading:l(N),setextHeadingLineSequence:M,setextHeadingText:k,strong:l(),thematicBreak:l()}};v8(e,(r||{}).mdastExtensions||[]);const t={};return n;function n(Se){let Le={type:"root",children:[]};const et={stack:[Le],tokenStack:[],config:e,enter:o,exit:c,buffer:s,resume:u,data:t},ot=[];let mt=-1;for(;++mt<Se.length;)if(Se[mt][1].type==="listOrdered"||Se[mt][1].type==="listUnordered")if(Se[mt][0]==="enter")ot.push(mt);else{const Gt=ot.pop();mt=i(Se,Gt,mt)}for(mt=-1;++mt<Se.length;){const Gt=e[Se[mt][0]];b8.call(Gt,Se[mt][1].type)&&Gt[Se[mt][1].type].call(Object.assign({sliceSerialize:Se[mt][2].sliceSerialize},et),Se[mt][1])}if(et.tokenStack.length>0){const Gt=et.tokenStack[et.tokenStack.length-1];(Gt[1]||y8).call(et,void 0,Gt[0])}for(Le.position={start:kl(Se.length>0?Se[0][1].start:{line:1,column:1,offset:0}),end:kl(Se.length>0?Se[Se.length-2][1].end:{line:1,column:1,offset:0})},mt=-1;++mt<e.transforms.length;)Le=e.transforms[mt](Le)||Le;return Le}function i(Se,Le,et){let ot=Le-1,mt=-1,Gt=!1,jt,Yt,kr,Ar;for(;++ot<=et;){const st=Se[ot];switch(st[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{st[0]==="enter"?mt++:mt--,Ar=void 0;break}case"lineEndingBlank":{st[0]==="enter"&&(jt&&!Ar&&!mt&&!kr&&(kr=ot),Ar=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ar=void 0}if(!mt&&st[0]==="enter"&&st[1].type==="listItemPrefix"||mt===-1&&st[0]==="exit"&&(st[1].type==="listUnordered"||st[1].type==="listOrdered")){if(jt){let yt=ot;for(Yt=void 0;yt--;){const At=Se[yt];if(At[1].type==="lineEnding"||At[1].type==="lineEndingBlank"){if(At[0]==="exit")continue;Yt&&(Se[Yt][1].type="lineEndingBlank",Gt=!0),At[1].type="lineEnding",Yt=yt}else if(!(At[1].type==="linePrefix"||At[1].type==="blockQuotePrefix"||At[1].type==="blockQuotePrefixWhitespace"||At[1].type==="blockQuoteMarker"||At[1].type==="listItemIndent"))break}kr&&(!Yt||kr<Yt)&&(jt._spread=!0),jt.end=Object.assign({},Yt?Se[Yt][1].start:st[1].end),Se.splice(Yt||ot,0,["exit",jt,st[2]]),ot++,et++}if(st[1].type==="listItemPrefix"){const yt={type:"listItem",_spread:!1,start:Object.assign({},st[1].start),end:void 0};jt=yt,Se.splice(ot,0,["enter",yt,st[2]]),ot++,et++,kr=void 0,Ar=!0}}}return Se[Le][1]._spread=Gt,et}function a(Se,Le){return et;function et(ot){o.call(this,Se(ot),ot),Le&&Le.call(this,ot)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(Se,Le,et){this.stack[this.stack.length-1].children.push(Se),this.stack.push(Se),this.tokenStack.push([Le,et||void 0]),Se.position={start:kl(Le.start),end:void 0}}function l(Se){return Le;function Le(et){Se&&Se.call(this,et),c.call(this,et)}}function c(Se,Le){const et=this.stack.pop(),ot=this.tokenStack.pop();if(ot)ot[0].type!==Se.type&&(Le?Le.call(this,Se,ot[0]):(ot[1]||y8).call(this,Se,ot[0]));else throw new Error("Cannot close `"+Se.type+"` ("+c1({start:Se.start,end:Se.end})+"): itâs not open");et.position.end=kl(Se.end)}function u(){return Qb(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(Se){if(this.data.expectingFirstListItemValue){const Le=this.stack[this.stack.length-2];Le.start=Number.parseInt(this.sliceSerialize(Se),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.lang=Se}function p(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.meta=Se}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Se.replace(/(\r?\n|\r)$/g,"")}function _(Se){const Le=this.resume(),et=this.stack[this.stack.length-1];et.label=Le,et.identifier=hs(this.sliceSerialize(Se)).toLowerCase()}function S(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Se}function A(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Se}function C(Se){const Le=this.stack[this.stack.length-1];if(!Le.depth){const et=this.sliceSerialize(Se).length;Le.depth=et}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function M(Se){const Le=this.stack[this.stack.length-1];Le.depth=this.sliceSerialize(Se).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function F(Se){const et=this.stack[this.stack.length-1].children;let ot=et[et.length-1];(!ot||ot.type!=="text")&&(ot=at(),ot.position={start:kl(Se.start),end:void 0},et.push(ot)),this.stack.push(ot)}function z(Se){const Le=this.stack.pop();Le.value+=this.sliceSerialize(Se),Le.position.end=kl(Se.end)}function W(Se){const Le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const et=Le.children[Le.children.length-1];et.position.end=kl(Se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Le.type)&&(F.call(this,Se),z.call(this,Se))}function V(){this.data.atHardBreak=!0}function Q(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Se}function K(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Se}function ie(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Se}function L(){const Se=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Se.type+="Reference",Se.referenceType=Le,delete Se.url,delete Se.title}else delete Se.identifier,delete Se.label;this.data.referenceType=void 0}function J(){const Se=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Se.type+="Reference",Se.referenceType=Le,delete Se.url,delete Se.title}else delete Se.identifier,delete Se.label;this.data.referenceType=void 0}function X(Se){const Le=this.sliceSerialize(Se),et=this.stack[this.stack.length-2];et.label=g8(Le),et.identifier=hs(Le).toLowerCase()}function re(){const Se=this.stack[this.stack.length-1],Le=this.resume(),et=this.stack[this.stack.length-1];if(this.data.inReference=!0,et.type==="link"){const ot=Se.children;et.children=ot}else et.alt=Le}function D(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Se}function se(){const Se=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Se}function ce(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function ae(Se){const Le=this.resume(),et=this.stack[this.stack.length-1];et.label=Le,et.identifier=hs(this.sliceSerialize(Se)).toLowerCase(),this.data.referenceType="full"}function fe(Se){this.data.characterReferenceType=Se.type}function xe(Se){const Le=this.sliceSerialize(Se),et=this.data.characterReferenceType;let ot;et?(ot=Qw(Le,et==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ot=Jb(Le);const mt=this.stack[this.stack.length-1];mt.value+=ot}function pe(Se){const Le=this.stack.pop();Le.position.end=kl(Se.end)}function Ce(Se){z.call(this,Se);const Le=this.stack[this.stack.length-1];Le.url=this.sliceSerialize(Se)}function Te(Se){z.call(this,Se);const Le=this.stack[this.stack.length-1];Le.url="mailto:"+this.sliceSerialize(Se)}function Ae(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function Ee(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ye(){return{type:"emphasis",children:[]}}function He(){return{type:"heading",depth:0,children:[]}}function We(){return{type:"break"}}function rt(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function ut(){return{type:"link",title:null,url:"",children:[]}}function ft(Se){return{type:"list",ordered:Se.type==="listOrdered",start:null,spread:Se._spread,children:[]}}function ht(Se){return{type:"listItem",spread:Se._spread,checked:null,children:[]}}function it(){return{type:"paragraph",children:[]}}function Je(){return{type:"strong",children:[]}}function at(){return{type:"text",value:""}}function ct(){return{type:"thematicBreak"}}}function kl(r){return{line:r.line,column:r.column,offset:r.offset}}function v8(r,e){let t=-1;for(;++t<e.length;){const n=e[t];Array.isArray(n)?v8(r,n):xK(r,n)}}function xK(r,e){let t;for(t in e)if(b8.call(e,t))switch(t){case"canContainEols":{const n=e[t];n&&r[t].push(...n);break}case"transforms":{const n=e[t];n&&r[t].push(...n);break}case"enter":case"exit":{const n=e[t];n&&Object.assign(r[t],n);break}}}function y8(r,e){throw r?new Error("Cannot close `"+r.type+"` ("+c1({start:r.start,end:r.end})+"): a different token (`"+e.type+"`, "+c1({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+c1({start:e.start,end:e.end})+") is still open")}function _K(r){const e=this;e.parser=t;function t(n){return yK(n,{...e.data("settings"),...r,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const w8={}.hasOwnProperty;function x8(r,e){const t=e||{};function n(i,...a){let s=n.invalid;const o=n.handlers;if(i&&w8.call(i,r)){const l=String(i[r]);s=w8.call(o,l)?o[l]:n.unknown}if(s)return s.call(this,i,...a)}return n.handlers=t.handlers||{},n.invalid=t.invalid,n.unknown=t.unknown,n}const SK={}.hasOwnProperty;function _8(r,e){let t=-1,n;if(e.extensions)for(;++t<e.extensions.length;)_8(r,e.extensions[t]);for(n in e)if(SK.call(e,n))switch(n){case"extensions":break;case"unsafe":{S8(r[n],e[n]);break}case"join":{S8(r[n],e[n]);break}case"handlers":{kK(r[n],e[n]);break}default:r.options[n]=e[n]}return r}function S8(r,e){e&&r.push(...e)}function kK(r,e){e&&Object.assign(r,e)}function AK(r,e,t,n){const i=t.enter("blockquote"),a=t.createTracker(n);a.move("> "),a.shift(2);const s=t.indentLines(t.containerFlow(r,a.current()),CK);return i(),s}function CK(r,e,t){return">"+(t?"":" ")+r}function k8(r,e){return A8(r,e.inConstruct,!0)&&!A8(r,e.notInConstruct,!1)}function A8(r,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let n=-1;for(;++n<e.length;)if(r.includes(e[n]))return!0;return!1}function C8(r,e,t,n){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&k8(t.stack,t.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function E8(r,e){const t=String(r);let n=t.indexOf(e),i=n,a=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++a>s&&(s=a):a=1,i=n+e.length,n=t.indexOf(e,i);return s}function a3(r,e){return!!(e.options.fences===!1&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function EK(r){const e=r.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function TK(r,e,t,n){const i=EK(t),a=r.value||"",s=i==="`"?"GraveAccent":"Tilde";if(a3(r,t)){const h=t.enter("codeIndented"),d=t.indentLines(a,MK);return h(),d}const o=t.createTracker(n),l=i.repeat(Math.max(E8(a,i)+1,3)),c=t.enter("codeFenced");let u=o.move(l);if(r.lang){const h=t.enter(`codeFencedLang${s}`);u+=o.move(t.safe(r.lang,{before:u,after:" ",encode:["`"],...o.current()})),h()}if(r.lang&&r.meta){const h=t.enter(`codeFencedMeta${s}`);u+=o.move(" "),u+=o.move(t.safe(r.meta,{before:u,after:`
`,encode:["`"],...o.current()})),h()}return u+=o.move(`
`),a&&(u+=o.move(a+`
`)),u+=o.move(l),c(),u}function MK(r,e,t){return(t?"":"    ")+r}function s3(r){const e=r.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function IK(r,e,t,n){const i=s3(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("definition");let o=t.enter("label");const l=t.createTracker(n);let c=l.move("[");return c+=l.move(t.safe(t.associationId(r),{before:c,after:"]",...l.current()})),c+=l.move("]: "),o(),!r.url||/[\0- \u007F]/.test(r.url)?(o=t.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(t.safe(r.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=t.enter("destinationRaw"),c+=l.move(t.safe(r.url,{before:c,after:r.title?" ":`
`,...l.current()}))),o(),r.title&&(o=t.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(t.safe(r.title,{before:c,after:i,...l.current()})),c+=l.move(i),o()),s(),c}function OK(r){const e=r.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Al(r){return"&#x"+r.toString(16).toUpperCase()+";"}function u1(r,e,t){const n=Ou(r),i=Ou(e);return n===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}T8.peek=NK;function T8(r,e,t,n){const i=OK(t),a=t.enter("emphasis"),s=t.createTracker(n),o=s.move(i);let l=s.move(t.containerPhrasing(r,{after:i,before:o,...s.current()}));const c=l.charCodeAt(0),u=u1(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=Al(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=u1(n.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+Al(h));const f=s.move(i);return a(),t.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},o+l+f}function NK(r,e,t){return t.options.emphasis||"*"}const bd=function(r){if(r==null)return DK;if(typeof r=="function")return h1(r);if(typeof r=="object")return Array.isArray(r)?PK(r):RK(r);if(typeof r=="string")return FK(r);throw new Error("Expected function, string, or object as test")};function PK(r){const e=[];let t=-1;for(;++t<r.length;)e[t]=bd(r[t]);return h1(n);function n(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function RK(r){const e=r;return h1(t);function t(n){const i=n;let a;for(a in r)if(i[a]!==e[a])return!1;return!0}}function FK(r){return h1(e);function e(t){return t&&t.type===r}}function h1(r){return e;function e(t,n,i){return!!(LK(t)&&r.call(this,t,typeof n=="number"?n:void 0,i||void 0))}}function DK(){return!0}function LK(r){return r!==null&&typeof r=="object"&&"type"in r}function uoe(r){return r}const M8=[],BK=!0,o3=!1,I8="skip";function l3(r,e,t,n){let i;typeof e=="function"&&typeof t!="function"?(n=t,t=e):i=e;const a=bd(i),s=n?-1:1;o(r,void 0,[])();function o(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=M8,p,m,y;if((!e||a(l,c,u[u.length-1]||void 0))&&(f=zK(t(l,u)),f[0]===o3))return f;if("children"in l&&l.children){const v=l;if(v.children&&f[0]!==I8)for(m=(n?v.children.length:-1)+s,y=u.concat(v);m>-1&&m<v.children.length;){const _=v.children[m];if(p=o(_,m,y)(),p[0]===o3)return p;m=typeof p[1]=="number"?p[1]:m+s}}return f}}}function zK(r){return Array.isArray(r)?r:typeof r=="number"?[BK,r]:r==null?M8:[r]}function d1(r,e,t,n){let i,a,s;typeof e=="function"&&typeof t!="function"?(a=void 0,s=e,i=t):(a=e,s=t,i=n),l3(r,a,o,i);function o(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return s(l,h,u)}}function O8(r,e){let t=!1;return d1(r,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return t=!0,o3}),!!((!r.depth||r.depth<3)&&Qb(r)&&(e.options.setext||t))}function UK(r,e,t,n){const i=Math.max(Math.min(6,r.depth||1),1),a=t.createTracker(n);if(O8(r,t)){const u=t.enter("headingSetext"),h=t.enter("phrasing"),d=t.containerPhrasing(r,{...a.current(),before:`
`,after:`
`});return h(),u(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const s="#".repeat(i),o=t.enter("headingAtx"),l=t.enter("phrasing");a.move(s+" ");let c=t.containerPhrasing(r,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(c)&&(c=Al(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,t.options.closeAtx&&(c+=" "+s),l(),o(),c}N8.peek=jK;function N8(r){return r.value||""}function jK(){return"<"}P8.peek=HK;function P8(r,e,t,n){const i=s3(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("image");let o=t.enter("label");const l=t.createTracker(n);let c=l.move("![");return c+=l.move(t.safe(r.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),o(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(o=t.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(t.safe(r.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=t.enter("destinationRaw"),c+=l.move(t.safe(r.url,{before:c,after:r.title?" ":")",...l.current()}))),o(),r.title&&(o=t.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(t.safe(r.title,{before:c,after:i,...l.current()})),c+=l.move(i),o()),c+=l.move(")"),s(),c}function HK(){return"!"}R8.peek=qK;function R8(r,e,t,n){const i=r.referenceType,a=t.enter("imageReference");let s=t.enter("label");const o=t.createTracker(n);let l=o.move("![");const c=t.safe(r.alt,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),s();const u=t.stack;t.stack=[],s=t.enter("reference");const h=t.safe(t.associationId(r),{before:l,after:"]",...o.current()});return s(),t.stack=u,a(),i==="full"||!c||c!==h?l+=o.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function qK(){return"!"}F8.peek=GK;function F8(r,e,t){let n=r.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++a<t.unsafe.length;){const s=t.unsafe[a],o=t.compilePattern(s);let l;if(s.atBreak)for(;l=o.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return i+n+i}function GK(){return"`"}function D8(r,e){const t=Qb(r);return!!(!e.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(t===r.url||"mailto:"+t===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}L8.peek=$K;function L8(r,e,t,n){const i=s3(t),a=i==='"'?"Quote":"Apostrophe",s=t.createTracker(n);let o,l;if(D8(r,t)){const u=t.stack;t.stack=[],o=t.enter("autolink");let h=s.move("<");return h+=s.move(t.containerPhrasing(r,{before:h,after:">",...s.current()})),h+=s.move(">"),o(),t.stack=u,h}o=t.enter("link"),l=t.enter("label");let c=s.move("[");return c+=s.move(t.containerPhrasing(r,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(l=t.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(t.safe(r.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=t.enter("destinationRaw"),c+=s.move(t.safe(r.url,{before:c,after:r.title?" ":")",...s.current()}))),l(),r.title&&(l=t.enter(`title${a}`),c+=s.move(" "+i),c+=s.move(t.safe(r.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),c+=s.move(")"),o(),c}function $K(r,e,t){return D8(r,t)?"<":"["}B8.peek=WK;function B8(r,e,t,n){const i=r.referenceType,a=t.enter("linkReference");let s=t.enter("label");const o=t.createTracker(n);let l=o.move("[");const c=t.containerPhrasing(r,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),s();const u=t.stack;t.stack=[],s=t.enter("reference");const h=t.safe(t.associationId(r),{before:l,after:"]",...o.current()});return s(),t.stack=u,a(),i==="full"||!c||c!==h?l+=o.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function WK(){return"["}function c3(r){const e=r.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function VK(r){const e=c3(r),t=r.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function XK(r){const e=r.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function z8(r){const e=r.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function KK(r,e,t,n){const i=t.enter("list"),a=t.bulletCurrent;let s=r.ordered?XK(t):c3(t);const o=r.ordered?s==="."?")":".":VK(t);let l=e&&t.bulletLastUsed?s===t.bulletLastUsed:!1;if(!r.ordered){const u=r.children?r.children[0]:void 0;if((s==="*"||s==="-")&&u&&(!u.children||!u.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(l=!0),z8(t)===s&&u){let h=-1;for(;++h<r.children.length;){const d=r.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=o),t.bulletCurrent=s;const c=t.containerFlow(r,n);return t.bulletLastUsed=s,t.bulletCurrent=a,i(),c}function YK(r){const e=r.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function QK(r,e,t,n){const i=YK(t);let a=t.bulletCurrent||c3(t);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(r))+a);let s=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||r.spread))&&(s=Math.ceil(s/4)*4);const o=t.createTracker(n);o.move(a+" ".repeat(s-a.length)),o.shift(s);const l=t.enter("listItem"),c=t.indentLines(t.containerFlow(r,o.current()),u);return l(),c;function u(h,d,f){return d?(f?"":" ".repeat(s))+h:(f?a:a+" ".repeat(s-a.length))+h}}function JK(r,e,t,n){const i=t.enter("paragraph"),a=t.enter("phrasing"),s=t.containerPhrasing(r,n);return a(),i(),s}const ZK=bd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function eY(r,e,t,n){return(r.children.some(function(s){return ZK(s)})?t.containerPhrasing:t.containerFlow).call(t,r,n)}function tY(r){const e=r.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}U8.peek=rY;function U8(r,e,t,n){const i=tY(t),a=t.enter("strong"),s=t.createTracker(n),o=s.move(i+i);let l=s.move(t.containerPhrasing(r,{after:i,before:o,...s.current()}));const c=l.charCodeAt(0),u=u1(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=Al(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=u1(n.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+Al(h));const f=s.move(i+i);return a(),t.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},o+l+f}function rY(r,e,t){return t.options.strong||"*"}function nY(r,e,t,n){return t.safe(r.value,n)}function iY(r){const e=r.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function aY(r,e,t){const n=(z8(t)+(t.options.ruleSpaces?" ":"")).repeat(iY(t));return t.options.ruleSpaces?n.slice(0,-1):n}const u3={blockquote:AK,break:C8,code:TK,definition:IK,emphasis:T8,hardBreak:C8,heading:UK,html:N8,image:P8,imageReference:R8,inlineCode:F8,link:L8,linkReference:B8,list:KK,listItem:QK,paragraph:JK,root:eY,strong:U8,text:nY,thematicBreak:aY},sY=[oY];function oY(r,e,t,n){if(e.type==="code"&&a3(e,n)&&(r.type==="list"||r.type===e.type&&a3(r,n)))return!1;if("spread"in t&&typeof t.spread=="boolean")return r.type==="paragraph"&&(r.type===e.type||e.type==="definition"||e.type==="heading"&&O8(e,n))?void 0:t.spread?1:0}const yc=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],lY=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:yc},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:yc},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:yc},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:yc},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:yc},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:yc},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:yc},{atBreak:!0,character:"~"}];function cY(r){return r.label||!r.identifier?r.label||"":g8(r.identifier)}function uY(r){if(!r._compiled){const e=(r.atBreak?"[\\r\\n][\\t ]*":"")+(r.before?"(?:"+r.before+")":"");r._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(r.character)?"\\":"")+r.character+(r.after?"(?:"+r.after+")":""),"g")}return r._compiled}function hY(r,e,t){const n=e.indexStack,i=r.children||[],a=[];let s=-1,o=t.before,l;n.push(-1);let c=e.createTracker(t);for(;++s<i.length;){const u=i[s];let h;if(n[n.length-1]=s,s+1<i.length){let p=e.handle.handlers[i[s+1].type];p&&p.peek&&(p=p.peek),h=p?p(i[s+1],r,e,{before:"",after:"",...c.current()}).charAt(0):""}else h=t.after;a.length>0&&(o==="\r"||o===`
`)&&u.type==="html"&&(a[a.length-1]=a[a.length-1].replace(/(\r?\n|\r)$/," "),o=" ",c=e.createTracker(t),c.move(a.join("")));let d=e.handle(u,r,e,{...c.current(),after:h,before:o});l&&l===d.slice(0,1)&&(d=Al(l.charCodeAt(0))+d.slice(1));const f=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,l=void 0,f&&(a.length>0&&f.before&&o===a[a.length-1].slice(-1)&&(a[a.length-1]=a[a.length-1].slice(0,-1)+Al(o.charCodeAt(0))),f.after&&(l=h)),c.move(d),a.push(d),o=d.slice(-1)}return n.pop(),a.join("")}function dY(r,e,t){const n=e.indexStack,i=r.children||[],a=e.createTracker(t),s=[];let o=-1;for(n.push(-1);++o<i.length;){const l=i[o];n[n.length-1]=o,s.push(a.move(e.handle(l,r,e,{before:`
`,after:`
`,...a.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),o<i.length-1&&s.push(a.move(fY(l,i[o+1],r,e)))}return n.pop(),s.join("")}function fY(r,e,t,n){let i=n.join.length;for(;i--;){const a=n.join[i](r,e,t,n);if(a===!0||a===1)break;if(typeof a=="number")return`
`.repeat(1+a);if(a===!1)return`

<!---->

`}return`

`}const gY=/\r?\n|\r/g;function pY(r,e){const t=[];let n=0,i=0,a;for(;a=gY.exec(r);)s(r.slice(n,a.index)),t.push(a[0]),n=a.index+a[0].length,i++;return s(r.slice(n)),t.join("");function s(o){t.push(e(o,i,!o))}}function mY(r,e,t){const n=(t.before||"")+(e||"")+(t.after||""),i=[],a=[],s={};let o=-1;for(;++o<r.unsafe.length;){const u=r.unsafe[o];if(!k8(r.stack,u))continue;const h=r.compilePattern(u);let d;for(;d=h.exec(n);){const f="before"in u||!!u.atBreak,p="after"in u,m=d.index+(f?d[1].length:0);i.includes(m)?(s[m].before&&!f&&(s[m].before=!1),s[m].after&&!p&&(s[m].after=!1)):(i.push(m),s[m]={before:f,after:p})}}i.sort(bY);let l=t.before?t.before.length:0;const c=n.length-(t.after?t.after.length:0);for(o=-1;++o<i.length;){const u=i[o];u<l||u>=c||u+1<c&&i[o+1]===u+1&&s[u].after&&!s[u+1].before&&!s[u+1].after||i[o-1]===u-1&&s[u].before&&!s[u-1].before&&!s[u-1].after||(l!==u&&a.push(j8(n.slice(l,u),"\\")),l=u,/[!-/:-@[-`{-~]/.test(n.charAt(u))&&(!t.encode||!t.encode.includes(n.charAt(u)))?a.push("\\"):(a.push(Al(n.charCodeAt(u))),l++))}return a.push(j8(n.slice(l,c),t.after)),a.join("")}function bY(r,e){return r-e}function j8(r,e){const t=/\\(?=[!-/:-@[-`{-~])/g,n=[],i=[],a=r+e;let s=-1,o=0,l;for(;l=t.exec(a);)n.push(l.index);for(;++s<n.length;)o!==n[s]&&i.push(r.slice(o,n[s])),i.push("\\"),o=n[s];return i.push(r.slice(o)),i.join("")}function vY(r){const e=r||{},t=e.now||{};let n=e.lineShift||0,i=t.line||1,a=t.column||1;return{move:l,current:s,shift:o};function s(){return{now:{line:i,column:a},lineShift:n}}function o(c){n+=c}function l(c){const u=c||"",h=u.split(/\r?\n|\r/g),d=h[h.length-1];return i+=h.length-1,a=h.length===1?a+d.length:1+d.length+n,u}}function yY(r,e){const t=e||{},n={associationId:cY,containerPhrasing:SY,containerFlow:kY,createTracker:vY,compilePattern:uY,enter:a,handlers:{...u3},handle:void 0,indentLines:pY,indexStack:[],join:[...sY],options:{},safe:AY,stack:[],unsafe:[...lY]};_8(n,t),n.options.tightDefinitions&&n.join.push(_Y),n.handle=x8("type",{invalid:wY,unknown:xY,handlers:n.handlers});let i=n.handle(r,void 0,n,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function a(s){return n.stack.push(s),o;function o(){n.stack.pop()}}}function wY(r){throw new Error("Cannot handle value `"+r+"`, expected node")}function xY(r){const e=r;throw new Error("Cannot handle unknown node `"+e.type+"`")}function _Y(r,e){if(r.type==="definition"&&r.type===e.type)return 0}function SY(r,e){return hY(r,this,e)}function kY(r,e){return dY(r,this,e)}function AY(r,e){return mY(this,r,e)}function CY(r){const e=this;e.compiler=t;function t(n){return yY(n,{...e.data("settings"),...r,extensions:e.data("toMarkdownExtensions")||[]})}}function H8(r){if(r)throw r}var h3,q8;function EY(){if(q8)return h3;q8=1;var r=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},a=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=r.call(c,"constructor"),h=c.constructor&&c.constructor.prototype&&r.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!h)return!1;var d;for(d in c);return typeof d>"u"||r.call(c,d)},s=function(c,u){t&&u.name==="__proto__"?t(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},o=function(c,u){if(u==="__proto__")if(r.call(c,u)){if(n)return n(c,u).value}else return;return c[u]};return h3=function l(){var c,u,h,d,f,p,m=arguments[0],y=1,v=arguments.length,_=!1;for(typeof m=="boolean"&&(_=m,m=arguments[1]||{},y=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});y<v;++y)if(c=arguments[y],c!=null)for(u in c)h=o(m,u),d=o(c,u),m!==d&&(_&&d&&(a(d)||(f=i(d)))?(f?(f=!1,p=h&&i(h)?h:[]):p=h&&a(h)?h:{},s(m,{name:u,newValue:l(_,p,d)})):typeof d<"u"&&s(m,{name:u,newValue:d}));return m},h3}var TY=EY();const d3=Rf(TY);function hoe(){}function f3(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function MY(){const r=[],e={run:t,use:n};return e;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...i);function o(l,...c){const u=r[++a];let h=-1;if(l){s(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?IY(u,o)(...c):s(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return r.push(i),e}}function IY(r,e){let t;return n;function n(...s){const o=r.length>s.length;let l;o&&s.push(i);try{l=r.apply(this,s)}catch(c){const u=c;if(o&&t)throw u;return i(u)}o||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(s,...o){t||(t=!0,e(s,...o))}function a(s){i(null,s)}}function OY(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?G8(r.position):"start"in r||"end"in r?G8(r):"line"in r||"column"in r?g3(r):""}function g3(r){return $8(r&&r.line)+":"+$8(r&&r.column)}function G8(r){return g3(r&&r.start)+"-"+g3(r&&r.end)}function $8(r){return r&&typeof r=="number"?r:1}class ua extends Error{constructor(e,t,n){super(),typeof t=="string"&&(n=t,t=void 0);let i="",a={},s=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(s=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?a.ruleId=n:(a.source=n.slice(0,l),a.ruleId=n.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=o?o.line:void 0,this.name=OY(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}ua.prototype.file="",ua.prototype.name="",ua.prototype.reason="",ua.prototype.message="",ua.prototype.stack="",ua.prototype.column=void 0,ua.prototype.line=void 0,ua.prototype.ancestors=void 0,ua.prototype.cause=void 0,ua.prototype.fatal=void 0,ua.prototype.place=void 0,ua.prototype.ruleId=void 0,ua.prototype.source=void 0;const Ds={basename:NY,dirname:PY,extname:RY,join:FY,sep:"/"};function NY(r,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');vd(r);let t=0,n=-1,i=r.length,a;if(e===void 0||e.length===0||e.length>r.length){for(;i--;)if(r.codePointAt(i)===47){if(a){t=i+1;break}}else n<0&&(a=!0,n=i+1);return n<0?"":r.slice(t,n)}if(e===r)return"";let s=-1,o=e.length-1;for(;i--;)if(r.codePointAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),o>-1&&(r.codePointAt(i)===e.codePointAt(o--)?o<0&&(n=i):(o=-1,n=s));return t===n?n=s:n<0&&(n=r.length),r.slice(t,n)}function PY(r){if(vd(r),r.length===0)return".";let e=-1,t=r.length,n;for(;--t;)if(r.codePointAt(t)===47){if(n){e=t;break}}else n||(n=!0);return e<0?r.codePointAt(0)===47?"/":".":e===1&&r.codePointAt(0)===47?"//":r.slice(0,e)}function RY(r){vd(r);let e=r.length,t=-1,n=0,i=-1,a=0,s;for(;e--;){const o=r.codePointAt(e);if(o===47){if(s){n=e+1;break}continue}t<0&&(s=!0,t=e+1),o===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===n+1?"":r.slice(i,t)}function FY(...r){let e=-1,t;for(;++e<r.length;)vd(r[e]),r[e]&&(t=t===void 0?r[e]:t+"/"+r[e]);return t===void 0?".":DY(t)}function DY(r){vd(r);const e=r.codePointAt(0)===47;let t=LY(r,!e);return t.length===0&&!e&&(t="."),t.length>0&&r.codePointAt(r.length-1)===47&&(t+="/"),e?"/"+t:t}function LY(r,e){let t="",n=0,i=-1,a=0,s=-1,o,l;for(;++s<=r.length;){if(s<r.length)o=r.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||n!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",n=0,i=s,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",n=2)}else t.length>0?t+="/"+r.slice(i+1,s):t=r.slice(i+1,s),n=s-i-1;i=s,a=0}else o===46&&a>-1?a++:a=-1}return t}function vd(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const BY={cwd:zY};function zY(){return"/"}function p3(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function UY(r){if(typeof r=="string")r=new URL(r);else if(!p3(r)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(r.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return jY(r)}function jY(r){if(r.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=r.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const n=e.codePointAt(t+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const m3=["history","path","basename","stem","extname","dirname"];class HY{constructor(e){let t;e?p3(e)?t={path:e}:typeof e=="string"||qY(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":BY.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<m3.length;){const a=m3[n];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)m3.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?Ds.basename(this.path):void 0}set basename(e){v3(e,"basename"),b3(e,"basename"),this.path=Ds.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ds.dirname(this.path):void 0}set dirname(e){W8(this.basename,"dirname"),this.path=Ds.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ds.extname(this.path):void 0}set extname(e){if(b3(e,"extname"),W8(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ds.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){p3(e)&&(e=UY(e)),v3(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ds.basename(this.path,this.extname):void 0}set stem(e){v3(e,"stem"),b3(e,"stem"),this.path=Ds.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const i=this.message(e,t,n);throw i.fatal=!0,i}info(e,t,n){const i=this.message(e,t,n);return i.fatal=void 0,i}message(e,t,n){const i=new ua(e,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function b3(r,e){if(r&&r.includes(Ds.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ds.sep+"`")}function v3(r,e){if(!r)throw new Error("`"+e+"` cannot be empty")}function W8(r,e){if(!r)throw new Error("Setting `"+e+"` requires `path` to be set too")}function qY(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const GY=function(r){const n=this.constructor.prototype,i=n[r],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,n),a},$Y={}.hasOwnProperty;class y3 extends GY{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=MY()}copy(){const e=new y3;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(d3(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(_3("data",this.frozen),this.namespace[e]=t,this):$Y.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_3("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=t.call(e,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=f1(e),n=this.parser||this.Parser;return w3("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),w3("process",this.parser||this.Parser),x3("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,s){const o=f1(e),l=n.parse(o);n.run(l,o,function(u,h,d){if(u||!h||!d)return c(u);const f=h,p=n.stringify(f,d);XY(p)?d.value=p:d.result=p,c(u,d)});function c(u,h){u||!h?s(u):a?a(h):t(void 0,h)}}}processSync(e){let t=!1,n;return this.freeze(),w3("processSync",this.parser||this.Parser),x3("processSync",this.compiler||this.Compiler),this.process(e,i),X8("processSync","process",t),n;function i(a,s){t=!0,H8(a),n=s}}run(e,t,n){V8(e),this.freeze();const i=this.transformers;return!n&&typeof t=="function"&&(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(s,o){const l=f1(t);i.run(e,l,c);function c(u,h,d){const f=h||e;u?o(u):s?s(f):n(void 0,f,d)}}}runSync(e,t){let n=!1,i;return this.run(e,t,a),X8("runSync","run",n),i;function a(s,o){H8(s),i=o,n=!0}}stringify(e,t){this.freeze();const n=f1(t),i=this.compiler||this.Compiler;return x3("stringify",i),V8(e),i(e,n)}use(e,...t){const n=this.attachers,i=this.namespace;if(_3("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?o(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(c.plugins),c.settings&&(i.settings=d3(!0,i.settings,c.settings))}function o(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];a(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,d=-1;for(;++h<n.length;)if(n[h][0]===c){d=h;break}if(d===-1)n.push([c,...u]);else if(u.length>0){let[f,...p]=u;const m=n[d][1];f3(m)&&f3(f)&&(f=d3(!0,m,f)),n[d]=[c,f,...p]}}}}const WY=new y3().freeze();function w3(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function x3(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function _3(r,e){if(e)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function V8(r){if(!f3(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function X8(r,e,t){if(!t)throw new Error("`"+r+"` finished async. Use `"+e+"` instead")}function f1(r){return VY(r)?r:new HY(r)}function VY(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function XY(r){return typeof r=="string"||KY(r)}function KY(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const YY=WY().use(_K).use(CY).freeze();function QY(r){if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function K8(r,e,t){const i=bd((t||{}).ignore||[]),a=JY(e);let s=-1;for(;++s<a.length;)l3(r,"text",o);function o(c,u){let h=-1,d;for(;++h<u.length;){const f=u[h],p=d?d.children:void 0;if(i(f,p?p.indexOf(f):void 0,d))return;d=f}if(d)return l(c,u)}function l(c,u){const h=u[u.length-1],d=a[s][0],f=a[s][1];let p=0;const y=h.children.indexOf(c);let v=!1,_=[];d.lastIndex=0;let S=d.exec(c.value);for(;S;){const A=S.index,C={index:S.index,input:S.input,stack:[...u,c]};let k=f(...S,C);if(typeof k=="string"&&(k=k.length>0?{type:"text",value:k}:void 0),k===!1?d.lastIndex=A+1:(p!==A&&_.push({type:"text",value:c.value.slice(p,A)}),Array.isArray(k)?_.push(...k):k&&_.push(k),p=A+S[0].length,v=!0),!d.global)break;S=d.exec(c.value)}return v?(p<c.value.length&&_.push({type:"text",value:c.value.slice(p)}),h.children.splice(y,1,..._)):_=[c],y+_.length}}function JY(r){const e=[];if(!Array.isArray(r))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!r[0]||Array.isArray(r[0])?r:[r];let n=-1;for(;++n<t.length;){const i=t[n];e.push([ZY(i[0]),eQ(i[1])])}return e}function ZY(r){return typeof r=="string"?new RegExp(QY(r),"g"):r}function eQ(r){return typeof r=="function"?r:function(){return r}}function tQ(r){K8(r,[/\r?\n|\r/g,rQ])}function rQ(){return{type:"break"}}function nQ(){return function(r){tQ(r)}}function g1(r,e){const t=String(r);if(typeof e!="string")throw new TypeError("Expected character");let n=0,i=t.indexOf(e);for(;i!==-1;)n++,i=t.indexOf(e,i+e.length);return n}const S3="phrasing",k3=["autolink","link","image","label"];function iQ(){return{transforms:[hQ],enter:{literalAutolink:sQ,literalAutolinkEmail:A3,literalAutolinkHttp:A3,literalAutolinkWww:A3},exit:{literalAutolink:uQ,literalAutolinkEmail:cQ,literalAutolinkHttp:oQ,literalAutolinkWww:lQ}}}function aQ(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:S3,notInConstruct:k3},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:S3,notInConstruct:k3},{character:":",before:"[ps]",after:"\\/",inConstruct:S3,notInConstruct:k3}]}}function sQ(r){this.enter({type:"link",title:null,url:"",children:[]},r)}function A3(r){this.config.enter.autolinkProtocol.call(this,r)}function oQ(r){this.config.exit.autolinkProtocol.call(this,r)}function lQ(r){this.config.exit.data.call(this,r);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(r)}function cQ(r){this.config.exit.autolinkEmail.call(this,r)}function uQ(r){this.exit(r)}function hQ(r){K8(r,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,dQ],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),fQ]],{ignore:["link","linkReference"]})}function dQ(r,e,t,n,i){let a="";if(!Y8(i)||(/^w/i.test(e)&&(t=e+t,e="",a="http://"),!gQ(t)))return!1;const s=pQ(t+n);if(!s[0])return!1;const o={type:"link",title:null,url:a+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[o,{type:"text",value:s[1]}]:o}function fQ(r,e,t,n){return!Y8(n,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function gQ(r){const e=r.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function pQ(r){const e=/[!"&'),.:;<>?\]}]+$/.exec(r);if(!e)return[r,void 0];r=r.slice(0,e.index);let t=e[0],n=t.indexOf(")");const i=g1(r,"(");let a=g1(r,")");for(;n!==-1&&i>a;)r+=t.slice(0,n+1),t=t.slice(n+1),n=t.indexOf(")"),a++;return[r,t]}function Y8(r,e){const t=r.input.charCodeAt(r.index-1);return(r.index===0||vc(t)||s1(t))&&(!e||t!==47)}Q8.peek=kQ;function mQ(){this.buffer()}function bQ(r){this.enter({type:"footnoteReference",identifier:"",label:""},r)}function vQ(){this.buffer()}function yQ(r){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},r)}function wQ(r){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=hs(this.sliceSerialize(r)).toLowerCase(),t.label=e}function xQ(r){this.exit(r)}function _Q(r){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=hs(this.sliceSerialize(r)).toLowerCase(),t.label=e}function SQ(r){this.exit(r)}function kQ(){return"["}function Q8(r,e,t,n){const i=t.createTracker(n);let a=i.move("[^");const s=t.enter("footnoteReference"),o=t.enter("reference");return a+=i.move(t.safe(t.associationId(r),{after:"]",before:a})),o(),s(),a+=i.move("]"),a}function AQ(){return{enter:{gfmFootnoteCallString:mQ,gfmFootnoteCall:bQ,gfmFootnoteDefinitionLabelString:vQ,gfmFootnoteDefinition:yQ},exit:{gfmFootnoteCallString:wQ,gfmFootnoteCall:xQ,gfmFootnoteDefinitionLabelString:_Q,gfmFootnoteDefinition:SQ}}}function CQ(r){let e=!1;return r&&r.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:Q8},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(n,i,a,s){const o=a.createTracker(s);let l=o.move("[^");const c=a.enter("footnoteDefinition"),u=a.enter("label");return l+=o.move(a.safe(a.associationId(n),{before:l,after:"]"})),u(),l+=o.move("]:"),n.children&&n.children.length>0&&(o.shift(4),l+=o.move((e?`
`:" ")+a.indentLines(a.containerFlow(n,o.current()),e?J8:EQ))),c(),l}}function EQ(r,e,t){return e===0?r:J8(r,e,t)}function J8(r,e,t){return(t?"":"    ")+r}const TQ=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Z8.peek=PQ;function MQ(){return{canContainEols:["delete"],enter:{strikethrough:OQ},exit:{strikethrough:NQ}}}function IQ(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:TQ}],handlers:{delete:Z8}}}function OQ(r){this.enter({type:"delete",children:[]},r)}function NQ(r){this.exit(r)}function Z8(r,e,t,n){const i=t.createTracker(n),a=t.enter("strikethrough");let s=i.move("~~");return s+=t.containerPhrasing(r,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),a(),s}function PQ(){return"~"}function RQ(r){return r.length}function FQ(r,e){const t=e||{},n=(t.align||[]).concat(),i=t.stringLength||RQ,a=[],s=[],o=[],l=[];let c=0,u=-1;for(;++u<r.length;){const m=[],y=[];let v=-1;for(r[u].length>c&&(c=r[u].length);++v<r[u].length;){const _=DQ(r[u][v]);if(t.alignDelimiters!==!1){const S=i(_);y[v]=S,(l[v]===void 0||S>l[v])&&(l[v]=S)}m.push(_)}s[u]=m,o[u]=y}let h=-1;if(typeof n=="object"&&"length"in n)for(;++h<c;)a[h]=ex(n[h]);else{const m=ex(n);for(;++h<c;)a[h]=m}h=-1;const d=[],f=[];for(;++h<c;){const m=a[h];let y="",v="";m===99?(y=":",v=":"):m===108?y=":":m===114&&(v=":");let _=t.alignDelimiters===!1?1:Math.max(1,l[h]-y.length-v.length);const S=y+"-".repeat(_)+v;t.alignDelimiters!==!1&&(_=y.length+_+v.length,_>l[h]&&(l[h]=_),f[h]=_),d[h]=S}s.splice(1,0,d),o.splice(1,0,f),u=-1;const p=[];for(;++u<s.length;){const m=s[u],y=o[u];h=-1;const v=[];for(;++h<c;){const _=m[h]||"";let S="",A="";if(t.alignDelimiters!==!1){const C=l[h]-(y[h]||0),k=a[h];k===114?S=" ".repeat(C):k===99?C%2?(S=" ".repeat(C/2+.5),A=" ".repeat(C/2-.5)):(S=" ".repeat(C/2),A=S):A=" ".repeat(C)}t.delimiterStart!==!1&&!h&&v.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&_==="")&&(t.delimiterStart!==!1||h)&&v.push(" "),t.alignDelimiters!==!1&&v.push(S),v.push(_),t.alignDelimiters!==!1&&v.push(A),t.padding!==!1&&v.push(" "),(t.delimiterEnd!==!1||h!==c-1)&&v.push("|")}p.push(t.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return p.join(`
`)}function DQ(r){return r==null?"":String(r)}function ex(r){const e=typeof r=="string"?r.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function LQ(){return{enter:{table:BQ,tableData:tx,tableHeader:tx,tableRow:UQ},exit:{codeText:jQ,table:zQ,tableData:C3,tableHeader:C3,tableRow:C3}}}function BQ(r){const e=r._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},r),this.data.inTable=!0}function zQ(r){this.exit(r),this.data.inTable=void 0}function UQ(r){this.enter({type:"tableRow",children:[]},r)}function C3(r){this.exit(r)}function tx(r){this.enter({type:"tableCell",children:[]},r)}function jQ(r){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,HQ));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(r)}function HQ(r,e){return e==="|"?e:r}function qQ(r){const e=r||{},t=e.tableCellPadding,n=e.tablePipeAlign,i=e.stringLength,a=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:s,tableCell:l,tableRow:o}};function s(f,p,m,y){return c(u(f,m,y),f.align)}function o(f,p,m,y){const v=h(f,m,y),_=c([v]);return _.slice(0,_.indexOf(`
`))}function l(f,p,m,y){const v=m.enter("tableCell"),_=m.enter("phrasing"),S=m.containerPhrasing(f,{...y,before:a,after:a});return _(),v(),S}function c(f,p){return FQ(f,{align:p,alignDelimiters:n,padding:t,stringLength:i})}function u(f,p,m){const y=f.children;let v=-1;const _=[],S=p.enter("table");for(;++v<y.length;)_[v]=h(y[v],p,m);return S(),_}function h(f,p,m){const y=f.children;let v=-1;const _=[],S=p.enter("tableRow");for(;++v<y.length;)_[v]=l(y[v],f,p,m);return S(),_}function d(f,p,m){let y=u3.inlineCode(f,p,m);return m.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function GQ(){return{exit:{taskListCheckValueChecked:rx,taskListCheckValueUnchecked:rx,paragraph:WQ}}}function $Q(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:VQ}}}function rx(r){const e=this.stack[this.stack.length-2];e.type,e.checked=r.type==="taskListCheckValueChecked"}function WQ(r){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const n=t.children[0];if(n&&n.type==="text"){const i=e.children;let a=-1,s;for(;++a<i.length;){const o=i[a];if(o.type==="paragraph"){s=o;break}}s===t&&(n.value=n.value.slice(1),n.value.length===0?t.children.shift():t.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,t.position.start=Object.assign({},n.position.start)))}}this.exit(r)}function VQ(r,e,t,n){const i=r.children[0],a=typeof r.checked=="boolean"&&i&&i.type==="paragraph",s="["+(r.checked?"x":" ")+"] ",o=t.createTracker(n);a&&o.move(s);let l=u3.listItem(r,e,t,{...n,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function XQ(){return[iQ(),AQ(),MQ(),LQ(),GQ()]}function KQ(r){return{extensions:[aQ(),CQ(r),IQ(),qQ(r),$Q()]}}const YQ={tokenize:rJ,partial:!0},nx={tokenize:nJ,partial:!0},ix={tokenize:iJ,partial:!0},ax={tokenize:aJ,partial:!0},QQ={tokenize:sJ,partial:!0},sx={name:"wwwAutolink",tokenize:eJ,previous:lx},ox={name:"protocolAutolink",tokenize:tJ,previous:cx},yo={name:"emailAutolink",tokenize:ZQ,previous:ux},Ls={};function JQ(){return{text:Ls}}let wc=48;for(;wc<123;)Ls[wc]=yo,wc++,wc===58?wc=65:wc===91&&(wc=97);Ls[43]=yo,Ls[45]=yo,Ls[46]=yo,Ls[95]=yo,Ls[72]=[yo,ox],Ls[104]=[yo,ox],Ls[87]=[yo,sx],Ls[119]=[yo,sx];function ZQ(r,e,t){const n=this;let i,a;return s;function s(h){return!E3(h)||!ux.call(n,n.previous)||T3(n.events)?t(h):(r.enter("literalAutolink"),r.enter("literalAutolinkEmail"),o(h))}function o(h){return E3(h)?(r.consume(h),o):h===64?(r.consume(h),l):t(h)}function l(h){return h===46?r.check(QQ,u,c)(h):h===45||h===95||Ri(h)?(a=!0,r.consume(h),l):u(h)}function c(h){return r.consume(h),i=!0,l}function u(h){return a&&i&&Xi(n.previous)?(r.exit("literalAutolinkEmail"),r.exit("literalAutolink"),e(h)):t(h)}}function eJ(r,e,t){const n=this;return i;function i(s){return s!==87&&s!==119||!lx.call(n,n.previous)||T3(n.events)?t(s):(r.enter("literalAutolink"),r.enter("literalAutolinkWww"),r.check(YQ,r.attempt(nx,r.attempt(ix,a),t),t)(s))}function a(s){return r.exit("literalAutolinkWww"),r.exit("literalAutolink"),e(s)}}function tJ(r,e,t){const n=this;let i="",a=!1;return s;function s(h){return(h===72||h===104)&&cx.call(n,n.previous)&&!T3(n.events)?(r.enter("literalAutolink"),r.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),r.consume(h),o):t(h)}function o(h){if(Xi(h)&&i.length<5)return i+=String.fromCodePoint(h),r.consume(h),o;if(h===58){const d=i.toLowerCase();if(d==="http"||d==="https")return r.consume(h),l}return t(h)}function l(h){return h===47?(r.consume(h),a?c:(a=!0,l)):t(h)}function c(h){return h===null||a1(h)||xn(h)||vc(h)||s1(h)?t(h):r.attempt(nx,r.attempt(ix,u),t)(h)}function u(h){return r.exit("literalAutolinkHttp"),r.exit("literalAutolink"),e(h)}}function rJ(r,e,t){let n=0;return i;function i(s){return(s===87||s===119)&&n<3?(n++,r.consume(s),i):s===46&&n===3?(r.consume(s),a):t(s)}function a(s){return s===null?t(s):e(s)}}function nJ(r,e,t){let n,i,a;return s;function s(c){return c===46||c===95?r.check(ax,l,o)(c):c===null||xn(c)||vc(c)||c!==45&&s1(c)?l(c):(a=!0,r.consume(c),s)}function o(c){return c===95?n=!0:(i=n,n=void 0),r.consume(c),s}function l(c){return i||n||!a?t(c):e(c)}}function iJ(r,e){let t=0,n=0;return i;function i(s){return s===40?(t++,r.consume(s),i):s===41&&n<t?a(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?r.check(ax,e,a)(s):s===null||xn(s)||vc(s)?e(s):(r.consume(s),i)}function a(s){return s===41&&n++,r.consume(s),i}}function aJ(r,e,t){return n;function n(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(r.consume(o),n):o===38?(r.consume(o),a):o===93?(r.consume(o),i):o===60||o===null||xn(o)||vc(o)?e(o):t(o)}function i(o){return o===null||o===40||o===91||xn(o)||vc(o)?e(o):n(o)}function a(o){return Xi(o)?s(o):t(o)}function s(o){return o===59?(r.consume(o),n):Xi(o)?(r.consume(o),s):t(o)}}function sJ(r,e,t){return n;function n(a){return r.consume(a),i}function i(a){return Ri(a)?t(a):e(a)}}function lx(r){return r===null||r===40||r===42||r===95||r===91||r===93||r===126||xn(r)}function cx(r){return!Xi(r)}function ux(r){return!(r===47||E3(r))}function E3(r){return r===43||r===45||r===46||r===95||Ri(r)}function T3(r){let e=r.length,t=!1;for(;e--;){const n=r[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){t=!0;break}if(n._gfmAutolinkLiteralWalkedInto){t=!1;break}}return r.length>0&&!t&&(r[r.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const oJ={tokenize:pJ,partial:!0};function lJ(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:dJ,continuation:{tokenize:fJ},exit:gJ}},text:{91:{name:"gfmFootnoteCall",tokenize:hJ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:cJ,resolveTo:uJ}}}}function cJ(r,e,t){const n=this;let i=n.events.length;const a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s;for(;i--;){const l=n.events[i][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!s||!s._balanced)return t(l);const c=hs(n.sliceSerialize({start:s.end,end:n.now()}));return c.codePointAt(0)!==94||!a.includes(c.slice(1))?t(l):(r.enter("gfmFootnoteCallLabelMarker"),r.consume(l),r.exit("gfmFootnoteCallLabelMarker"),e(l))}}function uJ(r,e){let t=r.length;for(;t--;)if(r[t][1].type==="labelImage"&&r[t][0]==="enter"){r[t][1];break}r[t+1][1].type="data",r[t+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},r[t+3][1].start),end:Object.assign({},r[r.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},r[t+3][1].end),end:Object.assign({},r[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},r[r.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[r[t+1],r[t+2],["enter",n,e],r[t+3],r[t+4],["enter",i,e],["exit",i,e],["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e],r[r.length-2],r[r.length-1],["exit",n,e]];return r.splice(t,r.length-t+1,...o),r}function hJ(r,e,t){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a=0,s;return o;function o(h){return r.enter("gfmFootnoteCall"),r.enter("gfmFootnoteCallLabelMarker"),r.consume(h),r.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?t(h):(r.enter("gfmFootnoteCallMarker"),r.consume(h),r.exit("gfmFootnoteCallMarker"),r.enter("gfmFootnoteCallString"),r.enter("chunkString").contentType="string",c)}function c(h){if(a>999||h===93&&!s||h===null||h===91||xn(h))return t(h);if(h===93){r.exit("chunkString");const d=r.exit("gfmFootnoteCallString");return i.includes(hs(n.sliceSerialize(d)))?(r.enter("gfmFootnoteCallLabelMarker"),r.consume(h),r.exit("gfmFootnoteCallLabelMarker"),r.exit("gfmFootnoteCall"),e):t(h)}return xn(h)||(s=!0),a++,r.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(r.consume(h),a++,c):c(h)}}function dJ(r,e,t){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a,s=0,o;return l;function l(p){return r.enter("gfmFootnoteDefinition")._container=!0,r.enter("gfmFootnoteDefinitionLabel"),r.enter("gfmFootnoteDefinitionLabelMarker"),r.consume(p),r.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(r.enter("gfmFootnoteDefinitionMarker"),r.consume(p),r.exit("gfmFootnoteDefinitionMarker"),r.enter("gfmFootnoteDefinitionLabelString"),r.enter("chunkString").contentType="string",u):t(p)}function u(p){if(s>999||p===93&&!o||p===null||p===91||xn(p))return t(p);if(p===93){r.exit("chunkString");const m=r.exit("gfmFootnoteDefinitionLabelString");return a=hs(n.sliceSerialize(m)),r.enter("gfmFootnoteDefinitionLabelMarker"),r.consume(p),r.exit("gfmFootnoteDefinitionLabelMarker"),r.exit("gfmFootnoteDefinitionLabel"),d}return xn(p)||(o=!0),s++,r.consume(p),p===92?h:u}function h(p){return p===91||p===92||p===93?(r.consume(p),s++,u):u(p)}function d(p){return p===58?(r.enter("definitionMarker"),r.consume(p),r.exit("definitionMarker"),i.includes(a)||i.push(a),Vr(r,f,"gfmFootnoteDefinitionWhitespace")):t(p)}function f(p){return e(p)}}function fJ(r,e,t){return r.check(gd,e,r.attempt(oJ,e,t))}function gJ(r){r.exit("gfmFootnoteDefinition")}function pJ(r,e,t){const n=this;return Vr(r,i,"gfmFootnoteDefinitionIndent",5);function i(a){const s=n.events[n.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(a):t(a)}}function mJ(r){let t=(r||{}).singleTilde;const n={name:"strikethrough",tokenize:a,resolveAll:i};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(s,o){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},h={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},d=[["enter",u,o],["enter",s[c][1],o],["exit",s[c][1],o],["enter",h,o]],f=o.parser.constructs.insideSpan.null;f&&Aa(d,d.length,0,o1(f,s.slice(c+1,l),o)),Aa(d,d.length,0,[["exit",h,o],["enter",s[l][1],o],["exit",s[l][1],o],["exit",u,o]]),Aa(s,c-1,l-c+3,d),l=c+d.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function a(s,o,l){const c=this.previous,u=this.events;let h=0;return d;function d(p){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(p):(s.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const m=Ou(c);if(p===126)return h>1?l(p):(s.consume(p),h++,f);if(h<2&&!t)return l(p);const y=s.exit("strikethroughSequenceTemporary"),v=Ou(p);return y._open=!v||v===2&&!!m,y._close=!m||m===2&&!!v,o(p)}}}class bJ{constructor(){this.map=[]}add(e,t,n){vJ(this,e,t,n)}consume(e){if(this.map.sort(function(a,s){return a[0]-s[0]}),this.map.length===0)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let i=n.pop();for(;i;){for(const a of i)e.push(a);i=n.pop()}this.map.length=0}}function vJ(r,e,t,n){let i=0;if(!(t===0&&n.length===0)){for(;i<r.map.length;){if(r.map[i][0]===e){r.map[i][1]+=t,r.map[i][2].push(...n);return}i+=1}r.map.push([e,t,n])}}function yJ(r,e){let t=!1;const n=[];for(;e<r.length;){const i=r[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(r[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(r[e-1][1].type==="tableDelimiterMarker"){const a=n.length-1;n[a]=n[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return n}function wJ(){return{flow:{null:{name:"table",tokenize:xJ,resolveAll:_J}}}}function xJ(r,e,t){const n=this;let i=0,a=0,s;return o;function o(z){let W=n.events.length-1;for(;W>-1;){const K=n.events[W][1].type;if(K==="lineEnding"||K==="linePrefix")W--;else break}const V=W>-1?n.events[W][1].type:null,Q=V==="tableHead"||V==="tableRow"?k:l;return Q===k&&n.parser.lazy[n.now().line]?t(z):Q(z)}function l(z){return r.enter("tableHead"),r.enter("tableRow"),c(z)}function c(z){return z===124||(s=!0,a+=1),u(z)}function u(z){return z===null?t(z):ir(z)?a>1?(a=0,n.interrupt=!0,r.exit("tableRow"),r.enter("lineEnding"),r.consume(z),r.exit("lineEnding"),f):t(z):Qr(z)?Vr(r,u,"whitespace")(z):(a+=1,s&&(s=!1,i+=1),z===124?(r.enter("tableCellDivider"),r.consume(z),r.exit("tableCellDivider"),s=!0,u):(r.enter("data"),h(z)))}function h(z){return z===null||z===124||xn(z)?(r.exit("data"),u(z)):(r.consume(z),z===92?d:h)}function d(z){return z===92||z===124?(r.consume(z),h):h(z)}function f(z){return n.interrupt=!1,n.parser.lazy[n.now().line]?t(z):(r.enter("tableDelimiterRow"),s=!1,Qr(z)?Vr(r,p,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):p(z))}function p(z){return z===45||z===58?y(z):z===124?(s=!0,r.enter("tableCellDivider"),r.consume(z),r.exit("tableCellDivider"),m):C(z)}function m(z){return Qr(z)?Vr(r,y,"whitespace")(z):y(z)}function y(z){return z===58?(a+=1,s=!0,r.enter("tableDelimiterMarker"),r.consume(z),r.exit("tableDelimiterMarker"),v):z===45?(a+=1,v(z)):z===null||ir(z)?A(z):C(z)}function v(z){return z===45?(r.enter("tableDelimiterFiller"),_(z)):C(z)}function _(z){return z===45?(r.consume(z),_):z===58?(s=!0,r.exit("tableDelimiterFiller"),r.enter("tableDelimiterMarker"),r.consume(z),r.exit("tableDelimiterMarker"),S):(r.exit("tableDelimiterFiller"),S(z))}function S(z){return Qr(z)?Vr(r,A,"whitespace")(z):A(z)}function A(z){return z===124?p(z):z===null||ir(z)?!s||i!==a?C(z):(r.exit("tableDelimiterRow"),r.exit("tableHead"),e(z)):C(z)}function C(z){return t(z)}function k(z){return r.enter("tableRow"),M(z)}function M(z){return z===124?(r.enter("tableCellDivider"),r.consume(z),r.exit("tableCellDivider"),M):z===null||ir(z)?(r.exit("tableRow"),e(z)):Qr(z)?Vr(r,M,"whitespace")(z):(r.enter("data"),N(z))}function N(z){return z===null||z===124||xn(z)?(r.exit("data"),M(z)):(r.consume(z),z===92?F:N)}function F(z){return z===92||z===124?(r.consume(z),N):N(z)}}function _J(r,e){let t=-1,n=!0,i=0,a=[0,0,0,0],s=[0,0,0,0],o=!1,l=0,c,u,h;const d=new bJ;for(;++t<r.length;){const f=r[t],p=f[1];f[0]==="enter"?p.type==="tableHead"?(o=!1,l!==0&&(hx(d,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(t,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(n=!0,h=void 0,a=[0,0,0,0],s=[0,t+1,0,0],o&&(o=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(t,0,[["enter",u,e]])),i=p.type==="tableDelimiterRow"?2:u?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(n=!1,s[2]===0&&(a[1]!==0&&(s[0]=s[1],h=p1(d,e,a,i,void 0,h),a=[0,0,0,0]),s[2]=t)):p.type==="tableCellDivider"&&(n?n=!1:(a[1]!==0&&(s[0]=s[1],h=p1(d,e,a,i,void 0,h)),a=s,s=[a[1],t,0,0])):p.type==="tableHead"?(o=!0,l=t):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=t,a[1]!==0?(s[0]=s[1],h=p1(d,e,a,i,t,h)):s[1]!==0&&(h=p1(d,e,s,i,t,h)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(s[3]=t)}for(l!==0&&hx(d,e,l,c,u),d.consume(e.events),t=-1;++t<e.events.length;){const f=e.events[t];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=yJ(e.events,t))}return r}function p1(r,e,t,n,i,a){const s=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",o="tableContent";t[0]!==0&&(a.end=Object.assign({},Nu(e.events,t[0])),r.add(t[0],0,[["exit",a,e]]));const l=Nu(e.events,t[1]);if(a={type:s,start:Object.assign({},l),end:Object.assign({},l)},r.add(t[1],0,[["enter",a,e]]),t[2]!==0){const c=Nu(e.events,t[2]),u=Nu(e.events,t[3]),h={type:o,start:Object.assign({},c),end:Object.assign({},u)};if(r.add(t[2],0,[["enter",h,e]]),n!==2){const d=e.events[t[2]],f=e.events[t[3]];if(d[1].end=Object.assign({},f[1].end),d[1].type="chunkText",d[1].contentType="text",t[3]>t[2]+1){const p=t[2]+1,m=t[3]-t[2]-1;r.add(p,m,[])}}r.add(t[3]+1,0,[["exit",h,e]])}return i!==void 0&&(a.end=Object.assign({},Nu(e.events,i)),r.add(i,0,[["exit",a,e]]),a=void 0),a}function hx(r,e,t,n,i){const a=[],s=Nu(e.events,t);i&&(i.end=Object.assign({},s),a.push(["exit",i,e])),n.end=Object.assign({},s),a.push(["exit",n,e]),r.add(t+1,0,a)}function Nu(r,e){const t=r[e],n=t[0]==="enter"?"start":"end";return t[1][n]}const SJ={name:"tasklistCheck",tokenize:AJ};function kJ(){return{text:{91:SJ}}}function AJ(r,e,t){const n=this;return i;function i(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?t(l):(r.enter("taskListCheck"),r.enter("taskListCheckMarker"),r.consume(l),r.exit("taskListCheckMarker"),a)}function a(l){return xn(l)?(r.enter("taskListCheckValueUnchecked"),r.consume(l),r.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(r.enter("taskListCheckValueChecked"),r.consume(l),r.exit("taskListCheckValueChecked"),s):t(l)}function s(l){return l===93?(r.enter("taskListCheckMarker"),r.consume(l),r.exit("taskListCheckMarker"),r.exit("taskListCheck"),o):t(l)}function o(l){return ir(l)?e(l):Qr(l)?r.check({tokenize:CJ},e,t)(l):t(l)}}function CJ(r,e,t){return Vr(r,n,"whitespace");function n(i){return i===null?t(i):e(i)}}function EJ(r){return Yw([JQ(),lJ(),mJ(r),wJ(),kJ()])}const TJ={};function MJ(r){const e=this,t=r||TJ,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),a=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(EJ(t)),a.push(XQ()),s.push(KQ(t))}function IJ(){return{enter:{mathFlow:r,mathFlowFenceMeta:e,mathText:a},exit:{mathFlow:i,mathFlowFence:n,mathFlowFenceMeta:t,mathFlowValue:o,mathText:s,mathTextData:o}};function r(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function e(){this.buffer()}function t(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function n(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c;const h=u.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function a(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function s(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c,u.data.hChildren.push({type:"text",value:c})}function o(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function OJ(r){let e=(r||{}).singleDollarTextMath;return e==null&&(e=!0),n.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:t,inlineMath:n}};function t(a,s,o,l){const c=a.value||"",u=o.createTracker(l),h="$".repeat(Math.max(E8(c,"$")+1,2)),d=o.enter("mathFlow");let f=u.move(h);if(a.meta){const p=o.enter("mathFlowMeta");f+=u.move(o.safe(a.meta,{after:`
`,before:f,encode:["$"],...u.current()})),p()}return f+=u.move(`
`),c&&(f+=u.move(c+`
`)),f+=u.move(h),d(),f}function n(a,s,o){let l=a.value||"",c=1;for(e||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const u="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let h=-1;for(;++h<o.unsafe.length;){const d=o.unsafe[h];if(!d.atBreak)continue;const f=o.compilePattern(d);let p;for(;p=f.exec(l);){let m=p.index;l.codePointAt(m)===10&&l.codePointAt(m-1)===13&&m--,l=l.slice(0,m)+" "+l.slice(p.index+1)}}return u+l+u}function i(){return"$"}}const NJ={tokenize:PJ,concrete:!0,name:"mathFlow"},dx={tokenize:RJ,partial:!0};function PJ(r,e,t){const n=this,i=n.events[n.events.length-1],a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let s=0;return o;function o(_){return r.enter("mathFlow"),r.enter("mathFlowFence"),r.enter("mathFlowFenceSequence"),l(_)}function l(_){return _===36?(r.consume(_),s++,l):s<2?t(_):(r.exit("mathFlowFenceSequence"),Vr(r,c,"whitespace")(_))}function c(_){return _===null||ir(_)?h(_):(r.enter("mathFlowFenceMeta"),r.enter("chunkString",{contentType:"string"}),u(_))}function u(_){return _===null||ir(_)?(r.exit("chunkString"),r.exit("mathFlowFenceMeta"),h(_)):_===36?t(_):(r.consume(_),u)}function h(_){return r.exit("mathFlowFence"),n.interrupt?e(_):r.attempt(dx,d,y)(_)}function d(_){return r.attempt({tokenize:v,partial:!0},y,f)(_)}function f(_){return(a?Vr(r,p,"linePrefix",a+1):p)(_)}function p(_){return _===null?y(_):ir(_)?r.attempt(dx,d,y)(_):(r.enter("mathFlowValue"),m(_))}function m(_){return _===null||ir(_)?(r.exit("mathFlowValue"),p(_)):(r.consume(_),m)}function y(_){return r.exit("mathFlow"),e(_)}function v(_,S,A){let C=0;return Vr(_,k,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function k(F){return _.enter("mathFlowFence"),_.enter("mathFlowFenceSequence"),M(F)}function M(F){return F===36?(C++,_.consume(F),M):C<s?A(F):(_.exit("mathFlowFenceSequence"),Vr(_,N,"whitespace")(F))}function N(F){return F===null||ir(F)?(_.exit("mathFlowFence"),S(F)):A(F)}}}function RJ(r,e,t){const n=this;return i;function i(s){return s===null?e(s):(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}function FJ(r){let t=(r||{}).singleDollarTextMath;return t==null&&(t=!0),{tokenize:n,resolve:DJ,previous:LJ,name:"mathText"};function n(i,a,s){let o=0,l,c;return u;function u(m){return i.enter("mathText"),i.enter("mathTextSequence"),h(m)}function h(m){return m===36?(i.consume(m),o++,h):o<2&&!t?s(m):(i.exit("mathTextSequence"),d(m))}function d(m){return m===null?s(m):m===36?(c=i.enter("mathTextSequence"),l=0,p(m)):m===32?(i.enter("space"),i.consume(m),i.exit("space"),d):ir(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),d):(i.enter("mathTextData"),f(m))}function f(m){return m===null||m===32||m===36||ir(m)?(i.exit("mathTextData"),d(m)):(i.consume(m),f)}function p(m){return m===36?(i.consume(m),l++,p):l===o?(i.exit("mathTextSequence"),i.exit("mathText"),a(m)):(c.type="mathTextData",f(m))}}}function DJ(r){let e=r.length-4,t=3,n,i;if((r[t][1].type==="lineEnding"||r[t][1].type==="space")&&(r[e][1].type==="lineEnding"||r[e][1].type==="space")){for(n=t;++n<e;)if(r[n][1].type==="mathTextData"){r[e][1].type="mathTextPadding",r[t][1].type="mathTextPadding",t+=2,e-=2;break}}for(n=t-1,e++;++n<=e;)i===void 0?n!==e&&r[n][1].type!=="lineEnding"&&(i=n):(n===e||r[n][1].type==="lineEnding")&&(r[i][1].type="mathTextData",n!==i+2&&(r[i][1].end=r[n-1][1].end,r.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return r}function LJ(r){return r!==36||this.events[this.events.length-1][1].type==="characterEscape"}function BJ(r){return{flow:{36:NJ},text:{36:FJ(r)}}}class Ca{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Ca(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class Ka{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new Ka(t,Ca.range(this,e))}}class wt{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,a,s=t&&t.loc;if(s&&s.start<=s.end){var o=s.lexer.input;i=s.start,a=s.end,i===o.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var l=o.slice(i,a).replace(/[^]/g,"$&Ì²"),c;i>15?c="â¦"+o.slice(i-15,i):c=o.slice(0,i);var u;a+15<o.length?u=o.slice(a,a+15)+"â¦":u=o.slice(a),n+=c+l+u}var h=new Error(n);return h.name="ParseError",h.__proto__=wt.prototype,h.position=i,i!=null&&a!=null&&(h.length=a-i),h.rawMessage=e,h}}wt.prototype.__proto__=Error.prototype;var zJ=function(e,t){return e.indexOf(t)!==-1},UJ=function(e,t){return e===void 0?t:e},jJ=/([A-Z])/g,HJ=function(e){return e.replace(jJ,"-$1").toLowerCase()},qJ={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},GJ=/[&><"']/g;function $J(r){return String(r).replace(GJ,e=>qJ[e])}var fx=function r(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?r(e.body[0]):e:e.type==="font"?r(e.body):e},WJ=function(e){var t=fx(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},VJ=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},XJ=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},gr={contains:zJ,deflt:UJ,escape:$J,hyphenate:HJ,getBaseElem:fx,isCharacterBox:WJ,protocolFromUrl:XJ},m1={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:r=>"#"+r},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(r,e)=>(e.push(r),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:r=>Math.max(0,r),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:r=>Math.max(0,r),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:r=>Math.max(0,r),cli:"-e, --max-expand <n>",cliProcessor:r=>r==="Infinity"?1/0:parseInt(r)},globalGroup:{type:"boolean",cli:!1}};function KJ(r){if(r.default)return r.default;var e=r.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class M3{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in m1)if(m1.hasOwnProperty(t)){var n=m1[t];this[t]=e[t]!==void 0?n.processor?n.processor(e[t]):e[t]:KJ(n)}}reportNonstrict(e,t,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new wt("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,n){var i=this.strict;if(typeof i=="function")try{i=i(e,t,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=gr.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Cl{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Bs[YJ[this.id]]}sub(){return Bs[QJ[this.id]]}fracNum(){return Bs[JJ[this.id]]}fracDen(){return Bs[ZJ[this.id]]}cramp(){return Bs[eZ[this.id]]}text(){return Bs[tZ[this.id]]}isTight(){return this.size>=2}}var I3=0,b1=1,Pu=2,wo=3,yd=4,Ya=5,Ru=6,Ki=7,Bs=[new Cl(I3,0,!1),new Cl(b1,0,!0),new Cl(Pu,1,!1),new Cl(wo,1,!0),new Cl(yd,2,!1),new Cl(Ya,2,!0),new Cl(Ru,3,!1),new Cl(Ki,3,!0)],YJ=[yd,Ya,yd,Ya,Ru,Ki,Ru,Ki],QJ=[Ya,Ya,Ya,Ya,Ki,Ki,Ki,Ki],JJ=[Pu,wo,yd,Ya,Ru,Ki,Ru,Ki],ZJ=[wo,wo,Ya,Ya,Ki,Ki,Ki,Ki],eZ=[b1,b1,wo,wo,Ya,Ya,Ki,Ki],tZ=[I3,b1,Pu,wo,Pu,wo,Pu,wo],br={DISPLAY:Bs[I3],TEXT:Bs[Pu],SCRIPT:Bs[yd],SCRIPTSCRIPT:Bs[Ru]},O3=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function rZ(r){for(var e=0;e<O3.length;e++)for(var t=O3[e],n=0;n<t.blocks.length;n++){var i=t.blocks[n];if(r>=i[0]&&r<=i[1])return t.name}return null}var v1=[];O3.forEach(r=>r.blocks.forEach(e=>v1.push(...e)));function gx(r){for(var e=0;e<v1.length;e+=2)if(r>=v1[e]&&r<=v1[e+1])return!0;return!1}var Fu=80,nZ=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},iZ=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},aZ=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},sZ=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},oZ=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},lZ=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},cZ=function(e,t,n){var i=n-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},uZ=function(e,t,n){t=1e3*t;var i="";switch(e){case"sqrtMain":i=nZ(t,Fu);break;case"sqrtSize1":i=iZ(t,Fu);break;case"sqrtSize2":i=aZ(t,Fu);break;case"sqrtSize3":i=sZ(t,Fu);break;case"sqrtSize4":i=oZ(t,Fu);break;case"sqrtTall":i=cZ(t,Fu,n)}return i},hZ=function(e,t){switch(e){case"â":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"â£":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"â¥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"â":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"â¢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"â¥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"âª":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"â":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"â":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},px={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},dZ=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class wd{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return gr.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var zs={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},y1={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},mx={Ã:"A",Ã:"D",Ã:"o",Ã¥:"a",Ã°:"d",Ã¾:"o",Ð:"A",Ð:"B",Ð:"B",Ð:"F",Ð:"A",Ð:"E",Ð:"K",Ð:"3",Ð:"N",Ð:"N",Ð:"K",Ð:"N",Ð:"M",Ð:"H",Ð:"O",Ð:"N",Ð :"P",Ð¡:"C",Ð¢:"T",Ð£:"y",Ð¤:"O",Ð¥:"X",Ð¦:"U",Ð§:"h",Ð¨:"W",Ð©:"W",Ðª:"B",Ð«:"X",Ð¬:"B",Ð­:"3",Ð®:"X",Ð¯:"R",Ð°:"a",Ð±:"b",Ð²:"a",Ð³:"r",Ð´:"y",Ðµ:"e",Ð¶:"m",Ð·:"e",Ð¸:"n",Ð¹:"n",Ðº:"n",Ð»:"n",Ð¼:"m",Ð½:"n",Ð¾:"o",Ð¿:"n",Ñ:"p",Ñ:"c",Ñ:"o",Ñ:"y",Ñ:"b",Ñ:"x",Ñ:"n",Ñ:"n",Ñ:"w",Ñ:"w",Ñ:"a",Ñ:"m",Ñ:"a",Ñ:"e",Ñ:"m",Ñ:"r"};function fZ(r,e){zs[r]=e}function N3(r,e,t){if(!zs[e])throw new Error("Font metrics not found for font: "+e+".");var n=r.charCodeAt(0),i=zs[e][n];if(!i&&r[0]in mx&&(n=mx[r[0]].charCodeAt(0),i=zs[e][n]),!i&&t==="text"&&gx(n)&&(i=zs[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var P3={};function gZ(r){var e;if(r>=5?e=0:r>=3?e=1:e=2,!P3[e]){var t=P3[e]={cssEmPerMu:y1.quad[e]/18};for(var n in y1)y1.hasOwnProperty(n)&&(t[n]=y1[n][e])}return P3[e]}var pZ=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],bx=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],vx=function(e,t){return t.size<2?e:pZ[e-1][t.size-1]};class xo{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||xo.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=bx[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new xo(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:vx(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:bx[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=vx(xo.BASESIZE,e);return this.size===t&&this.textSize===xo.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==xo.BASESIZE?["sizing","reset-size"+this.size,"size"+xo.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=gZ(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}xo.BASESIZE=6;var R3={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},mZ={ex:!0,em:!0,mu:!0},yx=function(e){return typeof e!="string"&&(e=e.unit),e in R3||e in mZ||e==="ex"},Dn=function(e,t){var n;if(e.unit in R3)n=R3[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")n=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new wt("Invalid unit: '"+e.unit+"'");i!==t&&(n*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Tt=function(e){return+e.toFixed(4)+"em"},El=function(e){return e.filter(t=>t).join(" ")},wx=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},xx=function(e){var t=document.createElement(e);t.className=El(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var a=0;a<this.children.length;a++)t.appendChild(this.children[a].toNode());return t},bZ=/[\s"'>/=\x00-\x1f]/,_x=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+gr.escape(El(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=gr.hyphenate(i)+":"+this.style[i]+";");n&&(t+=' style="'+gr.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(bZ.test(a))throw new wt("Invalid attribute name '"+a+"'");t+=" "+a+'="'+gr.escape(this.attributes[a])+'"'}t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</"+e+">",t};class xd{constructor(e,t,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,wx.call(this,e,n,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return gr.contains(this.classes,e)}toNode(){return xx.call(this,"span")}toMarkup(){return _x.call(this,"span")}}class F3{constructor(e,t,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,wx.call(this,t,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return gr.contains(this.classes,e)}toNode(){return xx.call(this,"a")}toMarkup(){return _x.call(this,"a")}}class vZ{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return gr.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+gr.escape(this.src)+'"'+(' alt="'+gr.escape(this.alt)+'"'),t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=gr.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+gr.escape(t)+'"'),e+="'/>",e}}var yZ={Ã®:"Ä±Ì",Ã¯:"Ä±Ì",Ã­:"Ä±Ì",Ã¬:"Ä±Ì"};class Qa{constructor(e,t,n,i,a,s,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var c=rZ(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[Ã®Ã¯Ã­Ã¬]/.test(this.text)&&(this.text=yZ[this.text])}hasClass(e){return gr.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=Tt(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=El(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(t=t||document.createElement("span"),t.style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=gr.escape(El(this.classes)),t+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=gr.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,t+=' style="'+gr.escape(n)+'"');var a=gr.escape(this.text);return e?(t+=">",t+=a,t+="</span>",t):a}}class _o{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+gr.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Tl{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",px[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+gr.escape(this.alternate)+'"/>':'<path d="'+gr.escape(px[this.pathName])+'"/>'}}class D3{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+gr.escape(this.attributes[t])+'"');return e+="/>",e}}function Sx(r){if(r instanceof Qa)return r;throw new Error("Expected symbolNode but got "+String(r)+".")}function wZ(r){if(r instanceof xd)return r;throw new Error("Expected span<HtmlDomNode> but got "+String(r)+".")}var xZ={bin:1,close:1,inner:1,open:1,punct:1,rel:1},_Z={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Sn={math:{},text:{}};function E(r,e,t,n,i,a){Sn[r][i]={font:e,group:t,replace:n},a&&n&&(Sn[r][n]=Sn[r][i])}var O="math",pt="text",Y="main",ge="ams",On="accent-token",qt="bin",Yi="close",Du="inner",vr="mathord",ri="op-token",Ea="open",w1="punct",me="rel",So="spacing",Ie="textord";E(O,Y,me,"â¡","\\equiv",!0),E(O,Y,me,"âº","\\prec",!0),E(O,Y,me,"â»","\\succ",!0),E(O,Y,me,"â¼","\\sim",!0),E(O,Y,me,"â¥","\\perp"),E(O,Y,me,"âª¯","\\preceq",!0),E(O,Y,me,"âª°","\\succeq",!0),E(O,Y,me,"â","\\simeq",!0),E(O,Y,me,"â£","\\mid",!0),E(O,Y,me,"âª","\\ll",!0),E(O,Y,me,"â«","\\gg",!0),E(O,Y,me,"â","\\asymp",!0),E(O,Y,me,"â¥","\\parallel"),E(O,Y,me,"â","\\bowtie",!0),E(O,Y,me,"â£","\\smile",!0),E(O,Y,me,"â","\\sqsubseteq",!0),E(O,Y,me,"â","\\sqsupseteq",!0),E(O,Y,me,"â","\\doteq",!0),E(O,Y,me,"â¢","\\frown",!0),E(O,Y,me,"â","\\ni",!0),E(O,Y,me,"â","\\propto",!0),E(O,Y,me,"â¢","\\vdash",!0),E(O,Y,me,"â£","\\dashv",!0),E(O,Y,me,"â","\\owns"),E(O,Y,w1,".","\\ldotp"),E(O,Y,w1,"â","\\cdotp"),E(O,Y,Ie,"#","\\#"),E(pt,Y,Ie,"#","\\#"),E(O,Y,Ie,"&","\\&"),E(pt,Y,Ie,"&","\\&"),E(O,Y,Ie,"âµ","\\aleph",!0),E(O,Y,Ie,"â","\\forall",!0),E(O,Y,Ie,"â","\\hbar",!0),E(O,Y,Ie,"â","\\exists",!0),E(O,Y,Ie,"â","\\nabla",!0),E(O,Y,Ie,"â­","\\flat",!0),E(O,Y,Ie,"â","\\ell",!0),E(O,Y,Ie,"â®","\\natural",!0),E(O,Y,Ie,"â£","\\clubsuit",!0),E(O,Y,Ie,"â","\\wp",!0),E(O,Y,Ie,"â¯","\\sharp",!0),E(O,Y,Ie,"â¢","\\diamondsuit",!0),E(O,Y,Ie,"â","\\Re",!0),E(O,Y,Ie,"â¡","\\heartsuit",!0),E(O,Y,Ie,"â","\\Im",!0),E(O,Y,Ie,"â ","\\spadesuit",!0),E(O,Y,Ie,"Â§","\\S",!0),E(pt,Y,Ie,"Â§","\\S"),E(O,Y,Ie,"Â¶","\\P",!0),E(pt,Y,Ie,"Â¶","\\P"),E(O,Y,Ie,"â ","\\dag"),E(pt,Y,Ie,"â ","\\dag"),E(pt,Y,Ie,"â ","\\textdagger"),E(O,Y,Ie,"â¡","\\ddag"),E(pt,Y,Ie,"â¡","\\ddag"),E(pt,Y,Ie,"â¡","\\textdaggerdbl"),E(O,Y,Yi,"â±","\\rmoustache",!0),E(O,Y,Ea,"â°","\\lmoustache",!0),E(O,Y,Yi,"â¯","\\rgroup",!0),E(O,Y,Ea,"â®","\\lgroup",!0),E(O,Y,qt,"â","\\mp",!0),E(O,Y,qt,"â","\\ominus",!0),E(O,Y,qt,"â","\\uplus",!0),E(O,Y,qt,"â","\\sqcap",!0),E(O,Y,qt,"â","\\ast"),E(O,Y,qt,"â","\\sqcup",!0),E(O,Y,qt,"â¯","\\bigcirc",!0),E(O,Y,qt,"â","\\bullet",!0),E(O,Y,qt,"â¡","\\ddagger"),E(O,Y,qt,"â","\\wr",!0),E(O,Y,qt,"â¨¿","\\amalg"),E(O,Y,qt,"&","\\And"),E(O,Y,me,"âµ","\\longleftarrow",!0),E(O,Y,me,"â","\\Leftarrow",!0),E(O,Y,me,"â¸","\\Longleftarrow",!0),E(O,Y,me,"â¶","\\longrightarrow",!0),E(O,Y,me,"â","\\Rightarrow",!0),E(O,Y,me,"â¹","\\Longrightarrow",!0),E(O,Y,me,"â","\\leftrightarrow",!0),E(O,Y,me,"â·","\\longleftrightarrow",!0),E(O,Y,me,"â","\\Leftrightarrow",!0),E(O,Y,me,"âº","\\Longleftrightarrow",!0),E(O,Y,me,"â¦","\\mapsto",!0),E(O,Y,me,"â¼","\\longmapsto",!0),E(O,Y,me,"â","\\nearrow",!0),E(O,Y,me,"â©","\\hookleftarrow",!0),E(O,Y,me,"âª","\\hookrightarrow",!0),E(O,Y,me,"â","\\searrow",!0),E(O,Y,me,"â¼","\\leftharpoonup",!0),E(O,Y,me,"â","\\rightharpoonup",!0),E(O,Y,me,"â","\\swarrow",!0),E(O,Y,me,"â½","\\leftharpoondown",!0),E(O,Y,me,"â","\\rightharpoondown",!0),E(O,Y,me,"â","\\nwarrow",!0),E(O,Y,me,"â","\\rightleftharpoons",!0),E(O,ge,me,"â®","\\nless",!0),E(O,ge,me,"î","\\@nleqslant"),E(O,ge,me,"î","\\@nleqq"),E(O,ge,me,"âª","\\lneq",!0),E(O,ge,me,"â¨","\\lneqq",!0),E(O,ge,me,"î","\\@lvertneqq"),E(O,ge,me,"â¦","\\lnsim",!0),E(O,ge,me,"âª","\\lnapprox",!0),E(O,ge,me,"â","\\nprec",!0),E(O,ge,me,"â ","\\npreceq",!0),E(O,ge,me,"â¨","\\precnsim",!0),E(O,ge,me,"âª¹","\\precnapprox",!0),E(O,ge,me,"â","\\nsim",!0),E(O,ge,me,"î","\\@nshortmid"),E(O,ge,me,"â¤","\\nmid",!0),E(O,ge,me,"â¬","\\nvdash",!0),E(O,ge,me,"â­","\\nvDash",!0),E(O,ge,me,"âª","\\ntriangleleft"),E(O,ge,me,"â¬","\\ntrianglelefteq",!0),E(O,ge,me,"â","\\subsetneq",!0),E(O,ge,me,"î","\\@varsubsetneq"),E(O,ge,me,"â«","\\subsetneqq",!0),E(O,ge,me,"î","\\@varsubsetneqq"),E(O,ge,me,"â¯","\\ngtr",!0),E(O,ge,me,"î","\\@ngeqslant"),E(O,ge,me,"î","\\@ngeqq"),E(O,ge,me,"âª","\\gneq",!0),E(O,ge,me,"â©","\\gneqq",!0),E(O,ge,me,"î","\\@gvertneqq"),E(O,ge,me,"â§","\\gnsim",!0),E(O,ge,me,"âª","\\gnapprox",!0),E(O,ge,me,"â","\\nsucc",!0),E(O,ge,me,"â¡","\\nsucceq",!0),E(O,ge,me,"â©","\\succnsim",!0),E(O,ge,me,"âªº","\\succnapprox",!0),E(O,ge,me,"â","\\ncong",!0),E(O,ge,me,"î","\\@nshortparallel"),E(O,ge,me,"â¦","\\nparallel",!0),E(O,ge,me,"â¯","\\nVDash",!0),E(O,ge,me,"â«","\\ntriangleright"),E(O,ge,me,"â­","\\ntrianglerighteq",!0),E(O,ge,me,"î","\\@nsupseteqq"),E(O,ge,me,"â","\\supsetneq",!0),E(O,ge,me,"î","\\@varsupsetneq"),E(O,ge,me,"â«","\\supsetneqq",!0),E(O,ge,me,"î","\\@varsupsetneqq"),E(O,ge,me,"â®","\\nVdash",!0),E(O,ge,me,"âªµ","\\precneqq",!0),E(O,ge,me,"âª¶","\\succneqq",!0),E(O,ge,me,"î","\\@nsubseteqq"),E(O,ge,qt,"â´","\\unlhd"),E(O,ge,qt,"âµ","\\unrhd"),E(O,ge,me,"â","\\nleftarrow",!0),E(O,ge,me,"â","\\nrightarrow",!0),E(O,ge,me,"â","\\nLeftarrow",!0),E(O,ge,me,"â","\\nRightarrow",!0),E(O,ge,me,"â®","\\nleftrightarrow",!0),E(O,ge,me,"â","\\nLeftrightarrow",!0),E(O,ge,me,"â³","\\vartriangle"),E(O,ge,Ie,"â","\\hslash"),E(O,ge,Ie,"â½","\\triangledown"),E(O,ge,Ie,"â","\\lozenge"),E(O,ge,Ie,"â","\\circledS"),E(O,ge,Ie,"Â®","\\circledR"),E(pt,ge,Ie,"Â®","\\circledR"),E(O,ge,Ie,"â¡","\\measuredangle",!0),E(O,ge,Ie,"â","\\nexists"),E(O,ge,Ie,"â§","\\mho"),E(O,ge,Ie,"â²","\\Finv",!0),E(O,ge,Ie,"â","\\Game",!0),E(O,ge,Ie,"âµ","\\backprime"),E(O,ge,Ie,"â²","\\blacktriangle"),E(O,ge,Ie,"â¼","\\blacktriangledown"),E(O,ge,Ie,"â ","\\blacksquare"),E(O,ge,Ie,"â§«","\\blacklozenge"),E(O,ge,Ie,"â","\\bigstar"),E(O,ge,Ie,"â¢","\\sphericalangle",!0),E(O,ge,Ie,"â","\\complement",!0),E(O,ge,Ie,"Ã°","\\eth",!0),E(pt,Y,Ie,"Ã°","Ã°"),E(O,ge,Ie,"â±","\\diagup"),E(O,ge,Ie,"â²","\\diagdown"),E(O,ge,Ie,"â¡","\\square"),E(O,ge,Ie,"â¡","\\Box"),E(O,ge,Ie,"â","\\Diamond"),E(O,ge,Ie,"Â¥","\\yen",!0),E(pt,ge,Ie,"Â¥","\\yen",!0),E(O,ge,Ie,"â","\\checkmark",!0),E(pt,ge,Ie,"â","\\checkmark"),E(O,ge,Ie,"â¶","\\beth",!0),E(O,ge,Ie,"â¸","\\daleth",!0),E(O,ge,Ie,"â·","\\gimel",!0),E(O,ge,Ie,"Ï","\\digamma",!0),E(O,ge,Ie,"Ï°","\\varkappa"),E(O,ge,Ea,"â","\\@ulcorner",!0),E(O,ge,Yi,"â","\\@urcorner",!0),E(O,ge,Ea,"â","\\@llcorner",!0),E(O,ge,Yi,"â","\\@lrcorner",!0),E(O,ge,me,"â¦","\\leqq",!0),E(O,ge,me,"â©½","\\leqslant",!0),E(O,ge,me,"âª","\\eqslantless",!0),E(O,ge,me,"â²","\\lesssim",!0),E(O,ge,me,"âª","\\lessapprox",!0),E(O,ge,me,"â","\\approxeq",!0),E(O,ge,qt,"â","\\lessdot"),E(O,ge,me,"â","\\lll",!0),E(O,ge,me,"â¶","\\lessgtr",!0),E(O,ge,me,"â","\\lesseqgtr",!0),E(O,ge,me,"âª","\\lesseqqgtr",!0),E(O,ge,me,"â","\\doteqdot"),E(O,ge,me,"â","\\risingdotseq",!0),E(O,ge,me,"â","\\fallingdotseq",!0),E(O,ge,me,"â½","\\backsim",!0),E(O,ge,me,"â","\\backsimeq",!0),E(O,ge,me,"â«","\\subseteqq",!0),E(O,ge,me,"â","\\Subset",!0),E(O,ge,me,"â","\\sqsubset",!0),E(O,ge,me,"â¼","\\preccurlyeq",!0),E(O,ge,me,"â","\\curlyeqprec",!0),E(O,ge,me,"â¾","\\precsim",!0),E(O,ge,me,"âª·","\\precapprox",!0),E(O,ge,me,"â²","\\vartriangleleft"),E(O,ge,me,"â´","\\trianglelefteq"),E(O,ge,me,"â¨","\\vDash",!0),E(O,ge,me,"âª","\\Vvdash",!0),E(O,ge,me,"â£","\\smallsmile"),E(O,ge,me,"â¢","\\smallfrown"),E(O,ge,me,"â","\\bumpeq",!0),E(O,ge,me,"â","\\Bumpeq",!0),E(O,ge,me,"â§","\\geqq",!0),E(O,ge,me,"â©¾","\\geqslant",!0),E(O,ge,me,"âª","\\eqslantgtr",!0),E(O,ge,me,"â³","\\gtrsim",!0),E(O,ge,me,"âª","\\gtrapprox",!0),E(O,ge,qt,"â","\\gtrdot"),E(O,ge,me,"â","\\ggg",!0),E(O,ge,me,"â·","\\gtrless",!0),E(O,ge,me,"â","\\gtreqless",!0),E(O,ge,me,"âª","\\gtreqqless",!0),E(O,ge,me,"â","\\eqcirc",!0),E(O,ge,me,"â","\\circeq",!0),E(O,ge,me,"â","\\triangleq",!0),E(O,ge,me,"â¼","\\thicksim"),E(O,ge,me,"â","\\thickapprox"),E(O,ge,me,"â«","\\supseteqq",!0),E(O,ge,me,"â","\\Supset",!0),E(O,ge,me,"â","\\sqsupset",!0),E(O,ge,me,"â½","\\succcurlyeq",!0),E(O,ge,me,"â","\\curlyeqsucc",!0),E(O,ge,me,"â¿","\\succsim",!0),E(O,ge,me,"âª¸","\\succapprox",!0),E(O,ge,me,"â³","\\vartriangleright"),E(O,ge,me,"âµ","\\trianglerighteq"),E(O,ge,me,"â©","\\Vdash",!0),E(O,ge,me,"â£","\\shortmid"),E(O,ge,me,"â¥","\\shortparallel"),E(O,ge,me,"â¬","\\between",!0),E(O,ge,me,"â","\\pitchfork",!0),E(O,ge,me,"â","\\varpropto"),E(O,ge,me,"â","\\blacktriangleleft"),E(O,ge,me,"â´","\\therefore",!0),E(O,ge,me,"â","\\backepsilon"),E(O,ge,me,"â¶","\\blacktriangleright"),E(O,ge,me,"âµ","\\because",!0),E(O,ge,me,"â","\\llless"),E(O,ge,me,"â","\\gggtr"),E(O,ge,qt,"â²","\\lhd"),E(O,ge,qt,"â³","\\rhd"),E(O,ge,me,"â","\\eqsim",!0),E(O,Y,me,"â","\\Join"),E(O,ge,me,"â","\\Doteq",!0),E(O,ge,qt,"â","\\dotplus",!0),E(O,ge,qt,"â","\\smallsetminus"),E(O,ge,qt,"â","\\Cap",!0),E(O,ge,qt,"â","\\Cup",!0),E(O,ge,qt,"â©","\\doublebarwedge",!0),E(O,ge,qt,"â","\\boxminus",!0),E(O,ge,qt,"â","\\boxplus",!0),E(O,ge,qt,"â","\\divideontimes",!0),E(O,ge,qt,"â","\\ltimes",!0),E(O,ge,qt,"â","\\rtimes",!0),E(O,ge,qt,"â","\\leftthreetimes",!0),E(O,ge,qt,"â","\\rightthreetimes",!0),E(O,ge,qt,"â","\\curlywedge",!0),E(O,ge,qt,"â","\\curlyvee",!0),E(O,ge,qt,"â","\\circleddash",!0),E(O,ge,qt,"â","\\circledast",!0),E(O,ge,qt,"â","\\centerdot"),E(O,ge,qt,"âº","\\intercal",!0),E(O,ge,qt,"â","\\doublecap"),E(O,ge,qt,"â","\\doublecup"),E(O,ge,qt,"â ","\\boxtimes",!0),E(O,ge,me,"â¢","\\dashrightarrow",!0),E(O,ge,me,"â ","\\dashleftarrow",!0),E(O,ge,me,"â","\\leftleftarrows",!0),E(O,ge,me,"â","\\leftrightarrows",!0),E(O,ge,me,"â","\\Lleftarrow",!0),E(O,ge,me,"â","\\twoheadleftarrow",!0),E(O,ge,me,"â¢","\\leftarrowtail",!0),E(O,ge,me,"â«","\\looparrowleft",!0),E(O,ge,me,"â","\\leftrightharpoons",!0),E(O,ge,me,"â¶","\\curvearrowleft",!0),E(O,ge,me,"âº","\\circlearrowleft",!0),E(O,ge,me,"â°","\\Lsh",!0),E(O,ge,me,"â","\\upuparrows",!0),E(O,ge,me,"â¿","\\upharpoonleft",!0),E(O,ge,me,"â","\\downharpoonleft",!0),E(O,Y,me,"â¶","\\origof",!0),E(O,Y,me,"â·","\\imageof",!0),E(O,ge,me,"â¸","\\multimap",!0),E(O,ge,me,"â­","\\leftrightsquigarrow",!0),E(O,ge,me,"â","\\rightrightarrows",!0),E(O,ge,me,"â","\\rightleftarrows",!0),E(O,ge,me,"â ","\\twoheadrightarrow",!0),E(O,ge,me,"â£","\\rightarrowtail",!0),E(O,ge,me,"â¬","\\looparrowright",!0),E(O,ge,me,"â·","\\curvearrowright",!0),E(O,ge,me,"â»","\\circlearrowright",!0),E(O,ge,me,"â±","\\Rsh",!0),E(O,ge,me,"â","\\downdownarrows",!0),E(O,ge,me,"â¾","\\upharpoonright",!0),E(O,ge,me,"â","\\downharpoonright",!0),E(O,ge,me,"â","\\rightsquigarrow",!0),E(O,ge,me,"â","\\leadsto"),E(O,ge,me,"â","\\Rrightarrow",!0),E(O,ge,me,"â¾","\\restriction"),E(O,Y,Ie,"â","`"),E(O,Y,Ie,"$","\\$"),E(pt,Y,Ie,"$","\\$"),E(pt,Y,Ie,"$","\\textdollar"),E(O,Y,Ie,"%","\\%"),E(pt,Y,Ie,"%","\\%"),E(O,Y,Ie,"_","\\_"),E(pt,Y,Ie,"_","\\_"),E(pt,Y,Ie,"_","\\textunderscore"),E(O,Y,Ie,"â ","\\angle",!0),E(O,Y,Ie,"â","\\infty",!0),E(O,Y,Ie,"â²","\\prime"),E(O,Y,Ie,"â³","\\triangle"),E(O,Y,Ie,"Î","\\Gamma",!0),E(O,Y,Ie,"Î","\\Delta",!0),E(O,Y,Ie,"Î","\\Theta",!0),E(O,Y,Ie,"Î","\\Lambda",!0),E(O,Y,Ie,"Î","\\Xi",!0),E(O,Y,Ie,"Î ","\\Pi",!0),E(O,Y,Ie,"Î£","\\Sigma",!0),E(O,Y,Ie,"Î¥","\\Upsilon",!0),E(O,Y,Ie,"Î¦","\\Phi",!0),E(O,Y,Ie,"Î¨","\\Psi",!0),E(O,Y,Ie,"Î©","\\Omega",!0),E(O,Y,Ie,"A","Î"),E(O,Y,Ie,"B","Î"),E(O,Y,Ie,"E","Î"),E(O,Y,Ie,"Z","Î"),E(O,Y,Ie,"H","Î"),E(O,Y,Ie,"I","Î"),E(O,Y,Ie,"K","Î"),E(O,Y,Ie,"M","Î"),E(O,Y,Ie,"N","Î"),E(O,Y,Ie,"O","Î"),E(O,Y,Ie,"P","Î¡"),E(O,Y,Ie,"T","Î¤"),E(O,Y,Ie,"X","Î§"),E(O,Y,Ie,"Â¬","\\neg",!0),E(O,Y,Ie,"Â¬","\\lnot"),E(O,Y,Ie,"â¤","\\top"),E(O,Y,Ie,"â¥","\\bot"),E(O,Y,Ie,"â","\\emptyset"),E(O,ge,Ie,"â","\\varnothing"),E(O,Y,vr,"Î±","\\alpha",!0),E(O,Y,vr,"Î²","\\beta",!0),E(O,Y,vr,"Î³","\\gamma",!0),E(O,Y,vr,"Î´","\\delta",!0),E(O,Y,vr,"Ïµ","\\epsilon",!0),E(O,Y,vr,"Î¶","\\zeta",!0),E(O,Y,vr,"Î·","\\eta",!0),E(O,Y,vr,"Î¸","\\theta",!0),E(O,Y,vr,"Î¹","\\iota",!0),E(O,Y,vr,"Îº","\\kappa",!0),E(O,Y,vr,"Î»","\\lambda",!0),E(O,Y,vr,"Î¼","\\mu",!0),E(O,Y,vr,"Î½","\\nu",!0),E(O,Y,vr,"Î¾","\\xi",!0),E(O,Y,vr,"Î¿","\\omicron",!0),E(O,Y,vr,"Ï","\\pi",!0),E(O,Y,vr,"Ï","\\rho",!0),E(O,Y,vr,"Ï","\\sigma",!0),E(O,Y,vr,"Ï","\\tau",!0),E(O,Y,vr,"Ï","\\upsilon",!0),E(O,Y,vr,"Ï","\\phi",!0),E(O,Y,vr,"Ï","\\chi",!0),E(O,Y,vr,"Ï","\\psi",!0),E(O,Y,vr,"Ï","\\omega",!0),E(O,Y,vr,"Îµ","\\varepsilon",!0),E(O,Y,vr,"Ï","\\vartheta",!0),E(O,Y,vr,"Ï","\\varpi",!0),E(O,Y,vr,"Ï±","\\varrho",!0),E(O,Y,vr,"Ï","\\varsigma",!0),E(O,Y,vr,"Ï","\\varphi",!0),E(O,Y,qt,"â","*",!0),E(O,Y,qt,"+","+"),E(O,Y,qt,"â","-",!0),E(O,Y,qt,"â","\\cdot",!0),E(O,Y,qt,"â","\\circ",!0),E(O,Y,qt,"Ã·","\\div",!0),E(O,Y,qt,"Â±","\\pm",!0),E(O,Y,qt,"Ã","\\times",!0),E(O,Y,qt,"â©","\\cap",!0),E(O,Y,qt,"âª","\\cup",!0),E(O,Y,qt,"â","\\setminus",!0),E(O,Y,qt,"â§","\\land"),E(O,Y,qt,"â¨","\\lor"),E(O,Y,qt,"â§","\\wedge",!0),E(O,Y,qt,"â¨","\\vee",!0),E(O,Y,Ie,"â","\\surd"),E(O,Y,Ea,"â¨","\\langle",!0),E(O,Y,Ea,"â£","\\lvert"),E(O,Y,Ea,"â¥","\\lVert"),E(O,Y,Yi,"?","?"),E(O,Y,Yi,"!","!"),E(O,Y,Yi,"â©","\\rangle",!0),E(O,Y,Yi,"â£","\\rvert"),E(O,Y,Yi,"â¥","\\rVert"),E(O,Y,me,"=","="),E(O,Y,me,":",":"),E(O,Y,me,"â","\\approx",!0),E(O,Y,me,"â","\\cong",!0),E(O,Y,me,"â¥","\\ge"),E(O,Y,me,"â¥","\\geq",!0),E(O,Y,me,"â","\\gets"),E(O,Y,me,">","\\gt",!0),E(O,Y,me,"â","\\in",!0),E(O,Y,me,"î ","\\@not"),E(O,Y,me,"â","\\subset",!0),E(O,Y,me,"â","\\supset",!0),E(O,Y,me,"â","\\subseteq",!0),E(O,Y,me,"â","\\supseteq",!0),E(O,ge,me,"â","\\nsubseteq",!0),E(O,ge,me,"â","\\nsupseteq",!0),E(O,Y,me,"â¨","\\models"),E(O,Y,me,"â","\\leftarrow",!0),E(O,Y,me,"â¤","\\le"),E(O,Y,me,"â¤","\\leq",!0),E(O,Y,me,"<","\\lt",!0),E(O,Y,me,"â","\\rightarrow",!0),E(O,Y,me,"â","\\to"),E(O,ge,me,"â±","\\ngeq",!0),E(O,ge,me,"â°","\\nleq",!0),E(O,Y,So,"Â ","\\ "),E(O,Y,So,"Â ","\\space"),E(O,Y,So,"Â ","\\nobreakspace"),E(pt,Y,So,"Â ","\\ "),E(pt,Y,So,"Â "," "),E(pt,Y,So,"Â ","\\space"),E(pt,Y,So,"Â ","\\nobreakspace"),E(O,Y,So,null,"\\nobreak"),E(O,Y,So,null,"\\allowbreak"),E(O,Y,w1,",",","),E(O,Y,w1,";",";"),E(O,ge,qt,"â¼","\\barwedge",!0),E(O,ge,qt,"â»","\\veebar",!0),E(O,Y,qt,"â","\\odot",!0),E(O,Y,qt,"â","\\oplus",!0),E(O,Y,qt,"â","\\otimes",!0),E(O,Y,Ie,"â","\\partial",!0),E(O,Y,qt,"â","\\oslash",!0),E(O,ge,qt,"â","\\circledcirc",!0),E(O,ge,qt,"â¡","\\boxdot",!0),E(O,Y,qt,"â³","\\bigtriangleup"),E(O,Y,qt,"â½","\\bigtriangledown"),E(O,Y,qt,"â ","\\dagger"),E(O,Y,qt,"â","\\diamond"),E(O,Y,qt,"â","\\star"),E(O,Y,qt,"â","\\triangleleft"),E(O,Y,qt,"â¹","\\triangleright"),E(O,Y,Ea,"{","\\{"),E(pt,Y,Ie,"{","\\{"),E(pt,Y,Ie,"{","\\textbraceleft"),E(O,Y,Yi,"}","\\}"),E(pt,Y,Ie,"}","\\}"),E(pt,Y,Ie,"}","\\textbraceright"),E(O,Y,Ea,"{","\\lbrace"),E(O,Y,Yi,"}","\\rbrace"),E(O,Y,Ea,"[","\\lbrack",!0),E(pt,Y,Ie,"[","\\lbrack",!0),E(O,Y,Yi,"]","\\rbrack",!0),E(pt,Y,Ie,"]","\\rbrack",!0),E(O,Y,Ea,"(","\\lparen",!0),E(O,Y,Yi,")","\\rparen",!0),E(pt,Y,Ie,"<","\\textless",!0),E(pt,Y,Ie,">","\\textgreater",!0),E(O,Y,Ea,"â","\\lfloor",!0),E(O,Y,Yi,"â","\\rfloor",!0),E(O,Y,Ea,"â","\\lceil",!0),E(O,Y,Yi,"â","\\rceil",!0),E(O,Y,Ie,"\\","\\backslash"),E(O,Y,Ie,"â£","|"),E(O,Y,Ie,"â£","\\vert"),E(pt,Y,Ie,"|","\\textbar",!0),E(O,Y,Ie,"â¥","\\|"),E(O,Y,Ie,"â¥","\\Vert"),E(pt,Y,Ie,"â¥","\\textbardbl"),E(pt,Y,Ie,"~","\\textasciitilde"),E(pt,Y,Ie,"\\","\\textbackslash"),E(pt,Y,Ie,"^","\\textasciicircum"),E(O,Y,me,"â","\\uparrow",!0),E(O,Y,me,"â","\\Uparrow",!0),E(O,Y,me,"â","\\downarrow",!0),E(O,Y,me,"â","\\Downarrow",!0),E(O,Y,me,"â","\\updownarrow",!0),E(O,Y,me,"â","\\Updownarrow",!0),E(O,Y,ri,"â","\\coprod"),E(O,Y,ri,"â","\\bigvee"),E(O,Y,ri,"â","\\bigwedge"),E(O,Y,ri,"â¨","\\biguplus"),E(O,Y,ri,"â","\\bigcap"),E(O,Y,ri,"â","\\bigcup"),E(O,Y,ri,"â«","\\int"),E(O,Y,ri,"â«","\\intop"),E(O,Y,ri,"â¬","\\iint"),E(O,Y,ri,"â­","\\iiint"),E(O,Y,ri,"â","\\prod"),E(O,Y,ri,"â","\\sum"),E(O,Y,ri,"â¨","\\bigotimes"),E(O,Y,ri,"â¨","\\bigoplus"),E(O,Y,ri,"â¨","\\bigodot"),E(O,Y,ri,"â®","\\oint"),E(O,Y,ri,"â¯","\\oiint"),E(O,Y,ri,"â°","\\oiiint"),E(O,Y,ri,"â¨","\\bigsqcup"),E(O,Y,ri,"â«","\\smallint"),E(pt,Y,Du,"â¦","\\textellipsis"),E(O,Y,Du,"â¦","\\mathellipsis"),E(pt,Y,Du,"â¦","\\ldots",!0),E(O,Y,Du,"â¦","\\ldots",!0),E(O,Y,Du,"â¯","\\@cdots",!0),E(O,Y,Du,"â±","\\ddots",!0),E(O,Y,Ie,"â®","\\varvdots"),E(pt,Y,Ie,"â®","\\varvdots"),E(O,Y,On,"Ë","\\acute"),E(O,Y,On,"Ë","\\grave"),E(O,Y,On,"Â¨","\\ddot"),E(O,Y,On,"~","\\tilde"),E(O,Y,On,"Ë","\\bar"),E(O,Y,On,"Ë","\\breve"),E(O,Y,On,"Ë","\\check"),E(O,Y,On,"^","\\hat"),E(O,Y,On,"â","\\vec"),E(O,Y,On,"Ë","\\dot"),E(O,Y,On,"Ë","\\mathring"),E(O,Y,vr,"î±","\\@imath"),E(O,Y,vr,"î·","\\@jmath"),E(O,Y,Ie,"Ä±","Ä±"),E(O,Y,Ie,"È·","È·"),E(pt,Y,Ie,"Ä±","\\i",!0),E(pt,Y,Ie,"È·","\\j",!0),E(pt,Y,Ie,"Ã","\\ss",!0),E(pt,Y,Ie,"Ã¦","\\ae",!0),E(pt,Y,Ie,"Å","\\oe",!0),E(pt,Y,Ie,"Ã¸","\\o",!0),E(pt,Y,Ie,"Ã","\\AE",!0),E(pt,Y,Ie,"Å","\\OE",!0),E(pt,Y,Ie,"Ã","\\O",!0),E(pt,Y,On,"Ë","\\'"),E(pt,Y,On,"Ë","\\`"),E(pt,Y,On,"Ë","\\^"),E(pt,Y,On,"Ë","\\~"),E(pt,Y,On,"Ë","\\="),E(pt,Y,On,"Ë","\\u"),E(pt,Y,On,"Ë","\\."),E(pt,Y,On,"Â¸","\\c"),E(pt,Y,On,"Ë","\\r"),E(pt,Y,On,"Ë","\\v"),E(pt,Y,On,"Â¨",'\\"'),E(pt,Y,On,"Ë","\\H"),E(pt,Y,On,"â¯","\\textcircled");var kx={"--":!0,"---":!0,"``":!0,"''":!0};E(pt,Y,Ie,"â","--",!0),E(pt,Y,Ie,"â","\\textendash"),E(pt,Y,Ie,"â","---",!0),E(pt,Y,Ie,"â","\\textemdash"),E(pt,Y,Ie,"â","`",!0),E(pt,Y,Ie,"â","\\textquoteleft"),E(pt,Y,Ie,"â","'",!0),E(pt,Y,Ie,"â","\\textquoteright"),E(pt,Y,Ie,"â","``",!0),E(pt,Y,Ie,"â","\\textquotedblleft"),E(pt,Y,Ie,"â","''",!0),E(pt,Y,Ie,"â","\\textquotedblright"),E(O,Y,Ie,"Â°","\\degree",!0),E(pt,Y,Ie,"Â°","\\degree"),E(pt,Y,Ie,"Â°","\\textdegree",!0),E(O,Y,Ie,"Â£","\\pounds"),E(O,Y,Ie,"Â£","\\mathsterling",!0),E(pt,Y,Ie,"Â£","\\pounds"),E(pt,Y,Ie,"Â£","\\textsterling",!0),E(O,ge,Ie,"â ","\\maltese"),E(pt,ge,Ie,"â ","\\maltese");for(var Ax='0123456789/@."',L3=0;L3<Ax.length;L3++){var Cx=Ax.charAt(L3);E(O,Y,Ie,Cx,Cx)}for(var Ex='0123456789!@*()-=+";:?/.,',B3=0;B3<Ex.length;B3++){var Tx=Ex.charAt(B3);E(pt,Y,Ie,Tx,Tx)}for(var x1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",z3=0;z3<x1.length;z3++){var _1=x1.charAt(z3);E(O,Y,vr,_1,_1),E(pt,Y,Ie,_1,_1)}E(O,ge,Ie,"C","â"),E(pt,ge,Ie,"C","â"),E(O,ge,Ie,"H","â"),E(pt,ge,Ie,"H","â"),E(O,ge,Ie,"N","â"),E(pt,ge,Ie,"N","â"),E(O,ge,Ie,"P","â"),E(pt,ge,Ie,"P","â"),E(O,ge,Ie,"Q","â"),E(pt,ge,Ie,"Q","â"),E(O,ge,Ie,"R","â"),E(pt,ge,Ie,"R","â"),E(O,ge,Ie,"Z","â¤"),E(pt,ge,Ie,"Z","â¤"),E(O,Y,vr,"h","â"),E(pt,Y,vr,"h","â");for(var wr="",Qi=0;Qi<x1.length;Qi++){var zn=x1.charAt(Qi);wr=String.fromCharCode(55349,56320+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56372+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56424+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56580+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56684+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56736+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56788+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56840+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56944+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),Qi<26&&(wr=String.fromCharCode(55349,56632+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr),wr=String.fromCharCode(55349,56476+Qi),E(O,Y,vr,zn,wr),E(pt,Y,Ie,zn,wr))}wr="ð",E(O,Y,vr,"k",wr),E(pt,Y,Ie,"k",wr);for(var xc=0;xc<10;xc++){var Ml=xc.toString();wr=String.fromCharCode(55349,57294+xc),E(O,Y,vr,Ml,wr),E(pt,Y,Ie,Ml,wr),wr=String.fromCharCode(55349,57314+xc),E(O,Y,vr,Ml,wr),E(pt,Y,Ie,Ml,wr),wr=String.fromCharCode(55349,57324+xc),E(O,Y,vr,Ml,wr),E(pt,Y,Ie,Ml,wr),wr=String.fromCharCode(55349,57334+xc),E(O,Y,vr,Ml,wr),E(pt,Y,Ie,Ml,wr)}for(var U3="ÃÃÃ¾",j3=0;j3<U3.length;j3++){var S1=U3.charAt(j3);E(O,Y,vr,S1,S1),E(pt,Y,Ie,S1,S1)}var k1=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Mx=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],SZ=function(e,t){var n=e.charCodeAt(0),i=e.charCodeAt(1),a=(n-55296)*1024+(i-56320)+65536,s=t==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[k1[o][2],k1[o][s]]}else if(120782<=a&&a<=120831){var l=Math.floor((a-120782)/10);return[Mx[l][2],Mx[l][s]]}else{if(a===120485||a===120486)return[k1[0][2],k1[0][s]];if(120486<a&&a<120782)return["",""];throw new wt("Unsupported character: "+e)}},A1=function(e,t,n){return Sn[n][e]&&Sn[n][e].replace&&(e=Sn[n][e].replace),{value:e,metrics:N3(e,t,n)}},ds=function(e,t,n,i,a){var s=A1(e,t,n),o=s.metrics;e=s.value;var l;if(o){var c=o.italic;(n==="text"||i&&i.font==="mathit")&&(c=0),l=new Qa(e,o.height,o.depth,c,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+n+"'")),l=new Qa(e,0,0,0,0,0,a);if(i){l.maxFontSize=i.sizeMultiplier,i.style.isTight()&&l.classes.push("mtight");var u=i.getColor();u&&(l.style.color=u)}return l},kZ=function(e,t,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&A1(e,"Main-Bold",t).metrics?ds(e,"Main-Bold",t,n,i.concat(["mathbf"])):e==="\\"||Sn[t][e].font==="main"?ds(e,"Main-Regular",t,n,i):ds(e,"AMS-Regular",t,n,i.concat(["amsrm"]))},AZ=function(e,t,n,i,a){return a!=="textord"&&A1(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},CZ=function(e,t,n){var i=e.mode,a=e.text,s=["mord"],o=i==="math"||i==="text"&&t.font,l=o?t.font:t.fontFamily,c="",u="";if(a.charCodeAt(0)===55349&&([c,u]=SZ(a,i)),c.length>0)return ds(a,c,i,t,s.concat(u));if(l){var h,d;if(l==="boldsymbol"){var f=AZ(a,i,t,s,n);h=f.fontName,d=[f.fontClass]}else o?(h=Nx[l].fontName,d=[l]):(h=C1(l,t.fontWeight,t.fontShape),d=[l,t.fontWeight,t.fontShape]);if(A1(a,h,i).metrics)return ds(a,h,i,t,s.concat(d));if(kx.hasOwnProperty(a)&&h.slice(0,10)==="Typewriter"){for(var p=[],m=0;m<a.length;m++)p.push(ds(a[m],h,i,t,s.concat(d)));return Ox(p)}}if(n==="mathord")return ds(a,"Math-Italic",i,t,s.concat(["mathnormal"]));if(n==="textord"){var y=Sn[i][a]&&Sn[i][a].font;if(y==="ams"){var v=C1("amsrm",t.fontWeight,t.fontShape);return ds(a,v,i,t,s.concat("amsrm",t.fontWeight,t.fontShape))}else if(y==="main"||!y){var _=C1("textrm",t.fontWeight,t.fontShape);return ds(a,_,i,t,s.concat(t.fontWeight,t.fontShape))}else{var S=C1(y,t.fontWeight,t.fontShape);return ds(a,S,i,t,s.concat(S,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},EZ=(r,e)=>{if(El(r.classes)!==El(e.classes)||r.skew!==e.skew||r.maxFontSize!==e.maxFontSize)return!1;if(r.classes.length===1){var t=r.classes[0];if(t==="mbin"||t==="mord")return!1}for(var n in r.style)if(r.style.hasOwnProperty(n)&&r.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&r.style[i]!==e.style[i])return!1;return!0},TZ=r=>{for(var e=0;e<r.length-1;e++){var t=r[e],n=r[e+1];t instanceof Qa&&n instanceof Qa&&EZ(t,n)&&(t.text+=n.text,t.height=Math.max(t.height,n.height),t.depth=Math.max(t.depth,n.depth),t.italic=n.italic,r.splice(e+1,1),e--)}return r},H3=function(e){for(var t=0,n=0,i=0,a=0;a<e.children.length;a++){var s=e.children[a];s.height>t&&(t=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=i},ha=function(e,t,n,i){var a=new xd(e,t,n,i);return H3(a),a},Ix=(r,e,t,n)=>new xd(r,e,t,n),MZ=function(e,t,n){var i=ha([e],[],t);return i.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=Tt(i.height),i.maxFontSize=1,i},IZ=function(e,t,n,i){var a=new F3(e,t,n,i);return H3(a),a},Ox=function(e){var t=new wd(e);return H3(t),t},OZ=function(e,t){return e instanceof wd?ha([],[e],t):e},NZ=function(e){if(e.positionType==="individualShift"){for(var t=e.children,n=[t[0]],i=-t[0].shift-t[0].elem.depth,a=i,s=1;s<t.length;s++){var o=-t[s].shift-a-t[s].elem.depth,l=o-(t[s-1].elem.height+t[s-1].elem.depth);a=a+o,n.push({type:"kern",size:l}),n.push(t[s])}return{children:n,depth:i}}var c;if(e.positionType==="top"){for(var u=e.positionData,h=0;h<e.children.length;h++){var d=e.children[h];u-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var f=e.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-f.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-f.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},PZ=function(e,t){for(var{children:n,depth:i}=NZ(e),a=0,s=0;s<n.length;s++){var o=n[s];if(o.type==="elem"){var l=o.elem;a=Math.max(a,l.maxFontSize,l.height)}}a+=2;var c=ha(["pstrut"],[]);c.style.height=Tt(a);for(var u=[],h=i,d=i,f=i,p=0;p<n.length;p++){var m=n[p];if(m.type==="kern")f+=m.size;else{var y=m.elem,v=m.wrapperClasses||[],_=m.wrapperStyle||{},S=ha(v,[c,y],void 0,_);S.style.top=Tt(-a-f-y.depth),m.marginLeft&&(S.style.marginLeft=m.marginLeft),m.marginRight&&(S.style.marginRight=m.marginRight),u.push(S),f+=y.height+y.depth}h=Math.min(h,f),d=Math.max(d,f)}var A=ha(["vlist"],u);A.style.height=Tt(d);var C;if(h<0){var k=ha([],[]),M=ha(["vlist"],[k]);M.style.height=Tt(-h);var N=ha(["vlist-s"],[new Qa("â")]);C=[ha(["vlist-r"],[A,N]),ha(["vlist-r"],[M])]}else C=[ha(["vlist-r"],[A])];var F=ha(["vlist-t"],C);return C.length===2&&F.classes.push("vlist-t2"),F.height=d,F.depth=-h,F},RZ=(r,e)=>{var t=ha(["mspace"],[],e),n=Dn(r,e);return t.style.marginRight=Tt(n),t},C1=function(e,t,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var a;return t==="textbf"&&n==="textit"?a="BoldItalic":t==="textbf"?a="Bold":t==="textit"?a="Italic":a="Regular",i+"-"+a},Nx={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Px={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},FZ=function(e,t){var[n,i,a]=Px[e],s=new Tl(n),o=new _o([s],{width:Tt(i),height:Tt(a),style:"width:"+Tt(i),viewBox:"0 0 "+1e3*i+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),l=Ix(["overlay"],[o],t);return l.height=a,l.style.height=Tt(a),l.style.width=Tt(i),l},Ge={fontMap:Nx,makeSymbol:ds,mathsym:kZ,makeSpan:ha,makeSvgSpan:Ix,makeLineSpan:MZ,makeAnchor:IZ,makeFragment:Ox,wrapFragment:OZ,makeVList:PZ,makeOrd:CZ,makeGlue:RZ,staticSvg:FZ,svgData:Px,tryCombineChars:TZ},Ln={number:3,unit:"mu"},_c={number:4,unit:"mu"},ko={number:5,unit:"mu"},DZ={mord:{mop:Ln,mbin:_c,mrel:ko,minner:Ln},mop:{mord:Ln,mop:Ln,mrel:ko,minner:Ln},mbin:{mord:_c,mop:_c,mopen:_c,minner:_c},mrel:{mord:ko,mop:ko,mopen:ko,minner:ko},mopen:{},mclose:{mop:Ln,mbin:_c,mrel:ko,minner:Ln},mpunct:{mord:Ln,mop:Ln,mrel:ko,mopen:Ln,mclose:Ln,mpunct:Ln,minner:Ln},minner:{mord:Ln,mop:Ln,mbin:_c,mrel:ko,mopen:Ln,mpunct:Ln,minner:Ln}},LZ={mord:{mop:Ln},mop:{mord:Ln,mop:Ln},mbin:{},mrel:{},mopen:{},mclose:{mop:Ln},mpunct:{},minner:{mop:Ln}},Rx={},E1={},T1={};function Ut(r){for(var{type:e,names:t,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=r,o={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},l=0;l<t.length;++l)Rx[t[l]]=o;e&&(a&&(E1[e]=a),s&&(T1[e]=s))}function Sc(r){var{type:e,htmlBuilder:t,mathmlBuilder:n}=r;Ut({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:n})}var M1=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Wn=function(e){return e.type==="ordgroup"?e.body:[e]},Ao=Ge.makeSpan,BZ=["leftmost","mbin","mopen","mrel","mop","mpunct"],zZ=["rightmost","mrel","mclose","mpunct"],UZ={display:br.DISPLAY,text:br.TEXT,script:br.SCRIPT,scriptscript:br.SCRIPTSCRIPT},jZ={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},li=function(e,t,n,i){i===void 0&&(i=[null,null]);for(var a=[],s=0;s<e.length;s++){var o=cn(e[s],t);if(o instanceof wd){var l=o.children;a.push(...l)}else a.push(o)}if(Ge.tryCombineChars(a),!n)return a;var c=t;if(e.length===1){var u=e[0];u.type==="sizing"?c=t.havingSize(u.size):u.type==="styling"&&(c=t.havingStyle(UZ[u.style]))}var h=Ao([i[0]||"leftmost"],[],t),d=Ao([i[1]||"rightmost"],[],t),f=n==="root";return Fx(a,(p,m)=>{var y=m.classes[0],v=p.classes[0];y==="mbin"&&gr.contains(zZ,v)?m.classes[0]="mord":v==="mbin"&&gr.contains(BZ,y)&&(p.classes[0]="mord")},{node:h},d,f),Fx(a,(p,m)=>{var y=q3(m),v=q3(p),_=y&&v?p.hasClass("mtight")?LZ[y][v]:DZ[y][v]:null;if(_)return Ge.makeGlue(_,c)},{node:h},d,f),a},Fx=function r(e,t,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var o=e[s],l=Dx(o);if(l){r(l.children,t,n,null,a);continue}var c=!o.hasClass("mspace");if(c){var u=t(o,n.node);u&&(n.insertAfter?n.insertAfter(u):(e.unshift(u),s++))}c?n.node=o:a&&o.hasClass("newline")&&(n.node=Ao(["leftmost"])),n.insertAfter=(h=>d=>{e.splice(h+1,0,d),s++})(s)}i&&e.pop()},Dx=function(e){return e instanceof wd||e instanceof F3||e instanceof xd&&e.hasClass("enclosing")?e:null},HZ=function r(e,t){var n=Dx(e);if(n){var i=n.children;if(i.length){if(t==="right")return r(i[i.length-1],"right");if(t==="left")return r(i[0],"left")}}return e},q3=function(e,t){return e?(t&&(e=HZ(e,t)),jZ[e.classes[0]]||null):null},_d=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Ao(t.concat(n))},cn=function(e,t,n){if(!e)return Ao();if(E1[e.type]){var i=E1[e.type](e,t);if(n&&t.size!==n.size){i=Ao(t.sizingClasses(n),[i],t);var a=t.sizeMultiplier/n.sizeMultiplier;i.height*=a,i.depth*=a}return i}else throw new wt("Got group of unknown type: '"+e.type+"'")};function I1(r,e){var t=Ao(["base"],r,e),n=Ao(["strut"]);return n.style.height=Tt(t.height+t.depth),t.depth&&(n.style.verticalAlign=Tt(-t.depth)),t.children.unshift(n),t}function G3(r,e){var t=null;r.length===1&&r[0].type==="tag"&&(t=r[0].tag,r=r[0].body);var n=li(r,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var a=[],s=[],o=0;o<n.length;o++)if(s.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var l=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,s.push(n[o]),n[o].hasClass("nobreak")&&(l=!0);l||(a.push(I1(s,e)),s=[])}else n[o].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(I1(s,e)),s=[]),a.push(n[o]));s.length>0&&a.push(I1(s,e));var c;t?(c=I1(li(t,e,!0)),c.classes=["tag"],a.push(c)):i&&a.push(i);var u=Ao(["katex-html"],a);if(u.setAttribute("aria-hidden","true"),c){var h=c.children[0];h.style.height=Tt(u.height+u.depth),u.depth&&(h.style.verticalAlign=Tt(-u.depth))}return u}function Lx(r){return new wd(r)}class Ta{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=El(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Us&&this.children[n+1]instanceof Us){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Us;)i+=this.children[++n].toText();e.appendChild(new Us(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=gr.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+gr.escape(El(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Us{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return gr.escape(this.toText())}toText(){return this.text}}class qZ{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="â":e>=.1666&&e<=.1667?this.character="â":e>=.2222&&e<=.2223?this.character="â":e>=.2777&&e<=.2778?this.character="ââ":e>=-.05556&&e<=-.05555?this.character="ââ£":e>=-.1667&&e<=-.1666?this.character="ââ£":e>=-.2223&&e<=-.2222?this.character="ââ£":e>=-.2778&&e<=-.2777?this.character="ââ£":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Tt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Tt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var bt={MathNode:Ta,TextNode:Us,SpaceNode:qZ,newDocumentFragment:Lx},Ja=function(e,t,n){return Sn[t][e]&&Sn[t][e].replace&&e.charCodeAt(0)!==55349&&!(kx.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Sn[t][e].replace),new bt.TextNode(e)},$3=function(e){return e.length===1?e[0]:new bt.MathNode("mrow",e)},W3=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var n=t.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=e.text;if(gr.contains(["\\imath","\\jmath"],a))return null;Sn[i][a]&&Sn[i][a].replace&&(a=Sn[i][a].replace);var s=Ge.fontMap[n].fontName;return N3(a,s,i)?Ge.fontMap[n].variant:null};function V3(r){if(!r)return!1;if(r.type==="mi"&&r.children.length===1){var e=r.children[0];return e instanceof Us&&e.text==="."}else if(r.type==="mo"&&r.children.length===1&&r.getAttribute("separator")==="true"&&r.getAttribute("lspace")==="0em"&&r.getAttribute("rspace")==="0em"){var t=r.children[0];return t instanceof Us&&t.text===","}else return!1}var da=function(e,t,n){if(e.length===1){var i=_n(e[0],t);return n&&i instanceof Ta&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var a=[],s,o=0;o<e.length;o++){var l=_n(e[o],t);if(l instanceof Ta&&s instanceof Ta){if(l.type==="mtext"&&s.type==="mtext"&&l.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...l.children);continue}else if(l.type==="mn"&&s.type==="mn"){s.children.push(...l.children);continue}else if(V3(l)&&s.type==="mn"){s.children.push(...l.children);continue}else if(l.type==="mn"&&V3(s))l.children=[...s.children,...l.children],a.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(s.type==="mn"||V3(s))){var c=l.children[0];c instanceof Ta&&c.type==="mn"&&(c.children=[...s.children,...c.children],a.pop())}else if(s.type==="mi"&&s.children.length===1){var u=s.children[0];if(u instanceof Us&&u.text==="Ì¸"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof Us&&h.text.length>0&&(h.text=h.text.slice(0,1)+"Ì¸"+h.text.slice(1),a.pop())}}}a.push(l),s=l}return a},Il=function(e,t,n){return $3(da(e,t,n))},_n=function(e,t){if(!e)return new bt.MathNode("mrow");if(T1[e.type]){var n=T1[e.type](e,t);return n}else throw new wt("Got group of unknown type: '"+e.type+"'")};function Bx(r,e,t,n,i){var a=da(r,t),s;a.length===1&&a[0]instanceof Ta&&gr.contains(["mrow","mtable"],a[0].type)?s=a[0]:s=new bt.MathNode("mrow",a);var o=new bt.MathNode("annotation",[new bt.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var l=new bt.MathNode("semantics",[s,o]),c=new bt.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return Ge.makeSpan([u],[c])}var zx=function(e){return new xo({style:e.displayMode?br.DISPLAY:br.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Ux=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=Ge.makeSpan(n,[e])}return e},GZ=function(e,t,n){var i=zx(n),a;if(n.output==="mathml")return Bx(e,t,i,n.displayMode,!0);if(n.output==="html"){var s=G3(e,i);a=Ge.makeSpan(["katex"],[s])}else{var o=Bx(e,t,i,n.displayMode,!1),l=G3(e,i);a=Ge.makeSpan(["katex"],[o,l])}return Ux(a,n)},$Z=function(e,t,n){var i=zx(n),a=G3(e,i),s=Ge.makeSpan(["katex"],[a]);return Ux(s,n)},WZ={widehat:"^",widecheck:"Ë",widetilde:"~",utilde:"~",overleftarrow:"â",underleftarrow:"â",xleftarrow:"â",overrightarrow:"â",underrightarrow:"â",xrightarrow:"â",underbrace:"â",overbrace:"â",overgroup:"â ",undergroup:"â¡",overleftrightarrow:"â",underleftrightarrow:"â",xleftrightarrow:"â",Overrightarrow:"â",xRightarrow:"â",overleftharpoon:"â¼",xleftharpoonup:"â¼",overrightharpoon:"â",xrightharpoonup:"â",xLeftarrow:"â",xLeftrightarrow:"â",xhookleftarrow:"â©",xhookrightarrow:"âª",xmapsto:"â¦",xrightharpoondown:"â",xleftharpoondown:"â½",xrightleftharpoons:"â",xleftrightharpoons:"â",xtwoheadleftarrow:"â",xtwoheadrightarrow:"â ",xlongequal:"=",xtofrom:"â",xrightleftarrows:"â",xrightequilibrium:"â",xleftequilibrium:"â","\\cdrightarrow":"â","\\cdleftarrow":"â","\\cdlongequal":"="},VZ=function(e){var t=new bt.MathNode("mo",[new bt.TextNode(WZ[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},XZ={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},KZ=function(e){return e.type==="ordgroup"?e.body.length:1},YZ=function(e,t){function n(){var o=4e5,l=e.label.slice(1);if(gr.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,u=KZ(c.base),h,d,f;if(u>5)l==="widehat"||l==="widecheck"?(h=420,o=2364,f=.42,d=l+"4"):(h=312,o=2340,f=.34,d="tilde4");else{var p=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][p],h=[0,239,300,360,420][p],f=[0,.24,.3,.3,.36,.42][p],d=l+p):(o=[0,600,1033,2339,2340][p],h=[0,260,286,306,312][p],f=[0,.26,.286,.3,.306,.34][p],d="tilde"+p)}var m=new Tl(d),y=new _o([m],{width:"100%",height:Tt(f),viewBox:"0 0 "+o+" "+h,preserveAspectRatio:"none"});return{span:Ge.makeSvgSpan([],[y],t),minWidth:0,height:f}}else{var v=[],_=XZ[l],[S,A,C]=_,k=C/1e3,M=S.length,N,F;if(M===1){var z=_[3];N=["hide-tail"],F=[z]}else if(M===2)N=["halfarrow-left","halfarrow-right"],F=["xMinYMin","xMaxYMin"];else if(M===3)N=["brace-left","brace-center","brace-right"],F=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+M+" children.");for(var W=0;W<M;W++){var V=new Tl(S[W]),Q=new _o([V],{width:"400em",height:Tt(k),viewBox:"0 0 "+o+" "+C,preserveAspectRatio:F[W]+" slice"}),K=Ge.makeSvgSpan([N[W]],[Q],t);if(M===1)return{span:K,minWidth:A,height:k};K.style.height=Tt(k),v.push(K)}return{span:Ge.makeSpan(["stretchy"],v,t),minWidth:A,height:k}}}var{span:i,minWidth:a,height:s}=n();return i.height=s,i.style.height=Tt(s),a>0&&(i.style.minWidth=Tt(a)),i},QZ=function(e,t,n,i,a){var s,o=e.height+e.depth+n+i;if(/fbox|color|angl/.test(t)){if(s=Ge.makeSpan(["stretchy",t],[],a),t==="fbox"){var l=a.color&&a.getColor();l&&(s.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new D3({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new D3({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new _o(c,{width:"100%",height:Tt(o)});s=Ge.makeSvgSpan([],[u],a)}return s.height=o,s.style.height=Tt(o),s},Co={encloseSpan:QZ,mathMLnode:VZ,svgSpan:YZ};function Ur(r,e){if(!r||r.type!==e)throw new Error("Expected node of type "+e+", but got "+(r?"node of type "+r.type:String(r)));return r}function X3(r){var e=O1(r);if(!e)throw new Error("Expected node of symbol group type, but got "+(r?"node of type "+r.type:String(r)));return e}function O1(r){return r&&(r.type==="atom"||_Z.hasOwnProperty(r.type))?r:null}var K3=(r,e)=>{var t,n,i;r&&r.type==="supsub"?(n=Ur(r.base,"accent"),t=n.base,r.base=t,i=wZ(cn(r,e)),r.base=n):(n=Ur(r,"accent"),t=n.base);var a=cn(t,e.havingCrampedStyle()),s=n.isShifty&&gr.isCharacterBox(t),o=0;if(s){var l=gr.getBaseElem(t),c=cn(l,e.havingCrampedStyle());o=Sx(c).skew}var u=n.label==="\\c",h=u?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),d;if(n.isStretchy)d=Co.svgSpan(n,e),d=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+Tt(2*o)+")",marginLeft:Tt(2*o)}:void 0}]},e);else{var f,p;n.label==="\\vec"?(f=Ge.staticSvg("vec",e),p=Ge.svgData.vec[1]):(f=Ge.makeOrd({mode:n.mode,text:n.label},e,"textord"),f=Sx(f),f.italic=0,p=f.width,u&&(h+=f.depth)),d=Ge.makeSpan(["accent-body"],[f]);var m=n.label==="\\textcircled";m&&(d.classes.push("accent-full"),h=a.height);var y=o;m||(y-=p/2),d.style.left=Tt(y),n.label==="\\textcircled"&&(d.style.top=".2em"),d=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-h},{type:"elem",elem:d}]},e)}var v=Ge.makeSpan(["mord","accent"],[d],e);return i?(i.children[0]=v,i.height=Math.max(v.height,i.height),i.classes[0]="mord",i):v},jx=(r,e)=>{var t=r.isStretchy?Co.mathMLnode(r.label):new bt.MathNode("mo",[Ja(r.label,r.mode)]),n=new bt.MathNode("mover",[_n(r.base,e),t]);return n.setAttribute("accent","true"),n},JZ=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(r=>"\\"+r).join("|"));Ut({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(r,e)=>{var t=M1(e[0]),n=!JZ.test(r.funcName),i=!n||r.funcName==="\\widehat"||r.funcName==="\\widetilde"||r.funcName==="\\widecheck";return{type:"accent",mode:r.parser.mode,label:r.funcName,isStretchy:n,isShifty:i,base:t}},htmlBuilder:K3,mathmlBuilder:jx}),Ut({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(r,e)=>{var t=e[0],n=r.parser.mode;return n==="math"&&(r.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+r.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:r.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:K3,mathmlBuilder:jx}),Ut({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"accentUnder",mode:t.mode,label:n,base:i}},htmlBuilder:(r,e)=>{var t=cn(r.base,e),n=Co.svgSpan(r,e),i=r.label==="\\utilde"?.12:0,a=Ge.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:t}]},e);return Ge.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(r,e)=>{var t=Co.mathMLnode(r.label),n=new bt.MathNode("munder",[_n(r.base,e),t]);return n.setAttribute("accentunder","true"),n}});var N1=r=>{var e=new bt.MathNode("mpadded",r?[r]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Ut({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(r,e,t){var{parser:n,funcName:i}=r;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:t[0]}},htmlBuilder(r,e){var t=e.style,n=e.havingStyle(t.sup()),i=Ge.wrapFragment(cn(r.body,n,e),e),a=r.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(a+"-arrow-pad");var s;r.below&&(n=e.havingStyle(t.sub()),s=Ge.wrapFragment(cn(r.below,n,e),e),s.classes.push(a+"-arrow-pad"));var o=Co.svgSpan(r,e),l=-e.fontMetrics().axisHeight+.5*o.height,c=-e.fontMetrics().axisHeight-.5*o.height-.111;(i.depth>.25||r.label==="\\xleftequilibrium")&&(c-=i.depth);var u;if(s){var h=-e.fontMetrics().axisHeight+s.height+.5*o.height+.111;u=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:o,shift:l},{type:"elem",elem:s,shift:h}]},e)}else u=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:o,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),Ge.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(r,e){var t=Co.mathMLnode(r.label);t.setAttribute("minsize",r.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(r.body){var i=N1(_n(r.body,e));if(r.below){var a=N1(_n(r.below,e));n=new bt.MathNode("munderover",[t,a,i])}else n=new bt.MathNode("mover",[t,i])}else if(r.below){var s=N1(_n(r.below,e));n=new bt.MathNode("munder",[t,s])}else n=N1(),n=new bt.MathNode("mover",[t,n]);return n}});var ZZ=Ge.makeSpan;function Hx(r,e){var t=li(r.body,e,!0);return ZZ([r.mclass],t,e)}function qx(r,e){var t,n=da(r.body,e);return r.mclass==="minner"?t=new bt.MathNode("mpadded",n):r.mclass==="mord"?r.isCharacterBox?(t=n[0],t.type="mi"):t=new bt.MathNode("mi",n):(r.isCharacterBox?(t=n[0],t.type="mo"):t=new bt.MathNode("mo",n),r.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):r.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):r.mclass==="mopen"||r.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):r.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}Ut({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+n.slice(5),body:Wn(i),isCharacterBox:gr.isCharacterBox(i)}},htmlBuilder:Hx,mathmlBuilder:qx});var P1=r=>{var e=r.type==="ordgroup"&&r.body.length?r.body[0]:r;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Ut({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(r,e){var{parser:t}=r;return{type:"mclass",mode:t.mode,mclass:P1(e[0]),body:Wn(e[1]),isCharacterBox:gr.isCharacterBox(e[1])}}}),Ut({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(r,e){var{parser:t,funcName:n}=r,i=e[1],a=e[0],s;n!=="\\stackrel"?s=P1(i):s="mrel";var o={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Wn(i)},l={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:t.mode,mclass:s,body:[l],isCharacterBox:gr.isCharacterBox(l)}},htmlBuilder:Hx,mathmlBuilder:qx}),Ut({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"pmb",mode:t.mode,mclass:P1(e[0]),body:Wn(e[0])}},htmlBuilder(r,e){var t=li(r.body,e,!0),n=Ge.makeSpan([r.mclass],t,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(r,e){var t=da(r.body,e),n=new bt.MathNode("mstyle",t);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var eee={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Gx=()=>({type:"styling",body:[],mode:"math",style:"display"}),$x=r=>r.type==="textord"&&r.text==="@",tee=(r,e)=>(r.type==="mathord"||r.type==="atom")&&r.text===e;function ree(r,e,t){var n=eee[r];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=t.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},s=t.callFunction("\\Big",[a],[]),o=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[i,s,o]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function nee(r){var e=[];for(r.gullet.beginGroup(),r.gullet.macros.set("\\cr","\\\\\\relax"),r.gullet.beginGroup();;){e.push(r.parseExpression(!1,"\\\\")),r.gullet.endGroup(),r.gullet.beginGroup();var t=r.fetch().text;if(t==="&"||t==="\\\\")r.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new wt("Expected \\\\ or \\cr or \\end",r.nextToken)}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],o=Gx(),l=0;l<s.length;l++)if(!$x(s[l]))o.body.push(s[l]);else{n.push(o),l+=1;var c=X3(s[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var d=!0,f=l+1;f<s.length;f++){if(tee(s[f],c)){d=!1,l=f;break}if($x(s[f]))throw new wt("Missing a "+c+" character to complete a CD arrow.",s[f]);u[h].body.push(s[f])}if(d)throw new wt("Missing a "+c+" character to complete a CD arrow.",s[l])}else throw new wt('Expected one of "<>AV=|." after @',s[l]);var p=ree(c,u,r),m={type:"styling",body:[p],mode:"math",style:"display"};n.push(m),o=Gx()}a%2===0?n.push(o):n.shift(),n=[],i.push(n)}r.gullet.endGroup(),r.gullet.endGroup();var y=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:y,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}Ut({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r;return{type:"cdlabel",mode:t.mode,side:n.slice(4),label:e[0]}},htmlBuilder(r,e){var t=e.havingStyle(e.style.sup()),n=Ge.wrapFragment(cn(r.label,t,e),e);return n.classes.push("cd-label-"+r.side),n.style.bottom=Tt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(r,e){var t=new bt.MathNode("mrow",[_n(r.label,e)]);return t=new bt.MathNode("mpadded",[t]),t.setAttribute("width","0"),r.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new bt.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}}),Ut({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(r,e){var{parser:t}=r;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(r,e){var t=Ge.wrapFragment(cn(r.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(r,e){return new bt.MathNode("mrow",[_n(r.fragment,e)])}}),Ut({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(r,e){for(var{parser:t}=r,n=Ur(e[0],"ordgroup"),i=n.body,a="",s=0;s<i.length;s++){var o=Ur(i[s],"textord");a+=o.text}var l=parseInt(a),c;if(isNaN(l))throw new wt("\\@char has non-numeric argument "+a);if(l<0||l>=1114111)throw new wt("\\@char with invalid code point "+a);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var Wx=(r,e)=>{var t=li(r.body,e.withColor(r.color),!1);return Ge.makeFragment(t)},Vx=(r,e)=>{var t=da(r.body,e.withColor(r.color)),n=new bt.MathNode("mstyle",t);return n.setAttribute("mathcolor",r.color),n};Ut({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(r,e){var{parser:t}=r,n=Ur(e[0],"color-token").color,i=e[1];return{type:"color",mode:t.mode,color:n,body:Wn(i)}},htmlBuilder:Wx,mathmlBuilder:Vx}),Ut({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(r,e){var{parser:t,breakOnTokenText:n}=r,i=Ur(e[0],"color-token").color;t.gullet.macros.set("\\current@color",i);var a=t.parseExpression(!0,n);return{type:"color",mode:t.mode,color:i,body:a}},htmlBuilder:Wx,mathmlBuilder:Vx}),Ut({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(r,e,t){var{parser:n}=r,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&Ur(i,"size").value}},htmlBuilder(r,e){var t=Ge.makeSpan(["mspace"],[],e);return r.newLine&&(t.classes.push("newline"),r.size&&(t.style.marginTop=Tt(Dn(r.size,e)))),t},mathmlBuilder(r,e){var t=new bt.MathNode("mspace");return r.newLine&&(t.setAttribute("linebreak","newline"),r.size&&t.setAttribute("height",Tt(Dn(r.size,e)))),t}});var Y3={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Xx=r=>{var e=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new wt("Expected a control sequence",r);return e},iee=r=>{var e=r.gullet.popToken();return e.text==="="&&(e=r.gullet.popToken(),e.text===" "&&(e=r.gullet.popToken())),e},Kx=(r,e,t,n)=>{var i=r.gullet.macros.get(t.text);i==null&&(t.noexpand=!0,i={tokens:[t],numArgs:0,unexpandable:!r.gullet.isExpandable(t.text)}),r.gullet.macros.set(e,i,n)};Ut({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(r){var{parser:e,funcName:t}=r;e.consumeSpaces();var n=e.fetch();if(Y3[n.text])return(t==="\\global"||t==="\\\\globallong")&&(n.text=Y3[n.text]),Ur(e.parseFunction(),"internal");throw new wt("Invalid token after macro prefix",n)}}),Ut({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new wt("Expected a control sequence",n);for(var a=0,s,o=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),o[a].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new wt('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new wt('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new wt("Expected a macro definition");o[a].push(n.text)}var{tokens:l}=e.gullet.consumeArg();return s&&l.unshift(s),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(i,{tokens:l,numArgs:a,delimiters:o},t===Y3[t]),{type:"internal",mode:e.mode}}}),Ut({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=Xx(e.gullet.popToken());e.gullet.consumeSpaces();var i=iee(e);return Kx(e,n,i,t==="\\\\globallet"),{type:"internal",mode:e.mode}}}),Ut({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=Xx(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return Kx(e,n,a,t==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Sd=function(e,t,n){var i=Sn.math[e]&&Sn.math[e].replace,a=N3(i||e,t,n);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return a},Q3=function(e,t,n,i){var a=n.havingBaseStyle(t),s=Ge.makeSpan(i.concat(a.sizingClasses(n)),[e],n),o=a.sizeMultiplier/n.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=a.sizeMultiplier,s},Yx=function(e,t,n){var i=t.havingBaseStyle(n),a=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Tt(a),e.height-=a,e.depth+=a},aee=function(e,t,n,i,a,s){var o=Ge.makeSymbol(e,"Main-Regular",a,i),l=Q3(o,t,i,s);return n&&Yx(l,i,t),l},see=function(e,t,n,i){return Ge.makeSymbol(e,"Size"+t+"-Regular",n,i)},Qx=function(e,t,n,i,a,s){var o=see(e,t,a,i),l=Q3(Ge.makeSpan(["delimsizing","size"+t],[o],i),br.TEXT,i,s);return n&&Yx(l,i,br.TEXT),l},J3=function(e,t,n){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var a=Ge.makeSpan(["delimsizinginner",i],[Ge.makeSpan([],[Ge.makeSymbol(e,t,n)])]);return{type:"elem",elem:a}},Z3=function(e,t,n){var i=zs["Size4-Regular"][e.charCodeAt(0)]?zs["Size4-Regular"][e.charCodeAt(0)][4]:zs["Size1-Regular"][e.charCodeAt(0)][4],a=new Tl("inner",hZ(e,Math.round(1e3*t))),s=new _o([a],{width:Tt(i),height:Tt(t),style:"width:"+Tt(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),o=Ge.makeSvgSpan([],[s],n);return o.height=t,o.style.height=Tt(t),o.style.width=Tt(i),{type:"elem",elem:o}},ev=.008,R1={type:"kern",size:-1*ev},oee=["|","\\lvert","\\rvert","\\vert"],lee=["\\|","\\lVert","\\rVert","\\Vert"],Jx=function(e,t,n,i,a,s){var o,l,c,u,h="",d=0;o=c=u=e,l=null;var f="Size1-Regular";e==="\\uparrow"?c=u="â":e==="\\Uparrow"?c=u="â":e==="\\downarrow"?o=c="â":e==="\\Downarrow"?o=c="â":e==="\\updownarrow"?(o="\\uparrow",c="â",u="\\downarrow"):e==="\\Updownarrow"?(o="\\Uparrow",c="â",u="\\Downarrow"):gr.contains(oee,e)?(c="â£",h="vert",d=333):gr.contains(lee,e)?(c="â¥",h="doublevert",d=556):e==="["||e==="\\lbrack"?(o="â¡",c="â¢",u="â£",f="Size4-Regular",h="lbrack",d=667):e==="]"||e==="\\rbrack"?(o="â¤",c="â¥",u="â¦",f="Size4-Regular",h="rbrack",d=667):e==="\\lfloor"||e==="â"?(c=o="â¢",u="â£",f="Size4-Regular",h="lfloor",d=667):e==="\\lceil"||e==="â"?(o="â¡",c=u="â¢",f="Size4-Regular",h="lceil",d=667):e==="\\rfloor"||e==="â"?(c=o="â¥",u="â¦",f="Size4-Regular",h="rfloor",d=667):e==="\\rceil"||e==="â"?(o="â¤",c=u="â¥",f="Size4-Regular",h="rceil",d=667):e==="("||e==="\\lparen"?(o="â",c="â",u="â",f="Size4-Regular",h="lparen",d=875):e===")"||e==="\\rparen"?(o="â",c="â",u="â ",f="Size4-Regular",h="rparen",d=875):e==="\\{"||e==="\\lbrace"?(o="â§",l="â¨",u="â©",c="âª",f="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(o="â«",l="â¬",u="â­",c="âª",f="Size4-Regular"):e==="\\lgroup"||e==="â®"?(o="â§",u="â©",c="âª",f="Size4-Regular"):e==="\\rgroup"||e==="â¯"?(o="â«",u="â­",c="âª",f="Size4-Regular"):e==="\\lmoustache"||e==="â°"?(o="â§",u="â­",c="âª",f="Size4-Regular"):(e==="\\rmoustache"||e==="â±")&&(o="â«",u="â©",c="âª",f="Size4-Regular");var p=Sd(o,f,a),m=p.height+p.depth,y=Sd(c,f,a),v=y.height+y.depth,_=Sd(u,f,a),S=_.height+_.depth,A=0,C=1;if(l!==null){var k=Sd(l,f,a);A=k.height+k.depth,C=2}var M=m+S+A,N=Math.max(0,Math.ceil((t-M)/(C*v))),F=M+N*C*v,z=i.fontMetrics().axisHeight;n&&(z*=i.sizeMultiplier);var W=F/2-z,V=[];if(h.length>0){var Q=F-m-S,K=Math.round(F*1e3),ie=dZ(h,Math.round(Q*1e3)),L=new Tl(h,ie),J=(d/1e3).toFixed(3)+"em",X=(K/1e3).toFixed(3)+"em",re=new _o([L],{width:J,height:X,viewBox:"0 0 "+d+" "+K}),D=Ge.makeSvgSpan([],[re],i);D.height=K/1e3,D.style.width=J,D.style.height=X,V.push({type:"elem",elem:D})}else{if(V.push(J3(u,f,a)),V.push(R1),l===null){var se=F-m-S+2*ev;V.push(Z3(c,se,i))}else{var ce=(F-m-S-A)/2+2*ev;V.push(Z3(c,ce,i)),V.push(R1),V.push(J3(l,f,a)),V.push(R1),V.push(Z3(c,ce,i))}V.push(R1),V.push(J3(o,f,a))}var q=i.havingBaseStyle(br.TEXT),ae=Ge.makeVList({positionType:"bottom",positionData:W,children:V},q);return Q3(Ge.makeSpan(["delimsizing","mult"],[ae],q),br.TEXT,i,s)},tv=80,rv=.08,nv=function(e,t,n,i,a){var s=uZ(e,i,n),o=new Tl(e,s),l=new _o([o],{width:"400em",height:Tt(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ge.makeSvgSpan(["hide-tail"],[l],a)},cee=function(e,t){var n=t.havingBaseSizing(),i=r_("\\surd",e*n.sizeMultiplier,t_,n),a=n.sizeMultiplier,s=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),o,l=0,c=0,u=0,h;return i.type==="small"?(u=1e3+1e3*s+tv,e<1?a=1:e<1.4&&(a=.7),l=(1+s+rv)/a,c=(1+s)/a,o=nv("sqrtMain",l,u,s,t),o.style.minWidth="0.853em",h=.833/a):i.type==="large"?(u=(1e3+tv)*kd[i.size],c=(kd[i.size]+s)/a,l=(kd[i.size]+s+rv)/a,o=nv("sqrtSize"+i.size,l,u,s,t),o.style.minWidth="1.02em",h=1/a):(l=e+s+rv,c=e+s,u=Math.floor(1e3*e+s)+tv,o=nv("sqrtTall",l,u,s,t),o.style.minWidth="0.742em",h=1.056),o.height=c,o.style.height=Tt(l),{span:o,advanceWidth:h,ruleWidth:(t.fontMetrics().sqrtRuleThickness+s)*a}},Zx=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","â","â","\\lceil","\\rceil","â","â","\\surd"],uee=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","â®","â¯","\\lmoustache","\\rmoustache","â°","â±"],e_=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],kd=[0,1.2,1.8,2.4,3],hee=function(e,t,n,i,a){if(e==="<"||e==="\\lt"||e==="â¨"?e="\\langle":(e===">"||e==="\\gt"||e==="â©")&&(e="\\rangle"),gr.contains(Zx,e)||gr.contains(e_,e))return Qx(e,t,!1,n,i,a);if(gr.contains(uee,e))return Jx(e,kd[t],!1,n,i,a);throw new wt("Illegal delimiter: '"+e+"'")},dee=[{type:"small",style:br.SCRIPTSCRIPT},{type:"small",style:br.SCRIPT},{type:"small",style:br.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],fee=[{type:"small",style:br.SCRIPTSCRIPT},{type:"small",style:br.SCRIPT},{type:"small",style:br.TEXT},{type:"stack"}],t_=[{type:"small",style:br.SCRIPTSCRIPT},{type:"small",style:br.SCRIPT},{type:"small",style:br.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],gee=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},r_=function(e,t,n,i){for(var a=Math.min(2,3-i.style.size),s=a;s<n.length&&n[s].type!=="stack";s++){var o=Sd(e,gee(n[s]),"math"),l=o.height+o.depth;if(n[s].type==="small"){var c=i.havingBaseStyle(n[s].style);l*=c.sizeMultiplier}if(l>t)return n[s]}return n[n.length-1]},n_=function(e,t,n,i,a,s){e==="<"||e==="\\lt"||e==="â¨"?e="\\langle":(e===">"||e==="\\gt"||e==="â©")&&(e="\\rangle");var o;gr.contains(e_,e)?o=dee:gr.contains(Zx,e)?o=t_:o=fee;var l=r_(e,t,o,i);return l.type==="small"?aee(e,l.style,n,i,a,s):l.type==="large"?Qx(e,l.size,n,i,a,s):Jx(e,t,n,i,a,s)},pee=function(e,t,n,i,a,s){var o=i.fontMetrics().axisHeight*i.sizeMultiplier,l=901,c=5/i.fontMetrics().ptPerEm,u=Math.max(t-o,n+o),h=Math.max(u/500*l,2*u-c);return n_(e,h,!0,i,a,s)},Eo={sqrtImage:cee,sizedDelim:hee,sizeToMaxHeight:kd,customSizedDelim:n_,leftRightDelim:pee},i_={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},mee=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","â","â","\\lceil","\\rceil","â","â","<",">","\\langle","â¨","\\rangle","â©","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","â®","â¯","\\lmoustache","\\rmoustache","â°","â±","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function F1(r,e){var t=O1(r);if(t&&gr.contains(mee,t.text))return t;throw t?new wt("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",r):new wt("Invalid delimiter type '"+r.type+"'",r)}Ut({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(r,e)=>{var t=F1(e[0],r);return{type:"delimsizing",mode:r.parser.mode,size:i_[r.funcName].size,mclass:i_[r.funcName].mclass,delim:t.text}},htmlBuilder:(r,e)=>r.delim==="."?Ge.makeSpan([r.mclass]):Eo.sizedDelim(r.delim,r.size,e,r.mode,[r.mclass]),mathmlBuilder:r=>{var e=[];r.delim!=="."&&e.push(Ja(r.delim,r.mode));var t=new bt.MathNode("mo",e);r.mclass==="mopen"||r.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var n=Tt(Eo.sizeToMaxHeight[r.size]);return t.setAttribute("minsize",n),t.setAttribute("maxsize",n),t}});function a_(r){if(!r.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Ut({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=r.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new wt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:r.parser.mode,delim:F1(e[0],r).text,color:t}}}),Ut({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=F1(e[0],r),n=r.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=Ur(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:t.text,right:a.delim,rightColor:a.color}},htmlBuilder:(r,e)=>{a_(r);for(var t=li(r.body,e,!0,["mopen","mclose"]),n=0,i=0,a=!1,s=0;s<t.length;s++)t[s].isMiddle?a=!0:(n=Math.max(t[s].height,n),i=Math.max(t[s].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var o;if(r.left==="."?o=_d(e,["mopen"]):o=Eo.leftRightDelim(r.left,n,i,e,r.mode,["mopen"]),t.unshift(o),a)for(var l=1;l<t.length;l++){var c=t[l],u=c.isMiddle;u&&(t[l]=Eo.leftRightDelim(u.delim,n,i,u.options,r.mode,[]))}var h;if(r.right===".")h=_d(e,["mclose"]);else{var d=r.rightColor?e.withColor(r.rightColor):e;h=Eo.leftRightDelim(r.right,n,i,d,r.mode,["mclose"])}return t.push(h),Ge.makeSpan(["minner"],t,e)},mathmlBuilder:(r,e)=>{a_(r);var t=da(r.body,e);if(r.left!=="."){var n=new bt.MathNode("mo",[Ja(r.left,r.mode)]);n.setAttribute("fence","true"),t.unshift(n)}if(r.right!=="."){var i=new bt.MathNode("mo",[Ja(r.right,r.mode)]);i.setAttribute("fence","true"),r.rightColor&&i.setAttribute("mathcolor",r.rightColor),t.push(i)}return $3(t)}}),Ut({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=F1(e[0],r);if(!r.parser.leftrightDepth)throw new wt("\\middle without preceding \\left",t);return{type:"middle",mode:r.parser.mode,delim:t.text}},htmlBuilder:(r,e)=>{var t;if(r.delim===".")t=_d(e,[]);else{t=Eo.sizedDelim(r.delim,1,e,r.mode,[]);var n={delim:r.delim,options:e};t.isMiddle=n}return t},mathmlBuilder:(r,e)=>{var t=r.delim==="\\vert"||r.delim==="|"?Ja("|","text"):Ja(r.delim,r.mode),n=new bt.MathNode("mo",[t]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var iv=(r,e)=>{var t=Ge.wrapFragment(cn(r.body,e),e),n=r.label.slice(1),i=e.sizeMultiplier,a,s=0,o=gr.isCharacterBox(r.body);if(n==="sout")a=Ge.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/i,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var l=Dn({number:.6,unit:"pt"},e),c=Dn({number:.35,unit:"ex"},e),u=e.havingBaseSizing();i=i/u.sizeMultiplier;var h=t.height+t.depth+l+c;t.style.paddingLeft=Tt(h/2+l);var d=Math.floor(1e3*h*i),f=lZ(d),p=new _o([new Tl("phase",f)],{width:"400em",height:Tt(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});a=Ge.makeSvgSpan(["hide-tail"],[p],e),a.style.height=Tt(h),s=t.depth+l+c}else{/cancel/.test(n)?o||t.classes.push("cancel-pad"):n==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var m=0,y=0,v=0;/box/.test(n)?(v=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),m=e.fontMetrics().fboxsep+(n==="colorbox"?0:v),y=m):n==="angl"?(v=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),m=4*v,y=Math.max(0,.25-t.depth)):(m=o?.2:0,y=m),a=Co.encloseSpan(t,n,m,y,e),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=Tt(v)):n==="angl"&&v!==.049&&(a.style.borderTopWidth=Tt(v),a.style.borderRightWidth=Tt(v)),s=t.depth+y,r.backgroundColor&&(a.style.backgroundColor=r.backgroundColor,r.borderColor&&(a.style.borderColor=r.borderColor))}var _;if(r.backgroundColor)_=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:t,shift:0}]},e);else{var S=/cancel|phase/.test(n)?["svg-align"]:[];_=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:S}]},e)}return/cancel/.test(n)&&(_.height=t.height,_.depth=t.depth),/cancel/.test(n)&&!o?Ge.makeSpan(["mord","cancel-lap"],[_],e):Ge.makeSpan(["mord"],[_],e)},av=(r,e)=>{var t=0,n=new bt.MathNode(r.label.indexOf("colorbox")>-1?"mpadded":"menclose",[_n(r.body,e)]);switch(r.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*t+"pt"),n.setAttribute("height","+"+2*t+"pt"),n.setAttribute("lspace",t+"pt"),n.setAttribute("voffset",t+"pt"),r.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(r.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return r.backgroundColor&&n.setAttribute("mathbackground",r.backgroundColor),n};Ut({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(r,e,t){var{parser:n,funcName:i}=r,a=Ur(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:iv,mathmlBuilder:av}),Ut({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(r,e,t){var{parser:n,funcName:i}=r,a=Ur(e[0],"color-token").color,s=Ur(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:o}},htmlBuilder:iv,mathmlBuilder:av}),Ut({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}}),Ut({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"enclose",mode:t.mode,label:n,body:i}},htmlBuilder:iv,mathmlBuilder:av}),Ut({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(r,e){var{parser:t}=r;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var s_={};function js(r){for(var{type:e,names:t,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=r,o={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<t.length;++l)s_[t[l]]=o;a&&(E1[e]=a),s&&(T1[e]=s)}var o_={};function ne(r,e){o_[r]=e}function l_(r){var e=[];r.consumeSpaces();var t=r.fetch().text;for(t==="\\relax"&&(r.consume(),r.consumeSpaces(),t=r.fetch().text);t==="\\hline"||t==="\\hdashline";)r.consume(),e.push(t==="\\hdashline"),r.consumeSpaces(),t=r.fetch().text;return e}var D1=r=>{var e=r.parser.settings;if(!e.displayMode)throw new wt("{"+r.envName+"} can be used only in display mode.")};function sv(r){if(r.indexOf("ed")===-1)return r.indexOf("*")===-1}function Ol(r,e,t){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:o,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:d}=e;if(r.gullet.beginGroup(),c||r.gullet.macros.set("\\cr","\\\\\\relax"),!s){var f=r.gullet.expandMacroAsText("\\arraystretch");if(f==null)s=1;else if(s=parseFloat(f),!s||s<0)throw new wt("Invalid \\arraystretch: "+f)}r.gullet.beginGroup();var p=[],m=[p],y=[],v=[],_=l!=null?[]:void 0;function S(){l&&r.gullet.macros.set("\\@eqnsw","1",!0)}function A(){_&&(r.gullet.macros.get("\\df@tag")?(_.push(r.subparse([new Ka("\\df@tag")])),r.gullet.macros.set("\\df@tag",void 0,!0)):_.push(!!l&&r.gullet.macros.get("\\@eqnsw")==="1"))}for(S(),v.push(l_(r));;){var C=r.parseExpression(!1,c?"\\end":"\\\\");r.gullet.endGroup(),r.gullet.beginGroup(),C={type:"ordgroup",mode:r.mode,body:C},t&&(C={type:"styling",mode:r.mode,style:t,body:[C]}),p.push(C);var k=r.fetch().text;if(k==="&"){if(h&&p.length===h){if(c||o)throw new wt("Too many tab characters: &",r.nextToken);r.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}r.consume()}else if(k==="\\end"){A(),p.length===1&&C.type==="styling"&&C.body[0].body.length===0&&(m.length>1||!u)&&m.pop(),v.length<m.length+1&&v.push([]);break}else if(k==="\\\\"){r.consume();var M=void 0;r.gullet.future().text!==" "&&(M=r.parseSizeGroup(!0)),y.push(M?M.value:null),A(),v.push(l_(r)),p=[],m.push(p),S()}else throw new wt("Expected & or \\\\ or \\cr or \\end",r.nextToken)}return r.gullet.endGroup(),r.gullet.endGroup(),{type:"array",mode:r.mode,addJot:i,arraystretch:s,body:m,cols:a,rowGaps:y,hskipBeforeAndAfter:n,hLinesBeforeRow:v,colSeparationType:o,tags:_,leqno:d}}function ov(r){return r.slice(0,1)==="d"?"display":"text"}var Hs=function(e,t){var n,i,a=e.body.length,s=e.hLinesBeforeRow,o=0,l=new Array(a),c=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,d=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var f=t.havingStyle(br.SCRIPT).sizeMultiplier;d=.2778*(f/t.sizeMultiplier)}var p=e.colSeparationType==="CD"?Dn({number:3,unit:"ex"},t):12*h,m=3*h,y=e.arraystretch*p,v=.7*y,_=.3*y,S=0;function A(Qe){for(var ut=0;ut<Qe.length;++ut)ut>0&&(S+=.25),c.push({pos:S,isDashed:Qe[ut]})}for(A(s[0]),n=0;n<e.body.length;++n){var C=e.body[n],k=v,M=_;o<C.length&&(o=C.length);var N=new Array(C.length);for(i=0;i<C.length;++i){var F=cn(C[i],t);M<F.depth&&(M=F.depth),k<F.height&&(k=F.height),N[i]=F}var z=e.rowGaps[n],W=0;z&&(W=Dn(z,t),W>0&&(W+=_,M<W&&(M=W),W=0)),e.addJot&&(M+=m),N.height=k,N.depth=M,S+=k,N.pos=S,S+=M+W,l[n]=N,A(s[n+1])}var V=S/2+t.fontMetrics().axisHeight,Q=e.cols||[],K=[],ie,L,J=[];if(e.tags&&e.tags.some(Qe=>Qe))for(n=0;n<a;++n){var X=l[n],re=X.pos-V,D=e.tags[n],se=void 0;D===!0?se=Ge.makeSpan(["eqn-num"],[],t):D===!1?se=Ge.makeSpan([],[],t):se=Ge.makeSpan([],li(D,t,!0),t),se.depth=X.depth,se.height=X.height,J.push({type:"elem",elem:se,shift:re})}for(i=0,L=0;i<o||L<Q.length;++i,++L){for(var ce=Q[L]||{},q=!0;ce.type==="separator";){if(q||(ie=Ge.makeSpan(["arraycolsep"],[]),ie.style.width=Tt(t.fontMetrics().doubleRuleSep),K.push(ie)),ce.separator==="|"||ce.separator===":"){var ae=ce.separator==="|"?"solid":"dashed",fe=Ge.makeSpan(["vertical-separator"],[],t);fe.style.height=Tt(S),fe.style.borderRightWidth=Tt(u),fe.style.borderRightStyle=ae,fe.style.margin="0 "+Tt(-u/2);var xe=S-V;xe&&(fe.style.verticalAlign=Tt(-xe)),K.push(fe)}else throw new wt("Invalid separator type: "+ce.separator);L++,ce=Q[L]||{},q=!1}if(!(i>=o)){var pe=void 0;(i>0||e.hskipBeforeAndAfter)&&(pe=gr.deflt(ce.pregap,d),pe!==0&&(ie=Ge.makeSpan(["arraycolsep"],[]),ie.style.width=Tt(pe),K.push(ie)));var Ce=[];for(n=0;n<a;++n){var Te=l[n],Ae=Te[i];if(Ae){var be=Te.pos-V;Ae.depth=Te.depth,Ae.height=Te.height,Ce.push({type:"elem",elem:Ae,shift:be})}}Ce=Ge.makeVList({positionType:"individualShift",children:Ce},t),Ce=Ge.makeSpan(["col-align-"+(ce.align||"c")],[Ce]),K.push(Ce),(i<o-1||e.hskipBeforeAndAfter)&&(pe=gr.deflt(ce.postgap,d),pe!==0&&(ie=Ge.makeSpan(["arraycolsep"],[]),ie.style.width=Tt(pe),K.push(ie)))}}if(l=Ge.makeSpan(["mtable"],K),c.length>0){for(var Ee=Ge.makeLineSpan("hline",t,u),$e=Ge.makeLineSpan("hdashline",t,u),Ye=[{type:"elem",elem:l,shift:0}];c.length>0;){var He=c.pop(),We=He.pos-V;He.isDashed?Ye.push({type:"elem",elem:$e,shift:We}):Ye.push({type:"elem",elem:Ee,shift:We})}l=Ge.makeVList({positionType:"individualShift",children:Ye},t)}if(J.length===0)return Ge.makeSpan(["mord"],[l],t);var rt=Ge.makeVList({positionType:"individualShift",children:J},t);return rt=Ge.makeSpan(["tag"],[rt],t),Ge.makeFragment([l,rt])},bee={c:"center ",l:"left ",r:"right "},qs=function(e,t){for(var n=[],i=new bt.MathNode("mtd",[],["mtr-glue"]),a=new bt.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var o=e.body[s],l=[],c=0;c<o.length;c++)l.push(new bt.MathNode("mtd",[_n(o[c],t)]));e.tags&&e.tags[s]&&(l.unshift(i),l.push(i),e.leqno?l.unshift(a):l.push(a)),n.push(new bt.MathNode("mtr",l))}var u=new bt.MathNode("mtable",n),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Tt(h));var d="",f="";if(e.cols&&e.cols.length>0){var p=e.cols,m="",y=!1,v=0,_=p.length;p[0].type==="separator"&&(d+="top ",v=1),p[p.length-1].type==="separator"&&(d+="bottom ",_-=1);for(var S=v;S<_;S++)p[S].type==="align"?(f+=bee[p[S].align],y&&(m+="none "),y=!0):p[S].type==="separator"&&y&&(m+=p[S].separator==="|"?"solid ":"dashed ",y=!1);u.setAttribute("columnalign",f.trim()),/[sd]/.test(m)&&u.setAttribute("columnlines",m.trim())}if(e.colSeparationType==="align"){for(var A=e.cols||[],C="",k=1;k<A.length;k++)C+=k%2?"0em ":"1em ";u.setAttribute("columnspacing",C.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var M="",N=e.hLinesBeforeRow;d+=N[0].length>0?"left ":"",d+=N[N.length-1].length>0?"right ":"";for(var F=1;F<N.length-1;F++)M+=N[F].length===0?"none ":N[F][0]?"dashed ":"solid ";return/[sd]/.test(M)&&u.setAttribute("rowlines",M.trim()),d!==""&&(u=new bt.MathNode("menclose",[u]),u.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(u=new bt.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},c_=function(e,t){e.envName.indexOf("ed")===-1&&D1(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",s=Ol(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:sv(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),o,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var u="",h=0;h<t[0].body.length;h++){var d=Ur(t[0].body[h],"textord");u+=d.text}o=Number(u),l=o*2}var f=!l;s.body.forEach(function(v){for(var _=1;_<v.length;_+=2){var S=Ur(v[_],"styling"),A=Ur(S.body[0],"ordgroup");A.body.unshift(c)}if(f)l<v.length&&(l=v.length);else{var C=v.length/2;if(o<C)throw new wt("Too many math in a row: "+("expected "+o+", but got "+C),v[0])}});for(var p=0;p<l;++p){var m="r",y=0;p%2===1?m="l":p>0&&f&&(y=1),n[p]={type:"align",align:m,pregap:y,postgap:0}}return s.colSeparationType=f?"align":"alignat",s};js({type:"array",names:["array","darray"],props:{numArgs:1},handler(r,e){var t=O1(e[0]),n=t?[e[0]]:Ur(e[0],"ordgroup").body,i=n.map(function(s){var o=X3(s),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new wt("Unknown column alignment: "+l,s)}),a={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Ol(r.parser,a,ov(r.envName))},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(r){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[r.envName.replace("*","")],t="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(r.envName.charAt(r.envName.length-1)==="*"){var i=r.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),t=i.fetch().text,"lcr".indexOf(t)===-1)throw new wt("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:t}]}}var a=Ol(r.parser,n,ov(r.envName)),s=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(s).fill({type:"align",align:t}),e?{type:"leftright",mode:r.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(r){var e={arraystretch:.5},t=Ol(r.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["subarray"],props:{numArgs:1},handler(r,e){var t=O1(e[0]),n=t?[e[0]]:Ur(e[0],"ordgroup").body,i=n.map(function(s){var o=X3(s),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new wt("Unknown column alignment: "+l,s)});if(i.length>1)throw new wt("{subarray} can contain only one column");var a={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Ol(r.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new wt("{subarray} can contain only one column");return a},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(r){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=Ol(r.parser,e,ov(r.envName));return{type:"leftright",mode:r.mode,body:[t],left:r.envName.indexOf("r")>-1?".":"\\{",right:r.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:c_,htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(r){gr.contains(["gather","gather*"],r.envName)&&D1(r);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:sv(r.envName),emptySingleRow:!0,leqno:r.parser.settings.leqno};return Ol(r.parser,e,"display")},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:c_,htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(r){D1(r);var e={autoTag:sv(r.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:r.parser.settings.leqno};return Ol(r.parser,e,"display")},htmlBuilder:Hs,mathmlBuilder:qs}),js({type:"array",names:["CD"],props:{numArgs:0},handler(r){return D1(r),nee(r.parser)},htmlBuilder:Hs,mathmlBuilder:qs}),ne("\\nonumber","\\gdef\\@eqnsw{0}"),ne("\\notag","\\nonumber"),Ut({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(r,e){throw new wt(r.funcName+" valid only within array environment")}});var u_=s_;Ut({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];if(i.type!=="ordgroup")throw new wt("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=Ur(i.body[s],"textord").text;if(n==="\\begin"){if(!u_.hasOwnProperty(a))throw new wt("No such environment: "+a,i);var o=u_[a],{args:l,optArgs:c}=t.parseArguments("\\begin{"+a+"}",o),u={mode:t.mode,envName:a,parser:t},h=o.handler(u,l,c);t.expect("\\end",!1);var d=t.nextToken,f=Ur(t.parseFunction(),"environment");if(f.name!==a)throw new wt("Mismatch: \\begin{"+a+"} matched by \\end{"+f.name+"}",d);return h}return{type:"environment",mode:t.mode,name:a,nameGroup:i}}});var h_=(r,e)=>{var t=r.font,n=e.withFont(t);return cn(r.body,n)},d_=(r,e)=>{var t=r.font,n=e.withFont(t);return _n(r.body,n)},f_={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Ut({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=M1(e[0]),a=n;return a in f_&&(a=f_[a]),{type:"font",mode:t.mode,font:a.slice(1),body:i}},htmlBuilder:h_,mathmlBuilder:d_}),Ut({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(r,e)=>{var{parser:t}=r,n=e[0],i=gr.isCharacterBox(n);return{type:"mclass",mode:t.mode,mclass:P1(n),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}}),Ut({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n,breakOnTokenText:i}=r,{mode:a}=t,s=t.parseExpression(!0,i),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:t.mode,body:s}}},htmlBuilder:h_,mathmlBuilder:d_});var g_=(r,e)=>{var t=e;return r==="display"?t=t.id>=br.SCRIPT.id?t.text():br.DISPLAY:r==="text"&&t.size===br.DISPLAY.size?t=br.TEXT:r==="script"?t=br.SCRIPT:r==="scriptscript"&&(t=br.SCRIPTSCRIPT),t},lv=(r,e)=>{var t=g_(r.size,e.style),n=t.fracNum(),i=t.fracDen(),a;a=e.havingStyle(n);var s=cn(r.numer,a,e);if(r.continued){var o=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;s.height=s.height<o?o:s.height,s.depth=s.depth<l?l:s.depth}a=e.havingStyle(i);var c=cn(r.denom,a,e),u,h,d;r.hasBarLine?(r.barSize?(h=Dn(r.barSize,e),u=Ge.makeLineSpan("frac-line",e,h)):u=Ge.makeLineSpan("frac-line",e),h=u.height,d=u.height):(u=null,h=0,d=e.fontMetrics().defaultRuleThickness);var f,p,m;t.size===br.DISPLAY.size||r.size==="display"?(f=e.fontMetrics().num1,h>0?p=3*d:p=7*d,m=e.fontMetrics().denom1):(h>0?(f=e.fontMetrics().num2,p=d):(f=e.fontMetrics().num3,p=3*d),m=e.fontMetrics().denom2);var y;if(u){var _=e.fontMetrics().axisHeight;f-s.depth-(_+.5*h)<p&&(f+=p-(f-s.depth-(_+.5*h))),_-.5*h-(c.height-m)<p&&(m+=p-(_-.5*h-(c.height-m)));var S=-(_-.5*h);y=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:u,shift:S},{type:"elem",elem:s,shift:-f}]},e)}else{var v=f-s.depth-(c.height-m);v<p&&(f+=.5*(p-v),m+=.5*(p-v)),y=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:s,shift:-f}]},e)}a=e.havingStyle(t),y.height*=a.sizeMultiplier/e.sizeMultiplier,y.depth*=a.sizeMultiplier/e.sizeMultiplier;var A;t.size===br.DISPLAY.size?A=e.fontMetrics().delim1:t.size===br.SCRIPTSCRIPT.size?A=e.havingStyle(br.SCRIPT).fontMetrics().delim2:A=e.fontMetrics().delim2;var C,k;return r.leftDelim==null?C=_d(e,["mopen"]):C=Eo.customSizedDelim(r.leftDelim,A,!0,e.havingStyle(t),r.mode,["mopen"]),r.continued?k=Ge.makeSpan([]):r.rightDelim==null?k=_d(e,["mclose"]):k=Eo.customSizedDelim(r.rightDelim,A,!0,e.havingStyle(t),r.mode,["mclose"]),Ge.makeSpan(["mord"].concat(a.sizingClasses(e)),[C,Ge.makeSpan(["mfrac"],[y]),k],e)},cv=(r,e)=>{var t=new bt.MathNode("mfrac",[_n(r.numer,e),_n(r.denom,e)]);if(!r.hasBarLine)t.setAttribute("linethickness","0px");else if(r.barSize){var n=Dn(r.barSize,e);t.setAttribute("linethickness",Tt(n))}var i=g_(r.size,e.style);if(i.size!==e.style.size){t=new bt.MathNode("mstyle",[t]);var a=i.size===br.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",a),t.setAttribute("scriptlevel","0")}if(r.leftDelim!=null||r.rightDelim!=null){var s=[];if(r.leftDelim!=null){var o=new bt.MathNode("mo",[new bt.TextNode(r.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),s.push(o)}if(s.push(t),r.rightDelim!=null){var l=new bt.MathNode("mo",[new bt.TextNode(r.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),s.push(l)}return $3(s)}return t};Ut({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],a=e[1],s,o=null,l=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,o="(",l=")";break;case"\\\\bracefrac":s=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":s=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:i,denom:a,hasBarLine:s,leftDelim:o,rightDelim:l,size:c,barSize:null}},htmlBuilder:lv,mathmlBuilder:cv}),Ut({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],a=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),Ut({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(r){var{parser:e,funcName:t,token:n}=r,i;switch(t){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var p_=["display","text","script","scriptscript"],m_=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};Ut({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(r,e){var{parser:t}=r,n=e[4],i=e[5],a=M1(e[0]),s=a.type==="atom"&&a.family==="open"?m_(a.text):null,o=M1(e[1]),l=o.type==="atom"&&o.family==="close"?m_(o.text):null,c=Ur(e[2],"size"),u,h=null;c.isBlank?u=!0:(h=c.value,u=h.number>0);var d="auto",f=e[3];if(f.type==="ordgroup"){if(f.body.length>0){var p=Ur(f.body[0],"textord");d=p_[Number(p.text)]}}else f=Ur(f,"textord"),d=p_[Number(f.text)];return{type:"genfrac",mode:t.mode,numer:n,denom:i,continued:!1,hasBarLine:u,barSize:h,leftDelim:s,rightDelim:l,size:d}},htmlBuilder:lv,mathmlBuilder:cv}),Ut({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(r,e){var{parser:t,funcName:n,token:i}=r;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:Ur(e[0],"size").value,token:i}}}),Ut({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],a=VJ(Ur(e[1],"infix").size),s=e[2],o=a.number>0;return{type:"genfrac",mode:t.mode,numer:i,denom:s,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:lv,mathmlBuilder:cv});var b_=(r,e)=>{var t=e.style,n,i;r.type==="supsub"?(n=r.sup?cn(r.sup,e.havingStyle(t.sup()),e):cn(r.sub,e.havingStyle(t.sub()),e),i=Ur(r.base,"horizBrace")):i=Ur(r,"horizBrace");var a=cn(i.base,e.havingBaseStyle(br.DISPLAY)),s=Co.svgSpan(i,e),o;if(i.isOver?(o=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),o.children[0].children[0].children[1].classes.push("svg-align")):(o=Ge.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),o.children[0].children[0].children[0].classes.push("svg-align")),n){var l=Ge.makeSpan(["mord",i.isOver?"mover":"munder"],[o],e);i.isOver?o=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},e):o=Ge.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Ge.makeSpan(["mord",i.isOver?"mover":"munder"],[o],e)},vee=(r,e)=>{var t=Co.mathMLnode(r.label);return new bt.MathNode(r.isOver?"mover":"munder",[_n(r.base,e),t])};Ut({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r;return{type:"horizBrace",mode:t.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:b_,mathmlBuilder:vee}),Ut({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[1],i=Ur(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:t.mode,href:i,body:Wn(n)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(r,e)=>{var t=li(r.body,e,!1);return Ge.makeAnchor(r.href,[],t,e)},mathmlBuilder:(r,e)=>{var t=Il(r.body,e);return t instanceof Ta||(t=new Ta("mrow",[t])),t.setAttribute("href",r.href),t}}),Ut({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=Ur(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))return t.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var o={type:"text",mode:t.mode,font:"\\texttt",body:i};return{type:"href",mode:t.mode,href:n,body:Wn(o)}}}),Ut({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(r,e){var{parser:t}=r;return{type:"hbox",mode:t.mode,body:Wn(e[0])}},htmlBuilder(r,e){var t=li(r.body,e,!1);return Ge.makeFragment(t)},mathmlBuilder(r,e){return new bt.MathNode("mrow",da(r.body,e))}}),Ut({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n,token:i}=r,a=Ur(e[0],"raw").string,s=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(n){case"\\htmlClass":l.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var c=a.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length!==2)throw new wt("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(o)?{type:"html",mode:t.mode,attributes:l,body:Wn(s)}:t.formatUnsupportedCmd(n)},htmlBuilder:(r,e)=>{var t=li(r.body,e,!1),n=["enclosing"];r.attributes.class&&n.push(...r.attributes.class.trim().split(/\s+/));var i=Ge.makeSpan(n,t,e);for(var a in r.attributes)a!=="class"&&r.attributes.hasOwnProperty(a)&&i.setAttribute(a,r.attributes[a]);return i},mathmlBuilder:(r,e)=>Il(r.body,e)}),Ut({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r;return{type:"htmlmathml",mode:t.mode,html:Wn(e[0]),mathml:Wn(e[1])}},htmlBuilder:(r,e)=>{var t=li(r.html,e,!1);return Ge.makeFragment(t)},mathmlBuilder:(r,e)=>Il(r.mathml,e)});var uv=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new wt("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!yx(n))throw new wt("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Ut({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(r,e,t)=>{var{parser:n}=r,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},o="";if(t[0])for(var l=Ur(t[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length===2){var d=h[1].trim();switch(h[0].trim()){case"alt":o=d;break;case"width":i=uv(d);break;case"height":a=uv(d);break;case"totalheight":s=uv(d);break;default:throw new wt("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=Ur(e[0],"url").url;return o===""&&(o=f,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:n.mode,alt:o,width:i,height:a,totalheight:s,src:f}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(r,e)=>{var t=Dn(r.height,e),n=0;r.totalheight.number>0&&(n=Dn(r.totalheight,e)-t);var i=0;r.width.number>0&&(i=Dn(r.width,e));var a={height:Tt(t+n)};i>0&&(a.width=Tt(i)),n>0&&(a.verticalAlign=Tt(-n));var s=new vZ(r.src,r.alt,a);return s.height=t,s.depth=n,s},mathmlBuilder:(r,e)=>{var t=new bt.MathNode("mglyph",[]);t.setAttribute("alt",r.alt);var n=Dn(r.height,e),i=0;if(r.totalheight.number>0&&(i=Dn(r.totalheight,e)-n,t.setAttribute("valign",Tt(-i))),t.setAttribute("height",Tt(n+i)),r.width.number>0){var a=Dn(r.width,e);t.setAttribute("width",Tt(a))}return t.setAttribute("src",r.src),t}}),Ut({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(r,e){var{parser:t,funcName:n}=r,i=Ur(e[0],"size");if(t.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:i.value}},htmlBuilder(r,e){return Ge.makeGlue(r.dimension,e)},mathmlBuilder(r,e){var t=Dn(r.dimension,e);return new bt.SpaceNode(t)}}),Ut({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"lap",mode:t.mode,alignment:n.slice(5),body:i}},htmlBuilder:(r,e)=>{var t;r.alignment==="clap"?(t=Ge.makeSpan([],[cn(r.body,e)]),t=Ge.makeSpan(["inner"],[t],e)):t=Ge.makeSpan(["inner"],[cn(r.body,e)]);var n=Ge.makeSpan(["fix"],[]),i=Ge.makeSpan([r.alignment],[t,n],e),a=Ge.makeSpan(["strut"]);return a.style.height=Tt(i.height+i.depth),i.depth&&(a.style.verticalAlign=Tt(-i.depth)),i.children.unshift(a),i=Ge.makeSpan(["thinbox"],[i],e),Ge.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(r,e)=>{var t=new bt.MathNode("mpadded",[_n(r.body,e)]);if(r.alignment!=="rlap"){var n=r.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",n+"width")}return t.setAttribute("width","0px"),t}}),Ut({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(r,e){var{funcName:t,parser:n}=r,i=n.mode;n.switchMode("math");var a=t==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}}),Ut({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(r,e){throw new wt("Mismatched "+r.funcName)}});var v_=(r,e)=>{switch(e.style.size){case br.DISPLAY.size:return r.display;case br.TEXT.size:return r.text;case br.SCRIPT.size:return r.script;case br.SCRIPTSCRIPT.size:return r.scriptscript;default:return r.text}};Ut({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(r,e)=>{var{parser:t}=r;return{type:"mathchoice",mode:t.mode,display:Wn(e[0]),text:Wn(e[1]),script:Wn(e[2]),scriptscript:Wn(e[3])}},htmlBuilder:(r,e)=>{var t=v_(r,e),n=li(t,e,!1);return Ge.makeFragment(n)},mathmlBuilder:(r,e)=>{var t=v_(r,e);return Il(t,e)}});var y_=(r,e,t,n,i,a,s)=>{r=Ge.makeSpan([],[r]);var o=t&&gr.isCharacterBox(t),l,c;if(e){var u=cn(e,n.havingStyle(i.sup()),n);c={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(t){var h=cn(t,n.havingStyle(i.sub()),n);l={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}var d;if(c&&l){var f=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+r.depth+s;d=Ge.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Tt(-a)},{type:"kern",size:l.kern},{type:"elem",elem:r},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Tt(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var p=r.height-s;d=Ge.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Tt(-a)},{type:"kern",size:l.kern},{type:"elem",elem:r}]},n)}else if(c){var m=r.depth+s;d=Ge.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:r},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Tt(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return r;var y=[d];if(l&&a!==0&&!o){var v=Ge.makeSpan(["mspace"],[],n);v.style.marginRight=Tt(a),y.unshift(v)}return Ge.makeSpan(["mop","op-limits"],y,n)},w_=["\\smallint"],Lu=(r,e)=>{var t,n,i=!1,a;r.type==="supsub"?(t=r.sup,n=r.sub,a=Ur(r.base,"op"),i=!0):a=Ur(r,"op");var s=e.style,o=!1;s.size===br.DISPLAY.size&&a.symbol&&!gr.contains(w_,a.name)&&(o=!0);var l;if(a.symbol){var c=o?"Size2-Regular":"Size1-Regular",u="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(u=a.name.slice(1),a.name=u==="oiint"?"\\iint":"\\iiint"),l=Ge.makeSymbol(a.name,c,"math",e,["mop","op-symbol",o?"large-op":"small-op"]),u.length>0){var h=l.italic,d=Ge.staticSvg(u+"Size"+(o?"2":"1"),e);l=Ge.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:d,shift:o?.08:0}]},e),a.name="\\"+u,l.classes.unshift("mop"),l.italic=h}}else if(a.body){var f=li(a.body,e,!0);f.length===1&&f[0]instanceof Qa?(l=f[0],l.classes[0]="mop"):l=Ge.makeSpan(["mop"],f,e)}else{for(var p=[],m=1;m<a.name.length;m++)p.push(Ge.mathsym(a.name[m],a.mode,e));l=Ge.makeSpan(["mop"],p,e)}var y=0,v=0;return(l instanceof Qa||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(y=(l.height-l.depth)/2-e.fontMetrics().axisHeight,v=l.italic),i?y_(l,t,n,e,s,v,y):(y&&(l.style.position="relative",l.style.top=Tt(y)),l)},Ad=(r,e)=>{var t;if(r.symbol)t=new Ta("mo",[Ja(r.name,r.mode)]),gr.contains(w_,r.name)&&t.setAttribute("largeop","false");else if(r.body)t=new Ta("mo",da(r.body,e));else{t=new Ta("mi",[new Us(r.name.slice(1))]);var n=new Ta("mo",[Ja("â¡","text")]);r.parentIsSupSub?t=new Ta("mrow",[t,n]):t=Lx([t,n])}return t},yee={"â":"\\prod","â":"\\coprod","â":"\\sum","â":"\\bigwedge","â":"\\bigvee","â":"\\bigcap","â":"\\bigcup","â¨":"\\bigodot","â¨":"\\bigoplus","â¨":"\\bigotimes","â¨":"\\biguplus","â¨":"\\bigsqcup"};Ut({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","â","â","â","â","â","â","â","â¨","â¨","â¨","â¨","â¨"],props:{numArgs:0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=n;return i.length===1&&(i=yee[i]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Lu,mathmlBuilder:Ad}),Ut({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Wn(n)}},htmlBuilder:Lu,mathmlBuilder:Ad});var wee={"â«":"\\int","â¬":"\\iint","â­":"\\iiint","â®":"\\oint","â¯":"\\oiint","â°":"\\oiiint"};Ut({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Lu,mathmlBuilder:Ad}),Ut({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Lu,mathmlBuilder:Ad}),Ut({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","â«","â¬","â­","â®","â¯","â°"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r,n=t;return n.length===1&&(n=wee[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Lu,mathmlBuilder:Ad});var x_=(r,e)=>{var t,n,i=!1,a;r.type==="supsub"?(t=r.sup,n=r.sub,a=Ur(r.base,"operatorname"),i=!0):a=Ur(r,"operatorname");var s;if(a.body.length>0){for(var o=a.body.map(h=>{var d=h.text;return typeof d=="string"?{type:"textord",mode:h.mode,text:d}:h}),l=li(o,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Qa&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Ge.makeSpan(["mop"],l,e)}else s=Ge.makeSpan(["mop"],[],e);return i?y_(s,t,n,e,e.style,0,0):s},xee=(r,e)=>{for(var t=da(r.body,e.withFont("mathrm")),n=!0,i=0;i<t.length;i++){var a=t[i];if(!(a instanceof bt.SpaceNode))if(a instanceof bt.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof bt.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=t.map(u=>u.toText()).join("");t=[new bt.TextNode(o)]}var l=new bt.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new bt.MathNode("mo",[Ja("â¡","text")]);return r.parentIsSupSub?new bt.MathNode("mrow",[l,c]):bt.newDocumentFragment([l,c])};Ut({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"operatorname",mode:t.mode,body:Wn(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:x_,mathmlBuilder:xee}),ne("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Sc({type:"ordgroup",htmlBuilder(r,e){return r.semisimple?Ge.makeFragment(li(r.body,e,!1)):Ge.makeSpan(["mord"],li(r.body,e,!0),e)},mathmlBuilder(r,e){return Il(r.body,e,!0)}}),Ut({type:"overline",names:["\\overline"],props:{numArgs:1},handler(r,e){var{parser:t}=r,n=e[0];return{type:"overline",mode:t.mode,body:n}},htmlBuilder(r,e){var t=cn(r.body,e.havingCrampedStyle()),n=Ge.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return Ge.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(r,e){var t=new bt.MathNode("mo",[new bt.TextNode("â¾")]);t.setAttribute("stretchy","true");var n=new bt.MathNode("mover",[_n(r.body,e),t]);return n.setAttribute("accent","true"),n}}),Ut({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"phantom",mode:t.mode,body:Wn(n)}},htmlBuilder:(r,e)=>{var t=li(r.body,e.withPhantom(),!1);return Ge.makeFragment(t)},mathmlBuilder:(r,e)=>{var t=da(r.body,e);return new bt.MathNode("mphantom",t)}}),Ut({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"hphantom",mode:t.mode,body:n}},htmlBuilder:(r,e)=>{var t=Ge.makeSpan([],[cn(r.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var n=0;n<t.children.length;n++)t.children[n].height=0,t.children[n].depth=0;return t=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),Ge.makeSpan(["mord"],[t],e)},mathmlBuilder:(r,e)=>{var t=da(Wn(r.body),e),n=new bt.MathNode("mphantom",t),i=new bt.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),Ut({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"vphantom",mode:t.mode,body:n}},htmlBuilder:(r,e)=>{var t=Ge.makeSpan(["inner"],[cn(r.body,e.withPhantom())]),n=Ge.makeSpan(["fix"],[]);return Ge.makeSpan(["mord","rlap"],[t,n],e)},mathmlBuilder:(r,e)=>{var t=da(Wn(r.body),e),n=new bt.MathNode("mphantom",t),i=new bt.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}}),Ut({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(r,e){var{parser:t}=r,n=Ur(e[0],"size").value,i=e[1];return{type:"raisebox",mode:t.mode,dy:n,body:i}},htmlBuilder(r,e){var t=cn(r.body,e),n=Dn(r.dy,e);return Ge.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(r,e){var t=new bt.MathNode("mpadded",[_n(r.body,e)]),n=r.dy.number+r.dy.unit;return t.setAttribute("voffset",n),t}}),Ut({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(r){var{parser:e}=r;return{type:"internal",mode:e.mode}}}),Ut({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(r,e,t){var{parser:n}=r,i=t[0],a=Ur(e[0],"size"),s=Ur(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&Ur(i,"size").value,width:a.value,height:s.value}},htmlBuilder(r,e){var t=Ge.makeSpan(["mord","rule"],[],e),n=Dn(r.width,e),i=Dn(r.height,e),a=r.shift?Dn(r.shift,e):0;return t.style.borderRightWidth=Tt(n),t.style.borderTopWidth=Tt(i),t.style.bottom=Tt(a),t.width=n,t.height=i+a,t.depth=-a,t.maxFontSize=i*1.125*e.sizeMultiplier,t},mathmlBuilder(r,e){var t=Dn(r.width,e),n=Dn(r.height,e),i=r.shift?Dn(r.shift,e):0,a=e.color&&e.getColor()||"black",s=new bt.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",Tt(t)),s.setAttribute("height",Tt(n));var o=new bt.MathNode("mpadded",[s]);return i>=0?o.setAttribute("height",Tt(i)):(o.setAttribute("height",Tt(i)),o.setAttribute("depth",Tt(-i))),o.setAttribute("voffset",Tt(i)),o}});function __(r,e,t){for(var n=li(r,e,!1),i=e.sizeMultiplier/t.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(t)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+t.size),n[a].height*=i,n[a].depth*=i}return Ge.makeFragment(n)}var S_=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],_ee=(r,e)=>{var t=e.havingSize(r.size);return __(r.body,t,e)};Ut({type:"sizing",names:S_,props:{numArgs:0,allowedInText:!0},handler:(r,e)=>{var{breakOnTokenText:t,funcName:n,parser:i}=r,a=i.parseExpression(!1,t);return{type:"sizing",mode:i.mode,size:S_.indexOf(n)+1,body:a}},htmlBuilder:_ee,mathmlBuilder:(r,e)=>{var t=e.havingSize(r.size),n=da(r.body,t),i=new bt.MathNode("mstyle",n);return i.setAttribute("mathsize",Tt(t.sizeMultiplier)),i}}),Ut({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(r,e,t)=>{var{parser:n}=r,i=!1,a=!1,s=t[0]&&Ur(t[0],"ordgroup");if(s)for(var o="",l=0;l<s.body.length;++l){var c=s.body[l];if(o=c.text,o==="t")i=!0;else if(o==="b")a=!0;else{i=!1,a=!1;break}}else i=!0,a=!0;var u=e[0];return{type:"smash",mode:n.mode,body:u,smashHeight:i,smashDepth:a}},htmlBuilder:(r,e)=>{var t=Ge.makeSpan([],[cn(r.body,e)]);if(!r.smashHeight&&!r.smashDepth)return t;if(r.smashHeight&&(t.height=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].height=0;if(r.smashDepth&&(t.depth=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].depth=0;var a=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return Ge.makeSpan(["mord"],[a],e)},mathmlBuilder:(r,e)=>{var t=new bt.MathNode("mpadded",[_n(r.body,e)]);return r.smashHeight&&t.setAttribute("height","0px"),r.smashDepth&&t.setAttribute("depth","0px"),t}}),Ut({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(r,e,t){var{parser:n}=r,i=t[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(r,e){var t=cn(r.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=Ge.wrapFragment(t,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,a=i;e.style.id<br.TEXT.id&&(a=e.fontMetrics().xHeight);var s=i+a/4,o=t.height+t.depth+s+i,{span:l,ruleWidth:c,advanceWidth:u}=Eo.sqrtImage(o,e),h=l.height-c;h>t.height+t.depth+s&&(s=(s+h-t.height-t.depth)/2);var d=l.height-t.height-s-c;t.style.paddingLeft=Tt(u);var f=Ge.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+d)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(r.index){var p=e.havingStyle(br.SCRIPTSCRIPT),m=cn(r.index,p,e),y=.6*(f.height-f.depth),v=Ge.makeVList({positionType:"shift",positionData:-y,children:[{type:"elem",elem:m}]},e),_=Ge.makeSpan(["root"],[v]);return Ge.makeSpan(["mord","sqrt"],[_,f],e)}else return Ge.makeSpan(["mord","sqrt"],[f],e)},mathmlBuilder(r,e){var{body:t,index:n}=r;return n?new bt.MathNode("mroot",[_n(t,e),_n(n,e)]):new bt.MathNode("msqrt",[_n(t,e)])}});var k_={display:br.DISPLAY,text:br.TEXT,script:br.SCRIPT,scriptscript:br.SCRIPTSCRIPT};Ut({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r,e){var{breakOnTokenText:t,funcName:n,parser:i}=r,a=i.parseExpression(!0,t),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(r,e){var t=k_[r.style],n=e.havingStyle(t).withFont("");return __(r.body,n,e)},mathmlBuilder(r,e){var t=k_[r.style],n=e.havingStyle(t),i=da(r.body,n),a=new bt.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=s[r.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var See=function(e,t){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(t.style.size===br.DISPLAY.size||n.alwaysHandleSupSub);return i?Lu:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(t.style.size===br.DISPLAY.size||n.limits);return a?x_:null}else{if(n.type==="accent")return gr.isCharacterBox(n.base)?K3:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?b_:null}else return null}else return null};Sc({type:"supsub",htmlBuilder(r,e){var t=See(r,e);if(t)return t(r,e);var{base:n,sup:i,sub:a}=r,s=cn(n,e),o,l,c=e.fontMetrics(),u=0,h=0,d=n&&gr.isCharacterBox(n);if(i){var f=e.havingStyle(e.style.sup());o=cn(i,f,e),d||(u=s.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(a){var p=e.havingStyle(e.style.sub());l=cn(a,p,e),d||(h=s.depth+p.fontMetrics().subDrop*p.sizeMultiplier/e.sizeMultiplier)}var m;e.style===br.DISPLAY?m=c.sup1:e.style.cramped?m=c.sup3:m=c.sup2;var y=e.sizeMultiplier,v=Tt(.5/c.ptPerEm/y),_=null;if(l){var S=r.base&&r.base.type==="op"&&r.base.name&&(r.base.name==="\\oiint"||r.base.name==="\\oiiint");(s instanceof Qa||S)&&(_=Tt(-s.italic))}var A;if(o&&l){u=Math.max(u,m,o.depth+.25*c.xHeight),h=Math.max(h,c.sub2);var C=c.defaultRuleThickness,k=4*C;if(u-o.depth-(l.height-h)<k){h=k-(u-o.depth)+l.height;var M=.8*c.xHeight-(u-o.depth);M>0&&(u+=M,h-=M)}var N=[{type:"elem",elem:l,shift:h,marginRight:v,marginLeft:_},{type:"elem",elem:o,shift:-u,marginRight:v}];A=Ge.makeVList({positionType:"individualShift",children:N},e)}else if(l){h=Math.max(h,c.sub1,l.height-.8*c.xHeight);var F=[{type:"elem",elem:l,marginLeft:_,marginRight:v}];A=Ge.makeVList({positionType:"shift",positionData:h,children:F},e)}else if(o)u=Math.max(u,m,o.depth+.25*c.xHeight),A=Ge.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:o,marginRight:v}]},e);else throw new Error("supsub must have either sup or sub.");var z=q3(s,"right")||"mord";return Ge.makeSpan([z],[s,Ge.makeSpan(["msupsub"],[A])],e)},mathmlBuilder(r,e){var t=!1,n,i;r.base&&r.base.type==="horizBrace"&&(i=!!r.sup,i===r.base.isOver&&(t=!0,n=r.base.isOver)),r.base&&(r.base.type==="op"||r.base.type==="operatorname")&&(r.base.parentIsSupSub=!0);var a=[_n(r.base,e)];r.sub&&a.push(_n(r.sub,e)),r.sup&&a.push(_n(r.sup,e));var s;if(t)s=n?"mover":"munder";else if(r.sub)if(r.sup){var c=r.base;c&&c.type==="op"&&c.limits&&e.style===br.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===br.DISPLAY||c.limits)?s="munderover":s="msubsup"}else{var l=r.base;l&&l.type==="op"&&l.limits&&(e.style===br.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===br.DISPLAY)?s="munder":s="msub"}else{var o=r.base;o&&o.type==="op"&&o.limits&&(e.style===br.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===br.DISPLAY)?s="mover":s="msup"}return new bt.MathNode(s,a)}}),Sc({type:"atom",htmlBuilder(r,e){return Ge.mathsym(r.text,r.mode,e,["m"+r.family])},mathmlBuilder(r,e){var t=new bt.MathNode("mo",[Ja(r.text,r.mode)]);if(r.family==="bin"){var n=W3(r,e);n==="bold-italic"&&t.setAttribute("mathvariant",n)}else r.family==="punct"?t.setAttribute("separator","true"):(r.family==="open"||r.family==="close")&&t.setAttribute("stretchy","false");return t}});var A_={mi:"italic",mn:"normal",mtext:"normal"};Sc({type:"mathord",htmlBuilder(r,e){return Ge.makeOrd(r,e,"mathord")},mathmlBuilder(r,e){var t=new bt.MathNode("mi",[Ja(r.text,r.mode,e)]),n=W3(r,e)||"italic";return n!==A_[t.type]&&t.setAttribute("mathvariant",n),t}}),Sc({type:"textord",htmlBuilder(r,e){return Ge.makeOrd(r,e,"textord")},mathmlBuilder(r,e){var t=Ja(r.text,r.mode,e),n=W3(r,e)||"normal",i;return r.mode==="text"?i=new bt.MathNode("mtext",[t]):/[0-9]/.test(r.text)?i=new bt.MathNode("mn",[t]):r.text==="\\prime"?i=new bt.MathNode("mo",[t]):i=new bt.MathNode("mi",[t]),n!==A_[i.type]&&i.setAttribute("mathvariant",n),i}});var hv={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},dv={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Sc({type:"spacing",htmlBuilder(r,e){if(dv.hasOwnProperty(r.text)){var t=dv[r.text].className||"";if(r.mode==="text"){var n=Ge.makeOrd(r,e,"textord");return n.classes.push(t),n}else return Ge.makeSpan(["mspace",t],[Ge.mathsym(r.text,r.mode,e)],e)}else{if(hv.hasOwnProperty(r.text))return Ge.makeSpan(["mspace",hv[r.text]],[],e);throw new wt('Unknown type of space "'+r.text+'"')}},mathmlBuilder(r,e){var t;if(dv.hasOwnProperty(r.text))t=new bt.MathNode("mtext",[new bt.TextNode("Â ")]);else{if(hv.hasOwnProperty(r.text))return new bt.MathNode("mspace");throw new wt('Unknown type of space "'+r.text+'"')}return t}});var C_=()=>{var r=new bt.MathNode("mtd",[]);return r.setAttribute("width","50%"),r};Sc({type:"tag",mathmlBuilder(r,e){var t=new bt.MathNode("mtable",[new bt.MathNode("mtr",[C_(),new bt.MathNode("mtd",[Il(r.body,e)]),C_(),new bt.MathNode("mtd",[Il(r.tag,e)])])]);return t.setAttribute("width","100%"),t}});var E_={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},T_={"\\textbf":"textbf","\\textmd":"textmd"},kee={"\\textit":"textit","\\textup":"textup"},M_=(r,e)=>{var t=r.font;if(t){if(E_[t])return e.withTextFontFamily(E_[t]);if(T_[t])return e.withTextFontWeight(T_[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(kee[t])};Ut({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"text",mode:t.mode,body:Wn(i),font:n}},htmlBuilder(r,e){var t=M_(r,e),n=li(r.body,t,!0);return Ge.makeSpan(["mord","text"],n,t)},mathmlBuilder(r,e){var t=M_(r,e);return Il(r.body,t)}}),Ut({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(r,e){var t=cn(r.body,e),n=Ge.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Ge.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:t}]},e);return Ge.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(r,e){var t=new bt.MathNode("mo",[new bt.TextNode("â¾")]);t.setAttribute("stretchy","true");var n=new bt.MathNode("munder",[_n(r.body,e),t]);return n.setAttribute("accentunder","true"),n}}),Ut({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(r,e){var{parser:t}=r;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(r,e){var t=cn(r.body,e),n=e.fontMetrics().axisHeight,i=.5*(t.height-n-(t.depth+n));return Ge.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(r,e){return new bt.MathNode("mpadded",[_n(r.body,e)],["vcenter"])}}),Ut({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(r,e,t){throw new wt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(r,e){for(var t=I_(r),n=[],i=e.havingStyle(e.style.text()),a=0;a<t.length;a++){var s=t[a];s==="~"&&(s="\\textasciitilde"),n.push(Ge.makeSymbol(s,"Typewriter-Regular",r.mode,i,["mord","texttt"]))}return Ge.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Ge.tryCombineChars(n),i)},mathmlBuilder(r,e){var t=new bt.TextNode(I_(r)),n=new bt.MathNode("mtext",[t]);return n.setAttribute("mathvariant","monospace"),n}});var I_=r=>r.body.replace(/ /g,r.star?"â£":"Â "),Nl=Rx,O_=`[ \r
	]`,Aee="\\\\[a-zA-Z@]+",Cee="\\\\[^\uD800-\uDFFF]",Eee="("+Aee+")"+O_+"*",Tee=`\\\\(
|[ \r	]+
?)[ \r	]*`,fv="[Ì-Í¯]",Mee=new RegExp(fv+"+$"),Iee="("+O_+"+)|"+(Tee+"|")+"([!-\\[\\]-â§âª-í¿ï¤-ï¿¿]"+(fv+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(fv+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Eee)+("|"+Cee+")");class N_{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Iee,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Ka("EOF",new Ca(this,t,t));var n=this.tokenRegex.exec(e);if(n===null||n.index!==t)throw new wt("Unexpected character: '"+e[t]+"'",new Ka(e[t],new Ca(this,t,t+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Ka(i,new Ca(this,t,this.tokenRegex.lastIndex))}}class Oee{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new wt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var Nee=o_;ne("\\noexpand",function(r){var e=r.popToken();return r.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}}),ne("\\expandafter",function(r){var e=r.popToken();return r.expandOnce(!0),{tokens:[e],numArgs:0}}),ne("\\@firstoftwo",function(r){var e=r.consumeArgs(2);return{tokens:e[0],numArgs:0}}),ne("\\@secondoftwo",function(r){var e=r.consumeArgs(2);return{tokens:e[1],numArgs:0}}),ne("\\@ifnextchar",function(r){var e=r.consumeArgs(3);r.consumeSpaces();var t=r.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}}),ne("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),ne("\\TextOrMath",function(r){var e=r.consumeArgs(2);return r.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var P_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};ne("\\char",function(r){var e=r.popToken(),t,n="";if(e.text==="'")t=8,e=r.popToken();else if(e.text==='"')t=16,e=r.popToken();else if(e.text==="`")if(e=r.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new wt("\\char` missing argument");n=e.text.charCodeAt(0)}else t=10;if(t){if(n=P_[e.text],n==null||n>=t)throw new wt("Invalid base-"+t+" digit "+e.text);for(var i;(i=P_[r.future().text])!=null&&i<t;)n*=t,n+=i,r.popToken()}return"\\@char{"+n+"}"});var gv=(r,e,t,n)=>{var i=r.consumeArg().tokens;if(i.length!==1)throw new wt("\\newcommand's first argument must be a macro name");var a=i[0].text,s=r.isDefined(a);if(s&&!e)throw new wt("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!s&&!t)throw new wt("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(i=r.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var l="",c=r.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=r.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new wt("Invalid number of arguments: "+l);o=parseInt(l),i=r.consumeArg().tokens}return s&&n||r.macros.set(a,{tokens:i,numArgs:o}),""};ne("\\newcommand",r=>gv(r,!1,!0,!1)),ne("\\renewcommand",r=>gv(r,!0,!1,!1)),ne("\\providecommand",r=>gv(r,!0,!0,!0)),ne("\\message",r=>{var e=r.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""}),ne("\\errmessage",r=>{var e=r.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""}),ne("\\show",r=>{var e=r.popToken(),t=e.text;return console.log(e,r.macros.get(t),Nl[t],Sn.math[t],Sn.text[t]),""}),ne("\\bgroup","{"),ne("\\egroup","}"),ne("~","\\nobreakspace"),ne("\\lq","`"),ne("\\rq","'"),ne("\\aa","\\r a"),ne("\\AA","\\r A"),ne("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`Â©}"),ne("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),ne("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`Â®}"),ne("â¬","\\mathscr{B}"),ne("â°","\\mathscr{E}"),ne("â±","\\mathscr{F}"),ne("â","\\mathscr{H}"),ne("â","\\mathscr{I}"),ne("â","\\mathscr{L}"),ne("â³","\\mathscr{M}"),ne("â","\\mathscr{R}"),ne("â­","\\mathfrak{C}"),ne("â","\\mathfrak{H}"),ne("â¨","\\mathfrak{Z}"),ne("\\Bbbk","\\Bbb{k}"),ne("Â·","\\cdotp"),ne("\\llap","\\mathllap{\\textrm{#1}}"),ne("\\rlap","\\mathrlap{\\textrm{#1}}"),ne("\\clap","\\mathclap{\\textrm{#1}}"),ne("\\mathstrut","\\vphantom{(}"),ne("\\underbar","\\underline{\\text{#1}}"),ne("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),ne("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`â }}"),ne("\\ne","\\neq"),ne("â ","\\neq"),ne("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`â}}"),ne("â","\\notin"),ne("â","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`â}}"),ne("â","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`â}}"),ne("â","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`â}}"),ne("â","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`â}}"),ne("â","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`â}}"),ne("â","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`â}}"),ne("â","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`â}}"),ne("â","\\perp"),ne("â¼","\\mathclose{!\\mkern-0.8mu!}"),ne("â","\\notni"),ne("â","\\ulcorner"),ne("â","\\urcorner"),ne("â","\\llcorner"),ne("â","\\lrcorner"),ne("Â©","\\copyright"),ne("Â®","\\textregistered"),ne("ï¸","\\textregistered"),ne("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),ne("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),ne("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),ne("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),ne("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),ne("â®","\\vdots"),ne("\\varGamma","\\mathit{\\Gamma}"),ne("\\varDelta","\\mathit{\\Delta}"),ne("\\varTheta","\\mathit{\\Theta}"),ne("\\varLambda","\\mathit{\\Lambda}"),ne("\\varXi","\\mathit{\\Xi}"),ne("\\varPi","\\mathit{\\Pi}"),ne("\\varSigma","\\mathit{\\Sigma}"),ne("\\varUpsilon","\\mathit{\\Upsilon}"),ne("\\varPhi","\\mathit{\\Phi}"),ne("\\varPsi","\\mathit{\\Psi}"),ne("\\varOmega","\\mathit{\\Omega}"),ne("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),ne("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),ne("\\boxed","\\fbox{$\\displaystyle{#1}$}"),ne("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),ne("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),ne("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),ne("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),ne("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var R_={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};ne("\\dots",function(r){var e="\\dotso",t=r.expandAfterFuture().text;return t in R_?e=R_[t]:(t.slice(0,4)==="\\not"||t in Sn.math&&gr.contains(["bin","rel"],Sn.math[t].group))&&(e="\\dotsb"),e});var pv={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};ne("\\dotso",function(r){var e=r.future().text;return e in pv?"\\ldots\\,":"\\ldots"}),ne("\\dotsc",function(r){var e=r.future().text;return e in pv&&e!==","?"\\ldots\\,":"\\ldots"}),ne("\\cdots",function(r){var e=r.future().text;return e in pv?"\\@cdots\\,":"\\@cdots"}),ne("\\dotsb","\\cdots"),ne("\\dotsm","\\cdots"),ne("\\dotsi","\\!\\cdots"),ne("\\dotsx","\\ldots\\,"),ne("\\DOTSI","\\relax"),ne("\\DOTSB","\\relax"),ne("\\DOTSX","\\relax"),ne("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),ne("\\,","\\tmspace+{3mu}{.1667em}"),ne("\\thinspace","\\,"),ne("\\>","\\mskip{4mu}"),ne("\\:","\\tmspace+{4mu}{.2222em}"),ne("\\medspace","\\:"),ne("\\;","\\tmspace+{5mu}{.2777em}"),ne("\\thickspace","\\;"),ne("\\!","\\tmspace-{3mu}{.1667em}"),ne("\\negthinspace","\\!"),ne("\\negmedspace","\\tmspace-{4mu}{.2222em}"),ne("\\negthickspace","\\tmspace-{5mu}{.277em}"),ne("\\enspace","\\kern.5em "),ne("\\enskip","\\hskip.5em\\relax"),ne("\\quad","\\hskip1em\\relax"),ne("\\qquad","\\hskip2em\\relax"),ne("\\tag","\\@ifstar\\tag@literal\\tag@paren"),ne("\\tag@paren","\\tag@literal{({#1})}"),ne("\\tag@literal",r=>{if(r.macros.get("\\df@tag"))throw new wt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),ne("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),ne("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),ne("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),ne("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),ne("\\newline","\\\\\\relax"),ne("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var F_=Tt(zs["Main-Regular"][84][1]-.7*zs["Main-Regular"][65][1]);ne("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+F_+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),ne("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+F_+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),ne("\\hspace","\\@ifstar\\@hspacer\\@hspace"),ne("\\@hspace","\\hskip #1\\relax"),ne("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),ne("\\ordinarycolon",":"),ne("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),ne("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),ne("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),ne("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),ne("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),ne("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),ne("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),ne("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),ne("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),ne("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),ne("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),ne("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),ne("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),ne("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),ne("â·","\\dblcolon"),ne("â¹","\\eqcolon"),ne("â","\\coloneqq"),ne("â","\\eqqcolon"),ne("â©´","\\Coloneqq"),ne("\\ratio","\\vcentcolon"),ne("\\coloncolon","\\dblcolon"),ne("\\colonequals","\\coloneqq"),ne("\\coloncolonequals","\\Coloneqq"),ne("\\equalscolon","\\eqqcolon"),ne("\\equalscoloncolon","\\Eqqcolon"),ne("\\colonminus","\\coloneq"),ne("\\coloncolonminus","\\Coloneq"),ne("\\minuscolon","\\eqcolon"),ne("\\minuscoloncolon","\\Eqcolon"),ne("\\coloncolonapprox","\\Colonapprox"),ne("\\coloncolonsim","\\Colonsim"),ne("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),ne("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),ne("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),ne("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),ne("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`â}}"),ne("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),ne("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),ne("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),ne("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),ne("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),ne("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),ne("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),ne("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),ne("\\gvertneqq","\\html@mathml{\\@gvertneqq}{â©}"),ne("\\lvertneqq","\\html@mathml{\\@lvertneqq}{â¨}"),ne("\\ngeqq","\\html@mathml{\\@ngeqq}{â±}"),ne("\\ngeqslant","\\html@mathml{\\@ngeqslant}{â±}"),ne("\\nleqq","\\html@mathml{\\@nleqq}{â°}"),ne("\\nleqslant","\\html@mathml{\\@nleqslant}{â°}"),ne("\\nshortmid","\\html@mathml{\\@nshortmid}{â¤}"),ne("\\nshortparallel","\\html@mathml{\\@nshortparallel}{â¦}"),ne("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{â}"),ne("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{â}"),ne("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{â}"),ne("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{â«}"),ne("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{â}"),ne("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{â«}"),ne("\\imath","\\html@mathml{\\@imath}{Ä±}"),ne("\\jmath","\\html@mathml{\\@jmath}{È·}"),ne("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`â¦}}"),ne("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`â§}}"),ne("â¦","\\llbracket"),ne("â§","\\rrbracket"),ne("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`â¦}}"),ne("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`â¦}}"),ne("â¦","\\lBrace"),ne("â¦","\\rBrace"),ne("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`â¦µ}}"),ne("â¦µ","\\minuso"),ne("\\darr","\\downarrow"),ne("\\dArr","\\Downarrow"),ne("\\Darr","\\Downarrow"),ne("\\lang","\\langle"),ne("\\rang","\\rangle"),ne("\\uarr","\\uparrow"),ne("\\uArr","\\Uparrow"),ne("\\Uarr","\\Uparrow"),ne("\\N","\\mathbb{N}"),ne("\\R","\\mathbb{R}"),ne("\\Z","\\mathbb{Z}"),ne("\\alef","\\aleph"),ne("\\alefsym","\\aleph"),ne("\\Alpha","\\mathrm{A}"),ne("\\Beta","\\mathrm{B}"),ne("\\bull","\\bullet"),ne("\\Chi","\\mathrm{X}"),ne("\\clubs","\\clubsuit"),ne("\\cnums","\\mathbb{C}"),ne("\\Complex","\\mathbb{C}"),ne("\\Dagger","\\ddagger"),ne("\\diamonds","\\diamondsuit"),ne("\\empty","\\emptyset"),ne("\\Epsilon","\\mathrm{E}"),ne("\\Eta","\\mathrm{H}"),ne("\\exist","\\exists"),ne("\\harr","\\leftrightarrow"),ne("\\hArr","\\Leftrightarrow"),ne("\\Harr","\\Leftrightarrow"),ne("\\hearts","\\heartsuit"),ne("\\image","\\Im"),ne("\\infin","\\infty"),ne("\\Iota","\\mathrm{I}"),ne("\\isin","\\in"),ne("\\Kappa","\\mathrm{K}"),ne("\\larr","\\leftarrow"),ne("\\lArr","\\Leftarrow"),ne("\\Larr","\\Leftarrow"),ne("\\lrarr","\\leftrightarrow"),ne("\\lrArr","\\Leftrightarrow"),ne("\\Lrarr","\\Leftrightarrow"),ne("\\Mu","\\mathrm{M}"),ne("\\natnums","\\mathbb{N}"),ne("\\Nu","\\mathrm{N}"),ne("\\Omicron","\\mathrm{O}"),ne("\\plusmn","\\pm"),ne("\\rarr","\\rightarrow"),ne("\\rArr","\\Rightarrow"),ne("\\Rarr","\\Rightarrow"),ne("\\real","\\Re"),ne("\\reals","\\mathbb{R}"),ne("\\Reals","\\mathbb{R}"),ne("\\Rho","\\mathrm{P}"),ne("\\sdot","\\cdot"),ne("\\sect","\\S"),ne("\\spades","\\spadesuit"),ne("\\sub","\\subset"),ne("\\sube","\\subseteq"),ne("\\supe","\\supseteq"),ne("\\Tau","\\mathrm{T}"),ne("\\thetasym","\\vartheta"),ne("\\weierp","\\wp"),ne("\\Zeta","\\mathrm{Z}"),ne("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),ne("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),ne("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),ne("\\bra","\\mathinner{\\langle{#1}|}"),ne("\\ket","\\mathinner{|{#1}\\rangle}"),ne("\\braket","\\mathinner{\\langle{#1}\\rangle}"),ne("\\Bra","\\left\\langle#1\\right|"),ne("\\Ket","\\left|#1\\right\\rangle");var D_=r=>e=>{var t=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();var l=h=>d=>{r&&(d.macros.set("|",s),i.length&&d.macros.set("\\|",o));var f=h;if(!h&&i.length){var p=d.future();p.text==="|"&&(d.popToken(),f=!0)}return{tokens:f?i:n,numArgs:0}};e.macros.set("|",l(!1)),i.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...a,...c,...t]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};ne("\\bra@ket",D_(!1)),ne("\\bra@set",D_(!0)),ne("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),ne("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),ne("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),ne("\\angln","{\\angl n}"),ne("\\blue","\\textcolor{##6495ed}{#1}"),ne("\\orange","\\textcolor{##ffa500}{#1}"),ne("\\pink","\\textcolor{##ff00af}{#1}"),ne("\\red","\\textcolor{##df0030}{#1}"),ne("\\green","\\textcolor{##28ae7b}{#1}"),ne("\\gray","\\textcolor{gray}{#1}"),ne("\\purple","\\textcolor{##9d38bd}{#1}"),ne("\\blueA","\\textcolor{##ccfaff}{#1}"),ne("\\blueB","\\textcolor{##80f6ff}{#1}"),ne("\\blueC","\\textcolor{##63d9ea}{#1}"),ne("\\blueD","\\textcolor{##11accd}{#1}"),ne("\\blueE","\\textcolor{##0c7f99}{#1}"),ne("\\tealA","\\textcolor{##94fff5}{#1}"),ne("\\tealB","\\textcolor{##26edd5}{#1}"),ne("\\tealC","\\textcolor{##01d1c1}{#1}"),ne("\\tealD","\\textcolor{##01a995}{#1}"),ne("\\tealE","\\textcolor{##208170}{#1}"),ne("\\greenA","\\textcolor{##b6ffb0}{#1}"),ne("\\greenB","\\textcolor{##8af281}{#1}"),ne("\\greenC","\\textcolor{##74cf70}{#1}"),ne("\\greenD","\\textcolor{##1fab54}{#1}"),ne("\\greenE","\\textcolor{##0d923f}{#1}"),ne("\\goldA","\\textcolor{##ffd0a9}{#1}"),ne("\\goldB","\\textcolor{##ffbb71}{#1}"),ne("\\goldC","\\textcolor{##ff9c39}{#1}"),ne("\\goldD","\\textcolor{##e07d10}{#1}"),ne("\\goldE","\\textcolor{##a75a05}{#1}"),ne("\\redA","\\textcolor{##fca9a9}{#1}"),ne("\\redB","\\textcolor{##ff8482}{#1}"),ne("\\redC","\\textcolor{##f9685d}{#1}"),ne("\\redD","\\textcolor{##e84d39}{#1}"),ne("\\redE","\\textcolor{##bc2612}{#1}"),ne("\\maroonA","\\textcolor{##ffbde0}{#1}"),ne("\\maroonB","\\textcolor{##ff92c6}{#1}"),ne("\\maroonC","\\textcolor{##ed5fa6}{#1}"),ne("\\maroonD","\\textcolor{##ca337c}{#1}"),ne("\\maroonE","\\textcolor{##9e034e}{#1}"),ne("\\purpleA","\\textcolor{##ddd7ff}{#1}"),ne("\\purpleB","\\textcolor{##c6b9fc}{#1}"),ne("\\purpleC","\\textcolor{##aa87ff}{#1}"),ne("\\purpleD","\\textcolor{##7854ab}{#1}"),ne("\\purpleE","\\textcolor{##543b78}{#1}"),ne("\\mintA","\\textcolor{##f5f9e8}{#1}"),ne("\\mintB","\\textcolor{##edf2df}{#1}"),ne("\\mintC","\\textcolor{##e0e5cc}{#1}"),ne("\\grayA","\\textcolor{##f6f7f7}{#1}"),ne("\\grayB","\\textcolor{##f0f1f2}{#1}"),ne("\\grayC","\\textcolor{##e3e5e6}{#1}"),ne("\\grayD","\\textcolor{##d6d8da}{#1}"),ne("\\grayE","\\textcolor{##babec2}{#1}"),ne("\\grayF","\\textcolor{##888d93}{#1}"),ne("\\grayG","\\textcolor{##626569}{#1}"),ne("\\grayH","\\textcolor{##3b3e40}{#1}"),ne("\\grayI","\\textcolor{##21242c}{#1}"),ne("\\kaBlue","\\textcolor{##314453}{#1}"),ne("\\kaGreen","\\textcolor{##71B307}{#1}");var L_={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Pee{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Oee(Nee,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new N_(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:t,end:n}=this.consumeArg());return this.pushToken(new Ka("EOF",n.loc)),this.pushTokens(i),t.range(n,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),a,s=0,o=0;do{if(a=this.popToken(),t.push(a),a.text==="{")++s;else if(a.text==="}"){if(--s,s===-1)throw new wt("Extra }",a)}else if(a.text==="EOF")throw new wt("Unexpected end of input in a macro argument, expected '"+(e&&n?e[o]:"}")+"'",a);if(e&&n)if((s===0||s===1&&e[o]==="{")&&a.text===e[o]){if(++o,o===e.length){t.splice(-o,o);break}}else o=0}while(s!==0||n);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:a}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new wt("The length of delimiters doesn't match the number of args!");for(var n=t[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new wt("Use of the macro doesn't match its definition",a)}}for(var s=[],o=0;o<e;o++)s.push(this.consumeArg(t&&t[o+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new wt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),n=t.text,i=t.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new wt("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var l=a[o];if(l.text==="#"){if(o===0)throw new wt("Incomplete placeholder at end of macro body",l);if(l=a[--o],l.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(l.text))a.splice(o,2,...s[+l.text-1]);else throw new wt("Not a valid argument number",l)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Ka(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(n=>n.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var o=new N_(i,this.settings),l=[],c=o.lex();c.text!=="EOF";)l.push(c),c=o.lex();l.reverse();var u={tokens:l,numArgs:a};return u}return i}isDefined(e){return this.macros.has(e)||Nl.hasOwnProperty(e)||Sn.math.hasOwnProperty(e)||Sn.text.hasOwnProperty(e)||L_.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:Nl.hasOwnProperty(e)&&!Nl[e].primitive}}var B_=/^[ââââââââââââââââââáµ¢â±¼ââââââáµ£ââáµ¤áµ¥âáµ¦áµ§áµ¨áµ©áµª]/,L1=Object.freeze({"â":"+","â":"-","â":"=","â":"(","â":")","â":"0","â":"1","â":"2","â":"3","â":"4","â":"5","â":"6","â":"7","â":"8","â":"9","â":"a","â":"e","â":"h","áµ¢":"i","â±¼":"j","â":"k","â":"l","â":"m","â":"n","â":"o","â":"p","áµ£":"r","â":"s","â":"t","áµ¤":"u","áµ¥":"v","â":"x","áµ¦":"Î²","áµ§":"Î³","áµ¨":"Ï","áµ©":"Ï","áµª":"Ï","âº":"+","â»":"-","â¼":"=","â½":"(","â¾":")","â°":"0","Â¹":"1","Â²":"2","Â³":"3","â´":"4","âµ":"5","â¶":"6","â·":"7","â¸":"8","â¹":"9","á´¬":"A","á´®":"B","á´°":"D","á´±":"E","á´³":"G","á´´":"H","á´µ":"I","á´¶":"J","á´·":"K","á´¸":"L","á´¹":"M","á´º":"N","á´¼":"O","á´¾":"P","á´¿":"R","áµ":"T","áµ":"U","â±½":"V","áµ":"W","áµ":"a","áµ":"b","á¶":"c","áµ":"d","áµ":"e","á¶ ":"f","áµ":"g",Ê°:"h","â±":"i",Ê²:"j","áµ":"k",Ë¡:"l","áµ":"m",â¿:"n","áµ":"o","áµ":"p",Ê³:"r",Ë¢:"s","áµ":"t","áµ":"u","áµ":"v",Ê·:"w",Ë£:"x",Ê¸:"y","á¶»":"z","áµ":"Î²","áµ":"Î³","áµ":"Î´","áµ ":"Ï","áµ¡":"Ï","á¶¿":"Î¸"}),mv={"Ì":{text:"\\'",math:"\\acute"},"Ì":{text:"\\`",math:"\\grave"},"Ì":{text:'\\"',math:"\\ddot"},"Ì":{text:"\\~",math:"\\tilde"},"Ì":{text:"\\=",math:"\\bar"},"Ì":{text:"\\u",math:"\\breve"},"Ì":{text:"\\v",math:"\\check"},"Ì":{text:"\\^",math:"\\hat"},"Ì":{text:"\\.",math:"\\dot"},"Ì":{text:"\\r",math:"\\mathring"},"Ì":{text:"\\H"},"Ì§":{text:"\\c"}},z_={Ã¡:"aÌ",Ã :"aÌ",Ã¤:"aÌ",Ç:"aÌÌ",Ã£:"aÌ",Ä:"aÌ",Ä:"aÌ",áº¯:"aÌÌ",áº±:"aÌÌ",áºµ:"aÌÌ",Ç:"aÌ",Ã¢:"aÌ",áº¥:"aÌÌ",áº§:"aÌÌ",áº«:"aÌÌ",È§:"aÌ",Ç¡:"aÌÌ",Ã¥:"aÌ",Ç»:"aÌÌ",á¸:"bÌ",Ä:"cÌ",á¸:"cÌ§Ì",Ä:"cÌ",Ä:"cÌ",Ä:"cÌ",Ã§:"cÌ§",Ä:"dÌ",á¸:"dÌ",á¸:"dÌ§",Ã©:"eÌ",Ã¨:"eÌ",Ã«:"eÌ",áº½:"eÌ",Ä:"eÌ",á¸:"eÌÌ",á¸:"eÌÌ",Ä:"eÌ",á¸:"eÌ§Ì",Ä:"eÌ",Ãª:"eÌ",áº¿:"eÌÌ",á»:"eÌÌ",á»:"eÌÌ",Ä:"eÌ",È©:"eÌ§",á¸:"fÌ",Çµ:"gÌ",á¸¡:"gÌ",Ä:"gÌ",Ç§:"gÌ",Ä:"gÌ",Ä¡:"gÌ",Ä£:"gÌ§",á¸§:"hÌ",È:"hÌ",Ä¥:"hÌ",á¸£:"hÌ",á¸©:"hÌ§",Ã­:"iÌ",Ã¬:"iÌ",Ã¯:"iÌ",á¸¯:"iÌÌ",Ä©:"iÌ",Ä«:"iÌ",Ä­:"iÌ",Ç:"iÌ",Ã®:"iÌ",Ç°:"jÌ",Äµ:"jÌ",á¸±:"kÌ",Ç©:"kÌ",Ä·:"kÌ§",Äº:"lÌ",Ä¾:"lÌ",Ä¼:"lÌ§",á¸¿:"mÌ",á¹:"mÌ",Å:"nÌ",Ç¹:"nÌ",Ã±:"nÌ",Å:"nÌ",á¹:"nÌ",Å:"nÌ§",Ã³:"oÌ",Ã²:"oÌ",Ã¶:"oÌ",È«:"oÌÌ",Ãµ:"oÌ",á¹:"oÌÌ",á¹:"oÌÌ",È­:"oÌÌ",Å:"oÌ",á¹:"oÌÌ",á¹:"oÌÌ",Å:"oÌ",Ç:"oÌ",Ã´:"oÌ",á»:"oÌÌ",á»:"oÌÌ",á»:"oÌÌ",È¯:"oÌ",È±:"oÌÌ",Å:"oÌ",á¹:"pÌ",á¹:"pÌ",Å:"rÌ",Å:"rÌ",á¹:"rÌ",Å:"rÌ§",Å:"sÌ",á¹¥:"sÌÌ",Å¡:"sÌ",á¹§:"sÌÌ",Å:"sÌ",á¹¡:"sÌ",Å:"sÌ§",áº:"tÌ",Å¥:"tÌ",á¹«:"tÌ",Å£:"tÌ§",Ãº:"uÌ",Ã¹:"uÌ",Ã¼:"uÌ",Ç:"uÌÌ",Ç:"uÌÌ",Ç:"uÌÌ",Ç:"uÌÌ",Å©:"uÌ",á¹¹:"uÌÌ",Å«:"uÌ",á¹»:"uÌÌ",Å­:"uÌ",Ç:"uÌ",Ã»:"uÌ",Å¯:"uÌ",Å±:"uÌ",á¹½:"vÌ",áº:"wÌ",áº:"wÌ",áº:"wÌ",Åµ:"wÌ",áº:"wÌ",áº:"wÌ",áº:"xÌ",áº:"xÌ",Ã½:"yÌ",á»³:"yÌ",Ã¿:"yÌ",á»¹:"yÌ",È³:"yÌ",Å·:"yÌ",áº:"yÌ",áº:"yÌ",Åº:"zÌ",Å¾:"zÌ",áº:"zÌ",Å¼:"zÌ",Ã:"AÌ",Ã:"AÌ",Ã:"AÌ",Ç:"AÌÌ",Ã:"AÌ",Ä:"AÌ",Ä:"AÌ",áº®:"AÌÌ",áº°:"AÌÌ",áº´:"AÌÌ",Ç:"AÌ",Ã:"AÌ",áº¤:"AÌÌ",áº¦:"AÌÌ",áºª:"AÌÌ",È¦:"AÌ",Ç :"AÌÌ",Ã:"AÌ",Çº:"AÌÌ",á¸:"BÌ",Ä:"CÌ",á¸:"CÌ§Ì",Ä:"CÌ",Ä:"CÌ",Ä:"CÌ",Ã:"CÌ§",Ä:"DÌ",á¸:"DÌ",á¸:"DÌ§",Ã:"EÌ",Ã:"EÌ",Ã:"EÌ",áº¼:"EÌ",Ä:"EÌ",á¸:"EÌÌ",á¸:"EÌÌ",Ä:"EÌ",á¸:"EÌ§Ì",Ä:"EÌ",Ã:"EÌ",áº¾:"EÌÌ",á»:"EÌÌ",á»:"EÌÌ",Ä:"EÌ",È¨:"EÌ§",á¸:"FÌ",Ç´:"GÌ",á¸ :"GÌ",Ä:"GÌ",Ç¦:"GÌ",Ä:"GÌ",Ä :"GÌ",Ä¢:"GÌ§",á¸¦:"HÌ",È:"HÌ",Ä¤:"HÌ",á¸¢:"HÌ",á¸¨:"HÌ§",Ã:"IÌ",Ã:"IÌ",Ã:"IÌ",á¸®:"IÌÌ",Ä¨:"IÌ",Äª:"IÌ",Ä¬:"IÌ",Ç:"IÌ",Ã:"IÌ",Ä°:"IÌ",Ä´:"JÌ",á¸°:"KÌ",Ç¨:"KÌ",Ä¶:"KÌ§",Ä¹:"LÌ",Ä½:"LÌ",Ä»:"LÌ§",á¸¾:"MÌ",á¹:"MÌ",Å:"NÌ",Ç¸:"NÌ",Ã:"NÌ",Å:"NÌ",á¹:"NÌ",Å:"NÌ§",Ã:"OÌ",Ã:"OÌ",Ã:"OÌ",Èª:"OÌÌ",Ã:"OÌ",á¹:"OÌÌ",á¹:"OÌÌ",È¬:"OÌÌ",Å:"OÌ",á¹:"OÌÌ",á¹:"OÌÌ",Å:"OÌ",Ç:"OÌ",Ã:"OÌ",á»:"OÌÌ",á»:"OÌÌ",á»:"OÌÌ",È®:"OÌ",È°:"OÌÌ",Å:"OÌ",á¹:"PÌ",á¹:"PÌ",Å:"RÌ",Å:"RÌ",á¹:"RÌ",Å:"RÌ§",Å:"SÌ",á¹¤:"SÌÌ",Å :"SÌ",á¹¦:"SÌÌ",Å:"SÌ",á¹ :"SÌ",Å:"SÌ§",Å¤:"TÌ",á¹ª:"TÌ",Å¢:"TÌ§",Ã:"UÌ",Ã:"UÌ",Ã:"UÌ",Ç:"UÌÌ",Ç:"UÌÌ",Ç:"UÌÌ",Ç:"UÌÌ",Å¨:"UÌ",á¹¸:"UÌÌ",Åª:"UÌ",á¹º:"UÌÌ",Å¬:"UÌ",Ç:"UÌ",Ã:"UÌ",Å®:"UÌ",Å°:"UÌ",á¹¼:"VÌ",áº:"WÌ",áº:"WÌ",áº:"WÌ",Å´:"WÌ",áº:"WÌ",áº:"XÌ",áº:"XÌ",Ã:"YÌ",á»²:"YÌ",Å¸:"YÌ",á»¸:"YÌ",È²:"YÌ",Å¶:"YÌ",áº:"YÌ",Å¹:"ZÌ",Å½:"ZÌ",áº:"ZÌ",Å»:"ZÌ",Î¬:"Î±Ì",á½°:"Î±Ì",á¾±:"Î±Ì",á¾°:"Î±Ì",Î­:"ÎµÌ",á½²:"ÎµÌ",Î®:"Î·Ì",á½´:"Î·Ì",Î¯:"Î¹Ì",á½¶:"Î¹Ì",Ï:"Î¹Ì",Î:"Î¹ÌÌ",á¿:"Î¹ÌÌ",á¿:"Î¹Ì",á¿:"Î¹Ì",Ï:"Î¿Ì",á½¸:"Î¿Ì",Ï:"ÏÌ",á½º:"ÏÌ",Ï:"ÏÌ",Î°:"ÏÌÌ",á¿¢:"ÏÌÌ",á¿¡:"ÏÌ",á¿ :"ÏÌ",Ï:"ÏÌ",á½¼:"ÏÌ",Î:"Î¥Ì",á¿ª:"Î¥Ì",Î«:"Î¥Ì",á¿©:"Î¥Ì",á¿¨:"Î¥Ì",Î:"Î©Ì",á¿º:"Î©Ì"};class B1{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Pee(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new wt("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Ka("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(B1.endOfExpression.indexOf(i.text)!==-1||t&&i.text===t||e&&Nl[i.text]&&Nl[i.text].infix)break;var a=this.parseAtom(t);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(t!==-1)throw new wt("only one infix operator per group",e[i].token);t=i,n=e[i].replaceWith}if(t!==-1&&n){var a,s,o=e.slice(0,t),l=e.slice(t+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[a,e[t],s],[]):c=this.callFunction(n,[a,s],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var i;do{var a;i=this.parseGroup(e)}while(((a=i)==null?void 0:a.type)==="internal");if(!i)throw new wt("Expected group after '"+n+"'",t);return i}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:t},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return a}parseAtom(e){var t=this.parseGroup("atom",e);if(t?.type==="internal"||this.mode==="text")return t;for(var n,i;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(t&&t.type==="op"){var s=a.text==="\\limits";t.limits=s,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=a.text==="\\limits");else throw new wt("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new wt("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(i)throw new wt("Double subscript",a);i=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new wt("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(L1[a.text]){var c=B_.test(a.text),u=[];for(u.push(new Ka(L1[a.text])),this.consume();;){var h=this.fetch().text;if(!L1[h]||B_.test(h)!==c)break;u.unshift(new Ka(L1[h])),this.consume()}var d=this.subparse(u);c?i={type:"ordgroup",mode:"math",body:d}:n={type:"ordgroup",mode:"math",body:d}}else break}return n||i?{type:"supsub",mode:this.mode,base:t,sup:n,sub:i}:t}parseFunction(e,t){var n=this.fetch(),i=n.text,a=Nl[i];if(!a)return null;if(this.consume(),t&&t!=="atom"&&!a.allowedInArgument)throw new wt("Got function '"+i+"' with no arguments"+(t?" as "+t:""),n);if(this.mode==="text"&&!a.allowedInText)throw new wt("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new wt("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:o}=this.parseArguments(i,a);return this.callFunction(i,s,o,n,e)}callFunction(e,t,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},o=Nl[e];if(o&&o.handler)return o.handler(s,t,n);throw new wt("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var o=t.argTypes&&t.argTypes[s],l=s<t.numOptionalArgs;(t.primitive&&o==null||t.type==="sqrt"&&s===1&&a[0]==null)&&(o="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",o,l);if(l)a.push(c);else if(c!=null)i.push(c);else throw new wt("Null argument, please report this as a bug")}return{args:i,optArgs:a}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new wt("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new wt("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new wt("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(n==null)return null;for(var i="",a;(a=this.fetch()).text!=="EOF";)i+=a.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,t){for(var n=this.fetch(),i=n,a="",s;(s=this.fetch()).text!=="EOF"&&e.test(a+s.text);)i=s,a+=i.text,this.consume();if(a==="")throw new wt("Invalid "+t+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new wt("Invalid color: '"+t.text+"'",t);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new wt("Invalid size: '"+t.text+"'",t);var a={number:+(i[1]+i[2]),unit:i[3]};if(!yx(a))throw new wt("Invalid unit: '"+a.unit+"'",t);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return t&&this.switchMode(i),s}parseGroup(e,t){var n=this.fetch(),i=n.text,a;if(i==="{"||i==="\\begingroup"){this.consume();var s=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,s),l=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:Ca.range(n,l),body:o,semisimple:i==="\\begingroup"||void 0}}else if(a=this.parseFunction(t,e)||this.parseSymbol(),a==null&&i[0]==="\\"&&!L_.hasOwnProperty(i)){if(this.settings.throwOnError)throw new wt("Undefined control sequence: "+i,n);a=this.formatUnsupportedCmd(i),this.consume()}return a}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<t&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Ca.range(i,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ca.range(i,e[n+1]),text:"--"}),t-=1)),(a==="'"||a==="`")&&e[n+1].text===a&&(e.splice(n,2,{type:"textord",mode:"text",loc:Ca.range(i,e[n+1]),text:a+a}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new wt(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}z_.hasOwnProperty(t[0])&&!Sn[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=z_[t[0]]+t.slice(1));var a=Mee.exec(t);a&&(t=t.substring(0,a.index),t==="i"?t="Ä±":t==="j"&&(t="È·"));var s;if(Sn[this.mode][t]){this.settings.strict&&this.mode==="math"&&U3.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var o=Sn[this.mode][t].group,l=Ca.range(e),c;if(xZ.hasOwnProperty(o)){var u=o;c={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else c={type:o,mode:this.mode,loc:l,text:t};s=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(gx(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:Ca.range(e),text:t};else return null;if(this.consume(),a)for(var h=0;h<a[0].length;h++){var d=a[0][h];if(!mv[d])throw new wt("Unknown accent ' "+d+"'",e);var f=mv[d][this.mode]||mv[d].text;if(!f)throw new wt("Accent "+d+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Ca.range(e),label:f,isStretchy:!1,isShifty:!0,base:s}}return s}}B1.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var bv=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new B1(e,t);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new wt("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new Ka("\\df@tag")])}]}return i},U_=function(e,t,n){t.textContent="";var i=vv(e,n).toNode();t.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),U_=function(){throw new wt("KaTeX doesn't work in quirks mode.")});var Ree=function(e,t){var n=vv(e,t).toMarkup();return n},Fee=function(e,t){var n=new M3(t);return bv(e,n)},j_=function(e,t,n){if(n.throwOnError||!(e instanceof wt))throw e;var i=Ge.makeSpan(["katex-error"],[new Qa(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},vv=function(e,t){var n=new M3(t);try{var i=bv(e,n);return GZ(i,e,n)}catch(a){return j_(a,e,n)}},Dee=function(e,t){var n=new M3(t);try{var i=bv(e,n);return $Z(i,e,n)}catch(a){return j_(a,e,n)}},Lee="0.16.22",Bee={Span:xd,Anchor:F3,SymbolNode:Qa,SvgNode:_o,PathNode:Tl,LineNode:D3},H_={version:Lee,render:U_,renderToString:Ree,ParseError:wt,SETTINGS_SCHEMA:m1,__parse:Fee,__renderToDomTree:vv,__renderToHTMLTree:Dee,__setFontMetrics:fZ,__defineSymbol:E,__defineFunction:Ut,__defineMacro:ne,__domTree:Bee};const zee={};function Uee(r){const e=this,t=r||zee,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),a=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(BJ(t)),a.push(IJ()),s.push(OJ(t))}const q_=function(r,e,t){const n=bd(t);if(!r||!r.type||!r.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=r.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<r.children.length;)if(n(r.children[e],e,r))return r.children[e]},kc=function(r){if(r==null)return qee;if(typeof r=="string")return Hee(r);if(typeof r=="object")return jee(r);if(typeof r=="function")return yv(r);throw new Error("Expected function, string, or array as `test`")};function jee(r){const e=[];let t=-1;for(;++t<r.length;)e[t]=kc(r[t]);return yv(n);function n(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function Hee(r){return yv(e);function e(t){return t.tagName===r}}function yv(r){return e;function e(t,n,i){return!!(Gee(t)&&r.call(this,t,typeof n=="number"?n:void 0,i||void 0))}}function qee(r){return!!(r&&typeof r=="object"&&"type"in r&&r.type==="element"&&"tagName"in r&&typeof r.tagName=="string")}function Gee(r){return r!==null&&typeof r=="object"&&"type"in r&&"tagName"in r}const G_=/\n/g,$_=/[\t ]+/g,wv=kc("br"),W_=kc(Qee),$ee=kc("p"),V_=kc("tr"),Wee=kc(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Yee,Jee]),X_=kc(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function K_(r,e){const t=e||{},n="children"in r?r.children:[],i=X_(r),a=J_(r,{whitespace:t.whitespace||"normal"}),s=[];(r.type==="text"||r.type==="comment")&&s.push(...Q_(r,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<n.length;)s.push(...Y_(n[o],r,{whitespace:a,breakBefore:o?void 0:i,breakAfter:o<n.length-1?wv(n[o+1]):i}));const l=[];let c;for(o=-1;++o<s.length;){const u=s[o];typeof u=="number"?c!==void 0&&u>c&&(c=u):u&&(c!==void 0&&c>-1&&l.push(`
`.repeat(c)||" "),c=-1,l.push(u))}return l.join("")}function Y_(r,e,t){return r.type==="element"?Vee(r,e,t):r.type==="text"?t.whitespace==="normal"?Q_(r,t):Xee(r):[]}function Vee(r,e,t){const n=J_(r,t),i=r.children||[];let a=-1,s=[];if(Wee(r))return s;let o,l;for(wv(r)||V_(r)&&q_(e,r,V_)?l=`
`:$ee(r)?(o=2,l=2):X_(r)&&(o=1,l=1);++a<i.length;)s=s.concat(Y_(i[a],r,{whitespace:n,breakBefore:a?void 0:o,breakAfter:a<i.length-1?wv(i[a+1]):l}));return W_(r)&&q_(e,r,W_)&&s.push("	"),o&&s.unshift(o),l&&s.push(l),s}function Q_(r,e){const t=String(r.value),n=[],i=[];let a=0;for(;a<=t.length;){G_.lastIndex=a;const l=G_.exec(t),c=l&&"index"in l?l.index:t.length;n.push(Kee(t.slice(a,c).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),a===0?e.breakBefore:!0,c===t.length?e.breakAfter:!0)),a=c+1}let s=-1,o;for(;++s<n.length;)n[s].charCodeAt(n[s].length-1)===8203||s<n.length-1&&n[s+1].charCodeAt(0)===8203?(i.push(n[s]),o=void 0):n[s]?(typeof o=="number"&&i.push(o),i.push(n[s]),o=0):(s===0||s===n.length-1)&&i.push(0);return i}function Xee(r){return[String(r.value)]}function Kee(r,e,t){const n=[];let i=0,a;for(;i<r.length;){$_.lastIndex=i;const s=$_.exec(r);a=s?s.index:r.length,!i&&!a&&s&&!e&&n.push(""),i!==a&&n.push(r.slice(i,a)),i=s?a+s[0].length:a}return i!==a&&!t&&n.push(""),n.join(" ")}function J_(r,e){if(r.type==="element"){const t=r.properties||{};switch(r.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.wrap?"pre-wrap":"pre";case"td":case"th":return t.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function Yee(r){return!!(r.properties||{}).hidden}function Qee(r){return r.tagName==="td"||r.tagName==="th"}function Jee(r){return r.tagName==="dialog"&&!(r.properties||{}).open}function Zee(r){const e=r.regex,t=r.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="(?!struct)("+n+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[r.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},r.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},r.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},t,r.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:e.optional(i)+r.IDENT_RE,relevance:0},f=e.optional(i)+r.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],m=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],y=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],v=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:m,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:y},C={className:"function.dispatch",relevance:0,keywords:{_hint:v},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,r.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},k=[C,h,o,t,r.C_BLOCK_COMMENT_MODE,u,c],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:k.concat([{begin:/\(/,end:/\)/,keywords:A,contains:k.concat(["self"]),relevance:0}]),relevance:0},N={className:"function",begin:"("+s+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:A,relevance:0},{begin:f,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[t,r.C_BLOCK_COMMENT_MODE,c,u,o,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",t,r.C_BLOCK_COMMENT_MODE,c,u,o]}]},o,t,r.C_BLOCK_COMMENT_MODE,h]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,N,C,k,[h,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",o]},{begin:r.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function ete(r){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},t=Zee(r),n=t.keywords;return n.type=[...n.type,...e.type],n.literal=[...n.literal,...e.literal],n.built_in=[...n.built_in,...e.built_in],n._hints=e._hints,t.name="Arduino",t.aliases=["ino"],t.supersetOf="cpp",t}function tte(r){const e=r.regex,t={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[t]}]};Object.assign(t,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[r.BACKSLASH_ESCAPE]},a=r.inherit(r.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[r.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[r.BACKSLASH_ESCAPE,t,i]};i.contains.push(o);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},r.NUMBER_MODE,t]},d=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=r.SHEBANG({binary:`(${d.join("|")})`,relevance:10}),p={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[r.inherit(r.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},m=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],y=["true","false"],v={match:/(\/[a-z._-]+)+/},_=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],S=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],A=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],C=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:m,literal:y,built_in:[..._,...S,"set","shopt",...A,...C]},contains:[f,r.SHEBANG(),p,h,a,s,v,o,l,c,u,t]}}function rte(r){const e=r.regex,t=r.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="("+n+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[r.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},r.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},r.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},t,r.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:e.optional(i)+r.IDENT_RE,relevance:0},f=e.optional(i)+r.IDENT_RE+"\\s*\\(",y={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},v=[h,o,t,r.C_BLOCK_COMMENT_MODE,u,c],_={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:y,contains:v.concat([{begin:/\(/,end:/\)/,keywords:y,contains:v.concat(["self"]),relevance:0}]),relevance:0},S={begin:"("+s+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:y,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:y,relevance:0},{begin:f,returnBegin:!0,contains:[r.inherit(d,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:y,relevance:0,contains:[t,r.C_BLOCK_COMMENT_MODE,c,u,o,{begin:/\(/,end:/\)/,keywords:y,relevance:0,contains:["self",t,r.C_BLOCK_COMMENT_MODE,c,u,o]}]},o,t,r.C_BLOCK_COMMENT_MODE,h]};return{name:"C",aliases:["h"],keywords:y,disableAutodetect:!0,illegal:"</",contains:[].concat(_,S,v,[h,{begin:r.IDENT_RE+"::",keywords:y},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},r.TITLE_MODE]}]),exports:{preprocessor:h,strings:c,keywords:y}}}function nte(r){const e=r.regex,t=r.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",s="(?!struct)("+n+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[r.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},r.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},r.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},t,r.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:e.optional(i)+r.IDENT_RE,relevance:0},f=e.optional(i)+r.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],m=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],y=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],v=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:m,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:y},C={className:"function.dispatch",relevance:0,keywords:{_hint:v},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,r.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},k=[C,h,o,t,r.C_BLOCK_COMMENT_MODE,u,c],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:k.concat([{begin:/\(/,end:/\)/,keywords:A,contains:k.concat(["self"]),relevance:0}]),relevance:0},N={className:"function",begin:"("+s+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:A,relevance:0},{begin:f,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[t,r.C_BLOCK_COMMENT_MODE,c,u,o,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",t,r.C_BLOCK_COMMENT_MODE,c,u,o]}]},o,t,r.C_BLOCK_COMMENT_MODE,h]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,N,C,k,[h,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",o]},{begin:r.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function ite(r){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],t=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],a=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:i.concat(a),built_in:e,literal:n},o=r.inherit(r.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},h=r.inherit(u,{illegal:/\n/}),d={className:"subst",begin:/\{/,end:/\}/,keywords:s},f=r.inherit(d,{illegal:/\n/}),p={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},r.BACKSLASH_ESCAPE,f]},m={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},d]},y=r.inherit(m,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]});d.contains=[m,p,u,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,l,r.C_BLOCK_COMMENT_MODE],f.contains=[y,p,h,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,l,r.inherit(r.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const v={variants:[c,m,p,u,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE]},_={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},S=r.IDENT_RE+"(<"+r.IDENT_RE+"(\\s*,\\s*"+r.IDENT_RE+")*>)?(\\[\\])?",A={begin:"@"+r.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[r.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},v,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,_,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,_,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+S+"\\s+)+"+r.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:t.join(" "),relevance:0},{begin:r.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[r.TITLE_MODE,_],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[v,l,r.C_BLOCK_COMMENT_MODE]},r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},A]}}const ate=r=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:r.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:r.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),ste=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],ote=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],lte=[...ste,...ote],cte=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),ute=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),hte=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),dte=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function fte(r){const e=r.regex,t=ate(r),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",a=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",o=[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,n,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+ute.join("|")+")"},{begin:":(:)?("+hte.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+dte.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:a},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:cte.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+lte.join("|")+")\\b"}]}}function gte(r){const e=r.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function pte(r){const a={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:a,illegal:"</",contains:[r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,{className:"string",variants:[r.QUOTE_STRING_MODE,r.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[r.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:a,illegal:/["']/}]}]}}function mte(r){const e=r.regex,t=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[r.HASH_COMMENT_MODE,r.QUOTE_STRING_MODE,r.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(t,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function bte(r){const e=r.regex,t={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:r.NUMBER_RE}]},n=r.COMMENT();n.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},a={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[r.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[n,a,i,s,t,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,h=e.either(l,c,u),d=e.concat(h,"(\\s*\\.\\s*",h,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[n,{className:"section",begin:/\[+/,end:/\]+/},{begin:d,className:"attr",starts:{end:/$/,contains:[n,o,a,i,s,t]}}]}}var Bu="[0-9](_*[0-9])*",z1=`\\.(${Bu})`,U1="[0-9a-fA-F](_*[0-9a-fA-F])*",Z_={className:"number",variants:[{begin:`(\\b(${Bu})((${z1})|\\.)?|(${z1}))[eE][+-]?(${Bu})[fFdD]?\\b`},{begin:`\\b(${Bu})((${z1})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${z1})[fFdD]?\\b`},{begin:`\\b(${Bu})[fFdD]\\b`},{begin:`\\b0[xX]((${U1})\\.?|(${U1})?\\.(${U1}))[pP][+-]?(${Bu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${U1})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function eS(r,e,t){return t===-1?"":r.replace(e,n=>eS(r,e,t-1))}function vte(r){const e=r.regex,t="[Ã-Ê¸a-zA-Z_$][Ã-Ê¸a-zA-Z_$0-9]*",n=t+eS("(?:<"+t+"~~~(?:\\s*,\\s*"+t+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+t,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[r.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[r.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[r.BACKSLASH_ESCAPE]},r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,t],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,t),/\s+/,t,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,t],className:{1:"keyword",3:"title.class"},contains:[u,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",r.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,Z_,r.C_BLOCK_COMMENT_MODE]},r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},Z_,c]}}const tS="[A-Za-z$_][0-9A-Za-z$_]*",yte=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],wte=["true","false","null","undefined","NaN","Infinity"],rS=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nS=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],iS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],xte=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],_te=[].concat(iS,rS,nS);function Ste(r){const e=r.regex,t=(X,{after:re})=>{const D="</"+X[0].slice(1);return X.input.indexOf(D,re)!==-1},n=tS,i={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(X,re)=>{const D=X[0].length+X.index,se=X.input[D];if(se==="<"||se===","){re.ignoreMatch();return}se===">"&&(t(X,{after:D})||re.ignoreMatch());let ce;const q=X.input.substring(D);if(ce=q.match(/^\s*=/)){re.ignoreMatch();return}if((ce=q.match(/^\s+extends\s+/))&&ce.index===0){re.ignoreMatch();return}}},o={$pattern:tS,keyword:yte,literal:wte,built_in:_te,"variable.language":xte},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",h={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,d],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,d],subLanguage:"graphql"}},y={className:"string",begin:"`",end:"`",contains:[r.BACKSLASH_ESCAPE,d]},_={className:"comment",variants:[r.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),r.C_BLOCK_COMMENT_MODE,r.C_LINE_COMMENT_MODE]},S=[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,f,p,m,y,{match:/\$\d+/},h];d.contains=S.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(S)});const A=[].concat(_,d.contains),C=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(A)}]),k={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:C},M={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,e.concat(n,"(",e.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},N={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...rS,...nS]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},z={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[k],illegal:/%/},W={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function V(X){return e.concat("(?!",X.join("|"),")")}const Q={match:e.concat(/\b/,V([...iS,"super","import"].map(X=>`${X}\\s*\\(`)),n,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},K={begin:e.concat(/\./,e.lookahead(e.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ie={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},k]},L="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+r.UNDERSCORE_IDENT_RE+")\\s*=>",J={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(L)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[k]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:C,CLASS_REFERENCE:N},illegal:/#(?![$_A-z])/,contains:[r.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,f,p,m,y,_,{match:/\$\d+/},h,N,{scope:"attr",match:n+e.lookahead(":"),relevance:0},J,{begin:"("+r.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[_,r.REGEXP_MODE,{className:"function",begin:L,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:r.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:C}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:a},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},z,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+r.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[k,r.inherit(r.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},K,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[k]},Q,W,M,ie,{match:/\$[(.]/}]}}function kte(r){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],i={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[e,t,r.QUOTE_STRING_MODE,i,r.C_NUMBER_MODE,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var zu="[0-9](_*[0-9])*",j1=`\\.(${zu})`,H1="[0-9a-fA-F](_*[0-9a-fA-F])*",Ate={className:"number",variants:[{begin:`(\\b(${zu})((${j1})|\\.)?|(${j1}))[eE][+-]?(${zu})[fFdD]?\\b`},{begin:`\\b(${zu})((${j1})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${j1})[fFdD]?\\b`},{begin:`\\b(${zu})[fFdD]\\b`},{begin:`\\b0[xX]((${H1})\\.?|(${H1})?\\.(${H1}))[pP][+-]?(${zu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${H1})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Cte(r){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},t={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:r.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[r.C_NUMBER_MODE]},a={className:"variable",begin:"\\$"+r.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[a,i]},{begin:"'",end:"'",illegal:/\n/,contains:[r.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[r.BACKSLASH_ESCAPE,a,i]}]};i.contains.push(s);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+r.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+r.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[r.inherit(s,{className:"string"}),"self"]}]},c=Ate,u=r.COMMENT("/\\*","\\*/",{contains:[r.C_BLOCK_COMMENT_MODE]}),h={variants:[{className:"type",begin:r.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},d=h;return d.variants[1].contains=[h],h.variants[1].contains=[d],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[r.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),r.C_LINE_COMMENT_MODE,u,t,n,o,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:r.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[r.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[h,r.C_LINE_COMMENT_MODE,u],relevance:0},r.C_LINE_COMMENT_MODE,u,o,l,s,r.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,r.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},r.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},o,l]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const Ete=r=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:r.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:r.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Tte=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Mte=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Ite=[...Tte,...Mte],Ote=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),aS=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),sS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Nte=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),Pte=aS.concat(sS).sort().reverse();function Rte(r){const e=Ete(r),t=Pte,n="and or not only",i="[\\w-]+",a="("+i+"|@\\{"+i+"\\})",s=[],o=[],l=function(S){return{className:"string",begin:"~?"+S+".*?"+S}},c=function(S,A,C){return{className:S,begin:A,relevance:C}},u={$pattern:/[a-z-]+/,keyword:n,attribute:Ote.join(" ")},h={begin:"\\(",end:"\\)",contains:o,keywords:u,relevance:0};o.push(r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,h,c("variable","@@?"+i,10),c("variable","@\\{"+i+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const d=o.concat({begin:/\{/,end:/\}/,contains:s}),f={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},p={begin:a+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Nte.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},m={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:o,relevance:0}},y={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:d}},v={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:a,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,f,c("keyword","all\\b"),c("variable","@\\{"+i+"\\}"),{begin:"\\b("+Ite.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,c("selector-tag",a,0),c("selector-id","#"+a),c("selector-class","\\."+a,0),c("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+aS.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+sS.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:d},{begin:"!important"},e.FUNCTION_DISPATCH]},_={begin:i+`:(:)?(${t.join("|")})`,returnBegin:!0,contains:[v]};return s.push(r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,m,y,_,p,v,f,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function Fte(r){const e="\\[=*\\[",t="\\]=*\\]",n={begin:e,end:t,contains:["self"]},i=[r.COMMENT("--(?!"+e+")","$"),r.COMMENT("--"+e,t,{contains:[n],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:r.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[r.inherit(r.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},r.C_NUMBER_MODE,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,{className:"string",begin:e,end:t,contains:[n],relevance:5}])}}function Dte(r){const e={className:"variable",variants:[{begin:"\\$\\("+r.UNDERSCORE_IDENT_RE+"\\)",contains:[r.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},t={className:"string",begin:/"/,end:/"/,contains:[r.BACKSLASH_ESCAPE,e]},n={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,t]},i={begin:"^"+r.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},a={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[r.HASH_COMMENT_MODE,e,t,n,i,a,s]}}function Lte(r){const e=r.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},a={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,o,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},h=r.inherit(c,{contains:[]}),d=r.inherit(u,{contains:[]});c.contains.push(d),u.contains.push(h);let f=[t,l];return[c,u,h,d].forEach(v=>{v.contains=v.contains.concat(f)}),f=f.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:f},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:f}]}]},t,a,c,u,{className:"quote",begin:"^>\\s+",contains:f,end:"$"},i,n,l,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function Bte(r){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},t=/[a-zA-Z@][a-zA-Z0-9_]*/,o={"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:o,illegal:"</",contains:[e,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,r.C_NUMBER_MODE,r.QUOTE_STRING_MODE,r.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[r.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},r.inherit(r.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[r.UNDERSCORE_TITLE_MODE]},{begin:"\\."+r.UNDERSCORE_IDENT_RE,relevance:0}]}}function zte(r){const e=r.regex,t=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],n=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:t.join(" ")},a={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},s={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[r.BACKSLASH_ESCAPE,a,l],h=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],d=(m,y,v="\\1")=>{const _=v==="\\1"?v:e.concat(v,y);return e.concat(e.concat("(?:",m,")"),y,/(?:\\.|[^\\\/])*?/,_,/(?:\\.|[^\\\/])*?/,v,n)},f=(m,y,v)=>e.concat(e.concat("(?:",m,")"),y,/(?:\\.|[^\\\/])*?/,v,n),p=[l,r.HASH_COMMENT_MODE,r.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[r.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[r.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+r.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[r.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:d("s|tr|y",e.either(...h,{capture:!0}))},{begin:d("s|tr|y","\\(","\\)")},{begin:d("s|tr|y","\\[","\\]")},{begin:d("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:f("(?:m|qr)?",/\//,/\//)},{begin:f("m|qr",e.either(...h,{capture:!0}),/\1/)},{begin:f("m|qr",/\(/,/\)/)},{begin:f("m|qr",/\[/,/\]/)},{begin:f("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[r.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[r.TITLE_MODE,o,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return a.contains=p,s.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:p}}function Ute(r){const e=r.regex,t=/(?![A-Za-z0-9])(?![$])/,n=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,t),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,t),a=e.concat(/[A-Z]+/,t),s={scope:"variable",match:"\\$+"+n},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=r.inherit(r.APOS_STRING_MODE,{illegal:null}),u=r.inherit(r.QUOTE_STRING_MODE,{illegal:null,contains:r.QUOTE_STRING_MODE.contains.concat(l)}),h={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:r.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(K,ie)=>{ie.data._beginMatch=K[1]||K[2]},"on:end":(K,ie)=>{ie.data._beginMatch!==K[1]&&ie.ignoreMatch()}},d=r.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),f=`[ 	
]`,p={scope:"string",variants:[u,c,h,d]},m={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},y=["false","null","true"],v=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],_=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],A={keyword:v,literal:(K=>{const ie=[];return K.forEach(L=>{ie.push(L),L.toLowerCase()===L?ie.push(L.toUpperCase()):ie.push(L.toLowerCase())}),ie})(y),built_in:_},C=K=>K.map(ie=>ie.replace(/\|\d+$/,"")),k={variants:[{match:[/new/,e.concat(f,"+"),e.concat("(?!",C(_).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},M=e.concat(n,"\\b(?!\\()"),N={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),M],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),M],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},F={scope:"attr",match:e.concat(n,e.lookahead(":"),e.lookahead(/(?!::)/))},z={relevance:0,begin:/\(/,end:/\)/,keywords:A,contains:[F,s,N,r.C_BLOCK_COMMENT_MODE,p,m,k]},W={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",C(v).join("\\b|"),"|",C(_).join("\\b|"),"\\b)"),n,e.concat(f,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[z]};z.contains.push(W);const V=[F,N,r.C_BLOCK_COMMENT_MODE,p,m,k],Q={begin:e.concat(/#\[\s*\\?/,e.either(i,a)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:y,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:y,keyword:["new","array"]},contains:["self",...V]},...V,{scope:"meta",variants:[{match:i},{match:a}]}]};return{case_insensitive:!1,keywords:A,contains:[Q,r.HASH_COMMENT_MODE,r.COMMENT("//","$"),r.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:r.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},s,W,N,{match:[/const/,/\s/,n],scope:{1:"keyword",3:"variable.constant"}},k,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},r.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:A,contains:["self",Q,s,N,r.C_BLOCK_COMMENT_MODE,p,m]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},r.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[r.inherit(r.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},r.UNDERSCORE_TITLE_MODE]},p,m]}}function jte(r){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},r.inherit(r.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),r.inherit(r.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function Hte(r){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function qte(r){const e=r.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},u={begin:/\{\{/,relevance:0},h={className:"string",contains:[r.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[r.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[r.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[r.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[r.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[r.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[r.BACKSLASH_ESCAPE,u,c]},r.APOS_STRING_MODE,r.QUOTE_STRING_MODE]},d="[0-9](_?[0-9])*",f=`(\\b(${d}))?\\.(${d})|\\b(${d})\\.`,p=`\\b|${n.join("|")}`,m={className:"number",relevance:0,variants:[{begin:`(\\b(${d})|(${f}))[eE][+-]?(${d})[jJ]?(?=${p})`},{begin:`(${f})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${p})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${p})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${p})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${p})`},{begin:`\\b(${d})[jJ](?=${p})`}]},y={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},v={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",l,m,h,r.HASH_COMMENT_MODE]}]};return c.contains=[h,m,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|\?)|=>/,contains:[l,m,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},h,y,r.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[v]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[m,v,h]}]}}function Gte(r){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function $te(r){const e=r.regex,t=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,n=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,a=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:t,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[r.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:t},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),r.HASH_COMMENT_MODE,{scope:"string",contains:[r.BACKSLASH_ESCAPE],variants:[r.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),r.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),r.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),r.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),r.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),r.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,n]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,n]},{scope:{1:"punctuation",2:"number"},match:[a,n]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,n]}]},{scope:{3:"operator"},match:[t,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:a},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function Wte(r){const e=r.regex,t="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",n=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(n,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[r.COMMENT("#","$",{contains:[o]}),r.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),r.COMMENT("^__END__",r.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:s},h={className:"string",contains:[r.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[r.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[r.BACKSLASH_ESCAPE,u]})]}]},d="[1-9](_?[0-9])*|0",f="[0-9](_?[0-9])*",p={className:"number",relevance:0,variants:[{begin:`\\b(${d})(\\.(${f}))?([eE][+-]?(${f})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},m={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},k=[h,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:s},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:n,scope:"title.class"},{match:[/def/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[m]},{begin:r.IDENT_RE+"::"},{className:"symbol",begin:r.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[h,{begin:t}],relevance:0},p,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+r.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[r.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=k,m.contains=k;const z=[{begin:/^\s*=>/,starts:{end:"$",contains:k}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:k}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[r.SHEBANG({binary:"ruby"})].concat(z).concat(c).concat(k)}}function Vte(r){const e=r.regex,t=/(r#)?/,n=e.concat(t,r.UNDERSCORE_IDENT_RE),i=e.concat(t,r.IDENT_RE),a={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",o=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:r.IDENT_RE+"!?",type:u,keyword:o,literal:l,built_in:c},illegal:"</",contains:[r.C_LINE_COMMENT_MODE,r.COMMENT("/\\*","\\*/",{contains:["self"]}),r.inherit(r.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,n],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[r.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,n],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,n,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:r.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},a]}}const Xte=r=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:r.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:r.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Kte=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Yte=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Qte=[...Kte,...Yte],Jte=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Zte=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),ere=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),tre=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function rre(r){const e=Xte(r),t=ere,n=Zte,i="@[a-z-]+",a="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+Qte.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+n.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+t.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+tre.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,o,e.HEXCOLOR,e.CSS_NUMBER_MODE,r.QUOTE_STRING_MODE,r.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:Jte.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,r.QUOTE_STRING_MODE,r.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function nre(r){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function ire(r){const e=r.regex,t=r.COMMENT("--","$"),n={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},a=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],h=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],d=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],f=u,p=[...c,...l].filter(C=>!u.includes(C)),m={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},y={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},v={match:e.concat(/\b/,e.either(...f),/\s*\(/),relevance:0,keywords:{built_in:f}};function _(C){return e.concat(/\b/,e.either(...C.map(k=>k.replace(/\s+/,"\\s+"))),/\b/)}const S={scope:"keyword",match:_(d),relevance:0};function A(C,{exceptions:k,when:M}={}){const N=M;return k=k||[],C.map(F=>F.match(/\|\d+$/)||k.includes(F)?F:N(F)?`${F}|0`:F)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:A(p,{when:C=>C.length<3}),literal:a,type:o,built_in:h},contains:[{scope:"type",match:_(s)},S,v,m,n,i,r.C_NUMBER_MODE,r.C_BLOCK_COMMENT_MODE,t,y]}}function oS(r){return r?typeof r=="string"?r:r.source:null}function Cd(r){return yn("(?=",r,")")}function yn(...r){return r.map(t=>oS(t)).join("")}function are(r){const e=r[r.length-1];return typeof e=="object"&&e.constructor===Object?(r.splice(r.length-1,1),e):{}}function Ji(...r){return"("+(are(r).capture?"":"?:")+r.map(n=>oS(n)).join("|")+")"}const xv=r=>yn(/\b/,r,/\w$/.test(r)?/\b/:/\B/),sre=["Protocol","Type"].map(xv),lS=["init","self"].map(xv),ore=["Any","Self"],_v=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],cS=["false","nil","true"],lre=["assignment","associativity","higherThan","left","lowerThan","none","right"],cre=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],uS=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],hS=Ji(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),dS=Ji(hS,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Sv=yn(hS,dS,"*"),fS=Ji(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),q1=Ji(fS,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Gs=yn(fS,q1,"*"),G1=yn(/[A-Z]/,q1,"*"),ure=["attached","autoclosure",yn(/convention\(/,Ji("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",yn(/objc\(/,Gs,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],hre=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function dre(r){const e={match:/\s+/,relevance:0},t=r.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[r.C_LINE_COMMENT_MODE,t],i={match:[/\./,Ji(...sre,...lS)],className:{2:"keyword"}},a={match:yn(/\./,Ji(..._v)),relevance:0},s=_v.filter(We=>typeof We=="string").concat(["_|0"]),o=_v.filter(We=>typeof We!="string").concat(ore).map(xv),l={variants:[{className:"keyword",match:Ji(...o,...lS)}]},c={$pattern:Ji(/\b\w+/,/#\w+/),keyword:s.concat(cre),literal:cS},u=[i,a,l],h={match:yn(/\./,Ji(...uS)),relevance:0},d={className:"built_in",match:yn(/\b/,Ji(...uS),/(?=\()/)},f=[h,d],p={match:/->/,relevance:0},m={className:"operator",relevance:0,variants:[{match:Sv},{match:`\\.(\\.|${dS})+`}]},y=[p,m],v="([0-9]_*)+",_="([0-9a-fA-F]_*)+",S={className:"number",relevance:0,variants:[{match:`\\b(${v})(\\.(${v}))?([eE][+-]?(${v}))?\\b`},{match:`\\b0x(${_})(\\.(${_}))?([pP][+-]?(${v}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},A=(We="")=>({className:"subst",variants:[{match:yn(/\\/,We,/[0\\tnr"']/)},{match:yn(/\\/,We,/u\{[0-9a-fA-F]{1,8}\}/)}]}),C=(We="")=>({className:"subst",match:yn(/\\/,We,/[\t ]*(?:[\r\n]|\r\n)/)}),k=(We="")=>({className:"subst",label:"interpol",begin:yn(/\\/,We,/\(/),end:/\)/}),M=(We="")=>({begin:yn(We,/"""/),end:yn(/"""/,We),contains:[A(We),C(We),k(We)]}),N=(We="")=>({begin:yn(We,/"/),end:yn(/"/,We),contains:[A(We),k(We)]}),F={className:"string",variants:[M(),M("#"),M("##"),M("###"),N(),N("#"),N("##"),N("###")]},z=[r.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[r.BACKSLASH_ESCAPE]}],W={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:z},V=We=>{const rt=yn(We,/\//),Qe=yn(/\//,We);return{begin:rt,end:Qe,contains:[...z,{scope:"comment",begin:`#(?!.*${Qe})`,end:/$/}]}},Q={scope:"regexp",variants:[V("###"),V("##"),V("#"),W]},K={match:yn(/`/,Gs,/`/)},ie={className:"variable",match:/\$\d+/},L={className:"variable",match:`\\$${q1}+`},J=[K,ie,L],X={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:hre,contains:[...y,S,F]}]}},re={scope:"keyword",match:yn(/@/,Ji(...ure),Cd(Ji(/\(/,/\s+/)))},D={scope:"meta",match:yn(/@/,Gs)},se=[X,re,D],ce={match:Cd(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:yn(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,q1,"+")},{className:"type",match:G1,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:yn(/\s+&\s+/,Cd(G1)),relevance:0}]},q={begin:/</,end:/>/,keywords:c,contains:[...n,...u,...se,p,ce]};ce.contains.push(q);const ae={match:yn(Gs,/\s*:/),keywords:"_|0",relevance:0},fe={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",ae,...n,Q,...u,...f,...y,S,F,...J,...se,ce]},xe={begin:/</,end:/>/,keywords:"repeat each",contains:[...n,ce]},pe={begin:Ji(Cd(yn(Gs,/\s*:/)),Cd(yn(Gs,/\s+/,Gs,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Gs}]},Ce={begin:/\(/,end:/\)/,keywords:c,contains:[pe,...n,...u,...y,S,F,...se,ce,fe],endsParent:!0,illegal:/["']/},Te={match:[/(func|macro)/,/\s+/,Ji(K.match,Gs,Sv)],className:{1:"keyword",3:"title.function"},contains:[xe,Ce,e],illegal:[/\[/,/%/]},Ae={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[xe,Ce,e],illegal:/\[|%/},be={match:[/operator/,/\s+/,Sv],className:{1:"keyword",3:"title"}},Ee={begin:[/precedencegroup/,/\s+/,G1],className:{1:"keyword",3:"title"},contains:[ce],keywords:[...lre,...cS],end:/}/},$e={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Ye={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},He={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Gs,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[xe,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:G1},...u],relevance:0}]};for(const We of F.variants){const rt=We.contains.find(ut=>ut.label==="interpol");rt.keywords=c;const Qe=[...u,...f,...y,S,F,...J];rt.contains=[...Qe,{begin:/\(/,end:/\)/,contains:["self",...Qe]}]}return{name:"Swift",keywords:c,contains:[...n,Te,Ae,$e,Ye,He,be,Ee,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},Q,...u,...f,...y,S,F,...J,...se,ce,fe]}}const $1="[A-Za-z$_][0-9A-Za-z$_]*",gS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],pS=["true","false","null","undefined","NaN","Infinity"],mS=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],bS=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],vS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],yS=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],wS=[].concat(vS,mS,bS);function fre(r){const e=r.regex,t=(X,{after:re})=>{const D="</"+X[0].slice(1);return X.input.indexOf(D,re)!==-1},n=$1,i={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(X,re)=>{const D=X[0].length+X.index,se=X.input[D];if(se==="<"||se===","){re.ignoreMatch();return}se===">"&&(t(X,{after:D})||re.ignoreMatch());let ce;const q=X.input.substring(D);if(ce=q.match(/^\s*=/)){re.ignoreMatch();return}if((ce=q.match(/^\s+extends\s+/))&&ce.index===0){re.ignoreMatch();return}}},o={$pattern:$1,keyword:gS,literal:pS,built_in:wS,"variable.language":yS},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",h={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,d],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,d],subLanguage:"graphql"}},y={className:"string",begin:"`",end:"`",contains:[r.BACKSLASH_ESCAPE,d]},_={className:"comment",variants:[r.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),r.C_BLOCK_COMMENT_MODE,r.C_LINE_COMMENT_MODE]},S=[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,f,p,m,y,{match:/\$\d+/},h];d.contains=S.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(S)});const A=[].concat(_,d.contains),C=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(A)}]),k={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:C},M={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,e.concat(n,"(",e.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},N={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...mS,...bS]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},z={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[k],illegal:/%/},W={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function V(X){return e.concat("(?!",X.join("|"),")")}const Q={match:e.concat(/\b/,V([...vS,"super","import"].map(X=>`${X}\\s*\\(`)),n,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},K={begin:e.concat(/\./,e.lookahead(e.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ie={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},k]},L="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+r.UNDERSCORE_IDENT_RE+")\\s*=>",J={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(L)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[k]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:C,CLASS_REFERENCE:N},illegal:/#(?![$_A-z])/,contains:[r.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,f,p,m,y,_,{match:/\$\d+/},h,N,{scope:"attr",match:n+e.lookahead(":"),relevance:0},J,{begin:"("+r.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[_,r.REGEXP_MODE,{className:"function",begin:L,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:r.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:C}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:a},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},z,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+r.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[k,r.inherit(r.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},K,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[k]},Q,W,M,ie,{match:/\$[(.]/}]}}function gre(r){const e=r.regex,t=fre(r),n=$1,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],a={begin:[/namespace/,/\s+/,r.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[t.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:$1,keyword:gS.concat(l),literal:pS,built_in:wS.concat(i),"variable.language":yS},u={className:"meta",begin:"@"+n},h=(m,y,v)=>{const _=m.contains.findIndex(S=>S.label===y);if(_===-1)throw new Error("can not find mode to replace");m.contains.splice(_,1,v)};Object.assign(t.keywords,c),t.exports.PARAMS_CONTAINS.push(u);const d=t.contains.find(m=>m.scope==="attr"),f=Object.assign({},d,{match:e.concat(n,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,d,f]),t.contains=t.contains.concat([u,a,s,f]),h(t,"shebang",r.SHEBANG()),h(t,"use_strict",o);const p=t.contains.find(m=>m.label==="func.def");return p.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function pre(r){const e=r.regex,t={className:"string",begin:/"(""|[^/n])"C\b/},n={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,a=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(a,i),/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,s,/ *#/)},{begin:e.concat(/# */,e.either(a,i),/ +/,e.either(s,o),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},h=r.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),d=r.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[t,n,l,c,u,h,d,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[d]}]}}function mre(r){r.regex;const e=r.COMMENT(/\(;/,/;\)/);e.contains.push("self");const t=r.COMMENT(/;;/,/$/),n=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},a={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},o={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:n},contains:[t,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},a,s,i,r.QUOTE_STRING_MODE,l,c,o]}}function bre(r){const e=r.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},a={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=r.inherit(a,{begin:/\(/,end:/\)/}),o=r.inherit(r.APOS_STRING_MODE,{className:"string"}),l=r.inherit(r.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[a,l,o,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[a,s,l,o]}]}]},r.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function vre(r){const e="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},a={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[r.BACKSLASH_ESCAPE,i]},o=r.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),d={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},f={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},p={begin:/\{/,end:/\}/,contains:[f],illegal:"\\n",relevance:0},m={begin:"\\[",end:"\\]",contains:[f],illegal:"\\n",relevance:0},y=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+r.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+r.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},r.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},d,{className:"number",begin:r.C_NUMBER_RE+"\\b",relevance:0},p,m,a,s],v=[...y];return v.pop(),v.push(o),f.contains=v,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:y}}const yre={arduino:ete,bash:tte,c:rte,cpp:nte,csharp:ite,css:fte,diff:gte,go:pte,graphql:mte,ini:bte,java:vte,javascript:Ste,json:kte,kotlin:Cte,less:Rte,lua:Fte,makefile:Dte,markdown:Lte,objectivec:Bte,perl:zte,php:Ute,"php-template":jte,plaintext:Hte,python:qte,"python-repl":Gte,r:$te,ruby:Wte,rust:Vte,scss:rre,shell:nre,sql:ire,swift:dre,typescript:gre,vbnet:pre,wasm:mre,xml:bre,yaml:vre};var kv,xS;function wre(){if(xS)return kv;xS=1;function r(de){return de instanceof Map?de.clear=de.delete=de.set=function(){throw new Error("map is read-only")}:de instanceof Set&&(de.add=de.clear=de.delete=function(){throw new Error("set is read-only")}),Object.freeze(de),Object.getOwnPropertyNames(de).forEach(Ve=>{const dt=de[Ve],Pt=typeof dt;(Pt==="object"||Pt==="function")&&!Object.isFrozen(dt)&&r(dt)}),de}class e{constructor(Ve){Ve.data===void 0&&(Ve.data={}),this.data=Ve.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(de){return de.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(de,...Ve){const dt=Object.create(null);for(const Pt in de)dt[Pt]=de[Pt];return Ve.forEach(function(Pt){for(const or in Pt)dt[or]=Pt[or]}),dt}const i="</span>",a=de=>!!de.scope,s=(de,{prefix:Ve})=>{if(de.startsWith("language:"))return de.replace("language:","language-");if(de.includes(".")){const dt=de.split(".");return[`${Ve}${dt.shift()}`,...dt.map((Pt,or)=>`${Pt}${"_".repeat(or+1)}`)].join(" ")}return`${Ve}${de}`};class o{constructor(Ve,dt){this.buffer="",this.classPrefix=dt.classPrefix,Ve.walk(this)}addText(Ve){this.buffer+=t(Ve)}openNode(Ve){if(!a(Ve))return;const dt=s(Ve.scope,{prefix:this.classPrefix});this.span(dt)}closeNode(Ve){a(Ve)&&(this.buffer+=i)}value(){return this.buffer}span(Ve){this.buffer+=`<span class="${Ve}">`}}const l=(de={})=>{const Ve={children:[]};return Object.assign(Ve,de),Ve};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ve){this.top.children.push(Ve)}openNode(Ve){const dt=l({scope:Ve});this.add(dt),this.stack.push(dt)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ve){return this.constructor._walk(Ve,this.rootNode)}static _walk(Ve,dt){return typeof dt=="string"?Ve.addText(dt):dt.children&&(Ve.openNode(dt),dt.children.forEach(Pt=>this._walk(Ve,Pt)),Ve.closeNode(dt)),Ve}static _collapse(Ve){typeof Ve!="string"&&Ve.children&&(Ve.children.every(dt=>typeof dt=="string")?Ve.children=[Ve.children.join("")]:Ve.children.forEach(dt=>{c._collapse(dt)}))}}class u extends c{constructor(Ve){super(),this.options=Ve}addText(Ve){Ve!==""&&this.add(Ve)}startScope(Ve){this.openNode(Ve)}endScope(){this.closeNode()}__addSublanguage(Ve,dt){const Pt=Ve.root;dt&&(Pt.scope=`language:${dt}`),this.add(Pt)}toHTML(){return new o(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function h(de){return de?typeof de=="string"?de:de.source:null}function d(de){return m("(?=",de,")")}function f(de){return m("(?:",de,")*")}function p(de){return m("(?:",de,")?")}function m(...de){return de.map(dt=>h(dt)).join("")}function y(de){const Ve=de[de.length-1];return typeof Ve=="object"&&Ve.constructor===Object?(de.splice(de.length-1,1),Ve):{}}function v(...de){return"("+(y(de).capture?"":"?:")+de.map(Pt=>h(Pt)).join("|")+")"}function _(de){return new RegExp(de.toString()+"|").exec("").length-1}function S(de,Ve){const dt=de&&de.exec(Ve);return dt&&dt.index===0}const A=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function C(de,{joinWith:Ve}){let dt=0;return de.map(Pt=>{dt+=1;const or=dt;let Rr=h(Pt),Ft="";for(;Rr.length>0;){const Ot=A.exec(Rr);if(!Ot){Ft+=Rr;break}Ft+=Rr.substring(0,Ot.index),Rr=Rr.substring(Ot.index+Ot[0].length),Ot[0][0]==="\\"&&Ot[1]?Ft+="\\"+String(Number(Ot[1])+or):(Ft+=Ot[0],Ot[0]==="("&&dt++)}return Ft}).map(Pt=>`(${Pt})`).join(Ve)}const k=/\b\B/,M="[a-zA-Z]\\w*",N="[a-zA-Z_]\\w*",F="\\b\\d+(\\.\\d+)?",z="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",W="\\b(0b[01]+)",V="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Q=(de={})=>{const Ve=/^#![ ]*\//;return de.binary&&(de.begin=m(Ve,/.*\b/,de.binary,/\b.*/)),n({scope:"meta",begin:Ve,end:/$/,relevance:0,"on:begin":(dt,Pt)=>{dt.index!==0&&Pt.ignoreMatch()}},de)},K={begin:"\\\\[\\s\\S]",relevance:0},ie={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[K]},L={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[K]},J={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},X=function(de,Ve,dt={}){const Pt=n({scope:"comment",begin:de,end:Ve,contains:[]},dt);Pt.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const or=v("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Pt.contains.push({begin:m(/[ ]+/,"(",or,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Pt},re=X("//","$"),D=X("/\\*","\\*/"),se=X("#","$"),ce={scope:"number",begin:F,relevance:0},q={scope:"number",begin:z,relevance:0},ae={scope:"number",begin:W,relevance:0},fe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[K,{begin:/\[/,end:/\]/,relevance:0,contains:[K]}]},xe={scope:"title",begin:M,relevance:0},pe={scope:"title",begin:N,relevance:0},Ce={begin:"\\.\\s*"+N,relevance:0};var Ae=Object.freeze({__proto__:null,APOS_STRING_MODE:ie,BACKSLASH_ESCAPE:K,BINARY_NUMBER_MODE:ae,BINARY_NUMBER_RE:W,COMMENT:X,C_BLOCK_COMMENT_MODE:D,C_LINE_COMMENT_MODE:re,C_NUMBER_MODE:q,C_NUMBER_RE:z,END_SAME_AS_BEGIN:function(de){return Object.assign(de,{"on:begin":(Ve,dt)=>{dt.data._beginMatch=Ve[1]},"on:end":(Ve,dt)=>{dt.data._beginMatch!==Ve[1]&&dt.ignoreMatch()}})},HASH_COMMENT_MODE:se,IDENT_RE:M,MATCH_NOTHING_RE:k,METHOD_GUARD:Ce,NUMBER_MODE:ce,NUMBER_RE:F,PHRASAL_WORDS_MODE:J,QUOTE_STRING_MODE:L,REGEXP_MODE:fe,RE_STARTERS_RE:V,SHEBANG:Q,TITLE_MODE:xe,UNDERSCORE_IDENT_RE:N,UNDERSCORE_TITLE_MODE:pe});function be(de,Ve){de.input[de.index-1]==="."&&Ve.ignoreMatch()}function Ee(de,Ve){de.className!==void 0&&(de.scope=de.className,delete de.className)}function $e(de,Ve){Ve&&de.beginKeywords&&(de.begin="\\b("+de.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",de.__beforeBegin=be,de.keywords=de.keywords||de.beginKeywords,delete de.beginKeywords,de.relevance===void 0&&(de.relevance=0))}function Ye(de,Ve){Array.isArray(de.illegal)&&(de.illegal=v(...de.illegal))}function He(de,Ve){if(de.match){if(de.begin||de.end)throw new Error("begin & end are not supported with match");de.begin=de.match,delete de.match}}function We(de,Ve){de.relevance===void 0&&(de.relevance=1)}const rt=(de,Ve)=>{if(!de.beforeMatch)return;if(de.starts)throw new Error("beforeMatch cannot be used with starts");const dt=Object.assign({},de);Object.keys(de).forEach(Pt=>{delete de[Pt]}),de.keywords=dt.keywords,de.begin=m(dt.beforeMatch,d(dt.begin)),de.starts={relevance:0,contains:[Object.assign(dt,{endsParent:!0})]},de.relevance=0,delete dt.beforeMatch},Qe=["of","and","for","in","not","or","if","then","parent","list","value"],ut="keyword";function ft(de,Ve,dt=ut){const Pt=Object.create(null);return typeof de=="string"?or(dt,de.split(" ")):Array.isArray(de)?or(dt,de):Object.keys(de).forEach(function(Rr){Object.assign(Pt,ft(de[Rr],Ve,Rr))}),Pt;function or(Rr,Ft){Ve&&(Ft=Ft.map(Ot=>Ot.toLowerCase())),Ft.forEach(function(Ot){const vt=Ot.split("|");Pt[vt[0]]=[Rr,ht(vt[0],vt[1])]})}}function ht(de,Ve){return Ve?Number(Ve):it(de)?0:1}function it(de){return Qe.includes(de.toLowerCase())}const Je={},at=de=>{console.error(de)},ct=(de,...Ve)=>{console.log(`WARN: ${de}`,...Ve)},Se=(de,Ve)=>{Je[`${de}/${Ve}`]||(console.log(`Deprecated as of ${de}. ${Ve}`),Je[`${de}/${Ve}`]=!0)},Le=new Error;function et(de,Ve,{key:dt}){let Pt=0;const or=de[dt],Rr={},Ft={};for(let Ot=1;Ot<=Ve.length;Ot++)Ft[Ot+Pt]=or[Ot],Rr[Ot+Pt]=!0,Pt+=_(Ve[Ot-1]);de[dt]=Ft,de[dt]._emit=Rr,de[dt]._multi=!0}function ot(de){if(Array.isArray(de.begin)){if(de.skip||de.excludeBegin||de.returnBegin)throw at("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Le;if(typeof de.beginScope!="object"||de.beginScope===null)throw at("beginScope must be object"),Le;et(de,de.begin,{key:"beginScope"}),de.begin=C(de.begin,{joinWith:""})}}function mt(de){if(Array.isArray(de.end)){if(de.skip||de.excludeEnd||de.returnEnd)throw at("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Le;if(typeof de.endScope!="object"||de.endScope===null)throw at("endScope must be object"),Le;et(de,de.end,{key:"endScope"}),de.end=C(de.end,{joinWith:""})}}function Gt(de){de.scope&&typeof de.scope=="object"&&de.scope!==null&&(de.beginScope=de.scope,delete de.scope)}function jt(de){Gt(de),typeof de.beginScope=="string"&&(de.beginScope={_wrap:de.beginScope}),typeof de.endScope=="string"&&(de.endScope={_wrap:de.endScope}),ot(de),mt(de)}function Yt(de){function Ve(Ft,Ot){return new RegExp(h(Ft),"m"+(de.case_insensitive?"i":"")+(de.unicodeRegex?"u":"")+(Ot?"g":""))}class dt{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Ot,vt){vt.position=this.position++,this.matchIndexes[this.matchAt]=vt,this.regexes.push([vt,Ot]),this.matchAt+=_(Ot)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Ot=this.regexes.map(vt=>vt[1]);this.matcherRe=Ve(C(Ot,{joinWith:"|"}),!0),this.lastIndex=0}exec(Ot){this.matcherRe.lastIndex=this.lastIndex;const vt=this.matcherRe.exec(Ot);if(!vt)return null;const cr=vt.findIndex((Fi,Za)=>Za>0&&Fi!==void 0),tn=this.matchIndexes[cr];return vt.splice(0,cr),Object.assign(vt,tn)}}class Pt{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Ot){if(this.multiRegexes[Ot])return this.multiRegexes[Ot];const vt=new dt;return this.rules.slice(Ot).forEach(([cr,tn])=>vt.addRule(cr,tn)),vt.compile(),this.multiRegexes[Ot]=vt,vt}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Ot,vt){this.rules.push([Ot,vt]),vt.type==="begin"&&this.count++}exec(Ot){const vt=this.getMatcher(this.regexIndex);vt.lastIndex=this.lastIndex;let cr=vt.exec(Ot);if(this.resumingScanAtSamePosition()&&!(cr&&cr.index===this.lastIndex)){const tn=this.getMatcher(0);tn.lastIndex=this.lastIndex+1,cr=tn.exec(Ot)}return cr&&(this.regexIndex+=cr.position+1,this.regexIndex===this.count&&this.considerAll()),cr}}function or(Ft){const Ot=new Pt;return Ft.contains.forEach(vt=>Ot.addRule(vt.begin,{rule:vt,type:"begin"})),Ft.terminatorEnd&&Ot.addRule(Ft.terminatorEnd,{type:"end"}),Ft.illegal&&Ot.addRule(Ft.illegal,{type:"illegal"}),Ot}function Rr(Ft,Ot){const vt=Ft;if(Ft.isCompiled)return vt;[Ee,He,jt,rt].forEach(tn=>tn(Ft,Ot)),de.compilerExtensions.forEach(tn=>tn(Ft,Ot)),Ft.__beforeBegin=null,[$e,Ye,We].forEach(tn=>tn(Ft,Ot)),Ft.isCompiled=!0;let cr=null;return typeof Ft.keywords=="object"&&Ft.keywords.$pattern&&(Ft.keywords=Object.assign({},Ft.keywords),cr=Ft.keywords.$pattern,delete Ft.keywords.$pattern),cr=cr||/\w+/,Ft.keywords&&(Ft.keywords=ft(Ft.keywords,de.case_insensitive)),vt.keywordPatternRe=Ve(cr,!0),Ot&&(Ft.begin||(Ft.begin=/\B|\b/),vt.beginRe=Ve(vt.begin),!Ft.end&&!Ft.endsWithParent&&(Ft.end=/\B|\b/),Ft.end&&(vt.endRe=Ve(vt.end)),vt.terminatorEnd=h(vt.end)||"",Ft.endsWithParent&&Ot.terminatorEnd&&(vt.terminatorEnd+=(Ft.end?"|":"")+Ot.terminatorEnd)),Ft.illegal&&(vt.illegalRe=Ve(Ft.illegal)),Ft.contains||(Ft.contains=[]),Ft.contains=[].concat(...Ft.contains.map(function(tn){return Ar(tn==="self"?Ft:tn)})),Ft.contains.forEach(function(tn){Rr(tn,vt)}),Ft.starts&&Rr(Ft.starts,Ot),vt.matcher=or(vt),vt}if(de.compilerExtensions||(de.compilerExtensions=[]),de.contains&&de.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return de.classNameAliases=n(de.classNameAliases||{}),Rr(de)}function kr(de){return de?de.endsWithParent||kr(de.starts):!1}function Ar(de){return de.variants&&!de.cachedVariants&&(de.cachedVariants=de.variants.map(function(Ve){return n(de,{variants:null},Ve)})),de.cachedVariants?de.cachedVariants:kr(de)?n(de,{starts:de.starts?n(de.starts):null}):Object.isFrozen(de)?n(de):de}var st="11.11.1";class yt extends Error{constructor(Ve,dt){super(Ve),this.name="HTMLInjectionError",this.html=dt}}const At=t,Vt=n,gt=Symbol("nomatch"),Bt=7,ar=function(de){const Ve=Object.create(null),dt=Object.create(null),Pt=[];let or=!0;const Rr="Could not find the language '{}', did you forget to load/include a language module?",Ft={disableAutodetect:!0,name:"Plain text",contains:[]};let Ot={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function vt(_t){return Ot.noHighlightRe.test(_t)}function cr(_t){let Zt=_t.className+" ";Zt+=_t.parentNode?_t.parentNode.className:"";const Xr=Ot.languageDetectRe.exec(Zt);if(Xr){const fn=ga(Xr[1]);return fn||(ct(Rr.replace("{}",Xr[1])),ct("Falling back to no-highlight mode for this block.",_t)),fn?Xr[1]:"no-highlight"}return Zt.split(/\s+/).find(fn=>vt(fn)||ga(fn))}function tn(_t,Zt,Xr){let fn="",jn="";typeof Zt=="object"?(fn=_t,Xr=Zt.ignoreIllegals,jn=Zt.language):(Se("10.7.0","highlight(lang, code, ...args) has been deprecated."),Se("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),jn=_t,fn=Zt),Xr===void 0&&(Xr=!0);const Sr={code:fn,language:jn};Mo("before:highlight",Sr);const ps=Sr.result?Sr.result:Fi(Sr.language,Sr.code,Xr);return ps.code=Sr.code,Mo("after:highlight",ps),ps}function Fi(_t,Zt,Xr,fn){const jn=Object.create(null);function Sr(Lt,rr){return Lt.keywords[rr]}function ps(){if(!Dt.keywords){ui.addText(wn);return}let Lt=0;Dt.keywordPatternRe.lastIndex=0;let rr=Dt.keywordPatternRe.exec(wn),lr="";for(;rr;){lr+=wn.substring(Lt,rr.index);const Hr=Li.case_insensitive?rr[0].toLowerCase():rr[0],Hn=Sr(Dt,Hr);if(Hn){const[ta,Ld]=Hn;if(ui.addText(lr),lr="",jn[Hr]=(jn[Hr]||0)+1,jn[Hr]<=Bt&&(mi+=Ld),ta.startsWith("_"))lr+=rr[0];else{const Xs=Li.classNameAliases[ta]||ta;rn(rr[0],Xs)}}else lr+=rr[0];Lt=Dt.keywordPatternRe.lastIndex,rr=Dt.keywordPatternRe.exec(wn)}lr+=wn.substring(Lt),ui.addText(lr)}function Ic(){if(wn==="")return;let Lt=null;if(typeof Dt.subLanguage=="string"){if(!Ve[Dt.subLanguage]){ui.addText(wn);return}Lt=Fi(Dt.subLanguage,wn,!0,Vu[Dt.subLanguage]),Vu[Dt.subLanguage]=Lt._top}else Lt=Un(wn,Dt.subLanguage.length?Dt.subLanguage:null);Dt.relevance>0&&(mi+=Lt.relevance),ui.__addSublanguage(Lt._emitter,Lt.language)}function Di(){Dt.subLanguage!=null?Ic():ps(),wn=""}function rn(Lt,rr){Lt!==""&&(ui.startScope(rr),ui.addText(Lt),ui.endScope())}function Fl(Lt,rr){let lr=1;const Hr=rr.length-1;for(;lr<=Hr;){if(!Lt._emit[lr]){lr++;continue}const Hn=Li.classNameAliases[Lt[lr]]||Lt[lr],ta=rr[lr];Hn?rn(ta,Hn):(wn=ta,ps(),wn=""),lr++}}function Dl(Lt,rr){return Lt.scope&&typeof Lt.scope=="string"&&ui.openNode(Li.classNameAliases[Lt.scope]||Lt.scope),Lt.beginScope&&(Lt.beginScope._wrap?(rn(wn,Li.classNameAliases[Lt.beginScope._wrap]||Lt.beginScope._wrap),wn=""):Lt.beginScope._multi&&(Fl(Lt.beginScope,rr),wn="")),Dt=Object.create(Lt,{parent:{value:Dt}}),Dt}function Io(Lt,rr,lr){let Hr=S(Lt.endRe,lr);if(Hr){if(Lt["on:end"]){const Hn=new e(Lt);Lt["on:end"](rr,Hn),Hn.isMatchIgnored&&(Hr=!1)}if(Hr){for(;Lt.endsParent&&Lt.parent;)Lt=Lt.parent;return Lt}}if(Lt.endsWithParent)return Io(Lt.parent,rr,lr)}function Pd(Lt){return Dt.matcher.regexIndex===0?(wn+=Lt[0],1):(ts=!0,0)}function Rd(Lt){const rr=Lt[0],lr=Lt.rule,Hr=new e(lr),Hn=[lr.__beforeBegin,lr["on:begin"]];for(const ta of Hn)if(ta&&(ta(Lt,Hr),Hr.isMatchIgnored))return Pd(rr);return lr.skip?wn+=rr:(lr.excludeBegin&&(wn+=rr),Di(),!lr.returnBegin&&!lr.excludeBegin&&(wn=rr)),Dl(lr,Lt),lr.returnBegin?0:rr.length}function Wu(Lt){const rr=Lt[0],lr=Zt.substring(Lt.index),Hr=Io(Dt,Lt,lr);if(!Hr)return gt;const Hn=Dt;Dt.endScope&&Dt.endScope._wrap?(Di(),rn(rr,Dt.endScope._wrap)):Dt.endScope&&Dt.endScope._multi?(Di(),Fl(Dt.endScope,Lt)):Hn.skip?wn+=rr:(Hn.returnEnd||Hn.excludeEnd||(wn+=rr),Di(),Hn.excludeEnd&&(wn=rr));do Dt.scope&&ui.closeNode(),!Dt.skip&&!Dt.subLanguage&&(mi+=Dt.relevance),Dt=Dt.parent;while(Dt!==Hr.parent);return Hr.starts&&Dl(Hr.starts,Lt),Hn.returnEnd?0:rr.length}function tg(){const Lt=[];for(let rr=Dt;rr!==Li;rr=rr.parent)rr.scope&&Lt.unshift(rr.scope);Lt.forEach(rr=>ui.openNode(rr))}let Oo={};function Fd(Lt,rr){const lr=rr&&rr[0];if(wn+=Lt,lr==null)return Di(),0;if(Oo.type==="begin"&&rr.type==="end"&&Oo.index===rr.index&&lr===""){if(wn+=Zt.slice(rr.index,rr.index+1),!or){const Hr=new Error(`0 width match regex (${_t})`);throw Hr.languageName=_t,Hr.badRule=Oo.rule,Hr}return 1}if(Oo=rr,rr.type==="begin")return Rd(rr);if(rr.type==="illegal"&&!Xr){const Hr=new Error('Illegal lexeme "'+lr+'" for mode "'+(Dt.scope||"<unnamed>")+'"');throw Hr.mode=Dt,Hr}else if(rr.type==="end"){const Hr=Wu(rr);if(Hr!==gt)return Hr}if(rr.type==="illegal"&&lr==="")return wn+=`
`,1;if(Ll>1e5&&Ll>rr.index*3)throw new Error("potential infinite loop, way more iterations than matches");return wn+=lr,lr.length}const Li=ga(_t);if(!Li)throw at(Rr.replace("{}",_t)),new Error('Unknown language: "'+_t+'"');const rg=Yt(Li);let Dd="",Dt=fn||rg;const Vu={},ui=new Ot.__emitter(Ot);tg();let wn="",mi=0,pa=0,Ll=0,ts=!1;try{if(Li.__emitTokens)Li.__emitTokens(Zt,ui);else{for(Dt.matcher.considerAll();;){Ll++,ts?ts=!1:Dt.matcher.considerAll(),Dt.matcher.lastIndex=pa;const Lt=Dt.matcher.exec(Zt);if(!Lt)break;const rr=Zt.substring(pa,Lt.index),lr=Fd(rr,Lt);pa=Lt.index+lr}Fd(Zt.substring(pa))}return ui.finalize(),Dd=ui.toHTML(),{language:_t,value:Dd,relevance:mi,illegal:!1,_emitter:ui,_top:Dt}}catch(Lt){if(Lt.message&&Lt.message.includes("Illegal"))return{language:_t,value:At(Zt),illegal:!0,relevance:0,_illegalBy:{message:Lt.message,index:pa,context:Zt.slice(pa-100,pa+100),mode:Lt.mode,resultSoFar:Dd},_emitter:ui};if(or)return{language:_t,value:At(Zt),illegal:!1,relevance:0,errorRaised:Lt,_emitter:ui,_top:Dt};throw Lt}}function Za(_t){const Zt={value:At(_t),illegal:!1,relevance:0,_top:Ft,_emitter:new Ot.__emitter(Ot)};return Zt._emitter.addText(_t),Zt}function Un(_t,Zt){Zt=Zt||Ot.languages||Object.keys(Ve);const Xr=Za(_t),fn=Zt.filter(ga).filter(Vs).map(Di=>Fi(Di,_t,!1));fn.unshift(Xr);const jn=fn.sort((Di,rn)=>{if(Di.relevance!==rn.relevance)return rn.relevance-Di.relevance;if(Di.language&&rn.language){if(ga(Di.language).supersetOf===rn.language)return 1;if(ga(rn.language).supersetOf===Di.language)return-1}return 0}),[Sr,ps]=jn,Ic=Sr;return Ic.secondBest=ps,Ic}function ea(_t,Zt,Xr){const fn=Zt&&dt[Zt]||Xr;_t.classList.add("hljs"),_t.classList.add(`language-${fn}`)}function pi(_t){let Zt=null;const Xr=cr(_t);if(vt(Xr))return;if(Mo("before:highlightElement",{el:_t,language:Xr}),_t.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",_t);return}if(_t.children.length>0&&(Ot.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(_t)),Ot.throwUnescapedHTML))throw new yt("One of your code blocks includes unescaped HTML.",_t.innerHTML);Zt=_t;const fn=Zt.textContent,jn=Xr?tn(fn,{language:Xr,ignoreIllegals:!0}):Un(fn);_t.innerHTML=jn.value,_t.dataset.highlighted="yes",ea(_t,Xr,jn.language),_t.result={language:jn.language,re:jn.relevance,relevance:jn.relevance},jn.secondBest&&(_t.secondBest={language:jn.secondBest.language,relevance:jn.secondBest.relevance}),Mo("after:highlightElement",{el:_t,result:jn,text:fn})}function $s(_t){Ot=Vt(Ot,_t)}const es=()=>{Ti(),Se("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Ia(){Ti(),Se("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ws=!1;function Ti(){function _t(){Ti()}if(document.readyState==="loading"){Ws||window.addEventListener("DOMContentLoaded",_t,!1),Ws=!0;return}document.querySelectorAll(Ot.cssSelector).forEach(pi)}function $u(_t,Zt){let Xr=null;try{Xr=Zt(de)}catch(fn){if(at("Language definition for '{}' could not be registered.".replace("{}",_t)),or)at(fn);else throw fn;Xr=Ft}Xr.name||(Xr.name=_t),Ve[_t]=Xr,Xr.rawDefinition=Zt.bind(null,de),Xr.aliases&&Pn(Xr.aliases,{languageName:_t})}function Oa(_t){delete Ve[_t];for(const Zt of Object.keys(dt))dt[Zt]===_t&&delete dt[Zt]}function Mc(){return Object.keys(Ve)}function ga(_t){return _t=(_t||"").toLowerCase(),Ve[_t]||Ve[dt[_t]]}function Pn(_t,{languageName:Zt}){typeof _t=="string"&&(_t=[_t]),_t.forEach(Xr=>{dt[Xr.toLowerCase()]=Zt})}function Vs(_t){const Zt=ga(_t);return Zt&&!Zt.disableAutodetect}function gs(_t){_t["before:highlightBlock"]&&!_t["before:highlightElement"]&&(_t["before:highlightElement"]=Zt=>{_t["before:highlightBlock"](Object.assign({block:Zt.el},Zt))}),_t["after:highlightBlock"]&&!_t["after:highlightElement"]&&(_t["after:highlightElement"]=Zt=>{_t["after:highlightBlock"](Object.assign({block:Zt.el},Zt))})}function eg(_t){gs(_t),Pt.push(_t)}function Rl(_t){const Zt=Pt.indexOf(_t);Zt!==-1&&Pt.splice(Zt,1)}function Mo(_t,Zt){const Xr=_t;Pt.forEach(function(fn){fn[Xr]&&fn[Xr](Zt)})}function Nd(_t){return Se("10.7.0","highlightBlock will be removed entirely in v12.0"),Se("10.7.0","Please use highlightElement now."),pi(_t)}Object.assign(de,{highlight:tn,highlightAuto:Un,highlightAll:Ti,highlightElement:pi,highlightBlock:Nd,configure:$s,initHighlighting:es,initHighlightingOnLoad:Ia,registerLanguage:$u,unregisterLanguage:Oa,listLanguages:Mc,getLanguage:ga,registerAliases:Pn,autoDetection:Vs,inherit:Vt,addPlugin:eg,removePlugin:Rl}),de.debugMode=function(){or=!1},de.safeMode=function(){or=!0},de.versionString=st,de.regex={concat:m,lookahead:d,either:v,optional:p,anyNumberOfTimes:f};for(const _t in Ae)typeof Ae[_t]=="object"&&r(Ae[_t]);return Object.assign(de,Ae),de},Cr=ar({});return Cr.newInstance=()=>ar({}),kv=Cr,Cr.HighlightJS=Cr,Cr.default=Cr,kv}var xre=wre();const _re=Rf(xre),_S={},Sre="hljs-";function kre(r){const e=_re.newInstance();return r&&a(r),{highlight:t,highlightAuto:n,listLanguages:i,register:a,registerAlias:s,registered:o};function t(l,c,u){const h=u||_S,d=typeof h.prefix=="string"?h.prefix:Sre;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:Are,classPrefix:d});const f=e.highlight(c,{ignoreIllegals:!0,language:l});if(f.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:f.errorRaised});const p=f._emitter.root,m=p.data;return m.language=f.language,m.relevance=f.relevance,p}function n(l,c){const h=(c||_S).subset||i();let d=-1,f=0,p;for(;++d<h.length;){const m=h[d];if(!e.getLanguage(m))continue;const y=t(m,l,c);y.data&&y.data.relevance!==void 0&&y.data.relevance>f&&(f=y.data.relevance,p=y)}return p||{type:"root",children:[],data:{language:void 0,relevance:f}}}function i(){return e.listLanguages()}function a(l,c){if(typeof l=="string")e.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&e.registerLanguage(u,l[u])}}function s(l,c){if(typeof l=="string")e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const h=l[u];e.registerAliases(typeof h=="string"?h:[...h],{languageName:u})}}}function o(l){return!!e.getLanguage(l)}}class Are{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&n.type==="text"?n.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const n=this.stack[this.stack.length-1],i=e.root.children;t?n.children.push({type:"element",tagName:"span",properties:{className:[t]},children:i}):n.children.push(...i)}openNode(e){const t=this,n=e.split(".").map(function(s,o){return o?s+"_".repeat(o):t.options.classPrefix+s}),i=this.stack[this.stack.length-1],a={type:"element",tagName:"span",properties:{className:n},children:[]};i.children.push(a),this.stack.push(a)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const Cre={};function Ere(r){const e=r||Cre,t=e.aliases,n=e.detect||!1,i=e.languages||yre,a=e.plainText,s=e.prefix,o=e.subset;let l="hljs";const c=kre(i);if(t&&c.registerAlias(t),s){const u=s.indexOf("-");l=u===-1?s:s.slice(0,u)}return function(u,h){d1(u,"element",function(d,f,p){if(d.tagName!=="code"||!p||p.type!=="element"||p.tagName!=="pre")return;const m=Tre(d);if(m===!1||!m&&!n||m&&a&&a.includes(m))return;Array.isArray(d.properties.className)||(d.properties.className=[]),d.properties.className.includes(l)||d.properties.className.unshift(l);const y=K_(d,{whitespace:"pre"});let v;try{v=m?c.highlight(m,y,{prefix:s}):c.highlightAuto(y,{prefix:s,subset:o})}catch(_){const S=_;if(m&&/Unknown language/.test(S.message)){h.message("Cannot highlight as `"+m+"`, itâs not registered",{ancestors:[p,d],cause:S,place:d.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw S}!m&&v.data&&v.data.language&&d.properties.className.push("language-"+v.data.language),v.children.length>0&&(d.children=v.children)})}}function Tre(r){const e=r.properties.className;let t=-1;if(!Array.isArray(e))return;let n;for(;++t<e.length;){const i=String(e[t]);if(i==="no-highlight"||i==="nohighlight")return!1;!n&&i.slice(0,5)==="lang-"&&(n=i.slice(5)),!n&&i.slice(0,9)==="language-"&&(n=i.slice(9))}return n}function Mre(r,e){const t={type:"element",tagName:"blockquote",properties:{},children:r.wrap(r.all(e),!0)};return r.patch(e,t),r.applyData(e,t)}function Ire(r,e){const t={type:"element",tagName:"br",properties:{},children:[]};return r.patch(e,t),[r.applyData(e,t),{type:"text",value:`
`}]}function Ore(r,e){const t=e.value?e.value+`
`:"",n={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(n.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:n,children:[{type:"text",value:t}]};return e.meta&&(a.data={meta:e.meta}),r.patch(e,a),a=r.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},r.patch(e,a),a}function Nre(r,e){const t={type:"element",tagName:"del",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function Pre(r,e){const t={type:"element",tagName:"em",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function Rre(r,e){const t=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),i=Iu(n.toLowerCase()),a=r.footnoteOrder.indexOf(n);let s,o=r.footnoteCounts.get(n);o===void 0?(o=0,r.footnoteOrder.push(n),s=r.footnoteOrder.length):s=a+1,o+=1,r.footnoteCounts.set(n,o);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};r.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return r.patch(e,c),r.applyData(e,c)}function Fre(r,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function Dre(r,e){if(r.options.allowDangerousHtml){const t={type:"raw",value:e.value};return r.patch(e,t),r.applyData(e,t)}}function SS(r,e){const t=e.referenceType;let n="]";if(t==="collapsed"?n+="[]":t==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const i=r.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=n:i.push({type:"text",value:n}),i}function Lre(r,e){const t=String(e.identifier).toUpperCase(),n=r.definitionById.get(t);if(!n)return SS(r,e);const i={src:Iu(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"img",properties:i,children:[]};return r.patch(e,a),r.applyData(e,a)}function Bre(r,e){const t={src:Iu(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"img",properties:t,children:[]};return r.patch(e,n),r.applyData(e,n)}function zre(r,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};r.patch(e,t);const n={type:"element",tagName:"code",properties:{},children:[t]};return r.patch(e,n),r.applyData(e,n)}function Ure(r,e){const t=String(e.identifier).toUpperCase(),n=r.definitionById.get(t);if(!n)return SS(r,e);const i={href:Iu(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"a",properties:i,children:r.all(e)};return r.patch(e,a),r.applyData(e,a)}function jre(r,e){const t={href:Iu(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"a",properties:t,children:r.all(e)};return r.patch(e,n),r.applyData(e,n)}function Hre(r,e,t){const n=r.all(e),i=t?qre(t):kS(e),a={},s=[];if(typeof e.checked=="boolean"){const u=n[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<n.length;){const u=n[o];(i||o!==0||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?s.push(...u.children):s.push(u)}const l=n[n.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:s};return r.patch(e,c),r.applyData(e,c)}function qre(r){let e=!1;if(r.type==="list"){e=r.spread||!1;const t=r.children;let n=-1;for(;!e&&++n<t.length;)e=kS(t[n])}return e}function kS(r){const e=r.spread;return e??r.children.length>1}function Gre(r,e){const t={},n=r.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<n.length;){const s=n[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:r.wrap(n,!0)};return r.patch(e,a),r.applyData(e,a)}function $re(r,e){const t={type:"element",tagName:"p",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function Wre(r,e){const t={type:"root",children:r.wrap(r.all(e))};return r.patch(e,t),r.applyData(e,t)}function Vre(r,e){const t={type:"element",tagName:"strong",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}const AS=ES("end"),CS=ES("start");function ES(r){return e;function e(t){const n=t&&t.position&&t.position[r]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function Xre(r){const e=CS(r),t=AS(r);if(e&&t)return{start:e,end:t}}function Kre(r,e){const t=r.all(e),n=t.shift(),i=[];if(n){const s={type:"element",tagName:"thead",properties:{},children:r.wrap([n],!0)};r.patch(e.children[0],s),i.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:r.wrap(t,!0)},o=CS(e.children[1]),l=AS(e.children[e.children.length-1]);o&&l&&(s.position={start:o,end:l}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:r.wrap(i,!0)};return r.patch(e,a),r.applyData(e,a)}function Yre(r,e,t){const n=t?t.children:void 0,a=(n?n.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,o=s?s.length:e.children.length;let l=-1;const c=[];for(;++l<o;){const h=e.children[l],d={},f=s?s[l]:void 0;f&&(d.align=f);let p={type:"element",tagName:a,properties:d,children:[]};h&&(p.children=r.all(h),r.patch(h,p),p=r.applyData(h,p)),c.push(p)}const u={type:"element",tagName:"tr",properties:{},children:r.wrap(c,!0)};return r.patch(e,u),r.applyData(e,u)}function Qre(r,e){const t={type:"element",tagName:"td",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}const TS=9,MS=32;function Jre(r){const e=String(r),t=/\r?\n|\r/g;let n=t.exec(e),i=0;const a=[];for(;n;)a.push(IS(e.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=t.exec(e);return a.push(IS(e.slice(i),i>0,!1)),a.join("")}function IS(r,e,t){let n=0,i=r.length;if(e){let a=r.codePointAt(n);for(;a===TS||a===MS;)n++,a=r.codePointAt(n)}if(t){let a=r.codePointAt(i-1);for(;a===TS||a===MS;)i--,a=r.codePointAt(i-1)}return i>n?r.slice(n,i):""}function Zre(r,e){const t={type:"text",value:Jre(String(e.value))};return r.patch(e,t),r.applyData(e,t)}function ene(r,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return r.patch(e,t),r.applyData(e,t)}const tne={blockquote:Mre,break:Ire,code:Ore,delete:Nre,emphasis:Pre,footnoteReference:Rre,heading:Fre,html:Dre,imageReference:Lre,image:Bre,inlineCode:zre,linkReference:Ure,link:jre,listItem:Hre,list:Gre,paragraph:$re,root:Wre,strong:Vre,table:Kre,tableCell:Qre,tableRow:Yre,text:Zre,thematicBreak:ene,toml:W1,yaml:W1,definition:W1,footnoteDefinition:W1};function W1(){}const OS=-1,V1=0,Ed=1,X1=2,Av=3,Cv=4,Ev=5,Tv=6,NS=7,PS=8,RS=typeof self=="object"?self:globalThis,rne=(r,e)=>{const t=(i,a)=>(r.set(a,i),i),n=i=>{if(r.has(i))return r.get(i);const[a,s]=e[i];switch(a){case V1:case OS:return t(s,i);case Ed:{const o=t([],i);for(const l of s)o.push(n(l));return o}case X1:{const o=t({},i);for(const[l,c]of s)o[n(l)]=n(c);return o}case Av:return t(new Date(s),i);case Cv:{const{source:o,flags:l}=s;return t(new RegExp(o,l),i)}case Ev:{const o=t(new Map,i);for(const[l,c]of s)o.set(n(l),n(c));return o}case Tv:{const o=t(new Set,i);for(const l of s)o.add(n(l));return o}case NS:{const{name:o,message:l}=s;return t(new RS[o](l),i)}case PS:return t(BigInt(s),i);case"BigInt":return t(Object(BigInt(s)),i);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:o}=new Uint8Array(s);return t(new DataView(o),s)}}return t(new RS[a](s),i)};return n},FS=r=>rne(new Map,r)(0),Uu="",{toString:nne}={},{keys:ine}=Object,Td=r=>{const e=typeof r;if(e!=="object"||!r)return[V1,e];const t=nne.call(r).slice(8,-1);switch(t){case"Array":return[Ed,Uu];case"Object":return[X1,Uu];case"Date":return[Av,Uu];case"RegExp":return[Cv,Uu];case"Map":return[Ev,Uu];case"Set":return[Tv,Uu];case"DataView":return[Ed,t]}return t.includes("Array")?[Ed,t]:t.includes("Error")?[NS,t]:[X1,t]},K1=([r,e])=>r===V1&&(e==="function"||e==="symbol"),ane=(r,e,t,n)=>{const i=(s,o)=>{const l=n.push(s)-1;return t.set(o,l),l},a=s=>{if(t.has(s))return t.get(s);let[o,l]=Td(s);switch(o){case V1:{let u=s;switch(l){case"bigint":o=PS,u=s.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([OS],s)}return i([o,u],s)}case Ed:{if(l){let d=s;return l==="DataView"?d=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(d=new Uint8Array(s)),i([l,[...d]],s)}const u=[],h=i([o,u],s);for(const d of s)u.push(a(d));return h}case X1:{if(l)switch(l){case"BigInt":return i([l,s.toString()],s);case"Boolean":case"Number":case"String":return i([l,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const u=[],h=i([o,u],s);for(const d of ine(s))(r||!K1(Td(s[d])))&&u.push([a(d),a(s[d])]);return h}case Av:return i([o,s.toISOString()],s);case Cv:{const{source:u,flags:h}=s;return i([o,{source:u,flags:h}],s)}case Ev:{const u=[],h=i([o,u],s);for(const[d,f]of s)(r||!(K1(Td(d))||K1(Td(f))))&&u.push([a(d),a(f)]);return h}case Tv:{const u=[],h=i([o,u],s);for(const d of s)(r||!K1(Td(d)))&&u.push(a(d));return h}}const{message:c}=s;return i([o,{name:l,message:c}],s)};return a},DS=(r,{json:e,lossy:t}={})=>{const n=[];return ane(!(e||t),!!e,new Map,n)(r),n},Y1=typeof structuredClone=="function"?(r,e)=>e&&("json"in e||"lossy"in e)?FS(DS(r,e)):structuredClone(r):(r,e)=>FS(DS(r,e));function sne(r,e){const t=[{type:"text",value:"â©"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function one(r,e){return"Back to reference "+(r+1)+(e>1?"-"+e:"")}function lne(r){const e=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",t=r.options.footnoteBackContent||sne,n=r.options.footnoteBackLabel||one,i=r.options.footnoteLabel||"Footnotes",a=r.options.footnoteLabelTagName||"h2",s=r.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<r.footnoteOrder.length;){const c=r.footnoteById.get(r.footnoteOrder[l]);if(!c)continue;const u=r.all(c),h=String(c.identifier).toUpperCase(),d=Iu(h.toLowerCase());let f=0;const p=[],m=r.footnoteCounts.get(h);for(;m!==void 0&&++f<=m;){p.length>0&&p.push({type:"text",value:" "});let _=typeof t=="string"?t:t(l,f);typeof _=="string"&&(_={type:"text",value:_}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,f),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const _=y.children[y.children.length-1];_&&_.type==="text"?_.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else u.push(...p);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:r.wrap(u,!0)};r.patch(c,v),o.push(v)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Y1(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:r.wrap(o,!0)},{type:"text",value:`
`}]}}const Mv={}.hasOwnProperty,cne={};function une(r,e){const t=e||cne,n=new Map,i=new Map,a=new Map,s={...tne,...t.handlers},o={all:c,applyData:dne,definitionById:n,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:l,options:t,patch:hne,wrap:gne};return d1(r,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?n:i,d=String(u.identifier).toUpperCase();h.has(d)||h.set(d,u)}}),o;function l(u,h){const d=u.type,f=o.handlers[d];if(Mv.call(o.handlers,d)&&f)return f(o,u,h);if(o.options.passThrough&&o.options.passThrough.includes(d)){if("children"in u){const{children:m,...y}=u,v=Y1(y);return v.children=o.all(u),v}return Y1(u)}return(o.options.unknownHandler||fne)(o,u,h)}function c(u){const h=[];if("children"in u){const d=u.children;let f=-1;for(;++f<d.length;){const p=o.one(d[f],u);if(p){if(f&&d[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=LS(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=LS(m.value))}Array.isArray(p)?h.push(...p):h.push(p)}}}return h}}function hne(r,e){r.position&&(e.position=Xre(r))}function dne(r,e){let t=e;if(r&&r.data){const n=r.data.hName,i=r.data.hChildren,a=r.data.hProperties;if(typeof n=="string")if(t.type==="element")t.tagName=n;else{const s="children"in t?t.children:[t];t={type:"element",tagName:n,properties:{},children:s}}t.type==="element"&&a&&Object.assign(t.properties,Y1(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function fne(r,e){const t=e.data||{},n="value"in e&&!(Mv.call(t,"hProperties")||Mv.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:r.all(e)};return r.patch(e,n),r.applyData(e,n)}function gne(r,e){const t=[];let n=-1;for(e&&t.push({type:"text",value:`
`});++n<r.length;)n&&t.push({type:"text",value:`
`}),t.push(r[n]);return e&&r.length>0&&t.push({type:"text",value:`
`}),t}function LS(r){let e=0,t=r.charCodeAt(e);for(;t===9||t===32;)e++,t=r.charCodeAt(e);return r.slice(e)}function BS(r,e){const t=une(r,e),n=t.one(r,void 0),i=lne(t),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function pne(r,e){return r&&"run"in r?async function(t,n){const i=BS(t,{file:n,...e});await r.run(i,n)}:function(t,n){return BS(t,{file:n,...r||e})}}class Md{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}Md.prototype.normal={},Md.prototype.property={},Md.prototype.space=void 0;function zS(r,e){const t={},n={};for(const i of r)Object.assign(t,i.property),Object.assign(n,i.normal);return new Md(t,n,e)}function Id(r){return r.toLowerCase()}class fa{constructor(e,t){this.attribute=t,this.property=e}}fa.prototype.attribute="",fa.prototype.booleanish=!1,fa.prototype.boolean=!1,fa.prototype.commaOrSpaceSeparated=!1,fa.prototype.commaSeparated=!1,fa.prototype.defined=!1,fa.prototype.mustUseProperty=!1,fa.prototype.number=!1,fa.prototype.overloadedBoolean=!1,fa.prototype.property="",fa.prototype.spaceSeparated=!1,fa.prototype.space=void 0;let mne=0;const jr=Ac(),ni=Ac(),Iv=Ac(),xt=Ac(),kn=Ac(),ju=Ac(),Ma=Ac();function Ac(){return 2**++mne}const Ov=Object.freeze(Object.defineProperty({__proto__:null,boolean:jr,booleanish:ni,commaOrSpaceSeparated:Ma,commaSeparated:ju,number:xt,overloadedBoolean:Iv,spaceSeparated:kn},Symbol.toStringTag,{value:"Module"})),Nv=Object.keys(Ov);class Pv extends fa{constructor(e,t,n,i){let a=-1;if(super(e,t),US(this,"space",i),typeof n=="number")for(;++a<Nv.length;){const s=Nv[a];US(this,Nv[a],(n&Ov[s])===Ov[s])}}}Pv.prototype.defined=!0;function US(r,e,t){t&&(r[e]=t)}function Hu(r){const e={},t={};for(const[n,i]of Object.entries(r.properties)){const a=new Pv(n,r.transform(r.attributes||{},n),i,r.space);r.mustUseProperty&&r.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),e[n]=a,t[Id(n)]=n,t[Id(a.attribute)]=n}return new Md(e,t,r.space)}const jS=Hu({properties:{ariaActiveDescendant:null,ariaAtomic:ni,ariaAutoComplete:null,ariaBusy:ni,ariaChecked:ni,ariaColCount:xt,ariaColIndex:xt,ariaColSpan:xt,ariaControls:kn,ariaCurrent:null,ariaDescribedBy:kn,ariaDetails:null,ariaDisabled:ni,ariaDropEffect:kn,ariaErrorMessage:null,ariaExpanded:ni,ariaFlowTo:kn,ariaGrabbed:ni,ariaHasPopup:null,ariaHidden:ni,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:kn,ariaLevel:xt,ariaLive:null,ariaModal:ni,ariaMultiLine:ni,ariaMultiSelectable:ni,ariaOrientation:null,ariaOwns:kn,ariaPlaceholder:null,ariaPosInSet:xt,ariaPressed:ni,ariaReadOnly:ni,ariaRelevant:null,ariaRequired:ni,ariaRoleDescription:kn,ariaRowCount:xt,ariaRowIndex:xt,ariaRowSpan:xt,ariaSelected:ni,ariaSetSize:xt,ariaSort:null,ariaValueMax:xt,ariaValueMin:xt,ariaValueNow:xt,ariaValueText:null,role:null},transform(r,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function HS(r,e){return e in r?r[e]:e}function qS(r,e){return HS(r,e.toLowerCase())}const bne=Hu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ju,acceptCharset:kn,accessKey:kn,action:null,allow:null,allowFullScreen:jr,allowPaymentRequest:jr,allowUserMedia:jr,alt:null,as:null,async:jr,autoCapitalize:null,autoComplete:kn,autoFocus:jr,autoPlay:jr,blocking:kn,capture:null,charSet:null,checked:jr,cite:null,className:kn,cols:xt,colSpan:null,content:null,contentEditable:ni,controls:jr,controlsList:kn,coords:xt|ju,crossOrigin:null,data:null,dateTime:null,decoding:null,default:jr,defer:jr,dir:null,dirName:null,disabled:jr,download:Iv,draggable:ni,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:jr,formTarget:null,headers:kn,height:xt,hidden:Iv,high:xt,href:null,hrefLang:null,htmlFor:kn,httpEquiv:kn,id:null,imageSizes:null,imageSrcSet:null,inert:jr,inputMode:null,integrity:null,is:null,isMap:jr,itemId:null,itemProp:kn,itemRef:kn,itemScope:jr,itemType:kn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:jr,low:xt,manifest:null,max:null,maxLength:xt,media:null,method:null,min:null,minLength:xt,multiple:jr,muted:jr,name:null,nonce:null,noModule:jr,noValidate:jr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:jr,optimum:xt,pattern:null,ping:kn,placeholder:null,playsInline:jr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:jr,referrerPolicy:null,rel:kn,required:jr,reversed:jr,rows:xt,rowSpan:xt,sandbox:kn,scope:null,scoped:jr,seamless:jr,selected:jr,shadowRootClonable:jr,shadowRootDelegatesFocus:jr,shadowRootMode:null,shape:null,size:xt,sizes:null,slot:null,span:xt,spellCheck:ni,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xt,step:null,style:null,tabIndex:xt,target:null,title:null,translate:null,type:null,typeMustMatch:jr,useMap:null,value:ni,width:xt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:kn,axis:null,background:null,bgColor:null,border:xt,borderColor:null,bottomMargin:xt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:jr,declare:jr,event:null,face:null,frame:null,frameBorder:null,hSpace:xt,leftMargin:xt,link:null,longDesc:null,lowSrc:null,marginHeight:xt,marginWidth:xt,noResize:jr,noHref:jr,noShade:jr,noWrap:jr,object:null,profile:null,prompt:null,rev:null,rightMargin:xt,rules:null,scheme:null,scrolling:ni,standby:null,summary:null,text:null,topMargin:xt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:jr,disableRemotePlayback:jr,prefix:null,property:null,results:xt,security:null,unselectable:null},space:"html",transform:qS}),vne=Hu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ma,accentHeight:xt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xt,amplitude:xt,arabicForm:null,ascent:xt,attributeName:null,attributeType:null,azimuth:xt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xt,by:null,calcMode:null,capHeight:xt,className:kn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xt,diffuseConstant:xt,direction:null,display:null,dur:null,divisor:xt,dominantBaseline:null,download:jr,dx:null,dy:null,edgeMode:null,editable:null,elevation:xt,enableBackground:null,end:null,event:null,exponent:xt,externalResourcesRequired:null,fill:null,fillOpacity:xt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ju,g2:ju,glyphName:ju,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xt,horizOriginX:xt,horizOriginY:xt,id:null,ideographic:xt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xt,k:xt,k1:xt,k2:xt,k3:xt,k4:xt,kernelMatrix:Ma,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xt,overlineThickness:xt,paintOrder:null,panose1:null,path:null,pathLength:xt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:kn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xt,pointsAtY:xt,pointsAtZ:xt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ma,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ma,rev:Ma,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ma,requiredFeatures:Ma,requiredFonts:Ma,requiredFormats:Ma,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xt,specularExponent:xt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xt,strikethroughThickness:xt,string:null,stroke:null,strokeDashArray:Ma,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xt,strokeOpacity:xt,strokeWidth:null,style:null,surfaceScale:xt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ma,tabIndex:xt,tableValues:null,target:null,targetX:xt,targetY:xt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ma,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xt,underlineThickness:xt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xt,values:null,vAlphabetic:xt,vMathematical:xt,vectorEffect:null,vHanging:xt,vIdeographic:xt,version:null,vertAdvY:xt,vertOriginX:xt,vertOriginY:xt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:HS}),GS=Hu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(r,e){return"xlink:"+e.slice(5).toLowerCase()}}),$S=Hu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qS}),WS=Hu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(r,e){return"xml:"+e.slice(3).toLowerCase()}}),yne=/[A-Z]/g,VS=/-[a-z]/g,wne=/^data[-\w.:]+$/i;function XS(r,e){const t=Id(e);let n=e,i=fa;if(t in r.normal)return r.property[r.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&wne.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(VS,_ne);n="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!VS.test(a)){let s=a.replace(yne,xne);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=Pv}return new i(n,e)}function xne(r){return"-"+r.toLowerCase()}function _ne(r){return r.charAt(1).toUpperCase()}const KS=zS([jS,bne,GS,$S,WS],"html"),Rv=zS([jS,vne,GS,$S,WS],"svg");function YS(r){const e=[],t=String(r||"");let n=t.indexOf(","),i=0,a=!1;for(;!a;){n===-1&&(n=t.length,a=!0);const s=t.slice(i,n).trim();(s||!a)&&e.push(s),i=n+1,n=t.indexOf(",",i)}return e}function Sne(r,e){const t=e||{};return(r[r.length-1]===""?[...r,""]:r).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const QS=/[#.]/g;function kne(r,e){const t=r||"",n={};let i=0,a,s;for(;i<t.length;){QS.lastIndex=i;const o=QS.exec(t),l=t.slice(i,o?o.index:t.length);l&&(a?a==="#"?n.id=l:Array.isArray(n.className)?n.className.push(l):n.className=[l]:s=l,i+=l.length),o&&(a=o[0],i++)}return{type:"element",tagName:s||e||"div",properties:n,children:[]}}function JS(r){const e=String(r||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function Ane(r){return r.join(" ").trim()}function ZS(r,e,t){const n=t?Mne(t):void 0;function i(a,s,...o){let l;if(a==null){l={type:"root",children:[]};const c=s;o.unshift(c)}else{l=kne(a,e);const c=l.tagName.toLowerCase(),u=n?n.get(c):void 0;if(l.tagName=u||c,Cne(s))o.unshift(s);else for(const[h,d]of Object.entries(s))Ene(r,l.properties,h,d)}for(const c of o)Fv(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Cne(r){if(r===null||typeof r!="object"||Array.isArray(r))return!0;if(typeof r.type!="string")return!1;const e=r,t=Object.keys(r);for(const n of t){const i=e[n];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const a=i;for(const s of a)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in r&&Array.isArray(r.children))}function Ene(r,e,t,n){const i=XS(r,t);let a;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;a=n}else typeof n=="boolean"?a=n:typeof n=="string"?i.spaceSeparated?a=JS(n):i.commaSeparated?a=YS(n):i.commaOrSpaceSeparated?a=JS(YS(n).join(" ")):a=ek(i,i.property,n):Array.isArray(n)?a=[...n]:a=i.property==="style"?Tne(n):String(n);if(Array.isArray(a)){const s=[];for(const o of a)s.push(ek(i,i.property,o));a=s}i.property==="className"&&Array.isArray(e.className)&&(a=e.className.concat(a)),e[i.property]=a}}function Fv(r,e){if(e!=null)if(typeof e=="number"||typeof e=="string")r.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const t of e)Fv(r,t);else if(typeof e=="object"&&"type"in e)e.type==="root"?Fv(r,e.children):r.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function ek(r,e,t){if(typeof t=="string"){if(r.number&&t&&!Number.isNaN(Number(t)))return Number(t);if((r.boolean||r.overloadedBoolean)&&(t===""||Id(t)===Id(e)))return!0}return t}function Tne(r){const e=[];for(const[t,n]of Object.entries(r))e.push([t,n].join(": "));return e.join("; ")}function Mne(r){const e=new Map;for(const t of r)e.set(t.toLowerCase(),t);return e}const Ine=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],One=ZS(KS,"div"),Nne=ZS(Rv,"g",Ine),Dv={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};function Pne(r,e){return tk(r,{})||{type:"root",children:[]}}function tk(r,e){const t=Rne(r,e);return t&&e.afterTransform&&e.afterTransform(r,t),t}function Rne(r,e){switch(r.nodeType){case 1:return Bne(r,e);case 3:return Dne(r);case 8:return Lne(r);case 9:return rk(r,e);case 10:return Fne();case 11:return rk(r,e);default:return}}function rk(r,e){return{type:"root",children:nk(r,e)}}function Fne(){return{type:"doctype"}}function Dne(r){return{type:"text",value:r.nodeValue||""}}function Lne(r){return{type:"comment",value:r.nodeValue||""}}function Bne(r,e){const t=r.namespaceURI,n=t===Dv.svg?Nne:One,i=t===Dv.html?r.tagName.toLowerCase():r.tagName,a=t===Dv.html&&i==="template"?r.content:r,s=r.getAttributeNames(),o={};let l=-1;for(;++l<s.length;)o[s[l]]=r.getAttribute(s[l])||"";return n(i,o,nk(a,e))}function nk(r,e){const t=r.childNodes,n=[];let i=-1;for(;++i<t.length;){const a=tk(t[i],e);a!==void 0&&n.push(a)}return n}new DOMParser;function zne(r,e){const t=Une(r);return Pne(t)}function Une(r){const e=document.createElement("template");return e.innerHTML=r,e.content}const jne={},Hne=[];function qne(r){const e=r||jne;return function(t,n){l3(t,"element",function(i,a){const s=Array.isArray(i.properties.className)?i.properties.className:Hne,o=s.includes("language-math"),l=s.includes("math-display"),c=s.includes("math-inline");let u=l;if(!o&&!l&&!c)return;let h=a[a.length-1],d=i;if(i.tagName==="code"&&o&&h&&h.type==="element"&&h.tagName==="pre"&&(d=h,h=a[a.length-2],u=!0),!h)return;const f=K_(d,{whitespace:"pre"});let p;try{p=H_.renderToString(f,{...e,displayMode:u,throwOnError:!0})}catch(y){const v=y,_=v.name.toLowerCase();n.message("Could not render math with KaTeX",{ancestors:[...a,i],cause:v,place:i.position,ruleId:_,source:"rehype-katex"});try{p=H_.renderToString(f,{...e,displayMode:u,strict:"ignore",throwOnError:!1})}catch{p=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(e.errorColor||"#cc0000"),title:String(y)},children:[{type:"text",value:f}]}]}}typeof p=="string"&&(p=zne(p).children);const m=h.children.indexOf(d);return h.children.splice(m,1,...p),I8})}}const Gne=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],$ne=/["&'<>`]/g,Wne=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vne=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Xne=/[|\\{}()[\]^$+*?.]/g,ik=new WeakMap;function Kne(r,e){if(r=r.replace(e.subset?Yne(e.subset):$ne,n),e.subset||e.escapeOnly)return r;return r.replace(Wne,t).replace(Vne,n);function t(i,a,s){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,s.charCodeAt(a+2),e)}function n(i,a,s){return e.format(i.charCodeAt(0),s.charCodeAt(a+1),e)}}function Yne(r){let e=ik.get(r);return e||(e=Qne(r),ik.set(r,e)),e}function Qne(r){const e=[];let t=-1;for(;++t<r.length;)e.push(r[t].replace(Xne,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const Jne=/[\dA-Fa-f]/;function Zne(r,e,t){const n="&#x"+r.toString(16).toUpperCase();return t&&e&&!Jne.test(String.fromCharCode(e))?n:n+";"}const eie=/\d/;function tie(r,e,t){const n="&#"+String(r);return t&&e&&!eie.test(String.fromCharCode(e))?n:n+";"}const rie=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Lv={nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",Agrave:"Ã",Aacute:"Ã",Acirc:"Ã",Atilde:"Ã",Auml:"Ã",Aring:"Ã",AElig:"Ã",Ccedil:"Ã",Egrave:"Ã",Eacute:"Ã",Ecirc:"Ã",Euml:"Ã",Igrave:"Ã",Iacute:"Ã",Icirc:"Ã",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã",Ograve:"Ã",Oacute:"Ã",Ocirc:"Ã",Otilde:"Ã",Ouml:"Ã",times:"Ã",Oslash:"Ã",Ugrave:"Ã",Uacute:"Ã",Ucirc:"Ã",Uuml:"Ã",Yacute:"Ã",THORN:"Ã",szlig:"Ã",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",divide:"Ã·",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",fnof:"Æ",Alpha:"Î",Beta:"Î",Gamma:"Î",Delta:"Î",Epsilon:"Î",Zeta:"Î",Eta:"Î",Theta:"Î",Iota:"Î",Kappa:"Î",Lambda:"Î",Mu:"Î",Nu:"Î",Xi:"Î",Omicron:"Î",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï",rho:"Ï",sigmaf:"Ï",sigma:"Ï",tau:"Ï",upsilon:"Ï",phi:"Ï",chi:"Ï",psi:"Ï",omega:"Ï",thetasym:"Ï",upsih:"Ï",piv:"Ï",bull:"â¢",hellip:"â¦",prime:"â²",Prime:"â³",oline:"â¾",frasl:"â",weierp:"â",image:"â",real:"â",trade:"â¢",alefsym:"âµ",larr:"â",uarr:"â",rarr:"â",darr:"â",harr:"â",crarr:"âµ",lArr:"â",uArr:"â",rArr:"â",dArr:"â",hArr:"â",forall:"â",part:"â",exist:"â",empty:"â",nabla:"â",isin:"â",notin:"â",ni:"â",prod:"â",sum:"â",minus:"â",lowast:"â",radic:"â",prop:"â",infin:"â",ang:"â ",and:"â§",or:"â¨",cap:"â©",cup:"âª",int:"â«",there4:"â´",sim:"â¼",cong:"â",asymp:"â",ne:"â ",equiv:"â¡",le:"â¤",ge:"â¥",sub:"â",sup:"â",nsub:"â",sube:"â",supe:"â",oplus:"â",otimes:"â",perp:"â¥",sdot:"â",lceil:"â",rceil:"â",lfloor:"â",rfloor:"â",lang:"â©",rang:"âª",loz:"â",spades:"â ",clubs:"â£",hearts:"â¥",diams:"â¦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Å",oelig:"Å",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",circ:"Ë",tilde:"Ë",ensp:"â",emsp:"â",thinsp:"â",zwnj:"â",zwj:"â",lrm:"â",rlm:"â",ndash:"â",mdash:"â",lsquo:"â",rsquo:"â",sbquo:"â",ldquo:"â",rdquo:"â",bdquo:"â",dagger:"â ",Dagger:"â¡",permil:"â°",lsaquo:"â¹",rsaquo:"âº",euro:"â¬"},nie=["cent","copy","divide","gt","lt","not","para","times"],ak={}.hasOwnProperty,Bv={};let Q1;for(Q1 in Lv)ak.call(Lv,Q1)&&(Bv[Lv[Q1]]=Q1);const iie=/[^\dA-Za-z]/;function aie(r,e,t,n){const i=String.fromCharCode(r);if(ak.call(Bv,i)){const a=Bv[i],s="&"+a;return t&&rie.includes(a)&&!nie.includes(a)&&(!n||e&&e!==61&&iie.test(String.fromCharCode(e)))?s:s+";"}return""}function sie(r,e,t){let n=Zne(r,e,t.omitOptionalSemicolons),i;if((t.useNamedReferences||t.useShortestReferences)&&(i=aie(r,e,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!i)&&t.useShortestReferences){const a=tie(r,e,t.omitOptionalSemicolons);a.length<n.length&&(n=a)}return i&&(!t.useShortestReferences||i.length<n.length)?i:n}function qu(r,e){return Kne(r,Object.assign({format:sie},e))}const oie=/^>|^->|<!--|-->|--!>|<!-$/g,lie=[">"],cie=["<",">"];function uie(r,e,t,n){return n.settings.bogusComments?"<?"+qu(r.value,Object.assign({},n.settings.characterReferences,{subset:lie}))+">":"<!--"+r.value.replace(oie,i)+"-->";function i(a){return qu(a,Object.assign({},n.settings.characterReferences,{subset:cie}))}}function hie(r,e,t,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}const die=/[ \t\n\f\r]/g;function zv(r){return typeof r=="object"?r.type==="text"?sk(r.value):!1:sk(r)}function sk(r){return r.replace(die,"")===""}const ci=lk(1),ok=lk(-1),fie=[];function lk(r){return e;function e(t,n,i){const a=t?t.children:fie;let s=(n||0)+r,o=a[s];if(!i)for(;o&&zv(o);)s+=r,o=a[s];return o}}const gie={}.hasOwnProperty;function ck(r){return e;function e(t,n,i){return gie.call(r,t.tagName)&&r[t.tagName](t,n,i)}}const Uv=ck({body:mie,caption:jv,colgroup:jv,dd:wie,dt:yie,head:jv,html:pie,li:vie,optgroup:xie,option:_ie,p:bie,rp:uk,rt:uk,tbody:kie,td:hk,tfoot:Aie,th:hk,thead:Sie,tr:Cie});function jv(r,e,t){const n=ci(t,e,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&zv(n.value.charAt(0)))}function pie(r,e,t){const n=ci(t,e);return!n||n.type!=="comment"}function mie(r,e,t){const n=ci(t,e);return!n||n.type!=="comment"}function bie(r,e,t){const n=ci(t,e);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function vie(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&n.tagName==="li"}function yie(r,e,t){const n=ci(t,e);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function wie(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function uk(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function xie(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&n.tagName==="optgroup"}function _ie(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function Sie(r,e,t){const n=ci(t,e);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function kie(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function Aie(r,e,t){return!ci(t,e)}function Cie(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&n.tagName==="tr"}function hk(r,e,t){const n=ci(t,e);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const Eie=ck({body:Iie,colgroup:Oie,head:Mie,html:Tie,tbody:Nie});function Tie(r){const e=ci(r,-1);return!e||e.type!=="comment"}function Mie(r){const e=new Set;for(const n of r.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(e.has(n.tagName))return!1;e.add(n.tagName)}const t=r.children[0];return!t||t.type==="element"}function Iie(r){const e=ci(r,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&zv(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Oie(r,e,t){const n=ok(t,e),i=ci(r,-1,!0);return t&&n&&n.type==="element"&&n.tagName==="colgroup"&&Uv(n,t.children.indexOf(n),t)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function Nie(r,e,t){const n=ok(t,e),i=ci(r,-1);return t&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&Uv(n,t.children.indexOf(n),t)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const J1={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Pie(r,e,t,n){const i=n.schema,a=i.space==="svg"?!1:n.settings.omitOptionalTags;let s=i.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(r.tagName.toLowerCase());const o=[];let l;i.space==="html"&&r.tagName==="svg"&&(n.schema=Rv);const c=Rie(n,r.properties),u=n.all(i.space==="html"&&r.tagName==="template"?r.content:r);return n.schema=i,u&&(s=!1),(c||!a||!Eie(r,e,t))&&(o.push("<",r.tagName,c?" "+c:""),s&&(i.space==="svg"||n.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!n.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&o.push(" "),o.push("/")),o.push(">")),o.push(u),!s&&(!a||!Uv(r,e,t))&&o.push("</"+r.tagName+">"),o.join("")}function Rie(r,e){const t=[];let n=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const a=Fie(r,i,e[i]);a&&t.push(a)}}for(;++n<t.length;){const a=r.settings.tightAttributes?t[n].charAt(t[n].length-1):void 0;n!==t.length-1&&a!=='"'&&a!=="'"&&(t[n]+=" ")}return t.join("")}function Fie(r,e,t){const n=XS(r.schema,e),i=r.settings.allowParseErrors&&r.schema.space==="html"?0:1,a=r.settings.allowDangerousCharacters?0:1;let s=r.quote,o;if(n.overloadedBoolean&&(t===n.attribute||t==="")?t=!0:(n.boolean||n.overloadedBoolean)&&(typeof t!="string"||t===n.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const l=qu(n.attribute,Object.assign({},r.settings.characterReferences,{subset:J1.name[i][a]}));return t===!0||(t=Array.isArray(t)?(n.commaSeparated?Sne:Ane)(t,{padLeft:!r.settings.tightCommaSeparatedLists}):String(t),r.settings.collapseEmptyAttributes&&!t)?l:(r.settings.preferUnquoted&&(o=qu(t,Object.assign({},r.settings.characterReferences,{attribute:!0,subset:J1.unquoted[i][a]}))),o!==t&&(r.settings.quoteSmart&&g1(t,s)>g1(t,r.alternative)&&(s=r.alternative),o=s+qu(t,Object.assign({},r.settings.characterReferences,{subset:(s==="'"?J1.single:J1.double)[i][a],attribute:!0}))+s),l+(o&&"="+o))}const Die=["<","&"];function dk(r,e,t,n){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?r.value:qu(r.value,Object.assign({},n.settings.characterReferences,{subset:Die}))}function Lie(r,e,t,n){return n.settings.allowDangerousHtml?r.value:dk(r,e,t,n)}function Bie(r,e,t,n){return n.all(r)}const zie=x8("type",{invalid:Uie,unknown:jie,handlers:{comment:uie,doctype:hie,element:Pie,raw:Lie,root:Bie,text:dk}});function Uie(r){throw new Error("Expected node, not `"+r+"`")}function jie(r){const e=r;throw new Error("Cannot compile unknown node `"+e.type+"`")}const Hie={},qie={},Gie=[];function $ie(r,e){const t=e||Hie,n=t.quote||'"',i=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:Wie,all:Vie,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||Gne,characterReferences:t.characterReferences||qie,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?Rv:KS,quote:n,alternative:i}.one(Array.isArray(r)?{type:"root",children:r}:r,void 0,void 0)}function Wie(r,e,t){return zie(r,e,t,this)}function Vie(r){const e=[],t=r&&r.children||Gie;let n=-1;for(;++n<t.length;)e[n]=this.one(t[n],n,r);return e.join("")}function Xie(r){const e=this,t={...e.data("settings"),...r};e.compiler=n;function n(i){return $ie(i,t)}}const Kie=/(```[\s\S]*?```|`[^`\n]+`)/g,Yie=new RegExp("(```[\\S\\s]*?```|`.*?`)|(?<!\\\\)\\\\\\[([\\S\\s]*?[^\\\\])\\\\]|(?<!\\\\)\\\\\\((.*?)\\\\\\)","g"),Qie=/\$\$([\s\S]*?\\\\[\s\S]*?)\$\$/;function Jie(r,e){return r.includes("$")?r.split(`
`).map(t=>{if(t.indexOf("$")==-1)return t;let n="",i=0;for(;i<t.length;){const a=t.indexOf("$",i);if(a==-1){n+=t.slice(i);break}const s=t.indexOf("$",a+1);if(s==-1){n+=t.slice(i);break}const o=a>0?t[a-1]:"",l=t[a+1],c=a+1<s?t[s-1]:"",u=s+1<t.length?t[s+1]:"";let h=!1;if(s==i+1&&(h=!0),/[A-Za-z0-9_$-]/.test(o)&&(h=!0),/[0-9]/.test(l)&&(/[A-Za-z0-9_$-]/.test(u)||c==" ")&&(h=!0),h){n+=t.slice(i,a+1),i=a+1;continue}n+=t.slice(i,a);const d=t.slice(a,s+1);e.push(d),n+=`<<LATEX_${e.length-1}>>`,i=s+1}return n}).join(`
`):r}function Zie(r){return r.replace(Yie,(e,t,n,i)=>t??(n!=null?`$$${n}$$`:i!=null?`$${i}$`:e))}function eae(r){const e=new Map;r=r.split(`
`).map((s,o)=>{const l=s.match(/^(>\s*)/);return l?(e.set(o,l[1]),s.slice(l[1].length)):s}).join(`
`);const i=[];r=r.replace(Kie,s=>(i.push(s),`<<CODE_BLOCK_${i.length-1}>>`));const a=[];return r=r.replace(/([\S].*?)\\\[([\s\S]*?)\\\](.*)/g,(s,o,l,c)=>{if(o.endsWith("\\"))return s;const u=/\S/.test(c);let h;return u?(a.push(`\\(${l.trim()}\\)`),h=""):(a.push(`\\[${l}\\]`),h=`
`),`${o}${h}<<LATEX_${a.length-1}>>${h}${c}`}),r=r.replace(new RegExp("(\\$\\$[\\s\\S]*?\\$\\$|(?<!\\\\)\\\\\\[[\\s\\S]*?\\\\\\]|(?<!\\\\)\\\\\\(.*?\\\\\\))","g"),s=>(a.push(s),`<<LATEX_${a.length-1}>>`)),r=Jie(r,a),r=r.replace(/\$(?=\d)/g,"\\$"),r=r.replace(/<<LATEX_(\d+)>>/g,(s,o)=>{let l=a[parseInt(o)];const c=l.match(Qie);if(c){const u=c[1],h=u.startsWith(`
`)?"":`
`,d=u.endsWith(`
`)?"":`
`;l="$$"+h+u+d+"$$"}return l}),r=r.replace(/<<CODE_BLOCK_(\d+)>>/g,(s,o)=>i[parseInt(o)]),r=Zie(r),r=r.replace(new RegExp("(?<!\\\\)\\\\\\((.+?)\\\\\\)","g"),"$$$1$").replace(new RegExp("(?<!\\\\)\\\\\\[([\\s\\S]*?)\\\\\\]","g"),(s,o,l)=>`${o}$$${l}$$`),e.size>0&&(r=r.split(`
`).map((l,c)=>{const u=e.get(c);return u?u+l:l}).join(`
`)),r}const tae="pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#79c0ff}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-comment,.hljs-code,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}",rae="pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#24292e;background:#fff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#005cc5}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-comment,.hljs-code,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:700}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:700}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}",nae=/\r?\n/,iae=new Set(["paragraph","heading","emphasis","strong","delete","link","linkReference","tableCell"]),fk="Â ",aae=fk.repeat(4);function sae(r){let e=0,t="";for(;e<r.length;){const n=r[e];if(n===" "){t+=fk,e+=1;continue}if(n==="	"){t+=aae,e+=1;continue}break}return t+r.slice(e)}function oae(r){const e=r.split(nae),t=[];for(const[n,i]of e.entries())n>0&&t.push({type:"break"}),t.push({type:"text",value:sae(i)});return t.length||t.push({type:"text",value:""}),t}const lae=()=>r=>{d1(r,"html",(e,t,n)=>{if(!n||typeof t!="number")return;const i=oae(e.value);if(!iae.has(n.type)){const a={type:"paragraph",children:i,data:{literalHtml:!0}},s=n.children;if(s.splice(t,1,a),t>0){const o=s[t-1];if(o?.type==="paragraph"&&o.data?.literalHtml){const l=o.children;return l.length&&l[l.length-1].type!=="break"&&l.push({type:"break"}),l.push(...a.children),s.splice(t,1),t}}return t+1}return n.children.splice(t,1,...i),t+i.length})};var cae=$('<!> <span class="sr-only">Close preview</span>',1),uae=$('<iframe sandbox="allow-scripts" class="code-preview-iframe"></iframe> <!>',1),hae=$("<!> <!>",1);function dae(r,e){ye(e,!0);let t=U(e,"open",15),n=ue(null);Nt(()=>{g(n)&&(t()?g(n).srcdoc=e.code:g(n).srcdoc="")});function i(o){t(o),e.onOpenChange?.(o)}var a=Z(),s=P(a);he(s,()=>t2,(o,l)=>{l(o,{get open(){return t()},onOpenChange:i,children:(c,u)=>{var h=Z(),d=P(h);he(d,()=>Zo,(f,p)=>{p(f,{children:(m,y)=>{var v=hae(),_=P(v);he(_,()=>Xf,(A,C)=>{C(A,{class:"code-preview-overlay"})});var S=te(_,2);he(S,()=>n2,(A,C)=>{C(A,{class:"code-preview-content",children:(k,M)=>{var N=uae(),F=P(N);Fr(F,W=>I(n,W),()=>g(n));var z=te(F,2);he(z,()=>r2,(W,V)=>{V(W,{class:"code-preview-close absolute top-4 right-4 border-none bg-transparent text-white opacity-70 mix-blend-difference transition-opacity hover:opacity-100 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:outline-none disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-8","aria-label":"Close preview",children:(Q,K)=>{var ie=cae(),L=P(ie);Ha(L,{}),Et(2),w(Q,ie)},$$slots:{default:!0}})}),Be(()=>zt(F,"title",`Preview ${e.language??""}`)),w(k,N)},$$slots:{default:!0}})}),w(m,v)},$$slots:{default:!0}})}),w(c,h)},$$slots:{default:!0}})}),w(r,a),we()}var fae=$("<div><!></div> <!>",1);function gk(r,e){ye(e,!0);let t=U(e,"class",3,""),n=ue(void 0),i=ue(""),a=ue(!1),s=ue(""),o=ue("text");function l(k){document.querySelectorAll("style[data-highlight-theme]").forEach(F=>F.remove());const N=document.createElement("style");N.setAttribute("data-highlight-theme","true"),N.textContent=k?tae:rae,document.head.appendChild(N)}Nt(()=>{const M=Hw.current==="dark";l(M)});let c=B(()=>()=>YY().use(MJ).use(Uee).use(nQ).use(lae).use(pne).use(qne).use(Ere).use(Xie));function u(k){if(!k.includes("<a"))return k;const M=document.createElement("div");M.innerHTML=k;const N=M.querySelectorAll("a[href]");let F=!1;for(const z of N){const W=z.getAttribute("target"),V=z.getAttribute("rel");(W!=="_blank"||V!=="noopener noreferrer")&&(F=!0),z.setAttribute("target","_blank"),z.setAttribute("rel","noopener noreferrer")}return F?M.innerHTML:k}function h(k){if(!k.includes("<pre"))return k;const M=document.createElement("div");M.innerHTML=k;const N=M.querySelectorAll("pre");let F=!1;for(const[z,W]of Array.from(N).entries()){const V=W.querySelector("code");if(!V)continue;F=!0;let Q="text";const K=Array.from(V.classList);for(const q of K)if(q.startsWith("language-")){Q=q.replace("language-","");break}const ie=V.textContent||"",L=`code-${Date.now()}-${z}`;V.setAttribute("data-code-id",L),V.setAttribute("data-raw-code",ie);const J=document.createElement("div");J.className="code-block-wrapper";const X=document.createElement("div");X.className="code-block-header";const re=document.createElement("span");re.className="code-language",re.textContent=Q;const D=document.createElement("button");D.className="copy-code-btn",D.setAttribute("data-code-id",L),D.setAttribute("title","Copy code"),D.setAttribute("type","button"),D.innerHTML=`
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy-icon lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                        `;const se=document.createElement("div");if(se.className="code-block-actions",se.appendChild(D),Q.toLowerCase()==="html"){const q=document.createElement("button");q.className="preview-code-btn",q.setAttribute("data-code-id",L),q.setAttribute("title","Preview code"),q.setAttribute("type","button"),q.innerHTML=`
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye lucide-eye-icon"><path d="M2.062 12.345a1 1 0 0 1 0-.69C3.5 7.73 7.36 5 12 5s8.5 2.73 9.938 6.655a1 1 0 0 1 0 .69C20.5 16.27 16.64 19 12 19s-8.5-2.73-9.938-6.655"/><circle cx="12" cy="12" r="3"/></svg>
                                `,se.appendChild(q)}X.appendChild(re),X.appendChild(se),J.appendChild(X);const ce=W.cloneNode(!0);J.appendChild(ce),W.parentNode?.replaceChild(J,W)}return F?M.innerHTML:k}async function d(k){try{let M=eae(k);const N=await g(c)().process(M),F=String(N),z=u(F);return h(z)}catch(M){return console.error("Markdown processing error:",M),k.replace(/\n/g,"<br>")}}function f(k){const M=k.closest(".code-block-wrapper");if(!M)return console.error("No wrapper found"),null;const N=M.querySelector("code[data-code-id]");if(!N)return console.error("No code element found in wrapper"),null;const F=N.getAttribute("data-raw-code");if(F===null)return console.error("No raw code found"),null;const W=M.querySelector(".code-language")?.textContent?.trim()||"text";return{rawCode:F,language:W}}async function p(k){k.preventDefault(),k.stopPropagation();const M=k.currentTarget;if(!M)return;const N=f(M);if(N)try{await DU(N.rawCode)}catch(F){console.error("Failed to copy code:",F)}}function m(k){k.preventDefault(),k.stopPropagation();const M=k.currentTarget;if(!M)return;const N=f(M);N&&(I(s,N.rawCode,!0),I(o,N.language,!0),I(a,!0))}function y(){if(!g(n))return;const k=g(n).querySelectorAll(".code-block-wrapper");for(const M of k){const N=M.querySelector(".copy-code-btn"),F=M.querySelector(".preview-code-btn");N&&N.dataset.listenerBound!=="true"&&(N.dataset.listenerBound="true",N.addEventListener("click",p)),F&&F.dataset.listenerBound!=="true"&&(F.dataset.listenerBound="true",F.addEventListener("click",m))}}function v(k){I(a,k,!0),k||(I(s,""),I(o,"text"))}Nt(()=>{e.content?d(e.content).then(k=>{I(i,k,!0)}).catch(k=>{console.error("Failed to process markdown:",k),I(i,e.content.replace(/\n/g,"<br>"),!0)}):I(i,"")}),Nt(()=>{g(n)&&g(i)&&y()});var _=fae(),S=P(_),A=G(S);d9(A,()=>g(i)),j(S),Fr(S,k=>I(n,k),()=>g(n));var C=te(S,2);dae(C,{get open(){return g(a)},get code(){return g(s)},get language(){return g(o)},onOpenChange:v}),Be(()=>er(S,1,di(t()),"svelte-1qk6xxt")),w(r,_),we()}var gae=$("<!> ",1),pae=$("<!> <!>",1),mae=$("<!> ",1),bae=$('<div><div class="flex items-center space-x-2"><div></div> <span class="text-sm text-muted-foreground"> </span></div> <!> <!></div>');function vae(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"showActions",3,!1),i=B(nB),a=B(Au),s=B(iB),o=B(rB);function l(){return g(a)?"bg-yellow-500":g(i)?"bg-red-500":g(o)?"bg-green-500":"bg-gray-500"}function c(){return g(a)?"Connecting...":g(i)?"Connection Error":g(o)?"Connected":"Unknown"}var u=bae(),h=G(u),d=G(h),f=te(d,2),p=G(f,!0);j(f),j(h);var m=te(h,2);{var y=S=>{var A=pae(),C=P(A);Xb(C,{variant:"outline",class:"text-xs",children:(N,F)=>{var z=gae(),W=P(z);t6(W,{class:"mr-1 h-3 w-3"});var V=te(W);Be(()=>nt(V,` ${g(s)||"Unknown Model"}`)),w(N,z)},$$slots:{default:!0}});var k=te(C,2);{var M=N=>{Xb(N,{variant:"secondary",class:"text-xs",children:(F,z)=>{Et();var W=tr();Be(V=>nt(W,`context: ${V??""}`),[()=>g(o).default_generation_settings.n_ctx.toLocaleString()]),w(F,W)},$$slots:{default:!0}})};le(k,N=>{g(o).default_generation_settings.n_ctx&&N(M)})}w(S,A)};le(m,S=>{g(o)&&!g(i)&&S(y)})}var v=te(m,2);{var _=S=>{Lr(S,{variant:"outline",size:"sm",class:"text-destructive",children:(A,C)=>{var k=mae(),M=P(k);zh(M,{class:"h-4 w-4"});var N=te(M);Be(()=>nt(N,` ${g(i)??""}`)),w(A,k)},$$slots:{default:!0}})};le(v,S=>{n()&&g(i)&&S(_)})}j(u),Be((S,A)=>{er(u,1,`flex items-center space-x-3 ${t()??""}`),er(d,1,`h-2 w-2 rounded-full ${S??""}`),nt(p,A)},[l,c]),w(r,u),we()}var yae=$("<!> Enter API Key",1),wae=$('<div class="mb-4"><!></div>'),xae=$('<div class="absolute top-1/2 right-3 -translate-y-1/2"><!></div>'),_ae=$('<div class="absolute top-1/2 right-3 -translate-y-1/2"><!></div>'),Sae=$('<div class="absolute top-1/2 right-3 -translate-y-1/2"><!></div>'),kae=$('<p class="text-sm text-destructive"> </p>'),Aae=$('<p class="text-sm text-green-600">â API key validated successfully! Connecting...</p>'),Cae=$("<!> Validating...",1),Eae=$('<div class="mb-4 space-y-3 text-left"><div class="space-y-2"><!> <div class="relative"><!> <!></div> <!> <!></div> <div class="flex gap-2"><!> <!></div></div>'),Tae=$("<!> Connecting...",1),Mae=$("<!> Retry Connection",1),Iae=$("<div><!></div>"),Oae=$('<div class="mt-4 text-left"><details class="text-sm"><summary class="cursor-pointer text-muted-foreground hover:text-foreground">Troubleshooting</summary> <div class="mt-2 space-y-3 text-xs text-muted-foreground"><div class="space-y-2"><p class="mb-4 font-medium">Start the Delta server:</p> <div class="rounded bg-muted/50 px-2 py-1 font-mono text-xs"><p>delta server</p></div> <p>or</p> <div class="rounded bg-muted/50 px-2 py-1 font-mono text-xs"><p class="mt-1">delta server -m locally-stored-model.gguf</p></div></div> <ul class="list-disc space-y-1 pl-4"><li>Check that the server is accessible at the correct URL</li> <li>Verify your network connection</li> <li>Check server logs for any error messages</li></ul></div></details></div>'),Nae=$('<div><div class="w-full max-w-md px-4 text-center"><div class="mb-6"><div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10"><!></div> <h2 class="mb-2 text-xl font-semibold">Server Connection Error</h2> <p class="mb-4 text-sm text-muted-foreground"> </p></div> <!> <!> <!> <!></div></div>');function pk(r,e){ye(e,!0);let t=U(e,"class",3,""),n=U(e,"showRetry",3,!0),i=U(e,"showTroubleshooting",3,!1),a=B(Au),s=B(()=>e.error.toLowerCase().includes("access denied")||e.error.toLowerCase().includes("invalid api key")||e.error.toLowerCase().includes("unauthorized")||e.error.toLowerCase().includes("401")||e.error.toLowerCase().includes("403")),o=ue(""),l=ue(!1),c=ue("idle"),u=ue("");function h(){e.onRetry?e.onRetry():ei.fetchServerProps()}function d(){I(l,!0);const K=un();I(o,K.apiKey?.toString()||"",!0)}async function f(){if(g(o).trim()){I(c,"validating"),I(u,"");try{oB("apiKey",g(o).trim());const K=await fetch("./props",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${g(o).trim()}`}});K.ok?(I(c,"success"),setTimeout(()=>{Go("#/")},1e3)):(I(c,"error"),K.status===401||K.status===403?I(u,"Invalid API key - please check and try again"):I(u,`Authentication failed (${K.status})`),setTimeout(()=>{I(c,"idle")},3e3))}catch(K){I(c,"error"),K instanceof Error?K.message.includes("fetch")?I(u,"Cannot connect to server - check if server is running"):I(u,K.message,!0):I(u,"Connection error - please try again"),setTimeout(()=>{I(c,"idle")},3e3)}}}function p(K){K.key==="Enter"&&f()}var m=Nae(),y=G(m),v=G(y),_=G(v),S=G(_);zh(S,{class:"h-8 w-8 text-destructive"}),j(_);var A=te(_,4),C=G(A,!0);j(A),j(v);var k=te(v,2);{var M=K=>{var ie=wae(),L=G(ie);Lr(L,{onclick:d,variant:"outline",class:"w-full",children:(J,X)=>{var re=yae(),D=P(re);oR(D,{class:"h-4 w-4"}),Et(),w(J,re)},$$slots:{default:!0}}),j(ie),xi(1,ie,()=>Fs,()=>({y:10,duration:300,delay:200})),w(K,ie)};le(k,K=>{g(s)&&!g(l)&&K(M)})}var N=te(k,2);{var F=K=>{var ie=Eae(),L=G(ie),J=G(L);ud(J,{for:"api-key-input",class:"text-sm font-medium",children:(Ae,be)=>{Et();var Ee=tr("API Key");w(Ae,Ee)},$$slots:{default:!0}});var X=te(J,2),re=G(X);{let Ae=B(()=>g(c)==="error"?"border-destructive":g(c)==="success"?"border-green-500":""),be=B(()=>g(c)==="validating");Mu(re,{id:"api-key-input",placeholder:"Enter your API key...",onkeydown:p,get class(){return`w-full pr-10 ${g(Ae)??""}`},get disabled(){return g(be)},get value(){return g(o)},set value(Ee){I(o,Ee,!0)}})}var D=te(re,2);{var se=Ae=>{var be=xae(),Ee=G(be);sc(Ee,{class:"h-4 w-4 animate-spin text-muted-foreground"}),j(be),w(Ae,be)},ce=Ae=>{var be=Z(),Ee=P(be);{var $e=He=>{var We=_ae(),rt=G(We);JP(rt,{class:"h-4 w-4 text-green-500"}),j(We),xi(1,We,()=>pw,()=>({duration:200,start:.8})),w(He,We)},Ye=He=>{var We=Z(),rt=P(We);{var Qe=ut=>{var ft=Sae(),ht=G(ft);ZP(ht,{class:"h-4 w-4 text-destructive"}),j(ft),xi(1,ft,()=>pw,()=>({duration:200,start:.8})),w(ut,ft)};le(rt,ut=>{g(c)==="error"&&ut(Qe)},!0)}w(He,We)};le(Ee,He=>{g(c)==="success"?He($e):He(Ye,!1)},!0)}w(Ae,be)};le(D,Ae=>{g(c)==="validating"?Ae(se):Ae(ce,!1)})}j(X);var q=te(X,2);{var ae=Ae=>{var be=kae(),Ee=G(be,!0);j(be),Be(()=>nt(Ee,g(u))),xi(1,be,()=>Fs,()=>({y:-10,duration:200})),w(Ae,be)};le(q,Ae=>{g(u)&&Ae(ae)})}var fe=te(q,2);{var xe=Ae=>{var be=Aae();xi(1,be,()=>Fs,()=>({y:-10,duration:200})),w(Ae,be)};le(fe,Ae=>{g(c)==="success"&&Ae(xe)})}j(L);var pe=te(L,2),Ce=G(pe);{let Ae=B(()=>!g(o).trim()||g(c)==="validating"||g(c)==="success");Lr(Ce,{onclick:f,get disabled(){return g(Ae)},class:"flex-1",children:(be,Ee)=>{var $e=Z(),Ye=P($e);{var He=rt=>{var Qe=Cae(),ut=P(Qe);sc(ut,{class:"h-4 w-4 animate-spin"}),Et(),w(rt,Qe)},We=rt=>{var Qe=Z(),ut=P(Qe);{var ft=it=>{var Je=tr("Success!");w(it,Je)},ht=it=>{var Je=tr("Save & Retry");w(it,Je)};le(ut,it=>{g(c)==="success"?it(ft):it(ht,!1)},!0)}w(rt,Qe)};le(Ye,rt=>{g(c)==="validating"?rt(He):rt(We,!1)})}w(be,$e)},$$slots:{default:!0}})}var Te=te(Ce,2);{let Ae=B(()=>g(c)==="validating");Lr(Te,{onclick:()=>{I(l,!1),I(c,"idle"),I(u,"")},variant:"outline",class:"flex-1",get disabled(){return g(Ae)},children:(be,Ee)=>{Et();var $e=tr("Cancel");w(be,$e)},$$slots:{default:!0}})}j(pe),j(ie),xi(1,ie,()=>Fs,()=>({y:10,duration:300,delay:200})),w(K,ie)};le(N,K=>{g(l)&&K(F)})}var z=te(N,2);{var W=K=>{var ie=Iae(),L=G(ie);Lr(L,{onclick:h,get disabled(){return g(a)},class:"w-full",children:(J,X)=>{var re=Z(),D=P(re);{var se=q=>{var ae=Tae(),fe=P(ae);sc(fe,{class:"h-4 w-4 animate-spin"}),Et(),w(q,ae)},ce=q=>{var ae=Mae(),fe=P(ae);sc(fe,{class:"h-4 w-4"}),Et(),w(q,ae)};le(D,q=>{g(a)?q(se):q(ce,!1)})}w(J,re)},$$slots:{default:!0}}),j(ie),xi(1,ie,()=>Fs,()=>({y:10,duration:300,delay:200})),w(K,ie)};le(z,K=>{n()&&K(W)})}var V=te(z,2);{var Q=K=>{var ie=Oae();xi(1,ie,()=>Fs,()=>({y:10,duration:300,delay:400})),w(K,ie)};le(V,K=>{i()&&K(Q)})}j(y),j(m),Be(()=>{er(m,1,`flex h-full items-center justify-center ${t()??""}`),nt(C,e.error)}),xi(1,v,()=>Y0,()=>({duration:300})),w(r,m),we()}var Pae=$('<div><div class="text-center"><div class="mb-4"><div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted"><!></div> <h2 class="mb-2 text-xl font-semibold">Connecting to Server</h2> <p class="text-sm text-muted-foreground"> </p></div> <div class="mt-4"><!></div></div></div>');function Rae(r,e){let t=U(e,"class",3,""),n=U(e,"message",3,"Initializing connection to Delta server...");var i=Pae(),a=G(i),s=G(a),o=G(s),l=G(o);t6(l,{class:"h-8 w-8 animate-pulse text-muted-foreground"}),j(o);var c=te(o,4),u=G(c,!0);j(c),j(s);var h=te(s,2),d=G(h);vae(d,{class:"justify-center"}),j(h),j(a),j(i),Be(()=>{er(i,1,`flex h-full items-center justify-center ${t()??""}`),nt(u,n())}),xi(1,s,()=>Y0,()=>({duration:300})),w(r,i)}var Fae=$("<p> </p>"),Dae=$("<!> <!>",1);function Od(r,e){let t=U(e,"variant",3,"ghost"),n=U(e,"size",3,"sm"),i=U(e,"class",3,""),a=U(e,"disabled",3,!1);var s=Z(),o=P(s);he(o,()=>In,(l,c)=>{c(l,{get delayDuration(){return Eu},children:(u,h)=>{var d=Dae(),f=P(d);he(f,()=>Tn,(m,y)=>{y(m,{children:(v,_)=>{{let S=B(()=>e["aria-label"]||e.tooltip);Lr(v,{get variant(){return t()},get size(){return n()},get disabled(){return a()},get onclick(){return e.onclick},get class(){return`h-6 w-6 p-0 ${i()??""} flex`},get"aria-label"(){return g(S)},children:(A,C)=>{var k=Z();const M=B(()=>e.icon);var N=P(k);he(N,()=>g(M),(F,z)=>{z(F,{class:"h-3 w-3"})}),w(A,k)},$$slots:{default:!0}})}},$$slots:{default:!0}})});var p=te(f,2);he(p,()=>Mn,(m,y)=>{y(m,{children:(v,_)=>{var S=Fae(),A=G(S,!0);j(S),Be(()=>nt(A,e.tooltip)),w(v,S)},$$slots:{default:!0}})}),w(u,d)},$$slots:{default:!0}})}),w(r,s)}const Hv=(r,e=je,t=je)=>{var n=Z(),i=P(n);he(i,e,(a,s)=>{s(a,{get class(){return t()}})}),w(r,n)};var Lae=$('<!> <span class="sr-only"> </span>',1),Bae=$("<p> </p>"),zae=$("<!> <!>",1),Uae=$('<div class="flex items-center gap-2"><!> </div> <!>',1),jae=$("<!> <!>",1),Hae=$("<!> <!>",1);function qae(r,e){ye(e,!0);let t=U(e,"triggerClass",3,""),n=U(e,"align",3,"end"),i=U(e,"open",15,!1);var a=Z(),s=P(a);he(s,()=>Pb,(o,l)=>{l(o,{get open(){return i()},set open(c){i(c)},children:(c,u)=>{var h=Hae(),d=P(h);he(d,()=>Nb,(p,m)=>{m(p,{get class(){return`flex h-6 w-6 cursor-pointer items-center justify-center rounded-md p-0 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:bg-accent data-[state=open]:text-accent-foreground ${t()??""}`},onclick:y=>y.stopPropagation(),children:(y,v)=>{var _=Z(),S=P(_);{var A=k=>{var M=Z(),N=P(M);he(N,()=>In,(F,z)=>{z(F,{get delayDuration(){return Eu},children:(W,V)=>{var Q=zae(),K=P(Q);he(K,()=>Tn,(L,J)=>{J(L,{children:(X,re)=>{var D=Lae(),se=P(D);Hv(se,()=>e.triggerIcon,()=>"h-3 w-3");var ce=te(se,2),q=G(ce,!0);j(ce),Be(()=>nt(q,e.triggerTooltip)),w(X,D)},$$slots:{default:!0}})});var ie=te(K,2);he(ie,()=>Mn,(L,J)=>{J(L,{children:(X,re)=>{var D=Bae(),se=G(D,!0);j(D),Be(()=>nt(se,e.triggerTooltip)),w(X,D)},$$slots:{default:!0}})}),w(W,Q)},$$slots:{default:!0}})}),w(k,M)},C=k=>{Hv(k,()=>e.triggerIcon,()=>"h-3 w-3")};le(S,k=>{e.triggerTooltip?k(A):k(C,!1)})}w(y,_)},$$slots:{default:!0}})});var f=te(d,2);he(f,()=>Ob,(p,m)=>{m(p,{get align(){return n()},class:"z-[999999] w-48",children:(y,v)=>{var _=Z(),S=P(_);dn(S,19,()=>e.actions,A=>A.label,(A,C,k)=>{var M=jae(),N=P(M);{var F=W=>{var V=Z(),Q=P(V);he(Q,()=>wB,(K,ie)=>{ie(K,{})}),w(W,V)};le(N,W=>{g(C).separator&&g(k)>0&&W(F)})}var z=te(N,2);he(z,()=>Cu,(W,V)=>{V(W,{get onclick(){return g(C).onclick},get variant(){return g(C).variant},get disabled(){return g(C).disabled},class:"flex items-center justify-between hover:[&>kbd]:opacity-100",children:(Q,K)=>{var ie=Uae(),L=P(ie),J=G(L);Hv(J,()=>g(C).icon,()=>`h-4 w-4 ${g(C).variant==="destructive"?"text-destructive":""}`);var X=te(J);j(L);var re=te(L,2);{var D=se=>{Yb(se,{get keys(){return g(C).shortcut},get variant(){return g(C).variant}})};le(re,se=>{g(C).shortcut&&se(D)})}Be(()=>nt(X,` ${g(C).label??""}`)),w(Q,ie)},$$slots:{default:!0}})}),w(A,M)}),w(y,_)},$$slots:{default:!0}})}),w(c,h)},$$slots:{default:!0}})}),w(r,a),we()}var Gae=$("<!> ",1),$ae=$("<!> <!>",1),Wae=$("<!> <!>",1),Vae=$("<!> <!>",1);function qv(r,e){ye(e,!0);let t=U(e,"confirmText",3,"Confirm"),n=U(e,"cancelText",3,"Cancel"),i=U(e,"variant",3,"default");function a(c){c.key==="Enter"&&(c.preventDefault(),e.onConfirm()),e.onKeydown?.(c)}function s(c){c||e.onCancel()}var o=Z(),l=P(o);he(l,()=>wl,(c,u)=>{u(c,{get open(){return e.open},onOpenChange:s,children:(h,d)=>{var f=Z(),p=P(f);he(p,()=>vl,(m,y)=>{y(m,{onkeydown:a,children:(v,_)=>{var S=Vae(),A=P(S);he(A,()=>bl,(k,M)=>{M(k,{children:(N,F)=>{var z=$ae(),W=P(z);he(W,()=>pl,(Q,K)=>{K(Q,{class:"flex items-center gap-2",children:(ie,L)=>{var J=Gae(),X=P(J);{var re=se=>{var ce=Z();const q=B(()=>e.icon);var ae=P(ce);{let fe=B(()=>i()==="destructive"?"text-destructive":"");he(ae,()=>g(q),(xe,pe)=>{pe(xe,{get class(){return`h-5 w-5 ${g(fe)??""}`}})})}w(se,ce)};le(X,se=>{e.icon&&se(re)})}var D=te(X);Be(()=>nt(D,` ${e.title??""}`)),w(ie,J)},$$slots:{default:!0}})});var V=te(W,2);he(V,()=>yl,(Q,K)=>{K(Q,{children:(ie,L)=>{Et();var J=tr();Be(()=>nt(J,e.description)),w(ie,J)},$$slots:{default:!0}})}),w(N,z)},$$slots:{default:!0}})});var C=te(A,2);he(C,()=>ml,(k,M)=>{M(k,{children:(N,F)=>{var z=Wae(),W=P(z);he(W,()=>J0,(Q,K)=>{K(Q,{get onclick(){return e.onCancel},children:(ie,L)=>{Et();var J=tr();Be(()=>nt(J,n())),w(ie,J)},$$slots:{default:!0}})});var V=te(W,2);{let Q=B(()=>i()==="destructive"?"bg-destructive text-white hover:bg-destructive/80":"");he(V,()=>pc,(K,ie)=>{ie(K,{get onclick(){return e.onConfirm},get class(){return g(Q)},children:(L,J)=>{Et();var X=tr();Be(()=>nt(X,t())),w(L,X)},$$slots:{default:!0}})})}w(N,z)},$$slots:{default:!0}})}),w(v,S)},$$slots:{default:!0}})}),w(h,f)},$$slots:{default:!0}})}),w(r,o),we()}var Xae=$('<div class="flex h-screen w-full"><!> <!> <!></div>'),Kae=$("<!> <!>",1),Yae=$('<div class="flex h-screen w-full items-center justify-center bg-background"><div class="text-muted-foreground">Loading...</div></div>'),Qae=$("<!> <!> <!>",1);function Jae(r,e){ye(e,!0);let t=ue(Mr(typeof window>"u"));Nt(()=>{if(typeof window>"u"){I(t,!0);return}if(window.location.port!=="8080"){I(t,!0);return}const N=()=>{I(t,!0)};Promise.race([O7(),new Promise(F=>setTimeout(F,3e3))]).then(N)});let n=B(()=>ws.route.id==="/chat/[id]"),i=B(()=>ws.route.id==="/"),a=B(()=>ws.url.searchParams.get("new_chat")==="true"),s=B(()=>cd().length>0||vo()),o=B(un),l=ue(!1),c=ue(void 0),u=ue(void 0),h=ue(!1),d=ue(""),f=ue(""),p=null;function m(N){const F=N.ctrlKey||N.metaKey;F&&N.key==="k"&&(N.preventDefault(),g(u)?.activateSearchMode&&(g(u).activateSearchMode(),I(l,!0))),F&&N.shiftKey&&N.key==="O"&&(N.preventDefault(),Go("?new_chat=true#/")),N.shiftKey&&F&&N.key==="E"&&(N.preventDefault(),g(u)?.editActiveConversation&&g(u).editActiveConversation())}function y(){I(h,!1),p&&(p(!1),p=null)}function v(){I(h,!1),p&&(p(!0),p=null)}Nt(()=>{const N=g(o).alwaysShowSidebar===!0,F=g(o).autoShowSidebarOnNewChat!==!1;N?I(l,!0):g(i)&&!g(a)?I(l,!1):g(i)&&g(a)?I(l,F):g(n)?I(l,!0):I(l,g(s),!0)}),Nt(()=>{ei.fetchServerProps()}),Nt(()=>{ei.serverProps?.default_generation_settings?.params&&ln.syncWithServerDefaults()}),Nt(()=>{const N=un().apiKey;if((ws.route.id==="/"||ws.route.id==="/chat/[id]")&&ws.status!==401&&ws.status!==403){const F={"Content-Type":"application/json"};N&&N.trim()!==""&&(F.Authorization=`Bearer ${N.trim()}`),fetch("./props",{headers:F}).then(z=>{(z.status===401||z.status===403)&&window.location.reload()}).catch(z=>{console.error("Error checking API key:",z)})}}),Nt(()=>{hw(async(N,F)=>new Promise(z=>{I(d,N,!0),I(f,F,!0),p=z,I(h,!0)}))});var _=Qae();Bn("keydown",Kl,m);var S=P(_);l$(S,{});var A=te(S,2);PU(A,{richColors:!0});var C=te(A,2);{var k=N=>{var F=Kae(),z=P(F);CV(z,{get currentTitle(){return g(d)},get newTitle(){return g(f)},onConfirm:v,onCancel:y,get open(){return g(h)},set open(V){I(h,V,!0)}});var W=te(z,2);he(W,()=>TW,(V,Q)=>{Q(V,{get open(){return g(l)},set open(K){I(l,K,!0)},children:(K,ie)=>{var L=Xae();let J;var X=G(L);he(X,()=>WW,(se,ce)=>{ce(se,{class:"h-full",children:(q,ae)=>{Fr(lV(q,{}),fe=>I(u,fe,!0),()=>g(u))},$$slots:{default:!0}})});var re=te(X,2);{let se=B(()=>g(l)?"md:left-[var(--sidebar-width)]":"");he(re,()=>IW,(ce,q)=>{q(ce,{get class(){return`transition-left absolute left-0 z-[900] h-8 w-8 duration-200 ease-linear ${g(se)??""}`},style:"translate: 1rem 1rem;"})})}var D=te(re,2);he(D,()=>_W,(se,ce)=>{ce(se,{class:"flex flex-1 flex-col overflow-hidden",children:(q,ae)=>{var fe=Z(),xe=P(fe);Re(xe,()=>e.children??je),w(q,fe)},$$slots:{default:!0}})}),j(L),Be(se=>J=Ho(L,"",J,se),[()=>({height:`${g(c)??""}px`})]),w(K,L)},$$slots:{default:!0}})}),w(N,F)},M=N=>{var F=Yae();w(N,F)};le(C,N=>{g(t)?N(k):N(M,!1)})}wC("innerHeight",N=>I(c,N,!0)),w(r,_),we()}const Zae=Object.freeze(Object.defineProperty({__proto__:null,component:Jae},Symbol.toStringTag,{value:"Module"})),ese=()=>{const r=ys;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},tse={subscribe(r){return ese().page.subscribe(r)}};var rse=()=>Go("#/"),nse=$('<div class="flex h-full items-center justify-center"><div class="w-full max-w-md px-4 text-center"><div class="mb-6"><div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10"><svg class="h-8 w-8 text-destructive" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <h1 class="mb-2 text-2xl font-bold"> </h1> <p class="text-muted-foreground"> </p></div> <button class="rounded-md bg-primary px-4 py-2 text-primary-foreground hover:bg-primary/90">Go Home</button></div></div>');function ise(r,e){ye(e,!0);const[t,n]=kC(),i=()=>SC(tse,"$page",t);let a=B(()=>i().error),s=B(()=>i().status),o=B(()=>g(s)===401||g(s)===403||g(a)?.message?.toLowerCase().includes("access denied")||g(a)?.message?.toLowerCase().includes("unauthorized")||g(a)?.message?.toLowerCase().includes("invalid api key"));function l(){Go("#/")}var c=Z();df(f=>{Be(()=>Hc.title=`Error ${g(s)??""} - WebUI`)});var u=P(c);{var h=f=>{{let p=B(()=>g(a)?.message||"Access denied - check server permissions");pk(f,{get error(){return g(p)},onRetry:l,showRetry:!1,showTroubleshooting:!1})}},d=f=>{var p=nse(),m=G(p),y=G(m),v=te(G(y),2),_=G(v);j(v);var S=te(v,2),A=G(S,!0);j(S),j(y);var C=te(y,2);C.__click=[rse],j(m),j(p),Be(()=>{nt(_,`Error ${g(s)??""}`),nt(A,g(a)?.message||"Something went wrong")}),w(f,p)};le(u,f=>{g(o)?f(h):f(d,!1)})}w(r,c),we(),n()}Xn(["click"]);const ase=Object.freeze(Object.defineProperty({__proto__:null,component:ise},Symbol.toStringTag,{value:"Module"}));function sse(r,e){throw new yf(r,e)}async function mk(r){try{const e=un().apiKey,t={"Content-Type":"application/json"};e&&(t.Authorization=`Bearer ${e}`);const n=await r("./props",{headers:t});if(!n.ok){if(n.status===401||n.status===403)throw sse(401,"Access denied");console.warn(`Server responded with status ${n.status} during API key validation`);return}}catch(e){if(e&&typeof e=="object"&&"status"in e)throw e;console.warn("Cannot connect to server for API key validation:",e)}}const ose=Object.freeze(Object.defineProperty({__proto__:null,load:async({fetch:r})=>{await mk(r)}},Symbol.toStringTag,{value:"Module"}));function lse(r,e){ye(e,!0);let t=B(()=>ws.url.searchParams.get("q"));_i(async()=>{J7||await mr.initialize(),mr.clearActiveConversation(),g(t)!==null&&(await mr.createConversation(),await mr.sendMessage(g(t)))}),df(n=>{Hc.title="Delta - Chat Interface"}),Tw(r,{showCenteredEmpty:!0}),we()}const cse=Object.freeze(Object.defineProperty({__proto__:null,component:lse,universal:ose},Symbol.toStringTag,{value:"Module"})),use=Object.freeze(Object.defineProperty({__proto__:null,load:async({fetch:r})=>{await mk(r)}},Symbol.toStringTag,{value:"Module"}));function hse(r,e){ye(e,!0);let t=B(()=>ws.params.id),n;Nt(()=>{if(g(t)&&g(t)!==n){if(n=g(t),bo()?.id===g(t))return;(async()=>await mr.loadConversation(g(t))||await Go("#/"))()}}),Nt(()=>{if(typeof window<"u"){const i=()=>{vo()&&(console.log("Page unload detected while streaming - aborting stream"),X0())};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}}}),df(i=>{Be(a=>Hc.title=`${a??""} - Delta`,[()=>bo()?.name||"Chat"])}),Tw(r,{}),we()}const dse=Object.freeze(Object.defineProperty({__proto__:null,component:hse,universal:use},Symbol.toStringTag,{value:"Module"})),fse=Object.freeze(Object.defineProperty({__proto__:null,default:'/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n/**\n * pdfjsVersion = 5.4.54\n * pdfjsBuild = 295fb3ec4\n */\nconst e=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),t=[.001,0,0,.001,0,0],a=1.35,r=.35,i=.25925925925925924,n=1,s=2,o=4,c=8,l=16,h=64,u=128,d=256,f="pdfjs_internal_editor_",g=3,p=9,m=13,b=15,y=101,w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},x=0,S=4,k=1,C=2,v=3,F=1,T=2,O=3,M=4,D=5,R=6,N=7,E=8,L=9,j=10,_=11,U=12,X=13,q=14,H=15,W=16,z=17,$=20,G="Group",V="R",K=1,J=2,Y=4,Z=16,Q=32,ee=128,te=512,ae=1,re=2,ie=4096,ne=8192,se=32768,oe=65536,ce=131072,le=1048576,he=2097152,ue=8388608,de=16777216,fe=1,ge=2,pe=3,me=4,be=5,ye={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},we={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},xe={O:"PageOpen",C:"PageClose"},Se=1,Ae=5,ke=1,Ce=2,ve=3,Fe=4,Ie=5,Te=6,Oe=7,Me=8,De=9,Be=10,Re=11,Ne=12,Ee=13,Pe=14,Le=15,je=16,_e=17,Ue=18,Xe=19,qe=20,He=21,We=22,ze=23,$e=24,Ge=25,Ve=26,Ke=27,Je=28,Ye=29,Ze=30,Qe=31,et=32,tt=33,at=34,rt=35,it=36,nt=37,st=38,ot=39,ct=40,lt=41,ht=42,ut=43,dt=44,ft=45,gt=46,pt=47,mt=48,bt=49,yt=50,wt=51,xt=52,St=53,At=54,kt=55,Ct=56,vt=57,Ft=58,It=59,Tt=60,Ot=61,Mt=62,Dt=63,Bt=64,Rt=65,Nt=66,Et=67,Pt=68,Lt=69,jt=70,_t=71,Ut=72,Xt=73,qt=74,Ht=75,Wt=76,zt=77,$t=80,Gt=81,Vt=83,Kt=84,Jt=85,Yt=86,Zt=87,Qt=88,ea=89,ta=90,aa=91,ra=92,ia=93,na=94,sa=0,oa=1,ca=2,la=3,ha=1,ua=2;let da=Se;function getVerbosityLevel(){return da}function info(e){da>=Ae&&console.log(`Info: ${e}`)}function warn(e){da>=Se&&console.log(`Warning: ${e}`)}function unreachable(e){throw new Error(e)}function assert(e,t){e||unreachable(t)}function createValidAbsoluteUrl(e,t=null,a=null){if(!e)return null;if(a&&"string"==typeof e){if(a.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\\./g);t?.length>=2&&(e=`http://${e}`)}if(a.tryConvertEncoding)try{e=stringToUTF8String(e)}catch{}}const r=t?URL.parse(e,t):URL.parse(e);return function _isValidProtocol(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r)?r:null}function shadow(e,t,a,r=!1){Object.defineProperty(e,t,{value:a,enumerable:!r,configurable:!0,writable:!1});return a}const fa=function BaseExceptionClosure(){function BaseException(e,t){this.message=e;this.name=t}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();class PasswordException extends fa{constructor(e,t){super(e,"PasswordException");this.code=t}}class UnknownErrorException extends fa{constructor(e,t){super(e,"UnknownErrorException");this.details=t}}class InvalidPDFException extends fa{constructor(e){super(e,"InvalidPDFException")}}class ResponseException extends fa{constructor(e,t,a){super(e,"ResponseException");this.status=t;this.missing=a}}class FormatError extends fa{constructor(e){super(e,"FormatError")}}class AbortException extends fa{constructor(e){super(e,"AbortException")}}function bytesToString(e){"object"==typeof e&&void 0!==e?.length||unreachable("Invalid argument for bytesToString");const t=e.length,a=8192;if(t<a)return String.fromCharCode.apply(null,e);const r=[];for(let i=0;i<t;i+=a){const n=Math.min(i+a,t),s=e.subarray(i,n);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function stringToBytes(e){"string"!=typeof e&&unreachable("Invalid argument for stringToBytes");const t=e.length,a=new Uint8Array(t);for(let r=0;r<t;++r)a[r]=255&e.charCodeAt(r);return a}function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function objectSize(e){return Object.keys(e).length}class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const e=new Uint8Array(4);e[0]=1;return 1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return shadow(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ga=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class Util{static makeHexColor(e,t,a){return`#${ga[e]}${ga[t]}${ga[a]}`}static scaleMinMax(e,t){let a;if(e[0]){if(e[0]<0){a=t[0];t[0]=t[2];t[2]=a}t[0]*=e[0];t[2]*=e[0];if(e[3]<0){a=t[1];t[1]=t[3];t[3]=a}t[1]*=e[3];t[3]*=e[3]}else{a=t[0];t[0]=t[1];t[1]=a;a=t[2];t[2]=t[3];t[3]=a;if(e[1]<0){a=t[1];t[1]=t[3];t[3]=a}t[1]*=e[1];t[3]*=e[1];if(e[2]<0){a=t[0];t[0]=t[2];t[2]=a}t[0]*=e[2];t[2]*=e[2]}t[0]+=e[4];t[1]+=e[5];t[2]+=e[4];t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,a=0){const r=e[a],i=e[a+1];e[a]=r*t[0]+i*t[2]+t[4];e[a+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,a=0){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],c=t[5];for(let t=0;t<6;t+=2){const l=e[a+t],h=e[a+t+1];e[a+t]=l*r+h*n+o;e[a+t+1]=l*i+h*s+c}}static applyInverseTransform(e,t){const a=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(a*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i;e[1]=(-a*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,a){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],c=t[5],l=e[0],h=e[1],u=e[2],d=e[3];let f=r*l+o,g=f,p=r*u+o,m=p,b=s*h+c,y=b,w=s*d+c,x=w;if(0!==i||0!==n){const e=i*l,t=i*u,a=n*h,r=n*d;f+=a;m+=a;p+=r;g+=r;b+=e;x+=e;w+=t;y+=t}a[0]=Math.min(a[0],f,p,g,m);a[1]=Math.min(a[1],b,w,y,x);a[2]=Math.max(a[2],f,p,g,m);a[3]=Math.max(a[3],b,w,y,x)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const a=e[0],r=e[1],i=e[2],n=e[3],s=a**2+r**2,o=a*i+r*n,c=i**2+n**2,l=(s+c)/2,h=Math.sqrt(l**2-(s*c-o**2));t[0]=Math.sqrt(l+h||1);t[1]=Math.sqrt(l-h||1)}static normalizeRect(e){const t=e.slice(0);if(e[0]>e[2]){t[0]=e[2];t[2]=e[0]}if(e[1]>e[3]){t[1]=e[3];t[3]=e[1]}return t}static intersect(e,t){const a=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(a>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),n=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>n?null:[a,i,r,n]}static pointBoundingBox(e,t,a){a[0]=Math.min(a[0],e);a[1]=Math.min(a[1],t);a[2]=Math.max(a[2],e);a[3]=Math.max(a[3],t)}static rectBoundingBox(e,t,a,r,i){i[0]=Math.min(i[0],e,a);i[1]=Math.min(i[1],t,r);i[2]=Math.max(i[2],e,a);i[3]=Math.max(i[3],t,r)}static#e(e,t,a,r,i,n,s,o,c,l){if(c<=0||c>=1)return;const h=1-c,u=c*c,d=u*c,f=h*(h*(h*e+3*c*t)+3*u*a)+d*r,g=h*(h*(h*i+3*c*n)+3*u*s)+d*o;l[0]=Math.min(l[0],f);l[1]=Math.min(l[1],g);l[2]=Math.max(l[2],f);l[3]=Math.max(l[3],g)}static#t(e,t,a,r,i,n,s,o,c,l,h,u){if(Math.abs(c)<1e-12){Math.abs(l)>=1e-12&&this.#e(e,t,a,r,i,n,s,o,-h/l,u);return}const d=l**2-4*h*c;if(d<0)return;const f=Math.sqrt(d),g=2*c;this.#e(e,t,a,r,i,n,s,o,(-l+f)/g,u);this.#e(e,t,a,r,i,n,s,o,(-l-f)/g,u)}static bezierBoundingBox(e,t,a,r,i,n,s,o,c){c[0]=Math.min(c[0],e,s);c[1]=Math.min(c[1],t,o);c[2]=Math.max(c[2],e,s);c[3]=Math.max(c[3],t,o);this.#t(e,a,i,s,t,r,n,o,3*(3*(a-i)-e+s),6*(e-2*a+i),3*(a-e),c);this.#t(e,a,i,s,t,r,n,o,3*(3*(r-n)-t+o),6*(t-2*r+n),3*(r-t),c)}}const pa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(e,t=!1){if(e[0]>="Ã¯"){let a;if("Ã¾"===e[0]&&"Ã¿"===e[1]){a="utf-16be";e.length%2==1&&(e=e.slice(0,-1))}else if("Ã¿"===e[0]&&"Ã¾"===e[1]){a="utf-16le";e.length%2==1&&(e=e.slice(0,-1))}else"Ã¯"===e[0]&&"Â»"===e[1]&&"Â¿"===e[2]&&(a="utf-8");if(a)try{const r=new TextDecoder(a,{fatal:!0}),i=stringToBytes(e),n=r.decode(i);return t||!n.includes("\x1B")?n:n.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g,"")}catch(e){warn(`stringToPDFString: "${e}".`)}}const a=[];for(let r=0,i=e.length;r<i;r++){const n=e.charCodeAt(r);if(!t&&27===n){for(;++r<i&&27!==e.charCodeAt(r););continue}const s=pa[n];a.push(s?String.fromCharCode(s):e.charAt(r))}return a.join("")}function stringToUTF8String(e){return decodeURIComponent(escape(e))}function utf8StringToString(e){return unescape(encodeURIComponent(e))}function isArrayEqual(e,t){if(e.length!==t.length)return!1;for(let a=0,r=e.length;a<r;a++)if(e[a]!==t[a])return!1;return!0}function getModificationDate(e=new Date){e instanceof Date||(e=new Date(e));return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")}let ma=null,ba=null;function MathClamp(e,t,a){return Math.min(Math.max(e,t),a)}function toHexUtil(e){return Uint8Array.prototype.toHex?e.toHex():Array.from(e,(e=>ga[e])).join("")}"function"!=typeof Promise.try&&(Promise.try=function(e,...t){return new Promise((a=>{a(e(...t))}))});"function"!=typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce(((e,t)=>e+t),0)});const ya=Symbol("CIRCULAR_REF"),wa=Symbol("EOF");let xa=Object.create(null),Sa=Object.create(null),Aa=Object.create(null);class Name{constructor(e){this.name=e}static get(e){return Sa[e]||=new Name(e)}}class Cmd{constructor(e){this.cmd=e}static get(e){return xa[e]||=new Cmd(e)}}const ka=function nonSerializableClosure(){return ka};class Dict{constructor(e=null){this._map=new Map;this.xref=e;this.objId=null;this.suppressEncryption=!1;this.__nonSerializable__=ka}assignXref(e){this.xref=e}get size(){return this._map.size}get(e,t,a){let r=this._map.get(e);if(void 0===r&&void 0!==t){r=this._map.get(t);void 0===r&&void 0!==a&&(r=this._map.get(a))}return r instanceof Ref&&this.xref?this.xref.fetch(r,this.suppressEncryption):r}async getAsync(e,t,a){let r=this._map.get(e);if(void 0===r&&void 0!==t){r=this._map.get(t);void 0===r&&void 0!==a&&(r=this._map.get(a))}return r instanceof Ref&&this.xref?this.xref.fetchAsync(r,this.suppressEncryption):r}getArray(e,t,a){let r=this._map.get(e);if(void 0===r&&void 0!==t){r=this._map.get(t);void 0===r&&void 0!==a&&(r=this._map.get(a))}r instanceof Ref&&this.xref&&(r=this.xref.fetch(r,this.suppressEncryption));if(Array.isArray(r)){r=r.slice();for(let e=0,t=r.length;e<t;e++)r[e]instanceof Ref&&this.xref&&(r[e]=this.xref.fetch(r[e],this.suppressEncryption))}return r}getRaw(e){return this._map.get(e)}getKeys(){return[...this._map.keys()]}getRawValues(){return[...this._map.values()]}set(e,t){this._map.set(e,t)}setIfNotExists(e,t){this.has(e)||this.set(e,t)}setIfNumber(e,t){"number"==typeof t&&this.set(e,t)}setIfArray(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&this.set(e,t)}setIfDefined(e,t){null!=t&&this.set(e,t)}setIfName(e,t){"string"==typeof t?this.set(e,Name.get(t)):t instanceof Name&&this.set(e,t)}has(e){return this._map.has(e)}*[Symbol.iterator](){for(const[e,t]of this._map)yield[e,t instanceof Ref&&this.xref?this.xref.fetch(t,this.suppressEncryption):t]}static get empty(){const e=new Dict(null);e.set=(e,t)=>{unreachable("Should not call `set` on the empty dictionary.")};return shadow(this,"empty",e)}static merge({xref:e,dictArray:t,mergeSubDicts:a=!1}){const r=new Dict(e),i=new Map;for(const e of t)if(e instanceof Dict)for(const[t,r]of e._map){let e=i.get(t);if(void 0===e){e=[];i.set(t,e)}else if(!(a&&r instanceof Dict))continue;e.push(r)}for(const[t,a]of i){if(1===a.length||!(a[0]instanceof Dict)){r._map.set(t,a[0]);continue}const i=new Dict(e);for(const e of a)for(const[t,a]of e._map)i._map.has(t)||i._map.set(t,a);i.size>0&&r._map.set(t,i)}i.clear();return r.size>0?r:Dict.empty}clone(){const e=new Dict(this.xref);for(const t of this.getKeys())e.set(t,this.getRaw(t));return e}delete(e){delete this._map[e]}}class Ref{constructor(e,t){this.num=e;this.gen=t}toString(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}static fromString(e){const t=Aa[e];if(t)return t;const a=/^(\\d+)R(\\d*)$/.exec(e);return a&&"0"!==a[1]?Aa[e]=new Ref(parseInt(a[1]),a[2]?parseInt(a[2]):0):null}static get(e,t){const a=0===t?`${e}R`:`${e}R${t}`;return Aa[a]||=new Ref(e,t)}}class RefSet{constructor(e=null){this._set=new Set(e?._set)}has(e){return this._set.has(e.toString())}put(e){this._set.add(e.toString())}remove(e){this._set.delete(e.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}class RefSetCache{constructor(){this._map=new Map}get size(){return this._map.size}get(e){return this._map.get(e.toString())}has(e){return this._map.has(e.toString())}put(e,t){this._map.set(e.toString(),t)}putAlias(e,t){this._map.set(e.toString(),this.get(t))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}*values(){yield*this._map.values()}*items(){for(const[e,t]of this._map)yield[Ref.fromString(e),t]}}function isName(e,t){return e instanceof Name&&(void 0===t||e.name===t)}function isCmd(e,t){return e instanceof Cmd&&(void 0===t||e.cmd===t)}function isDict(e,t){return e instanceof Dict&&(void 0===t||isName(e.get("Type"),t))}function isRefsEqual(e,t){return e.num===t.num&&e.gen===t.gen}class BaseStream{get length(){unreachable("Abstract getter `length` accessed")}get isEmpty(){unreachable("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return shadow(this,"isDataLoaded",!0)}getByte(){unreachable("Abstract method `getByte` called")}getBytes(e){unreachable("Abstract method `getBytes` called")}async getImageData(e,t){return this.getBytes(e,t)}async asyncGetBytes(){unreachable("Abstract method `asyncGetBytes` called")}get isAsync(){return!1}get isAsyncDecoder(){return!1}get canAsyncDecodeImageFromBuffer(){return!1}async getTransferableImage(){return null}peekByte(){const e=this.getByte();-1!==e&&this.pos--;return e}peekBytes(e){const t=this.getBytes(e);this.pos-=t.length;return t}getUint16(){const e=this.getByte(),t=this.getByte();return-1===e||-1===t?-1:(e<<8)+t}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getByteRange(e,t){unreachable("Abstract method `getByteRange` called")}getString(e){return bytesToString(this.getBytes(e))}skip(e){this.pos+=e||1}reset(){unreachable("Abstract method `reset` called")}moveStart(){unreachable("Abstract method `moveStart` called")}makeSubStream(e,t,a=null){unreachable("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}const Ca=/^[1-9]\\.\\d$/,va=2**31-1,Fa=[1,0,0,1,0,0],Ia=["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"],Ta=["ExtGState","Font","Properties","XObject"];function getLookupTableFactory(e){let t;return function(){if(e){t=Object.create(null);e(t);e=null}return t}}class MissingDataException extends fa{constructor(e,t){super(`Missing data [${e}, ${t})`,"MissingDataException");this.begin=e;this.end=t}}class ParserEOFException extends fa{constructor(e){super(e,"ParserEOFException")}}class XRefEntryException extends fa{constructor(e){super(e,"XRefEntryException")}}class XRefParseException extends fa{constructor(e){super(e,"XRefParseException")}}function arrayBuffersToBytes(e){const t=e.length;if(0===t)return new Uint8Array(0);if(1===t)return new Uint8Array(e[0]);let a=0;for(let r=0;r<t;r++)a+=e[r].byteLength;const r=new Uint8Array(a);let i=0;for(let a=0;a<t;a++){const t=new Uint8Array(e[a]);r.set(t,i);i+=t.byteLength}return r}async function fetchBinaryData(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch file "${e}" with "${t.statusText}".`);return new Uint8Array(await t.arrayBuffer())}function getInheritableProperty({dict:e,key:t,getArray:a=!1,stopWhenFound:r=!0}){let i;const n=new RefSet;for(;e instanceof Dict&&(!e.objId||!n.has(e.objId));){e.objId&&n.put(e.objId);const s=a?e.getArray(t):e.get(t);if(void 0!==s){if(r)return s;(i||=[]).push(s)}e=e.get("Parent")}return i}const Oa=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function toRomanNumerals(e,t=!1){assert(Number.isInteger(e)&&e>0,"The number should be a positive integer.");const a="M".repeat(e/1e3|0)+Oa[e%1e3/100|0]+Oa[10+(e%100/10|0)]+Oa[20+e%10];return t?a.toLowerCase():a}function log2(e){return e>0?Math.ceil(Math.log2(e)):0}function readInt8(e,t){return e[t]<<24>>24}function readInt16(e,t){return(e[t]<<24|e[t+1]<<16)>>16}function readUint16(e,t){return e[t]<<8|e[t+1]}function readUint32(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function isWhiteSpace(e){return 32===e||9===e||13===e||10===e}function isNumberArray(e,t){return Array.isArray(e)?(null===t||e.length===t)&&e.every((e=>"number"==typeof e)):ArrayBuffer.isView(e)&&!(e instanceof BigInt64Array||e instanceof BigUint64Array)&&(null===t||e.length===t)}function lookupMatrix(e,t){return isNumberArray(e,6)?e:t}function lookupRect(e,t){return isNumberArray(e,4)?e:t}function lookupNormalRect(e,t){return isNumberArray(e,4)?Util.normalizeRect(e):t}function parseXFAPath(e){const t=/(.+)\\[(\\d+)\\]$/;return e.split(".").map((e=>{const a=e.match(t);return a?{name:a[1],pos:parseInt(a[2],10)}:{name:e,pos:0}}))}function escapePDFName(e){const t=[];let a=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);if(i<33||i>126||35===i||40===i||41===i||60===i||62===i||91===i||93===i||123===i||125===i||47===i||37===i){a<r&&t.push(e.substring(a,r));t.push(`#${i.toString(16)}`);a=r+1}}if(0===t.length)return e;a<e.length&&t.push(e.substring(a,e.length));return t.join("")}function escapeString(e){return e.replaceAll(/([()\\\\\\n\\r])/g,(e=>"\\n"===e?"\\\\n":"\\r"===e?"\\\\r":`\\\\${e}`))}function _collectJS(e,t,a,r){if(!e)return;let i=null;if(e instanceof Ref){if(r.has(e))return;i=e;r.put(i);e=t.fetch(e)}if(Array.isArray(e))for(const i of e)_collectJS(i,t,a,r);else if(e instanceof Dict){if(isName(e.get("S"),"JavaScript")){const t=e.get("JS");let r;t instanceof BaseStream?r=t.getString():"string"==typeof t&&(r=t);r&&=stringToPDFString(r,!0).replaceAll("\\0","");r&&a.push(r.trim())}_collectJS(e.getRaw("Next"),t,a,r)}i&&r.remove(i)}function collectActions(e,t,a){const r=Object.create(null),i=getInheritableProperty({dict:t,key:"AA",stopWhenFound:!1});if(i)for(let t=i.length-1;t>=0;t--){const n=i[t];if(n instanceof Dict)for(const t of n.getKeys()){const i=a[t];if(!i)continue;const s=[];_collectJS(n.getRaw(t),e,s,new RefSet);s.length>0&&(r[i]=s)}}if(t.has("A")){const a=[];_collectJS(t.get("A"),e,a,new RefSet);a.length>0&&(r.Action=a)}return objectSize(r)>0?r:null}const Ma={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"};function*codePointIter(e){for(let t=0,a=e.length;t<a;t++){const a=e.codePointAt(t);a>55295&&(a<57344||a>65533)&&t++;yield a}}function encodeToXmlString(e){const t=[];let a=0;for(let r=0,i=e.length;r<i;r++){const i=e.codePointAt(r);if(32<=i&&i<=126){const n=Ma[i];if(n){a<r&&t.push(e.substring(a,r));t.push(n);a=r+1}}else{a<r&&t.push(e.substring(a,r));t.push(`&#x${i.toString(16).toUpperCase()};`);i>55295&&(i<57344||i>65533)&&r++;a=r+1}}if(0===t.length)return e;a<e.length&&t.push(e.substring(a,e.length));return t.join("")}function validateFontName(e,t=!1){const a=/^("|\').*("|\')$/.exec(e);if(a&&a[1]===a[2]){if(new RegExp(`[^\\\\\\\\]${a[1]}`).test(e.slice(1,-1))){t&&warn(`FontFamily contains unescaped ${a[1]}: ${e}.`);return!1}}else for(const a of e.split(/[ \\t]+/))if(/^(\\d|(-(\\d|-)))/.test(a)||!/^[\\w-\\\\]+$/.test(a)){t&&warn(`FontFamily contains invalid <custom-ident>: ${e}.`);return!1}return!0}function validateCSSFont(e){const t=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:a,fontWeight:r,italicAngle:i}=e;if(!validateFontName(a,!0))return!1;const n=r?r.toString():"";e.fontWeight=t.has(n)?n:"400";const s=parseFloat(i);e.italicAngle=isNaN(s)||s<-90||s>90?"14":i.toString();return!0}function recoverJsURL(e){const t=new RegExp("^\\\\s*("+["app.launchURL","window.open","xfa.host.gotoURL"].join("|").replaceAll(".","\\\\.")+")\\\\((?:\'|\\")([^\'\\"]*)(?:\'|\\")(?:,\\\\s*(\\\\w+)\\\\)|\\\\))","i").exec(e);return t?.[2]?{url:t[2],newWindow:"app.launchURL"===t[1]&&"true"===t[3]}:null}function numberToString(e){if(Number.isInteger(e))return e.toString();const t=Math.round(100*e);return t%100==0?(t/100).toString():t%10==0?e.toFixed(1):e.toFixed(2)}function getNewAnnotationsMap(e){if(!e)return null;const t=new Map;for(const[a,r]of e){if(!a.startsWith(f))continue;let e=t.get(r.pageIndex);if(!e){e=[];t.set(r.pageIndex,e)}e.push(r)}return t.size>0?t:null}function stringToAsciiOrUTF16BE(e){return null==e||function isAscii(e){if("string"!=typeof e)return!1;return!e||/^[\\x00-\\x7F]*$/.test(e)}(e)?e:stringToUTF16String(e,!0)}function stringToUTF16HexString(e){const t=[];for(let a=0,r=e.length;a<r;a++){const r=e.charCodeAt(a);t.push(ga[r>>8&255],ga[255&r])}return t.join("")}function stringToUTF16String(e,t=!1){const a=[];t&&a.push("Ã¾Ã¿");for(let t=0,r=e.length;t<r;t++){const r=e.charCodeAt(t);a.push(String.fromCharCode(r>>8&255),String.fromCharCode(255&r))}return a.join("")}function getRotationMatrix(e,t,a){switch(e){case 90:return[0,1,-1,0,t,0];case 180:return[-1,0,0,-1,t,a];case 270:return[0,-1,1,0,0,a];default:throw new Error("Invalid rotation")}}function getSizeInBytes(e){return Math.ceil(Math.ceil(Math.log2(1+e))/8)}class QCMS{static#a=null;static _memory=null;static _mustAddAlpha=!1;static _destBuffer=null;static _destOffset=0;static _destLength=0;static _cssColor="";static _makeHexColor=null;static get _memoryArray(){const e=this.#a;return e?.byteLength?e:this.#a=new Uint8Array(this._memory.buffer)}}let Da;const Ba="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&Ba.decode();let Ra=null;function getUint8ArrayMemory0(){null!==Ra&&0!==Ra.byteLength||(Ra=new Uint8Array(Da.memory.buffer));return Ra}let Na=0;function passArray8ToWasm0(e,t){const a=t(1*e.length,1)>>>0;getUint8ArrayMemory0().set(e,a/1);Na=e.length;return a}const Ea=Object.freeze({RGB8:0,0:"RGB8",RGBA8:1,1:"RGBA8",BGRA8:2,2:"BGRA8",Gray8:3,3:"Gray8",GrayA8:4,4:"GrayA8",CMYK:5,5:"CMYK"}),Pa=Object.freeze({Perceptual:0,0:"Perceptual",RelativeColorimetric:1,1:"RelativeColorimetric",Saturation:2,2:"Saturation",AbsoluteColorimetric:3,3:"AbsoluteColorimetric"});function __wbg_get_imports(){const e={wbg:{}};e.wbg.__wbg_copyresult_b08ee7d273f295dd=function(e,t){!function copy_result(e,t){const{_mustAddAlpha:a,_destBuffer:r,_destOffset:i,_destLength:n,_memoryArray:s}=QCMS;if(t!==n)if(a)for(let a=e,n=e+t,o=i;a<n;a+=3,o+=4){r[o]=s[a];r[o+1]=s[a+1];r[o+2]=s[a+2];r[o+3]=255}else for(let a=e,n=e+t,o=i;a<n;a+=3,o+=4){r[o]=s[a];r[o+1]=s[a+1];r[o+2]=s[a+2]}else r.set(s.subarray(e,e+t),i)}(e>>>0,t>>>0)};e.wbg.__wbg_copyrgb_d60ce17bb05d9b67=function(e){!function copy_rgb(e){const{_destBuffer:t,_destOffset:a,_memoryArray:r}=QCMS;t[a]=r[e];t[a+1]=r[e+1];t[a+2]=r[e+2]}(e>>>0)};e.wbg.__wbg_makecssRGB_893bf0cd9fdb302d=function(e){!function make_cssRGB(e){const{_memoryArray:t}=QCMS;QCMS._cssColor=QCMS._makeHexColor(t[e],t[e+1],t[e+2])}(e>>>0)};e.wbg.__wbindgen_init_externref_table=function(){const e=Da.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0);e.set(t+0,void 0);e.set(t+1,null);e.set(t+2,!0);e.set(t+3,!1)};e.wbg.__wbindgen_throw=function(e,t){throw new Error(function getStringFromWasm0(e,t){e>>>=0;return Ba.decode(getUint8ArrayMemory0().subarray(e,e+t))}(e,t))};return e}function __wbg_finalize_init(e,t){Da=e.exports;__wbg_init.__wbindgen_wasm_module=t;Ra=null;Da.__wbindgen_start();return Da}async function __wbg_init(e){if(void 0!==Da)return Da;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead"));const t=__wbg_get_imports();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:a,module:r}=await async function __wbg_load(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n",t)}const a=await e.arrayBuffer();return await WebAssembly.instantiate(a,t)}{const a=await WebAssembly.instantiate(e,t);return a instanceof WebAssembly.Instance?{instance:a,module:e}:a}}(await e,t);return __wbg_finalize_init(a,r)}class ColorSpace{static#r=new Uint8ClampedArray(3);constructor(e,t){this.name=e;this.numComps=t}getRgb(e,t,a=new Uint8ClampedArray(3)){this.getRgbItem(e,t,a,0);return a}getRgbHex(e,t){const a=this.getRgb(e,t,ColorSpace.#r);return Util.makeHexColor(a[0],a[1],a[2])}getRgbItem(e,t,a,r){unreachable("Should not call ColorSpace.getRgbItem")}getRgbBuffer(e,t,a,r,i,n,s){unreachable("Should not call ColorSpace.getRgbBuffer")}getOutputLength(e,t){unreachable("Should not call ColorSpace.getOutputLength")}isPassthrough(e){return!1}isDefaultDecode(e,t){return ColorSpace.isDefaultDecode(e,this.numComps)}fillRgb(e,t,a,r,i,n,s,o,c){const l=t*a;let h=null;const u=1<<s,d=a!==i||t!==r;if(this.isPassthrough(s))h=o;else if(1===this.numComps&&l>u&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){const t=s<=8?new Uint8Array(u):new Uint16Array(u);for(let e=0;e<u;e++)t[e]=e;const a=new Uint8ClampedArray(3*u);this.getRgbBuffer(t,0,u,a,0,s,0);if(d){h=new Uint8Array(3*l);let e=0;for(let t=0;t<l;++t){const r=3*o[t];h[e++]=a[r];h[e++]=a[r+1];h[e++]=a[r+2]}}else{let t=0;for(let r=0;r<l;++r){const i=3*o[r];e[t++]=a[i];e[t++]=a[i+1];e[t++]=a[i+2];t+=c}}}else if(d){h=new Uint8ClampedArray(3*l);this.getRgbBuffer(o,0,l,h,0,s,0)}else this.getRgbBuffer(o,0,r*n,e,0,s,c);if(h)if(d)!function resizeRgbImage(e,t,a,r,i,n,s){s=1!==s?0:s;const o=a/i,c=r/n;let l,h=0;const u=new Uint16Array(i),d=3*a;for(let e=0;e<i;e++)u[e]=3*Math.floor(e*o);for(let a=0;a<n;a++){const r=Math.floor(a*c)*d;for(let a=0;a<i;a++){l=r+u[a];t[h++]=e[l++];t[h++]=e[l++];t[h++]=e[l++];h+=s}}}(h,e,t,a,r,i,c);else{let t=0,a=0;for(let i=0,s=r*n;i<s;i++){e[t++]=h[a++];e[t++]=h[a++];e[t++]=h[a++];t+=c}}}get usesZeroToOneRange(){return shadow(this,"usesZeroToOneRange",!0)}static isDefaultDecode(e,t){if(!Array.isArray(e))return!0;if(2*t!==e.length){warn("The decode map is not the correct length");return!0}for(let t=0,a=e.length;t<a;t+=2)if(0!==e[t]||1!==e[t+1])return!1;return!0}}class AlternateCS extends ColorSpace{constructor(e,t,a){super("Alternate",e);this.base=t;this.tintFn=a;this.tmpBuf=new Float32Array(t.numComps)}getRgbItem(e,t,a,r){const i=this.tmpBuf;this.tintFn(e,t,i,0);this.base.getRgbItem(i,0,a,r)}getRgbBuffer(e,t,a,r,i,n,s){const o=this.tintFn,c=this.base,l=1/((1<<n)-1),h=c.numComps,u=c.usesZeroToOneRange,d=(c.isPassthrough(8)||!u)&&0===s;let f=d?i:0;const g=d?r:new Uint8ClampedArray(h*a),p=this.numComps,m=new Float32Array(p),b=new Float32Array(h);let y,w;for(y=0;y<a;y++){for(w=0;w<p;w++)m[w]=e[t++]*l;o(m,0,b,0);if(u)for(w=0;w<h;w++)g[f++]=255*b[w];else{c.getRgbItem(b,0,g,f);f+=h}}d||c.getRgbBuffer(g,0,a,r,i,8,s)}getOutputLength(e,t){return this.base.getOutputLength(e*this.base.numComps/this.numComps,t)}}class PatternCS extends ColorSpace{constructor(e){super("Pattern",null);this.base=e}isDefaultDecode(e,t){unreachable("Should not call PatternCS.isDefaultDecode")}}class IndexedCS extends ColorSpace{constructor(e,t,a){super("Indexed",1);this.base=e;this.highVal=t;const r=e.numComps*(t+1);this.lookup=new Uint8Array(r);if(a instanceof BaseStream){const e=a.getBytes(r);this.lookup.set(e)}else{if("string"!=typeof a)throw new FormatError(`IndexedCS - unrecognized lookup table: ${a}`);for(let e=0;e<r;++e)this.lookup[e]=255&a.charCodeAt(e)}}getRgbItem(e,t,a,r){const{base:i,highVal:n,lookup:s}=this,o=MathClamp(Math.round(e[t]),0,n)*i.numComps;i.getRgbBuffer(s,o,1,a,r,8,0)}getRgbBuffer(e,t,a,r,i,n,s){const{base:o,highVal:c,lookup:l}=this,{numComps:h}=o,u=o.getOutputLength(h,s);for(let n=0;n<a;++n){const a=MathClamp(Math.round(e[t++]),0,c)*h;o.getRgbBuffer(l,a,1,r,i,8,s);i+=u}}getOutputLength(e,t){return this.base.getOutputLength(e*this.base.numComps,t)}isDefaultDecode(e,t){if(!Array.isArray(e))return!0;if(2!==e.length){warn("Decode map length is not correct");return!0}if(!Number.isInteger(t)||t<1){warn("Bits per component is not correct");return!0}return 0===e[0]&&e[1]===(1<<t)-1}}class DeviceGrayCS extends ColorSpace{constructor(){super("DeviceGray",1)}getRgbItem(e,t,a,r){const i=255*e[t];a[r]=a[r+1]=a[r+2]=i}getRgbBuffer(e,t,a,r,i,n,s){const o=255/((1<<n)-1);let c=t,l=i;for(let t=0;t<a;++t){const t=o*e[c++];r[l++]=t;r[l++]=t;r[l++]=t;l+=s}}getOutputLength(e,t){return e*(3+t)}}class DeviceRgbCS extends ColorSpace{constructor(){super("DeviceRGB",3)}getRgbItem(e,t,a,r){a[r]=255*e[t];a[r+1]=255*e[t+1];a[r+2]=255*e[t+2]}getRgbBuffer(e,t,a,r,i,n,s){if(8===n&&0===s){r.set(e.subarray(t,t+3*a),i);return}const o=255/((1<<n)-1);let c=t,l=i;for(let t=0;t<a;++t){r[l++]=o*e[c++];r[l++]=o*e[c++];r[l++]=o*e[c++];l+=s}}getOutputLength(e,t){return e*(3+t)/3|0}isPassthrough(e){return 8===e}}class DeviceRgbaCS extends ColorSpace{constructor(){super("DeviceRGBA",4)}getOutputLength(e,t){return 4*e}isPassthrough(e){return 8===e}fillRgb(e,t,a,r,i,n,s,o,c){a!==i||t!==r?function resizeRgbaImage(e,t,a,r,i,n,s){const o=a/i,c=r/n;let l=0;const h=new Uint16Array(i);if(1===s){for(let e=0;e<i;e++)h[e]=Math.floor(e*o);const r=new Uint32Array(e.buffer),s=new Uint32Array(t.buffer),u=FeatureTest.isLittleEndian?16777215:4294967040;for(let e=0;e<n;e++){const t=r.subarray(Math.floor(e*c)*a);for(let e=0;e<i;e++)s[l++]|=t[h[e]]&u}}else{const r=4,s=a*r;for(let e=0;e<i;e++)h[e]=Math.floor(e*o)*r;for(let a=0;a<n;a++){const r=e.subarray(Math.floor(a*c)*s);for(let e=0;e<i;e++){const a=h[e];t[l++]=r[a];t[l++]=r[a+1];t[l++]=r[a+2]}}}}(o,e,t,a,r,i,c):function copyRgbaImage(e,t,a){if(1===a){const a=new Uint32Array(e.buffer),r=new Uint32Array(t.buffer),i=FeatureTest.isLittleEndian?16777215:4294967040;for(let e=0,t=a.length;e<t;e++)r[e]|=a[e]&i}else{let a=0;for(let r=0,i=e.length;r<i;r+=4){t[a++]=e[r];t[a++]=e[r+1];t[a++]=e[r+2]}}}(o,e,c)}}class DeviceCmykCS extends ColorSpace{constructor(){super("DeviceCMYK",4)}#i(e,t,a,r,i){const n=e[t]*a,s=e[t+1]*a,o=e[t+2]*a,c=e[t+3]*a;r[i]=255+n*(-4.387332384609988*n+54.48615194189176*s+18.82290502165302*o+212.25662451639585*c-285.2331026137004)+s*(1.7149763477362134*s-5.6096736904047315*o+-17.873870861415444*c-5.497006427196366)+o*(-2.5217340131683033*o-21.248923337353073*c+17.5119270841813)+c*(-21.86122147463605*c-189.48180835922747);r[i+1]=255+n*(8.841041422036149*n+60.118027045597366*s+6.871425592049007*o+31.159100130055922*c-79.2970844816548)+s*(-15.310361306967817*s+17.575251261109482*o+131.35250912493976*c-190.9453302588951)+o*(4.444339102852739*o+9.8632861493405*c-24.86741582555878)+c*(-20.737325471181034*c-187.80453709719578);r[i+2]=255+n*(.8842522430003296*n+8.078677503112928*s+30.89978309703729*o-.23883238689178934*c-14.183576799673286)+s*(10.49593273432072*s+63.02378494754052*o+50.606957656360734*c-112.23884253719248)+o*(.03296041114873217*o+115.60384449646641*c-193.58209356861505)+c*(-22.33816807309886*c-180.12613974708367)}getRgbItem(e,t,a,r){this.#i(e,t,1,a,r)}getRgbBuffer(e,t,a,r,i,n,s){const o=1/((1<<n)-1);for(let n=0;n<a;n++){this.#i(e,t,o,r,i);t+=4;i+=3+s}}getOutputLength(e,t){return e/4*(3+t)|0}}class CalGrayCS extends ColorSpace{constructor(e,t,a){super("CalGray",1);if(!e)throw new FormatError("WhitePoint missing - required for color space CalGray");[this.XW,this.YW,this.ZW]=e;[this.XB,this.YB,this.ZB]=t||[0,0,0];this.G=a||1;if(this.XW<0||this.ZW<0||1!==this.YW)throw new FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);if(this.XB<0||this.YB<0||this.ZB<0){info(`Invalid BlackPoint for ${this.name}, falling back to default.`);this.XB=this.YB=this.ZB=0}0===this.XB&&0===this.YB&&0===this.ZB||warn(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`);if(this.G<1){info(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`);this.G=1}}#i(e,t,a,r,i){const n=(e[t]*i)**this.G,s=this.YW*n,o=Math.max(295.8*s**.3333333333333333-40.8,0);a[r]=o;a[r+1]=o;a[r+2]=o}getRgbItem(e,t,a,r){this.#i(e,t,a,r,1)}getRgbBuffer(e,t,a,r,i,n,s){const o=1/((1<<n)-1);for(let n=0;n<a;++n){this.#i(e,t,r,i,o);t+=1;i+=3+s}}getOutputLength(e,t){return e*(3+t)}}class CalRGBCS extends ColorSpace{static#n=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]);static#s=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]);static#o=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]);static#c=new Float32Array([1,1,1]);static#l=new Float32Array(3);static#h=new Float32Array(3);static#u=new Float32Array(3);static#d=(24/116)**3/8;constructor(e,t,a,r){super("CalRGB",3);if(!e)throw new FormatError("WhitePoint missing - required for color space CalRGB");const[i,n,s]=this.whitePoint=e,[o,c,l]=this.blackPoint=t||new Float32Array(3);[this.GR,this.GG,this.GB]=a||new Float32Array([1,1,1]);[this.MXA,this.MYA,this.MZA,this.MXB,this.MYB,this.MZB,this.MXC,this.MYC,this.MZC]=r||new Float32Array([1,0,0,0,1,0,0,0,1]);if(i<0||s<0||1!==n)throw new FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);if(o<0||c<0||l<0){info(`Invalid BlackPoint for ${this.name} [${o}, ${c}, ${l}], falling back to default.`);this.blackPoint=new Float32Array(3)}if(this.GR<0||this.GG<0||this.GB<0){info(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`);this.GR=this.GG=this.GB=1}}#f(e,t,a){a[0]=e[0]*t[0]+e[1]*t[1]+e[2]*t[2];a[1]=e[3]*t[0]+e[4]*t[1]+e[5]*t[2];a[2]=e[6]*t[0]+e[7]*t[1]+e[8]*t[2]}#g(e,t,a){a[0]=1*t[0]/e[0];a[1]=1*t[1]/e[1];a[2]=1*t[2]/e[2]}#p(e,t,a){a[0]=.95047*t[0]/e[0];a[1]=1*t[1]/e[1];a[2]=1.08883*t[2]/e[2]}#m(e){return e<=.0031308?MathClamp(12.92*e,0,1):e>=.99554525?1:MathClamp(1.055*e**(1/2.4)-.055,0,1)}#b(e){return e<0?-this.#b(-e):e>8?((e+16)/116)**3:e*CalRGBCS.#d}#y(e,t,a){if(0===e[0]&&0===e[1]&&0===e[2]){a[0]=t[0];a[1]=t[1];a[2]=t[2];return}const r=this.#b(0),i=(1-r)/(1-this.#b(e[0])),n=1-i,s=(1-r)/(1-this.#b(e[1])),o=1-s,c=(1-r)/(1-this.#b(e[2])),l=1-c;a[0]=t[0]*i+n;a[1]=t[1]*s+o;a[2]=t[2]*c+l}#w(e,t,a){if(1===e[0]&&1===e[2]){a[0]=t[0];a[1]=t[1];a[2]=t[2];return}const r=a;this.#f(CalRGBCS.#n,t,r);const i=CalRGBCS.#l;this.#g(e,r,i);this.#f(CalRGBCS.#s,i,a)}#x(e,t,a){const r=a;this.#f(CalRGBCS.#n,t,r);const i=CalRGBCS.#l;this.#p(e,r,i);this.#f(CalRGBCS.#s,i,a)}#i(e,t,a,r,i){const n=MathClamp(e[t]*i,0,1),s=MathClamp(e[t+1]*i,0,1),o=MathClamp(e[t+2]*i,0,1),c=1===n?1:n**this.GR,l=1===s?1:s**this.GG,h=1===o?1:o**this.GB,u=this.MXA*c+this.MXB*l+this.MXC*h,d=this.MYA*c+this.MYB*l+this.MYC*h,f=this.MZA*c+this.MZB*l+this.MZC*h,g=CalRGBCS.#h;g[0]=u;g[1]=d;g[2]=f;const p=CalRGBCS.#u;this.#w(this.whitePoint,g,p);const m=CalRGBCS.#h;this.#y(this.blackPoint,p,m);const b=CalRGBCS.#u;this.#x(CalRGBCS.#c,m,b);const y=CalRGBCS.#h;this.#f(CalRGBCS.#o,b,y);a[r]=255*this.#m(y[0]);a[r+1]=255*this.#m(y[1]);a[r+2]=255*this.#m(y[2])}getRgbItem(e,t,a,r){this.#i(e,t,a,r,1)}getRgbBuffer(e,t,a,r,i,n,s){const o=1/((1<<n)-1);for(let n=0;n<a;++n){this.#i(e,t,r,i,o);t+=3;i+=3+s}}getOutputLength(e,t){return e*(3+t)/3|0}}class LabCS extends ColorSpace{constructor(e,t,a){super("Lab",3);if(!e)throw new FormatError("WhitePoint missing - required for color space Lab");[this.XW,this.YW,this.ZW]=e;[this.amin,this.amax,this.bmin,this.bmax]=a||[-100,100,-100,100];[this.XB,this.YB,this.ZB]=t||[0,0,0];if(this.XW<0||this.ZW<0||1!==this.YW)throw new FormatError("Invalid WhitePoint components, no fallback available");if(this.XB<0||this.YB<0||this.ZB<0){info("Invalid BlackPoint, falling back to default");this.XB=this.YB=this.ZB=0}if(this.amin>this.amax||this.bmin>this.bmax){info("Invalid Range, falling back to defaults");this.amin=-100;this.amax=100;this.bmin=-100;this.bmax=100}}#S(e){return e>=6/29?e**3:108/841*(e-4/29)}#A(e,t,a,r){return a+e*(r-a)/t}#i(e,t,a,r,i){let n=e[t],s=e[t+1],o=e[t+2];if(!1!==a){n=this.#A(n,a,0,100);s=this.#A(s,a,this.amin,this.amax);o=this.#A(o,a,this.bmin,this.bmax)}s>this.amax?s=this.amax:s<this.amin&&(s=this.amin);o>this.bmax?o=this.bmax:o<this.bmin&&(o=this.bmin);const c=(n+16)/116,l=c+s/500,h=c-o/200,u=this.XW*this.#S(l),d=this.YW*this.#S(c),f=this.ZW*this.#S(h);let g,p,m;if(this.ZW<1){g=3.1339*u+-1.617*d+-.4906*f;p=-.9785*u+1.916*d+.0333*f;m=.072*u+-.229*d+1.4057*f}else{g=3.2406*u+-1.5372*d+-.4986*f;p=-.9689*u+1.8758*d+.0415*f;m=.0557*u+-.204*d+1.057*f}r[i]=255*Math.sqrt(g);r[i+1]=255*Math.sqrt(p);r[i+2]=255*Math.sqrt(m)}getRgbItem(e,t,a,r){this.#i(e,t,!1,a,r)}getRgbBuffer(e,t,a,r,i,n,s){const o=(1<<n)-1;for(let n=0;n<a;n++){this.#i(e,t,o,r,i);t+=3;i+=3+s}}getOutputLength(e,t){return e*(3+t)/3|0}isDefaultDecode(e,t){return!0}get usesZeroToOneRange(){return shadow(this,"usesZeroToOneRange",!1)}}function fetchSync(e){const t=new XMLHttpRequest;t.open("GET",e,!1);t.responseType="arraybuffer";t.send(null);return t.response}class IccColorSpace extends ColorSpace{#k;#C;static#v=!0;static#F=null;static#I=new FinalizationRegistry((e=>{!function qcms_drop_transformer(e){Da.qcms_drop_transformer(e)}(e)}));constructor(e,t,a){if(!IccColorSpace.isUsable)throw new Error("No ICC color space support");super(t,a);let r;switch(a){case 1:r=Ea.Gray8;this.#C=(e,t,a)=>function qcms_convert_one(e,t,a){Da.qcms_convert_one(e,t,a)}(this.#k,255*e[t],a);break;case 3:r=Ea.RGB8;this.#C=(e,t,a)=>function qcms_convert_three(e,t,a,r,i){Da.qcms_convert_three(e,t,a,r,i)}(this.#k,255*e[t],255*e[t+1],255*e[t+2],a);break;case 4:r=Ea.CMYK;this.#C=(e,t,a)=>function qcms_convert_four(e,t,a,r,i,n){Da.qcms_convert_four(e,t,a,r,i,n)}(this.#k,255*e[t],255*e[t+1],255*e[t+2],255*e[t+3],a);break;default:throw new Error(`Unsupported number of components: ${a}`)}this.#k=function qcms_transformer_from_memory(e,t,a){const r=passArray8ToWasm0(e,Da.__wbindgen_malloc),i=Na;return Da.qcms_transformer_from_memory(r,i,t,a)>>>0}(e,r,Pa.Perceptual);if(!this.#k)throw new Error("Failed to create ICC color space");IccColorSpace.#I.register(this,this.#k)}getRgbHex(e,t){this.#C(e,t,!0);return QCMS._cssColor}getRgbItem(e,t,a,r){QCMS._destBuffer=a;QCMS._destOffset=r;QCMS._destLength=3;this.#C(e,t,!1);QCMS._destBuffer=null}getRgbBuffer(e,t,a,r,i,n,s){e=e.subarray(t,t+a*this.numComps);if(8!==n){const t=255/((1<<n)-1);for(let a=0,r=e.length;a<r;a++)e[a]*=t}QCMS._mustAddAlpha=s&&r.buffer===e.buffer;QCMS._destBuffer=r;QCMS._destOffset=i;QCMS._destLength=a*(3+s);!function qcms_convert_array(e,t){const a=passArray8ToWasm0(t,Da.__wbindgen_malloc),r=Na;Da.qcms_convert_array(e,a,r)}(this.#k,e);QCMS._mustAddAlpha=!1;QCMS._destBuffer=null}getOutputLength(e,t){return e/this.numComps*(3+t)|0}static setOptions({useWasm:e,useWorkerFetch:t,wasmUrl:a}){if(t){this.#v=e;this.#F=a}else this.#v=!1}static get isUsable(){let e=!1;if(this.#v)if(this.#F)try{this._module=function initSync(e){if(void 0!==Da)return Da;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module:e}=e):console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=__wbg_get_imports();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));return __wbg_finalize_init(new WebAssembly.Instance(e,t),e)}({module:fetchSync(`${this.#F}qcms_bg.wasm`)});e=!!this._module;QCMS._memory=this._module.memory;QCMS._makeHexColor=Util.makeHexColor}catch(e){warn(`ICCBased color space: "${e}".`)}else warn("No ICC color space support due to missing `wasmUrl` API option");return shadow(this,"isUsable",e)}}class CmykICCBasedCS extends IccColorSpace{static#T;constructor(){super(new Uint8Array(fetchSync(`${CmykICCBasedCS.#T}CGATS001Compat-v2-micro.icc`)),"DeviceCMYK",4)}static setOptions({iccUrl:e}){this.#T=e}static get isUsable(){let e=!1;IccColorSpace.isUsable&&(this.#T?e=!0:warn("No CMYK ICC profile support due to missing `iccUrl` API option"));return shadow(this,"isUsable",e)}}class Stream extends BaseStream{constructor(e,t,a,r){super();this.bytes=e instanceof Uint8Array?e:new Uint8Array(e);this.start=t||0;this.pos=this.start;this.end=t+a||this.bytes.length;this.dict=r}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(e){const t=this.bytes,a=this.pos,r=this.end;if(!e)return t.subarray(a,r);let i=a+e;i>r&&(i=r);this.pos=i;return t.subarray(a,i)}getByteRange(e,t){e<0&&(e=0);t>this.end&&(t=this.end);return this.bytes.subarray(e,t)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(e,t,a=null){return new Stream(this.bytes.buffer,e,t,a)}}class StringStream extends Stream{constructor(e){super(stringToBytes(e))}}class NullStream extends Stream{constructor(){super(new Uint8Array(0))}}class ChunkedStream extends Stream{constructor(e,t,a){super(new Uint8Array(e),0,e,null);this.chunkSize=t;this._loadedChunks=new Set;this.numChunks=Math.ceil(e/t);this.manager=a;this.progressiveDataLength=0;this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const e=[];for(let t=0,a=this.numChunks;t<a;++t)this._loadedChunks.has(t)||e.push(t);return e}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(e,t){const a=this.chunkSize;if(e%a!=0)throw new Error(`Bad begin offset: ${e}`);const r=e+t.byteLength;if(r%a!=0&&r!==this.bytes.length)throw new Error(`Bad end offset: ${r}`);this.bytes.set(new Uint8Array(t),e);const i=Math.floor(e/a),n=Math.floor((r-1)/a)+1;for(let e=i;e<n;++e)this._loadedChunks.add(e)}onReceiveProgressiveData(e){let t=this.progressiveDataLength;const a=Math.floor(t/this.chunkSize);this.bytes.set(new Uint8Array(e),t);t+=e.byteLength;this.progressiveDataLength=t;const r=t>=this.end?this.numChunks:Math.floor(t/this.chunkSize);for(let e=a;e<r;++e)this._loadedChunks.add(e)}ensureByte(e){if(e<this.progressiveDataLength)return;const t=Math.floor(e/this.chunkSize);if(!(t>this.numChunks)&&t!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(t))throw new MissingDataException(e,e+1);this.lastSuccessfulEnsureByteChunk=t}}ensureRange(e,t){if(e>=t)return;if(t<=this.progressiveDataLength)return;const a=Math.floor(e/this.chunkSize);if(a>this.numChunks)return;const r=Math.min(Math.floor((t-1)/this.chunkSize)+1,this.numChunks);for(let i=a;i<r;++i)if(!this._loadedChunks.has(i))throw new MissingDataException(e,t)}nextEmptyChunk(e){const t=this.numChunks;for(let a=0;a<t;++a){const r=(e+a)%t;if(!this._loadedChunks.has(r))return r}return null}hasChunk(e){return this._loadedChunks.has(e)}getByte(){const e=this.pos;if(e>=this.end)return-1;e>=this.progressiveDataLength&&this.ensureByte(e);return this.bytes[this.pos++]}getBytes(e){const t=this.bytes,a=this.pos,r=this.end;if(!e){r>this.progressiveDataLength&&this.ensureRange(a,r);return t.subarray(a,r)}let i=a+e;i>r&&(i=r);i>this.progressiveDataLength&&this.ensureRange(a,i);this.pos=i;return t.subarray(a,i)}getByteRange(e,t){e<0&&(e=0);t>this.end&&(t=this.end);t>this.progressiveDataLength&&this.ensureRange(e,t);return this.bytes.subarray(e,t)}makeSubStream(e,t,a=null){t?e+t>this.progressiveDataLength&&this.ensureRange(e,e+t):e>=this.progressiveDataLength&&this.ensureByte(e);function ChunkedStreamSubstream(){}ChunkedStreamSubstream.prototype=Object.create(this);ChunkedStreamSubstream.prototype.getMissingChunks=function(){const e=this.chunkSize,t=Math.floor(this.start/e),a=Math.floor((this.end-1)/e)+1,r=[];for(let e=t;e<a;++e)this._loadedChunks.has(e)||r.push(e);return r};Object.defineProperty(ChunkedStreamSubstream.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length},configurable:!0});const r=new ChunkedStreamSubstream;r.pos=r.start=e;r.end=e+t||this.end;r.dict=a;return r}getBaseStreams(){return[this]}}class ChunkedStreamManager{constructor(e,t){this.length=t.length;this.chunkSize=t.rangeChunkSize;this.stream=new ChunkedStream(this.length,this.chunkSize,this);this.pdfNetworkStream=e;this.disableAutoFetch=t.disableAutoFetch;this.msgHandler=t.msgHandler;this.currRequestId=0;this._chunksNeededByRequest=new Map;this._requestsByChunk=new Map;this._promisesByRequest=new Map;this.progressiveDataLength=0;this.aborted=!1;this._loadedStreamCapability=Promise.withResolvers()}sendRequest(e,t){const a=this.pdfNetworkStream.getRangeReader(e,t);a.isStreamingSupported||(a.onProgress=this.onProgress.bind(this));let r=[],i=0;return new Promise(((e,t)=>{const readChunk=({value:n,done:s})=>{try{if(s){const t=arrayBuffersToBytes(r);r=null;e(t);return}i+=n.byteLength;a.isStreamingSupported&&this.onProgress({loaded:i});r.push(n);a.read().then(readChunk,t)}catch(e){t(e)}};a.read().then(readChunk,t)})).then((t=>{this.aborted||this.onReceiveData({chunk:t,begin:e})}))}requestAllChunks(e=!1){if(!e){const e=this.stream.getMissingChunks();this._requestChunks(e)}return this._loadedStreamCapability.promise}_requestChunks(e){const t=this.currRequestId++,a=new Set;this._chunksNeededByRequest.set(t,a);for(const t of e)this.stream.hasChunk(t)||a.add(t);if(0===a.size)return Promise.resolve();const r=Promise.withResolvers();this._promisesByRequest.set(t,r);const i=[];for(const e of a){let a=this._requestsByChunk.get(e);if(!a){a=[];this._requestsByChunk.set(e,a);i.push(e)}a.push(t)}if(i.length>0){const e=this.groupChunks(i);for(const t of e){const e=t.beginChunk*this.chunkSize,a=Math.min(t.endChunk*this.chunkSize,this.length);this.sendRequest(e,a).catch(r.reject)}}return r.promise.catch((e=>{if(!this.aborted)throw e}))}getStream(){return this.stream}requestRange(e,t){t=Math.min(t,this.length);const a=this.getBeginChunk(e),r=this.getEndChunk(t),i=[];for(let e=a;e<r;++e)i.push(e);return this._requestChunks(i)}requestRanges(e=[]){const t=[];for(const a of e){const e=this.getBeginChunk(a.begin),r=this.getEndChunk(a.end);for(let a=e;a<r;++a)t.includes(a)||t.push(a)}t.sort(((e,t)=>e-t));return this._requestChunks(t)}groupChunks(e){const t=[];let a=-1,r=-1;for(let i=0,n=e.length;i<n;++i){const n=e[i];a<0&&(a=n);if(r>=0&&r+1!==n){t.push({beginChunk:a,endChunk:r+1});a=n}i+1===e.length&&t.push({beginChunk:a,endChunk:n+1});r=n}return t}onProgress(e){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+e.loaded,total:this.length})}onReceiveData(e){const t=e.chunk,a=void 0===e.begin,r=a?this.progressiveDataLength:e.begin,i=r+t.byteLength,n=Math.floor(r/this.chunkSize),s=i<this.length?Math.floor(i/this.chunkSize):Math.ceil(i/this.chunkSize);if(a){this.stream.onReceiveProgressiveData(t);this.progressiveDataLength=i}else this.stream.onReceiveData(r,t);this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const o=[];for(let e=n;e<s;++e){const t=this._requestsByChunk.get(e);if(t){this._requestsByChunk.delete(e);for(const a of t){const t=this._chunksNeededByRequest.get(a);t.has(e)&&t.delete(e);t.size>0||o.push(a)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let e;if(1===this.stream.numChunksLoaded){const t=this.stream.numChunks-1;this.stream.hasChunk(t)||(e=t)}else e=this.stream.nextEmptyChunk(s);Number.isInteger(e)&&this._requestChunks([e])}for(const e of o){const t=this._promisesByRequest.get(e);this._promisesByRequest.delete(e);t.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(e){this._loadedStreamCapability.reject(e)}getBeginChunk(e){return Math.floor(e/this.chunkSize)}getEndChunk(e){return Math.floor((e-1)/this.chunkSize)+1}abort(e){this.aborted=!0;this.pdfNetworkStream?.cancelAllRequests(e);for(const t of this._promisesByRequest.values())t.reject(e)}}function convertToRGBA(e){switch(e.kind){case k:return convertBlackAndWhiteToRGBA(e);case C:return function convertRGBToRGBA({src:e,srcPos:t=0,dest:a,destPos:r=0,width:i,height:n}){let s=0;const o=i*n*3,c=o>>2,l=new Uint32Array(e.buffer,t,c);if(FeatureTest.isLittleEndian){for(;s<c-2;s+=3,r+=4){const e=l[s],t=l[s+1],i=l[s+2];a[r]=4278190080|e;a[r+1]=e>>>24|t<<8|4278190080;a[r+2]=t>>>16|i<<16|4278190080;a[r+3]=i>>>8|4278190080}for(let i=4*s,n=t+o;i<n;i+=3)a[r++]=e[i]|e[i+1]<<8|e[i+2]<<16|4278190080}else{for(;s<c-2;s+=3,r+=4){const e=l[s],t=l[s+1],i=l[s+2];a[r]=255|e;a[r+1]=e<<24|t>>>8|255;a[r+2]=t<<16|i>>>16|255;a[r+3]=i<<8|255}for(let i=4*s,n=t+o;i<n;i+=3)a[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|255}return{srcPos:t+o,destPos:r}}(e)}return null}function convertBlackAndWhiteToRGBA({src:e,srcPos:t=0,dest:a,width:r,height:i,nonBlackColor:n=4294967295,inverseDecode:s=!1}){const o=FeatureTest.isLittleEndian?4278190080:255,[c,l]=s?[n,o]:[o,n],h=r>>3,u=7&r,d=e.length;a=new Uint32Array(a.buffer);let f=0;for(let r=0;r<i;r++){for(const r=t+h;t<r;t++){const r=t<d?e[t]:255;a[f++]=128&r?l:c;a[f++]=64&r?l:c;a[f++]=32&r?l:c;a[f++]=16&r?l:c;a[f++]=8&r?l:c;a[f++]=4&r?l:c;a[f++]=2&r?l:c;a[f++]=1&r?l:c}if(0===u)continue;const r=t<d?e[t++]:255;for(let e=0;e<u;e++)a[f++]=r&1<<7-e?l:c}return{srcPos:t,destPos:f}}class ImageResizer{static#O=2048;static#M=FeatureTest.isImageDecoderSupported;constructor(e,t){this._imgData=e;this._isMask=t}static get canUseImageDecoder(){return shadow(this,"canUseImageDecoder",this.#M?ImageDecoder.isTypeSupported("image/bmp"):Promise.resolve(!1))}static needsToBeResized(e,t){if(e<=this.#O&&t<=this.#O)return!1;const{MAX_DIM:a}=this;if(e>a||t>a)return!0;const r=e*t;if(this._hasMaxArea)return r>this.MAX_AREA;if(r<this.#O**2)return!1;if(this._areGoodDims(e,t)){this.#O=Math.max(this.#O,Math.floor(Math.sqrt(e*t)));return!1}this.#O=this._guessMax(this.#O,a,128,0);return r>(this.MAX_AREA=this.#O**2)}static getReducePowerForJPX(e,t,a){const r=e*t,i=2**30/(4*a);if(!this.needsToBeResized(e,t))return r>i?Math.ceil(Math.log2(r/i)):0;const{MAX_DIM:n,MAX_AREA:s}=this,o=Math.max(e/n,t/n,Math.sqrt(r/Math.min(i,s)));return Math.ceil(Math.log2(o))}static get MAX_DIM(){return shadow(this,"MAX_DIM",this._guessMax(2048,65537,0,1))}static get MAX_AREA(){this._hasMaxArea=!0;return shadow(this,"MAX_AREA",this._guessMax(this.#O,this.MAX_DIM,128,0)**2)}static set MAX_AREA(e){if(e>=0){this._hasMaxArea=!0;shadow(this,"MAX_AREA",e)}}static setOptions({canvasMaxAreaInBytes:e=-1,isImageDecoderSupported:t=!1}){this._hasMaxArea||(this.MAX_AREA=e>>2);this.#M=t}static _areGoodDims(e,t){try{const a=new OffscreenCanvas(e,t),r=a.getContext("2d");r.fillRect(0,0,1,1);const i=r.getImageData(0,0,1,1).data[3];a.width=a.height=1;return 0!==i}catch{return!1}}static _guessMax(e,t,a,r){for(;e+a+1<t;){const a=Math.floor((e+t)/2),i=r||a;this._areGoodDims(a,i)?e=a:t=a}return e}static async createImage(e,t=!1){return new ImageResizer(e,t)._createImage()}async _createImage(){const{_imgData:e}=this,{width:t,height:a}=e;if(t*a*4>va){const e=this.#D();if(e)return e}const r=this._encodeBMP();let i,n;if(await ImageResizer.canUseImageDecoder){i=new ImageDecoder({data:r,type:"image/bmp",preferAnimation:!1,transfer:[r.buffer]});n=i.decode().catch((e=>{warn(`BMP image decoding failed: ${e}`);return createImageBitmap(new Blob([this._encodeBMP().buffer],{type:"image/bmp"}))})).finally((()=>{i.close()}))}else n=createImageBitmap(new Blob([r.buffer],{type:"image/bmp"}));const{MAX_AREA:s,MAX_DIM:o}=ImageResizer,c=Math.max(t/o,a/o,Math.sqrt(t*a/s)),l=Math.max(c,2),h=Math.round(10*(c+1.25))/10/l,u=Math.floor(Math.log2(h)),d=new Array(u+2).fill(2);d[0]=l;d.splice(-1,1,h/(1<<u));let f=t,g=a;const p=await n;let m=p.image||p;for(const e of d){const t=f,a=g;f=Math.floor(f/e)-1;g=Math.floor(g/e)-1;const r=new OffscreenCanvas(f,g);r.getContext("2d").drawImage(m,0,0,t,a,0,0,f,g);m.close();m=r.transferToImageBitmap()}e.data=null;e.bitmap=m;e.width=f;e.height=g;return e}#D(){const{_imgData:e}=this,{data:t,width:a,height:r,kind:i}=e,n=a*r*4,s=Math.ceil(Math.log2(n/va)),o=a>>s,c=r>>s;let l,h=r;try{l=new Uint8Array(n)}catch{let e=Math.floor(Math.log2(n+1));for(;;)try{l=new Uint8Array(2**e-1);break}catch{e-=1}h=Math.floor((2**e-1)/(4*a));const t=a*h*4;t<l.length&&(l=new Uint8Array(t))}const u=new Uint32Array(l.buffer),d=new Uint32Array(o*c);let f=0,g=0;const p=Math.ceil(r/h),m=r%h==0?r:r%h;for(let e=0;e<p;e++){const r=e<p-1?h:m;({srcPos:f}=convertToRGBA({kind:i,src:t,dest:u,width:a,height:r,inverseDecode:this._isMask,srcPos:f}));for(let e=0,t=r>>s;e<t;e++){const t=u.subarray((e<<s)*a);for(let e=0;e<o;e++)d[g++]=t[e<<s]}}if(ImageResizer.needsToBeResized(o,c)){e.data=d;e.width=o;e.height=c;e.kind=v;return null}const b=new OffscreenCanvas(o,c);b.getContext("2d",{willReadFrequently:!0}).putImageData(new ImageData(new Uint8ClampedArray(d.buffer),o,c),0,0);e.data=null;e.bitmap=b.transferToImageBitmap();e.width=o;e.height=c;return e}_encodeBMP(){const{width:e,height:t,kind:a}=this._imgData;let r,i=this._imgData.data,n=new Uint8Array(0),s=n,o=0;switch(a){case k:{r=1;n=new Uint8Array(this._isMask?[255,255,255,255,0,0,0,0]:[0,0,0,0,255,255,255,255]);const a=e+7>>3,s=a+3&-4;if(a!==s){const e=new Uint8Array(s*t);let r=0;for(let n=0,o=t*a;n<o;n+=a,r+=s)e.set(i.subarray(n,n+a),r);i=e}break}case C:r=24;if(3&e){const a=3*e,r=a+3&-4,n=r-a,s=new Uint8Array(r*t);let o=0;for(let e=0,r=t*a;e<r;e+=a){const t=i.subarray(e,e+a);for(let e=0;e<a;e+=3){s[o++]=t[e+2];s[o++]=t[e+1];s[o++]=t[e]}o+=n}i=s}else for(let e=0,t=i.length;e<t;e+=3){const t=i[e];i[e]=i[e+2];i[e+2]=t}break;case v:r=32;o=3;s=new Uint8Array(68);const a=new DataView(s.buffer);if(FeatureTest.isLittleEndian){a.setUint32(0,255,!0);a.setUint32(4,65280,!0);a.setUint32(8,16711680,!0);a.setUint32(12,4278190080,!0)}else{a.setUint32(0,4278190080,!0);a.setUint32(4,16711680,!0);a.setUint32(8,65280,!0);a.setUint32(12,255,!0)}break;default:throw new Error("invalid format")}let c=0;const l=40+s.length,h=14+l+n.length+i.length,u=new Uint8Array(h),d=new DataView(u.buffer);d.setUint16(c,19778,!0);c+=2;d.setUint32(c,h,!0);c+=4;d.setUint32(c,0,!0);c+=4;d.setUint32(c,14+l+n.length,!0);c+=4;d.setUint32(c,l,!0);c+=4;d.setInt32(c,e,!0);c+=4;d.setInt32(c,-t,!0);c+=4;d.setUint16(c,1,!0);c+=2;d.setUint16(c,r,!0);c+=2;d.setUint32(c,o,!0);c+=4;d.setUint32(c,0,!0);c+=4;d.setInt32(c,0,!0);c+=4;d.setInt32(c,0,!0);c+=4;d.setUint32(c,n.length/4,!0);c+=4;d.setUint32(c,0,!0);c+=4;u.set(s,c);c+=s.length;u.set(n,c);c+=n.length;u.set(i,c);return u}}const La=new Uint8Array(0);class DecodeStream extends BaseStream{constructor(e){super();this._rawMinBufferLength=e||0;this.pos=0;this.bufferLength=0;this.eof=!1;this.buffer=La;this.minBufferLength=512;if(e)for(;this.minBufferLength<e;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength}ensureBuffer(e){const t=this.buffer;if(e<=t.byteLength)return t;let a=this.minBufferLength;for(;a<e;)a*=2;const r=new Uint8Array(a);r.set(t);return this.buffer=r}getByte(){const e=this.pos;for(;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(e,t=null){const a=this.pos;let r;if(e){this.ensureBuffer(a+e);r=a+e;for(;!this.eof&&this.bufferLength<r;)this.readBlock(t);const i=this.bufferLength;r>i&&(r=i)}else{for(;!this.eof;)this.readBlock(t);r=this.bufferLength}this.pos=r;return this.buffer.subarray(a,r)}async getImageData(e,t){if(!this.canAsyncDecodeImageFromBuffer)return this.isAsyncDecoder?this.decodeImage(null,t):this.getBytes(e,t);const a=await this.stream.asyncGetBytes();return this.decodeImage(a,t)}reset(){this.pos=0}makeSubStream(e,t,a=null){if(void 0===t)for(;!this.eof;)this.readBlock();else{const a=e+t;for(;this.bufferLength<=a&&!this.eof;)this.readBlock()}return new Stream(this.buffer,e,t,a)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}}class StreamsSequenceStream extends DecodeStream{constructor(e,t=null){e=e.filter((e=>e instanceof BaseStream));let a=0;for(const t of e)a+=t instanceof DecodeStream?t._rawMinBufferLength:t.length;super(a);this.streams=e;this._onError=t}readBlock(){const e=this.streams;if(0===e.length){this.eof=!0;return}const t=e.shift();let a;try{a=t.getBytes()}catch(e){if(this._onError){this._onError(e,t.dict?.objId);return}throw e}const r=this.bufferLength,i=r+a.length;this.ensureBuffer(i).set(a,r);this.bufferLength=i}getBaseStreams(){const e=[];for(const t of this.streams){const a=t.getBaseStreams();a&&e.push(...a)}return e.length>0?e:null}}class ColorSpaceUtils{static parse({cs:e,xref:t,resources:a=null,pdfFunctionFactory:r,globalColorSpaceCache:i,localColorSpaceCache:n,asyncIfNotCached:s=!1}){const o={xref:t,resources:a,pdfFunctionFactory:r,globalColorSpaceCache:i,localColorSpaceCache:n};let c,l,h;if(e instanceof Ref){l=e;const a=i.getByRef(l)||n.getByRef(l);if(a)return a;e=t.fetch(e)}if(e instanceof Name){c=e.name;const t=n.getByName(c);if(t)return t}try{h=this.#B(e,o)}catch(e){if(s&&!(e instanceof MissingDataException))return Promise.reject(e);throw e}if(c||l){n.set(c,l,h);l&&i.set(null,l,h)}return s?Promise.resolve(h):h}static#R(e,t){const{globalColorSpaceCache:a}=t;let r;if(e instanceof Ref){r=e;const t=a.getByRef(r);if(t)return t}const i=this.#B(e,t);r&&a.set(null,r,i);return i}static#B(e,t){const{xref:a,resources:r,pdfFunctionFactory:i,globalColorSpaceCache:n}=t;if((e=a.fetchIfRef(e))instanceof Name)switch(e.name){case"G":case"DeviceGray":return this.gray;case"RGB":case"DeviceRGB":return this.rgb;case"DeviceRGBA":return this.rgba;case"CMYK":case"DeviceCMYK":return this.cmyk;case"Pattern":return new PatternCS(null);default:if(r instanceof Dict){const a=r.get("ColorSpace");if(a instanceof Dict){const r=a.get(e.name);if(r){if(r instanceof Name)return this.#B(r,t);e=r;break}}}warn(`Unrecognized ColorSpace: ${e.name}`);return this.gray}if(Array.isArray(e)){const r=a.fetchIfRef(e[0]).name;let s,o,c,l,h,u;switch(r){case"G":case"DeviceGray":return this.gray;case"RGB":case"DeviceRGB":return this.rgb;case"CMYK":case"DeviceCMYK":return this.cmyk;case"CalGray":s=a.fetchIfRef(e[1]);l=s.getArray("WhitePoint");h=s.getArray("BlackPoint");u=s.get("Gamma");return new CalGrayCS(l,h,u);case"CalRGB":s=a.fetchIfRef(e[1]);l=s.getArray("WhitePoint");h=s.getArray("BlackPoint");u=s.getArray("Gamma");const d=s.getArray("Matrix");return new CalRGBCS(l,h,u,d);case"ICCBased":const f=e[1]instanceof Ref;if(f){const t=n.getByRef(e[1]);if(t)return t}const g=a.fetchIfRef(e[1]),p=g.dict;o=p.get("N");if(IccColorSpace.isUsable)try{const t=new IccColorSpace(g.getBytes(),"ICCBased",o);f&&n.set(null,e[1],t);return t}catch(t){if(t instanceof MissingDataException)throw t;warn(`ICCBased color space (${e[1]}): "${t}".`)}const m=p.getRaw("Alternate");if(m){const e=this.#R(m,t);if(e.numComps===o)return e;warn("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===o)return this.gray;if(3===o)return this.rgb;if(4===o)return this.cmyk;break;case"Pattern":c=e[1]||null;c&&(c=this.#R(c,t));return new PatternCS(c);case"I":case"Indexed":c=this.#R(e[1],t);const b=MathClamp(a.fetchIfRef(e[2]),0,255),y=a.fetchIfRef(e[3]);return new IndexedCS(c,b,y);case"Separation":case"DeviceN":const w=a.fetchIfRef(e[1]);o=Array.isArray(w)?w.length:1;c=this.#R(e[2],t);const x=i.create(e[3]);return new AlternateCS(o,c,x);case"Lab":s=a.fetchIfRef(e[1]);l=s.getArray("WhitePoint");h=s.getArray("BlackPoint");const S=s.getArray("Range");return new LabCS(l,h,S);default:warn(`Unimplemented ColorSpace object: ${r}`);return this.gray}}warn(`Unrecognized ColorSpace object: ${e}`);return this.gray}static get gray(){return shadow(this,"gray",new DeviceGrayCS)}static get rgb(){return shadow(this,"rgb",new DeviceRgbCS)}static get rgba(){return shadow(this,"rgba",new DeviceRgbaCS)}static get cmyk(){if(CmykICCBasedCS.isUsable)try{return shadow(this,"cmyk",new CmykICCBasedCS)}catch{warn("CMYK fallback: DeviceCMYK")}return shadow(this,"cmyk",new DeviceCmykCS)}}class JpegError extends fa{constructor(e){super(e,"JpegError")}}class DNLMarkerError extends fa{constructor(e,t){super(e,"DNLMarkerError");this.scanLines=t}}class EOIMarkerError extends fa{constructor(e){super(e,"EOIMarkerError")}}const ja=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),_a=4017,Ua=799,Xa=3406,qa=2276,Ha=1567,Wa=3784,za=5793,$a=2896;function buildHuffmanTable(e,t){let a,r,i=0,n=16;for(;n>0&&!e[n-1];)n--;const s=[{children:[],index:0}];let o,c=s[0];for(a=0;a<n;a++){for(r=0;r<e[a];r++){c=s.pop();c.children[c.index]=t[i];for(;c.index>0;)c=s.pop();c.index++;s.push(c);for(;s.length<=a;){s.push(o={children:[],index:0});c.children[c.index]=o.children;c=o}i++}if(a+1<n){s.push(o={children:[],index:0});c.children[c.index]=o.children;c=o}}return s[0].children}function getBlockBufferOffset(e,t,a){return 64*((e.blocksPerLine+1)*t+a)}function decodeScan(e,t,a,r,i,n,s,o,c,l=!1){const h=a.mcusPerLine,u=a.progressive,d=t;let f=0,g=0;function readBit(){if(g>0){g--;return f>>g&1}f=e[t++];if(255===f){const r=e[t++];if(r){if(220===r&&l){const r=readUint16(e,t+=2);t+=2;if(r>0&&r!==a.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",r)}else if(217===r){if(l){const e=y*(8===a.precision?8:0);if(e>0&&Math.round(a.scanLines/e)>=5)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",e)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new JpegError(`unexpected marker ${(f<<8|r).toString(16)}`)}}g=7;return f>>>7}function decodeHuffman(e){let t=e;for(;;){t=t[readBit()];switch(typeof t){case"number":return t;case"object":continue}throw new JpegError("invalid huffman sequence")}}function receive(e){let t=0;for(;e>0;){t=t<<1|readBit();e--}return t}function receiveAndExtend(e){if(1===e)return 1===readBit()?1:-1;const t=receive(e);return t>=1<<e-1?t:t+(-1<<e)+1}let p=0;let m,b=0;let y=0;function decodeMcu(e,t,a,r,i){const n=a%h;y=(a/h|0)*e.v+r;const s=n*e.h+i;t(e,getBlockBufferOffset(e,y,s))}function decodeBlock(e,t,a){y=a/e.blocksPerLine|0;const r=a%e.blocksPerLine;t(e,getBlockBufferOffset(e,y,r))}const w=r.length;let x,S,k,C,v,F;F=u?0===n?0===o?function decodeDCFirst(e,t){const a=decodeHuffman(e.huffmanTableDC),r=0===a?0:receiveAndExtend(a)<<c;e.blockData[t]=e.pred+=r}:function decodeDCSuccessive(e,t){e.blockData[t]|=readBit()<<c}:0===o?function decodeACFirst(e,t){if(p>0){p--;return}let a=n;const r=s;for(;a<=r;){const r=decodeHuffman(e.huffmanTableAC),i=15&r,n=r>>4;if(0===i){if(n<15){p=receive(n)+(1<<n)-1;break}a+=16;continue}a+=n;const s=ja[a];e.blockData[t+s]=receiveAndExtend(i)*(1<<c);a++}}:function decodeACSuccessive(e,t){let a=n;const r=s;let i,o,l=0;for(;a<=r;){const r=t+ja[a],n=e.blockData[r]<0?-1:1;switch(b){case 0:o=decodeHuffman(e.huffmanTableAC);i=15&o;l=o>>4;if(0===i)if(l<15){p=receive(l)+(1<<l);b=4}else{l=16;b=1}else{if(1!==i)throw new JpegError("invalid ACn encoding");m=receiveAndExtend(i);b=l?2:3}continue;case 1:case 2:if(e.blockData[r])e.blockData[r]+=n*(readBit()<<c);else{l--;0===l&&(b=2===b?3:0)}break;case 3:if(e.blockData[r])e.blockData[r]+=n*(readBit()<<c);else{e.blockData[r]=m<<c;b=0}break;case 4:e.blockData[r]&&(e.blockData[r]+=n*(readBit()<<c))}a++}if(4===b){p--;0===p&&(b=0)}}:function decodeBaseline(e,t){const a=decodeHuffman(e.huffmanTableDC),r=0===a?0:receiveAndExtend(a);e.blockData[t]=e.pred+=r;let i=1;for(;i<64;){const a=decodeHuffman(e.huffmanTableAC),r=15&a,n=a>>4;if(0===r){if(n<15)break;i+=16;continue}i+=n;const s=ja[i];e.blockData[t+s]=receiveAndExtend(r);i++}};let T,O=0;const M=1===w?r[0].blocksPerLine*r[0].blocksPerColumn:h*a.mcusPerColumn;let D,R;for(;O<=M;){const a=i?Math.min(M-O,i):M;if(a>0){for(S=0;S<w;S++)r[S].pred=0;p=0;if(1===w){x=r[0];for(v=0;v<a;v++){decodeBlock(x,F,O);O++}}else for(v=0;v<a;v++){for(S=0;S<w;S++){x=r[S];D=x.h;R=x.v;for(k=0;k<R;k++)for(C=0;C<D;C++)decodeMcu(x,F,O,k,C)}O++}}g=0;T=findNextFileMarker(e,t);if(!T)break;if(T.invalid){warn(`decodeScan - ${a>0?"unexpected":"excessive"} MCU data, current marker is: ${T.invalid}`);t=T.offset}if(!(T.marker>=65488&&T.marker<=65495))break;t+=2}return t-d}function quantizeAndInverse(e,t,a){const r=e.quantizationTable,i=e.blockData;let n,s,o,c,l,h,u,d,f,g,p,m,b,y,w,x,S;if(!r)throw new JpegError("missing required Quantization Table.");for(let e=0;e<64;e+=8){f=i[t+e];g=i[t+e+1];p=i[t+e+2];m=i[t+e+3];b=i[t+e+4];y=i[t+e+5];w=i[t+e+6];x=i[t+e+7];f*=r[e];if(g|p|m|b|y|w|x){g*=r[e+1];p*=r[e+2];m*=r[e+3];b*=r[e+4];y*=r[e+5];w*=r[e+6];x*=r[e+7];n=za*f+128>>8;s=za*b+128>>8;o=p;c=w;l=$a*(g-x)+128>>8;d=$a*(g+x)+128>>8;h=m<<4;u=y<<4;n=n+s+1>>1;s=n-s;S=o*Wa+c*Ha+128>>8;o=o*Ha-c*Wa+128>>8;c=S;l=l+u+1>>1;u=l-u;d=d+h+1>>1;h=d-h;n=n+c+1>>1;c=n-c;s=s+o+1>>1;o=s-o;S=l*qa+d*Xa+2048>>12;l=l*Xa-d*qa+2048>>12;d=S;S=h*Ua+u*_a+2048>>12;h=h*_a-u*Ua+2048>>12;u=S;a[e]=n+d;a[e+7]=n-d;a[e+1]=s+u;a[e+6]=s-u;a[e+2]=o+h;a[e+5]=o-h;a[e+3]=c+l;a[e+4]=c-l}else{S=za*f+512>>10;a[e]=S;a[e+1]=S;a[e+2]=S;a[e+3]=S;a[e+4]=S;a[e+5]=S;a[e+6]=S;a[e+7]=S}}for(let e=0;e<8;++e){f=a[e];g=a[e+8];p=a[e+16];m=a[e+24];b=a[e+32];y=a[e+40];w=a[e+48];x=a[e+56];if(g|p|m|b|y|w|x){n=za*f+2048>>12;s=za*b+2048>>12;o=p;c=w;l=$a*(g-x)+2048>>12;d=$a*(g+x)+2048>>12;h=m;u=y;n=4112+(n+s+1>>1);s=n-s;S=o*Wa+c*Ha+2048>>12;o=o*Ha-c*Wa+2048>>12;c=S;l=l+u+1>>1;u=l-u;d=d+h+1>>1;h=d-h;n=n+c+1>>1;c=n-c;s=s+o+1>>1;o=s-o;S=l*qa+d*Xa+2048>>12;l=l*Xa-d*qa+2048>>12;d=S;S=h*Ua+u*_a+2048>>12;h=h*_a-u*Ua+2048>>12;u=S;f=n+d;x=n-d;g=s+u;w=s-u;p=o+h;y=o-h;m=c+l;b=c-l;f<16?f=0:f>=4080?f=255:f>>=4;g<16?g=0:g>=4080?g=255:g>>=4;p<16?p=0:p>=4080?p=255:p>>=4;m<16?m=0:m>=4080?m=255:m>>=4;b<16?b=0:b>=4080?b=255:b>>=4;y<16?y=0:y>=4080?y=255:y>>=4;w<16?w=0:w>=4080?w=255:w>>=4;x<16?x=0:x>=4080?x=255:x>>=4;i[t+e]=f;i[t+e+8]=g;i[t+e+16]=p;i[t+e+24]=m;i[t+e+32]=b;i[t+e+40]=y;i[t+e+48]=w;i[t+e+56]=x}else{S=za*f+8192>>14;S=S<-2040?0:S>=2024?255:S+2056>>4;i[t+e]=S;i[t+e+8]=S;i[t+e+16]=S;i[t+e+24]=S;i[t+e+32]=S;i[t+e+40]=S;i[t+e+48]=S;i[t+e+56]=S}}}function buildComponentData(e,t){const a=t.blocksPerLine,r=t.blocksPerColumn,i=new Int16Array(64);for(let e=0;e<r;e++)for(let r=0;r<a;r++){quantizeAndInverse(t,getBlockBufferOffset(t,e,r),i)}return t.blockData}function findNextFileMarker(e,t,a=t){const r=e.length-1;let i=a<t?a:t;if(t>=r)return null;const n=readUint16(e,t);if(n>=65472&&n<=65534)return{invalid:null,marker:n,offset:t};let s=readUint16(e,i);for(;!(s>=65472&&s<=65534);){if(++i>=r)return null;s=readUint16(e,i)}return{invalid:n.toString(16),marker:s,offset:i}}function prepareComponents(e){const t=Math.ceil(e.samplesPerLine/8/e.maxH),a=Math.ceil(e.scanLines/8/e.maxV);for(const r of e.components){const i=Math.ceil(Math.ceil(e.samplesPerLine/8)*r.h/e.maxH),n=Math.ceil(Math.ceil(e.scanLines/8)*r.v/e.maxV),s=t*r.h,o=64*(a*r.v)*(s+1);r.blockData=new Int16Array(o);r.blocksPerLine=i;r.blocksPerColumn=n}e.mcusPerLine=t;e.mcusPerColumn=a}function readDataBlock(e,t){const a=readUint16(e,t);let r=(t+=2)+a-2;const i=findNextFileMarker(e,r,t);if(i?.invalid){warn("readDataBlock - incorrect length, current marker is: "+i.invalid);r=i.offset}const n=e.subarray(t,r);return{appData:n,oldOffset:t,newOffset:t+n.length}}function skipData(e,t){const a=readUint16(e,t),r=(t+=2)+a-2,i=findNextFileMarker(e,r,t);return i?.invalid?i.offset:r}class JpegImage{constructor({decodeTransform:e=null,colorTransform:t=-1}={}){this._decodeTransform=e;this._colorTransform=t}static canUseImageDecoder(e,t=-1){let a=null,r=0,i=null,n=readUint16(e,r);r+=2;if(65496!==n)throw new JpegError("SOI not found");n=readUint16(e,r);r+=2;e:for(;65497!==n;){switch(n){case 65505:const{appData:t,oldOffset:s,newOffset:o}=readDataBlock(e,r);r=o;if(69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]&&0===t[4]&&0===t[5]){if(a)throw new JpegError("Duplicate EXIF-blocks found.");a={exifStart:s+6,exifEnd:o}}n=readUint16(e,r);r+=2;continue;case 65472:case 65473:case 65474:i=e[r+7];break e;case 65535:255!==e[r]&&r--}r=skipData(e,r);n=readUint16(e,r);r+=2}return 4===i||3===i&&0===t?null:a||{}}parse(e,{dnlScanLines:t=null}={}){let a,r,i=0,n=null,s=null,o=0;const c=[],l=[],h=[];let u=readUint16(e,i);i+=2;if(65496!==u)throw new JpegError("SOI not found");u=readUint16(e,i);i+=2;e:for(;65497!==u;){let d,f,g;switch(u){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const{appData:p,newOffset:m}=readDataBlock(e,i);i=m;65504===u&&74===p[0]&&70===p[1]&&73===p[2]&&70===p[3]&&0===p[4]&&(n={version:{major:p[5],minor:p[6]},densityUnits:p[7],xDensity:p[8]<<8|p[9],yDensity:p[10]<<8|p[11],thumbWidth:p[12],thumbHeight:p[13],thumbData:p.subarray(14,14+3*p[12]*p[13])});65518===u&&65===p[0]&&100===p[1]&&111===p[2]&&98===p[3]&&101===p[4]&&(s={version:p[5]<<8|p[6],flags0:p[7]<<8|p[8],flags1:p[9]<<8|p[10],transformCode:p[11]});break;case 65499:const b=readUint16(e,i);i+=2;const y=b+i-2;let w;for(;i<y;){const t=e[i++],a=new Uint16Array(64);if(t>>4){if(t>>4!=1)throw new JpegError("DQT - invalid table spec");for(f=0;f<64;f++){w=ja[f];a[w]=readUint16(e,i);i+=2}}else for(f=0;f<64;f++){w=ja[f];a[w]=e[i++]}c[15&t]=a}break;case 65472:case 65473:case 65474:if(a)throw new JpegError("Only single frame JPEGs supported");i+=2;a={};a.extended=65473===u;a.progressive=65474===u;a.precision=e[i++];const x=readUint16(e,i);i+=2;a.scanLines=t||x;a.samplesPerLine=readUint16(e,i);i+=2;a.components=[];a.componentIds={};const S=e[i++];let k=0,C=0;for(d=0;d<S;d++){const t=e[i],r=e[i+1]>>4,n=15&e[i+1];k<r&&(k=r);C<n&&(C=n);const s=e[i+2];g=a.components.push({h:r,v:n,quantizationId:s,quantizationTable:null});a.componentIds[t]=g-1;i+=3}a.maxH=k;a.maxV=C;prepareComponents(a);break;case 65476:const v=readUint16(e,i);i+=2;for(d=2;d<v;){const t=e[i++],a=new Uint8Array(16);let r=0;for(f=0;f<16;f++,i++)r+=a[f]=e[i];const n=new Uint8Array(r);for(f=0;f<r;f++,i++)n[f]=e[i];d+=17+r;(t>>4?l:h)[15&t]=buildHuffmanTable(a,n)}break;case 65501:i+=2;r=readUint16(e,i);i+=2;break;case 65498:const F=1==++o&&!t;i+=2;const T=e[i++],O=[];for(d=0;d<T;d++){const t=e[i++],r=a.componentIds[t],n=a.components[r];n.index=t;const s=e[i++];n.huffmanTableDC=h[s>>4];n.huffmanTableAC=l[15&s];O.push(n)}const M=e[i++],D=e[i++],R=e[i++];try{i+=decodeScan(e,i,a,O,r,M,D,R>>4,15&R,F)}catch(t){if(t instanceof DNLMarkerError){warn(`${t.message} -- attempting to re-parse the JPEG image.`);return this.parse(e,{dnlScanLines:t.scanLines})}if(t instanceof EOIMarkerError){warn(`${t.message} -- ignoring the rest of the image data.`);break e}throw t}break;case 65500:i+=4;break;case 65535:255!==e[i]&&i--;break;default:const N=findNextFileMarker(e,i-2,i-3);if(N?.invalid){warn("JpegImage.parse - unexpected data, current marker is: "+N.invalid);i=N.offset;break}if(!N||i>=e.length-1){warn("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new JpegError("JpegImage.parse - unknown marker: "+u.toString(16))}u=readUint16(e,i);i+=2}if(!a)throw new JpegError("JpegImage.parse - no frame data found.");this.width=a.samplesPerLine;this.height=a.scanLines;this.jfif=n;this.adobe=s;this.components=[];for(const e of a.components){const t=c[e.quantizationId];t&&(e.quantizationTable=t);this.components.push({index:e.index,output:buildComponentData(0,e),scaleX:e.h/a.maxH,scaleY:e.v/a.maxV,blocksPerLine:e.blocksPerLine,blocksPerColumn:e.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(e,t,a=!1){const r=this.width/e,i=this.height/t;let n,s,o,c,l,h,u,d,f,g,p,m=0;const b=this.components.length,y=e*t*b,w=new Uint8ClampedArray(y),x=new Uint32Array(e),S=4294967288;let k;for(u=0;u<b;u++){n=this.components[u];s=n.scaleX*r;o=n.scaleY*i;m=u;p=n.output;c=n.blocksPerLine+1<<3;if(s!==k){for(l=0;l<e;l++){d=0|l*s;x[l]=(d&S)<<3|7&d}k=s}for(h=0;h<t;h++){d=0|h*o;g=c*(d&S)|(7&d)<<3;for(l=0;l<e;l++){w[m]=p[g+x[l]];m+=b}}}let C=this._decodeTransform;a||4!==b||C||(C=new Int32Array([-256,255,-256,255,-256,255,-256,255]));if(C)for(u=0;u<y;)for(d=0,f=0;d<b;d++,u++,f+=2)w[u]=(w[u]*C[f]>>8)+C[f+1];return w}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform}_convertYccToRgb(e){let t,a,r;for(let i=0,n=e.length;i<n;i+=3){t=e[i];a=e[i+1];r=e[i+2];e[i]=t-179.456+1.402*r;e[i+1]=t+135.459-.344*a-.714*r;e[i+2]=t-226.816+1.772*a}return e}_convertYccToRgba(e,t){for(let a=0,r=0,i=e.length;a<i;a+=3,r+=4){const i=e[a],n=e[a+1],s=e[a+2];t[r]=i-179.456+1.402*s;t[r+1]=i+135.459-.344*n-.714*s;t[r+2]=i-226.816+1.772*n;t[r+3]=255}return t}_convertYcckToRgb(e){this._convertYcckToCmyk(e);return this._convertCmykToRgb(e)}_convertYcckToRgba(e){this._convertYcckToCmyk(e);return this._convertCmykToRgba(e)}_convertYcckToCmyk(e){let t,a,r;for(let i=0,n=e.length;i<n;i+=4){t=e[i];a=e[i+1];r=e[i+2];e[i]=434.456-t-1.402*r;e[i+1]=119.541-t+.344*a+.714*r;e[i+2]=481.816-t-1.772*a}return e}_convertCmykToRgb(e){const t=e.length/4;ColorSpaceUtils.cmyk.getRgbBuffer(e,0,t,e,0,8,0);return e.subarray(0,3*t)}_convertCmykToRgba(e){ColorSpaceUtils.cmyk.getRgbBuffer(e,0,e.length/4,e,0,8,1);if(ColorSpaceUtils.cmyk instanceof DeviceCmykCS)for(let t=3,a=e.length;t<a;t+=4)e[t]=255;return e}getData({width:e,height:t,forceRGBA:a=!1,forceRGB:r=!1,isSourcePDF:i=!1}){if(this.numComponents>4)throw new JpegError("Unsupported color mode");const n=this._getLinearizedBlockData(e,t,i);if(1===this.numComponents&&(a||r)){const e=n.length*(a?4:3),t=new Uint8ClampedArray(e);let r=0;if(a)!function grayToRGBA(e,t){if(FeatureTest.isLittleEndian)for(let a=0,r=e.length;a<r;a++)t[a]=65793*e[a]|4278190080;else for(let a=0,r=e.length;a<r;a++)t[a]=16843008*e[a]|255}(n,new Uint32Array(t.buffer));else for(const e of n){t[r++]=e;t[r++]=e;t[r++]=e}return t}if(3===this.numComponents&&this._isColorConversionNeeded){if(a){const e=new Uint8ClampedArray(n.length/3*4);return this._convertYccToRgba(n,e)}return this._convertYccToRgb(n)}if(4===this.numComponents){if(this._isColorConversionNeeded)return a?this._convertYcckToRgba(n):r?this._convertYcckToRgb(n):this._convertYcckToCmyk(n);if(a)return this._convertCmykToRgba(n);if(r)return this._convertCmykToRgb(n)}return n}}class JpegStream extends DecodeStream{static#M=FeatureTest.isImageDecoderSupported;constructor(e,t,a){super(t);this.stream=e;this.dict=e.dict;this.maybeLength=t;this.params=a}static get canUseImageDecoder(){return shadow(this,"canUseImageDecoder",this.#M?ImageDecoder.isTypeSupported("image/jpeg"):Promise.resolve(!1))}static setOptions({isImageDecoderSupported:e=!1}){this.#M=e}get bytes(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(e){}readBlock(){this.decodeImage()}get jpegOptions(){const e={decodeTransform:void 0,colorTransform:void 0},t=this.dict.getArray("D","Decode");if((this.forceRGBA||this.forceRGB)&&Array.isArray(t)){const a=this.dict.get("BPC","BitsPerComponent")||8,r=t.length,i=new Int32Array(r);let n=!1;const s=(1<<a)-1;for(let e=0;e<r;e+=2){i[e]=256*(t[e+1]-t[e])|0;i[e+1]=t[e]*s|0;256===i[e]&&0===i[e+1]||(n=!0)}n&&(e.decodeTransform=i)}if(this.params instanceof Dict){const t=this.params.get("ColorTransform");Number.isInteger(t)&&(e.colorTransform=t)}return shadow(this,"jpegOptions",e)}#N(e){for(let t=0,a=e.length-1;t<a;t++)if(255===e[t]&&216===e[t+1]){t>0&&(e=e.subarray(t));break}return e}decodeImage(e){if(this.eof)return this.buffer;e=this.#N(e||this.bytes);const t=new JpegImage(this.jpegOptions);t.parse(e);const a=t.getData({width:this.drawWidth,height:this.drawHeight,forceRGBA:this.forceRGBA,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=a;this.bufferLength=a.length;this.eof=!0;return this.buffer}get canAsyncDecodeImageFromBuffer(){return this.stream.isAsync}async getTransferableImage(){if(!await JpegStream.canUseImageDecoder)return null;const e=this.jpegOptions;if(e.decodeTransform)return null;let t;try{const a=this.canAsyncDecodeImageFromBuffer&&await this.stream.asyncGetBytes()||this.bytes;if(!a)return null;let r=this.#N(a);const i=JpegImage.canUseImageDecoder(r,e.colorTransform);if(!i)return null;if(i.exifStart){r=r.slice();r.fill(0,i.exifStart,i.exifEnd)}t=new ImageDecoder({data:r,type:"image/jpeg",preferAnimation:!1});return(await t.decode()).image}catch(e){warn(`getTransferableImage - failed: "${e}".`);return null}finally{t?.close()}}}var OpenJPEG=async function(e={}){var t,a,r=e,i=new Promise(((e,r)=>{t=e;a=r})),n="./this.program",quit_=(e,t)=>{throw t},s=import.meta.url;try{new URL(".",s).href}catch{}var o,c,l,h,u,d,f=console.log.bind(console),g=console.error.bind(console),p=!1;function updateMemoryViews(){var e=o.buffer;l=new Int8Array(e);new Int16Array(e);h=new Uint8Array(e);new Uint16Array(e);u=new Int32Array(e);d=new Uint32Array(e);new Float32Array(e);new Float64Array(e);new BigInt64Array(e);new BigUint64Array(e)}var m=0,b=null;class ExitStatus{name="ExitStatus";constructor(e){this.message=`Program terminated with exit(${e})`;this.status=e}}var callRuntimeCallbacks=e=>{for(;e.length>0;)e.shift()(r)},y=[],addOnPostRun=e=>y.push(e),w=[],addOnPreRun=e=>w.push(e),x=!0,S=0,k={},handleException=e=>{if(e instanceof ExitStatus||"unwind"==e)return c;quit_(0,e)},keepRuntimeAlive=()=>x||S>0,_proc_exit=e=>{c=e;if(!keepRuntimeAlive()){r.onExit?.(e);p=!0}quit_(0,new ExitStatus(e))},_exit=(e,t)=>{c=e;_proc_exit(e)},callUserCallback=e=>{if(!p)try{e();(()=>{if(!keepRuntimeAlive())try{_exit(c)}catch(e){handleException(e)}})()}catch(e){handleException(e)}},growMemory=e=>{var t=(e-o.buffer.byteLength+65535)/65536|0;try{o.grow(t);updateMemoryViews();return 1}catch(e){}},C={},getEnvStrings=()=>{if(!getEnvStrings.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:n||"./this.program"};for(var t in C)void 0===C[t]?delete e[t]:e[t]=C[t];var a=[];for(var t in e)a.push(`${t}=${e[t]}`);getEnvStrings.strings=a}return getEnvStrings.strings},lengthBytesUTF8=e=>{for(var t=0,a=0;a<e.length;++a){var r=e.charCodeAt(a);if(r<=127)t++;else if(r<=2047)t+=2;else if(r>=55296&&r<=57343){t+=4;++a}else t+=3}return t},v=[null,[],[]],F="undefined"!=typeof TextDecoder?new TextDecoder:void 0,UTF8ArrayToString=(e,t=0,a=NaN)=>{for(var r=t+a,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&F)return F.decode(e.subarray(t,i));for(var n="";t<i;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|c:(7&s)<<18|o<<12|c<<6|63&e[t++])<65536)n+=String.fromCharCode(s);else{var l=s-65536;n+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else n+=String.fromCharCode((31&s)<<6|o)}else n+=String.fromCharCode(s)}return n},printChar=(e,t)=>{var a=v[e];if(0===t||10===t){(1===e?f:g)(UTF8ArrayToString(a));a.length=0}else a.push(t)},UTF8ToString=(e,t)=>e?UTF8ArrayToString(h,e,t):"";r.noExitRuntime&&(x=r.noExitRuntime);r.print&&(f=r.print);r.printErr&&(g=r.printErr);r.wasmBinary&&r.wasmBinary;r.arguments&&r.arguments;r.thisProgram&&(n=r.thisProgram);r.writeArrayToMemory=(e,t)=>{l.set(e,t)};var T={l:()=>function abort(e){r.onAbort?.(e);g(e="Aborted("+e+")");p=!0;e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);a(t);throw t}(""),k:()=>{x=!1;S=0},m:(e,t)=>{if(k[e]){clearTimeout(k[e].id);delete k[e]}if(!t)return 0;var a=setTimeout((()=>{delete k[e];callUserCallback((()=>M(e,performance.now())))}),t);k[e]={id:a,timeout_ms:t};return 0},g:function _copy_pixels_1(e,t){e>>=2;const a=r.imageData=new Uint8ClampedArray(t),i=u.subarray(e,e+t);a.set(i)},f:function _copy_pixels_3(e,t,a,i){e>>=2;t>>=2;a>>=2;const n=r.imageData=new Uint8ClampedArray(3*i),s=u.subarray(e,e+i),o=u.subarray(t,t+i),c=u.subarray(a,a+i);for(let e=0;e<i;e++){n[3*e]=s[e];n[3*e+1]=o[e];n[3*e+2]=c[e]}},e:function _copy_pixels_4(e,t,a,i,n){e>>=2;t>>=2;a>>=2;i>>=2;const s=r.imageData=new Uint8ClampedArray(4*n),o=u.subarray(e,e+n),c=u.subarray(t,t+n),l=u.subarray(a,a+n),h=u.subarray(i,i+n);for(let e=0;e<n;e++){s[4*e]=o[e];s[4*e+1]=c[e];s[4*e+2]=l[e];s[4*e+3]=h[e]}},n:e=>{var t,a,r=h.length,i=2147483648;if((e>>>=0)>i)return!1;for(var n=1;n<=4;n*=2){var s=r*(1+.2/n);s=Math.min(s,e+100663296);var o=Math.min(i,(t=Math.max(e,s),a=65536,Math.ceil(t/a)*a));if(growMemory(o))return!0}return!1},p:(e,t)=>{var a=0,r=0;for(var i of getEnvStrings()){var n=t+a;d[e+r>>2]=n;a+=((e,t,a,r)=>{if(!(r>0))return 0;for(var i=a,n=a+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s));if(o<=127){if(a>=n)break;t[a++]=o}else if(o<=2047){if(a+1>=n)break;t[a++]=192|o>>6;t[a++]=128|63&o}else if(o<=65535){if(a+2>=n)break;t[a++]=224|o>>12;t[a++]=128|o>>6&63;t[a++]=128|63&o}else{if(a+3>=n)break;t[a++]=240|o>>18;t[a++]=128|o>>12&63;t[a++]=128|o>>6&63;t[a++]=128|63&o}}t[a]=0;return a-i})(i,h,n,1/0)+1;r+=4}return 0},q:(e,t)=>{var a=getEnvStrings();d[e>>2]=a.length;var r=0;for(var i of a)r+=lengthBytesUTF8(i)+1;d[t>>2]=r;return 0},b:e=>52,o:function _fd_seek(e,t,a,r){t=(i=t)<-9007199254740992||i>9007199254740992?NaN:Number(i);var i;return 70},c:(e,t,a,r)=>{for(var i=0,n=0;n<a;n++){var s=d[t>>2],o=d[t+4>>2];t+=8;for(var c=0;c<o;c++)printChar(e,h[s+c]);i+=o}d[r>>2]=i;return 0},r:function _gray_to_rgba(e,t){e>>=2;const a=r.imageData=new Uint8ClampedArray(4*t),i=u.subarray(e,e+t);for(let e=0;e<t;e++){a[4*e]=a[4*e+1]=a[4*e+2]=i[e];a[4*e+3]=255}},i:function _graya_to_rgba(e,t,a){e>>=2;t>>=2;const i=r.imageData=new Uint8ClampedArray(4*a),n=u.subarray(e,e+a),s=u.subarray(t,t+a);for(let e=0;e<a;e++){i[4*e]=i[4*e+1]=i[4*e+2]=n[e];i[4*e+3]=s[e]}},d:function _jsPrintWarning(e){const t=UTF8ToString(e);(r.warn||console.warn)(`OpenJPEG: ${t}`)},j:_proc_exit,h:function _rgb_to_rgba(e,t,a,i){e>>=2;t>>=2;a>>=2;const n=r.imageData=new Uint8ClampedArray(4*i),s=u.subarray(e,e+i),o=u.subarray(t,t+i),c=u.subarray(a,a+i);for(let e=0;e<i;e++){n[4*e]=s[e];n[4*e+1]=o[e];n[4*e+2]=c[e];n[4*e+3]=255}},a:function _storeErrorMessage(e){const t=UTF8ToString(e);r.errorMessages?r.errorMessages+="\\n"+t:r.errorMessages=t}},O=await async function createWasm(){function receiveInstance(e,t){O=e.exports;o=O.s;updateMemoryViews();!function removeRunDependency(e){m--;r.monitorRunDependencies?.(m);if(0==m&&b){var t=b;b=null;t()}}();return O}!function addRunDependency(e){m++;r.monitorRunDependencies?.(m)}();var e=function getWasmImports(){return{a:T}}();return new Promise(((t,a)=>{r.instantiateWasm(e,((e,a)=>{t(receiveInstance(e))}))}))}(),M=(O.t,r._malloc=O.u,r._free=O.v,r._jp2_decode=O.w,O.x);!function preInit(){if(r.preInit){"function"==typeof r.preInit&&(r.preInit=[r.preInit]);for(;r.preInit.length>0;)r.preInit.shift()()}}();!function run(){if(m>0)b=run;else{!function preRun(){if(r.preRun){"function"==typeof r.preRun&&(r.preRun=[r.preRun]);for(;r.preRun.length;)addOnPreRun(r.preRun.shift())}callRuntimeCallbacks(w)}();if(m>0)b=run;else if(r.setStatus){r.setStatus("Running...");setTimeout((()=>{setTimeout((()=>r.setStatus("")),1);doRun()}),1)}else doRun()}function doRun(){r.calledRun=!0;if(!p){!function initRuntime(){O.t()}();t(r);r.onRuntimeInitialized?.();!function postRun(){if(r.postRun){"function"==typeof r.postRun&&(r.postRun=[r.postRun]);for(;r.postRun.length;)addOnPostRun(r.postRun.shift())}callRuntimeCallbacks(y)}()}}}();return i};const Ga=OpenJPEG;class JpxError extends fa{constructor(e){super(e,"JpxError")}}class JpxImage{static#E=null;static#P=null;static#L=null;static#v=!0;static#j=!0;static#F=null;static setOptions({handler:e,useWasm:t,useWorkerFetch:a,wasmUrl:r}){this.#v=t;this.#j=a;this.#F=r;a||(this.#P=e)}static async#_(e){const t=`${this.#F}openjpeg_nowasm_fallback.js`;let a=null;try{a=(await import(\n/*webpackIgnore: true*/\n/*@vite-ignore*/\nt)).default()}catch(e){warn(`JpxImage#getJsModule: ${e}`)}e(a)}static async#U(e,t,a){const r="openjpeg.wasm";try{this.#E||(this.#j?this.#E=await fetchBinaryData(`${this.#F}${r}`):this.#E=await this.#P.sendWithPromise("FetchBinaryData",{type:"wasmFactory",filename:r}));return a((await WebAssembly.instantiate(this.#E,t)).instance)}catch(t){warn(`JpxImage#instantiateWasm: ${t}`);this.#_(e);return null}finally{this.#P=null}}static async decode(e,{numComponents:t=4,isIndexedColormap:a=!1,smaskInData:r=!1,reducePower:i=0}={}){if(!this.#L){const{promise:e,resolve:t}=Promise.withResolvers(),a=[e];this.#v?a.push(Ga({warn,instantiateWasm:this.#U.bind(this,t)})):this.#_(t);this.#L=Promise.race(a)}const n=await this.#L;if(!n)throw new JpxError("OpenJPEG failed to initialize");let s;try{const o=e.length;s=n._malloc(o);n.writeArrayToMemory(e,s);if(n._jp2_decode(s,o,t>0?t:0,!!a,!!r,i)){const{errorMessages:e}=n;if(e){delete n.errorMessages;throw new JpxError(e)}throw new JpxError("Unknown error")}const{imageData:c}=n;n.imageData=null;return c}finally{s&&n._free(s)}}static cleanup(){this.#L=null}static parseImageProperties(e){let t=e.getByte();for(;t>=0;){const a=t;t=e.getByte();if(65361===(a<<8|t)){e.skip(4);const t=e.getInt32()>>>0,a=e.getInt32()>>>0,r=e.getInt32()>>>0,i=e.getInt32()>>>0;e.skip(16);return{width:t-r,height:a-i,bitsPerComponent:8,componentsCount:e.getUint16()}}}throw new JpxError("No size marker found in JPX stream")}}function addState(e,t,a,r,i){let n=e;for(let e=0,a=t.length-1;e<a;e++){const a=t[e];n=n[a]||=[]}n[t.at(-1)]={checkFn:a,iterateFn:r,processFn:i}}const Va=[];addState(Va,[Be,Ne,Yt,Re],null,(function iterateInlineImageGroup(e,t){const a=e.fnArray,r=(t-(e.iCurr-3))%4;switch(r){case 0:return a[t]===Be;case 1:return a[t]===Ne;case 2:return a[t]===Yt;case 3:return a[t]===Re}throw new Error(`iterateInlineImageGroup - invalid pos: ${r}`)}),(function foundInlineImageGroup(e,t){const a=e.fnArray,r=e.argsArray,i=e.iCurr,n=i-3,s=i-2,o=i-1,c=Math.min(Math.floor((t-n)/4),200);if(c<10)return t-(t-n)%4;let l=0;const h=[];let u=0,d=1,f=1;for(let e=0;e<c;e++){const t=r[s+(e<<2)],a=r[o+(e<<2)][0];if(d+a.width>1e3){l=Math.max(l,d);f+=u+2;d=0;u=0}h.push({transform:t,x:d,y:f,w:a.width,h:a.height});d+=a.width+2;u=Math.max(u,a.height)}const g=Math.max(l,d)+1,p=f+u+1,m=new Uint8Array(g*p*4),b=g<<2;for(let e=0;e<c;e++){const t=r[o+(e<<2)][0].data,a=h[e].w<<2;let i=0,n=h[e].x+h[e].y*g<<2;m.set(t.subarray(0,a),n-b);for(let r=0,s=h[e].h;r<s;r++){m.set(t.subarray(i,i+a),n);i+=a;n+=b}m.set(t.subarray(i-a,i),n);for(;n>=0;){t[n-4]=t[n];t[n-3]=t[n+1];t[n-2]=t[n+2];t[n-1]=t[n+3];t[n+a]=t[n+a-4];t[n+a+1]=t[n+a-3];t[n+a+2]=t[n+a-2];t[n+a+3]=t[n+a-1];n-=b}}const y={width:g,height:p};if(e.isOffscreenCanvasSupported){const e=new OffscreenCanvas(g,p);e.getContext("2d").putImageData(new ImageData(new Uint8ClampedArray(m.buffer),g,p),0,0);y.bitmap=e.transferToImageBitmap();y.data=null}else{y.kind=v;y.data=m}a.splice(n,4*c,Zt);r.splice(n,4*c,[y,h]);return n+1}));addState(Va,[Be,Ne,Vt,Re],null,(function iterateImageMaskGroup(e,t){const a=e.fnArray,r=(t-(e.iCurr-3))%4;switch(r){case 0:return a[t]===Be;case 1:return a[t]===Ne;case 2:return a[t]===Vt;case 3:return a[t]===Re}throw new Error(`iterateImageMaskGroup - invalid pos: ${r}`)}),(function foundImageMaskGroup(e,t){const a=e.fnArray,r=e.argsArray,i=e.iCurr,n=i-3,s=i-2,o=i-1;let c=Math.floor((t-n)/4);if(c<10)return t-(t-n)%4;let l,h,u=!1;const d=r[o][0],f=r[s][0],g=r[s][1],p=r[s][2],m=r[s][3];if(g===p){u=!0;l=s+4;let e=o+4;for(let t=1;t<c;t++,l+=4,e+=4){h=r[l];if(r[e][0]!==d||h[0]!==f||h[1]!==g||h[2]!==p||h[3]!==m){t<10?u=!1:c=t;break}}}if(u){c=Math.min(c,1e3);const e=new Float32Array(2*c);l=s;for(let t=0;t<c;t++,l+=4){h=r[l];e[t<<1]=h[4];e[1+(t<<1)]=h[5]}a.splice(n,4*c,ea);r.splice(n,4*c,[d,f,g,p,m,e])}else{c=Math.min(c,100);const e=[];for(let t=0;t<c;t++){h=r[s+(t<<2)];const a=r[o+(t<<2)][0];e.push({data:a.data,width:a.width,height:a.height,interpolate:a.interpolate,count:a.count,transform:h})}a.splice(n,4*c,Kt);r.splice(n,4*c,[e])}return n+1}));addState(Va,[Be,Ne,Jt,Re],(function(e){const t=e.argsArray,a=e.iCurr-2;return 0===t[a][1]&&0===t[a][2]}),(function iterateImageGroup(e,t){const a=e.fnArray,r=e.argsArray,i=(t-(e.iCurr-3))%4;switch(i){case 0:return a[t]===Be;case 1:if(a[t]!==Ne)return!1;const i=e.iCurr-2,n=r[i][0],s=r[i][3];return r[t][0]===n&&0===r[t][1]&&0===r[t][2]&&r[t][3]===s;case 2:if(a[t]!==Jt)return!1;const o=r[e.iCurr-1][0];return r[t][0]===o;case 3:return a[t]===Re}throw new Error(`iterateImageGroup - invalid pos: ${i}`)}),(function(e,t){const a=e.fnArray,r=e.argsArray,i=e.iCurr,n=i-3,s=i-2,o=r[i-1][0],c=r[s][0],l=r[s][3],h=Math.min(Math.floor((t-n)/4),1e3);if(h<3)return t-(t-n)%4;const u=new Float32Array(2*h);let d=s;for(let e=0;e<h;e++,d+=4){const t=r[d];u[e<<1]=t[4];u[1+(e<<1)]=t[5]}const f=[o,c,l,u];a.splice(n,4*h,Qt);r.splice(n,4*h,f);return n+1}));addState(Va,[Qe,nt,ht,dt,et],null,(function iterateShowTextGroup(e,t){const a=e.fnArray,r=e.argsArray,i=(t-(e.iCurr-4))%5;switch(i){case 0:return a[t]===Qe;case 1:return a[t]===nt;case 2:return a[t]===ht;case 3:if(a[t]!==dt)return!1;const i=e.iCurr-3,n=r[i][0],s=r[i][1];return r[t][0]===n&&r[t][1]===s;case 4:return a[t]===et}throw new Error(`iterateShowTextGroup - invalid pos: ${i}`)}),(function(e,t){const a=e.fnArray,r=e.argsArray,i=e.iCurr,n=i-4,s=i-3,o=i-2,c=i-1,l=i,h=r[s][0],u=r[s][1];let d=Math.min(Math.floor((t-n)/5),1e3);if(d<3)return t-(t-n)%5;let f=n;if(n>=4&&a[n-4]===a[s]&&a[n-3]===a[o]&&a[n-2]===a[c]&&a[n-1]===a[l]&&r[n-4][0]===h&&r[n-4][1]===u){d++;f-=5}let g=f+4;for(let e=1;e<d;e++){a.splice(g,3);r.splice(g,3);g+=2}return g+1}));addState(Va,[Be,Ne,aa,Re],(e=>{const t=e.argsArray,a=t[e.iCurr-1][0];if(a!==qe&&a!==He&&a!==$e&&a!==Ge&&a!==Ve&&a!==Ke)return!0;const r=t[e.iCurr-2];return 1===r[0]&&0===r[1]&&0===r[2]&&1===r[3]}),(()=>!1),((e,t)=>{const{fnArray:a,argsArray:r}=e,i=e.iCurr,n=i-3,s=i-2,o=r[i-1],c=r[s],[,[l],h]=o;if(h){Util.scaleMinMax(c,h);for(let e=0,t=l.length;e<t;)switch(l[e++]){case sa:case oa:Util.applyTransform(l,c,e);e+=2;break;case ca:Util.applyTransformToBezier(l,c,e);e+=6}}a.splice(n,4,aa);r.splice(n,4,o);return n+1}));class NullOptimizer{constructor(e){this.queue=e}_optimize(){}push(e,t){this.queue.fnArray.push(e);this.queue.argsArray.push(t);this._optimize()}flush(){}reset(){}}class QueueOptimizer extends NullOptimizer{constructor(e){super(e);this.state=null;this.context={iCurr:0,fnArray:e.fnArray,argsArray:e.argsArray,isOffscreenCanvasSupported:OperatorList.isOffscreenCanvasSupported};this.match=null;this.lastProcessed=0}_optimize(){const e=this.queue.fnArray;let t=this.lastProcessed,a=e.length,r=this.state,i=this.match;if(!r&&!i&&t+1===a&&!Va[e[t]]){this.lastProcessed=a;return}const n=this.context;for(;t<a;){if(i){if((0,i.iterateFn)(n,t)){t++;continue}t=(0,i.processFn)(n,t+1);a=e.length;i=null;r=null;if(t>=a)break}r=(r||Va)[e[t]];if(r&&!Array.isArray(r)){n.iCurr=t;t++;if(!r.checkFn||(0,r.checkFn)(n)){i=r;r=null}else r=null}else t++}this.state=r;this.match=i;this.lastProcessed=t}flush(){for(;this.match;){const e=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,e);this.match=null;this.state=null;this._optimize()}}reset(){this.state=null;this.match=null;this.lastProcessed=0}}class OperatorList{static CHUNK_SIZE=1e3;static CHUNK_SIZE_ABOUT=this.CHUNK_SIZE-5;static isOffscreenCanvasSupported=!1;constructor(e=0,t){this._streamSink=t;this.fnArray=[];this.argsArray=[];this.optimizer=!t||e&d?new NullOptimizer(this):new QueueOptimizer(this);this.dependencies=new Set;this._totalLength=0;this.weight=0;this._resolved=t?null:Promise.resolve()}static setOptions({isOffscreenCanvasSupported:e}){this.isOffscreenCanvasSupported=e}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(e,t){this.optimizer.push(e,t);this.weight++;this._streamSink&&(this.weight>=OperatorList.CHUNK_SIZE||this.weight>=OperatorList.CHUNK_SIZE_ABOUT&&(e===Re||e===et))&&this.flush()}addImageOps(e,t,a,r=!1){if(r){this.addOp(Be);this.addOp(De,[[["SMask",!1]]])}void 0!==a&&this.addOp(jt,["OC",a]);this.addOp(e,t);void 0!==a&&this.addOp(_t,[]);r&&this.addOp(Re)}addDependency(e){if(!this.dependencies.has(e)){this.dependencies.add(e);this.addOp(ke,[e])}}addDependencies(e){for(const t of e)this.addDependency(t)}addOpList(e){if(e instanceof OperatorList){for(const t of e.dependencies)this.dependencies.add(t);for(let t=0,a=e.length;t<a;t++)this.addOp(e.fnArray[t],e.argsArray[t])}else warn(\'addOpList - ignoring invalid "opList" parameter.\')}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){const e=[],{fnArray:t,argsArray:a,length:r}=this;for(let i=0;i<r;i++)switch(t[i]){case Yt:case Zt:case Vt:{const{bitmap:t,data:r}=a[i][0];(t||r?.buffer)&&e.push(t||r.buffer);break}case aa:{const[,[t],r]=a[i];t&&e.push(t.buffer,r.buffer);break}case qt:const[t,r]=a[i];t&&e.push(t.buffer);r&&e.push(r.buffer);break;case ht:e.push(a[i][0].buffer)}return e}flush(e=!1,t=null){this.optimizer.flush();const a=this.length;this._totalLength+=a;this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:e,separateAnnots:t,length:a},1,this._transfers);this.dependencies.clear();this.fnArray.length=0;this.argsArray.length=0;this.weight=0;this.optimizer.reset()}}function hexToInt(e,t){let a=0;for(let r=0;r<=t;r++)a=a<<8|e[r];return a>>>0}function hexToStr(e,t){return 1===t?String.fromCharCode(e[0],e[1]):3===t?String.fromCharCode(e[0],e[1],e[2],e[3]):String.fromCharCode(...e.subarray(0,t+1))}function addHex(e,t,a){let r=0;for(let i=a;i>=0;i--){r+=e[i]+t[i];e[i]=255&r;r>>=8}}function incHex(e,t){let a=1;for(let r=t;r>=0&&a>0;r--){a+=e[r];e[r]=255&a;a>>=8}}const Ka=16;class BinaryCMapStream{constructor(e){this.buffer=e;this.pos=0;this.end=e.length;this.tmpBuf=new Uint8Array(19)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let e,t=0;do{const a=this.readByte();if(a<0)throw new FormatError("unexpected EOF in bcmap");e=!(128&a);t=t<<7|127&a}while(!e);return t}readSigned(){const e=this.readNumber();return 1&e?~(e>>>1):e>>>1}readHex(e,t){e.set(this.buffer.subarray(this.pos,this.pos+t+1));this.pos+=t+1}readHexNumber(e,t){let a;const r=this.tmpBuf;let i=0;do{const e=this.readByte();if(e<0)throw new FormatError("unexpected EOF in bcmap");a=!(128&e);r[i++]=127&e}while(!a);let n=t,s=0,o=0;for(;n>=0;){for(;o<8&&r.length>0;){s|=r[--i]<<o;o+=7}e[n]=255&s;n--;s>>=8;o-=8}}readHexSigned(e,t){this.readHexNumber(e,t);const a=1&e[t]?255:0;let r=0;for(let i=0;i<=t;i++){r=(1&r)<<8|e[i];e[i]=r>>1^a}}readString(){const e=this.readNumber(),t=new Array(e);for(let a=0;a<e;a++)t[a]=this.readNumber();return String.fromCharCode(...t)}}class BinaryCMapReader{async process(e,t,a){const r=new BinaryCMapStream(e),i=r.readByte();t.vertical=!!(1&i);let n=null;const s=new Uint8Array(Ka),o=new Uint8Array(Ka),c=new Uint8Array(Ka),l=new Uint8Array(Ka),h=new Uint8Array(Ka);let u,d;for(;(d=r.readByte())>=0;){const e=d>>5;if(7===e){switch(31&d){case 0:r.readString();break;case 1:n=r.readString()}continue}const a=!!(16&d),i=15&d;if(i+1>Ka)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const f=1,g=r.readNumber();switch(e){case 0:r.readHex(s,i);r.readHexNumber(o,i);addHex(o,s,i);t.addCodespaceRange(i+1,hexToInt(s,i),hexToInt(o,i));for(let e=1;e<g;e++){incHex(o,i);r.readHexNumber(s,i);addHex(s,o,i);r.readHexNumber(o,i);addHex(o,s,i);t.addCodespaceRange(i+1,hexToInt(s,i),hexToInt(o,i))}break;case 1:r.readHex(s,i);r.readHexNumber(o,i);addHex(o,s,i);r.readNumber();for(let e=1;e<g;e++){incHex(o,i);r.readHexNumber(s,i);addHex(s,o,i);r.readHexNumber(o,i);addHex(o,s,i);r.readNumber()}break;case 2:r.readHex(c,i);u=r.readNumber();t.mapOne(hexToInt(c,i),u);for(let e=1;e<g;e++){incHex(c,i);if(!a){r.readHexNumber(h,i);addHex(c,h,i)}u=r.readSigned()+(u+1);t.mapOne(hexToInt(c,i),u)}break;case 3:r.readHex(s,i);r.readHexNumber(o,i);addHex(o,s,i);u=r.readNumber();t.mapCidRange(hexToInt(s,i),hexToInt(o,i),u);for(let e=1;e<g;e++){incHex(o,i);if(a)s.set(o);else{r.readHexNumber(s,i);addHex(s,o,i)}r.readHexNumber(o,i);addHex(o,s,i);u=r.readNumber();t.mapCidRange(hexToInt(s,i),hexToInt(o,i),u)}break;case 4:r.readHex(c,f);r.readHex(l,i);t.mapOne(hexToInt(c,f),hexToStr(l,i));for(let e=1;e<g;e++){incHex(c,f);if(!a){r.readHexNumber(h,f);addHex(c,h,f)}incHex(l,i);r.readHexSigned(h,i);addHex(l,h,i);t.mapOne(hexToInt(c,f),hexToStr(l,i))}break;case 5:r.readHex(s,f);r.readHexNumber(o,f);addHex(o,s,f);r.readHex(l,i);t.mapBfRange(hexToInt(s,f),hexToInt(o,f),hexToStr(l,i));for(let e=1;e<g;e++){incHex(o,f);if(a)s.set(o);else{r.readHexNumber(s,f);addHex(s,o,f)}r.readHexNumber(o,f);addHex(o,s,f);r.readHex(l,i);t.mapBfRange(hexToInt(s,f),hexToInt(o,f),hexToStr(l,i))}break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${e}`)}}return n?a(n):t}}class Ascii85Stream extends DecodeStream{constructor(e,t){t&&(t*=.8);super(t);this.str=e;this.dict=e.dict;this.input=new Uint8Array(5)}readBlock(){const e=this.str;let t=e.getByte();for(;isWhiteSpace(t);)t=e.getByte();if(-1===t||126===t){this.eof=!0;return}const a=this.bufferLength;let r,i;if(122===t){r=this.ensureBuffer(a+4);for(i=0;i<4;++i)r[a+i]=0;this.bufferLength+=4}else{const n=this.input;n[0]=t;for(i=1;i<5;++i){t=e.getByte();for(;isWhiteSpace(t);)t=e.getByte();n[i]=t;if(-1===t||126===t)break}r=this.ensureBuffer(a+i-1);this.bufferLength+=i-1;if(i<5){for(;i<5;++i)n[i]=117;this.eof=!0}let s=0;for(i=0;i<5;++i)s=85*s+(n[i]-33);for(i=3;i>=0;--i){r[a+i]=255&s;s>>=8}}}}class AsciiHexStream extends DecodeStream{constructor(e,t){t&&(t*=.5);super(t);this.str=e;this.dict=e.dict;this.firstDigit=-1}readBlock(){const e=this.str.getBytes(8e3);if(!e.length){this.eof=!0;return}const t=e.length+1>>1,a=this.ensureBuffer(this.bufferLength+t);let r=this.bufferLength,i=this.firstDigit;for(const t of e){let e;if(t>=48&&t<=57)e=15&t;else{if(!(t>=65&&t<=70||t>=97&&t<=102)){if(62===t){this.eof=!0;break}continue}e=9+(15&t)}if(i<0)i=e;else{a[r++]=i<<4|e;i=-1}}if(i>=0&&this.eof){a[r++]=i<<4;i=-1}this.firstDigit=i;this.bufferLength=r}}const Ja=-1,Ya=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],Za=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],Qa=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],er=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],tr=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],ar=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];class CCITTFaxDecoder{constructor(e,t={}){if("function"!=typeof e?.next)throw new Error(\'CCITTFaxDecoder - invalid "source" parameter.\');this.source=e;this.eof=!1;this.encoding=t.K||0;this.eoline=t.EndOfLine||!1;this.byteAlign=t.EncodedByteAlign||!1;this.columns=t.Columns||1728;this.rows=t.Rows||0;this.eoblock=t.EndOfBlock??!0;this.black=t.BlackIs1||!1;this.codingLine=new Uint32Array(this.columns+1);this.refLine=new Uint32Array(this.columns+2);this.codingLine[0]=this.columns;this.codingPos=0;this.row=0;this.nextLine2D=this.encoding<0;this.inputBits=0;this.inputBuf=0;this.outputBits=0;this.rowsDone=!1;let a;for(;0===(a=this._lookBits(12));)this._eatBits(1);1===a&&this._eatBits(12);if(this.encoding>0){this.nextLine2D=!this._lookBits(1);this._eatBits(1)}}readNextChar(){if(this.eof)return-1;const e=this.refLine,t=this.codingLine,a=this.columns;let r,i,n,s,o;if(0===this.outputBits){this.rowsDone&&(this.eof=!0);if(this.eof)return-1;this.err=!1;let n,o,c;if(this.nextLine2D){for(s=0;t[s]<a;++s)e[s]=t[s];e[s++]=a;e[s]=a;t[0]=0;this.codingPos=0;r=0;i=0;for(;t[this.codingPos]<a;){n=this._getTwoDimCode();switch(n){case 0:this._addPixels(e[r+1],i);e[r+1]<a&&(r+=2);break;case 1:n=o=0;if(i){do{n+=c=this._getBlackCode()}while(c>=64);do{o+=c=this._getWhiteCode()}while(c>=64)}else{do{n+=c=this._getWhiteCode()}while(c>=64);do{o+=c=this._getBlackCode()}while(c>=64)}this._addPixels(t[this.codingPos]+n,i);t[this.codingPos]<a&&this._addPixels(t[this.codingPos]+o,1^i);for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2;break;case 7:this._addPixels(e[r]+3,i);i^=1;if(t[this.codingPos]<a){++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case 5:this._addPixels(e[r]+2,i);i^=1;if(t[this.codingPos]<a){++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case 3:this._addPixels(e[r]+1,i);i^=1;if(t[this.codingPos]<a){++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case 2:this._addPixels(e[r],i);i^=1;if(t[this.codingPos]<a){++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case 8:this._addPixelsNeg(e[r]-3,i);i^=1;if(t[this.codingPos]<a){r>0?--r:++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case 6:this._addPixelsNeg(e[r]-2,i);i^=1;if(t[this.codingPos]<a){r>0?--r:++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case 4:this._addPixelsNeg(e[r]-1,i);i^=1;if(t[this.codingPos]<a){r>0?--r:++r;for(;e[r]<=t[this.codingPos]&&e[r]<a;)r+=2}break;case Ja:this._addPixels(a,0);this.eof=!0;break;default:info("bad 2d code");this._addPixels(a,0);this.err=!0}}}else{t[0]=0;this.codingPos=0;i=0;for(;t[this.codingPos]<a;){n=0;if(i)do{n+=c=this._getBlackCode()}while(c>=64);else do{n+=c=this._getWhiteCode()}while(c>=64);this._addPixels(t[this.codingPos]+n,i);i^=1}}let l=!1;this.byteAlign&&(this.inputBits&=-8);if(this.eoblock||this.row!==this.rows-1){n=this._lookBits(12);if(this.eoline)for(;n!==Ja&&1!==n;){this._eatBits(1);n=this._lookBits(12)}else for(;0===n;){this._eatBits(1);n=this._lookBits(12)}if(1===n){this._eatBits(12);l=!0}else n===Ja&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone){this.nextLine2D=!this._lookBits(1);this._eatBits(1)}if(this.eoblock&&l&&this.byteAlign){n=this._lookBits(12);if(1===n){this._eatBits(12);if(this.encoding>0){this._lookBits(1);this._eatBits(1)}if(this.encoding>=0)for(s=0;s<4;++s){n=this._lookBits(12);1!==n&&info("bad rtc code: "+n);this._eatBits(12);if(this.encoding>0){this._lookBits(1);this._eatBits(1)}}this.eof=!0}}else if(this.err&&this.eoline){for(;;){n=this._lookBits(13);if(n===Ja){this.eof=!0;return-1}if(n>>1==1)break;this._eatBits(1)}this._eatBits(12);if(this.encoding>0){this._eatBits(1);this.nextLine2D=!(1&n)}}this.outputBits=t[0]>0?t[this.codingPos=0]:t[this.codingPos=1];this.row++}if(this.outputBits>=8){o=1&this.codingPos?0:255;this.outputBits-=8;if(0===this.outputBits&&t[this.codingPos]<a){this.codingPos++;this.outputBits=t[this.codingPos]-t[this.codingPos-1]}}else{n=8;o=0;do{if("number"!=typeof this.outputBits)throw new FormatError(\'Invalid /CCITTFaxDecode data, "outputBits" must be a number.\');if(this.outputBits>n){o<<=n;1&this.codingPos||(o|=255>>8-n);this.outputBits-=n;n=0}else{o<<=this.outputBits;1&this.codingPos||(o|=255>>8-this.outputBits);n-=this.outputBits;this.outputBits=0;if(t[this.codingPos]<a){this.codingPos++;this.outputBits=t[this.codingPos]-t[this.codingPos-1]}else if(n>0){o<<=n;n=0}}}while(n)}this.black&&(o^=255);return o}_addPixels(e,t){const a=this.codingLine;let r=this.codingPos;if(e>a[r]){if(e>this.columns){info("row is wrong length");this.err=!0;e=this.columns}1&r^t&&++r;a[r]=e}this.codingPos=r}_addPixelsNeg(e,t){const a=this.codingLine;let r=this.codingPos;if(e>a[r]){if(e>this.columns){info("row is wrong length");this.err=!0;e=this.columns}1&r^t&&++r;a[r]=e}else if(e<a[r]){if(e<0){info("invalid code");this.err=!0;e=0}for(;r>0&&e<a[r-1];)--r;a[r]=e}this.codingPos=r}_findTableCode(e,t,a,r){const i=r||0;for(let r=e;r<=t;++r){let e=this._lookBits(r);if(e===Ja)return[!0,1,!1];r<t&&(e<<=t-r);if(!i||e>=i){const t=a[e-i];if(t[0]===r){this._eatBits(r);return[!0,t[1],!0]}}}return[!1,0,!1]}_getTwoDimCode(){let e,t=0;if(this.eoblock){t=this._lookBits(7);e=Ya[t];if(e?.[0]>0){this._eatBits(e[0]);return e[1]}}else{const e=this._findTableCode(1,7,Ya);if(e[0]&&e[2])return e[1]}info("Bad two dim code");return Ja}_getWhiteCode(){let e,t=0;if(this.eoblock){t=this._lookBits(12);if(t===Ja)return 1;e=t>>5?Qa[t>>3]:Za[t];if(e[0]>0){this._eatBits(e[0]);return e[1]}}else{let e=this._findTableCode(1,9,Qa);if(e[0])return e[1];e=this._findTableCode(11,12,Za);if(e[0])return e[1]}info("bad white code");this._eatBits(1);return 1}_getBlackCode(){let e,t;if(this.eoblock){e=this._lookBits(13);if(e===Ja)return 1;t=e>>7?!(e>>9)&&e>>7?tr[(e>>1)-64]:ar[e>>7]:er[e];if(t[0]>0){this._eatBits(t[0]);return t[1]}}else{let e=this._findTableCode(2,6,ar);if(e[0])return e[1];e=this._findTableCode(7,12,tr,64);if(e[0])return e[1];e=this._findTableCode(10,13,er);if(e[0])return e[1]}info("bad black code");this._eatBits(1);return 1}_lookBits(e){let t;for(;this.inputBits<e;){if(-1===(t=this.source.next()))return 0===this.inputBits?Ja:this.inputBuf<<e-this.inputBits&65535>>16-e;this.inputBuf=this.inputBuf<<8|t;this.inputBits+=8}return this.inputBuf>>this.inputBits-e&65535>>16-e}_eatBits(e){(this.inputBits-=e)<0&&(this.inputBits=0)}}class CCITTFaxStream extends DecodeStream{constructor(e,t,a){super(t);this.str=e;this.dict=e.dict;a instanceof Dict||(a=Dict.empty);const r={next:()=>e.getByte()};this.ccittFaxDecoder=new CCITTFaxDecoder(r,{K:a.get("K"),EndOfLine:a.get("EndOfLine"),EncodedByteAlign:a.get("EncodedByteAlign"),Columns:a.get("Columns"),Rows:a.get("Rows"),EndOfBlock:a.get("EndOfBlock"),BlackIs1:a.get("BlackIs1")})}readBlock(){for(;!this.eof;){const e=this.ccittFaxDecoder.readNextChar();if(-1===e){this.eof=!0;return}this.ensureBuffer(this.bufferLength+1);this.buffer[this.bufferLength++]=e}}}const rr=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ir=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),nr=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),sr=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],or=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];class FlateStream extends DecodeStream{constructor(e,t){super(t);this.str=e;this.dict=e.dict;const a=e.getByte(),r=e.getByte();if(-1===a||-1===r)throw new FormatError(`Invalid header in flate stream: ${a}, ${r}`);if(8!=(15&a))throw new FormatError(`Unknown compression method in flate stream: ${a}, ${r}`);if(((a<<8)+r)%31!=0)throw new FormatError(`Bad FCHECK in flate stream: ${a}, ${r}`);if(32&r)throw new FormatError(`FDICT bit set in flate stream: ${a}, ${r}`);this.codeSize=0;this.codeBuf=0}async getImageData(e,t){const a=await this.asyncGetBytes();return a?a.length<=e?a:a.subarray(0,e):this.getBytes(e)}async asyncGetBytes(){this.str.reset();const e=this.str.getBytes();try{const{readable:t,writable:a}=new DecompressionStream("deflate"),r=a.getWriter();await r.ready;r.write(e).then((async()=>{await r.ready;await r.close()})).catch((()=>{}));const i=[];let n=0;for await(const e of t){i.push(e);n+=e.byteLength}const s=new Uint8Array(n);let o=0;for(const e of i){s.set(e,o);o+=e.byteLength}return s}catch{this.str=new Stream(e,2,e.length,this.str.dict);this.reset();return null}}get isAsync(){return!0}getBits(e){const t=this.str;let a,r=this.codeSize,i=this.codeBuf;for(;r<e;){if(-1===(a=t.getByte()))throw new FormatError("Bad encoding in flate stream");i|=a<<r;r+=8}a=i&(1<<e)-1;this.codeBuf=i>>e;this.codeSize=r-=e;return a}getCode(e){const t=this.str,a=e[0],r=e[1];let i,n=this.codeSize,s=this.codeBuf;for(;n<r&&-1!==(i=t.getByte());){s|=i<<n;n+=8}const o=a[s&(1<<r)-1],c=o>>16,l=65535&o;if(c<1||n<c)throw new FormatError("Bad encoding in flate stream");this.codeBuf=s>>c;this.codeSize=n-c;return l}generateHuffmanTable(e){const t=e.length;let a,r=0;for(a=0;a<t;++a)e[a]>r&&(r=e[a]);const i=1<<r,n=new Int32Array(i);for(let s=1,o=0,c=2;s<=r;++s,o<<=1,c<<=1)for(let r=0;r<t;++r)if(e[r]===s){let e=0,t=o;for(a=0;a<s;++a){e=e<<1|1&t;t>>=1}for(a=e;a<i;a+=c)n[a]=s<<16|r;++o}return[n,r]}#X(e){info(e);this.eof=!0}readBlock(){let e,t,a;const r=this.str;try{t=this.getBits(3)}catch(e){this.#X(e.message);return}1&t&&(this.eof=!0);t>>=1;if(0===t){let t;if(-1===(t=r.getByte())){this.#X("Bad block header in flate stream");return}let a=t;if(-1===(t=r.getByte())){this.#X("Bad block header in flate stream");return}a|=t<<8;if(-1===(t=r.getByte())){this.#X("Bad block header in flate stream");return}let i=t;if(-1===(t=r.getByte())){this.#X("Bad block header in flate stream");return}i|=t<<8;if(i!==(65535&~a)&&(0!==a||0!==i))throw new FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0;this.codeSize=0;const n=this.bufferLength,s=n+a;e=this.ensureBuffer(s);this.bufferLength=s;if(0===a)-1===r.peekByte()&&(this.eof=!0);else{const t=r.getBytes(a);e.set(t,n);t.length<a&&(this.eof=!0)}return}let i,n;if(1===t){i=sr;n=or}else{if(2!==t)throw new FormatError("Unknown block type in flate stream");{const e=this.getBits(5)+257,t=this.getBits(5)+1,r=this.getBits(4)+4,s=new Uint8Array(rr.length);let o;for(o=0;o<r;++o)s[rr[o]]=this.getBits(3);const c=this.generateHuffmanTable(s);a=0;o=0;const l=e+t,h=new Uint8Array(l);let u,d,f;for(;o<l;){const e=this.getCode(c);if(16===e){u=2;d=3;f=a}else if(17===e){u=3;d=3;f=a=0}else{if(18!==e){h[o++]=a=e;continue}u=7;d=11;f=a=0}let t=this.getBits(u)+d;for(;t-- >0;)h[o++]=f}i=this.generateHuffmanTable(h.subarray(0,e));n=this.generateHuffmanTable(h.subarray(e,l))}}e=this.buffer;let s=e?e.length:0,o=this.bufferLength;for(;;){let t=this.getCode(i);if(t<256){if(o+1>=s){e=this.ensureBuffer(o+1);s=e.length}e[o++]=t;continue}if(256===t){this.bufferLength=o;return}t-=257;t=ir[t];let r=t>>16;r>0&&(r=this.getBits(r));a=(65535&t)+r;t=this.getCode(n);t=nr[t];r=t>>16;r>0&&(r=this.getBits(r));const c=(65535&t)+r;if(o+a>=s){e=this.ensureBuffer(o+a);s=e.length}for(let t=0;t<a;++t,++o)e[o]=e[o-c]}}}const cr=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];class ArithmeticDecoder{constructor(e,t,a){this.data=e;this.bp=t;this.dataEnd=a;this.chigh=e[t];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=32768}byteIn(){const e=this.data;let t=this.bp;if(255===e[t])if(e[t+1]>143){this.clow+=65280;this.ct=8}else{t++;this.clow+=e[t]<<9;this.ct=7;this.bp=t}else{t++;this.clow+=t<this.dataEnd?e[t]<<8:65280;this.ct=8;this.bp=t}if(this.clow>65535){this.chigh+=this.clow>>16;this.clow&=65535}}readBit(e,t){let a=e[t]>>1,r=1&e[t];const i=cr[a],n=i.qe;let s,o=this.a-n;if(this.chigh<n)if(o<n){o=n;s=r;a=i.nmps}else{o=n;s=1^r;1===i.switchFlag&&(r=s);a=i.nlps}else{this.chigh-=n;if(32768&o){this.a=o;return r}if(o<n){s=1^r;1===i.switchFlag&&(r=s);a=i.nlps}else{s=r;a=i.nmps}}do{0===this.ct&&this.byteIn();o<<=1;this.chigh=this.chigh<<1&65535|this.clow>>15&1;this.clow=this.clow<<1&65535;this.ct--}while(!(32768&o));this.a=o;e[t]=a<<1|r;return s}}class Jbig2Error extends fa{constructor(e){super(e,"Jbig2Error")}}class ContextCache{getContexts(e){return e in this?this[e]:this[e]=new Int8Array(65536)}}class DecodingContext{constructor(e,t,a){this.data=e;this.start=t;this.end=a}get decoder(){return shadow(this,"decoder",new ArithmeticDecoder(this.data,this.start,this.end))}get contextCache(){return shadow(this,"contextCache",new ContextCache)}}function decodeInteger(e,t,a){const r=e.getContexts(t);let i=1;function readBits(e){let t=0;for(let n=0;n<e;n++){const e=a.readBit(r,i);i=i<256?i<<1|e:511&(i<<1|e)|256;t=t<<1|e}return t>>>0}const n=readBits(1),s=readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(32)+4436:readBits(12)+340:readBits(8)+84:readBits(6)+20:readBits(4)+4:readBits(2);let o;0===n?o=s:s>0&&(o=-s);return o>=-2147483648&&o<=va?o:null}function decodeIAID(e,t,a){const r=e.getContexts("IAID");let i=1;for(let e=0;e<a;e++){i=i<<1|t.readBit(r,i)}return a<31?i&(1<<a)-1:2147483647&i}const lr=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],hr=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],ur=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],dr=[39717,1941,229,405],fr=[32,8];function decodeBitmap(e,t,a,r,i,n,s,o){if(e){return decodeMMRBitmap(new Reader(o.data,o.start,o.end),t,a,!1)}if(0===r&&!n&&!i&&4===s.length&&3===s[0].x&&-1===s[0].y&&-3===s[1].x&&-1===s[1].y&&2===s[2].x&&-2===s[2].y&&-2===s[3].x&&-2===s[3].y)return function decodeBitmapTemplate0(e,t,a){const r=a.decoder,i=a.contextCache.getContexts("GB"),n=[];let s,o,c,l,h,u,d;for(o=0;o<t;o++){h=n[o]=new Uint8Array(e);u=o<1?h:n[o-1];d=o<2?h:n[o-2];s=d[0]<<13|d[1]<<12|d[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4;for(c=0;c<e;c++){h[c]=l=r.readBit(i,s);s=(31735&s)<<1|(c+3<e?d[c+3]<<11:0)|(c+4<e?u[c+4]<<4:0)|l}}return n}(t,a,o);const c=!!n,l=hr[r].concat(s);l.sort(((e,t)=>e.y-t.y||e.x-t.x));const h=l.length,u=new Int8Array(h),d=new Int8Array(h),f=[];let g,p,m=0,b=0,y=0,w=0;for(p=0;p<h;p++){u[p]=l[p].x;d[p]=l[p].y;b=Math.min(b,l[p].x);y=Math.max(y,l[p].x);w=Math.min(w,l[p].y);p<h-1&&l[p].y===l[p+1].y&&l[p].x===l[p+1].x-1?m|=1<<h-1-p:f.push(p)}const x=f.length,S=new Int8Array(x),k=new Int8Array(x),C=new Uint16Array(x);for(g=0;g<x;g++){p=f[g];S[g]=l[p].x;k[g]=l[p].y;C[g]=1<<h-1-p}const v=-b,F=-w,T=t-y,O=dr[r];let M=new Uint8Array(t);const D=[],R=o.decoder,N=o.contextCache.getContexts("GB");let E,L,j,_,U,X=0,q=0;for(let e=0;e<a;e++){if(i){X^=R.readBit(N,O);if(X){D.push(M);continue}}M=new Uint8Array(M);D.push(M);for(E=0;E<t;E++){if(c&&n[e][E]){M[E]=0;continue}if(E>=v&&E<T&&e>=F){q=q<<1&m;for(p=0;p<x;p++){L=e+k[p];j=E+S[p];_=D[L][j];if(_){_=C[p];q|=_}}}else{q=0;U=h-1;for(p=0;p<h;p++,U--){j=E+u[p];if(j>=0&&j<t){L=e+d[p];if(L>=0){_=D[L][j];_&&(q|=_<<U)}}}}const a=R.readBit(N,q);M[E]=a}}return D}function decodeRefinement(e,t,a,r,i,n,s,o,c){let l=ur[a].coding;0===a&&(l=l.concat([o[0]]));const h=l.length,u=new Int32Array(h),d=new Int32Array(h);let f;for(f=0;f<h;f++){u[f]=l[f].x;d[f]=l[f].y}let g=ur[a].reference;0===a&&(g=g.concat([o[1]]));const p=g.length,m=new Int32Array(p),b=new Int32Array(p);for(f=0;f<p;f++){m[f]=g[f].x;b[f]=g[f].y}const y=r[0].length,w=r.length,x=fr[a],S=[],k=c.decoder,C=c.contextCache.getContexts("GR");let v=0;for(let a=0;a<t;a++){if(s){v^=k.readBit(C,x);if(v)throw new Jbig2Error("prediction is not supported")}const t=new Uint8Array(e);S.push(t);for(let s=0;s<e;s++){let o,c,l=0;for(f=0;f<h;f++){o=a+d[f];c=s+u[f];o<0||c<0||c>=e?l<<=1:l=l<<1|S[o][c]}for(f=0;f<p;f++){o=a+b[f]-n;c=s+m[f]-i;o<0||o>=w||c<0||c>=y?l<<=1:l=l<<1|r[o][c]}const g=k.readBit(C,l);t[s]=g}}return S}function decodeTextRegion(e,t,a,r,i,n,s,o,c,l,h,u,d,f,g,p,m,b,y){if(e&&t)throw new Jbig2Error("refinement with Huffman is not supported");const w=[];let x,S;for(x=0;x<r;x++){S=new Uint8Array(a);i&&S.fill(i);w.push(S)}const k=m.decoder,C=m.contextCache;let v=e?-f.tableDeltaT.decode(y):-decodeInteger(C,"IADT",k),F=0;x=0;for(;x<n;){v+=e?f.tableDeltaT.decode(y):decodeInteger(C,"IADT",k);F+=e?f.tableFirstS.decode(y):decodeInteger(C,"IAFS",k);let r=F;for(;;){let i=0;s>1&&(i=e?y.readBits(b):decodeInteger(C,"IAIT",k));const n=s*v+i,F=e?f.symbolIDTable.decode(y):decodeIAID(C,k,c),T=t&&(e?y.readBit():decodeInteger(C,"IARI",k));let O=o[F],M=O[0].length,D=O.length;if(T){const e=decodeInteger(C,"IARDW",k),t=decodeInteger(C,"IARDH",k);M+=e;D+=t;O=decodeRefinement(M,D,g,O,(e>>1)+decodeInteger(C,"IARDX",k),(t>>1)+decodeInteger(C,"IARDY",k),!1,p,m)}let R=0;l?1&u?R=D-1:r+=D-1:u>1?r+=M-1:R=M-1;const N=n-(1&u?0:D-1),E=r-(2&u?M-1:0);let L,j,_;if(l)for(L=0;L<D;L++){S=w[E+L];if(!S)continue;_=O[L];const e=Math.min(a-N,M);switch(d){case 0:for(j=0;j<e;j++)S[N+j]|=_[j];break;case 2:for(j=0;j<e;j++)S[N+j]^=_[j];break;default:throw new Jbig2Error(`operator ${d} is not supported`)}}else for(j=0;j<D;j++){S=w[N+j];if(S){_=O[j];switch(d){case 0:for(L=0;L<M;L++)S[E+L]|=_[L];break;case 2:for(L=0;L<M;L++)S[E+L]^=_[L];break;default:throw new Jbig2Error(`operator ${d} is not supported`)}}}x++;const U=e?f.tableDeltaS.decode(y):decodeInteger(C,"IADS",k);if(null===U)break;r+=R+U+h}}return w}function readSegmentHeader(e,t){const a={};a.number=readUint32(e,t);const r=e[t+4],i=63&r;if(!lr[i])throw new Jbig2Error("invalid segment type: "+i);a.type=i;a.typeName=lr[i];a.deferredNonRetain=!!(128&r);const n=!!(64&r),s=e[t+5];let o=s>>5&7;const c=[31&s];let l=t+6;if(7===s){o=536870911&readUint32(e,l-1);l+=3;let t=o+7>>3;c[0]=e[l++];for(;--t>0;)c.push(e[l++])}else if(5===s||6===s)throw new Jbig2Error("invalid referred-to flags");a.retainBits=c;let h=4;a.number<=256?h=1:a.number<=65536&&(h=2);const u=[];let d,f;for(d=0;d<o;d++){let t;t=1===h?e[l]:2===h?readUint16(e,l):readUint32(e,l);u.push(t);l+=h}a.referredTo=u;if(n){a.pageAssociation=readUint32(e,l);l+=4}else a.pageAssociation=e[l++];a.length=readUint32(e,l);l+=4;if(4294967295===a.length){if(38!==i)throw new Jbig2Error("invalid unknown segment length");{const t=readRegionSegmentInformation(e,l),r=!!(1&e[l+gr]),i=6,n=new Uint8Array(i);if(!r){n[0]=255;n[1]=172}n[2]=t.height>>>24&255;n[3]=t.height>>16&255;n[4]=t.height>>8&255;n[5]=255&t.height;for(d=l,f=e.length;d<f;d++){let t=0;for(;t<i&&n[t]===e[d+t];)t++;if(t===i){a.length=d+i;break}}if(4294967295===a.length)throw new Jbig2Error("segment end was not found")}}a.headerEnd=l;return a}function readSegments(e,t,a,r){const i=[];let n=a;for(;n<r;){const a=readSegmentHeader(t,n);n=a.headerEnd;const r={header:a,data:t};if(!e.randomAccess){r.start=n;n+=a.length;r.end=n}i.push(r);if(51===a.type)break}if(e.randomAccess)for(let e=0,t=i.length;e<t;e++){i[e].start=n;n+=i[e].header.length;i[e].end=n}return i}function readRegionSegmentInformation(e,t){return{width:readUint32(e,t),height:readUint32(e,t+4),x:readUint32(e,t+8),y:readUint32(e,t+12),combinationOperator:7&e[t+16]}}const gr=17;function processSegment(e,t){const a=e.header,r=e.data,i=e.end;let n,s,o,c,l=e.start;switch(a.type){case 0:const e={},t=readUint16(r,l);e.huffman=!!(1&t);e.refinement=!!(2&t);e.huffmanDHSelector=t>>2&3;e.huffmanDWSelector=t>>4&3;e.bitmapSizeSelector=t>>6&1;e.aggregationInstancesSelector=t>>7&1;e.bitmapCodingContextUsed=!!(256&t);e.bitmapCodingContextRetained=!!(512&t);e.template=t>>10&3;e.refinementTemplate=t>>12&1;l+=2;if(!e.huffman){c=0===e.template?4:1;s=[];for(o=0;o<c;o++){s.push({x:readInt8(r,l),y:readInt8(r,l+1)});l+=2}e.at=s}if(e.refinement&&!e.refinementTemplate){s=[];for(o=0;o<2;o++){s.push({x:readInt8(r,l),y:readInt8(r,l+1)});l+=2}e.refinementAt=s}e.numberOfExportedSymbols=readUint32(r,l);l+=4;e.numberOfNewSymbols=readUint32(r,l);l+=4;n=[e,a.number,a.referredTo,r,l,i];break;case 6:case 7:const h={};h.info=readRegionSegmentInformation(r,l);l+=gr;const u=readUint16(r,l);l+=2;h.huffman=!!(1&u);h.refinement=!!(2&u);h.logStripSize=u>>2&3;h.stripSize=1<<h.logStripSize;h.referenceCorner=u>>4&3;h.transposed=!!(64&u);h.combinationOperator=u>>7&3;h.defaultPixelValue=u>>9&1;h.dsOffset=u<<17>>27;h.refinementTemplate=u>>15&1;if(h.huffman){const e=readUint16(r,l);l+=2;h.huffmanFS=3&e;h.huffmanDS=e>>2&3;h.huffmanDT=e>>4&3;h.huffmanRefinementDW=e>>6&3;h.huffmanRefinementDH=e>>8&3;h.huffmanRefinementDX=e>>10&3;h.huffmanRefinementDY=e>>12&3;h.huffmanRefinementSizeSelector=!!(16384&e)}if(h.refinement&&!h.refinementTemplate){s=[];for(o=0;o<2;o++){s.push({x:readInt8(r,l),y:readInt8(r,l+1)});l+=2}h.refinementAt=s}h.numberOfSymbolInstances=readUint32(r,l);l+=4;n=[h,a.referredTo,r,l,i];break;case 16:const d={},f=r[l++];d.mmr=!!(1&f);d.template=f>>1&3;d.patternWidth=r[l++];d.patternHeight=r[l++];d.maxPatternIndex=readUint32(r,l);l+=4;n=[d,a.number,r,l,i];break;case 22:case 23:const g={};g.info=readRegionSegmentInformation(r,l);l+=gr;const p=r[l++];g.mmr=!!(1&p);g.template=p>>1&3;g.enableSkip=!!(8&p);g.combinationOperator=p>>4&7;g.defaultPixelValue=p>>7&1;g.gridWidth=readUint32(r,l);l+=4;g.gridHeight=readUint32(r,l);l+=4;g.gridOffsetX=4294967295&readUint32(r,l);l+=4;g.gridOffsetY=4294967295&readUint32(r,l);l+=4;g.gridVectorX=readUint16(r,l);l+=2;g.gridVectorY=readUint16(r,l);l+=2;n=[g,a.referredTo,r,l,i];break;case 38:case 39:const m={};m.info=readRegionSegmentInformation(r,l);l+=gr;const b=r[l++];m.mmr=!!(1&b);m.template=b>>1&3;m.prediction=!!(8&b);if(!m.mmr){c=0===m.template?4:1;s=[];for(o=0;o<c;o++){s.push({x:readInt8(r,l),y:readInt8(r,l+1)});l+=2}m.at=s}n=[m,r,l,i];break;case 48:const y={width:readUint32(r,l),height:readUint32(r,l+4),resolutionX:readUint32(r,l+8),resolutionY:readUint32(r,l+12)};4294967295===y.height&&delete y.height;const w=r[l+16];readUint16(r,l+17);y.lossless=!!(1&w);y.refinement=!!(2&w);y.defaultPixelValue=w>>2&1;y.combinationOperator=w>>3&3;y.requiresBuffer=!!(32&w);y.combinationOperatorOverride=!!(64&w);n=[y];break;case 49:case 50:case 51:case 62:break;case 53:n=[a.number,r,l,i];break;default:throw new Jbig2Error(`segment type ${a.typeName}(${a.type}) is not implemented`)}const h="on"+a.typeName;h in t&&t[h].apply(t,n)}function processSegments(e,t){for(let a=0,r=e.length;a<r;a++)processSegment(e[a],t)}class SimpleSegmentVisitor{onPageInformation(e){this.currentPageInfo=e;const t=e.width+7>>3,a=new Uint8ClampedArray(t*e.height);e.defaultPixelValue&&a.fill(255);this.buffer=a}drawBitmap(e,t){const a=this.currentPageInfo,r=e.width,i=e.height,n=a.width+7>>3,s=a.combinationOperatorOverride?e.combinationOperator:a.combinationOperator,o=this.buffer,c=128>>(7&e.x);let l,h,u,d,f=e.y*n+(e.x>>3);switch(s){case 0:for(l=0;l<i;l++){u=c;d=f;for(h=0;h<r;h++){t[l][h]&&(o[d]|=u);u>>=1;if(!u){u=128;d++}}f+=n}break;case 2:for(l=0;l<i;l++){u=c;d=f;for(h=0;h<r;h++){t[l][h]&&(o[d]^=u);u>>=1;if(!u){u=128;d++}}f+=n}break;default:throw new Jbig2Error(`operator ${s} is not supported`)}}onImmediateGenericRegion(e,t,a,r){const i=e.info,n=new DecodingContext(t,a,r),s=decodeBitmap(e.mmr,i.width,i.height,e.template,e.prediction,null,e.at,n);this.drawBitmap(i,s)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion(...arguments)}onSymbolDictionary(e,t,a,r,i,n){let s,o;if(e.huffman){s=function getSymbolDictionaryHuffmanTables(e,t,a){let r,i,n,s,o=0;switch(e.huffmanDHSelector){case 0:case 1:r=getStandardTable(e.huffmanDHSelector+4);break;case 3:r=getCustomHuffmanTable(o,t,a);o++;break;default:throw new Jbig2Error("invalid Huffman DH selector")}switch(e.huffmanDWSelector){case 0:case 1:i=getStandardTable(e.huffmanDWSelector+2);break;case 3:i=getCustomHuffmanTable(o,t,a);o++;break;default:throw new Jbig2Error("invalid Huffman DW selector")}if(e.bitmapSizeSelector){n=getCustomHuffmanTable(o,t,a);o++}else n=getStandardTable(1);s=e.aggregationInstancesSelector?getCustomHuffmanTable(o,t,a):getStandardTable(1);return{tableDeltaHeight:r,tableDeltaWidth:i,tableBitmapSize:n,tableAggregateInstances:s}}(e,a,this.customTables);o=new Reader(r,i,n)}let c=this.symbols;c||(this.symbols=c={});const l=[];for(const e of a){const t=c[e];t&&l.push(...t)}const h=new DecodingContext(r,i,n);c[t]=function decodeSymbolDictionary(e,t,a,r,i,n,s,o,c,l,h,u){if(e&&t)throw new Jbig2Error("symbol refinement with Huffman is not supported");const d=[];let f=0,g=log2(a.length+r);const p=h.decoder,m=h.contextCache;let b,y;if(e){b=getStandardTable(1);y=[];g=Math.max(g,1)}for(;d.length<r;){f+=e?n.tableDeltaHeight.decode(u):decodeInteger(m,"IADH",p);let r=0,i=0;const b=e?y.length:0;for(;;){const b=e?n.tableDeltaWidth.decode(u):decodeInteger(m,"IADW",p);if(null===b)break;r+=b;i+=r;let w;if(t){const i=decodeInteger(m,"IAAI",p);if(i>1)w=decodeTextRegion(e,t,r,f,0,i,1,a.concat(d),g,0,0,1,0,n,c,l,h,0,u);else{const e=decodeIAID(m,p,g),t=decodeInteger(m,"IARDX",p),i=decodeInteger(m,"IARDY",p);w=decodeRefinement(r,f,c,e<a.length?a[e]:d[e-a.length],t,i,!1,l,h)}d.push(w)}else if(e)y.push(r);else{w=decodeBitmap(!1,r,f,s,!1,null,o,h);d.push(w)}}if(e&&!t){const e=n.tableBitmapSize.decode(u);u.byteAlign();let t;if(0===e)t=readUncompressedBitmap(u,i,f);else{const a=u.end,r=u.position+e;u.end=r;t=decodeMMRBitmap(u,i,f,!1);u.end=a;u.position=r}const a=y.length;if(b===a-1)d.push(t);else{let e,r,i,n,s,o=0;for(e=b;e<a;e++){n=y[e];i=o+n;s=[];for(r=0;r<f;r++)s.push(t[r].subarray(o,i));d.push(s);o=i}}}}const w=[],x=[];let S,k,C=!1;const v=a.length+r;for(;x.length<v;){let t=e?b.decode(u):decodeInteger(m,"IAEX",p);for(;t--;)x.push(C);C=!C}for(S=0,k=a.length;S<k;S++)x[S]&&w.push(a[S]);for(let e=0;e<r;S++,e++)x[S]&&w.push(d[e]);return w}(e.huffman,e.refinement,l,e.numberOfNewSymbols,e.numberOfExportedSymbols,s,e.template,e.at,e.refinementTemplate,e.refinementAt,h,o)}onImmediateTextRegion(e,t,a,r,i){const n=e.info;let s,o;const c=this.symbols,l=[];for(const e of t){const t=c[e];t&&l.push(...t)}const h=log2(l.length);if(e.huffman){o=new Reader(a,r,i);s=function getTextRegionHuffmanTables(e,t,a,r,i){const n=[];for(let e=0;e<=34;e++){const t=i.readBits(4);n.push(new HuffmanLine([e,t,0,0]))}const s=new HuffmanTable(n,!1);n.length=0;for(let e=0;e<r;){const t=s.decode(i);if(t>=32){let a,r,s;switch(t){case 32:if(0===e)throw new Jbig2Error("no previous value in symbol ID table");r=i.readBits(2)+3;a=n[e-1].prefixLength;break;case 33:r=i.readBits(3)+3;a=0;break;case 34:r=i.readBits(7)+11;a=0;break;default:throw new Jbig2Error("invalid code length in symbol ID table")}for(s=0;s<r;s++){n.push(new HuffmanLine([e,a,0,0]));e++}}else{n.push(new HuffmanLine([e,t,0,0]));e++}}i.byteAlign();const o=new HuffmanTable(n,!1);let c,l,h,u=0;switch(e.huffmanFS){case 0:case 1:c=getStandardTable(e.huffmanFS+6);break;case 3:c=getCustomHuffmanTable(u,t,a);u++;break;default:throw new Jbig2Error("invalid Huffman FS selector")}switch(e.huffmanDS){case 0:case 1:case 2:l=getStandardTable(e.huffmanDS+8);break;case 3:l=getCustomHuffmanTable(u,t,a);u++;break;default:throw new Jbig2Error("invalid Huffman DS selector")}switch(e.huffmanDT){case 0:case 1:case 2:h=getStandardTable(e.huffmanDT+11);break;case 3:h=getCustomHuffmanTable(u,t,a);u++;break;default:throw new Jbig2Error("invalid Huffman DT selector")}if(e.refinement)throw new Jbig2Error("refinement with Huffman is not supported");return{symbolIDTable:o,tableFirstS:c,tableDeltaS:l,tableDeltaT:h}}(e,t,this.customTables,l.length,o)}const u=new DecodingContext(a,r,i),d=decodeTextRegion(e.huffman,e.refinement,n.width,n.height,e.defaultPixelValue,e.numberOfSymbolInstances,e.stripSize,l,h,e.transposed,e.dsOffset,e.referenceCorner,e.combinationOperator,s,e.refinementTemplate,e.refinementAt,u,e.logStripSize,o);this.drawBitmap(n,d)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion(...arguments)}onPatternDictionary(e,t,a,r,i){let n=this.patterns;n||(this.patterns=n={});const s=new DecodingContext(a,r,i);n[t]=function decodePatternDictionary(e,t,a,r,i,n){const s=[];if(!e){s.push({x:-t,y:0});0===i&&s.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2})}const o=decodeBitmap(e,(r+1)*t,a,i,!1,null,s,n),c=[];for(let e=0;e<=r;e++){const r=[],i=t*e,n=i+t;for(let e=0;e<a;e++)r.push(o[e].subarray(i,n));c.push(r)}return c}(e.mmr,e.patternWidth,e.patternHeight,e.maxPatternIndex,e.template,s)}onImmediateHalftoneRegion(e,t,a,r,i){const n=this.patterns[t[0]],s=e.info,o=new DecodingContext(a,r,i),c=function decodeHalftoneRegion(e,t,a,r,i,n,s,o,c,l,h,u,d,f,g){if(s)throw new Jbig2Error("skip is not supported");if(0!==o)throw new Jbig2Error(`operator "${o}" is not supported in halftone region`);const p=[];let m,b,y;for(m=0;m<i;m++){y=new Uint8Array(r);n&&y.fill(n);p.push(y)}const w=t.length,x=t[0],S=x[0].length,k=x.length,C=log2(w),v=[];if(!e){v.push({x:a<=1?3:2,y:-1});0===a&&v.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2})}const F=[];let T,O,M,D,R,N,E,L,j,_,U;e&&(T=new Reader(g.data,g.start,g.end));for(m=C-1;m>=0;m--){O=e?decodeMMRBitmap(T,c,l,!0):decodeBitmap(!1,c,l,a,!1,null,v,g);F[m]=O}for(M=0;M<l;M++)for(D=0;D<c;D++){R=0;N=0;for(b=C-1;b>=0;b--){R^=F[b][M][D];N|=R<<b}E=t[N];L=h+M*f+D*d>>8;j=u+M*d-D*f>>8;if(L>=0&&L+S<=r&&j>=0&&j+k<=i)for(m=0;m<k;m++){U=p[j+m];_=E[m];for(b=0;b<S;b++)U[L+b]|=_[b]}else{let e,t;for(m=0;m<k;m++){t=j+m;if(!(t<0||t>=i)){U=p[t];_=E[m];for(b=0;b<S;b++){e=L+b;e>=0&&e<r&&(U[e]|=_[b])}}}}}return p}(e.mmr,n,e.template,s.width,s.height,e.defaultPixelValue,e.enableSkip,e.combinationOperator,e.gridWidth,e.gridHeight,e.gridOffsetX,e.gridOffsetY,e.gridVectorX,e.gridVectorY,o);this.drawBitmap(s,c)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion(...arguments)}onTables(e,t,a,r){let i=this.customTables;i||(this.customTables=i={});i[e]=function decodeTablesSegment(e,t,a){const r=e[t],i=4294967295&readUint32(e,t+1),n=4294967295&readUint32(e,t+5),s=new Reader(e,t+9,a),o=1+(r>>1&7),c=1+(r>>4&7),l=[];let h,u,d=i;do{h=s.readBits(o);u=s.readBits(c);l.push(new HuffmanLine([d,h,u,0]));d+=1<<u}while(d<n);h=s.readBits(o);l.push(new HuffmanLine([i-1,h,32,0,"lower"]));h=s.readBits(o);l.push(new HuffmanLine([n,h,32,0]));if(1&r){h=s.readBits(o);l.push(new HuffmanLine([h,0]))}return new HuffmanTable(l,!1)}(t,a,r)}}class HuffmanLine{constructor(e){if(2===e.length){this.isOOB=!0;this.rangeLow=0;this.prefixLength=e[0];this.rangeLength=0;this.prefixCode=e[1];this.isLowerRange=!1}else{this.isOOB=!1;this.rangeLow=e[0];this.prefixLength=e[1];this.rangeLength=e[2];this.prefixCode=e[3];this.isLowerRange="lower"===e[4]}}}class HuffmanTreeNode{constructor(e){this.children=[];if(e){this.isLeaf=!0;this.rangeLength=e.rangeLength;this.rangeLow=e.rangeLow;this.isLowerRange=e.isLowerRange;this.isOOB=e.isOOB}else this.isLeaf=!1}buildTree(e,t){const a=e.prefixCode>>t&1;if(t<=0)this.children[a]=new HuffmanTreeNode(e);else{let r=this.children[a];r||(this.children[a]=r=new HuffmanTreeNode(null));r.buildTree(e,t-1)}}decodeNode(e){if(this.isLeaf){if(this.isOOB)return null;const t=e.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-t:t)}const t=this.children[e.readBit()];if(!t)throw new Jbig2Error("invalid Huffman data");return t.decodeNode(e)}}class HuffmanTable{constructor(e,t){t||this.assignPrefixCodes(e);this.rootNode=new HuffmanTreeNode(null);for(let t=0,a=e.length;t<a;t++){const a=e[t];a.prefixLength>0&&this.rootNode.buildTree(a,a.prefixLength-1)}}decode(e){return this.rootNode.decodeNode(e)}assignPrefixCodes(e){const t=e.length;let a=0;for(let r=0;r<t;r++)a=Math.max(a,e[r].prefixLength);const r=new Uint32Array(a+1);for(let a=0;a<t;a++)r[e[a].prefixLength]++;let i,n,s,o=1,c=0;r[0]=0;for(;o<=a;){c=c+r[o-1]<<1;i=c;n=0;for(;n<t;){s=e[n];if(s.prefixLength===o){s.prefixCode=i;i++}n++}o++}}}const pr={};function getStandardTable(e){let t,a=pr[e];if(a)return a;switch(e){case 1:t=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:t=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:t=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:t=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:t=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:t=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:t=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:t=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:t=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:t=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:t=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:t=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:t=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:t=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:t=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new Jbig2Error(`standard table B.${e} does not exist`)}for(let e=0,a=t.length;e<a;e++)t[e]=new HuffmanLine(t[e]);a=new HuffmanTable(t,!0);pr[e]=a;return a}class Reader{constructor(e,t,a){this.data=e;this.start=t;this.end=a;this.position=t;this.shift=-1;this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new Jbig2Error("end of data while reading bit");this.currentByte=this.data[this.position++];this.shift=7}const e=this.currentByte>>this.shift&1;this.shift--;return e}readBits(e){let t,a=0;for(t=e-1;t>=0;t--)a|=this.readBit()<<t;return a}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function getCustomHuffmanTable(e,t,a){let r=0;for(let i=0,n=t.length;i<n;i++){const n=a[t[i]];if(n){if(e===r)return n;r++}}throw new Jbig2Error("can\'t find custom Huffman table")}function readUncompressedBitmap(e,t,a){const r=[];for(let i=0;i<a;i++){const a=new Uint8Array(t);r.push(a);for(let r=0;r<t;r++)a[r]=e.readBit();e.byteAlign()}return r}function decodeMMRBitmap(e,t,a,r){const i=new CCITTFaxDecoder(e,{K:-1,Columns:t,Rows:a,BlackIs1:!0,EndOfBlock:r}),n=[];let s,o=!1;for(let e=0;e<a;e++){const e=new Uint8Array(t);n.push(e);let a=-1;for(let r=0;r<t;r++){if(a<0){s=i.readNextChar();if(-1===s){s=0;o=!0}a=7}e[r]=s>>a&1;a--}}if(r&&!o){const e=5;for(let t=0;t<e&&-1!==i.readNextChar();t++);}return n}class Jbig2Image{parseChunks(e){return function parseJbig2Chunks(e){const t=new SimpleSegmentVisitor;for(let a=0,r=e.length;a<r;a++){const r=e[a];processSegments(readSegments({},r.data,r.start,r.end),t)}return t.buffer}(e)}parse(e){throw new Error("Not implemented: Jbig2Image.parse")}}class Jbig2Stream extends DecodeStream{constructor(e,t,a){super(t);this.stream=e;this.dict=e.dict;this.maybeLength=t;this.params=a}get bytes(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(e){}readBlock(){this.decodeImage()}decodeImage(e){if(this.eof)return this.buffer;e||=this.bytes;const t=new Jbig2Image,a=[];if(this.params instanceof Dict){const e=this.params.get("JBIG2Globals");if(e instanceof BaseStream){const t=e.getBytes();a.push({data:t,start:0,end:t.length})}}a.push({data:e,start:0,end:e.length});const r=t.parseChunks(a),i=r.length;for(let e=0;e<i;e++)r[e]^=255;this.buffer=r;this.bufferLength=i;this.eof=!0;return this.buffer}get canAsyncDecodeImageFromBuffer(){return this.stream.isAsync}}class JpxStream extends DecodeStream{constructor(e,t,a){super(t);this.stream=e;this.dict=e.dict;this.maybeLength=t;this.params=a}get bytes(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(e){}readBlock(e){unreachable("JpxStream.readBlock")}get isAsyncDecoder(){return!0}async decodeImage(e,t){if(this.eof)return this.buffer;e||=this.bytes;this.buffer=await JpxImage.decode(e,t);this.bufferLength=this.buffer.length;this.eof=!0;return this.buffer}get canAsyncDecodeImageFromBuffer(){return this.stream.isAsync}}class LZWStream extends DecodeStream{constructor(e,t,a){super(t);this.str=e;this.dict=e.dict;this.cachedData=0;this.bitsCached=0;const r=4096,i={earlyChange:a,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(r),dictionaryLengths:new Uint16Array(r),dictionaryPrevCodes:new Uint16Array(r),currentSequence:new Uint8Array(r),currentSequenceLength:0};for(let e=0;e<256;++e){i.dictionaryValues[e]=e;i.dictionaryLengths[e]=1}this.lzwState=i}readBits(e){let t=this.bitsCached,a=this.cachedData;for(;t<e;){const e=this.str.getByte();if(-1===e){this.eof=!0;return null}a=a<<8|e;t+=8}this.bitsCached=t-=e;this.cachedData=a;this.lastCode=null;return a>>>t&(1<<e)-1}readBlock(){let e,t,a,r=1024;const i=this.lzwState;if(!i)return;const n=i.earlyChange;let s=i.nextCode;const o=i.dictionaryValues,c=i.dictionaryLengths,l=i.dictionaryPrevCodes;let h=i.codeLength,u=i.prevCode;const d=i.currentSequence;let f=i.currentSequenceLength,g=0,p=this.bufferLength,m=this.ensureBuffer(this.bufferLength+r);for(e=0;e<512;e++){const e=this.readBits(h),i=f>0;if(e<256){d[0]=e;f=1}else{if(!(e>=258)){if(256===e){h=9;s=258;f=0;continue}this.eof=!0;delete this.lzwState;break}if(e<s){f=c[e];for(t=f-1,a=e;t>=0;t--){d[t]=o[a];a=l[a]}}else d[f++]=d[0]}if(i){l[s]=u;c[s]=c[u]+1;o[s]=d[0];s++;h=s+n&s+n-1?h:0|Math.min(Math.log(s+n)/.6931471805599453+1,12)}u=e;g+=f;if(r<g){do{r+=512}while(r<g);m=this.ensureBuffer(this.bufferLength+r)}for(t=0;t<f;t++)m[p++]=d[t]}i.nextCode=s;i.codeLength=h;i.prevCode=u;i.currentSequenceLength=f;this.bufferLength=p}}class PredictorStream extends DecodeStream{constructor(e,t,a){super(t);if(!(a instanceof Dict))return e;const r=this.predictor=a.get("Predictor")||1;if(r<=1)return e;if(2!==r&&(r<10||r>15))throw new FormatError(`Unsupported predictor: ${r}`);this.readBlock=2===r?this.readBlockTiff:this.readBlockPng;this.str=e;this.dict=e.dict;const i=this.colors=a.get("Colors")||1,n=this.bits=a.get("BPC","BitsPerComponent")||8,s=this.columns=a.get("Columns")||1;this.pixBytes=i*n+7>>3;this.rowBytes=s*i*n+7>>3;return this}readBlockTiff(){const e=this.rowBytes,t=this.bufferLength,a=this.ensureBuffer(t+e),r=this.bits,i=this.colors,n=this.str.getBytes(e);this.eof=!n.length;if(this.eof)return;let s,o=0,c=0,l=0,h=0,u=t;if(1===r&&1===i)for(s=0;s<e;++s){let e=n[s]^o;e^=e>>1;e^=e>>2;e^=e>>4;o=(1&e)<<7;a[u++]=e}else if(8===r){for(s=0;s<i;++s)a[u++]=n[s];for(;s<e;++s){a[u]=a[u-i]+n[s];u++}}else if(16===r){const t=2*i;for(s=0;s<t;++s)a[u++]=n[s];for(;s<e;s+=2){const e=((255&n[s])<<8)+(255&n[s+1])+((255&a[u-t])<<8)+(255&a[u-t+1]);a[u++]=e>>8&255;a[u++]=255&e}}else{const e=new Uint8Array(i+1),u=(1<<r)-1;let d=0,f=t;const g=this.columns;for(s=0;s<g;++s)for(let t=0;t<i;++t){if(l<r){o=o<<8|255&n[d++];l+=8}e[t]=e[t]+(o>>l-r)&u;l-=r;c=c<<r|e[t];h+=r;if(h>=8){a[f++]=c>>h-8&255;h-=8}}h>0&&(a[f++]=(c<<8-h)+(o&(1<<8-h)-1))}this.bufferLength+=e}readBlockPng(){const e=this.rowBytes,t=this.pixBytes,a=this.str.getByte(),r=this.str.getBytes(e);this.eof=!r.length;if(this.eof)return;const i=this.bufferLength,n=this.ensureBuffer(i+e);let s=n.subarray(i-e,i);0===s.length&&(s=new Uint8Array(e));let o,c,l,h=i;switch(a){case 0:for(o=0;o<e;++o)n[h++]=r[o];break;case 1:for(o=0;o<t;++o)n[h++]=r[o];for(;o<e;++o){n[h]=n[h-t]+r[o]&255;h++}break;case 2:for(o=0;o<e;++o)n[h++]=s[o]+r[o]&255;break;case 3:for(o=0;o<t;++o)n[h++]=(s[o]>>1)+r[o];for(;o<e;++o){n[h]=(s[o]+n[h-t]>>1)+r[o]&255;h++}break;case 4:for(o=0;o<t;++o){c=s[o];l=r[o];n[h++]=c+l}for(;o<e;++o){c=s[o];const e=s[o-t],a=n[h-t],i=a+c-e;let u=i-a;u<0&&(u=-u);let d=i-c;d<0&&(d=-d);let f=i-e;f<0&&(f=-f);l=r[o];n[h++]=u<=d&&u<=f?a+l:d<=f?c+l:e+l}break;default:throw new FormatError(`Unsupported predictor: ${a}`)}this.bufferLength+=e}}class RunLengthStream extends DecodeStream{constructor(e,t){super(t);this.str=e;this.dict=e.dict}readBlock(){const e=this.str.getBytes(2);if(!e||e.length<2||128===e[0]){this.eof=!0;return}let t,a=this.bufferLength,r=e[0];if(r<128){t=this.ensureBuffer(a+r+1);t[a++]=e[1];if(r>0){const e=this.str.getBytes(r);t.set(e,a);a+=r}}else{r=257-r;t=this.ensureBuffer(a+r+1);t.fill(e[1],a,a+r);a+=r}this.bufferLength=a}}class Parser{constructor({lexer:e,xref:t,allowStreams:a=!1,recoveryMode:r=!1}){this.lexer=e;this.xref=t;this.allowStreams=a;this.recoveryMode=r;this.imageCache=Object.create(null);this._imageId=0;this.refill()}refill(){this.buf1=this.lexer.getObj();this.buf2=this.lexer.getObj()}shift(){if(this.buf2 instanceof Cmd&&"ID"===this.buf2.cmd){this.buf1=this.buf2;this.buf2=null}else{this.buf1=this.buf2;this.buf2=this.lexer.getObj()}}tryShift(){try{this.shift();return!0}catch(e){if(e instanceof MissingDataException)throw e;return!1}}getObj(e=null){const t=this.buf1;this.shift();if(t instanceof Cmd)switch(t.cmd){case"BI":return this.makeInlineImage(e);case"[":const a=[];for(;!isCmd(this.buf1,"]")&&this.buf1!==wa;)a.push(this.getObj(e));if(this.buf1===wa){if(this.recoveryMode)return a;throw new ParserEOFException("End of file inside array.")}this.shift();return a;case"<<":const r=new Dict(this.xref);for(;!isCmd(this.buf1,">>")&&this.buf1!==wa;){if(!(this.buf1 instanceof Name)){info("Malformed dictionary: key must be a name object");this.shift();continue}const t=this.buf1.name;this.shift();if(this.buf1===wa)break;r.set(t,this.getObj(e))}if(this.buf1===wa){if(this.recoveryMode)return r;throw new ParserEOFException("End of file inside dictionary.")}if(isCmd(this.buf2,"stream"))return this.allowStreams?this.makeStream(r,e):r;this.shift();return r;default:return t}if(Number.isInteger(t)){if(Number.isInteger(this.buf1)&&isCmd(this.buf2,"R")){const e=Ref.get(t,this.buf1);this.shift();this.shift();return e}return t}return"string"==typeof t&&e?e.decryptString(t):t}findDefaultInlineStreamEnd(e){const{knownCommands:t}=this.lexer,a=e.pos;let r,i,n=0;for(;-1!==(r=e.getByte());)if(0===n)n=69===r?1:0;else if(1===n)n=73===r?2:0;else if(32===r||10===r||13===r){i=e.pos;const a=e.peekBytes(15),s=a.length;if(0===s)break;for(let e=0;e<s;e++){r=a[e];if((0!==r||0===a[e+1])&&(10!==r&&13!==r&&(r<32||r>127))){n=0;break}}if(2!==n)continue;if(!t){warn("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");continue}const o=new Lexer(new Stream(e.peekBytes(75)),t);o._hexStringWarn=()=>{};let c=0;for(;;){const e=o.getObj();if(e===wa){n=0;break}if(e instanceof Cmd){const a=t[e.cmd];if(!a){n=0;break}if(a.variableArgs?c<=a.numArgs:c===a.numArgs)break;c=0}else c++}if(2===n)break}else n=0;if(-1===r){warn("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker");if(i){warn(\'... trying to recover by using the last "EI" occurrence.\');e.skip(-(e.pos-i))}}let s=4;e.skip(-s);r=e.peekByte();e.skip(s);isWhiteSpace(r)||s--;return e.pos-s-a}findDCTDecodeInlineStreamEnd(e){const t=e.pos;let a,r,i=!1;for(;-1!==(a=e.getByte());)if(255===a){switch(e.getByte()){case 0:break;case 255:e.skip(-1);break;case 217:i=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:r=e.getUint16();r>2?e.skip(r-2):e.skip(-2)}if(i)break}const n=e.pos-t;if(-1===a){warn("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead.");e.skip(-n);return this.findDefaultInlineStreamEnd(e)}this.inlineStreamSkipEI(e);return n}findASCII85DecodeInlineStreamEnd(e){const t=e.pos;let a;for(;-1!==(a=e.getByte());)if(126===a){const t=e.pos;a=e.peekByte();for(;isWhiteSpace(a);){e.skip();a=e.peekByte()}if(62===a){e.skip();break}if(e.pos>t){const t=e.peekBytes(2);if(69===t[0]&&73===t[1])break}}const r=e.pos-t;if(-1===a){warn("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead.");e.skip(-r);return this.findDefaultInlineStreamEnd(e)}this.inlineStreamSkipEI(e);return r}findASCIIHexDecodeInlineStreamEnd(e){const t=e.pos;let a;for(;-1!==(a=e.getByte())&&62!==a;);const r=e.pos-t;if(-1===a){warn("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead.");e.skip(-r);return this.findDefaultInlineStreamEnd(e)}this.inlineStreamSkipEI(e);return r}inlineStreamSkipEI(e){let t,a=0;for(;-1!==(t=e.getByte());)if(0===a)a=69===t?1:0;else if(1===a)a=73===t?2:0;else if(2===a)break}makeInlineImage(e){const t=this.lexer,a=t.stream,r=Object.create(null);let i;for(;!isCmd(this.buf1,"ID")&&this.buf1!==wa;){if(!(this.buf1 instanceof Name))throw new FormatError("Dictionary key must be a name object");const t=this.buf1.name;this.shift();if(this.buf1===wa)break;r[t]=this.getObj(e)}-1!==t.beginInlineImagePos&&(i=a.pos-t.beginInlineImagePos);const n=this.xref.fetchIfRef(r.F||r.Filter);let s;if(n instanceof Name)s=n.name;else if(Array.isArray(n)){const e=this.xref.fetchIfRef(n[0]);e instanceof Name&&(s=e.name)}const o=a.pos;let c,l;switch(s){case"DCT":case"DCTDecode":c=this.findDCTDecodeInlineStreamEnd(a);break;case"A85":case"ASCII85Decode":c=this.findASCII85DecodeInlineStreamEnd(a);break;case"AHx":case"ASCIIHexDecode":c=this.findASCIIHexDecodeInlineStreamEnd(a);break;default:c=this.findDefaultInlineStreamEnd(a)}if(c<1e3&&i>0){const e=a.pos;a.pos=t.beginInlineImagePos;l=function getInlineImageCacheKey(e){const t=[],a=e.length;let r=0;for(;r<a-1;)t.push(e[r++]<<8|e[r++]);r<a&&t.push(e[r]);return a+"_"+String.fromCharCode.apply(null,t)}(a.getBytes(i+c));a.pos=e;const r=this.imageCache[l];if(void 0!==r){this.buf2=Cmd.get("EI");this.shift();r.reset();return r}}const h=new Dict(this.xref);for(const e in r)h.set(e,r[e]);let u=a.makeSubStream(o,c,h);e&&(u=e.createStream(u,c));u=this.filter(u,h,c);u.dict=h;if(void 0!==l){u.cacheKey="inline_img_"+ ++this._imageId;this.imageCache[l]=u}this.buf2=Cmd.get("EI");this.shift();return u}#q(e){const{stream:t}=this.lexer;t.pos=e;const a=new Uint8Array([101,110,100]),r=a.length,i=[new Uint8Array([115,116,114,101,97,109]),new Uint8Array([115,116,101,97,109]),new Uint8Array([115,116,114,101,97])],n=9-r;for(;t.pos<t.end;){const s=t.peekBytes(2048),o=s.length-9;if(o<=0)break;let c=0;for(;c<o;){let o=0;for(;o<r&&s[c+o]===a[o];)o++;if(o>=r){let r=!1;for(const e of i){const t=e.length;let i=0;for(;i<t&&s[c+o+i]===e[i];)i++;if(i>=n){r=!0;break}if(i>=t){if(isWhiteSpace(s[c+o+i])){info(`Found "${bytesToString([...a,...e])}" when searching for endstream command.`);r=!0}break}}if(r){t.pos+=c;return t.pos-e}}c++}t.pos+=o}return-1}makeStream(e,t){const a=this.lexer;let r=a.stream;a.skipToNextLine();const i=r.pos-1;let n=e.get("Length");if(!Number.isInteger(n)){info(`Bad length "${n&&n.toString()}" in stream.`);n=0}r.pos=i+n;a.nextChar();if(this.tryShift()&&isCmd(this.buf2,"endstream"))this.shift();else{n=this.#q(i);if(n<0)throw new FormatError("Missing endstream command.");a.nextChar();this.shift();this.shift()}this.shift();r=r.makeSubStream(i,n,e);t&&(r=t.createStream(r,n));r=this.filter(r,e,n);r.dict=e;return r}filter(e,t,a){let r=t.get("F","Filter"),i=t.get("DP","DecodeParms");if(r instanceof Name){Array.isArray(i)&&warn("/DecodeParms should not be an Array, when /Filter is a Name.");return this.makeFilter(e,r.name,a,i)}let n=a;if(Array.isArray(r)){const t=r,a=i;for(let s=0,o=t.length;s<o;++s){r=this.xref.fetchIfRef(t[s]);if(!(r instanceof Name))throw new FormatError(`Bad filter name "${r}"`);i=null;Array.isArray(a)&&s in a&&(i=this.xref.fetchIfRef(a[s]));e=this.makeFilter(e,r.name,n,i);n=null}}return e}makeFilter(e,t,a,r){if(0===a){warn(`Empty "${t}" stream.`);return new NullStream}try{switch(t){case"Fl":case"FlateDecode":return r?new PredictorStream(new FlateStream(e,a),a,r):new FlateStream(e,a);case"LZW":case"LZWDecode":let t=1;if(r){r.has("EarlyChange")&&(t=r.get("EarlyChange"));return new PredictorStream(new LZWStream(e,a,t),a,r)}return new LZWStream(e,a,t);case"DCT":case"DCTDecode":return new JpegStream(e,a,r);case"JPX":case"JPXDecode":return new JpxStream(e,a,r);case"A85":case"ASCII85Decode":return new Ascii85Stream(e,a);case"AHx":case"ASCIIHexDecode":return new AsciiHexStream(e,a);case"CCF":case"CCITTFaxDecode":return new CCITTFaxStream(e,a,r);case"RL":case"RunLengthDecode":return new RunLengthStream(e,a);case"JBIG2Decode":return new Jbig2Stream(e,a,r)}warn(`Filter "${t}" is not supported.`);return e}catch(e){if(e instanceof MissingDataException)throw e;warn(`Invalid stream: "${e}"`);return new NullStream}}}const mr=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function toHexDigit(e){return e>=48&&e<=57?15&e:e>=65&&e<=70||e>=97&&e<=102?9+(15&e):-1}class Lexer{constructor(e,t=null){this.stream=e;this.nextChar();this.strBuf=[];this.knownCommands=t;this._hexStringNumWarn=0;this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let e=this.currentChar,t=!1,a=0,r=1;if(45===e){r=-1;e=this.nextChar();45===e&&(e=this.nextChar())}else 43===e&&(e=this.nextChar());if(10===e||13===e)do{e=this.nextChar()}while(10===e||13===e);if(46===e){a=10;e=this.nextChar()}if(e<48||e>57){const t=`Invalid number: ${String.fromCharCode(e)} (charCode ${e})`;if(isWhiteSpace(e)||40===e||60===e||-1===e){info(`Lexer.getNumber - "${t}".`);return 0}throw new FormatError(t)}let i=e-48,n=0,s=1;for(;(e=this.nextChar())>=0;)if(e>=48&&e<=57){const r=e-48;if(t)n=10*n+r;else{0!==a&&(a*=10);i=10*i+r}}else if(46===e){if(0!==a)break;a=1}else if(45===e)warn("Badly formatted number: minus sign in the middle");else{if(69!==e&&101!==e)break;e=this.peekChar();if(43===e||45===e){s=45===e?-1:1;this.nextChar()}else if(e<48||e>57)break;t=!0}0!==a&&(i/=a);t&&(i*=10**(s*n));return r*i}getString(){let e=1,t=!1;const a=this.strBuf;a.length=0;let r=this.nextChar();for(;;){let i=!1;switch(0|r){case-1:warn("Unterminated string");t=!0;break;case 40:++e;a.push("(");break;case 41:if(0==--e){this.nextChar();t=!0}else a.push(")");break;case 92:r=this.nextChar();switch(r){case-1:warn("Unterminated string");t=!0;break;case 110:a.push("\\n");break;case 114:a.push("\\r");break;case 116:a.push("\\t");break;case 98:a.push("\\b");break;case 102:a.push("\\f");break;case 92:case 40:case 41:a.push(String.fromCharCode(r));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let e=15&r;r=this.nextChar();i=!0;if(r>=48&&r<=55){e=(e<<3)+(15&r);r=this.nextChar();if(r>=48&&r<=55){i=!1;e=(e<<3)+(15&r)}}a.push(String.fromCharCode(e));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:a.push(String.fromCharCode(r))}break;default:a.push(String.fromCharCode(r))}if(t)break;i||(r=this.nextChar())}return a.join("")}getName(){let e,t;const a=this.strBuf;a.length=0;for(;(e=this.nextChar())>=0&&!mr[e];)if(35===e){e=this.nextChar();if(mr[e]){warn("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number.");a.push("#");break}const r=toHexDigit(e);if(-1!==r){t=e;e=this.nextChar();const i=toHexDigit(e);if(-1===i){warn(`Lexer_getName: Illegal digit (${String.fromCharCode(e)}) in hexadecimal number.`);a.push("#",String.fromCharCode(t));if(mr[e])break;a.push(String.fromCharCode(e));continue}a.push(String.fromCharCode(r<<4|i))}else a.push("#",String.fromCharCode(e))}else a.push(String.fromCharCode(e));a.length>127&&warn(`Name token is longer than allowed by the spec: ${a.length}`);return Name.get(a.join(""))}_hexStringWarn(e){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||warn(`getHexString - ignoring invalid character: ${e}`):warn("getHexString - ignoring additional invalid characters.")}getHexString(){const e=this.strBuf;e.length=0;let t=this.currentChar,a=-1,r=-1;this._hexStringNumWarn=0;for(;;){if(t<0){warn("Unterminated hex string");break}if(62===t){this.nextChar();break}if(1!==mr[t]){r=toHexDigit(t);if(-1===r)this._hexStringWarn(t);else if(-1===a)a=r;else{e.push(String.fromCharCode(a<<4|r));a=-1}t=this.nextChar()}else t=this.nextChar()}-1!==a&&e.push(String.fromCharCode(a<<4));return e.join("")}getObj(){let e=!1,t=this.currentChar;for(;;){if(t<0)return wa;if(e)10!==t&&13!==t||(e=!1);else if(37===t)e=!0;else if(1!==mr[t])break;t=this.nextChar()}switch(0|t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:this.nextChar();return Cmd.get("[");case 93:this.nextChar();return Cmd.get("]");case 60:t=this.nextChar();if(60===t){this.nextChar();return Cmd.get("<<")}return this.getHexString();case 62:t=this.nextChar();if(62===t){this.nextChar();return Cmd.get(">>")}return Cmd.get(">");case 123:this.nextChar();return Cmd.get("{");case 125:this.nextChar();return Cmd.get("}");case 41:this.nextChar();throw new FormatError(`Illegal character: ${t}`)}let a=String.fromCharCode(t);if(t<32||t>127){const e=this.peekChar();if(e>=32&&e<=127){this.nextChar();return Cmd.get(a)}}const r=this.knownCommands;let i=void 0!==r?.[a];for(;(t=this.nextChar())>=0&&!mr[t];){const e=a+String.fromCharCode(t);if(i&&void 0===r[e])break;if(128===a.length)throw new FormatError(`Command token too long: ${a.length}`);a=e;i=void 0!==r?.[a]}if("true"===a)return!0;if("false"===a)return!1;if("null"===a)return null;"BI"===a&&(this.beginInlineImagePos=this.stream.pos);return Cmd.get(a)}skipToNextLine(){let e=this.currentChar;for(;e>=0;){if(13===e){e=this.nextChar();10===e&&this.nextChar();break}if(10===e){this.nextChar();break}e=this.nextChar()}}}class Linearization{static create(e){function getInt(e,t,a=!1){const r=e.get(t);if(Number.isInteger(r)&&(a?r>=0:r>0))return r;throw new Error(`The "${t}" parameter in the linearization dictionary is invalid.`)}const t=new Parser({lexer:new Lexer(e),xref:null}),a=t.getObj(),r=t.getObj(),i=t.getObj(),n=t.getObj();let s,o;if(!(Number.isInteger(a)&&Number.isInteger(r)&&isCmd(i,"obj")&&n instanceof Dict&&"number"==typeof(s=n.get("Linearized"))&&s>0))return null;if((o=getInt(n,"L"))!==e.length)throw new Error(\'The "L" parameter in the linearization dictionary does not equal the stream length.\');return{length:o,hints:function getHints(e){const t=e.get("H");let a;if(Array.isArray(t)&&(2===(a=t.length)||4===a)){for(let e=0;e<a;e++){const a=t[e];if(!(Number.isInteger(a)&&a>0))throw new Error(`Hint (${e}) in the linearization dictionary is invalid.`)}return t}throw new Error("Hint array in the linearization dictionary is invalid.")}(n),objectNumberFirst:getInt(n,"O"),endFirst:getInt(n,"E"),numPages:getInt(n,"N"),mainXRefEntriesOffset:getInt(n,"T"),pageFirst:n.has("P")?getInt(n,"P",!0):0}}}const br=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],yr=2**24-1;class CMap{constructor(e=!1){this.codespaceRanges=[[],[],[],[]];this.numCodespaceRanges=0;this._map=[];this.name="";this.vertical=!1;this.useCMap=null;this.builtInCMap=e}addCodespaceRange(e,t,a){this.codespaceRanges[e-1].push(t,a);this.numCodespaceRanges++}mapCidRange(e,t,a){if(t-e>yr)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;e<=t;)this._map[e++]=a++}mapBfRange(e,t,a){if(t-e>yr)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const r=a.length-1;for(;e<=t;){this._map[e++]=a;const t=a.charCodeAt(r)+1;t>255?a=a.substring(0,r-1)+String.fromCharCode(a.charCodeAt(r-1)+1)+"\\0":a=a.substring(0,r)+String.fromCharCode(t)}}mapBfRangeToArray(e,t,a){if(t-e>yr)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const r=a.length;let i=0;for(;e<=t&&i<r;){this._map[e]=a[i++];++e}}mapOne(e,t){this._map[e]=t}lookup(e){return this._map[e]}contains(e){return void 0!==this._map[e]}forEach(e){const t=this._map,a=t.length;if(a<=65536)for(let r=0;r<a;r++)void 0!==t[r]&&e(r,t[r]);else for(const a in t)e(a,t[a])}charCodeOf(e){const t=this._map;if(t.length<=65536)return t.indexOf(e);for(const a in t)if(t[a]===e)return 0|a;return-1}getMap(){return this._map}readCharCode(e,t,a){let r=0;const i=this.codespaceRanges;for(let n=0,s=i.length;n<s;n++){r=(r<<8|e.charCodeAt(t+n))>>>0;const s=i[n];for(let e=0,t=s.length;e<t;){const t=s[e++],i=s[e++];if(r>=t&&r<=i){a.charcode=r;a.length=n+1;return}}}a.charcode=0;a.length=1}getCharCodeLength(e){const t=this.codespaceRanges;for(let a=0,r=t.length;a<r;a++){const r=t[a];for(let t=0,i=r.length;t<i;){const i=r[t++],n=r[t++];if(e>=i&&e<=n)return a+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(let e=0;e<65536;e++)if(this._map[e]!==e)return!1;return!0}}class IdentityCMap extends CMap{constructor(e,t){super();this.vertical=e;this.addCodespaceRange(t,0,65535)}mapCidRange(e,t,a){unreachable("should not call mapCidRange")}mapBfRange(e,t,a){unreachable("should not call mapBfRange")}mapBfRangeToArray(e,t,a){unreachable("should not call mapBfRangeToArray")}mapOne(e,t){unreachable("should not call mapCidOne")}lookup(e){return Number.isInteger(e)&&e<=65535?e:void 0}contains(e){return Number.isInteger(e)&&e<=65535}forEach(e){for(let t=0;t<=65535;t++)e(t,t)}charCodeOf(e){return Number.isInteger(e)&&e<=65535?e:-1}getMap(){const e=new Array(65536);for(let t=0;t<=65535;t++)e[t]=t;return e}get length(){return 65536}get isIdentityCMap(){unreachable("should not access .isIdentityCMap")}}function strToInt(e){let t=0;for(let a=0;a<e.length;a++)t=t<<8|e.charCodeAt(a);return t>>>0}function expectString(e){if("string"!=typeof e)throw new FormatError("Malformed CMap: expected string.")}function expectInt(e){if(!Number.isInteger(e))throw new FormatError("Malformed CMap: expected int.")}function parseBfChar(e,t){for(;;){let a=t.getObj();if(a===wa)break;if(isCmd(a,"endbfchar"))return;expectString(a);const r=strToInt(a);a=t.getObj();expectString(a);const i=a;e.mapOne(r,i)}}function parseBfRange(e,t){for(;;){let a=t.getObj();if(a===wa)break;if(isCmd(a,"endbfrange"))return;expectString(a);const r=strToInt(a);a=t.getObj();expectString(a);const i=strToInt(a);a=t.getObj();if(Number.isInteger(a)||"string"==typeof a){const t=Number.isInteger(a)?String.fromCharCode(a):a;e.mapBfRange(r,i,t)}else{if(!isCmd(a,"["))break;{a=t.getObj();const n=[];for(;!isCmd(a,"]")&&a!==wa;){n.push(a);a=t.getObj()}e.mapBfRangeToArray(r,i,n)}}}throw new FormatError("Invalid bf range.")}function parseCidChar(e,t){for(;;){let a=t.getObj();if(a===wa)break;if(isCmd(a,"endcidchar"))return;expectString(a);const r=strToInt(a);a=t.getObj();expectInt(a);const i=a;e.mapOne(r,i)}}function parseCidRange(e,t){for(;;){let a=t.getObj();if(a===wa)break;if(isCmd(a,"endcidrange"))return;expectString(a);const r=strToInt(a);a=t.getObj();expectString(a);const i=strToInt(a);a=t.getObj();expectInt(a);const n=a;e.mapCidRange(r,i,n)}}function parseCodespaceRange(e,t){for(;;){let a=t.getObj();if(a===wa)break;if(isCmd(a,"endcodespacerange"))return;if("string"!=typeof a)break;const r=strToInt(a);a=t.getObj();if("string"!=typeof a)break;const i=strToInt(a);e.addCodespaceRange(a.length,r,i)}throw new FormatError("Invalid codespace range.")}function parseWMode(e,t){const a=t.getObj();Number.isInteger(a)&&(e.vertical=!!a)}function parseCMapName(e,t){const a=t.getObj();a instanceof Name&&(e.name=a.name)}async function parseCMap(e,t,a,r){let i,n;e:for(;;)try{const a=t.getObj();if(a===wa)break;if(a instanceof Name){"WMode"===a.name?parseWMode(e,t):"CMapName"===a.name&&parseCMapName(e,t);i=a}else if(a instanceof Cmd)switch(a.cmd){case"endcmap":break e;case"usecmap":i instanceof Name&&(n=i.name);break;case"begincodespacerange":parseCodespaceRange(e,t);break;case"beginbfchar":parseBfChar(e,t);break;case"begincidchar":parseCidChar(e,t);break;case"beginbfrange":parseBfRange(e,t);break;case"begincidrange":parseCidRange(e,t)}}catch(e){if(e instanceof MissingDataException)throw e;warn("Invalid cMap data: "+e);continue}!r&&n&&(r=n);return r?extendCMap(e,a,r):e}async function extendCMap(e,t,a){e.useCMap=await createBuiltInCMap(a,t);if(0===e.numCodespaceRanges){const t=e.useCMap.codespaceRanges;for(let a=0;a<t.length;a++)e.codespaceRanges[a]=t[a].slice();e.numCodespaceRanges=e.useCMap.numCodespaceRanges}e.useCMap.forEach((function(t,a){e.contains(t)||e.mapOne(t,a)}));return e}async function createBuiltInCMap(e,t){if("Identity-H"===e)return new IdentityCMap(!1,2);if("Identity-V"===e)return new IdentityCMap(!0,2);if(!br.includes(e))throw new Error("Unknown CMap name: "+e);if(!t)throw new Error("Built-in CMap parameters are not provided.");const{cMapData:a,isCompressed:r}=await t(e),i=new CMap(!0);if(r)return(new BinaryCMapReader).process(a,i,(e=>extendCMap(i,t,e)));const n=new Lexer(new Stream(a));return parseCMap(i,n,t,null)}class CMapFactory{static async create({encoding:e,fetchBuiltInCMap:t,useCMap:a}){if(e instanceof Name)return createBuiltInCMap(e.name,t);if(e instanceof BaseStream){const r=await parseCMap(new CMap,new Lexer(e),t,a);return r.isIdentityCMap?createBuiltInCMap(r.name,t):r}throw new Error("Encoding required.")}}const wr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],xr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],Sr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"],Ar=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""],kr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"],Cr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""],vr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];function getEncoding(e){switch(e){case"WinAnsiEncoding":return kr;case"StandardEncoding":return Ar;case"MacRomanEncoding":return Sr;case"SymbolSetEncoding":return Cr;case"ZapfDingbatsEncoding":return vr;case"ExpertEncoding":return wr;case"MacExpertEncoding":return xr;default:return null}}const Fr=getLookupTableFactory((function(e){e.A=65;e.AE=198;e.AEacute=508;e.AEmacron=482;e.AEsmall=63462;e.Aacute=193;e.Aacutesmall=63457;e.Abreve=258;e.Abreveacute=7854;e.Abrevecyrillic=1232;e.Abrevedotbelow=7862;e.Abrevegrave=7856;e.Abrevehookabove=7858;e.Abrevetilde=7860;e.Acaron=461;e.Acircle=9398;e.Acircumflex=194;e.Acircumflexacute=7844;e.Acircumflexdotbelow=7852;e.Acircumflexgrave=7846;e.Acircumflexhookabove=7848;e.Acircumflexsmall=63458;e.Acircumflextilde=7850;e.Acute=63177;e.Acutesmall=63412;e.Acyrillic=1040;e.Adblgrave=512;e.Adieresis=196;e.Adieresiscyrillic=1234;e.Adieresismacron=478;e.Adieresissmall=63460;e.Adotbelow=7840;e.Adotmacron=480;e.Agrave=192;e.Agravesmall=63456;e.Ahookabove=7842;e.Aiecyrillic=1236;e.Ainvertedbreve=514;e.Alpha=913;e.Alphatonos=902;e.Amacron=256;e.Amonospace=65313;e.Aogonek=260;e.Aring=197;e.Aringacute=506;e.Aringbelow=7680;e.Aringsmall=63461;e.Asmall=63329;e.Atilde=195;e.Atildesmall=63459;e.Aybarmenian=1329;e.B=66;e.Bcircle=9399;e.Bdotaccent=7682;e.Bdotbelow=7684;e.Becyrillic=1041;e.Benarmenian=1330;e.Beta=914;e.Bhook=385;e.Blinebelow=7686;e.Bmonospace=65314;e.Brevesmall=63220;e.Bsmall=63330;e.Btopbar=386;e.C=67;e.Caarmenian=1342;e.Cacute=262;e.Caron=63178;e.Caronsmall=63221;e.Ccaron=268;e.Ccedilla=199;e.Ccedillaacute=7688;e.Ccedillasmall=63463;e.Ccircle=9400;e.Ccircumflex=264;e.Cdot=266;e.Cdotaccent=266;e.Cedillasmall=63416;e.Chaarmenian=1353;e.Cheabkhasiancyrillic=1212;e.Checyrillic=1063;e.Chedescenderabkhasiancyrillic=1214;e.Chedescendercyrillic=1206;e.Chedieresiscyrillic=1268;e.Cheharmenian=1347;e.Chekhakassiancyrillic=1227;e.Cheverticalstrokecyrillic=1208;e.Chi=935;e.Chook=391;e.Circumflexsmall=63222;e.Cmonospace=65315;e.Coarmenian=1361;e.Csmall=63331;e.D=68;e.DZ=497;e.DZcaron=452;e.Daarmenian=1332;e.Dafrican=393;e.Dcaron=270;e.Dcedilla=7696;e.Dcircle=9401;e.Dcircumflexbelow=7698;e.Dcroat=272;e.Ddotaccent=7690;e.Ddotbelow=7692;e.Decyrillic=1044;e.Deicoptic=1006;e.Delta=8710;e.Deltagreek=916;e.Dhook=394;e.Dieresis=63179;e.DieresisAcute=63180;e.DieresisGrave=63181;e.Dieresissmall=63400;e.Digammagreek=988;e.Djecyrillic=1026;e.Dlinebelow=7694;e.Dmonospace=65316;e.Dotaccentsmall=63223;e.Dslash=272;e.Dsmall=63332;e.Dtopbar=395;e.Dz=498;e.Dzcaron=453;e.Dzeabkhasiancyrillic=1248;e.Dzecyrillic=1029;e.Dzhecyrillic=1039;e.E=69;e.Eacute=201;e.Eacutesmall=63465;e.Ebreve=276;e.Ecaron=282;e.Ecedillabreve=7708;e.Echarmenian=1333;e.Ecircle=9402;e.Ecircumflex=202;e.Ecircumflexacute=7870;e.Ecircumflexbelow=7704;e.Ecircumflexdotbelow=7878;e.Ecircumflexgrave=7872;e.Ecircumflexhookabove=7874;e.Ecircumflexsmall=63466;e.Ecircumflextilde=7876;e.Ecyrillic=1028;e.Edblgrave=516;e.Edieresis=203;e.Edieresissmall=63467;e.Edot=278;e.Edotaccent=278;e.Edotbelow=7864;e.Efcyrillic=1060;e.Egrave=200;e.Egravesmall=63464;e.Eharmenian=1335;e.Ehookabove=7866;e.Eightroman=8551;e.Einvertedbreve=518;e.Eiotifiedcyrillic=1124;e.Elcyrillic=1051;e.Elevenroman=8554;e.Emacron=274;e.Emacronacute=7702;e.Emacrongrave=7700;e.Emcyrillic=1052;e.Emonospace=65317;e.Encyrillic=1053;e.Endescendercyrillic=1186;e.Eng=330;e.Enghecyrillic=1188;e.Enhookcyrillic=1223;e.Eogonek=280;e.Eopen=400;e.Epsilon=917;e.Epsilontonos=904;e.Ercyrillic=1056;e.Ereversed=398;e.Ereversedcyrillic=1069;e.Escyrillic=1057;e.Esdescendercyrillic=1194;e.Esh=425;e.Esmall=63333;e.Eta=919;e.Etarmenian=1336;e.Etatonos=905;e.Eth=208;e.Ethsmall=63472;e.Etilde=7868;e.Etildebelow=7706;e.Euro=8364;e.Ezh=439;e.Ezhcaron=494;e.Ezhreversed=440;e.F=70;e.Fcircle=9403;e.Fdotaccent=7710;e.Feharmenian=1366;e.Feicoptic=996;e.Fhook=401;e.Fitacyrillic=1138;e.Fiveroman=8548;e.Fmonospace=65318;e.Fourroman=8547;e.Fsmall=63334;e.G=71;e.GBsquare=13191;e.Gacute=500;e.Gamma=915;e.Gammaafrican=404;e.Gangiacoptic=1002;e.Gbreve=286;e.Gcaron=486;e.Gcedilla=290;e.Gcircle=9404;e.Gcircumflex=284;e.Gcommaaccent=290;e.Gdot=288;e.Gdotaccent=288;e.Gecyrillic=1043;e.Ghadarmenian=1346;e.Ghemiddlehookcyrillic=1172;e.Ghestrokecyrillic=1170;e.Gheupturncyrillic=1168;e.Ghook=403;e.Gimarmenian=1331;e.Gjecyrillic=1027;e.Gmacron=7712;e.Gmonospace=65319;e.Grave=63182;e.Gravesmall=63328;e.Gsmall=63335;e.Gsmallhook=667;e.Gstroke=484;e.H=72;e.H18533=9679;e.H18543=9642;e.H18551=9643;e.H22073=9633;e.HPsquare=13259;e.Haabkhasiancyrillic=1192;e.Hadescendercyrillic=1202;e.Hardsigncyrillic=1066;e.Hbar=294;e.Hbrevebelow=7722;e.Hcedilla=7720;e.Hcircle=9405;e.Hcircumflex=292;e.Hdieresis=7718;e.Hdotaccent=7714;e.Hdotbelow=7716;e.Hmonospace=65320;e.Hoarmenian=1344;e.Horicoptic=1e3;e.Hsmall=63336;e.Hungarumlaut=63183;e.Hungarumlautsmall=63224;e.Hzsquare=13200;e.I=73;e.IAcyrillic=1071;e.IJ=306;e.IUcyrillic=1070;e.Iacute=205;e.Iacutesmall=63469;e.Ibreve=300;e.Icaron=463;e.Icircle=9406;e.Icircumflex=206;e.Icircumflexsmall=63470;e.Icyrillic=1030;e.Idblgrave=520;e.Idieresis=207;e.Idieresisacute=7726;e.Idieresiscyrillic=1252;e.Idieresissmall=63471;e.Idot=304;e.Idotaccent=304;e.Idotbelow=7882;e.Iebrevecyrillic=1238;e.Iecyrillic=1045;e.Ifraktur=8465;e.Igrave=204;e.Igravesmall=63468;e.Ihookabove=7880;e.Iicyrillic=1048;e.Iinvertedbreve=522;e.Iishortcyrillic=1049;e.Imacron=298;e.Imacroncyrillic=1250;e.Imonospace=65321;e.Iniarmenian=1339;e.Iocyrillic=1025;e.Iogonek=302;e.Iota=921;e.Iotaafrican=406;e.Iotadieresis=938;e.Iotatonos=906;e.Ismall=63337;e.Istroke=407;e.Itilde=296;e.Itildebelow=7724;e.Izhitsacyrillic=1140;e.Izhitsadblgravecyrillic=1142;e.J=74;e.Jaarmenian=1345;e.Jcircle=9407;e.Jcircumflex=308;e.Jecyrillic=1032;e.Jheharmenian=1355;e.Jmonospace=65322;e.Jsmall=63338;e.K=75;e.KBsquare=13189;e.KKsquare=13261;e.Kabashkircyrillic=1184;e.Kacute=7728;e.Kacyrillic=1050;e.Kadescendercyrillic=1178;e.Kahookcyrillic=1219;e.Kappa=922;e.Kastrokecyrillic=1182;e.Kaverticalstrokecyrillic=1180;e.Kcaron=488;e.Kcedilla=310;e.Kcircle=9408;e.Kcommaaccent=310;e.Kdotbelow=7730;e.Keharmenian=1364;e.Kenarmenian=1343;e.Khacyrillic=1061;e.Kheicoptic=998;e.Khook=408;e.Kjecyrillic=1036;e.Klinebelow=7732;e.Kmonospace=65323;e.Koppacyrillic=1152;e.Koppagreek=990;e.Ksicyrillic=1134;e.Ksmall=63339;e.L=76;e.LJ=455;e.LL=63167;e.Lacute=313;e.Lambda=923;e.Lcaron=317;e.Lcedilla=315;e.Lcircle=9409;e.Lcircumflexbelow=7740;e.Lcommaaccent=315;e.Ldot=319;e.Ldotaccent=319;e.Ldotbelow=7734;e.Ldotbelowmacron=7736;e.Liwnarmenian=1340;e.Lj=456;e.Ljecyrillic=1033;e.Llinebelow=7738;e.Lmonospace=65324;e.Lslash=321;e.Lslashsmall=63225;e.Lsmall=63340;e.M=77;e.MBsquare=13190;e.Macron=63184;e.Macronsmall=63407;e.Macute=7742;e.Mcircle=9410;e.Mdotaccent=7744;e.Mdotbelow=7746;e.Menarmenian=1348;e.Mmonospace=65325;e.Msmall=63341;e.Mturned=412;e.Mu=924;e.N=78;e.NJ=458;e.Nacute=323;e.Ncaron=327;e.Ncedilla=325;e.Ncircle=9411;e.Ncircumflexbelow=7754;e.Ncommaaccent=325;e.Ndotaccent=7748;e.Ndotbelow=7750;e.Nhookleft=413;e.Nineroman=8552;e.Nj=459;e.Njecyrillic=1034;e.Nlinebelow=7752;e.Nmonospace=65326;e.Nowarmenian=1350;e.Nsmall=63342;e.Ntilde=209;e.Ntildesmall=63473;e.Nu=925;e.O=79;e.OE=338;e.OEsmall=63226;e.Oacute=211;e.Oacutesmall=63475;e.Obarredcyrillic=1256;e.Obarreddieresiscyrillic=1258;e.Obreve=334;e.Ocaron=465;e.Ocenteredtilde=415;e.Ocircle=9412;e.Ocircumflex=212;e.Ocircumflexacute=7888;e.Ocircumflexdotbelow=7896;e.Ocircumflexgrave=7890;e.Ocircumflexhookabove=7892;e.Ocircumflexsmall=63476;e.Ocircumflextilde=7894;e.Ocyrillic=1054;e.Odblacute=336;e.Odblgrave=524;e.Odieresis=214;e.Odieresiscyrillic=1254;e.Odieresissmall=63478;e.Odotbelow=7884;e.Ogoneksmall=63227;e.Ograve=210;e.Ogravesmall=63474;e.Oharmenian=1365;e.Ohm=8486;e.Ohookabove=7886;e.Ohorn=416;e.Ohornacute=7898;e.Ohorndotbelow=7906;e.Ohorngrave=7900;e.Ohornhookabove=7902;e.Ohorntilde=7904;e.Ohungarumlaut=336;e.Oi=418;e.Oinvertedbreve=526;e.Omacron=332;e.Omacronacute=7762;e.Omacrongrave=7760;e.Omega=8486;e.Omegacyrillic=1120;e.Omegagreek=937;e.Omegaroundcyrillic=1146;e.Omegatitlocyrillic=1148;e.Omegatonos=911;e.Omicron=927;e.Omicrontonos=908;e.Omonospace=65327;e.Oneroman=8544;e.Oogonek=490;e.Oogonekmacron=492;e.Oopen=390;e.Oslash=216;e.Oslashacute=510;e.Oslashsmall=63480;e.Osmall=63343;e.Ostrokeacute=510;e.Otcyrillic=1150;e.Otilde=213;e.Otildeacute=7756;e.Otildedieresis=7758;e.Otildesmall=63477;e.P=80;e.Pacute=7764;e.Pcircle=9413;e.Pdotaccent=7766;e.Pecyrillic=1055;e.Peharmenian=1354;e.Pemiddlehookcyrillic=1190;e.Phi=934;e.Phook=420;e.Pi=928;e.Piwrarmenian=1363;e.Pmonospace=65328;e.Psi=936;e.Psicyrillic=1136;e.Psmall=63344;e.Q=81;e.Qcircle=9414;e.Qmonospace=65329;e.Qsmall=63345;e.R=82;e.Raarmenian=1356;e.Racute=340;e.Rcaron=344;e.Rcedilla=342;e.Rcircle=9415;e.Rcommaaccent=342;e.Rdblgrave=528;e.Rdotaccent=7768;e.Rdotbelow=7770;e.Rdotbelowmacron=7772;e.Reharmenian=1360;e.Rfraktur=8476;e.Rho=929;e.Ringsmall=63228;e.Rinvertedbreve=530;e.Rlinebelow=7774;e.Rmonospace=65330;e.Rsmall=63346;e.Rsmallinverted=641;e.Rsmallinvertedsuperior=694;e.S=83;e.SF010000=9484;e.SF020000=9492;e.SF030000=9488;e.SF040000=9496;e.SF050000=9532;e.SF060000=9516;e.SF070000=9524;e.SF080000=9500;e.SF090000=9508;e.SF100000=9472;e.SF110000=9474;e.SF190000=9569;e.SF200000=9570;e.SF210000=9558;e.SF220000=9557;e.SF230000=9571;e.SF240000=9553;e.SF250000=9559;e.SF260000=9565;e.SF270000=9564;e.SF280000=9563;e.SF360000=9566;e.SF370000=9567;e.SF380000=9562;e.SF390000=9556;e.SF400000=9577;e.SF410000=9574;e.SF420000=9568;e.SF430000=9552;e.SF440000=9580;e.SF450000=9575;e.SF460000=9576;e.SF470000=9572;e.SF480000=9573;e.SF490000=9561;e.SF500000=9560;e.SF510000=9554;e.SF520000=9555;e.SF530000=9579;e.SF540000=9578;e.Sacute=346;e.Sacutedotaccent=7780;e.Sampigreek=992;e.Scaron=352;e.Scarondotaccent=7782;e.Scaronsmall=63229;e.Scedilla=350;e.Schwa=399;e.Schwacyrillic=1240;e.Schwadieresiscyrillic=1242;e.Scircle=9416;e.Scircumflex=348;e.Scommaaccent=536;e.Sdotaccent=7776;e.Sdotbelow=7778;e.Sdotbelowdotaccent=7784;e.Seharmenian=1357;e.Sevenroman=8550;e.Shaarmenian=1351;e.Shacyrillic=1064;e.Shchacyrillic=1065;e.Sheicoptic=994;e.Shhacyrillic=1210;e.Shimacoptic=1004;e.Sigma=931;e.Sixroman=8549;e.Smonospace=65331;e.Softsigncyrillic=1068;e.Ssmall=63347;e.Stigmagreek=986;e.T=84;e.Tau=932;e.Tbar=358;e.Tcaron=356;e.Tcedilla=354;e.Tcircle=9417;e.Tcircumflexbelow=7792;e.Tcommaaccent=354;e.Tdotaccent=7786;e.Tdotbelow=7788;e.Tecyrillic=1058;e.Tedescendercyrillic=1196;e.Tenroman=8553;e.Tetsecyrillic=1204;e.Theta=920;e.Thook=428;e.Thorn=222;e.Thornsmall=63486;e.Threeroman=8546;e.Tildesmall=63230;e.Tiwnarmenian=1359;e.Tlinebelow=7790;e.Tmonospace=65332;e.Toarmenian=1337;e.Tonefive=444;e.Tonesix=388;e.Tonetwo=423;e.Tretroflexhook=430;e.Tsecyrillic=1062;e.Tshecyrillic=1035;e.Tsmall=63348;e.Twelveroman=8555;e.Tworoman=8545;e.U=85;e.Uacute=218;e.Uacutesmall=63482;e.Ubreve=364;e.Ucaron=467;e.Ucircle=9418;e.Ucircumflex=219;e.Ucircumflexbelow=7798;e.Ucircumflexsmall=63483;e.Ucyrillic=1059;e.Udblacute=368;e.Udblgrave=532;e.Udieresis=220;e.Udieresisacute=471;e.Udieresisbelow=7794;e.Udieresiscaron=473;e.Udieresiscyrillic=1264;e.Udieresisgrave=475;e.Udieresismacron=469;e.Udieresissmall=63484;e.Udotbelow=7908;e.Ugrave=217;e.Ugravesmall=63481;e.Uhookabove=7910;e.Uhorn=431;e.Uhornacute=7912;e.Uhorndotbelow=7920;e.Uhorngrave=7914;e.Uhornhookabove=7916;e.Uhorntilde=7918;e.Uhungarumlaut=368;e.Uhungarumlautcyrillic=1266;e.Uinvertedbreve=534;e.Ukcyrillic=1144;e.Umacron=362;e.Umacroncyrillic=1262;e.Umacrondieresis=7802;e.Umonospace=65333;e.Uogonek=370;e.Upsilon=933;e.Upsilon1=978;e.Upsilonacutehooksymbolgreek=979;e.Upsilonafrican=433;e.Upsilondieresis=939;e.Upsilondieresishooksymbolgreek=980;e.Upsilonhooksymbol=978;e.Upsilontonos=910;e.Uring=366;e.Ushortcyrillic=1038;e.Usmall=63349;e.Ustraightcyrillic=1198;e.Ustraightstrokecyrillic=1200;e.Utilde=360;e.Utildeacute=7800;e.Utildebelow=7796;e.V=86;e.Vcircle=9419;e.Vdotbelow=7806;e.Vecyrillic=1042;e.Vewarmenian=1358;e.Vhook=434;e.Vmonospace=65334;e.Voarmenian=1352;e.Vsmall=63350;e.Vtilde=7804;e.W=87;e.Wacute=7810;e.Wcircle=9420;e.Wcircumflex=372;e.Wdieresis=7812;e.Wdotaccent=7814;e.Wdotbelow=7816;e.Wgrave=7808;e.Wmonospace=65335;e.Wsmall=63351;e.X=88;e.Xcircle=9421;e.Xdieresis=7820;e.Xdotaccent=7818;e.Xeharmenian=1341;e.Xi=926;e.Xmonospace=65336;e.Xsmall=63352;e.Y=89;e.Yacute=221;e.Yacutesmall=63485;e.Yatcyrillic=1122;e.Ycircle=9422;e.Ycircumflex=374;e.Ydieresis=376;e.Ydieresissmall=63487;e.Ydotaccent=7822;e.Ydotbelow=7924;e.Yericyrillic=1067;e.Yerudieresiscyrillic=1272;e.Ygrave=7922;e.Yhook=435;e.Yhookabove=7926;e.Yiarmenian=1349;e.Yicyrillic=1031;e.Yiwnarmenian=1362;e.Ymonospace=65337;e.Ysmall=63353;e.Ytilde=7928;e.Yusbigcyrillic=1130;e.Yusbigiotifiedcyrillic=1132;e.Yuslittlecyrillic=1126;e.Yuslittleiotifiedcyrillic=1128;e.Z=90;e.Zaarmenian=1334;e.Zacute=377;e.Zcaron=381;e.Zcaronsmall=63231;e.Zcircle=9423;e.Zcircumflex=7824;e.Zdot=379;e.Zdotaccent=379;e.Zdotbelow=7826;e.Zecyrillic=1047;e.Zedescendercyrillic=1176;e.Zedieresiscyrillic=1246;e.Zeta=918;e.Zhearmenian=1338;e.Zhebrevecyrillic=1217;e.Zhecyrillic=1046;e.Zhedescendercyrillic=1174;e.Zhedieresiscyrillic=1244;e.Zlinebelow=7828;e.Zmonospace=65338;e.Zsmall=63354;e.Zstroke=437;e.a=97;e.aabengali=2438;e.aacute=225;e.aadeva=2310;e.aagujarati=2694;e.aagurmukhi=2566;e.aamatragurmukhi=2622;e.aarusquare=13059;e.aavowelsignbengali=2494;e.aavowelsigndeva=2366;e.aavowelsigngujarati=2750;e.abbreviationmarkarmenian=1375;e.abbreviationsigndeva=2416;e.abengali=2437;e.abopomofo=12570;e.abreve=259;e.abreveacute=7855;e.abrevecyrillic=1233;e.abrevedotbelow=7863;e.abrevegrave=7857;e.abrevehookabove=7859;e.abrevetilde=7861;e.acaron=462;e.acircle=9424;e.acircumflex=226;e.acircumflexacute=7845;e.acircumflexdotbelow=7853;e.acircumflexgrave=7847;e.acircumflexhookabove=7849;e.acircumflextilde=7851;e.acute=180;e.acutebelowcmb=791;e.acutecmb=769;e.acutecomb=769;e.acutedeva=2388;e.acutelowmod=719;e.acutetonecmb=833;e.acyrillic=1072;e.adblgrave=513;e.addakgurmukhi=2673;e.adeva=2309;e.adieresis=228;e.adieresiscyrillic=1235;e.adieresismacron=479;e.adotbelow=7841;e.adotmacron=481;e.ae=230;e.aeacute=509;e.aekorean=12624;e.aemacron=483;e.afii00208=8213;e.afii08941=8356;e.afii10017=1040;e.afii10018=1041;e.afii10019=1042;e.afii10020=1043;e.afii10021=1044;e.afii10022=1045;e.afii10023=1025;e.afii10024=1046;e.afii10025=1047;e.afii10026=1048;e.afii10027=1049;e.afii10028=1050;e.afii10029=1051;e.afii10030=1052;e.afii10031=1053;e.afii10032=1054;e.afii10033=1055;e.afii10034=1056;e.afii10035=1057;e.afii10036=1058;e.afii10037=1059;e.afii10038=1060;e.afii10039=1061;e.afii10040=1062;e.afii10041=1063;e.afii10042=1064;e.afii10043=1065;e.afii10044=1066;e.afii10045=1067;e.afii10046=1068;e.afii10047=1069;e.afii10048=1070;e.afii10049=1071;e.afii10050=1168;e.afii10051=1026;e.afii10052=1027;e.afii10053=1028;e.afii10054=1029;e.afii10055=1030;e.afii10056=1031;e.afii10057=1032;e.afii10058=1033;e.afii10059=1034;e.afii10060=1035;e.afii10061=1036;e.afii10062=1038;e.afii10063=63172;e.afii10064=63173;e.afii10065=1072;e.afii10066=1073;e.afii10067=1074;e.afii10068=1075;e.afii10069=1076;e.afii10070=1077;e.afii10071=1105;e.afii10072=1078;e.afii10073=1079;e.afii10074=1080;e.afii10075=1081;e.afii10076=1082;e.afii10077=1083;e.afii10078=1084;e.afii10079=1085;e.afii10080=1086;e.afii10081=1087;e.afii10082=1088;e.afii10083=1089;e.afii10084=1090;e.afii10085=1091;e.afii10086=1092;e.afii10087=1093;e.afii10088=1094;e.afii10089=1095;e.afii10090=1096;e.afii10091=1097;e.afii10092=1098;e.afii10093=1099;e.afii10094=1100;e.afii10095=1101;e.afii10096=1102;e.afii10097=1103;e.afii10098=1169;e.afii10099=1106;e.afii10100=1107;e.afii10101=1108;e.afii10102=1109;e.afii10103=1110;e.afii10104=1111;e.afii10105=1112;e.afii10106=1113;e.afii10107=1114;e.afii10108=1115;e.afii10109=1116;e.afii10110=1118;e.afii10145=1039;e.afii10146=1122;e.afii10147=1138;e.afii10148=1140;e.afii10192=63174;e.afii10193=1119;e.afii10194=1123;e.afii10195=1139;e.afii10196=1141;e.afii10831=63175;e.afii10832=63176;e.afii10846=1241;e.afii299=8206;e.afii300=8207;e.afii301=8205;e.afii57381=1642;e.afii57388=1548;e.afii57392=1632;e.afii57393=1633;e.afii57394=1634;e.afii57395=1635;e.afii57396=1636;e.afii57397=1637;e.afii57398=1638;e.afii57399=1639;e.afii57400=1640;e.afii57401=1641;e.afii57403=1563;e.afii57407=1567;e.afii57409=1569;e.afii57410=1570;e.afii57411=1571;e.afii57412=1572;e.afii57413=1573;e.afii57414=1574;e.afii57415=1575;e.afii57416=1576;e.afii57417=1577;e.afii57418=1578;e.afii57419=1579;e.afii57420=1580;e.afii57421=1581;e.afii57422=1582;e.afii57423=1583;e.afii57424=1584;e.afii57425=1585;e.afii57426=1586;e.afii57427=1587;e.afii57428=1588;e.afii57429=1589;e.afii57430=1590;e.afii57431=1591;e.afii57432=1592;e.afii57433=1593;e.afii57434=1594;e.afii57440=1600;e.afii57441=1601;e.afii57442=1602;e.afii57443=1603;e.afii57444=1604;e.afii57445=1605;e.afii57446=1606;e.afii57448=1608;e.afii57449=1609;e.afii57450=1610;e.afii57451=1611;e.afii57452=1612;e.afii57453=1613;e.afii57454=1614;e.afii57455=1615;e.afii57456=1616;e.afii57457=1617;e.afii57458=1618;e.afii57470=1607;e.afii57505=1700;e.afii57506=1662;e.afii57507=1670;e.afii57508=1688;e.afii57509=1711;e.afii57511=1657;e.afii57512=1672;e.afii57513=1681;e.afii57514=1722;e.afii57519=1746;e.afii57534=1749;e.afii57636=8362;e.afii57645=1470;e.afii57658=1475;e.afii57664=1488;e.afii57665=1489;e.afii57666=1490;e.afii57667=1491;e.afii57668=1492;e.afii57669=1493;e.afii57670=1494;e.afii57671=1495;e.afii57672=1496;e.afii57673=1497;e.afii57674=1498;e.afii57675=1499;e.afii57676=1500;e.afii57677=1501;e.afii57678=1502;e.afii57679=1503;e.afii57680=1504;e.afii57681=1505;e.afii57682=1506;e.afii57683=1507;e.afii57684=1508;e.afii57685=1509;e.afii57686=1510;e.afii57687=1511;e.afii57688=1512;e.afii57689=1513;e.afii57690=1514;e.afii57694=64298;e.afii57695=64299;e.afii57700=64331;e.afii57705=64287;e.afii57716=1520;e.afii57717=1521;e.afii57718=1522;e.afii57723=64309;e.afii57793=1460;e.afii57794=1461;e.afii57795=1462;e.afii57796=1467;e.afii57797=1464;e.afii57798=1463;e.afii57799=1456;e.afii57800=1458;e.afii57801=1457;e.afii57802=1459;e.afii57803=1474;e.afii57804=1473;e.afii57806=1465;e.afii57807=1468;e.afii57839=1469;e.afii57841=1471;e.afii57842=1472;e.afii57929=700;e.afii61248=8453;e.afii61289=8467;e.afii61352=8470;e.afii61573=8236;e.afii61574=8237;e.afii61575=8238;e.afii61664=8204;e.afii63167=1645;e.afii64937=701;e.agrave=224;e.agujarati=2693;e.agurmukhi=2565;e.ahiragana=12354;e.ahookabove=7843;e.aibengali=2448;e.aibopomofo=12574;e.aideva=2320;e.aiecyrillic=1237;e.aigujarati=2704;e.aigurmukhi=2576;e.aimatragurmukhi=2632;e.ainarabic=1593;e.ainfinalarabic=65226;e.aininitialarabic=65227;e.ainmedialarabic=65228;e.ainvertedbreve=515;e.aivowelsignbengali=2504;e.aivowelsigndeva=2376;e.aivowelsigngujarati=2760;e.akatakana=12450;e.akatakanahalfwidth=65393;e.akorean=12623;e.alef=1488;e.alefarabic=1575;e.alefdageshhebrew=64304;e.aleffinalarabic=65166;e.alefhamzaabovearabic=1571;e.alefhamzaabovefinalarabic=65156;e.alefhamzabelowarabic=1573;e.alefhamzabelowfinalarabic=65160;e.alefhebrew=1488;e.aleflamedhebrew=64335;e.alefmaddaabovearabic=1570;e.alefmaddaabovefinalarabic=65154;e.alefmaksuraarabic=1609;e.alefmaksurafinalarabic=65264;e.alefmaksurainitialarabic=65267;e.alefmaksuramedialarabic=65268;e.alefpatahhebrew=64302;e.alefqamatshebrew=64303;e.aleph=8501;e.allequal=8780;e.alpha=945;e.alphatonos=940;e.amacron=257;e.amonospace=65345;e.ampersand=38;e.ampersandmonospace=65286;e.ampersandsmall=63270;e.amsquare=13250;e.anbopomofo=12578;e.angbopomofo=12580;e.angbracketleft=12296;e.angbracketright=12297;e.angkhankhuthai=3674;e.angle=8736;e.anglebracketleft=12296;e.anglebracketleftvertical=65087;e.anglebracketright=12297;e.anglebracketrightvertical=65088;e.angleleft=9001;e.angleright=9002;e.angstrom=8491;e.anoteleia=903;e.anudattadeva=2386;e.anusvarabengali=2434;e.anusvaradeva=2306;e.anusvaragujarati=2690;e.aogonek=261;e.apaatosquare=13056;e.aparen=9372;e.apostrophearmenian=1370;e.apostrophemod=700;e.apple=63743;e.approaches=8784;e.approxequal=8776;e.approxequalorimage=8786;e.approximatelyequal=8773;e.araeaekorean=12686;e.araeakorean=12685;e.arc=8978;e.arighthalfring=7834;e.aring=229;e.aringacute=507;e.aringbelow=7681;e.arrowboth=8596;e.arrowdashdown=8675;e.arrowdashleft=8672;e.arrowdashright=8674;e.arrowdashup=8673;e.arrowdblboth=8660;e.arrowdbldown=8659;e.arrowdblleft=8656;e.arrowdblright=8658;e.arrowdblup=8657;e.arrowdown=8595;e.arrowdownleft=8601;e.arrowdownright=8600;e.arrowdownwhite=8681;e.arrowheaddownmod=709;e.arrowheadleftmod=706;e.arrowheadrightmod=707;e.arrowheadupmod=708;e.arrowhorizex=63719;e.arrowleft=8592;e.arrowleftdbl=8656;e.arrowleftdblstroke=8653;e.arrowleftoverright=8646;e.arrowleftwhite=8678;e.arrowright=8594;e.arrowrightdblstroke=8655;e.arrowrightheavy=10142;e.arrowrightoverleft=8644;e.arrowrightwhite=8680;e.arrowtableft=8676;e.arrowtabright=8677;e.arrowup=8593;e.arrowupdn=8597;e.arrowupdnbse=8616;e.arrowupdownbase=8616;e.arrowupleft=8598;e.arrowupleftofdown=8645;e.arrowupright=8599;e.arrowupwhite=8679;e.arrowvertex=63718;e.asciicircum=94;e.asciicircummonospace=65342;e.asciitilde=126;e.asciitildemonospace=65374;e.ascript=593;e.ascriptturned=594;e.asmallhiragana=12353;e.asmallkatakana=12449;e.asmallkatakanahalfwidth=65383;e.asterisk=42;e.asteriskaltonearabic=1645;e.asteriskarabic=1645;e.asteriskmath=8727;e.asteriskmonospace=65290;e.asterisksmall=65121;e.asterism=8258;e.asuperior=63209;e.asymptoticallyequal=8771;e.at=64;e.atilde=227;e.atmonospace=65312;e.atsmall=65131;e.aturned=592;e.aubengali=2452;e.aubopomofo=12576;e.audeva=2324;e.augujarati=2708;e.augurmukhi=2580;e.aulengthmarkbengali=2519;e.aumatragurmukhi=2636;e.auvowelsignbengali=2508;e.auvowelsigndeva=2380;e.auvowelsigngujarati=2764;e.avagrahadeva=2365;e.aybarmenian=1377;e.ayin=1506;e.ayinaltonehebrew=64288;e.ayinhebrew=1506;e.b=98;e.babengali=2476;e.backslash=92;e.backslashmonospace=65340;e.badeva=2348;e.bagujarati=2732;e.bagurmukhi=2604;e.bahiragana=12400;e.bahtthai=3647;e.bakatakana=12496;e.bar=124;e.barmonospace=65372;e.bbopomofo=12549;e.bcircle=9425;e.bdotaccent=7683;e.bdotbelow=7685;e.beamedsixteenthnotes=9836;e.because=8757;e.becyrillic=1073;e.beharabic=1576;e.behfinalarabic=65168;e.behinitialarabic=65169;e.behiragana=12409;e.behmedialarabic=65170;e.behmeeminitialarabic=64671;e.behmeemisolatedarabic=64520;e.behnoonfinalarabic=64621;e.bekatakana=12505;e.benarmenian=1378;e.bet=1489;e.beta=946;e.betasymbolgreek=976;e.betdagesh=64305;e.betdageshhebrew=64305;e.bethebrew=1489;e.betrafehebrew=64332;e.bhabengali=2477;e.bhadeva=2349;e.bhagujarati=2733;e.bhagurmukhi=2605;e.bhook=595;e.bihiragana=12403;e.bikatakana=12499;e.bilabialclick=664;e.bindigurmukhi=2562;e.birusquare=13105;e.blackcircle=9679;e.blackdiamond=9670;e.blackdownpointingtriangle=9660;e.blackleftpointingpointer=9668;e.blackleftpointingtriangle=9664;e.blacklenticularbracketleft=12304;e.blacklenticularbracketleftvertical=65083;e.blacklenticularbracketright=12305;e.blacklenticularbracketrightvertical=65084;e.blacklowerlefttriangle=9699;e.blacklowerrighttriangle=9698;e.blackrectangle=9644;e.blackrightpointingpointer=9658;e.blackrightpointingtriangle=9654;e.blacksmallsquare=9642;e.blacksmilingface=9787;e.blacksquare=9632;e.blackstar=9733;e.blackupperlefttriangle=9700;e.blackupperrighttriangle=9701;e.blackuppointingsmalltriangle=9652;e.blackuppointingtriangle=9650;e.blank=9251;e.blinebelow=7687;e.block=9608;e.bmonospace=65346;e.bobaimaithai=3610;e.bohiragana=12412;e.bokatakana=12508;e.bparen=9373;e.bqsquare=13251;e.braceex=63732;e.braceleft=123;e.braceleftbt=63731;e.braceleftmid=63730;e.braceleftmonospace=65371;e.braceleftsmall=65115;e.bracelefttp=63729;e.braceleftvertical=65079;e.braceright=125;e.bracerightbt=63742;e.bracerightmid=63741;e.bracerightmonospace=65373;e.bracerightsmall=65116;e.bracerighttp=63740;e.bracerightvertical=65080;e.bracketleft=91;e.bracketleftbt=63728;e.bracketleftex=63727;e.bracketleftmonospace=65339;e.bracketlefttp=63726;e.bracketright=93;e.bracketrightbt=63739;e.bracketrightex=63738;e.bracketrightmonospace=65341;e.bracketrighttp=63737;e.breve=728;e.brevebelowcmb=814;e.brevecmb=774;e.breveinvertedbelowcmb=815;e.breveinvertedcmb=785;e.breveinverteddoublecmb=865;e.bridgebelowcmb=810;e.bridgeinvertedbelowcmb=826;e.brokenbar=166;e.bstroke=384;e.bsuperior=63210;e.btopbar=387;e.buhiragana=12406;e.bukatakana=12502;e.bullet=8226;e.bulletinverse=9688;e.bulletoperator=8729;e.bullseye=9678;e.c=99;e.caarmenian=1390;e.cabengali=2458;e.cacute=263;e.cadeva=2330;e.cagujarati=2714;e.cagurmukhi=2586;e.calsquare=13192;e.candrabindubengali=2433;e.candrabinducmb=784;e.candrabindudeva=2305;e.candrabindugujarati=2689;e.capslock=8682;e.careof=8453;e.caron=711;e.caronbelowcmb=812;e.caroncmb=780;e.carriagereturn=8629;e.cbopomofo=12568;e.ccaron=269;e.ccedilla=231;e.ccedillaacute=7689;e.ccircle=9426;e.ccircumflex=265;e.ccurl=597;e.cdot=267;e.cdotaccent=267;e.cdsquare=13253;e.cedilla=184;e.cedillacmb=807;e.cent=162;e.centigrade=8451;e.centinferior=63199;e.centmonospace=65504;e.centoldstyle=63394;e.centsuperior=63200;e.chaarmenian=1401;e.chabengali=2459;e.chadeva=2331;e.chagujarati=2715;e.chagurmukhi=2587;e.chbopomofo=12564;e.cheabkhasiancyrillic=1213;e.checkmark=10003;e.checyrillic=1095;e.chedescenderabkhasiancyrillic=1215;e.chedescendercyrillic=1207;e.chedieresiscyrillic=1269;e.cheharmenian=1395;e.chekhakassiancyrillic=1228;e.cheverticalstrokecyrillic=1209;e.chi=967;e.chieuchacirclekorean=12919;e.chieuchaparenkorean=12823;e.chieuchcirclekorean=12905;e.chieuchkorean=12618;e.chieuchparenkorean=12809;e.chochangthai=3594;e.chochanthai=3592;e.chochingthai=3593;e.chochoethai=3596;e.chook=392;e.cieucacirclekorean=12918;e.cieucaparenkorean=12822;e.cieuccirclekorean=12904;e.cieuckorean=12616;e.cieucparenkorean=12808;e.cieucuparenkorean=12828;e.circle=9675;e.circlecopyrt=169;e.circlemultiply=8855;e.circleot=8857;e.circleplus=8853;e.circlepostalmark=12342;e.circlewithlefthalfblack=9680;e.circlewithrighthalfblack=9681;e.circumflex=710;e.circumflexbelowcmb=813;e.circumflexcmb=770;e.clear=8999;e.clickalveolar=450;e.clickdental=448;e.clicklateral=449;e.clickretroflex=451;e.club=9827;e.clubsuitblack=9827;e.clubsuitwhite=9831;e.cmcubedsquare=13220;e.cmonospace=65347;e.cmsquaredsquare=13216;e.coarmenian=1409;e.colon=58;e.colonmonetary=8353;e.colonmonospace=65306;e.colonsign=8353;e.colonsmall=65109;e.colontriangularhalfmod=721;e.colontriangularmod=720;e.comma=44;e.commaabovecmb=787;e.commaaboverightcmb=789;e.commaaccent=63171;e.commaarabic=1548;e.commaarmenian=1373;e.commainferior=63201;e.commamonospace=65292;e.commareversedabovecmb=788;e.commareversedmod=701;e.commasmall=65104;e.commasuperior=63202;e.commaturnedabovecmb=786;e.commaturnedmod=699;e.compass=9788;e.congruent=8773;e.contourintegral=8750;e.control=8963;e.controlACK=6;e.controlBEL=7;e.controlBS=8;e.controlCAN=24;e.controlCR=13;e.controlDC1=17;e.controlDC2=18;e.controlDC3=19;e.controlDC4=20;e.controlDEL=127;e.controlDLE=16;e.controlEM=25;e.controlENQ=5;e.controlEOT=4;e.controlESC=27;e.controlETB=23;e.controlETX=3;e.controlFF=12;e.controlFS=28;e.controlGS=29;e.controlHT=9;e.controlLF=10;e.controlNAK=21;e.controlNULL=0;e.controlRS=30;e.controlSI=15;e.controlSO=14;e.controlSOT=2;e.controlSTX=1;e.controlSUB=26;e.controlSYN=22;e.controlUS=31;e.controlVT=11;e.copyright=169;e.copyrightsans=63721;e.copyrightserif=63193;e.cornerbracketleft=12300;e.cornerbracketlefthalfwidth=65378;e.cornerbracketleftvertical=65089;e.cornerbracketright=12301;e.cornerbracketrighthalfwidth=65379;e.cornerbracketrightvertical=65090;e.corporationsquare=13183;e.cosquare=13255;e.coverkgsquare=13254;e.cparen=9374;e.cruzeiro=8354;e.cstretched=663;e.curlyand=8911;e.curlyor=8910;e.currency=164;e.cyrBreve=63185;e.cyrFlex=63186;e.cyrbreve=63188;e.cyrflex=63189;e.d=100;e.daarmenian=1380;e.dabengali=2470;e.dadarabic=1590;e.dadeva=2342;e.dadfinalarabic=65214;e.dadinitialarabic=65215;e.dadmedialarabic=65216;e.dagesh=1468;e.dageshhebrew=1468;e.dagger=8224;e.daggerdbl=8225;e.dagujarati=2726;e.dagurmukhi=2598;e.dahiragana=12384;e.dakatakana=12480;e.dalarabic=1583;e.dalet=1491;e.daletdagesh=64307;e.daletdageshhebrew=64307;e.dalethebrew=1491;e.dalfinalarabic=65194;e.dammaarabic=1615;e.dammalowarabic=1615;e.dammatanaltonearabic=1612;e.dammatanarabic=1612;e.danda=2404;e.dargahebrew=1447;e.dargalefthebrew=1447;e.dasiapneumatacyrilliccmb=1157;e.dblGrave=63187;e.dblanglebracketleft=12298;e.dblanglebracketleftvertical=65085;e.dblanglebracketright=12299;e.dblanglebracketrightvertical=65086;e.dblarchinvertedbelowcmb=811;e.dblarrowleft=8660;e.dblarrowright=8658;e.dbldanda=2405;e.dblgrave=63190;e.dblgravecmb=783;e.dblintegral=8748;e.dbllowline=8215;e.dbllowlinecmb=819;e.dbloverlinecmb=831;e.dblprimemod=698;e.dblverticalbar=8214;e.dblverticallineabovecmb=782;e.dbopomofo=12553;e.dbsquare=13256;e.dcaron=271;e.dcedilla=7697;e.dcircle=9427;e.dcircumflexbelow=7699;e.dcroat=273;e.ddabengali=2465;e.ddadeva=2337;e.ddagujarati=2721;e.ddagurmukhi=2593;e.ddalarabic=1672;e.ddalfinalarabic=64393;e.dddhadeva=2396;e.ddhabengali=2466;e.ddhadeva=2338;e.ddhagujarati=2722;e.ddhagurmukhi=2594;e.ddotaccent=7691;e.ddotbelow=7693;e.decimalseparatorarabic=1643;e.decimalseparatorpersian=1643;e.decyrillic=1076;e.degree=176;e.dehihebrew=1453;e.dehiragana=12391;e.deicoptic=1007;e.dekatakana=12487;e.deleteleft=9003;e.deleteright=8998;e.delta=948;e.deltaturned=397;e.denominatorminusonenumeratorbengali=2552;e.dezh=676;e.dhabengali=2471;e.dhadeva=2343;e.dhagujarati=2727;e.dhagurmukhi=2599;e.dhook=599;e.dialytikatonos=901;e.dialytikatonoscmb=836;e.diamond=9830;e.diamondsuitwhite=9826;e.dieresis=168;e.dieresisacute=63191;e.dieresisbelowcmb=804;e.dieresiscmb=776;e.dieresisgrave=63192;e.dieresistonos=901;e.dihiragana=12386;e.dikatakana=12482;e.dittomark=12291;e.divide=247;e.divides=8739;e.divisionslash=8725;e.djecyrillic=1106;e.dkshade=9619;e.dlinebelow=7695;e.dlsquare=13207;e.dmacron=273;e.dmonospace=65348;e.dnblock=9604;e.dochadathai=3598;e.dodekthai=3604;e.dohiragana=12393;e.dokatakana=12489;e.dollar=36;e.dollarinferior=63203;e.dollarmonospace=65284;e.dollaroldstyle=63268;e.dollarsmall=65129;e.dollarsuperior=63204;e.dong=8363;e.dorusquare=13094;e.dotaccent=729;e.dotaccentcmb=775;e.dotbelowcmb=803;e.dotbelowcomb=803;e.dotkatakana=12539;e.dotlessi=305;e.dotlessj=63166;e.dotlessjstrokehook=644;e.dotmath=8901;e.dottedcircle=9676;e.doubleyodpatah=64287;e.doubleyodpatahhebrew=64287;e.downtackbelowcmb=798;e.downtackmod=725;e.dparen=9375;e.dsuperior=63211;e.dtail=598;e.dtopbar=396;e.duhiragana=12389;e.dukatakana=12485;e.dz=499;e.dzaltone=675;e.dzcaron=454;e.dzcurl=677;e.dzeabkhasiancyrillic=1249;e.dzecyrillic=1109;e.dzhecyrillic=1119;e.e=101;e.eacute=233;e.earth=9793;e.ebengali=2447;e.ebopomofo=12572;e.ebreve=277;e.ecandradeva=2317;e.ecandragujarati=2701;e.ecandravowelsigndeva=2373;e.ecandravowelsigngujarati=2757;e.ecaron=283;e.ecedillabreve=7709;e.echarmenian=1381;e.echyiwnarmenian=1415;e.ecircle=9428;e.ecircumflex=234;e.ecircumflexacute=7871;e.ecircumflexbelow=7705;e.ecircumflexdotbelow=7879;e.ecircumflexgrave=7873;e.ecircumflexhookabove=7875;e.ecircumflextilde=7877;e.ecyrillic=1108;e.edblgrave=517;e.edeva=2319;e.edieresis=235;e.edot=279;e.edotaccent=279;e.edotbelow=7865;e.eegurmukhi=2575;e.eematragurmukhi=2631;e.efcyrillic=1092;e.egrave=232;e.egujarati=2703;e.eharmenian=1383;e.ehbopomofo=12573;e.ehiragana=12360;e.ehookabove=7867;e.eibopomofo=12575;e.eight=56;e.eightarabic=1640;e.eightbengali=2542;e.eightcircle=9319;e.eightcircleinversesansserif=10129;e.eightdeva=2414;e.eighteencircle=9329;e.eighteenparen=9349;e.eighteenperiod=9369;e.eightgujarati=2798;e.eightgurmukhi=2670;e.eighthackarabic=1640;e.eighthangzhou=12328;e.eighthnotebeamed=9835;e.eightideographicparen=12839;e.eightinferior=8328;e.eightmonospace=65304;e.eightoldstyle=63288;e.eightparen=9339;e.eightperiod=9359;e.eightpersian=1784;e.eightroman=8567;e.eightsuperior=8312;e.eightthai=3672;e.einvertedbreve=519;e.eiotifiedcyrillic=1125;e.ekatakana=12456;e.ekatakanahalfwidth=65396;e.ekonkargurmukhi=2676;e.ekorean=12628;e.elcyrillic=1083;e.element=8712;e.elevencircle=9322;e.elevenparen=9342;e.elevenperiod=9362;e.elevenroman=8570;e.ellipsis=8230;e.ellipsisvertical=8942;e.emacron=275;e.emacronacute=7703;e.emacrongrave=7701;e.emcyrillic=1084;e.emdash=8212;e.emdashvertical=65073;e.emonospace=65349;e.emphasismarkarmenian=1371;e.emptyset=8709;e.enbopomofo=12579;e.encyrillic=1085;e.endash=8211;e.endashvertical=65074;e.endescendercyrillic=1187;e.eng=331;e.engbopomofo=12581;e.enghecyrillic=1189;e.enhookcyrillic=1224;e.enspace=8194;e.eogonek=281;e.eokorean=12627;e.eopen=603;e.eopenclosed=666;e.eopenreversed=604;e.eopenreversedclosed=606;e.eopenreversedhook=605;e.eparen=9376;e.epsilon=949;e.epsilontonos=941;e.equal=61;e.equalmonospace=65309;e.equalsmall=65126;e.equalsuperior=8316;e.equivalence=8801;e.erbopomofo=12582;e.ercyrillic=1088;e.ereversed=600;e.ereversedcyrillic=1101;e.escyrillic=1089;e.esdescendercyrillic=1195;e.esh=643;e.eshcurl=646;e.eshortdeva=2318;e.eshortvowelsigndeva=2374;e.eshreversedloop=426;e.eshsquatreversed=645;e.esmallhiragana=12359;e.esmallkatakana=12455;e.esmallkatakanahalfwidth=65386;e.estimated=8494;e.esuperior=63212;e.eta=951;e.etarmenian=1384;e.etatonos=942;e.eth=240;e.etilde=7869;e.etildebelow=7707;e.etnahtafoukhhebrew=1425;e.etnahtafoukhlefthebrew=1425;e.etnahtahebrew=1425;e.etnahtalefthebrew=1425;e.eturned=477;e.eukorean=12641;e.euro=8364;e.evowelsignbengali=2503;e.evowelsigndeva=2375;e.evowelsigngujarati=2759;e.exclam=33;e.exclamarmenian=1372;e.exclamdbl=8252;e.exclamdown=161;e.exclamdownsmall=63393;e.exclammonospace=65281;e.exclamsmall=63265;e.existential=8707;e.ezh=658;e.ezhcaron=495;e.ezhcurl=659;e.ezhreversed=441;e.ezhtail=442;e.f=102;e.fadeva=2398;e.fagurmukhi=2654;e.fahrenheit=8457;e.fathaarabic=1614;e.fathalowarabic=1614;e.fathatanarabic=1611;e.fbopomofo=12552;e.fcircle=9429;e.fdotaccent=7711;e.feharabic=1601;e.feharmenian=1414;e.fehfinalarabic=65234;e.fehinitialarabic=65235;e.fehmedialarabic=65236;e.feicoptic=997;e.female=9792;e.ff=64256;e.f_f=64256;e.ffi=64259;e.f_f_i=64259;e.ffl=64260;e.f_f_l=64260;e.fi=64257;e.f_i=64257;e.fifteencircle=9326;e.fifteenparen=9346;e.fifteenperiod=9366;e.figuredash=8210;e.filledbox=9632;e.filledrect=9644;e.finalkaf=1498;e.finalkafdagesh=64314;e.finalkafdageshhebrew=64314;e.finalkafhebrew=1498;e.finalmem=1501;e.finalmemhebrew=1501;e.finalnun=1503;e.finalnunhebrew=1503;e.finalpe=1507;e.finalpehebrew=1507;e.finaltsadi=1509;e.finaltsadihebrew=1509;e.firsttonechinese=713;e.fisheye=9673;e.fitacyrillic=1139;e.five=53;e.fivearabic=1637;e.fivebengali=2539;e.fivecircle=9316;e.fivecircleinversesansserif=10126;e.fivedeva=2411;e.fiveeighths=8541;e.fivegujarati=2795;e.fivegurmukhi=2667;e.fivehackarabic=1637;e.fivehangzhou=12325;e.fiveideographicparen=12836;e.fiveinferior=8325;e.fivemonospace=65301;e.fiveoldstyle=63285;e.fiveparen=9336;e.fiveperiod=9356;e.fivepersian=1781;e.fiveroman=8564;e.fivesuperior=8309;e.fivethai=3669;e.fl=64258;e.f_l=64258;e.florin=402;e.fmonospace=65350;e.fmsquare=13209;e.fofanthai=3615;e.fofathai=3613;e.fongmanthai=3663;e.forall=8704;e.four=52;e.fourarabic=1636;e.fourbengali=2538;e.fourcircle=9315;e.fourcircleinversesansserif=10125;e.fourdeva=2410;e.fourgujarati=2794;e.fourgurmukhi=2666;e.fourhackarabic=1636;e.fourhangzhou=12324;e.fourideographicparen=12835;e.fourinferior=8324;e.fourmonospace=65300;e.fournumeratorbengali=2551;e.fouroldstyle=63284;e.fourparen=9335;e.fourperiod=9355;e.fourpersian=1780;e.fourroman=8563;e.foursuperior=8308;e.fourteencircle=9325;e.fourteenparen=9345;e.fourteenperiod=9365;e.fourthai=3668;e.fourthtonechinese=715;e.fparen=9377;e.fraction=8260;e.franc=8355;e.g=103;e.gabengali=2455;e.gacute=501;e.gadeva=2327;e.gafarabic=1711;e.gaffinalarabic=64403;e.gafinitialarabic=64404;e.gafmedialarabic=64405;e.gagujarati=2711;e.gagurmukhi=2583;e.gahiragana=12364;e.gakatakana=12460;e.gamma=947;e.gammalatinsmall=611;e.gammasuperior=736;e.gangiacoptic=1003;e.gbopomofo=12557;e.gbreve=287;e.gcaron=487;e.gcedilla=291;e.gcircle=9430;e.gcircumflex=285;e.gcommaaccent=291;e.gdot=289;e.gdotaccent=289;e.gecyrillic=1075;e.gehiragana=12370;e.gekatakana=12466;e.geometricallyequal=8785;e.gereshaccenthebrew=1436;e.gereshhebrew=1523;e.gereshmuqdamhebrew=1437;e.germandbls=223;e.gershayimaccenthebrew=1438;e.gershayimhebrew=1524;e.getamark=12307;e.ghabengali=2456;e.ghadarmenian=1394;e.ghadeva=2328;e.ghagujarati=2712;e.ghagurmukhi=2584;e.ghainarabic=1594;e.ghainfinalarabic=65230;e.ghaininitialarabic=65231;e.ghainmedialarabic=65232;e.ghemiddlehookcyrillic=1173;e.ghestrokecyrillic=1171;e.gheupturncyrillic=1169;e.ghhadeva=2394;e.ghhagurmukhi=2650;e.ghook=608;e.ghzsquare=13203;e.gihiragana=12366;e.gikatakana=12462;e.gimarmenian=1379;e.gimel=1490;e.gimeldagesh=64306;e.gimeldageshhebrew=64306;e.gimelhebrew=1490;e.gjecyrillic=1107;e.glottalinvertedstroke=446;e.glottalstop=660;e.glottalstopinverted=662;e.glottalstopmod=704;e.glottalstopreversed=661;e.glottalstopreversedmod=705;e.glottalstopreversedsuperior=740;e.glottalstopstroke=673;e.glottalstopstrokereversed=674;e.gmacron=7713;e.gmonospace=65351;e.gohiragana=12372;e.gokatakana=12468;e.gparen=9378;e.gpasquare=13228;e.gradient=8711;e.grave=96;e.gravebelowcmb=790;e.gravecmb=768;e.gravecomb=768;e.gravedeva=2387;e.gravelowmod=718;e.gravemonospace=65344;e.gravetonecmb=832;e.greater=62;e.greaterequal=8805;e.greaterequalorless=8923;e.greatermonospace=65310;e.greaterorequivalent=8819;e.greaterorless=8823;e.greateroverequal=8807;e.greatersmall=65125;e.gscript=609;e.gstroke=485;e.guhiragana=12368;e.guillemotleft=171;e.guillemotright=187;e.guilsinglleft=8249;e.guilsinglright=8250;e.gukatakana=12464;e.guramusquare=13080;e.gysquare=13257;e.h=104;e.haabkhasiancyrillic=1193;e.haaltonearabic=1729;e.habengali=2489;e.hadescendercyrillic=1203;e.hadeva=2361;e.hagujarati=2745;e.hagurmukhi=2617;e.haharabic=1581;e.hahfinalarabic=65186;e.hahinitialarabic=65187;e.hahiragana=12399;e.hahmedialarabic=65188;e.haitusquare=13098;e.hakatakana=12495;e.hakatakanahalfwidth=65418;e.halantgurmukhi=2637;e.hamzaarabic=1569;e.hamzalowarabic=1569;e.hangulfiller=12644;e.hardsigncyrillic=1098;e.harpoonleftbarbup=8636;e.harpoonrightbarbup=8640;e.hasquare=13258;e.hatafpatah=1458;e.hatafpatah16=1458;e.hatafpatah23=1458;e.hatafpatah2f=1458;e.hatafpatahhebrew=1458;e.hatafpatahnarrowhebrew=1458;e.hatafpatahquarterhebrew=1458;e.hatafpatahwidehebrew=1458;e.hatafqamats=1459;e.hatafqamats1b=1459;e.hatafqamats28=1459;e.hatafqamats34=1459;e.hatafqamatshebrew=1459;e.hatafqamatsnarrowhebrew=1459;e.hatafqamatsquarterhebrew=1459;e.hatafqamatswidehebrew=1459;e.hatafsegol=1457;e.hatafsegol17=1457;e.hatafsegol24=1457;e.hatafsegol30=1457;e.hatafsegolhebrew=1457;e.hatafsegolnarrowhebrew=1457;e.hatafsegolquarterhebrew=1457;e.hatafsegolwidehebrew=1457;e.hbar=295;e.hbopomofo=12559;e.hbrevebelow=7723;e.hcedilla=7721;e.hcircle=9431;e.hcircumflex=293;e.hdieresis=7719;e.hdotaccent=7715;e.hdotbelow=7717;e.he=1492;e.heart=9829;e.heartsuitblack=9829;e.heartsuitwhite=9825;e.hedagesh=64308;e.hedageshhebrew=64308;e.hehaltonearabic=1729;e.heharabic=1607;e.hehebrew=1492;e.hehfinalaltonearabic=64423;e.hehfinalalttwoarabic=65258;e.hehfinalarabic=65258;e.hehhamzaabovefinalarabic=64421;e.hehhamzaaboveisolatedarabic=64420;e.hehinitialaltonearabic=64424;e.hehinitialarabic=65259;e.hehiragana=12408;e.hehmedialaltonearabic=64425;e.hehmedialarabic=65260;e.heiseierasquare=13179;e.hekatakana=12504;e.hekatakanahalfwidth=65421;e.hekutaarusquare=13110;e.henghook=615;e.herutusquare=13113;e.het=1495;e.hethebrew=1495;e.hhook=614;e.hhooksuperior=689;e.hieuhacirclekorean=12923;e.hieuhaparenkorean=12827;e.hieuhcirclekorean=12909;e.hieuhkorean=12622;e.hieuhparenkorean=12813;e.hihiragana=12402;e.hikatakana=12498;e.hikatakanahalfwidth=65419;e.hiriq=1460;e.hiriq14=1460;e.hiriq21=1460;e.hiriq2d=1460;e.hiriqhebrew=1460;e.hiriqnarrowhebrew=1460;e.hiriqquarterhebrew=1460;e.hiriqwidehebrew=1460;e.hlinebelow=7830;e.hmonospace=65352;e.hoarmenian=1392;e.hohipthai=3627;e.hohiragana=12411;e.hokatakana=12507;e.hokatakanahalfwidth=65422;e.holam=1465;e.holam19=1465;e.holam26=1465;e.holam32=1465;e.holamhebrew=1465;e.holamnarrowhebrew=1465;e.holamquarterhebrew=1465;e.holamwidehebrew=1465;e.honokhukthai=3630;e.hookabovecomb=777;e.hookcmb=777;e.hookpalatalizedbelowcmb=801;e.hookretroflexbelowcmb=802;e.hoonsquare=13122;e.horicoptic=1001;e.horizontalbar=8213;e.horncmb=795;e.hotsprings=9832;e.house=8962;e.hparen=9379;e.hsuperior=688;e.hturned=613;e.huhiragana=12405;e.huiitosquare=13107;e.hukatakana=12501;e.hukatakanahalfwidth=65420;e.hungarumlaut=733;e.hungarumlautcmb=779;e.hv=405;e.hyphen=45;e.hypheninferior=63205;e.hyphenmonospace=65293;e.hyphensmall=65123;e.hyphensuperior=63206;e.hyphentwo=8208;e.i=105;e.iacute=237;e.iacyrillic=1103;e.ibengali=2439;e.ibopomofo=12583;e.ibreve=301;e.icaron=464;e.icircle=9432;e.icircumflex=238;e.icyrillic=1110;e.idblgrave=521;e.ideographearthcircle=12943;e.ideographfirecircle=12939;e.ideographicallianceparen=12863;e.ideographiccallparen=12858;e.ideographiccentrecircle=12965;e.ideographicclose=12294;e.ideographiccomma=12289;e.ideographiccommaleft=65380;e.ideographiccongratulationparen=12855;e.ideographiccorrectcircle=12963;e.ideographicearthparen=12847;e.ideographicenterpriseparen=12861;e.ideographicexcellentcircle=12957;e.ideographicfestivalparen=12864;e.ideographicfinancialcircle=12950;e.ideographicfinancialparen=12854;e.ideographicfireparen=12843;e.ideographichaveparen=12850;e.ideographichighcircle=12964;e.ideographiciterationmark=12293;e.ideographiclaborcircle=12952;e.ideographiclaborparen=12856;e.ideographicleftcircle=12967;e.ideographiclowcircle=12966;e.ideographicmedicinecircle=12969;e.ideographicmetalparen=12846;e.ideographicmoonparen=12842;e.ideographicnameparen=12852;e.ideographicperiod=12290;e.ideographicprintcircle=12958;e.ideographicreachparen=12867;e.ideographicrepresentparen=12857;e.ideographicresourceparen=12862;e.ideographicrightcircle=12968;e.ideographicsecretcircle=12953;e.ideographicselfparen=12866;e.ideographicsocietyparen=12851;e.ideographicspace=12288;e.ideographicspecialparen=12853;e.ideographicstockparen=12849;e.ideographicstudyparen=12859;e.ideographicsunparen=12848;e.ideographicsuperviseparen=12860;e.ideographicwaterparen=12844;e.ideographicwoodparen=12845;e.ideographiczero=12295;e.ideographmetalcircle=12942;e.ideographmooncircle=12938;e.ideographnamecircle=12948;e.ideographsuncircle=12944;e.ideographwatercircle=12940;e.ideographwoodcircle=12941;e.ideva=2311;e.idieresis=239;e.idieresisacute=7727;e.idieresiscyrillic=1253;e.idotbelow=7883;e.iebrevecyrillic=1239;e.iecyrillic=1077;e.ieungacirclekorean=12917;e.ieungaparenkorean=12821;e.ieungcirclekorean=12903;e.ieungkorean=12615;e.ieungparenkorean=12807;e.igrave=236;e.igujarati=2695;e.igurmukhi=2567;e.ihiragana=12356;e.ihookabove=7881;e.iibengali=2440;e.iicyrillic=1080;e.iideva=2312;e.iigujarati=2696;e.iigurmukhi=2568;e.iimatragurmukhi=2624;e.iinvertedbreve=523;e.iishortcyrillic=1081;e.iivowelsignbengali=2496;e.iivowelsigndeva=2368;e.iivowelsigngujarati=2752;e.ij=307;e.ikatakana=12452;e.ikatakanahalfwidth=65394;e.ikorean=12643;e.ilde=732;e.iluyhebrew=1452;e.imacron=299;e.imacroncyrillic=1251;e.imageorapproximatelyequal=8787;e.imatragurmukhi=2623;e.imonospace=65353;e.increment=8710;e.infinity=8734;e.iniarmenian=1387;e.integral=8747;e.integralbottom=8993;e.integralbt=8993;e.integralex=63733;e.integraltop=8992;e.integraltp=8992;e.intersection=8745;e.intisquare=13061;e.invbullet=9688;e.invcircle=9689;e.invsmileface=9787;e.iocyrillic=1105;e.iogonek=303;e.iota=953;e.iotadieresis=970;e.iotadieresistonos=912;e.iotalatin=617;e.iotatonos=943;e.iparen=9380;e.irigurmukhi=2674;e.ismallhiragana=12355;e.ismallkatakana=12451;e.ismallkatakanahalfwidth=65384;e.issharbengali=2554;e.istroke=616;e.isuperior=63213;e.iterationhiragana=12445;e.iterationkatakana=12541;e.itilde=297;e.itildebelow=7725;e.iubopomofo=12585;e.iucyrillic=1102;e.ivowelsignbengali=2495;e.ivowelsigndeva=2367;e.ivowelsigngujarati=2751;e.izhitsacyrillic=1141;e.izhitsadblgravecyrillic=1143;e.j=106;e.jaarmenian=1393;e.jabengali=2460;e.jadeva=2332;e.jagujarati=2716;e.jagurmukhi=2588;e.jbopomofo=12560;e.jcaron=496;e.jcircle=9433;e.jcircumflex=309;e.jcrossedtail=669;e.jdotlessstroke=607;e.jecyrillic=1112;e.jeemarabic=1580;e.jeemfinalarabic=65182;e.jeeminitialarabic=65183;e.jeemmedialarabic=65184;e.jeharabic=1688;e.jehfinalarabic=64395;e.jhabengali=2461;e.jhadeva=2333;e.jhagujarati=2717;e.jhagurmukhi=2589;e.jheharmenian=1403;e.jis=12292;e.jmonospace=65354;e.jparen=9381;e.jsuperior=690;e.k=107;e.kabashkircyrillic=1185;e.kabengali=2453;e.kacute=7729;e.kacyrillic=1082;e.kadescendercyrillic=1179;e.kadeva=2325;e.kaf=1499;e.kafarabic=1603;e.kafdagesh=64315;e.kafdageshhebrew=64315;e.kaffinalarabic=65242;e.kafhebrew=1499;e.kafinitialarabic=65243;e.kafmedialarabic=65244;e.kafrafehebrew=64333;e.kagujarati=2709;e.kagurmukhi=2581;e.kahiragana=12363;e.kahookcyrillic=1220;e.kakatakana=12459;e.kakatakanahalfwidth=65398;e.kappa=954;e.kappasymbolgreek=1008;e.kapyeounmieumkorean=12657;e.kapyeounphieuphkorean=12676;e.kapyeounpieupkorean=12664;e.kapyeounssangpieupkorean=12665;e.karoriisquare=13069;e.kashidaautoarabic=1600;e.kashidaautonosidebearingarabic=1600;e.kasmallkatakana=12533;e.kasquare=13188;e.kasraarabic=1616;e.kasratanarabic=1613;e.kastrokecyrillic=1183;e.katahiraprolongmarkhalfwidth=65392;e.kaverticalstrokecyrillic=1181;e.kbopomofo=12558;e.kcalsquare=13193;e.kcaron=489;e.kcedilla=311;e.kcircle=9434;e.kcommaaccent=311;e.kdotbelow=7731;e.keharmenian=1412;e.kehiragana=12369;e.kekatakana=12465;e.kekatakanahalfwidth=65401;e.kenarmenian=1391;e.kesmallkatakana=12534;e.kgreenlandic=312;e.khabengali=2454;e.khacyrillic=1093;e.khadeva=2326;e.khagujarati=2710;e.khagurmukhi=2582;e.khaharabic=1582;e.khahfinalarabic=65190;e.khahinitialarabic=65191;e.khahmedialarabic=65192;e.kheicoptic=999;e.khhadeva=2393;e.khhagurmukhi=2649;e.khieukhacirclekorean=12920;e.khieukhaparenkorean=12824;e.khieukhcirclekorean=12906;e.khieukhkorean=12619;e.khieukhparenkorean=12810;e.khokhaithai=3586;e.khokhonthai=3589;e.khokhuatthai=3587;e.khokhwaithai=3588;e.khomutthai=3675;e.khook=409;e.khorakhangthai=3590;e.khzsquare=13201;e.kihiragana=12365;e.kikatakana=12461;e.kikatakanahalfwidth=65399;e.kiroguramusquare=13077;e.kiromeetorusquare=13078;e.kirosquare=13076;e.kiyeokacirclekorean=12910;e.kiyeokaparenkorean=12814;e.kiyeokcirclekorean=12896;e.kiyeokkorean=12593;e.kiyeokparenkorean=12800;e.kiyeoksioskorean=12595;e.kjecyrillic=1116;e.klinebelow=7733;e.klsquare=13208;e.kmcubedsquare=13222;e.kmonospace=65355;e.kmsquaredsquare=13218;e.kohiragana=12371;e.kohmsquare=13248;e.kokaithai=3585;e.kokatakana=12467;e.kokatakanahalfwidth=65402;e.kooposquare=13086;e.koppacyrillic=1153;e.koreanstandardsymbol=12927;e.koroniscmb=835;e.kparen=9382;e.kpasquare=13226;e.ksicyrillic=1135;e.ktsquare=13263;e.kturned=670;e.kuhiragana=12367;e.kukatakana=12463;e.kukatakanahalfwidth=65400;e.kvsquare=13240;e.kwsquare=13246;e.l=108;e.labengali=2482;e.lacute=314;e.ladeva=2354;e.lagujarati=2738;e.lagurmukhi=2610;e.lakkhangyaothai=3653;e.lamaleffinalarabic=65276;e.lamalefhamzaabovefinalarabic=65272;e.lamalefhamzaaboveisolatedarabic=65271;e.lamalefhamzabelowfinalarabic=65274;e.lamalefhamzabelowisolatedarabic=65273;e.lamalefisolatedarabic=65275;e.lamalefmaddaabovefinalarabic=65270;e.lamalefmaddaaboveisolatedarabic=65269;e.lamarabic=1604;e.lambda=955;e.lambdastroke=411;e.lamed=1500;e.lameddagesh=64316;e.lameddageshhebrew=64316;e.lamedhebrew=1500;e.lamfinalarabic=65246;e.lamhahinitialarabic=64714;e.laminitialarabic=65247;e.lamjeeminitialarabic=64713;e.lamkhahinitialarabic=64715;e.lamlamhehisolatedarabic=65010;e.lammedialarabic=65248;e.lammeemhahinitialarabic=64904;e.lammeeminitialarabic=64716;e.largecircle=9711;e.lbar=410;e.lbelt=620;e.lbopomofo=12556;e.lcaron=318;e.lcedilla=316;e.lcircle=9435;e.lcircumflexbelow=7741;e.lcommaaccent=316;e.ldot=320;e.ldotaccent=320;e.ldotbelow=7735;e.ldotbelowmacron=7737;e.leftangleabovecmb=794;e.lefttackbelowcmb=792;e.less=60;e.lessequal=8804;e.lessequalorgreater=8922;e.lessmonospace=65308;e.lessorequivalent=8818;e.lessorgreater=8822;e.lessoverequal=8806;e.lesssmall=65124;e.lezh=622;e.lfblock=9612;e.lhookretroflex=621;e.lira=8356;e.liwnarmenian=1388;e.lj=457;e.ljecyrillic=1113;e.ll=63168;e.lladeva=2355;e.llagujarati=2739;e.llinebelow=7739;e.llladeva=2356;e.llvocalicbengali=2529;e.llvocalicdeva=2401;e.llvocalicvowelsignbengali=2531;e.llvocalicvowelsigndeva=2403;e.lmiddletilde=619;e.lmonospace=65356;e.lmsquare=13264;e.lochulathai=3628;e.logicaland=8743;e.logicalnot=172;e.logicalnotreversed=8976;e.logicalor=8744;e.lolingthai=3621;e.longs=383;e.lowlinecenterline=65102;e.lowlinecmb=818;e.lowlinedashed=65101;e.lozenge=9674;e.lparen=9383;e.lslash=322;e.lsquare=8467;e.lsuperior=63214;e.ltshade=9617;e.luthai=3622;e.lvocalicbengali=2444;e.lvocalicdeva=2316;e.lvocalicvowelsignbengali=2530;e.lvocalicvowelsigndeva=2402;e.lxsquare=13267;e.m=109;e.mabengali=2478;e.macron=175;e.macronbelowcmb=817;e.macroncmb=772;e.macronlowmod=717;e.macronmonospace=65507;e.macute=7743;e.madeva=2350;e.magujarati=2734;e.magurmukhi=2606;e.mahapakhhebrew=1444;e.mahapakhlefthebrew=1444;e.mahiragana=12414;e.maichattawalowleftthai=63637;e.maichattawalowrightthai=63636;e.maichattawathai=3659;e.maichattawaupperleftthai=63635;e.maieklowleftthai=63628;e.maieklowrightthai=63627;e.maiekthai=3656;e.maiekupperleftthai=63626;e.maihanakatleftthai=63620;e.maihanakatthai=3633;e.maitaikhuleftthai=63625;e.maitaikhuthai=3655;e.maitholowleftthai=63631;e.maitholowrightthai=63630;e.maithothai=3657;e.maithoupperleftthai=63629;e.maitrilowleftthai=63634;e.maitrilowrightthai=63633;e.maitrithai=3658;e.maitriupperleftthai=63632;e.maiyamokthai=3654;e.makatakana=12510;e.makatakanahalfwidth=65423;e.male=9794;e.mansyonsquare=13127;e.maqafhebrew=1470;e.mars=9794;e.masoracirclehebrew=1455;e.masquare=13187;e.mbopomofo=12551;e.mbsquare=13268;e.mcircle=9436;e.mcubedsquare=13221;e.mdotaccent=7745;e.mdotbelow=7747;e.meemarabic=1605;e.meemfinalarabic=65250;e.meeminitialarabic=65251;e.meemmedialarabic=65252;e.meemmeeminitialarabic=64721;e.meemmeemisolatedarabic=64584;e.meetorusquare=13133;e.mehiragana=12417;e.meizierasquare=13182;e.mekatakana=12513;e.mekatakanahalfwidth=65426;e.mem=1502;e.memdagesh=64318;e.memdageshhebrew=64318;e.memhebrew=1502;e.menarmenian=1396;e.merkhahebrew=1445;e.merkhakefulahebrew=1446;e.merkhakefulalefthebrew=1446;e.merkhalefthebrew=1445;e.mhook=625;e.mhzsquare=13202;e.middledotkatakanahalfwidth=65381;e.middot=183;e.mieumacirclekorean=12914;e.mieumaparenkorean=12818;e.mieumcirclekorean=12900;e.mieumkorean=12609;e.mieumpansioskorean=12656;e.mieumparenkorean=12804;e.mieumpieupkorean=12654;e.mieumsioskorean=12655;e.mihiragana=12415;e.mikatakana=12511;e.mikatakanahalfwidth=65424;e.minus=8722;e.minusbelowcmb=800;e.minuscircle=8854;e.minusmod=727;e.minusplus=8723;e.minute=8242;e.miribaarusquare=13130;e.mirisquare=13129;e.mlonglegturned=624;e.mlsquare=13206;e.mmcubedsquare=13219;e.mmonospace=65357;e.mmsquaredsquare=13215;e.mohiragana=12418;e.mohmsquare=13249;e.mokatakana=12514;e.mokatakanahalfwidth=65427;e.molsquare=13270;e.momathai=3617;e.moverssquare=13223;e.moverssquaredsquare=13224;e.mparen=9384;e.mpasquare=13227;e.mssquare=13235;e.msuperior=63215;e.mturned=623;e.mu=181;e.mu1=181;e.muasquare=13186;e.muchgreater=8811;e.muchless=8810;e.mufsquare=13196;e.mugreek=956;e.mugsquare=13197;e.muhiragana=12416;e.mukatakana=12512;e.mukatakanahalfwidth=65425;e.mulsquare=13205;e.multiply=215;e.mumsquare=13211;e.munahhebrew=1443;e.munahlefthebrew=1443;e.musicalnote=9834;e.musicalnotedbl=9835;e.musicflatsign=9837;e.musicsharpsign=9839;e.mussquare=13234;e.muvsquare=13238;e.muwsquare=13244;e.mvmegasquare=13241;e.mvsquare=13239;e.mwmegasquare=13247;e.mwsquare=13245;e.n=110;e.nabengali=2472;e.nabla=8711;e.nacute=324;e.nadeva=2344;e.nagujarati=2728;e.nagurmukhi=2600;e.nahiragana=12394;e.nakatakana=12490;e.nakatakanahalfwidth=65413;e.napostrophe=329;e.nasquare=13185;e.nbopomofo=12555;e.nbspace=160;e.ncaron=328;e.ncedilla=326;e.ncircle=9437;e.ncircumflexbelow=7755;e.ncommaaccent=326;e.ndotaccent=7749;e.ndotbelow=7751;e.nehiragana=12397;e.nekatakana=12493;e.nekatakanahalfwidth=65416;e.newsheqelsign=8362;e.nfsquare=13195;e.ngabengali=2457;e.ngadeva=2329;e.ngagujarati=2713;e.ngagurmukhi=2585;e.ngonguthai=3591;e.nhiragana=12435;e.nhookleft=626;e.nhookretroflex=627;e.nieunacirclekorean=12911;e.nieunaparenkorean=12815;e.nieuncieuckorean=12597;e.nieuncirclekorean=12897;e.nieunhieuhkorean=12598;e.nieunkorean=12596;e.nieunpansioskorean=12648;e.nieunparenkorean=12801;e.nieunsioskorean=12647;e.nieuntikeutkorean=12646;e.nihiragana=12395;e.nikatakana=12491;e.nikatakanahalfwidth=65414;e.nikhahitleftthai=63641;e.nikhahitthai=3661;e.nine=57;e.ninearabic=1641;e.ninebengali=2543;e.ninecircle=9320;e.ninecircleinversesansserif=10130;e.ninedeva=2415;e.ninegujarati=2799;e.ninegurmukhi=2671;e.ninehackarabic=1641;e.ninehangzhou=12329;e.nineideographicparen=12840;e.nineinferior=8329;e.ninemonospace=65305;e.nineoldstyle=63289;e.nineparen=9340;e.nineperiod=9360;e.ninepersian=1785;e.nineroman=8568;e.ninesuperior=8313;e.nineteencircle=9330;e.nineteenparen=9350;e.nineteenperiod=9370;e.ninethai=3673;e.nj=460;e.njecyrillic=1114;e.nkatakana=12531;e.nkatakanahalfwidth=65437;e.nlegrightlong=414;e.nlinebelow=7753;e.nmonospace=65358;e.nmsquare=13210;e.nnabengali=2467;e.nnadeva=2339;e.nnagujarati=2723;e.nnagurmukhi=2595;e.nnnadeva=2345;e.nohiragana=12398;e.nokatakana=12494;e.nokatakanahalfwidth=65417;e.nonbreakingspace=160;e.nonenthai=3603;e.nonuthai=3609;e.noonarabic=1606;e.noonfinalarabic=65254;e.noonghunnaarabic=1722;e.noonghunnafinalarabic=64415;e.nooninitialarabic=65255;e.noonjeeminitialarabic=64722;e.noonjeemisolatedarabic=64587;e.noonmedialarabic=65256;e.noonmeeminitialarabic=64725;e.noonmeemisolatedarabic=64590;e.noonnoonfinalarabic=64653;e.notcontains=8716;e.notelement=8713;e.notelementof=8713;e.notequal=8800;e.notgreater=8815;e.notgreaternorequal=8817;e.notgreaternorless=8825;e.notidentical=8802;e.notless=8814;e.notlessnorequal=8816;e.notparallel=8742;e.notprecedes=8832;e.notsubset=8836;e.notsucceeds=8833;e.notsuperset=8837;e.nowarmenian=1398;e.nparen=9385;e.nssquare=13233;e.nsuperior=8319;e.ntilde=241;e.nu=957;e.nuhiragana=12396;e.nukatakana=12492;e.nukatakanahalfwidth=65415;e.nuktabengali=2492;e.nuktadeva=2364;e.nuktagujarati=2748;e.nuktagurmukhi=2620;e.numbersign=35;e.numbersignmonospace=65283;e.numbersignsmall=65119;e.numeralsigngreek=884;e.numeralsignlowergreek=885;e.numero=8470;e.nun=1504;e.nundagesh=64320;e.nundageshhebrew=64320;e.nunhebrew=1504;e.nvsquare=13237;e.nwsquare=13243;e.nyabengali=2462;e.nyadeva=2334;e.nyagujarati=2718;e.nyagurmukhi=2590;e.o=111;e.oacute=243;e.oangthai=3629;e.obarred=629;e.obarredcyrillic=1257;e.obarreddieresiscyrillic=1259;e.obengali=2451;e.obopomofo=12571;e.obreve=335;e.ocandradeva=2321;e.ocandragujarati=2705;e.ocandravowelsigndeva=2377;e.ocandravowelsigngujarati=2761;e.ocaron=466;e.ocircle=9438;e.ocircumflex=244;e.ocircumflexacute=7889;e.ocircumflexdotbelow=7897;e.ocircumflexgrave=7891;e.ocircumflexhookabove=7893;e.ocircumflextilde=7895;e.ocyrillic=1086;e.odblacute=337;e.odblgrave=525;e.odeva=2323;e.odieresis=246;e.odieresiscyrillic=1255;e.odotbelow=7885;e.oe=339;e.oekorean=12634;e.ogonek=731;e.ogonekcmb=808;e.ograve=242;e.ogujarati=2707;e.oharmenian=1413;e.ohiragana=12362;e.ohookabove=7887;e.ohorn=417;e.ohornacute=7899;e.ohorndotbelow=7907;e.ohorngrave=7901;e.ohornhookabove=7903;e.ohorntilde=7905;e.ohungarumlaut=337;e.oi=419;e.oinvertedbreve=527;e.okatakana=12458;e.okatakanahalfwidth=65397;e.okorean=12631;e.olehebrew=1451;e.omacron=333;e.omacronacute=7763;e.omacrongrave=7761;e.omdeva=2384;e.omega=969;e.omega1=982;e.omegacyrillic=1121;e.omegalatinclosed=631;e.omegaroundcyrillic=1147;e.omegatitlocyrillic=1149;e.omegatonos=974;e.omgujarati=2768;e.omicron=959;e.omicrontonos=972;e.omonospace=65359;e.one=49;e.onearabic=1633;e.onebengali=2535;e.onecircle=9312;e.onecircleinversesansserif=10122;e.onedeva=2407;e.onedotenleader=8228;e.oneeighth=8539;e.onefitted=63196;e.onegujarati=2791;e.onegurmukhi=2663;e.onehackarabic=1633;e.onehalf=189;e.onehangzhou=12321;e.oneideographicparen=12832;e.oneinferior=8321;e.onemonospace=65297;e.onenumeratorbengali=2548;e.oneoldstyle=63281;e.oneparen=9332;e.oneperiod=9352;e.onepersian=1777;e.onequarter=188;e.oneroman=8560;e.onesuperior=185;e.onethai=3665;e.onethird=8531;e.oogonek=491;e.oogonekmacron=493;e.oogurmukhi=2579;e.oomatragurmukhi=2635;e.oopen=596;e.oparen=9386;e.openbullet=9702;e.option=8997;e.ordfeminine=170;e.ordmasculine=186;e.orthogonal=8735;e.oshortdeva=2322;e.oshortvowelsigndeva=2378;e.oslash=248;e.oslashacute=511;e.osmallhiragana=12361;e.osmallkatakana=12457;e.osmallkatakanahalfwidth=65387;e.ostrokeacute=511;e.osuperior=63216;e.otcyrillic=1151;e.otilde=245;e.otildeacute=7757;e.otildedieresis=7759;e.oubopomofo=12577;e.overline=8254;e.overlinecenterline=65098;e.overlinecmb=773;e.overlinedashed=65097;e.overlinedblwavy=65100;e.overlinewavy=65099;e.overscore=175;e.ovowelsignbengali=2507;e.ovowelsigndeva=2379;e.ovowelsigngujarati=2763;e.p=112;e.paampssquare=13184;e.paasentosquare=13099;e.pabengali=2474;e.pacute=7765;e.padeva=2346;e.pagedown=8671;e.pageup=8670;e.pagujarati=2730;e.pagurmukhi=2602;e.pahiragana=12401;e.paiyannoithai=3631;e.pakatakana=12497;e.palatalizationcyrilliccmb=1156;e.palochkacyrillic=1216;e.pansioskorean=12671;e.paragraph=182;e.parallel=8741;e.parenleft=40;e.parenleftaltonearabic=64830;e.parenleftbt=63725;e.parenleftex=63724;e.parenleftinferior=8333;e.parenleftmonospace=65288;e.parenleftsmall=65113;e.parenleftsuperior=8317;e.parenlefttp=63723;e.parenleftvertical=65077;e.parenright=41;e.parenrightaltonearabic=64831;e.parenrightbt=63736;e.parenrightex=63735;e.parenrightinferior=8334;e.parenrightmonospace=65289;e.parenrightsmall=65114;e.parenrightsuperior=8318;e.parenrighttp=63734;e.parenrightvertical=65078;e.partialdiff=8706;e.paseqhebrew=1472;e.pashtahebrew=1433;e.pasquare=13225;e.patah=1463;e.patah11=1463;e.patah1d=1463;e.patah2a=1463;e.patahhebrew=1463;e.patahnarrowhebrew=1463;e.patahquarterhebrew=1463;e.patahwidehebrew=1463;e.pazerhebrew=1441;e.pbopomofo=12550;e.pcircle=9439;e.pdotaccent=7767;e.pe=1508;e.pecyrillic=1087;e.pedagesh=64324;e.pedageshhebrew=64324;e.peezisquare=13115;e.pefinaldageshhebrew=64323;e.peharabic=1662;e.peharmenian=1402;e.pehebrew=1508;e.pehfinalarabic=64343;e.pehinitialarabic=64344;e.pehiragana=12410;e.pehmedialarabic=64345;e.pekatakana=12506;e.pemiddlehookcyrillic=1191;e.perafehebrew=64334;e.percent=37;e.percentarabic=1642;e.percentmonospace=65285;e.percentsmall=65130;e.period=46;e.periodarmenian=1417;e.periodcentered=183;e.periodhalfwidth=65377;e.periodinferior=63207;e.periodmonospace=65294;e.periodsmall=65106;e.periodsuperior=63208;e.perispomenigreekcmb=834;e.perpendicular=8869;e.perthousand=8240;e.peseta=8359;e.pfsquare=13194;e.phabengali=2475;e.phadeva=2347;e.phagujarati=2731;e.phagurmukhi=2603;e.phi=966;e.phi1=981;e.phieuphacirclekorean=12922;e.phieuphaparenkorean=12826;e.phieuphcirclekorean=12908;e.phieuphkorean=12621;e.phieuphparenkorean=12812;e.philatin=632;e.phinthuthai=3642;e.phisymbolgreek=981;e.phook=421;e.phophanthai=3614;e.phophungthai=3612;e.phosamphaothai=3616;e.pi=960;e.pieupacirclekorean=12915;e.pieupaparenkorean=12819;e.pieupcieuckorean=12662;e.pieupcirclekorean=12901;e.pieupkiyeokkorean=12658;e.pieupkorean=12610;e.pieupparenkorean=12805;e.pieupsioskiyeokkorean=12660;e.pieupsioskorean=12612;e.pieupsiostikeutkorean=12661;e.pieupthieuthkorean=12663;e.pieuptikeutkorean=12659;e.pihiragana=12404;e.pikatakana=12500;e.pisymbolgreek=982;e.piwrarmenian=1411;e.planckover2pi=8463;e.planckover2pi1=8463;e.plus=43;e.plusbelowcmb=799;e.pluscircle=8853;e.plusminus=177;e.plusmod=726;e.plusmonospace=65291;e.plussmall=65122;e.plussuperior=8314;e.pmonospace=65360;e.pmsquare=13272;e.pohiragana=12413;e.pointingindexdownwhite=9759;e.pointingindexleftwhite=9756;e.pointingindexrightwhite=9758;e.pointingindexupwhite=9757;e.pokatakana=12509;e.poplathai=3611;e.postalmark=12306;e.postalmarkface=12320;e.pparen=9387;e.precedes=8826;e.prescription=8478;e.primemod=697;e.primereversed=8245;e.product=8719;e.projective=8965;e.prolongedkana=12540;e.propellor=8984;e.propersubset=8834;e.propersuperset=8835;e.proportion=8759;e.proportional=8733;e.psi=968;e.psicyrillic=1137;e.psilipneumatacyrilliccmb=1158;e.pssquare=13232;e.puhiragana=12407;e.pukatakana=12503;e.pvsquare=13236;e.pwsquare=13242;e.q=113;e.qadeva=2392;e.qadmahebrew=1448;e.qafarabic=1602;e.qaffinalarabic=65238;e.qafinitialarabic=65239;e.qafmedialarabic=65240;e.qamats=1464;e.qamats10=1464;e.qamats1a=1464;e.qamats1c=1464;e.qamats27=1464;e.qamats29=1464;e.qamats33=1464;e.qamatsde=1464;e.qamatshebrew=1464;e.qamatsnarrowhebrew=1464;e.qamatsqatanhebrew=1464;e.qamatsqatannarrowhebrew=1464;e.qamatsqatanquarterhebrew=1464;e.qamatsqatanwidehebrew=1464;e.qamatsquarterhebrew=1464;e.qamatswidehebrew=1464;e.qarneyparahebrew=1439;e.qbopomofo=12561;e.qcircle=9440;e.qhook=672;e.qmonospace=65361;e.qof=1511;e.qofdagesh=64327;e.qofdageshhebrew=64327;e.qofhebrew=1511;e.qparen=9388;e.quarternote=9833;e.qubuts=1467;e.qubuts18=1467;e.qubuts25=1467;e.qubuts31=1467;e.qubutshebrew=1467;e.qubutsnarrowhebrew=1467;e.qubutsquarterhebrew=1467;e.qubutswidehebrew=1467;e.question=63;e.questionarabic=1567;e.questionarmenian=1374;e.questiondown=191;e.questiondownsmall=63423;e.questiongreek=894;e.questionmonospace=65311;e.questionsmall=63295;e.quotedbl=34;e.quotedblbase=8222;e.quotedblleft=8220;e.quotedblmonospace=65282;e.quotedblprime=12318;e.quotedblprimereversed=12317;e.quotedblright=8221;e.quoteleft=8216;e.quoteleftreversed=8219;e.quotereversed=8219;e.quoteright=8217;e.quoterightn=329;e.quotesinglbase=8218;e.quotesingle=39;e.quotesinglemonospace=65287;e.r=114;e.raarmenian=1404;e.rabengali=2480;e.racute=341;e.radeva=2352;e.radical=8730;e.radicalex=63717;e.radoverssquare=13230;e.radoverssquaredsquare=13231;e.radsquare=13229;e.rafe=1471;e.rafehebrew=1471;e.ragujarati=2736;e.ragurmukhi=2608;e.rahiragana=12425;e.rakatakana=12521;e.rakatakanahalfwidth=65431;e.ralowerdiagonalbengali=2545;e.ramiddlediagonalbengali=2544;e.ramshorn=612;e.ratio=8758;e.rbopomofo=12566;e.rcaron=345;e.rcedilla=343;e.rcircle=9441;e.rcommaaccent=343;e.rdblgrave=529;e.rdotaccent=7769;e.rdotbelow=7771;e.rdotbelowmacron=7773;e.referencemark=8251;e.reflexsubset=8838;e.reflexsuperset=8839;e.registered=174;e.registersans=63720;e.registerserif=63194;e.reharabic=1585;e.reharmenian=1408;e.rehfinalarabic=65198;e.rehiragana=12428;e.rekatakana=12524;e.rekatakanahalfwidth=65434;e.resh=1512;e.reshdageshhebrew=64328;e.reshhebrew=1512;e.reversedtilde=8765;e.reviahebrew=1431;e.reviamugrashhebrew=1431;e.revlogicalnot=8976;e.rfishhook=638;e.rfishhookreversed=639;e.rhabengali=2525;e.rhadeva=2397;e.rho=961;e.rhook=637;e.rhookturned=635;e.rhookturnedsuperior=693;e.rhosymbolgreek=1009;e.rhotichookmod=734;e.rieulacirclekorean=12913;e.rieulaparenkorean=12817;e.rieulcirclekorean=12899;e.rieulhieuhkorean=12608;e.rieulkiyeokkorean=12602;e.rieulkiyeoksioskorean=12649;e.rieulkorean=12601;e.rieulmieumkorean=12603;e.rieulpansioskorean=12652;e.rieulparenkorean=12803;e.rieulphieuphkorean=12607;e.rieulpieupkorean=12604;e.rieulpieupsioskorean=12651;e.rieulsioskorean=12605;e.rieulthieuthkorean=12606;e.rieultikeutkorean=12650;e.rieulyeorinhieuhkorean=12653;e.rightangle=8735;e.righttackbelowcmb=793;e.righttriangle=8895;e.rihiragana=12426;e.rikatakana=12522;e.rikatakanahalfwidth=65432;e.ring=730;e.ringbelowcmb=805;e.ringcmb=778;e.ringhalfleft=703;e.ringhalfleftarmenian=1369;e.ringhalfleftbelowcmb=796;e.ringhalfleftcentered=723;e.ringhalfright=702;e.ringhalfrightbelowcmb=825;e.ringhalfrightcentered=722;e.rinvertedbreve=531;e.rittorusquare=13137;e.rlinebelow=7775;e.rlongleg=636;e.rlonglegturned=634;e.rmonospace=65362;e.rohiragana=12429;e.rokatakana=12525;e.rokatakanahalfwidth=65435;e.roruathai=3619;e.rparen=9389;e.rrabengali=2524;e.rradeva=2353;e.rragurmukhi=2652;e.rreharabic=1681;e.rrehfinalarabic=64397;e.rrvocalicbengali=2528;e.rrvocalicdeva=2400;e.rrvocalicgujarati=2784;e.rrvocalicvowelsignbengali=2500;e.rrvocalicvowelsigndeva=2372;e.rrvocalicvowelsigngujarati=2756;e.rsuperior=63217;e.rtblock=9616;e.rturned=633;e.rturnedsuperior=692;e.ruhiragana=12427;e.rukatakana=12523;e.rukatakanahalfwidth=65433;e.rupeemarkbengali=2546;e.rupeesignbengali=2547;e.rupiah=63197;e.ruthai=3620;e.rvocalicbengali=2443;e.rvocalicdeva=2315;e.rvocalicgujarati=2699;e.rvocalicvowelsignbengali=2499;e.rvocalicvowelsigndeva=2371;e.rvocalicvowelsigngujarati=2755;e.s=115;e.sabengali=2488;e.sacute=347;e.sacutedotaccent=7781;e.sadarabic=1589;e.sadeva=2360;e.sadfinalarabic=65210;e.sadinitialarabic=65211;e.sadmedialarabic=65212;e.sagujarati=2744;e.sagurmukhi=2616;e.sahiragana=12373;e.sakatakana=12469;e.sakatakanahalfwidth=65403;e.sallallahoualayhewasallamarabic=65018;e.samekh=1505;e.samekhdagesh=64321;e.samekhdageshhebrew=64321;e.samekhhebrew=1505;e.saraaathai=3634;e.saraaethai=3649;e.saraaimaimalaithai=3652;e.saraaimaimuanthai=3651;e.saraamthai=3635;e.saraathai=3632;e.saraethai=3648;e.saraiileftthai=63622;e.saraiithai=3637;e.saraileftthai=63621;e.saraithai=3636;e.saraothai=3650;e.saraueeleftthai=63624;e.saraueethai=3639;e.saraueleftthai=63623;e.sarauethai=3638;e.sarauthai=3640;e.sarauuthai=3641;e.sbopomofo=12569;e.scaron=353;e.scarondotaccent=7783;e.scedilla=351;e.schwa=601;e.schwacyrillic=1241;e.schwadieresiscyrillic=1243;e.schwahook=602;e.scircle=9442;e.scircumflex=349;e.scommaaccent=537;e.sdotaccent=7777;e.sdotbelow=7779;e.sdotbelowdotaccent=7785;e.seagullbelowcmb=828;e.second=8243;e.secondtonechinese=714;e.section=167;e.seenarabic=1587;e.seenfinalarabic=65202;e.seeninitialarabic=65203;e.seenmedialarabic=65204;e.segol=1462;e.segol13=1462;e.segol1f=1462;e.segol2c=1462;e.segolhebrew=1462;e.segolnarrowhebrew=1462;e.segolquarterhebrew=1462;e.segoltahebrew=1426;e.segolwidehebrew=1462;e.seharmenian=1405;e.sehiragana=12379;e.sekatakana=12475;e.sekatakanahalfwidth=65406;e.semicolon=59;e.semicolonarabic=1563;e.semicolonmonospace=65307;e.semicolonsmall=65108;e.semivoicedmarkkana=12444;e.semivoicedmarkkanahalfwidth=65439;e.sentisquare=13090;e.sentosquare=13091;e.seven=55;e.sevenarabic=1639;e.sevenbengali=2541;e.sevencircle=9318;e.sevencircleinversesansserif=10128;e.sevendeva=2413;e.seveneighths=8542;e.sevengujarati=2797;e.sevengurmukhi=2669;e.sevenhackarabic=1639;e.sevenhangzhou=12327;e.sevenideographicparen=12838;e.seveninferior=8327;e.sevenmonospace=65303;e.sevenoldstyle=63287;e.sevenparen=9338;e.sevenperiod=9358;e.sevenpersian=1783;e.sevenroman=8566;e.sevensuperior=8311;e.seventeencircle=9328;e.seventeenparen=9348;e.seventeenperiod=9368;e.seventhai=3671;e.sfthyphen=173;e.shaarmenian=1399;e.shabengali=2486;e.shacyrillic=1096;e.shaddaarabic=1617;e.shaddadammaarabic=64609;e.shaddadammatanarabic=64606;e.shaddafathaarabic=64608;e.shaddakasraarabic=64610;e.shaddakasratanarabic=64607;e.shade=9618;e.shadedark=9619;e.shadelight=9617;e.shademedium=9618;e.shadeva=2358;e.shagujarati=2742;e.shagurmukhi=2614;e.shalshelethebrew=1427;e.shbopomofo=12565;e.shchacyrillic=1097;e.sheenarabic=1588;e.sheenfinalarabic=65206;e.sheeninitialarabic=65207;e.sheenmedialarabic=65208;e.sheicoptic=995;e.sheqel=8362;e.sheqelhebrew=8362;e.sheva=1456;e.sheva115=1456;e.sheva15=1456;e.sheva22=1456;e.sheva2e=1456;e.shevahebrew=1456;e.shevanarrowhebrew=1456;e.shevaquarterhebrew=1456;e.shevawidehebrew=1456;e.shhacyrillic=1211;e.shimacoptic=1005;e.shin=1513;e.shindagesh=64329;e.shindageshhebrew=64329;e.shindageshshindot=64300;e.shindageshshindothebrew=64300;e.shindageshsindot=64301;e.shindageshsindothebrew=64301;e.shindothebrew=1473;e.shinhebrew=1513;e.shinshindot=64298;e.shinshindothebrew=64298;e.shinsindot=64299;e.shinsindothebrew=64299;e.shook=642;e.sigma=963;e.sigma1=962;e.sigmafinal=962;e.sigmalunatesymbolgreek=1010;e.sihiragana=12375;e.sikatakana=12471;e.sikatakanahalfwidth=65404;e.siluqhebrew=1469;e.siluqlefthebrew=1469;e.similar=8764;e.sindothebrew=1474;e.siosacirclekorean=12916;e.siosaparenkorean=12820;e.sioscieuckorean=12670;e.sioscirclekorean=12902;e.sioskiyeokkorean=12666;e.sioskorean=12613;e.siosnieunkorean=12667;e.siosparenkorean=12806;e.siospieupkorean=12669;e.siostikeutkorean=12668;e.six=54;e.sixarabic=1638;e.sixbengali=2540;e.sixcircle=9317;e.sixcircleinversesansserif=10127;e.sixdeva=2412;e.sixgujarati=2796;e.sixgurmukhi=2668;e.sixhackarabic=1638;e.sixhangzhou=12326;e.sixideographicparen=12837;e.sixinferior=8326;e.sixmonospace=65302;e.sixoldstyle=63286;e.sixparen=9337;e.sixperiod=9357;e.sixpersian=1782;e.sixroman=8565;e.sixsuperior=8310;e.sixteencircle=9327;e.sixteencurrencydenominatorbengali=2553;e.sixteenparen=9347;e.sixteenperiod=9367;e.sixthai=3670;e.slash=47;e.slashmonospace=65295;e.slong=383;e.slongdotaccent=7835;e.smileface=9786;e.smonospace=65363;e.sofpasuqhebrew=1475;e.softhyphen=173;e.softsigncyrillic=1100;e.sohiragana=12381;e.sokatakana=12477;e.sokatakanahalfwidth=65407;e.soliduslongoverlaycmb=824;e.solidusshortoverlaycmb=823;e.sorusithai=3625;e.sosalathai=3624;e.sosothai=3595;e.sosuathai=3626;e.space=32;e.spacehackarabic=32;e.spade=9824;e.spadesuitblack=9824;e.spadesuitwhite=9828;e.sparen=9390;e.squarebelowcmb=827;e.squarecc=13252;e.squarecm=13213;e.squarediagonalcrosshatchfill=9641;e.squarehorizontalfill=9636;e.squarekg=13199;e.squarekm=13214;e.squarekmcapital=13262;e.squareln=13265;e.squarelog=13266;e.squaremg=13198;e.squaremil=13269;e.squaremm=13212;e.squaremsquared=13217;e.squareorthogonalcrosshatchfill=9638;e.squareupperlefttolowerrightfill=9639;e.squareupperrighttolowerleftfill=9640;e.squareverticalfill=9637;e.squarewhitewithsmallblack=9635;e.srsquare=13275;e.ssabengali=2487;e.ssadeva=2359;e.ssagujarati=2743;e.ssangcieuckorean=12617;e.ssanghieuhkorean=12677;e.ssangieungkorean=12672;e.ssangkiyeokkorean=12594;e.ssangnieunkorean=12645;e.ssangpieupkorean=12611;e.ssangsioskorean=12614;e.ssangtikeutkorean=12600;e.ssuperior=63218;e.sterling=163;e.sterlingmonospace=65505;e.strokelongoverlaycmb=822;e.strokeshortoverlaycmb=821;e.subset=8834;e.subsetnotequal=8842;e.subsetorequal=8838;e.succeeds=8827;e.suchthat=8715;e.suhiragana=12377;e.sukatakana=12473;e.sukatakanahalfwidth=65405;e.sukunarabic=1618;e.summation=8721;e.sun=9788;e.superset=8835;e.supersetnotequal=8843;e.supersetorequal=8839;e.svsquare=13276;e.syouwaerasquare=13180;e.t=116;e.tabengali=2468;e.tackdown=8868;e.tackleft=8867;e.tadeva=2340;e.tagujarati=2724;e.tagurmukhi=2596;e.taharabic=1591;e.tahfinalarabic=65218;e.tahinitialarabic=65219;e.tahiragana=12383;e.tahmedialarabic=65220;e.taisyouerasquare=13181;e.takatakana=12479;e.takatakanahalfwidth=65408;e.tatweelarabic=1600;e.tau=964;e.tav=1514;e.tavdages=64330;e.tavdagesh=64330;e.tavdageshhebrew=64330;e.tavhebrew=1514;e.tbar=359;e.tbopomofo=12554;e.tcaron=357;e.tccurl=680;e.tcedilla=355;e.tcheharabic=1670;e.tchehfinalarabic=64379;e.tchehinitialarabic=64380;e.tchehmedialarabic=64381;e.tcircle=9443;e.tcircumflexbelow=7793;e.tcommaaccent=355;e.tdieresis=7831;e.tdotaccent=7787;e.tdotbelow=7789;e.tecyrillic=1090;e.tedescendercyrillic=1197;e.teharabic=1578;e.tehfinalarabic=65174;e.tehhahinitialarabic=64674;e.tehhahisolatedarabic=64524;e.tehinitialarabic=65175;e.tehiragana=12390;e.tehjeeminitialarabic=64673;e.tehjeemisolatedarabic=64523;e.tehmarbutaarabic=1577;e.tehmarbutafinalarabic=65172;e.tehmedialarabic=65176;e.tehmeeminitialarabic=64676;e.tehmeemisolatedarabic=64526;e.tehnoonfinalarabic=64627;e.tekatakana=12486;e.tekatakanahalfwidth=65411;e.telephone=8481;e.telephoneblack=9742;e.telishagedolahebrew=1440;e.telishaqetanahebrew=1449;e.tencircle=9321;e.tenideographicparen=12841;e.tenparen=9341;e.tenperiod=9361;e.tenroman=8569;e.tesh=679;e.tet=1496;e.tetdagesh=64312;e.tetdageshhebrew=64312;e.tethebrew=1496;e.tetsecyrillic=1205;e.tevirhebrew=1435;e.tevirlefthebrew=1435;e.thabengali=2469;e.thadeva=2341;e.thagujarati=2725;e.thagurmukhi=2597;e.thalarabic=1584;e.thalfinalarabic=65196;e.thanthakhatlowleftthai=63640;e.thanthakhatlowrightthai=63639;e.thanthakhatthai=3660;e.thanthakhatupperleftthai=63638;e.theharabic=1579;e.thehfinalarabic=65178;e.thehinitialarabic=65179;e.thehmedialarabic=65180;e.thereexists=8707;e.therefore=8756;e.theta=952;e.theta1=977;e.thetasymbolgreek=977;e.thieuthacirclekorean=12921;e.thieuthaparenkorean=12825;e.thieuthcirclekorean=12907;e.thieuthkorean=12620;e.thieuthparenkorean=12811;e.thirteencircle=9324;e.thirteenparen=9344;e.thirteenperiod=9364;e.thonangmonthothai=3601;e.thook=429;e.thophuthaothai=3602;e.thorn=254;e.thothahanthai=3607;e.thothanthai=3600;e.thothongthai=3608;e.thothungthai=3606;e.thousandcyrillic=1154;e.thousandsseparatorarabic=1644;e.thousandsseparatorpersian=1644;e.three=51;e.threearabic=1635;e.threebengali=2537;e.threecircle=9314;e.threecircleinversesansserif=10124;e.threedeva=2409;e.threeeighths=8540;e.threegujarati=2793;e.threegurmukhi=2665;e.threehackarabic=1635;e.threehangzhou=12323;e.threeideographicparen=12834;e.threeinferior=8323;e.threemonospace=65299;e.threenumeratorbengali=2550;e.threeoldstyle=63283;e.threeparen=9334;e.threeperiod=9354;e.threepersian=1779;e.threequarters=190;e.threequartersemdash=63198;e.threeroman=8562;e.threesuperior=179;e.threethai=3667;e.thzsquare=13204;e.tihiragana=12385;e.tikatakana=12481;e.tikatakanahalfwidth=65409;e.tikeutacirclekorean=12912;e.tikeutaparenkorean=12816;e.tikeutcirclekorean=12898;e.tikeutkorean=12599;e.tikeutparenkorean=12802;e.tilde=732;e.tildebelowcmb=816;e.tildecmb=771;e.tildecomb=771;e.tildedoublecmb=864;e.tildeoperator=8764;e.tildeoverlaycmb=820;e.tildeverticalcmb=830;e.timescircle=8855;e.tipehahebrew=1430;e.tipehalefthebrew=1430;e.tippigurmukhi=2672;e.titlocyrilliccmb=1155;e.tiwnarmenian=1407;e.tlinebelow=7791;e.tmonospace=65364;e.toarmenian=1385;e.tohiragana=12392;e.tokatakana=12488;e.tokatakanahalfwidth=65412;e.tonebarextrahighmod=741;e.tonebarextralowmod=745;e.tonebarhighmod=742;e.tonebarlowmod=744;e.tonebarmidmod=743;e.tonefive=445;e.tonesix=389;e.tonetwo=424;e.tonos=900;e.tonsquare=13095;e.topatakthai=3599;e.tortoiseshellbracketleft=12308;e.tortoiseshellbracketleftsmall=65117;e.tortoiseshellbracketleftvertical=65081;e.tortoiseshellbracketright=12309;e.tortoiseshellbracketrightsmall=65118;e.tortoiseshellbracketrightvertical=65082;e.totaothai=3605;e.tpalatalhook=427;e.tparen=9391;e.trademark=8482;e.trademarksans=63722;e.trademarkserif=63195;e.tretroflexhook=648;e.triagdn=9660;e.triaglf=9668;e.triagrt=9658;e.triagup=9650;e.ts=678;e.tsadi=1510;e.tsadidagesh=64326;e.tsadidageshhebrew=64326;e.tsadihebrew=1510;e.tsecyrillic=1094;e.tsere=1461;e.tsere12=1461;e.tsere1e=1461;e.tsere2b=1461;e.tserehebrew=1461;e.tserenarrowhebrew=1461;e.tserequarterhebrew=1461;e.tserewidehebrew=1461;e.tshecyrillic=1115;e.tsuperior=63219;e.ttabengali=2463;e.ttadeva=2335;e.ttagujarati=2719;e.ttagurmukhi=2591;e.tteharabic=1657;e.ttehfinalarabic=64359;e.ttehinitialarabic=64360;e.ttehmedialarabic=64361;e.tthabengali=2464;e.tthadeva=2336;e.tthagujarati=2720;e.tthagurmukhi=2592;e.tturned=647;e.tuhiragana=12388;e.tukatakana=12484;e.tukatakanahalfwidth=65410;e.tusmallhiragana=12387;e.tusmallkatakana=12483;e.tusmallkatakanahalfwidth=65391;e.twelvecircle=9323;e.twelveparen=9343;e.twelveperiod=9363;e.twelveroman=8571;e.twentycircle=9331;e.twentyhangzhou=21316;e.twentyparen=9351;e.twentyperiod=9371;e.two=50;e.twoarabic=1634;e.twobengali=2536;e.twocircle=9313;e.twocircleinversesansserif=10123;e.twodeva=2408;e.twodotenleader=8229;e.twodotleader=8229;e.twodotleadervertical=65072;e.twogujarati=2792;e.twogurmukhi=2664;e.twohackarabic=1634;e.twohangzhou=12322;e.twoideographicparen=12833;e.twoinferior=8322;e.twomonospace=65298;e.twonumeratorbengali=2549;e.twooldstyle=63282;e.twoparen=9333;e.twoperiod=9353;e.twopersian=1778;e.tworoman=8561;e.twostroke=443;e.twosuperior=178;e.twothai=3666;e.twothirds=8532;e.u=117;e.uacute=250;e.ubar=649;e.ubengali=2441;e.ubopomofo=12584;e.ubreve=365;e.ucaron=468;e.ucircle=9444;e.ucircumflex=251;e.ucircumflexbelow=7799;e.ucyrillic=1091;e.udattadeva=2385;e.udblacute=369;e.udblgrave=533;e.udeva=2313;e.udieresis=252;e.udieresisacute=472;e.udieresisbelow=7795;e.udieresiscaron=474;e.udieresiscyrillic=1265;e.udieresisgrave=476;e.udieresismacron=470;e.udotbelow=7909;e.ugrave=249;e.ugujarati=2697;e.ugurmukhi=2569;e.uhiragana=12358;e.uhookabove=7911;e.uhorn=432;e.uhornacute=7913;e.uhorndotbelow=7921;e.uhorngrave=7915;e.uhornhookabove=7917;e.uhorntilde=7919;e.uhungarumlaut=369;e.uhungarumlautcyrillic=1267;e.uinvertedbreve=535;e.ukatakana=12454;e.ukatakanahalfwidth=65395;e.ukcyrillic=1145;e.ukorean=12636;e.umacron=363;e.umacroncyrillic=1263;e.umacrondieresis=7803;e.umatragurmukhi=2625;e.umonospace=65365;e.underscore=95;e.underscoredbl=8215;e.underscoremonospace=65343;e.underscorevertical=65075;e.underscorewavy=65103;e.union=8746;e.universal=8704;e.uogonek=371;e.uparen=9392;e.upblock=9600;e.upperdothebrew=1476;e.upsilon=965;e.upsilondieresis=971;e.upsilondieresistonos=944;e.upsilonlatin=650;e.upsilontonos=973;e.uptackbelowcmb=797;e.uptackmod=724;e.uragurmukhi=2675;e.uring=367;e.ushortcyrillic=1118;e.usmallhiragana=12357;e.usmallkatakana=12453;e.usmallkatakanahalfwidth=65385;e.ustraightcyrillic=1199;e.ustraightstrokecyrillic=1201;e.utilde=361;e.utildeacute=7801;e.utildebelow=7797;e.uubengali=2442;e.uudeva=2314;e.uugujarati=2698;e.uugurmukhi=2570;e.uumatragurmukhi=2626;e.uuvowelsignbengali=2498;e.uuvowelsigndeva=2370;e.uuvowelsigngujarati=2754;e.uvowelsignbengali=2497;e.uvowelsigndeva=2369;e.uvowelsigngujarati=2753;e.v=118;e.vadeva=2357;e.vagujarati=2741;e.vagurmukhi=2613;e.vakatakana=12535;e.vav=1493;e.vavdagesh=64309;e.vavdagesh65=64309;e.vavdageshhebrew=64309;e.vavhebrew=1493;e.vavholam=64331;e.vavholamhebrew=64331;e.vavvavhebrew=1520;e.vavyodhebrew=1521;e.vcircle=9445;e.vdotbelow=7807;e.vecyrillic=1074;e.veharabic=1700;e.vehfinalarabic=64363;e.vehinitialarabic=64364;e.vehmedialarabic=64365;e.vekatakana=12537;e.venus=9792;e.verticalbar=124;e.verticallineabovecmb=781;e.verticallinebelowcmb=809;e.verticallinelowmod=716;e.verticallinemod=712;e.vewarmenian=1406;e.vhook=651;e.vikatakana=12536;e.viramabengali=2509;e.viramadeva=2381;e.viramagujarati=2765;e.visargabengali=2435;e.visargadeva=2307;e.visargagujarati=2691;e.vmonospace=65366;e.voarmenian=1400;e.voicediterationhiragana=12446;e.voicediterationkatakana=12542;e.voicedmarkkana=12443;e.voicedmarkkanahalfwidth=65438;e.vokatakana=12538;e.vparen=9393;e.vtilde=7805;e.vturned=652;e.vuhiragana=12436;e.vukatakana=12532;e.w=119;e.wacute=7811;e.waekorean=12633;e.wahiragana=12431;e.wakatakana=12527;e.wakatakanahalfwidth=65436;e.wakorean=12632;e.wasmallhiragana=12430;e.wasmallkatakana=12526;e.wattosquare=13143;e.wavedash=12316;e.wavyunderscorevertical=65076;e.wawarabic=1608;e.wawfinalarabic=65262;e.wawhamzaabovearabic=1572;e.wawhamzaabovefinalarabic=65158;e.wbsquare=13277;e.wcircle=9446;e.wcircumflex=373;e.wdieresis=7813;e.wdotaccent=7815;e.wdotbelow=7817;e.wehiragana=12433;e.weierstrass=8472;e.wekatakana=12529;e.wekorean=12638;e.weokorean=12637;e.wgrave=7809;e.whitebullet=9702;e.whitecircle=9675;e.whitecircleinverse=9689;e.whitecornerbracketleft=12302;e.whitecornerbracketleftvertical=65091;e.whitecornerbracketright=12303;e.whitecornerbracketrightvertical=65092;e.whitediamond=9671;e.whitediamondcontainingblacksmalldiamond=9672;e.whitedownpointingsmalltriangle=9663;e.whitedownpointingtriangle=9661;e.whiteleftpointingsmalltriangle=9667;e.whiteleftpointingtriangle=9665;e.whitelenticularbracketleft=12310;e.whitelenticularbracketright=12311;e.whiterightpointingsmalltriangle=9657;e.whiterightpointingtriangle=9655;e.whitesmallsquare=9643;e.whitesmilingface=9786;e.whitesquare=9633;e.whitestar=9734;e.whitetelephone=9743;e.whitetortoiseshellbracketleft=12312;e.whitetortoiseshellbracketright=12313;e.whiteuppointingsmalltriangle=9653;e.whiteuppointingtriangle=9651;e.wihiragana=12432;e.wikatakana=12528;e.wikorean=12639;e.wmonospace=65367;e.wohiragana=12434;e.wokatakana=12530;e.wokatakanahalfwidth=65382;e.won=8361;e.wonmonospace=65510;e.wowaenthai=3623;e.wparen=9394;e.wring=7832;e.wsuperior=695;e.wturned=653;e.wynn=447;e.x=120;e.xabovecmb=829;e.xbopomofo=12562;e.xcircle=9447;e.xdieresis=7821;e.xdotaccent=7819;e.xeharmenian=1389;e.xi=958;e.xmonospace=65368;e.xparen=9395;e.xsuperior=739;e.y=121;e.yaadosquare=13134;e.yabengali=2479;e.yacute=253;e.yadeva=2351;e.yaekorean=12626;e.yagujarati=2735;e.yagurmukhi=2607;e.yahiragana=12420;e.yakatakana=12516;e.yakatakanahalfwidth=65428;e.yakorean=12625;e.yamakkanthai=3662;e.yasmallhiragana=12419;e.yasmallkatakana=12515;e.yasmallkatakanahalfwidth=65388;e.yatcyrillic=1123;e.ycircle=9448;e.ycircumflex=375;e.ydieresis=255;e.ydotaccent=7823;e.ydotbelow=7925;e.yeharabic=1610;e.yehbarreearabic=1746;e.yehbarreefinalarabic=64431;e.yehfinalarabic=65266;e.yehhamzaabovearabic=1574;e.yehhamzaabovefinalarabic=65162;e.yehhamzaaboveinitialarabic=65163;e.yehhamzaabovemedialarabic=65164;e.yehinitialarabic=65267;e.yehmedialarabic=65268;e.yehmeeminitialarabic=64733;e.yehmeemisolatedarabic=64600;e.yehnoonfinalarabic=64660;e.yehthreedotsbelowarabic=1745;e.yekorean=12630;e.yen=165;e.yenmonospace=65509;e.yeokorean=12629;e.yeorinhieuhkorean=12678;e.yerahbenyomohebrew=1450;e.yerahbenyomolefthebrew=1450;e.yericyrillic=1099;e.yerudieresiscyrillic=1273;e.yesieungkorean=12673;e.yesieungpansioskorean=12675;e.yesieungsioskorean=12674;e.yetivhebrew=1434;e.ygrave=7923;e.yhook=436;e.yhookabove=7927;e.yiarmenian=1397;e.yicyrillic=1111;e.yikorean=12642;e.yinyang=9775;e.yiwnarmenian=1410;e.ymonospace=65369;e.yod=1497;e.yoddagesh=64313;e.yoddageshhebrew=64313;e.yodhebrew=1497;e.yodyodhebrew=1522;e.yodyodpatahhebrew=64287;e.yohiragana=12424;e.yoikorean=12681;e.yokatakana=12520;e.yokatakanahalfwidth=65430;e.yokorean=12635;e.yosmallhiragana=12423;e.yosmallkatakana=12519;e.yosmallkatakanahalfwidth=65390;e.yotgreek=1011;e.yoyaekorean=12680;e.yoyakorean=12679;e.yoyakthai=3618;e.yoyingthai=3597;e.yparen=9396;e.ypogegrammeni=890;e.ypogegrammenigreekcmb=837;e.yr=422;e.yring=7833;e.ysuperior=696;e.ytilde=7929;e.yturned=654;e.yuhiragana=12422;e.yuikorean=12684;e.yukatakana=12518;e.yukatakanahalfwidth=65429;e.yukorean=12640;e.yusbigcyrillic=1131;e.yusbigiotifiedcyrillic=1133;e.yuslittlecyrillic=1127;e.yuslittleiotifiedcyrillic=1129;e.yusmallhiragana=12421;e.yusmallkatakana=12517;e.yusmallkatakanahalfwidth=65389;e.yuyekorean=12683;e.yuyeokorean=12682;e.yyabengali=2527;e.yyadeva=2399;e.z=122;e.zaarmenian=1382;e.zacute=378;e.zadeva=2395;e.zagurmukhi=2651;e.zaharabic=1592;e.zahfinalarabic=65222;e.zahinitialarabic=65223;e.zahiragana=12374;e.zahmedialarabic=65224;e.zainarabic=1586;e.zainfinalarabic=65200;e.zakatakana=12470;e.zaqefgadolhebrew=1429;e.zaqefqatanhebrew=1428;e.zarqahebrew=1432;e.zayin=1494;e.zayindagesh=64310;e.zayindageshhebrew=64310;e.zayinhebrew=1494;e.zbopomofo=12567;e.zcaron=382;e.zcircle=9449;e.zcircumflex=7825;e.zcurl=657;e.zdot=380;e.zdotaccent=380;e.zdotbelow=7827;e.zecyrillic=1079;e.zedescendercyrillic=1177;e.zedieresiscyrillic=1247;e.zehiragana=12380;e.zekatakana=12476;e.zero=48;e.zeroarabic=1632;e.zerobengali=2534;e.zerodeva=2406;e.zerogujarati=2790;e.zerogurmukhi=2662;e.zerohackarabic=1632;e.zeroinferior=8320;e.zeromonospace=65296;e.zerooldstyle=63280;e.zeropersian=1776;e.zerosuperior=8304;e.zerothai=3664;e.zerowidthjoiner=65279;e.zerowidthnonjoiner=8204;e.zerowidthspace=8203;e.zeta=950;e.zhbopomofo=12563;e.zhearmenian=1386;e.zhebrevecyrillic=1218;e.zhecyrillic=1078;e.zhedescendercyrillic=1175;e.zhedieresiscyrillic=1245;e.zihiragana=12376;e.zikatakana=12472;e.zinorhebrew=1454;e.zlinebelow=7829;e.zmonospace=65370;e.zohiragana=12382;e.zokatakana=12478;e.zparen=9397;e.zretroflexhook=656;e.zstroke=438;e.zuhiragana=12378;e.zukatakana=12474;e[".notdef"]=0;e.angbracketleftbig=9001;e.angbracketleftBig=9001;e.angbracketleftbigg=9001;e.angbracketleftBigg=9001;e.angbracketrightBig=9002;e.angbracketrightbig=9002;e.angbracketrightBigg=9002;e.angbracketrightbigg=9002;e.arrowhookleft=8618;e.arrowhookright=8617;e.arrowlefttophalf=8636;e.arrowleftbothalf=8637;e.arrownortheast=8599;e.arrownorthwest=8598;e.arrowrighttophalf=8640;e.arrowrightbothalf=8641;e.arrowsoutheast=8600;e.arrowsouthwest=8601;e.backslashbig=8726;e.backslashBig=8726;e.backslashBigg=8726;e.backslashbigg=8726;e.bardbl=8214;e.bracehtipdownleft=65079;e.bracehtipdownright=65079;e.bracehtipupleft=65080;e.bracehtipupright=65080;e.braceleftBig=123;e.braceleftbig=123;e.braceleftbigg=123;e.braceleftBigg=123;e.bracerightBig=125;e.bracerightbig=125;e.bracerightbigg=125;e.bracerightBigg=125;e.bracketleftbig=91;e.bracketleftBig=91;e.bracketleftbigg=91;e.bracketleftBigg=91;e.bracketrightBig=93;e.bracketrightbig=93;e.bracketrightbigg=93;e.bracketrightBigg=93;e.ceilingleftbig=8968;e.ceilingleftBig=8968;e.ceilingleftBigg=8968;e.ceilingleftbigg=8968;e.ceilingrightbig=8969;e.ceilingrightBig=8969;e.ceilingrightbigg=8969;e.ceilingrightBigg=8969;e.circledotdisplay=8857;e.circledottext=8857;e.circlemultiplydisplay=8855;e.circlemultiplytext=8855;e.circleplusdisplay=8853;e.circleplustext=8853;e.contintegraldisplay=8750;e.contintegraltext=8750;e.coproductdisplay=8720;e.coproducttext=8720;e.floorleftBig=8970;e.floorleftbig=8970;e.floorleftbigg=8970;e.floorleftBigg=8970;e.floorrightbig=8971;e.floorrightBig=8971;e.floorrightBigg=8971;e.floorrightbigg=8971;e.hatwide=770;e.hatwider=770;e.hatwidest=770;e.intercal=7488;e.integraldisplay=8747;e.integraltext=8747;e.intersectiondisplay=8898;e.intersectiontext=8898;e.logicalanddisplay=8743;e.logicalandtext=8743;e.logicalordisplay=8744;e.logicalortext=8744;e.parenleftBig=40;e.parenleftbig=40;e.parenleftBigg=40;e.parenleftbigg=40;e.parenrightBig=41;e.parenrightbig=41;e.parenrightBigg=41;e.parenrightbigg=41;e.prime=8242;e.productdisplay=8719;e.producttext=8719;e.radicalbig=8730;e.radicalBig=8730;e.radicalBigg=8730;e.radicalbigg=8730;e.radicalbt=8730;e.radicaltp=8730;e.radicalvertex=8730;e.slashbig=47;e.slashBig=47;e.slashBigg=47;e.slashbigg=47;e.summationdisplay=8721;e.summationtext=8721;e.tildewide=732;e.tildewider=732;e.tildewidest=732;e.uniondisplay=8899;e.unionmultidisplay=8846;e.unionmultitext=8846;e.unionsqdisplay=8852;e.unionsqtext=8852;e.uniontext=8899;e.vextenddouble=8741;e.vextendsingle=8739})),Ir=getLookupTableFactory((function(e){e.space=32;e.a1=9985;e.a2=9986;e.a202=9987;e.a3=9988;e.a4=9742;e.a5=9990;e.a119=9991;e.a118=9992;e.a117=9993;e.a11=9755;e.a12=9758;e.a13=9996;e.a14=9997;e.a15=9998;e.a16=9999;e.a105=1e4;e.a17=10001;e.a18=10002;e.a19=10003;e.a20=10004;e.a21=10005;e.a22=10006;e.a23=10007;e.a24=10008;e.a25=10009;e.a26=10010;e.a27=10011;e.a28=10012;e.a6=10013;e.a7=10014;e.a8=10015;e.a9=10016;e.a10=10017;e.a29=10018;e.a30=10019;e.a31=10020;e.a32=10021;e.a33=10022;e.a34=10023;e.a35=9733;e.a36=10025;e.a37=10026;e.a38=10027;e.a39=10028;e.a40=10029;e.a41=10030;e.a42=10031;e.a43=10032;e.a44=10033;e.a45=10034;e.a46=10035;e.a47=10036;e.a48=10037;e.a49=10038;e.a50=10039;e.a51=10040;e.a52=10041;e.a53=10042;e.a54=10043;e.a55=10044;e.a56=10045;e.a57=10046;e.a58=10047;e.a59=10048;e.a60=10049;e.a61=10050;e.a62=10051;e.a63=10052;e.a64=10053;e.a65=10054;e.a66=10055;e.a67=10056;e.a68=10057;e.a69=10058;e.a70=10059;e.a71=9679;e.a72=10061;e.a73=9632;e.a74=10063;e.a203=10064;e.a75=10065;e.a204=10066;e.a76=9650;e.a77=9660;e.a78=9670;e.a79=10070;e.a81=9687;e.a82=10072;e.a83=10073;e.a84=10074;e.a97=10075;e.a98=10076;e.a99=10077;e.a100=10078;e.a101=10081;e.a102=10082;e.a103=10083;e.a104=10084;e.a106=10085;e.a107=10086;e.a108=10087;e.a112=9827;e.a111=9830;e.a110=9829;e.a109=9824;e.a120=9312;e.a121=9313;e.a122=9314;e.a123=9315;e.a124=9316;e.a125=9317;e.a126=9318;e.a127=9319;e.a128=9320;e.a129=9321;e.a130=10102;e.a131=10103;e.a132=10104;e.a133=10105;e.a134=10106;e.a135=10107;e.a136=10108;e.a137=10109;e.a138=10110;e.a139=10111;e.a140=10112;e.a141=10113;e.a142=10114;e.a143=10115;e.a144=10116;e.a145=10117;e.a146=10118;e.a147=10119;e.a148=10120;e.a149=10121;e.a150=10122;e.a151=10123;e.a152=10124;e.a153=10125;e.a154=10126;e.a155=10127;e.a156=10128;e.a157=10129;e.a158=10130;e.a159=10131;e.a160=10132;e.a161=8594;e.a163=8596;e.a164=8597;e.a196=10136;e.a165=10137;e.a192=10138;e.a166=10139;e.a167=10140;e.a168=10141;e.a169=10142;e.a170=10143;e.a171=10144;e.a172=10145;e.a173=10146;e.a162=10147;e.a174=10148;e.a175=10149;e.a176=10150;e.a177=10151;e.a178=10152;e.a179=10153;e.a193=10154;e.a180=10155;e.a199=10156;e.a181=10157;e.a200=10158;e.a182=10159;e.a201=10161;e.a183=10162;e.a184=10163;e.a197=10164;e.a185=10165;e.a194=10166;e.a198=10167;e.a186=10168;e.a195=10169;e.a187=10170;e.a188=10171;e.a189=10172;e.a190=10173;e.a191=10174;e.a89=10088;e.a90=10089;e.a93=10090;e.a94=10091;e.a91=10092;e.a92=10093;e.a205=10094;e.a85=10095;e.a206=10096;e.a86=10097;e.a87=10098;e.a88=10099;e.a95=10100;e.a96=10101;e[".notdef"]=0})),Tr=getLookupTableFactory((function(e){e[63721]=169;e[63193]=169;e[63720]=174;e[63194]=174;e[63722]=8482;e[63195]=8482;e[63729]=9127;e[63730]=9128;e[63731]=9129;e[63740]=9131;e[63741]=9132;e[63742]=9133;e[63726]=9121;e[63727]=9122;e[63728]=9123;e[63737]=9124;e[63738]=9125;e[63739]=9126;e[63723]=9115;e[63724]=9116;e[63725]=9117;e[63734]=9118;e[63735]=9119;e[63736]=9120}));function getUnicodeForGlyph(e,t){let a=t[e];if(void 0!==a)return a;if(!e)return-1;if("u"===e[0]){const t=e.length;let r;if(7===t&&"n"===e[1]&&"i"===e[2])r=e.substring(3);else{if(!(t>=5&&t<=7))return-1;r=e.substring(1)}if(r===r.toUpperCase()){a=parseInt(r,16);if(a>=0)return a}}return-1}const Or=[[0,127],[128,255],[256,383],[384,591],[592,687,7424,7551,7552,7615],[688,767,42752,42783],[768,879,7616,7679],[880,1023],[11392,11519],[1024,1279,1280,1327,11744,11775,42560,42655],[1328,1423],[1424,1535],[42240,42559],[1536,1791,1872,1919],[1984,2047],[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3584,3711],[3712,3839],[4256,4351,11520,11567],[6912,7039],[4352,4607],[7680,7935,11360,11391,42784,43007],[7936,8191],[8192,8303,11776,11903],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703,10224,10239,10496,10623,11008,11263],[8704,8959,10752,11007,10176,10223,10624,10751],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[12288,12351],[12352,12447],[12448,12543,12784,12799],[12544,12591,12704,12735],[12592,12687],[43072,43135],[12800,13055],[13056,13311],[44032,55215],[55296,57343],[67840,67871],[19968,40959,11904,12031,12032,12255,12272,12287,13312,19903,131072,173791,12688,12703],[57344,63743],[12736,12783,63744,64255,194560,195103],[64256,64335],[64336,65023],[65056,65071],[65040,65055],[65104,65135],[65136,65279],[65280,65519],[65520,65535],[3840,4095],[1792,1871],[1920,1983],[3456,3583],[4096,4255],[4608,4991,4992,5023,11648,11743],[5024,5119],[5120,5759],[5760,5791],[5792,5887],[6016,6143],[6144,6319],[10240,10495],[40960,42127],[5888,5919,5920,5951,5952,5983,5984,6015],[66304,66351],[66352,66383],[66560,66639],[118784,119039,119040,119295,119296,119375],[119808,120831],[1044480,1048573],[65024,65039,917760,917999],[917504,917631],[6400,6479],[6480,6527],[6528,6623],[6656,6687],[11264,11359],[11568,11647],[19904,19967],[43008,43055],[65536,65663,65664,65791,65792,65855],[65856,65935],[66432,66463],[66464,66527],[66640,66687],[66688,66735],[67584,67647],[68096,68191],[119552,119647],[73728,74751,74752,74879],[119648,119679],[7040,7103],[7168,7247],[7248,7295],[43136,43231],[43264,43311],[43312,43359],[43520,43615],[65936,65999],[66e3,66047],[66208,66271,66176,66207,67872,67903],[127024,127135,126976,127023]];function getUnicodeRangeFor(e,t=-1){if(-1!==t){const a=Or[t];for(let r=0,i=a.length;r<i;r+=2)if(e>=a[r]&&e<=a[r+1])return t}for(let t=0,a=Or.length;t<a;t++){const a=Or[t];for(let r=0,i=a.length;r<i;r+=2)if(e>=a[r]&&e<=a[r+1])return t}return-1}const Mr=new RegExp("^(\\\\s)|(\\\\p{Mn})|(\\\\p{Cf})$","u"),Dr=new Map;const Rr=!0,Nr=1,Er=2,Pr=4,Lr=32,jr=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function recoverGlyphName(e,t){if(void 0!==t[e])return e;const a=getUnicodeForGlyph(e,t);if(-1!==a)for(const e in t)if(t[e]===a)return e;info("Unable to recover a standard glyph name for: "+e);return e}function type1FontGlyphMapping(e,t,a){const r=Object.create(null);let i,n,s;const o=!!(e.flags&Pr);if(e.isInternalFont){s=t;for(n=0;n<s.length;n++){i=a.indexOf(s[n]);r[n]=i>=0?i:0}}else if(e.baseEncodingName){s=getEncoding(e.baseEncodingName);for(n=0;n<s.length;n++){i=a.indexOf(s[n]);r[n]=i>=0?i:0}}else if(o)for(n in t)r[n]=t[n];else{s=Ar;for(n=0;n<s.length;n++){i=a.indexOf(s[n]);r[n]=i>=0?i:0}}const c=e.differences;let l;if(c)for(n in c){const e=c[n];i=a.indexOf(e);if(-1===i){l||(l=Fr());const t=recoverGlyphName(e,l);t!==e&&(i=a.indexOf(t))}r[n]=i>=0?i:0}return r}function normalizeFontName(e){return e.replaceAll(/[,_]/g,"-").replaceAll(/\\s/g,"")}const _r=getLookupTableFactory((e=>{e[8211]=65074;e[8212]=65073;e[8229]=65072;e[8230]=65049;e[12289]=65041;e[12290]=65042;e[12296]=65087;e[12297]=65088;e[12298]=65085;e[12299]=65086;e[12300]=65089;e[12301]=65090;e[12302]=65091;e[12303]=65092;e[12304]=65083;e[12305]=65084;e[12308]=65081;e[12309]=65082;e[12310]=65047;e[12311]=65048;e[65103]=65076;e[65281]=65045;e[65288]=65077;e[65289]=65078;e[65292]=65040;e[65306]=65043;e[65307]=65044;e[65311]=65046;e[65339]=65095;e[65341]=65096;e[65343]=65075;e[65371]=65079;e[65373]=65080}));const Ur=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],Xr=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],qr=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"],Hr=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Wr=391,zr=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],$r=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn(e,t){e[t-2]=e[t-2]+e[t-1]}},{id:"sub",min:2,stackDelta:-1,stackFn(e,t){e[t-2]=e[t-2]-e[t-1]}},{id:"div",min:2,stackDelta:-1,stackFn(e,t){e[t-2]=e[t-2]/e[t-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn(e,t){e[t-1]=-e[t-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn(e,t){e[t-2]=e[t-2]*e[t-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];class CFFParser{constructor(e,t,a){this.bytes=e.getBytes();this.properties=t;this.seacAnalysisEnabled=!!a}parse(){const e=this.properties,t=new CFF;this.cff=t;const a=this.parseHeader(),r=this.parseIndex(a.endPos),i=this.parseIndex(r.endPos),n=this.parseIndex(i.endPos),s=this.parseIndex(n.endPos),o=this.parseDict(i.obj.get(0)),c=this.createDict(CFFTopDict,o,t.strings);t.header=a.obj;t.names=this.parseNameIndex(r.obj);t.strings=this.parseStringIndex(n.obj);t.topDict=c;t.globalSubrIndex=s.obj;this.parsePrivateDict(t.topDict);t.isCIDFont=c.hasName("ROS");const l=c.getByName("CharStrings"),h=this.parseIndex(l).obj,u=c.getByName("FontMatrix");u&&(e.fontMatrix=u);const d=c.getByName("FontBBox");if(d){e.ascent=Math.max(d[3],d[1]);e.descent=Math.min(d[1],d[3]);e.ascentScaled=!0}let f,g;if(t.isCIDFont){const e=this.parseIndex(c.getByName("FDArray")).obj;for(let a=0,r=e.count;a<r;++a){const r=e.get(a),i=this.createDict(CFFTopDict,this.parseDict(r),t.strings);this.parsePrivateDict(i);t.fdArray.push(i)}g=null;f=this.parseCharsets(c.getByName("charset"),h.count,t.strings,!0);t.fdSelect=this.parseFDSelect(c.getByName("FDSelect"),h.count)}else{f=this.parseCharsets(c.getByName("charset"),h.count,t.strings,!1);g=this.parseEncoding(c.getByName("Encoding"),e,t.strings,f.charset)}t.charset=f;t.encoding=g;const p=this.parseCharStrings({charStrings:h,localSubrIndex:c.privateDict.subrsIndex,globalSubrIndex:s.obj,fdSelect:t.fdSelect,fdArray:t.fdArray,privateDict:c.privateDict});t.charStrings=p.charStrings;t.seacs=p.seacs;t.widths=p.widths;return t}parseHeader(){let e=this.bytes;const t=e.length;let a=0;for(;a<t&&1!==e[a];)++a;if(a>=t)throw new FormatError("Invalid CFF header");if(0!==a){info("cff data is shifted");e=e.subarray(a);this.bytes=e}const r=e[0],i=e[1],n=e[2],s=e[3];return{obj:new CFFHeader(r,i,n,s),endPos:n}}parseDict(e){let t=0;function parseOperand(){let a=e[t++];if(30===a)return function parseFloatOperand(){let a="";const r=15,i=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],n=e.length;for(;t<n;){const n=e[t++],s=n>>4,o=15&n;if(s===r)break;a+=i[s];if(o===r)break;a+=i[o]}return parseFloat(a)}();if(28===a){a=readInt16(e,t);t+=2;return a}if(29===a){a=e[t++];a=a<<8|e[t++];a=a<<8|e[t++];a=a<<8|e[t++];return a}if(a>=32&&a<=246)return a-139;if(a>=247&&a<=250)return 256*(a-247)+e[t++]+108;if(a>=251&&a<=254)return-256*(a-251)-e[t++]-108;warn(\'CFFParser_parseDict: "\'+a+\'" is a reserved command.\');return NaN}let a=[];const r=[];t=0;const i=e.length;for(;t<i;){let i=e[t];if(i<=21){12===i&&(i=i<<8|e[++t]);r.push([i,a]);a=[];++t}else a.push(parseOperand())}return r}parseIndex(e){const t=new CFFIndex,a=this.bytes,r=a[e++]<<8|a[e++],i=[];let n,s,o=e;if(0!==r){const t=a[e++],c=e+(r+1)*t-1;for(n=0,s=r+1;n<s;++n){let r=0;for(let i=0;i<t;++i){r<<=8;r+=a[e++]}i.push(c+r)}o=i[r]}for(n=0,s=i.length-1;n<s;++n){const e=i[n],r=i[n+1];t.add(a.subarray(e,r))}return{obj:t,endPos:o}}parseNameIndex(e){const t=[];for(let a=0,r=e.count;a<r;++a){const r=e.get(a);t.push(bytesToString(r))}return t}parseStringIndex(e){const t=new CFFStrings;for(let a=0,r=e.count;a<r;++a){const r=e.get(a);t.add(bytesToString(r))}return t}createDict(e,t,a){const r=new e(a);for(const[e,a]of t)r.setByKey(e,a);return r}parseCharString(e,t,a,r){if(!t||e.callDepth>10)return!1;let i=e.stackSize;const n=e.stack;let s=t.length;for(let o=0;o<s;){const c=t[o++];let l=null;if(12===c){const e=t[o++];if(0===e){t[o-2]=139;t[o-1]=22;i=0}else l=$r[e]}else if(28===c){n[i]=readInt16(t,o);o+=2;i++}else if(14===c){if(i>=4){i-=4;if(this.seacAnalysisEnabled){e.seac=n.slice(i,i+4);return!1}}l=zr[c]}else if(c>=32&&c<=246){n[i]=c-139;i++}else if(c>=247&&c<=254){n[i]=c<251?(c-247<<8)+t[o]+108:-(c-251<<8)-t[o]-108;o++;i++}else if(255===c){n[i]=(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3])/65536;o+=4;i++}else if(19===c||20===c){e.hints+=i>>1;if(0===e.hints){t.copyWithin(o-1,o,-1);o-=1;s-=1;continue}o+=e.hints+7>>3;i%=2;l=zr[c]}else{if(10===c||29===c){const t=10===c?a:r;if(!t){l=zr[c];warn("Missing subrsIndex for "+l.id);return!1}let s=32768;t.count<1240?s=107:t.count<33900&&(s=1131);const o=n[--i]+s;if(o<0||o>=t.count||isNaN(o)){l=zr[c];warn("Out of bounds subrIndex for "+l.id);return!1}e.stackSize=i;e.callDepth++;if(!this.parseCharString(e,t.get(o),a,r))return!1;e.callDepth--;i=e.stackSize;continue}if(11===c){e.stackSize=i;return!0}if(0===c&&o===t.length){t[o-1]=14;l=zr[14]}else{if(9===c){t.copyWithin(o-1,o,-1);o-=1;s-=1;continue}l=zr[c]}}if(l){if(l.stem){e.hints+=i>>1;if(3===c||23===c)e.hasVStems=!0;else if(e.hasVStems&&(1===c||18===c)){warn("CFF stem hints are in wrong order");t[o-1]=1===c?3:23}}if("min"in l&&!e.undefStack&&i<l.min){warn("Not enough parameters for "+l.id+"; actual: "+i+", expected: "+l.min);if(0===i){t[o-1]=14;return!0}return!1}if(e.firstStackClearing&&l.stackClearing){e.firstStackClearing=!1;i-=l.min;i>=2&&l.stem?i%=2:i>1&&warn("Found too many parameters for stack-clearing command");i>0&&(e.width=n[i-1])}if("stackDelta"in l){"stackFn"in l&&l.stackFn(n,i);i+=l.stackDelta}else if(l.stackClearing)i=0;else if(l.resetStack){i=0;e.undefStack=!1}else if(l.undefStack){i=0;e.undefStack=!0;e.firstStackClearing=!1}}}s<t.length&&t.fill(14,s);e.stackSize=i;return!0}parseCharStrings({charStrings:e,localSubrIndex:t,globalSubrIndex:a,fdSelect:r,fdArray:i,privateDict:n}){const s=[],o=[],c=e.count;for(let l=0;l<c;l++){const c=e.get(l),h={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let u=!0,d=null,f=n;if(r&&i.length){const e=r.getFDIndex(l);if(-1===e){warn("Glyph index is not in fd select.");u=!1}if(e>=i.length){warn("Invalid fd index for glyph index.");u=!1}if(u){f=i[e].privateDict;d=f.subrsIndex}}else t&&(d=t);u&&(u=this.parseCharString(h,c,d,a));if(null!==h.width){const e=f.getByName("nominalWidthX");o[l]=e+h.width}else{const e=f.getByName("defaultWidthX");o[l]=e}null!==h.seac&&(s[l]=h.seac);u||e.set(l,new Uint8Array([14]))}return{charStrings:e,seacs:s,widths:o}}emptyPrivateDictionary(e){const t=this.createDict(CFFPrivateDict,[],e.strings);e.setByKey(18,[0,0]);e.privateDict=t}parsePrivateDict(e){if(!e.hasName("Private")){this.emptyPrivateDictionary(e);return}const t=e.getByName("Private");if(!Array.isArray(t)||2!==t.length){e.removeByName("Private");return}const a=t[0],r=t[1];if(0===a||r>=this.bytes.length){this.emptyPrivateDictionary(e);return}const i=r+a,n=this.bytes.subarray(r,i),s=this.parseDict(n),o=this.createDict(CFFPrivateDict,s,e.strings);e.privateDict=o;0===o.getByName("ExpansionFactor")&&o.setByName("ExpansionFactor",.06);if(!o.getByName("Subrs"))return;const c=o.getByName("Subrs"),l=r+c;if(0===c||l>=this.bytes.length){this.emptyPrivateDictionary(e);return}const h=this.parseIndex(l);o.subrsIndex=h.obj}parseCharsets(e,t,a,r){if(0===e)return new CFFCharset(!0,Kr.ISO_ADOBE,Ur);if(1===e)return new CFFCharset(!0,Kr.EXPERT,Xr);if(2===e)return new CFFCharset(!0,Kr.EXPERT_SUBSET,qr);const i=this.bytes,n=e,s=i[e++],o=[r?0:".notdef"];let c,l,h;t-=1;switch(s){case 0:for(h=0;h<t;h++){c=i[e++]<<8|i[e++];o.push(r?c:a.get(c))}break;case 1:for(;o.length<=t;){c=i[e++]<<8|i[e++];l=i[e++];for(h=0;h<=l;h++)o.push(r?c++:a.get(c++))}break;case 2:for(;o.length<=t;){c=i[e++]<<8|i[e++];l=i[e++]<<8|i[e++];for(h=0;h<=l;h++)o.push(r?c++:a.get(c++))}break;default:throw new FormatError("Unknown charset format")}const u=e,d=i.subarray(n,u);return new CFFCharset(!1,s,o,d)}parseEncoding(e,t,a,r){const i=Object.create(null),n=this.bytes;let s,o,c,l=!1,h=null;if(0===e||1===e){l=!0;s=e;const t=e?wr:Ar;for(o=0,c=r.length;o<c;o++){const e=t.indexOf(r[o]);-1!==e&&(i[e]=o)}}else{const t=e;s=n[e++];switch(127&s){case 0:const t=n[e++];for(o=1;o<=t;o++)i[n[e++]]=o;break;case 1:const a=n[e++];let r=1;for(o=0;o<a;o++){const t=n[e++],a=n[e++];for(let e=t;e<=t+a;e++)i[e]=r++}break;default:throw new FormatError(`Unknown encoding format: ${s} in CFF`)}const c=e;if(128&s){n[t]&=127;!function readSupplement(){const t=n[e++];for(o=0;o<t;o++){const t=n[e++],s=(n[e++]<<8)+(255&n[e++]);i[t]=r.indexOf(a.get(s))}}()}h=n.subarray(t,c)}s&=127;return new CFFEncoding(l,s,i,h)}parseFDSelect(e,t){const a=this.bytes,r=a[e++],i=[];let n;switch(r){case 0:for(n=0;n<t;++n){const t=a[e++];i.push(t)}break;case 3:const s=a[e++]<<8|a[e++];for(n=0;n<s;++n){let t=a[e++]<<8|a[e++];if(0===n&&0!==t){warn("parseFDSelect: The first range must have a first GID of 0 -- trying to recover.");t=0}const r=a[e++],s=a[e]<<8|a[e+1];for(let e=t;e<s;++e)i.push(r)}e+=2;break;default:throw new FormatError(`parseFDSelect: Unknown format "${r}".`)}if(i.length!==t)throw new FormatError("parseFDSelect: Invalid font data.");return new CFFFDSelect(r,i)}}class CFF{constructor(){this.header=null;this.names=[];this.topDict=null;this.strings=new CFFStrings;this.globalSubrIndex=null;this.encoding=null;this.charset=null;this.charStrings=null;this.fdArray=[];this.fdSelect=null;this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535){warn("Not enough space in charstrings to duplicate first glyph.");return}const e=this.charStrings.get(0);this.charStrings.add(e);this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(e){if(e<0||e>=this.charStrings.count)return!1;return this.charStrings.get(e).length>0}}class CFFHeader{constructor(e,t,a,r){this.major=e;this.minor=t;this.hdrSize=a;this.offSize=r}}class CFFStrings{constructor(){this.strings=[]}get(e){return e>=0&&e<=390?Hr[e]:e-Wr<=this.strings.length?this.strings[e-Wr]:Hr[0]}getSID(e){let t=Hr.indexOf(e);if(-1!==t)return t;t=this.strings.indexOf(e);return-1!==t?t+Wr:-1}add(e){this.strings.push(e)}get count(){return this.strings.length}}class CFFIndex{constructor(){this.objects=[];this.length=0}add(e){this.length+=e.length;this.objects.push(e)}set(e,t){this.length+=t.length-this.objects[e].length;this.objects[e]=t}get(e){return this.objects[e]}get count(){return this.objects.length}}class CFFDict{constructor(e,t){this.keyToNameMap=e.keyToNameMap;this.nameToKeyMap=e.nameToKeyMap;this.defaults=e.defaults;this.types=e.types;this.opcodes=e.opcodes;this.order=e.order;this.strings=t;this.values=Object.create(null)}setByKey(e,t){if(!(e in this.keyToNameMap))return!1;if(0===t.length)return!0;for(const a of t)if(isNaN(a)){warn(`Invalid CFFDict value: "${t}" for key "${e}".`);return!0}const a=this.types[e];"num"!==a&&"sid"!==a&&"offset"!==a||(t=t[0]);this.values[e]=t;return!0}setByName(e,t){if(!(e in this.nameToKeyMap))throw new FormatError(`Invalid dictionary name "${e}"`);this.values[this.nameToKeyMap[e]]=t}hasName(e){return this.nameToKeyMap[e]in this.values}getByName(e){if(!(e in this.nameToKeyMap))throw new FormatError(`Invalid dictionary name ${e}"`);const t=this.nameToKeyMap[e];return t in this.values?this.values[t]:this.defaults[t]}removeByName(e){delete this.values[this.nameToKeyMap[e]]}static createTables(e){const t={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(const a of e){const e=Array.isArray(a[0])?(a[0][0]<<8)+a[0][1]:a[0];t.keyToNameMap[e]=a[1];t.nameToKeyMap[a[1]]=e;t.types[e]=a[2];t.defaults[e]=a[3];t.opcodes[e]=Array.isArray(a[0])?a[0]:[a[0]];t.order.push(e)}return t}}const Gr=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];class CFFTopDict extends CFFDict{static get tables(){return shadow(this,"tables",this.createTables(Gr))}constructor(e){super(CFFTopDict.tables,e);this.privateDict=null}}const Vr=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];class CFFPrivateDict extends CFFDict{static get tables(){return shadow(this,"tables",this.createTables(Vr))}constructor(e){super(CFFPrivateDict.tables,e);this.subrsIndex=null}}const Kr={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class CFFCharset{constructor(e,t,a,r){this.predefined=e;this.format=t;this.charset=a;this.raw=r}}class CFFEncoding{constructor(e,t,a,r){this.predefined=e;this.format=t;this.encoding=a;this.raw=r}}class CFFFDSelect{constructor(e,t){this.format=e;this.fdSelect=t}getFDIndex(e){return e<0||e>=this.fdSelect.length?-1:this.fdSelect[e]}}class CFFOffsetTracker{constructor(){this.offsets=Object.create(null)}isTracking(e){return e in this.offsets}track(e,t){if(e in this.offsets)throw new FormatError(`Already tracking location of ${e}`);this.offsets[e]=t}offset(e){for(const t in this.offsets)this.offsets[t]+=e}setEntryLocation(e,t,a){if(!(e in this.offsets))throw new FormatError(`Not tracking location of ${e}`);const r=a.data,i=this.offsets[e];for(let e=0,a=t.length;e<a;++e){const a=5*e+i,n=a+1,s=a+2,o=a+3,c=a+4;if(29!==r[a]||0!==r[n]||0!==r[s]||0!==r[o]||0!==r[c])throw new FormatError("writing to an offset that is not empty");const l=t[e];r[a]=29;r[n]=l>>24&255;r[s]=l>>16&255;r[o]=l>>8&255;r[c]=255&l}}}class CFFCompiler{constructor(e){this.cff=e}compile(){const e=this.cff,t={data:[],length:0,add(e){try{this.data.push(...e)}catch{this.data=this.data.concat(e)}this.length=this.data.length}},a=this.compileHeader(e.header);t.add(a);const r=this.compileNameIndex(e.names);t.add(r);if(e.isCIDFont&&e.topDict.hasName("FontMatrix")){const t=e.topDict.getByName("FontMatrix");e.topDict.removeByName("FontMatrix");for(const a of e.fdArray){let e=t.slice(0);a.hasName("FontMatrix")&&(e=Util.transform(e,a.getByName("FontMatrix")));a.setByName("FontMatrix",e)}}const i=e.topDict.getByName("XUID");i?.length>16&&e.topDict.removeByName("XUID");e.topDict.setByName("charset",0);let n=this.compileTopDicts([e.topDict],t.length,e.isCIDFont);t.add(n.output);const s=n.trackers[0],o=this.compileStringIndex(e.strings.strings);t.add(o);const c=this.compileIndex(e.globalSubrIndex);t.add(c);if(e.encoding&&e.topDict.hasName("Encoding"))if(e.encoding.predefined)s.setEntryLocation("Encoding",[e.encoding.format],t);else{const a=this.compileEncoding(e.encoding);s.setEntryLocation("Encoding",[t.length],t);t.add(a)}const l=this.compileCharset(e.charset,e.charStrings.count,e.strings,e.isCIDFont);s.setEntryLocation("charset",[t.length],t);t.add(l);const h=this.compileCharStrings(e.charStrings);s.setEntryLocation("CharStrings",[t.length],t);t.add(h);if(e.isCIDFont){s.setEntryLocation("FDSelect",[t.length],t);const a=this.compileFDSelect(e.fdSelect);t.add(a);n=this.compileTopDicts(e.fdArray,t.length,!0);s.setEntryLocation("FDArray",[t.length],t);t.add(n.output);const r=n.trackers;this.compilePrivateDicts(e.fdArray,r,t)}this.compilePrivateDicts([e.topDict],[s],t);t.add([0]);return t.data}encodeNumber(e){return Number.isInteger(e)?this.encodeInteger(e):this.encodeFloat(e)}static get EncodeFloatRegExp(){return shadow(this,"EncodeFloatRegExp",/\\.(\\d*?)(?:9{5,20}|0{5,20})\\d{0,2}(?:e(.+)|$)/)}encodeFloat(e){let t=e.toString();const a=CFFCompiler.EncodeFloatRegExp.exec(t);if(a){const r=parseFloat("1e"+((a[2]?+a[2]:0)+a[1].length));t=(Math.round(e*r)/r).toString()}let r,i,n="";for(r=0,i=t.length;r<i;++r){const e=t[r];n+="e"===e?"-"===t[++r]?"c":"b":"."===e?"a":"-"===e?"e":e}n+=1&n.length?"f":"ff";const s=[30];for(r=0,i=n.length;r<i;r+=2)s.push(parseInt(n.substring(r,r+2),16));return s}encodeInteger(e){let t;t=e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?[28,e>>8&255,255&e]:[29,e>>24&255,e>>16&255,e>>8&255,255&e];return t}compileHeader(e){return[e.major,e.minor,4,e.offSize]}compileNameIndex(e){const t=new CFFIndex;for(const a of e){const e=Math.min(a.length,127);let r=new Array(e);for(let t=0;t<e;t++){let e=a[t];(e<"!"||e>"~"||"["===e||"]"===e||"("===e||")"===e||"{"===e||"}"===e||"<"===e||">"===e||"/"===e||"%"===e)&&(e="_");r[t]=e}r=r.join("");""===r&&(r="Bad_Font_Name");t.add(stringToBytes(r))}return this.compileIndex(t)}compileTopDicts(e,t,a){const r=[];let i=new CFFIndex;for(const n of e){if(a){n.removeByName("CIDFontVersion");n.removeByName("CIDFontRevision");n.removeByName("CIDFontType");n.removeByName("CIDCount");n.removeByName("UIDBase")}const e=new CFFOffsetTracker,s=this.compileDict(n,e);r.push(e);i.add(s);e.offset(t)}i=this.compileIndex(i,r);return{trackers:r,output:i}}compilePrivateDicts(e,t,a){for(let r=0,i=e.length;r<i;++r){const i=e[r],n=i.privateDict;if(!n||!i.hasName("Private"))throw new FormatError("There must be a private dictionary.");const s=new CFFOffsetTracker,o=this.compileDict(n,s);let c=a.length;s.offset(c);o.length||(c=0);t[r].setEntryLocation("Private",[o.length,c],a);a.add(o);if(n.subrsIndex&&n.hasName("Subrs")){const e=this.compileIndex(n.subrsIndex);s.setEntryLocation("Subrs",[o.length],a);a.add(e)}}}compileDict(e,t){const a=[];for(const r of e.order){if(!(r in e.values))continue;let i=e.values[r],n=e.types[r];Array.isArray(n)||(n=[n]);Array.isArray(i)||(i=[i]);if(0!==i.length){for(let s=0,o=n.length;s<o;++s){const o=n[s],c=i[s];switch(o){case"num":case"sid":a.push(...this.encodeNumber(c));break;case"offset":const n=e.keyToNameMap[r];t.isTracking(n)||t.track(n,a.length);a.push(29,0,0,0,0);break;case"array":case"delta":a.push(...this.encodeNumber(c));for(let e=1,t=i.length;e<t;++e)a.push(...this.encodeNumber(i[e]));break;default:throw new FormatError(`Unknown data type of ${o}`)}}a.push(...e.opcodes[r])}}return a}compileStringIndex(e){const t=new CFFIndex;for(const a of e)t.add(stringToBytes(a));return this.compileIndex(t)}compileCharStrings(e){const t=new CFFIndex;for(let a=0;a<e.count;a++){const r=e.get(a);0!==r.length?t.add(r):t.add(new Uint8Array([139,14]))}return this.compileIndex(t)}compileCharset(e,t,a,r){let i;const n=t-1;if(r){const e=n-1;i=new Uint8Array([2,0,1,e>>8&255,255&e])}else{i=new Uint8Array(1+2*n);i[0]=0;let t=0;const r=e.charset.length;let s=!1;for(let n=1;n<i.length;n+=2){let o=0;if(t<r){const r=e.charset[t++];o=a.getSID(r);if(-1===o){o=0;if(!s){s=!0;warn(`Couldn\'t find ${r} in CFF strings`)}}}i[n]=o>>8&255;i[n+1]=255&o}}return this.compileTypedArray(i)}compileEncoding(e){return this.compileTypedArray(e.raw)}compileFDSelect(e){const t=e.format;let a,r;switch(t){case 0:a=new Uint8Array(1+e.fdSelect.length);a[0]=t;for(r=0;r<e.fdSelect.length;r++)a[r+1]=e.fdSelect[r];break;case 3:const i=0;let n=e.fdSelect[0];const s=[t,0,0,i>>8&255,255&i,n];for(r=1;r<e.fdSelect.length;r++){const t=e.fdSelect[r];if(t!==n){s.push(r>>8&255,255&r,t);n=t}}const o=(s.length-3)/3;s[1]=o>>8&255;s[2]=255&o;s.push(r>>8&255,255&r);a=new Uint8Array(s)}return this.compileTypedArray(a)}compileTypedArray(e){return Array.from(e)}compileIndex(e,t=[]){const a=e.objects,r=a.length;if(0===r)return[0,0];const i=[r>>8&255,255&r];let n,s,o=1;for(n=0;n<r;++n)o+=a[n].length;s=o<256?1:o<65536?2:o<16777216?3:4;i.push(s);let c=1;for(n=0;n<r+1;n++){1===s?i.push(255&c):2===s?i.push(c>>8&255,255&c):3===s?i.push(c>>16&255,c>>8&255,255&c):i.push(c>>>24&255,c>>16&255,c>>8&255,255&c);a[n]&&(c+=a[n].length)}for(n=0;n<r;n++){t[n]&&t[n].offset(i.length);i.push(...a[n])}return i}}const Jr=getLookupTableFactory((function(e){e["Times-Roman"]="Times-Roman";e.Helvetica="Helvetica";e.Courier="Courier";e.Symbol="Symbol";e["Times-Bold"]="Times-Bold";e["Helvetica-Bold"]="Helvetica-Bold";e["Courier-Bold"]="Courier-Bold";e.ZapfDingbats="ZapfDingbats";e["Times-Italic"]="Times-Italic";e["Helvetica-Oblique"]="Helvetica-Oblique";e["Courier-Oblique"]="Courier-Oblique";e["Times-BoldItalic"]="Times-BoldItalic";e["Helvetica-BoldOblique"]="Helvetica-BoldOblique";e["Courier-BoldOblique"]="Courier-BoldOblique";e.ArialNarrow="Helvetica";e["ArialNarrow-Bold"]="Helvetica-Bold";e["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique";e["ArialNarrow-Italic"]="Helvetica-Oblique";e.ArialBlack="Helvetica";e["ArialBlack-Bold"]="Helvetica-Bold";e["ArialBlack-BoldItalic"]="Helvetica-BoldOblique";e["ArialBlack-Italic"]="Helvetica-Oblique";e["Arial-Black"]="Helvetica";e["Arial-Black-Bold"]="Helvetica-Bold";e["Arial-Black-BoldItalic"]="Helvetica-BoldOblique";e["Arial-Black-Italic"]="Helvetica-Oblique";e.Arial="Helvetica";e["Arial-Bold"]="Helvetica-Bold";e["Arial-BoldItalic"]="Helvetica-BoldOblique";e["Arial-Italic"]="Helvetica-Oblique";e.ArialMT="Helvetica";e["Arial-BoldItalicMT"]="Helvetica-BoldOblique";e["Arial-BoldMT"]="Helvetica-Bold";e["Arial-ItalicMT"]="Helvetica-Oblique";e["Arial-BoldItalicMT-BoldItalic"]="Helvetica-BoldOblique";e["Arial-BoldMT-Bold"]="Helvetica-Bold";e["Arial-ItalicMT-Italic"]="Helvetica-Oblique";e.ArialUnicodeMS="Helvetica";e["ArialUnicodeMS-Bold"]="Helvetica-Bold";e["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique";e["ArialUnicodeMS-Italic"]="Helvetica-Oblique";e["Courier-BoldItalic"]="Courier-BoldOblique";e["Courier-Italic"]="Courier-Oblique";e.CourierNew="Courier";e["CourierNew-Bold"]="Courier-Bold";e["CourierNew-BoldItalic"]="Courier-BoldOblique";e["CourierNew-Italic"]="Courier-Oblique";e["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique";e["CourierNewPS-BoldMT"]="Courier-Bold";e["CourierNewPS-ItalicMT"]="Courier-Oblique";e.CourierNewPSMT="Courier";e["Helvetica-BoldItalic"]="Helvetica-BoldOblique";e["Helvetica-Italic"]="Helvetica-Oblique";e["HelveticaLTStd-Bold"]="Helvetica-Bold";e["Symbol-Bold"]="Symbol";e["Symbol-BoldItalic"]="Symbol";e["Symbol-Italic"]="Symbol";e.TimesNewRoman="Times-Roman";e["TimesNewRoman-Bold"]="Times-Bold";e["TimesNewRoman-BoldItalic"]="Times-BoldItalic";e["TimesNewRoman-Italic"]="Times-Italic";e.TimesNewRomanPS="Times-Roman";e["TimesNewRomanPS-Bold"]="Times-Bold";e["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic";e["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic";e["TimesNewRomanPS-BoldMT"]="Times-Bold";e["TimesNewRomanPS-Italic"]="Times-Italic";e["TimesNewRomanPS-ItalicMT"]="Times-Italic";e.TimesNewRomanPSMT="Times-Roman";e["TimesNewRomanPSMT-Bold"]="Times-Bold";e["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic";e["TimesNewRomanPSMT-Italic"]="Times-Italic"})),Yr=getLookupTableFactory((function(e){e.Courier="FoxitFixed.pfb";e["Courier-Bold"]="FoxitFixedBold.pfb";e["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb";e["Courier-Oblique"]="FoxitFixedItalic.pfb";e.Helvetica="LiberationSans-Regular.ttf";e["Helvetica-Bold"]="LiberationSans-Bold.ttf";e["Helvetica-BoldOblique"]="LiberationSans-BoldItalic.ttf";e["Helvetica-Oblique"]="LiberationSans-Italic.ttf";e["Times-Roman"]="FoxitSerif.pfb";e["Times-Bold"]="FoxitSerifBold.pfb";e["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb";e["Times-Italic"]="FoxitSerifItalic.pfb";e.Symbol="FoxitSymbol.pfb";e.ZapfDingbats="FoxitDingbats.pfb";e["LiberationSans-Regular"]="LiberationSans-Regular.ttf";e["LiberationSans-Bold"]="LiberationSans-Bold.ttf";e["LiberationSans-Italic"]="LiberationSans-Italic.ttf";e["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"})),Zr=getLookupTableFactory((function(e){e.Calibri="Helvetica";e["Calibri-Bold"]="Helvetica-Bold";e["Calibri-BoldItalic"]="Helvetica-BoldOblique";e["Calibri-Italic"]="Helvetica-Oblique";e.CenturyGothic="Helvetica";e["CenturyGothic-Bold"]="Helvetica-Bold";e["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique";e["CenturyGothic-Italic"]="Helvetica-Oblique";e.ComicSansMS="Comic Sans MS";e["ComicSansMS-Bold"]="Comic Sans MS-Bold";e["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic";e["ComicSansMS-Italic"]="Comic Sans MS-Italic";e.GillSansMT="Helvetica";e["GillSansMT-Bold"]="Helvetica-Bold";e["GillSansMT-BoldItalic"]="Helvetica-BoldOblique";e["GillSansMT-Italic"]="Helvetica-Oblique";e.Impact="Helvetica";e["ItcSymbol-Bold"]="Helvetica-Bold";e["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique";e["ItcSymbol-Book"]="Helvetica";e["ItcSymbol-BookItalic"]="Helvetica-Oblique";e["ItcSymbol-Medium"]="Helvetica";e["ItcSymbol-MediumItalic"]="Helvetica-Oblique";e.LucidaConsole="Courier";e["LucidaConsole-Bold"]="Courier-Bold";e["LucidaConsole-BoldItalic"]="Courier-BoldOblique";e["LucidaConsole-Italic"]="Courier-Oblique";e["LucidaSans-Demi"]="Helvetica-Bold";e["MS-Gothic"]="MS Gothic";e["MS-Gothic-Bold"]="MS Gothic-Bold";e["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic";e["MS-Gothic-Italic"]="MS Gothic-Italic";e["MS-Mincho"]="MS Mincho";e["MS-Mincho-Bold"]="MS Mincho-Bold";e["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic";e["MS-Mincho-Italic"]="MS Mincho-Italic";e["MS-PGothic"]="MS PGothic";e["MS-PGothic-Bold"]="MS PGothic-Bold";e["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic";e["MS-PGothic-Italic"]="MS PGothic-Italic";e["MS-PMincho"]="MS PMincho";e["MS-PMincho-Bold"]="MS PMincho-Bold";e["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic";e["MS-PMincho-Italic"]="MS PMincho-Italic";e.NuptialScript="Times-Italic";e.SegoeUISymbol="Helvetica"})),Qr=getLookupTableFactory((function(e){e["Adobe Jenson"]=!0;e["Adobe Text"]=!0;e.Albertus=!0;e.Aldus=!0;e.Alexandria=!0;e.Algerian=!0;e["American Typewriter"]=!0;e.Antiqua=!0;e.Apex=!0;e.Arno=!0;e.Aster=!0;e.Aurora=!0;e.Baskerville=!0;e.Bell=!0;e.Bembo=!0;e["Bembo Schoolbook"]=!0;e.Benguiat=!0;e["Berkeley Old Style"]=!0;e["Bernhard Modern"]=!0;e["Berthold City"]=!0;e.Bodoni=!0;e["Bauer Bodoni"]=!0;e["Book Antiqua"]=!0;e.Bookman=!0;e["Bordeaux Roman"]=!0;e["Californian FB"]=!0;e.Calisto=!0;e.Calvert=!0;e.Capitals=!0;e.Cambria=!0;e.Cartier=!0;e.Caslon=!0;e.Catull=!0;e.Centaur=!0;e["Century Old Style"]=!0;e["Century Schoolbook"]=!0;e.Chaparral=!0;e["Charis SIL"]=!0;e.Cheltenham=!0;e["Cholla Slab"]=!0;e.Clarendon=!0;e.Clearface=!0;e.Cochin=!0;e.Colonna=!0;e["Computer Modern"]=!0;e["Concrete Roman"]=!0;e.Constantia=!0;e["Cooper Black"]=!0;e.Corona=!0;e.Ecotype=!0;e.Egyptienne=!0;e.Elephant=!0;e.Excelsior=!0;e.Fairfield=!0;e["FF Scala"]=!0;e.Folkard=!0;e.Footlight=!0;e.FreeSerif=!0;e["Friz Quadrata"]=!0;e.Garamond=!0;e.Gentium=!0;e.Georgia=!0;e.Gloucester=!0;e["Goudy Old Style"]=!0;e["Goudy Schoolbook"]=!0;e["Goudy Pro Font"]=!0;e.Granjon=!0;e["Guardian Egyptian"]=!0;e.Heather=!0;e.Hercules=!0;e["High Tower Text"]=!0;e.Hiroshige=!0;e["Hoefler Text"]=!0;e["Humana Serif"]=!0;e.Imprint=!0;e["Ionic No. 5"]=!0;e.Janson=!0;e.Joanna=!0;e.Korinna=!0;e.Lexicon=!0;e.LiberationSerif=!0;e["Liberation Serif"]=!0;e["Linux Libertine"]=!0;e.Literaturnaya=!0;e.Lucida=!0;e["Lucida Bright"]=!0;e.Melior=!0;e.Memphis=!0;e.Miller=!0;e.Minion=!0;e.Modern=!0;e["Mona Lisa"]=!0;e["Mrs Eaves"]=!0;e["MS Serif"]=!0;e["Museo Slab"]=!0;e["New York"]=!0;e["Nimbus Roman"]=!0;e["NPS Rawlinson Roadway"]=!0;e.NuptialScript=!0;e.Palatino=!0;e.Perpetua=!0;e.Plantin=!0;e["Plantin Schoolbook"]=!0;e.Playbill=!0;e["Poor Richard"]=!0;e["Rawlinson Roadway"]=!0;e.Renault=!0;e.Requiem=!0;e.Rockwell=!0;e.Roman=!0;e["Rotis Serif"]=!0;e.Sabon=!0;e.Scala=!0;e.Seagull=!0;e.Sistina=!0;e.Souvenir=!0;e.STIX=!0;e["Stone Informal"]=!0;e["Stone Serif"]=!0;e.Sylfaen=!0;e.Times=!0;e.Trajan=!0;e["TrinitÃ©"]=!0;e["Trump Mediaeval"]=!0;e.Utopia=!0;e["Vale Type"]=!0;e["Bitstream Vera"]=!0;e["Vera Serif"]=!0;e.Versailles=!0;e.Wanted=!0;e.Weiss=!0;e["Wide Latin"]=!0;e.Windsor=!0;e.XITS=!0})),ei=getLookupTableFactory((function(e){e.Dingbats=!0;e.Symbol=!0;e.ZapfDingbats=!0;e.Wingdings=!0;e["Wingdings-Bold"]=!0;e["Wingdings-Regular"]=!0})),ti=getLookupTableFactory((function(e){e[2]=10;e[3]=32;e[4]=33;e[5]=34;e[6]=35;e[7]=36;e[8]=37;e[9]=38;e[10]=39;e[11]=40;e[12]=41;e[13]=42;e[14]=43;e[15]=44;e[16]=45;e[17]=46;e[18]=47;e[19]=48;e[20]=49;e[21]=50;e[22]=51;e[23]=52;e[24]=53;e[25]=54;e[26]=55;e[27]=56;e[28]=57;e[29]=58;e[30]=894;e[31]=60;e[32]=61;e[33]=62;e[34]=63;e[35]=64;e[36]=65;e[37]=66;e[38]=67;e[39]=68;e[40]=69;e[41]=70;e[42]=71;e[43]=72;e[44]=73;e[45]=74;e[46]=75;e[47]=76;e[48]=77;e[49]=78;e[50]=79;e[51]=80;e[52]=81;e[53]=82;e[54]=83;e[55]=84;e[56]=85;e[57]=86;e[58]=87;e[59]=88;e[60]=89;e[61]=90;e[62]=91;e[63]=92;e[64]=93;e[65]=94;e[66]=95;e[67]=96;e[68]=97;e[69]=98;e[70]=99;e[71]=100;e[72]=101;e[73]=102;e[74]=103;e[75]=104;e[76]=105;e[77]=106;e[78]=107;e[79]=108;e[80]=109;e[81]=110;e[82]=111;e[83]=112;e[84]=113;e[85]=114;e[86]=115;e[87]=116;e[88]=117;e[89]=118;e[90]=119;e[91]=120;e[92]=121;e[93]=122;e[94]=123;e[95]=124;e[96]=125;e[97]=126;e[98]=196;e[99]=197;e[100]=199;e[101]=201;e[102]=209;e[103]=214;e[104]=220;e[105]=225;e[106]=224;e[107]=226;e[108]=228;e[109]=227;e[110]=229;e[111]=231;e[112]=233;e[113]=232;e[114]=234;e[115]=235;e[116]=237;e[117]=236;e[118]=238;e[119]=239;e[120]=241;e[121]=243;e[122]=242;e[123]=244;e[124]=246;e[125]=245;e[126]=250;e[127]=249;e[128]=251;e[129]=252;e[130]=8224;e[131]=176;e[132]=162;e[133]=163;e[134]=167;e[135]=8226;e[136]=182;e[137]=223;e[138]=174;e[139]=169;e[140]=8482;e[141]=180;e[142]=168;e[143]=8800;e[144]=198;e[145]=216;e[146]=8734;e[147]=177;e[148]=8804;e[149]=8805;e[150]=165;e[151]=181;e[152]=8706;e[153]=8721;e[154]=8719;e[156]=8747;e[157]=170;e[158]=186;e[159]=8486;e[160]=230;e[161]=248;e[162]=191;e[163]=161;e[164]=172;e[165]=8730;e[166]=402;e[167]=8776;e[168]=8710;e[169]=171;e[170]=187;e[171]=8230;e[179]=8220;e[180]=8221;e[181]=8216;e[182]=8217;e[200]=193;e[203]=205;e[207]=211;e[210]=218;e[223]=711;e[224]=321;e[225]=322;e[226]=352;e[227]=353;e[228]=381;e[229]=382;e[233]=221;e[234]=253;e[252]=263;e[253]=268;e[254]=269;e[258]=258;e[260]=260;e[261]=261;e[265]=280;e[266]=281;e[267]=282;e[268]=283;e[269]=313;e[275]=323;e[276]=324;e[278]=328;e[283]=344;e[284]=345;e[285]=346;e[286]=347;e[292]=367;e[295]=377;e[296]=378;e[298]=380;e[305]=963;e[306]=964;e[307]=966;e[308]=8215;e[309]=8252;e[310]=8319;e[311]=8359;e[312]=8592;e[313]=8593;e[337]=9552;e[493]=1039;e[494]=1040;e[570]=1040;e[571]=1041;e[572]=1042;e[573]=1043;e[574]=1044;e[575]=1045;e[576]=1046;e[577]=1047;e[578]=1048;e[579]=1049;e[580]=1050;e[581]=1051;e[582]=1052;e[583]=1053;e[584]=1054;e[585]=1055;e[586]=1056;e[587]=1057;e[588]=1058;e[589]=1059;e[590]=1060;e[591]=1061;e[592]=1062;e[593]=1063;e[594]=1064;e[595]=1065;e[596]=1066;e[597]=1067;e[598]=1068;e[599]=1069;e[600]=1070;e[672]=1488;e[673]=1489;e[674]=1490;e[675]=1491;e[676]=1492;e[677]=1493;e[678]=1494;e[679]=1495;e[680]=1496;e[681]=1497;e[682]=1498;e[683]=1499;e[684]=1500;e[685]=1501;e[686]=1502;e[687]=1503;e[688]=1504;e[689]=1505;e[690]=1506;e[691]=1507;e[692]=1508;e[693]=1509;e[694]=1510;e[695]=1511;e[696]=1512;e[697]=1513;e[698]=1514;e[705]=1524;e[706]=8362;e[710]=64288;e[711]=64298;e[759]=1617;e[761]=1776;e[763]=1778;e[775]=1652;e[777]=1764;e[778]=1780;e[779]=1781;e[780]=1782;e[782]=771;e[783]=64726;e[786]=8363;e[788]=8532;e[790]=768;e[791]=769;e[792]=768;e[795]=803;e[797]=64336;e[798]=64337;e[799]=64342;e[800]=64343;e[801]=64344;e[802]=64345;e[803]=64362;e[804]=64363;e[805]=64364;e[2424]=7821;e[2425]=7822;e[2426]=7823;e[2427]=7824;e[2428]=7825;e[2429]=7826;e[2430]=7827;e[2433]=7682;e[2678]=8045;e[2679]=8046;e[2830]=1552;e[2838]=686;e[2840]=751;e[2842]=753;e[2843]=754;e[2844]=755;e[2846]=757;e[2856]=767;e[2857]=848;e[2858]=849;e[2862]=853;e[2863]=854;e[2864]=855;e[2865]=861;e[2866]=862;e[2906]=7460;e[2908]=7462;e[2909]=7463;e[2910]=7464;e[2912]=7466;e[2913]=7467;e[2914]=7468;e[2916]=7470;e[2917]=7471;e[2918]=7472;e[2920]=7474;e[2921]=7475;e[2922]=7476;e[2924]=7478;e[2925]=7479;e[2926]=7480;e[2928]=7482;e[2929]=7483;e[2930]=7484;e[2932]=7486;e[2933]=7487;e[2934]=7488;e[2936]=7490;e[2937]=7491;e[2938]=7492;e[2940]=7494;e[2941]=7495;e[2942]=7496;e[2944]=7498;e[2946]=7500;e[2948]=7502;e[2950]=7504;e[2951]=7505;e[2952]=7506;e[2954]=7508;e[2955]=7509;e[2956]=7510;e[2958]=7512;e[2959]=7513;e[2960]=7514;e[2962]=7516;e[2963]=7517;e[2964]=7518;e[2966]=7520;e[2967]=7521;e[2968]=7522;e[2970]=7524;e[2971]=7525;e[2972]=7526;e[2974]=7528;e[2975]=7529;e[2976]=7530;e[2978]=1537;e[2979]=1538;e[2980]=1539;e[2982]=1549;e[2983]=1551;e[2984]=1552;e[2986]=1554;e[2987]=1555;e[2988]=1556;e[2990]=1623;e[2991]=1624;e[2995]=1775;e[2999]=1791;e[3002]=64290;e[3003]=64291;e[3004]=64292;e[3006]=64294;e[3007]=64295;e[3008]=64296;e[3011]=1900;e[3014]=8223;e[3015]=8244;e[3017]=7532;e[3018]=7533;e[3019]=7534;e[3075]=7590;e[3076]=7591;e[3079]=7594;e[3080]=7595;e[3083]=7598;e[3084]=7599;e[3087]=7602;e[3088]=7603;e[3091]=7606;e[3092]=7607;e[3095]=7610;e[3096]=7611;e[3099]=7614;e[3100]=7615;e[3103]=7618;e[3104]=7619;e[3107]=8337;e[3108]=8338;e[3116]=1884;e[3119]=1885;e[3120]=1885;e[3123]=1886;e[3124]=1886;e[3127]=1887;e[3128]=1887;e[3131]=1888;e[3132]=1888;e[3135]=1889;e[3136]=1889;e[3139]=1890;e[3140]=1890;e[3143]=1891;e[3144]=1891;e[3147]=1892;e[3148]=1892;e[3153]=580;e[3154]=581;e[3157]=584;e[3158]=585;e[3161]=588;e[3162]=589;e[3165]=891;e[3166]=892;e[3169]=1274;e[3170]=1275;e[3173]=1278;e[3174]=1279;e[3181]=7622;e[3182]=7623;e[3282]=11799;e[3316]=578;e[3379]=42785;e[3393]=1159;e[3416]=8377})),ai=getLookupTableFactory((function(e){e[227]=322;e[264]=261;e[291]=346})),ri=getLookupTableFactory((function(e){e[1]=32;e[4]=65;e[5]=192;e[6]=193;e[9]=196;e[17]=66;e[18]=67;e[21]=268;e[24]=68;e[28]=69;e[29]=200;e[30]=201;e[32]=282;e[38]=70;e[39]=71;e[44]=72;e[47]=73;e[48]=204;e[49]=205;e[58]=74;e[60]=75;e[62]=76;e[68]=77;e[69]=78;e[75]=79;e[76]=210;e[80]=214;e[87]=80;e[89]=81;e[90]=82;e[92]=344;e[94]=83;e[97]=352;e[100]=84;e[104]=85;e[109]=220;e[115]=86;e[116]=87;e[121]=88;e[122]=89;e[124]=221;e[127]=90;e[129]=381;e[258]=97;e[259]=224;e[260]=225;e[263]=228;e[268]=261;e[271]=98;e[272]=99;e[273]=263;e[275]=269;e[282]=100;e[286]=101;e[287]=232;e[288]=233;e[290]=283;e[295]=281;e[296]=102;e[336]=103;e[346]=104;e[349]=105;e[350]=236;e[351]=237;e[361]=106;e[364]=107;e[367]=108;e[371]=322;e[373]=109;e[374]=110;e[381]=111;e[382]=242;e[383]=243;e[386]=246;e[393]=112;e[395]=113;e[396]=114;e[398]=345;e[400]=115;e[401]=347;e[403]=353;e[410]=116;e[437]=117;e[442]=252;e[448]=118;e[449]=119;e[454]=120;e[455]=121;e[457]=253;e[460]=122;e[462]=382;e[463]=380;e[853]=44;e[855]=58;e[856]=46;e[876]=47;e[878]=45;e[882]=45;e[894]=40;e[895]=41;e[896]=91;e[897]=93;e[923]=64;e[940]=163;e[1004]=48;e[1005]=49;e[1006]=50;e[1007]=51;e[1008]=52;e[1009]=53;e[1010]=54;e[1011]=55;e[1012]=56;e[1013]=57;e[1081]=37;e[1085]=43;e[1086]=45}));function getStandardFontName(e){const t=normalizeFontName(e);return Jr()[t]}function isKnownFontName(e){const t=normalizeFontName(e);return!!(Jr()[t]||Zr()[t]||Qr()[t]||ei()[t])}class ToUnicodeMap{constructor(e=[]){this._map=e}get length(){return this._map.length}forEach(e){for(const t in this._map)e(t,this._map[t].codePointAt(0))}has(e){return void 0!==this._map[e]}get(e){return this._map[e]}charCodeOf(e){const t=this._map;if(t.length<=65536)return t.indexOf(e);for(const a in t)if(t[a]===e)return 0|a;return-1}amend(e){for(const t in e)this._map[t]=e[t]}}class IdentityToUnicodeMap{constructor(e,t){this.firstChar=e;this.lastChar=t}get length(){return this.lastChar+1-this.firstChar}forEach(e){for(let t=this.firstChar,a=this.lastChar;t<=a;t++)e(t,t)}has(e){return this.firstChar<=e&&e<=this.lastChar}get(e){if(this.firstChar<=e&&e<=this.lastChar)return String.fromCharCode(e)}charCodeOf(e){return Number.isInteger(e)&&e>=this.firstChar&&e<=this.lastChar?e:-1}amend(e){unreachable("Should not call amend()")}}class CFFFont{constructor(e,t){this.properties=t;const a=new CFFParser(e,t,Rr);this.cff=a.parse();this.cff.duplicateFirstGlyph();const r=new CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=r.compile()}catch{warn("Failed to compile font "+t.loadedName);this.data=e}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const e=this.cff,t=this.properties,{cidToGidMap:a,cMap:r}=t,i=e.charset.charset;let n,s;if(t.composite){let t,o;if(a?.length>0){t=Object.create(null);for(let e=0,r=a.length;e<r;e++){const r=a[e];void 0!==r&&(t[r]=e)}}n=Object.create(null);if(e.isCIDFont)for(s=0;s<i.length;s++){const e=i[s];o=r.charCodeOf(e);void 0!==t?.[o]&&(o=t[o]);n[o]=s}else for(s=0;s<e.charStrings.count;s++){o=r.charCodeOf(s);n[o]=s}return n}let o=e.encoding?e.encoding.encoding:null;t.isInternalFont&&(o=t.defaultEncoding);n=type1FontGlyphMapping(t,o,i);return n}hasGlyphId(e){return this.cff.hasGlyphId(e)}_createBuiltInEncoding(){const{charset:e,encoding:t}=this.cff;if(!e||!t)return;const a=e.charset,r=t.encoding,i=[];for(const e in r){const t=r[e];if(t>=0){const r=a[t];r&&(i[e]=r)}}i.length>0&&(this.properties.builtInEncoding=i)}}function getFloat214(e,t){return readInt16(e,t)/16384}function getSubroutineBias(e){const t=e.length;let a=32768;t<1240?a=107:t<33900&&(a=1131);return a}function parseCmap(e,t,a){const r=1===readUint16(e,t+2)?readUint32(e,t+8):readUint32(e,t+16),i=readUint16(e,t+r);let n,s,o;if(4===i){readUint16(e,t+r+2);const a=readUint16(e,t+r+6)>>1;s=t+r+14;n=[];for(o=0;o<a;o++,s+=2)n[o]={end:readUint16(e,s)};s+=2;for(o=0;o<a;o++,s+=2)n[o].start=readUint16(e,s);for(o=0;o<a;o++,s+=2)n[o].idDelta=readUint16(e,s);for(o=0;o<a;o++,s+=2){let t=readUint16(e,s);if(0!==t){n[o].ids=[];for(let a=0,r=n[o].end-n[o].start+1;a<r;a++){n[o].ids[a]=readUint16(e,s+t);t+=2}}}return n}if(12===i){const a=readUint32(e,t+r+12);s=t+r+16;n=[];for(o=0;o<a;o++){t=readUint32(e,s);n.push({start:t,end:readUint32(e,s+4),idDelta:readUint32(e,s+8)-t});s+=12}return n}throw new FormatError(`unsupported cmap: ${i}`)}function parseCff(e,t,a,r){const i=new CFFParser(new Stream(e,t,a-t),{},r).parse();return{glyphs:i.charStrings.objects,subrs:i.topDict.privateDict?.subrsIndex?.objects,gsubrs:i.globalSubrIndex?.objects,isCFFCIDFont:i.isCIDFont,fdSelect:i.fdSelect,fdArray:i.fdArray}}function lookupCmap(e,t){const a=t.codePointAt(0);let r=0,i=0,n=e.length-1;for(;i<n;){const t=i+n+1>>1;a<e[t].start?n=t-1:i=t}e[i].start<=a&&a<=e[i].end&&(r=e[i].idDelta+(e[i].ids?e[i].ids[a-e[i].start]:a)&65535);return{charCode:a,glyphId:r}}function compileGlyf(e,t,a){function moveTo(e,a){s&&t.add("L",s);s=[e,a];t.add("M",[e,a])}function lineTo(e,a){t.add("L",[e,a])}function quadraticCurveTo(e,a,r,i){t.add("Q",[e,a,r,i])}let r=0;const i=readInt16(e,r);let n,s=null,o=0,c=0;r+=10;if(i<0)do{n=readUint16(e,r);const i=readUint16(e,r+2);r+=4;let s,l;if(1&n){if(2&n){s=readInt16(e,r);l=readInt16(e,r+2)}else{s=readUint16(e,r);l=readUint16(e,r+2)}r+=4}else if(2&n){s=readInt8(e,r++);l=readInt8(e,r++)}else{s=e[r++];l=e[r++]}if(2&n){o=s;c=l}else{o=0;c=0}let h=1,u=1,d=0,f=0;if(8&n){h=u=getFloat214(e,r);r+=2}else if(64&n){h=getFloat214(e,r);u=getFloat214(e,r+2);r+=4}else if(128&n){h=getFloat214(e,r);d=getFloat214(e,r+2);f=getFloat214(e,r+4);u=getFloat214(e,r+6);r+=8}const g=a.glyphs[i];if(g){t.save();t.transform([h,d,f,u,o,c]);compileGlyf(g,t,a);t.restore()}}while(32&n);else{const t=[];let a,s;for(a=0;a<i;a++){t.push(readUint16(e,r));r+=2}r+=2+readUint16(e,r);const l=t.at(-1)+1,h=[];for(;h.length<l;){n=e[r++];let t=1;8&n&&(t+=e[r++]);for(;t-- >0;)h.push({flags:n})}for(a=0;a<l;a++){switch(18&h[a].flags){case 0:o+=readInt16(e,r);r+=2;break;case 2:o-=e[r++];break;case 18:o+=e[r++]}h[a].x=o}for(a=0;a<l;a++){switch(36&h[a].flags){case 0:c+=readInt16(e,r);r+=2;break;case 4:c-=e[r++];break;case 36:c+=e[r++]}h[a].y=c}let u=0;for(r=0;r<i;r++){const e=t[r],i=h.slice(u,e+1);if(1&i[0].flags)i.push(i[0]);else if(1&i.at(-1).flags)i.unshift(i.at(-1));else{const e={flags:1,x:(i[0].x+i.at(-1).x)/2,y:(i[0].y+i.at(-1).y)/2};i.unshift(e);i.push(e)}moveTo(i[0].x,i[0].y);for(a=1,s=i.length;a<s;a++)if(1&i[a].flags)lineTo(i[a].x,i[a].y);else if(1&i[a+1].flags){quadraticCurveTo(i[a].x,i[a].y,i[a+1].x,i[a+1].y);a++}else quadraticCurveTo(i[a].x,i[a].y,(i[a].x+i[a+1].x)/2,(i[a].y+i[a+1].y)/2);u=e+1}}}function compileCharString(e,t,a,r){function moveTo(e,a){c&&t.add("L",c);c=[e,a];t.add("M",[e,a])}function lineTo(e,a){t.add("L",[e,a])}function bezierCurveTo(e,a,r,i,n,s){t.add("C",[e,a,r,i,n,s])}const i=[];let n=0,s=0,o=0,c=null;!function parse(e){let c=0;for(;c<e.length;){let l,h,u,d,f,g,p,m,b,y=!1,w=e[c++];switch(w){case 1:case 3:case 18:case 23:o+=i.length>>1;y=!0;break;case 4:s+=i.pop();moveTo(n,s);y=!0;break;case 5:for(;i.length>0;){n+=i.shift();s+=i.shift();lineTo(n,s)}break;case 6:for(;i.length>0;){n+=i.shift();lineTo(n,s);if(0===i.length)break;s+=i.shift();lineTo(n,s)}break;case 7:for(;i.length>0;){s+=i.shift();lineTo(n,s);if(0===i.length)break;n+=i.shift();lineTo(n,s)}break;case 8:for(;i.length>0;){l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+i.shift();bezierCurveTo(l,u,h,d,n,s)}break;case 10:m=i.pop();b=null;if(a.isCFFCIDFont){const e=a.fdSelect.getFDIndex(r);if(e>=0&&e<a.fdArray.length){const t=a.fdArray[e];let r;t.privateDict?.subrsIndex&&(r=t.privateDict.subrsIndex.objects);if(r){m+=getSubroutineBias(r);b=r[m]}}else warn("Invalid fd index for glyph index.")}else b=a.subrs[m+a.subrsBias];b&&parse(b);break;case 11:return;case 12:w=e[c++];switch(w){case 34:l=n+i.shift();h=l+i.shift();f=s+i.shift();n=h+i.shift();bezierCurveTo(l,s,h,f,n,f);l=n+i.shift();h=l+i.shift();n=h+i.shift();bezierCurveTo(l,f,h,s,n,s);break;case 35:l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+i.shift();bezierCurveTo(l,u,h,d,n,s);l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+i.shift();bezierCurveTo(l,u,h,d,n,s);i.pop();break;case 36:l=n+i.shift();f=s+i.shift();h=l+i.shift();g=f+i.shift();n=h+i.shift();bezierCurveTo(l,f,h,g,n,g);l=n+i.shift();h=l+i.shift();p=g+i.shift();n=h+i.shift();bezierCurveTo(l,g,h,p,n,s);break;case 37:const e=n,t=s;l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+i.shift();bezierCurveTo(l,u,h,d,n,s);l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h;s=d;Math.abs(n-e)>Math.abs(s-t)?n+=i.shift():s+=i.shift();bezierCurveTo(l,u,h,d,n,s);break;default:throw new FormatError(`unknown operator: 12 ${w}`)}break;case 14:if(i.length>=4){const e=i.pop(),r=i.pop();s=i.pop();n=i.pop();t.save();t.translate(n,s);let o=lookupCmap(a.cmap,String.fromCharCode(a.glyphNameMap[Ar[e]]));compileCharString(a.glyphs[o.glyphId],t,a,o.glyphId);t.restore();o=lookupCmap(a.cmap,String.fromCharCode(a.glyphNameMap[Ar[r]]));compileCharString(a.glyphs[o.glyphId],t,a,o.glyphId)}return;case 19:case 20:o+=i.length>>1;c+=o+7>>3;y=!0;break;case 21:s+=i.pop();n+=i.pop();moveTo(n,s);y=!0;break;case 22:n+=i.pop();moveTo(n,s);y=!0;break;case 24:for(;i.length>2;){l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+i.shift();bezierCurveTo(l,u,h,d,n,s)}n+=i.shift();s+=i.shift();lineTo(n,s);break;case 25:for(;i.length>6;){n+=i.shift();s+=i.shift();lineTo(n,s)}l=n+i.shift();u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+i.shift();bezierCurveTo(l,u,h,d,n,s);break;case 26:i.length%2&&(n+=i.shift());for(;i.length>0;){l=n;u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h;s=d+i.shift();bezierCurveTo(l,u,h,d,n,s)}break;case 27:i.length%2&&(s+=i.shift());for(;i.length>0;){l=n+i.shift();u=s;h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d;bezierCurveTo(l,u,h,d,n,s)}break;case 28:i.push(readInt16(e,c));c+=2;break;case 29:m=i.pop()+a.gsubrsBias;b=a.gsubrs[m];b&&parse(b);break;case 30:for(;i.length>0;){l=n;u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+(1===i.length?i.shift():0);bezierCurveTo(l,u,h,d,n,s);if(0===i.length)break;l=n+i.shift();u=s;h=l+i.shift();d=u+i.shift();s=d+i.shift();n=h+(1===i.length?i.shift():0);bezierCurveTo(l,u,h,d,n,s)}break;case 31:for(;i.length>0;){l=n+i.shift();u=s;h=l+i.shift();d=u+i.shift();s=d+i.shift();n=h+(1===i.length?i.shift():0);bezierCurveTo(l,u,h,d,n,s);if(0===i.length)break;l=n;u=s+i.shift();h=l+i.shift();d=u+i.shift();n=h+i.shift();s=d+(1===i.length?i.shift():0);bezierCurveTo(l,u,h,d,n,s)}break;default:if(w<32)throw new FormatError(`unknown operator: ${w}`);if(w<247)i.push(w-139);else if(w<251)i.push(256*(w-247)+e[c++]+108);else if(w<255)i.push(256*-(w-251)-e[c++]-108);else{i.push((e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3])/65536);c+=4}}y&&(i.length=0)}}(e)}class Commands{cmds=[];transformStack=[];currentTransform=[1,0,0,1,0,0];add(e,t){if(t){const{currentTransform:a}=this;for(let e=0,r=t.length;e<r;e+=2)Util.applyTransform(t,a,e);this.cmds.push(`${e}${t.join(" ")}`)}else this.cmds.push(e)}transform(e){this.currentTransform=Util.transform(this.currentTransform,e)}translate(e,t){this.transform([1,0,0,1,e,t])}save(){this.transformStack.push(this.currentTransform.slice())}restore(){this.currentTransform=this.transformStack.pop()||[1,0,0,1,0,0]}getSVG(){return this.cmds.join("")}}class CompiledFont{constructor(e){this.fontMatrix=e;this.compiledGlyphs=Object.create(null);this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(e){const{charCode:t,glyphId:a}=lookupCmap(this.cmap,e);let r,i=this.compiledGlyphs[a];if(void 0===i){try{i=this.compileGlyph(this.glyphs[a],a)}catch(e){i="";r=e}this.compiledGlyphs[a]=i}this.compiledCharCodeToGlyphId[t]??=a;if(r)throw r;return i}compileGlyph(e,a){if(!e?.length||14===e[0])return"";let r=this.fontMatrix;if(this.isCFFCIDFont){const e=this.fdSelect.getFDIndex(a);if(e>=0&&e<this.fdArray.length){r=this.fdArray[e].getByName("FontMatrix")||t}else warn("Invalid fd index for glyph index.")}assert(isNumberArray(r,6),"Expected a valid fontMatrix.");const i=new Commands;i.transform(r.slice());this.compileGlyphImpl(e,i,a);i.add("Z");return i.getSVG()}compileGlyphImpl(){unreachable("Children classes should implement this.")}hasBuiltPath(e){const{charCode:t,glyphId:a}=lookupCmap(this.cmap,e);return void 0!==this.compiledGlyphs[a]&&void 0!==this.compiledCharCodeToGlyphId[t]}}class TrueTypeCompiled extends CompiledFont{constructor(e,t,a){super(a||[488e-6,0,0,488e-6,0,0]);this.glyphs=e;this.cmap=t}compileGlyphImpl(e,t){compileGlyf(e,t,this)}}class Type2Compiled extends CompiledFont{constructor(e,t,a){super(a||[.001,0,0,.001,0,0]);this.glyphs=e.glyphs;this.gsubrs=e.gsubrs||[];this.subrs=e.subrs||[];this.cmap=t;this.glyphNameMap=Fr();this.gsubrsBias=getSubroutineBias(this.gsubrs);this.subrsBias=getSubroutineBias(this.subrs);this.isCFFCIDFont=e.isCFFCIDFont;this.fdSelect=e.fdSelect;this.fdArray=e.fdArray}compileGlyphImpl(e,t,a){compileCharString(e,t,this,a)}}class FontRendererFactory{static create(e,t){const a=new Uint8Array(e.data);let r,i,n,s,o,c;const l=readUint16(a,4);for(let e=0,h=12;e<l;e++,h+=16){const e=bytesToString(a.subarray(h,h+4)),l=readUint32(a,h+8),u=readUint32(a,h+12);switch(e){case"cmap":r=parseCmap(a,l);break;case"glyf":i=a.subarray(l,l+u);break;case"loca":n=a.subarray(l,l+u);break;case"head":c=readUint16(a,l+18);o=readUint16(a,l+50);break;case"CFF ":s=parseCff(a,l,l+u,t)}}if(i){const t=c?[1/c,0,0,1/c,0,0]:e.fontMatrix;return new TrueTypeCompiled(function parseGlyfTable(e,t,a){let r,i;if(a){r=4;i=readUint32}else{r=2;i=(e,t)=>2*readUint16(e,t)}const n=[];let s=i(t,0);for(let a=r;a<t.length;a+=r){const r=i(t,a);n.push(e.subarray(s,r));s=r}return n}(i,n,o),r,t)}return new Type2Compiled(s,r,e.fontMatrix)}}const ii=getLookupTableFactory((function(e){e.Courier=600;e["Courier-Bold"]=600;e["Courier-BoldOblique"]=600;e["Courier-Oblique"]=600;e.Helvetica=getLookupTableFactory((function(e){e.space=278;e.exclam=278;e.quotedbl=355;e.numbersign=556;e.dollar=556;e.percent=889;e.ampersand=667;e.quoteright=222;e.parenleft=333;e.parenright=333;e.asterisk=389;e.plus=584;e.comma=278;e.hyphen=333;e.period=278;e.slash=278;e.zero=556;e.one=556;e.two=556;e.three=556;e.four=556;e.five=556;e.six=556;e.seven=556;e.eight=556;e.nine=556;e.colon=278;e.semicolon=278;e.less=584;e.equal=584;e.greater=584;e.question=556;e.at=1015;e.A=667;e.B=667;e.C=722;e.D=722;e.E=667;e.F=611;e.G=778;e.H=722;e.I=278;e.J=500;e.K=667;e.L=556;e.M=833;e.N=722;e.O=778;e.P=667;e.Q=778;e.R=722;e.S=667;e.T=611;e.U=722;e.V=667;e.W=944;e.X=667;e.Y=667;e.Z=611;e.bracketleft=278;e.backslash=278;e.bracketright=278;e.asciicircum=469;e.underscore=556;e.quoteleft=222;e.a=556;e.b=556;e.c=500;e.d=556;e.e=556;e.f=278;e.g=556;e.h=556;e.i=222;e.j=222;e.k=500;e.l=222;e.m=833;e.n=556;e.o=556;e.p=556;e.q=556;e.r=333;e.s=500;e.t=278;e.u=556;e.v=500;e.w=722;e.x=500;e.y=500;e.z=500;e.braceleft=334;e.bar=260;e.braceright=334;e.asciitilde=584;e.exclamdown=333;e.cent=556;e.sterling=556;e.fraction=167;e.yen=556;e.florin=556;e.section=556;e.currency=556;e.quotesingle=191;e.quotedblleft=333;e.guillemotleft=556;e.guilsinglleft=333;e.guilsinglright=333;e.fi=500;e.fl=500;e.endash=556;e.dagger=556;e.daggerdbl=556;e.periodcentered=278;e.paragraph=537;e.bullet=350;e.quotesinglbase=222;e.quotedblbase=333;e.quotedblright=333;e.guillemotright=556;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=611;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=1e3;e.ordfeminine=370;e.Lslash=556;e.Oslash=778;e.OE=1e3;e.ordmasculine=365;e.ae=889;e.dotlessi=278;e.lslash=222;e.oslash=611;e.oe=944;e.germandbls=611;e.Idieresis=278;e.eacute=556;e.abreve=556;e.uhungarumlaut=556;e.ecaron=556;e.Ydieresis=667;e.divide=584;e.Yacute=667;e.Acircumflex=667;e.aacute=556;e.Ucircumflex=722;e.yacute=500;e.scommaaccent=500;e.ecircumflex=556;e.Uring=722;e.Udieresis=722;e.aogonek=556;e.Uacute=722;e.uogonek=556;e.Edieresis=667;e.Dcroat=722;e.commaaccent=250;e.copyright=737;e.Emacron=667;e.ccaron=500;e.aring=556;e.Ncommaaccent=722;e.lacute=222;e.agrave=556;e.Tcommaaccent=611;e.Cacute=722;e.atilde=556;e.Edotaccent=667;e.scaron=500;e.scedilla=500;e.iacute=278;e.lozenge=471;e.Rcaron=722;e.Gcommaaccent=778;e.ucircumflex=556;e.acircumflex=556;e.Amacron=667;e.rcaron=333;e.ccedilla=500;e.Zdotaccent=611;e.Thorn=667;e.Omacron=778;e.Racute=722;e.Sacute=667;e.dcaron=643;e.Umacron=722;e.uring=556;e.threesuperior=333;e.Ograve=778;e.Agrave=667;e.Abreve=667;e.multiply=584;e.uacute=556;e.Tcaron=611;e.partialdiff=476;e.ydieresis=500;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=667;e.adieresis=556;e.edieresis=556;e.cacute=500;e.nacute=556;e.umacron=556;e.Ncaron=722;e.Iacute=278;e.plusminus=584;e.brokenbar=260;e.registered=737;e.Gbreve=778;e.Idotaccent=278;e.summation=600;e.Egrave=667;e.racute=333;e.omacron=556;e.Zacute=611;e.Zcaron=611;e.greaterequal=549;e.Eth=722;e.Ccedilla=722;e.lcommaaccent=222;e.tcaron=317;e.eogonek=556;e.Uogonek=722;e.Aacute=667;e.Adieresis=667;e.egrave=556;e.zacute=500;e.iogonek=222;e.Oacute=778;e.oacute=556;e.amacron=556;e.sacute=500;e.idieresis=278;e.Ocircumflex=778;e.Ugrave=722;e.Delta=612;e.thorn=556;e.twosuperior=333;e.Odieresis=778;e.mu=556;e.igrave=278;e.ohungarumlaut=556;e.Eogonek=667;e.dcroat=556;e.threequarters=834;e.Scedilla=667;e.lcaron=299;e.Kcommaaccent=667;e.Lacute=556;e.trademark=1e3;e.edotaccent=556;e.Igrave=278;e.Imacron=278;e.Lcaron=556;e.onehalf=834;e.lessequal=549;e.ocircumflex=556;e.ntilde=556;e.Uhungarumlaut=722;e.Eacute=667;e.emacron=556;e.gbreve=556;e.onequarter=834;e.Scaron=667;e.Scommaaccent=667;e.Ohungarumlaut=778;e.degree=400;e.ograve=556;e.Ccaron=722;e.ugrave=556;e.radical=453;e.Dcaron=722;e.rcommaaccent=333;e.Ntilde=722;e.otilde=556;e.Rcommaaccent=722;e.Lcommaaccent=556;e.Atilde=667;e.Aogonek=667;e.Aring=667;e.Otilde=778;e.zdotaccent=500;e.Ecaron=667;e.Iogonek=278;e.kcommaaccent=500;e.minus=584;e.Icircumflex=278;e.ncaron=556;e.tcommaaccent=278;e.logicalnot=584;e.odieresis=556;e.udieresis=556;e.notequal=549;e.gcommaaccent=556;e.eth=556;e.zcaron=500;e.ncommaaccent=556;e.onesuperior=333;e.imacron=278;e.Euro=556}));e["Helvetica-Bold"]=getLookupTableFactory((function(e){e.space=278;e.exclam=333;e.quotedbl=474;e.numbersign=556;e.dollar=556;e.percent=889;e.ampersand=722;e.quoteright=278;e.parenleft=333;e.parenright=333;e.asterisk=389;e.plus=584;e.comma=278;e.hyphen=333;e.period=278;e.slash=278;e.zero=556;e.one=556;e.two=556;e.three=556;e.four=556;e.five=556;e.six=556;e.seven=556;e.eight=556;e.nine=556;e.colon=333;e.semicolon=333;e.less=584;e.equal=584;e.greater=584;e.question=611;e.at=975;e.A=722;e.B=722;e.C=722;e.D=722;e.E=667;e.F=611;e.G=778;e.H=722;e.I=278;e.J=556;e.K=722;e.L=611;e.M=833;e.N=722;e.O=778;e.P=667;e.Q=778;e.R=722;e.S=667;e.T=611;e.U=722;e.V=667;e.W=944;e.X=667;e.Y=667;e.Z=611;e.bracketleft=333;e.backslash=278;e.bracketright=333;e.asciicircum=584;e.underscore=556;e.quoteleft=278;e.a=556;e.b=611;e.c=556;e.d=611;e.e=556;e.f=333;e.g=611;e.h=611;e.i=278;e.j=278;e.k=556;e.l=278;e.m=889;e.n=611;e.o=611;e.p=611;e.q=611;e.r=389;e.s=556;e.t=333;e.u=611;e.v=556;e.w=778;e.x=556;e.y=556;e.z=500;e.braceleft=389;e.bar=280;e.braceright=389;e.asciitilde=584;e.exclamdown=333;e.cent=556;e.sterling=556;e.fraction=167;e.yen=556;e.florin=556;e.section=556;e.currency=556;e.quotesingle=238;e.quotedblleft=500;e.guillemotleft=556;e.guilsinglleft=333;e.guilsinglright=333;e.fi=611;e.fl=611;e.endash=556;e.dagger=556;e.daggerdbl=556;e.periodcentered=278;e.paragraph=556;e.bullet=350;e.quotesinglbase=278;e.quotedblbase=500;e.quotedblright=500;e.guillemotright=556;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=611;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=1e3;e.ordfeminine=370;e.Lslash=611;e.Oslash=778;e.OE=1e3;e.ordmasculine=365;e.ae=889;e.dotlessi=278;e.lslash=278;e.oslash=611;e.oe=944;e.germandbls=611;e.Idieresis=278;e.eacute=556;e.abreve=556;e.uhungarumlaut=611;e.ecaron=556;e.Ydieresis=667;e.divide=584;e.Yacute=667;e.Acircumflex=722;e.aacute=556;e.Ucircumflex=722;e.yacute=556;e.scommaaccent=556;e.ecircumflex=556;e.Uring=722;e.Udieresis=722;e.aogonek=556;e.Uacute=722;e.uogonek=611;e.Edieresis=667;e.Dcroat=722;e.commaaccent=250;e.copyright=737;e.Emacron=667;e.ccaron=556;e.aring=556;e.Ncommaaccent=722;e.lacute=278;e.agrave=556;e.Tcommaaccent=611;e.Cacute=722;e.atilde=556;e.Edotaccent=667;e.scaron=556;e.scedilla=556;e.iacute=278;e.lozenge=494;e.Rcaron=722;e.Gcommaaccent=778;e.ucircumflex=611;e.acircumflex=556;e.Amacron=722;e.rcaron=389;e.ccedilla=556;e.Zdotaccent=611;e.Thorn=667;e.Omacron=778;e.Racute=722;e.Sacute=667;e.dcaron=743;e.Umacron=722;e.uring=611;e.threesuperior=333;e.Ograve=778;e.Agrave=722;e.Abreve=722;e.multiply=584;e.uacute=611;e.Tcaron=611;e.partialdiff=494;e.ydieresis=556;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=667;e.adieresis=556;e.edieresis=556;e.cacute=556;e.nacute=611;e.umacron=611;e.Ncaron=722;e.Iacute=278;e.plusminus=584;e.brokenbar=280;e.registered=737;e.Gbreve=778;e.Idotaccent=278;e.summation=600;e.Egrave=667;e.racute=389;e.omacron=611;e.Zacute=611;e.Zcaron=611;e.greaterequal=549;e.Eth=722;e.Ccedilla=722;e.lcommaaccent=278;e.tcaron=389;e.eogonek=556;e.Uogonek=722;e.Aacute=722;e.Adieresis=722;e.egrave=556;e.zacute=500;e.iogonek=278;e.Oacute=778;e.oacute=611;e.amacron=556;e.sacute=556;e.idieresis=278;e.Ocircumflex=778;e.Ugrave=722;e.Delta=612;e.thorn=611;e.twosuperior=333;e.Odieresis=778;e.mu=611;e.igrave=278;e.ohungarumlaut=611;e.Eogonek=667;e.dcroat=611;e.threequarters=834;e.Scedilla=667;e.lcaron=400;e.Kcommaaccent=722;e.Lacute=611;e.trademark=1e3;e.edotaccent=556;e.Igrave=278;e.Imacron=278;e.Lcaron=611;e.onehalf=834;e.lessequal=549;e.ocircumflex=611;e.ntilde=611;e.Uhungarumlaut=722;e.Eacute=667;e.emacron=556;e.gbreve=611;e.onequarter=834;e.Scaron=667;e.Scommaaccent=667;e.Ohungarumlaut=778;e.degree=400;e.ograve=611;e.Ccaron=722;e.ugrave=611;e.radical=549;e.Dcaron=722;e.rcommaaccent=389;e.Ntilde=722;e.otilde=611;e.Rcommaaccent=722;e.Lcommaaccent=611;e.Atilde=722;e.Aogonek=722;e.Aring=722;e.Otilde=778;e.zdotaccent=500;e.Ecaron=667;e.Iogonek=278;e.kcommaaccent=556;e.minus=584;e.Icircumflex=278;e.ncaron=611;e.tcommaaccent=333;e.logicalnot=584;e.odieresis=611;e.udieresis=611;e.notequal=549;e.gcommaaccent=611;e.eth=611;e.zcaron=500;e.ncommaaccent=611;e.onesuperior=333;e.imacron=278;e.Euro=556}));e["Helvetica-BoldOblique"]=getLookupTableFactory((function(e){e.space=278;e.exclam=333;e.quotedbl=474;e.numbersign=556;e.dollar=556;e.percent=889;e.ampersand=722;e.quoteright=278;e.parenleft=333;e.parenright=333;e.asterisk=389;e.plus=584;e.comma=278;e.hyphen=333;e.period=278;e.slash=278;e.zero=556;e.one=556;e.two=556;e.three=556;e.four=556;e.five=556;e.six=556;e.seven=556;e.eight=556;e.nine=556;e.colon=333;e.semicolon=333;e.less=584;e.equal=584;e.greater=584;e.question=611;e.at=975;e.A=722;e.B=722;e.C=722;e.D=722;e.E=667;e.F=611;e.G=778;e.H=722;e.I=278;e.J=556;e.K=722;e.L=611;e.M=833;e.N=722;e.O=778;e.P=667;e.Q=778;e.R=722;e.S=667;e.T=611;e.U=722;e.V=667;e.W=944;e.X=667;e.Y=667;e.Z=611;e.bracketleft=333;e.backslash=278;e.bracketright=333;e.asciicircum=584;e.underscore=556;e.quoteleft=278;e.a=556;e.b=611;e.c=556;e.d=611;e.e=556;e.f=333;e.g=611;e.h=611;e.i=278;e.j=278;e.k=556;e.l=278;e.m=889;e.n=611;e.o=611;e.p=611;e.q=611;e.r=389;e.s=556;e.t=333;e.u=611;e.v=556;e.w=778;e.x=556;e.y=556;e.z=500;e.braceleft=389;e.bar=280;e.braceright=389;e.asciitilde=584;e.exclamdown=333;e.cent=556;e.sterling=556;e.fraction=167;e.yen=556;e.florin=556;e.section=556;e.currency=556;e.quotesingle=238;e.quotedblleft=500;e.guillemotleft=556;e.guilsinglleft=333;e.guilsinglright=333;e.fi=611;e.fl=611;e.endash=556;e.dagger=556;e.daggerdbl=556;e.periodcentered=278;e.paragraph=556;e.bullet=350;e.quotesinglbase=278;e.quotedblbase=500;e.quotedblright=500;e.guillemotright=556;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=611;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=1e3;e.ordfeminine=370;e.Lslash=611;e.Oslash=778;e.OE=1e3;e.ordmasculine=365;e.ae=889;e.dotlessi=278;e.lslash=278;e.oslash=611;e.oe=944;e.germandbls=611;e.Idieresis=278;e.eacute=556;e.abreve=556;e.uhungarumlaut=611;e.ecaron=556;e.Ydieresis=667;e.divide=584;e.Yacute=667;e.Acircumflex=722;e.aacute=556;e.Ucircumflex=722;e.yacute=556;e.scommaaccent=556;e.ecircumflex=556;e.Uring=722;e.Udieresis=722;e.aogonek=556;e.Uacute=722;e.uogonek=611;e.Edieresis=667;e.Dcroat=722;e.commaaccent=250;e.copyright=737;e.Emacron=667;e.ccaron=556;e.aring=556;e.Ncommaaccent=722;e.lacute=278;e.agrave=556;e.Tcommaaccent=611;e.Cacute=722;e.atilde=556;e.Edotaccent=667;e.scaron=556;e.scedilla=556;e.iacute=278;e.lozenge=494;e.Rcaron=722;e.Gcommaaccent=778;e.ucircumflex=611;e.acircumflex=556;e.Amacron=722;e.rcaron=389;e.ccedilla=556;e.Zdotaccent=611;e.Thorn=667;e.Omacron=778;e.Racute=722;e.Sacute=667;e.dcaron=743;e.Umacron=722;e.uring=611;e.threesuperior=333;e.Ograve=778;e.Agrave=722;e.Abreve=722;e.multiply=584;e.uacute=611;e.Tcaron=611;e.partialdiff=494;e.ydieresis=556;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=667;e.adieresis=556;e.edieresis=556;e.cacute=556;e.nacute=611;e.umacron=611;e.Ncaron=722;e.Iacute=278;e.plusminus=584;e.brokenbar=280;e.registered=737;e.Gbreve=778;e.Idotaccent=278;e.summation=600;e.Egrave=667;e.racute=389;e.omacron=611;e.Zacute=611;e.Zcaron=611;e.greaterequal=549;e.Eth=722;e.Ccedilla=722;e.lcommaaccent=278;e.tcaron=389;e.eogonek=556;e.Uogonek=722;e.Aacute=722;e.Adieresis=722;e.egrave=556;e.zacute=500;e.iogonek=278;e.Oacute=778;e.oacute=611;e.amacron=556;e.sacute=556;e.idieresis=278;e.Ocircumflex=778;e.Ugrave=722;e.Delta=612;e.thorn=611;e.twosuperior=333;e.Odieresis=778;e.mu=611;e.igrave=278;e.ohungarumlaut=611;e.Eogonek=667;e.dcroat=611;e.threequarters=834;e.Scedilla=667;e.lcaron=400;e.Kcommaaccent=722;e.Lacute=611;e.trademark=1e3;e.edotaccent=556;e.Igrave=278;e.Imacron=278;e.Lcaron=611;e.onehalf=834;e.lessequal=549;e.ocircumflex=611;e.ntilde=611;e.Uhungarumlaut=722;e.Eacute=667;e.emacron=556;e.gbreve=611;e.onequarter=834;e.Scaron=667;e.Scommaaccent=667;e.Ohungarumlaut=778;e.degree=400;e.ograve=611;e.Ccaron=722;e.ugrave=611;e.radical=549;e.Dcaron=722;e.rcommaaccent=389;e.Ntilde=722;e.otilde=611;e.Rcommaaccent=722;e.Lcommaaccent=611;e.Atilde=722;e.Aogonek=722;e.Aring=722;e.Otilde=778;e.zdotaccent=500;e.Ecaron=667;e.Iogonek=278;e.kcommaaccent=556;e.minus=584;e.Icircumflex=278;e.ncaron=611;e.tcommaaccent=333;e.logicalnot=584;e.odieresis=611;e.udieresis=611;e.notequal=549;e.gcommaaccent=611;e.eth=611;e.zcaron=500;e.ncommaaccent=611;e.onesuperior=333;e.imacron=278;e.Euro=556}));e["Helvetica-Oblique"]=getLookupTableFactory((function(e){e.space=278;e.exclam=278;e.quotedbl=355;e.numbersign=556;e.dollar=556;e.percent=889;e.ampersand=667;e.quoteright=222;e.parenleft=333;e.parenright=333;e.asterisk=389;e.plus=584;e.comma=278;e.hyphen=333;e.period=278;e.slash=278;e.zero=556;e.one=556;e.two=556;e.three=556;e.four=556;e.five=556;e.six=556;e.seven=556;e.eight=556;e.nine=556;e.colon=278;e.semicolon=278;e.less=584;e.equal=584;e.greater=584;e.question=556;e.at=1015;e.A=667;e.B=667;e.C=722;e.D=722;e.E=667;e.F=611;e.G=778;e.H=722;e.I=278;e.J=500;e.K=667;e.L=556;e.M=833;e.N=722;e.O=778;e.P=667;e.Q=778;e.R=722;e.S=667;e.T=611;e.U=722;e.V=667;e.W=944;e.X=667;e.Y=667;e.Z=611;e.bracketleft=278;e.backslash=278;e.bracketright=278;e.asciicircum=469;e.underscore=556;e.quoteleft=222;e.a=556;e.b=556;e.c=500;e.d=556;e.e=556;e.f=278;e.g=556;e.h=556;e.i=222;e.j=222;e.k=500;e.l=222;e.m=833;e.n=556;e.o=556;e.p=556;e.q=556;e.r=333;e.s=500;e.t=278;e.u=556;e.v=500;e.w=722;e.x=500;e.y=500;e.z=500;e.braceleft=334;e.bar=260;e.braceright=334;e.asciitilde=584;e.exclamdown=333;e.cent=556;e.sterling=556;e.fraction=167;e.yen=556;e.florin=556;e.section=556;e.currency=556;e.quotesingle=191;e.quotedblleft=333;e.guillemotleft=556;e.guilsinglleft=333;e.guilsinglright=333;e.fi=500;e.fl=500;e.endash=556;e.dagger=556;e.daggerdbl=556;e.periodcentered=278;e.paragraph=537;e.bullet=350;e.quotesinglbase=222;e.quotedblbase=333;e.quotedblright=333;e.guillemotright=556;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=611;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=1e3;e.ordfeminine=370;e.Lslash=556;e.Oslash=778;e.OE=1e3;e.ordmasculine=365;e.ae=889;e.dotlessi=278;e.lslash=222;e.oslash=611;e.oe=944;e.germandbls=611;e.Idieresis=278;e.eacute=556;e.abreve=556;e.uhungarumlaut=556;e.ecaron=556;e.Ydieresis=667;e.divide=584;e.Yacute=667;e.Acircumflex=667;e.aacute=556;e.Ucircumflex=722;e.yacute=500;e.scommaaccent=500;e.ecircumflex=556;e.Uring=722;e.Udieresis=722;e.aogonek=556;e.Uacute=722;e.uogonek=556;e.Edieresis=667;e.Dcroat=722;e.commaaccent=250;e.copyright=737;e.Emacron=667;e.ccaron=500;e.aring=556;e.Ncommaaccent=722;e.lacute=222;e.agrave=556;e.Tcommaaccent=611;e.Cacute=722;e.atilde=556;e.Edotaccent=667;e.scaron=500;e.scedilla=500;e.iacute=278;e.lozenge=471;e.Rcaron=722;e.Gcommaaccent=778;e.ucircumflex=556;e.acircumflex=556;e.Amacron=667;e.rcaron=333;e.ccedilla=500;e.Zdotaccent=611;e.Thorn=667;e.Omacron=778;e.Racute=722;e.Sacute=667;e.dcaron=643;e.Umacron=722;e.uring=556;e.threesuperior=333;e.Ograve=778;e.Agrave=667;e.Abreve=667;e.multiply=584;e.uacute=556;e.Tcaron=611;e.partialdiff=476;e.ydieresis=500;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=667;e.adieresis=556;e.edieresis=556;e.cacute=500;e.nacute=556;e.umacron=556;e.Ncaron=722;e.Iacute=278;e.plusminus=584;e.brokenbar=260;e.registered=737;e.Gbreve=778;e.Idotaccent=278;e.summation=600;e.Egrave=667;e.racute=333;e.omacron=556;e.Zacute=611;e.Zcaron=611;e.greaterequal=549;e.Eth=722;e.Ccedilla=722;e.lcommaaccent=222;e.tcaron=317;e.eogonek=556;e.Uogonek=722;e.Aacute=667;e.Adieresis=667;e.egrave=556;e.zacute=500;e.iogonek=222;e.Oacute=778;e.oacute=556;e.amacron=556;e.sacute=500;e.idieresis=278;e.Ocircumflex=778;e.Ugrave=722;e.Delta=612;e.thorn=556;e.twosuperior=333;e.Odieresis=778;e.mu=556;e.igrave=278;e.ohungarumlaut=556;e.Eogonek=667;e.dcroat=556;e.threequarters=834;e.Scedilla=667;e.lcaron=299;e.Kcommaaccent=667;e.Lacute=556;e.trademark=1e3;e.edotaccent=556;e.Igrave=278;e.Imacron=278;e.Lcaron=556;e.onehalf=834;e.lessequal=549;e.ocircumflex=556;e.ntilde=556;e.Uhungarumlaut=722;e.Eacute=667;e.emacron=556;e.gbreve=556;e.onequarter=834;e.Scaron=667;e.Scommaaccent=667;e.Ohungarumlaut=778;e.degree=400;e.ograve=556;e.Ccaron=722;e.ugrave=556;e.radical=453;e.Dcaron=722;e.rcommaaccent=333;e.Ntilde=722;e.otilde=556;e.Rcommaaccent=722;e.Lcommaaccent=556;e.Atilde=667;e.Aogonek=667;e.Aring=667;e.Otilde=778;e.zdotaccent=500;e.Ecaron=667;e.Iogonek=278;e.kcommaaccent=500;e.minus=584;e.Icircumflex=278;e.ncaron=556;e.tcommaaccent=278;e.logicalnot=584;e.odieresis=556;e.udieresis=556;e.notequal=549;e.gcommaaccent=556;e.eth=556;e.zcaron=500;e.ncommaaccent=556;e.onesuperior=333;e.imacron=278;e.Euro=556}));e.Symbol=getLookupTableFactory((function(e){e.space=250;e.exclam=333;e.universal=713;e.numbersign=500;e.existential=549;e.percent=833;e.ampersand=778;e.suchthat=439;e.parenleft=333;e.parenright=333;e.asteriskmath=500;e.plus=549;e.comma=250;e.minus=549;e.period=250;e.slash=278;e.zero=500;e.one=500;e.two=500;e.three=500;e.four=500;e.five=500;e.six=500;e.seven=500;e.eight=500;e.nine=500;e.colon=278;e.semicolon=278;e.less=549;e.equal=549;e.greater=549;e.question=444;e.congruent=549;e.Alpha=722;e.Beta=667;e.Chi=722;e.Delta=612;e.Epsilon=611;e.Phi=763;e.Gamma=603;e.Eta=722;e.Iota=333;e.theta1=631;e.Kappa=722;e.Lambda=686;e.Mu=889;e.Nu=722;e.Omicron=722;e.Pi=768;e.Theta=741;e.Rho=556;e.Sigma=592;e.Tau=611;e.Upsilon=690;e.sigma1=439;e.Omega=768;e.Xi=645;e.Psi=795;e.Zeta=611;e.bracketleft=333;e.therefore=863;e.bracketright=333;e.perpendicular=658;e.underscore=500;e.radicalex=500;e.alpha=631;e.beta=549;e.chi=549;e.delta=494;e.epsilon=439;e.phi=521;e.gamma=411;e.eta=603;e.iota=329;e.phi1=603;e.kappa=549;e.lambda=549;e.mu=576;e.nu=521;e.omicron=549;e.pi=549;e.theta=521;e.rho=549;e.sigma=603;e.tau=439;e.upsilon=576;e.omega1=713;e.omega=686;e.xi=493;e.psi=686;e.zeta=494;e.braceleft=480;e.bar=200;e.braceright=480;e.similar=549;e.Euro=750;e.Upsilon1=620;e.minute=247;e.lessequal=549;e.fraction=167;e.infinity=713;e.florin=500;e.club=753;e.diamond=753;e.heart=753;e.spade=753;e.arrowboth=1042;e.arrowleft=987;e.arrowup=603;e.arrowright=987;e.arrowdown=603;e.degree=400;e.plusminus=549;e.second=411;e.greaterequal=549;e.multiply=549;e.proportional=713;e.partialdiff=494;e.bullet=460;e.divide=549;e.notequal=549;e.equivalence=549;e.approxequal=549;e.ellipsis=1e3;e.arrowvertex=603;e.arrowhorizex=1e3;e.carriagereturn=658;e.aleph=823;e.Ifraktur=686;e.Rfraktur=795;e.weierstrass=987;e.circlemultiply=768;e.circleplus=768;e.emptyset=823;e.intersection=768;e.union=768;e.propersuperset=713;e.reflexsuperset=713;e.notsubset=713;e.propersubset=713;e.reflexsubset=713;e.element=713;e.notelement=713;e.angle=768;e.gradient=713;e.registerserif=790;e.copyrightserif=790;e.trademarkserif=890;e.product=823;e.radical=549;e.dotmath=250;e.logicalnot=713;e.logicaland=603;e.logicalor=603;e.arrowdblboth=1042;e.arrowdblleft=987;e.arrowdblup=603;e.arrowdblright=987;e.arrowdbldown=603;e.lozenge=494;e.angleleft=329;e.registersans=790;e.copyrightsans=790;e.trademarksans=786;e.summation=713;e.parenlefttp=384;e.parenleftex=384;e.parenleftbt=384;e.bracketlefttp=384;e.bracketleftex=384;e.bracketleftbt=384;e.bracelefttp=494;e.braceleftmid=494;e.braceleftbt=494;e.braceex=494;e.angleright=329;e.integral=274;e.integraltp=686;e.integralex=686;e.integralbt=686;e.parenrighttp=384;e.parenrightex=384;e.parenrightbt=384;e.bracketrighttp=384;e.bracketrightex=384;e.bracketrightbt=384;e.bracerighttp=494;e.bracerightmid=494;e.bracerightbt=494;e.apple=790}));e["Times-Roman"]=getLookupTableFactory((function(e){e.space=250;e.exclam=333;e.quotedbl=408;e.numbersign=500;e.dollar=500;e.percent=833;e.ampersand=778;e.quoteright=333;e.parenleft=333;e.parenright=333;e.asterisk=500;e.plus=564;e.comma=250;e.hyphen=333;e.period=250;e.slash=278;e.zero=500;e.one=500;e.two=500;e.three=500;e.four=500;e.five=500;e.six=500;e.seven=500;e.eight=500;e.nine=500;e.colon=278;e.semicolon=278;e.less=564;e.equal=564;e.greater=564;e.question=444;e.at=921;e.A=722;e.B=667;e.C=667;e.D=722;e.E=611;e.F=556;e.G=722;e.H=722;e.I=333;e.J=389;e.K=722;e.L=611;e.M=889;e.N=722;e.O=722;e.P=556;e.Q=722;e.R=667;e.S=556;e.T=611;e.U=722;e.V=722;e.W=944;e.X=722;e.Y=722;e.Z=611;e.bracketleft=333;e.backslash=278;e.bracketright=333;e.asciicircum=469;e.underscore=500;e.quoteleft=333;e.a=444;e.b=500;e.c=444;e.d=500;e.e=444;e.f=333;e.g=500;e.h=500;e.i=278;e.j=278;e.k=500;e.l=278;e.m=778;e.n=500;e.o=500;e.p=500;e.q=500;e.r=333;e.s=389;e.t=278;e.u=500;e.v=500;e.w=722;e.x=500;e.y=500;e.z=444;e.braceleft=480;e.bar=200;e.braceright=480;e.asciitilde=541;e.exclamdown=333;e.cent=500;e.sterling=500;e.fraction=167;e.yen=500;e.florin=500;e.section=500;e.currency=500;e.quotesingle=180;e.quotedblleft=444;e.guillemotleft=500;e.guilsinglleft=333;e.guilsinglright=333;e.fi=556;e.fl=556;e.endash=500;e.dagger=500;e.daggerdbl=500;e.periodcentered=250;e.paragraph=453;e.bullet=350;e.quotesinglbase=333;e.quotedblbase=444;e.quotedblright=444;e.guillemotright=500;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=444;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=889;e.ordfeminine=276;e.Lslash=611;e.Oslash=722;e.OE=889;e.ordmasculine=310;e.ae=667;e.dotlessi=278;e.lslash=278;e.oslash=500;e.oe=722;e.germandbls=500;e.Idieresis=333;e.eacute=444;e.abreve=444;e.uhungarumlaut=500;e.ecaron=444;e.Ydieresis=722;e.divide=564;e.Yacute=722;e.Acircumflex=722;e.aacute=444;e.Ucircumflex=722;e.yacute=500;e.scommaaccent=389;e.ecircumflex=444;e.Uring=722;e.Udieresis=722;e.aogonek=444;e.Uacute=722;e.uogonek=500;e.Edieresis=611;e.Dcroat=722;e.commaaccent=250;e.copyright=760;e.Emacron=611;e.ccaron=444;e.aring=444;e.Ncommaaccent=722;e.lacute=278;e.agrave=444;e.Tcommaaccent=611;e.Cacute=667;e.atilde=444;e.Edotaccent=611;e.scaron=389;e.scedilla=389;e.iacute=278;e.lozenge=471;e.Rcaron=667;e.Gcommaaccent=722;e.ucircumflex=500;e.acircumflex=444;e.Amacron=722;e.rcaron=333;e.ccedilla=444;e.Zdotaccent=611;e.Thorn=556;e.Omacron=722;e.Racute=667;e.Sacute=556;e.dcaron=588;e.Umacron=722;e.uring=500;e.threesuperior=300;e.Ograve=722;e.Agrave=722;e.Abreve=722;e.multiply=564;e.uacute=500;e.Tcaron=611;e.partialdiff=476;e.ydieresis=500;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=611;e.adieresis=444;e.edieresis=444;e.cacute=444;e.nacute=500;e.umacron=500;e.Ncaron=722;e.Iacute=333;e.plusminus=564;e.brokenbar=200;e.registered=760;e.Gbreve=722;e.Idotaccent=333;e.summation=600;e.Egrave=611;e.racute=333;e.omacron=500;e.Zacute=611;e.Zcaron=611;e.greaterequal=549;e.Eth=722;e.Ccedilla=667;e.lcommaaccent=278;e.tcaron=326;e.eogonek=444;e.Uogonek=722;e.Aacute=722;e.Adieresis=722;e.egrave=444;e.zacute=444;e.iogonek=278;e.Oacute=722;e.oacute=500;e.amacron=444;e.sacute=389;e.idieresis=278;e.Ocircumflex=722;e.Ugrave=722;e.Delta=612;e.thorn=500;e.twosuperior=300;e.Odieresis=722;e.mu=500;e.igrave=278;e.ohungarumlaut=500;e.Eogonek=611;e.dcroat=500;e.threequarters=750;e.Scedilla=556;e.lcaron=344;e.Kcommaaccent=722;e.Lacute=611;e.trademark=980;e.edotaccent=444;e.Igrave=333;e.Imacron=333;e.Lcaron=611;e.onehalf=750;e.lessequal=549;e.ocircumflex=500;e.ntilde=500;e.Uhungarumlaut=722;e.Eacute=611;e.emacron=444;e.gbreve=500;e.onequarter=750;e.Scaron=556;e.Scommaaccent=556;e.Ohungarumlaut=722;e.degree=400;e.ograve=500;e.Ccaron=667;e.ugrave=500;e.radical=453;e.Dcaron=722;e.rcommaaccent=333;e.Ntilde=722;e.otilde=500;e.Rcommaaccent=667;e.Lcommaaccent=611;e.Atilde=722;e.Aogonek=722;e.Aring=722;e.Otilde=722;e.zdotaccent=444;e.Ecaron=611;e.Iogonek=333;e.kcommaaccent=500;e.minus=564;e.Icircumflex=333;e.ncaron=500;e.tcommaaccent=278;e.logicalnot=564;e.odieresis=500;e.udieresis=500;e.notequal=549;e.gcommaaccent=500;e.eth=500;e.zcaron=444;e.ncommaaccent=500;e.onesuperior=300;e.imacron=278;e.Euro=500}));e["Times-Bold"]=getLookupTableFactory((function(e){e.space=250;e.exclam=333;e.quotedbl=555;e.numbersign=500;e.dollar=500;e.percent=1e3;e.ampersand=833;e.quoteright=333;e.parenleft=333;e.parenright=333;e.asterisk=500;e.plus=570;e.comma=250;e.hyphen=333;e.period=250;e.slash=278;e.zero=500;e.one=500;e.two=500;e.three=500;e.four=500;e.five=500;e.six=500;e.seven=500;e.eight=500;e.nine=500;e.colon=333;e.semicolon=333;e.less=570;e.equal=570;e.greater=570;e.question=500;e.at=930;e.A=722;e.B=667;e.C=722;e.D=722;e.E=667;e.F=611;e.G=778;e.H=778;e.I=389;e.J=500;e.K=778;e.L=667;e.M=944;e.N=722;e.O=778;e.P=611;e.Q=778;e.R=722;e.S=556;e.T=667;e.U=722;e.V=722;e.W=1e3;e.X=722;e.Y=722;e.Z=667;e.bracketleft=333;e.backslash=278;e.bracketright=333;e.asciicircum=581;e.underscore=500;e.quoteleft=333;e.a=500;e.b=556;e.c=444;e.d=556;e.e=444;e.f=333;e.g=500;e.h=556;e.i=278;e.j=333;e.k=556;e.l=278;e.m=833;e.n=556;e.o=500;e.p=556;e.q=556;e.r=444;e.s=389;e.t=333;e.u=556;e.v=500;e.w=722;e.x=500;e.y=500;e.z=444;e.braceleft=394;e.bar=220;e.braceright=394;e.asciitilde=520;e.exclamdown=333;e.cent=500;e.sterling=500;e.fraction=167;e.yen=500;e.florin=500;e.section=500;e.currency=500;e.quotesingle=278;e.quotedblleft=500;e.guillemotleft=500;e.guilsinglleft=333;e.guilsinglright=333;e.fi=556;e.fl=556;e.endash=500;e.dagger=500;e.daggerdbl=500;e.periodcentered=250;e.paragraph=540;e.bullet=350;e.quotesinglbase=333;e.quotedblbase=500;e.quotedblright=500;e.guillemotright=500;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=500;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=1e3;e.ordfeminine=300;e.Lslash=667;e.Oslash=778;e.OE=1e3;e.ordmasculine=330;e.ae=722;e.dotlessi=278;e.lslash=278;e.oslash=500;e.oe=722;e.germandbls=556;e.Idieresis=389;e.eacute=444;e.abreve=500;e.uhungarumlaut=556;e.ecaron=444;e.Ydieresis=722;e.divide=570;e.Yacute=722;e.Acircumflex=722;e.aacute=500;e.Ucircumflex=722;e.yacute=500;e.scommaaccent=389;e.ecircumflex=444;e.Uring=722;e.Udieresis=722;e.aogonek=500;e.Uacute=722;e.uogonek=556;e.Edieresis=667;e.Dcroat=722;e.commaaccent=250;e.copyright=747;e.Emacron=667;e.ccaron=444;e.aring=500;e.Ncommaaccent=722;e.lacute=278;e.agrave=500;e.Tcommaaccent=667;e.Cacute=722;e.atilde=500;e.Edotaccent=667;e.scaron=389;e.scedilla=389;e.iacute=278;e.lozenge=494;e.Rcaron=722;e.Gcommaaccent=778;e.ucircumflex=556;e.acircumflex=500;e.Amacron=722;e.rcaron=444;e.ccedilla=444;e.Zdotaccent=667;e.Thorn=611;e.Omacron=778;e.Racute=722;e.Sacute=556;e.dcaron=672;e.Umacron=722;e.uring=556;e.threesuperior=300;e.Ograve=778;e.Agrave=722;e.Abreve=722;e.multiply=570;e.uacute=556;e.Tcaron=667;e.partialdiff=494;e.ydieresis=500;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=667;e.adieresis=500;e.edieresis=444;e.cacute=444;e.nacute=556;e.umacron=556;e.Ncaron=722;e.Iacute=389;e.plusminus=570;e.brokenbar=220;e.registered=747;e.Gbreve=778;e.Idotaccent=389;e.summation=600;e.Egrave=667;e.racute=444;e.omacron=500;e.Zacute=667;e.Zcaron=667;e.greaterequal=549;e.Eth=722;e.Ccedilla=722;e.lcommaaccent=278;e.tcaron=416;e.eogonek=444;e.Uogonek=722;e.Aacute=722;e.Adieresis=722;e.egrave=444;e.zacute=444;e.iogonek=278;e.Oacute=778;e.oacute=500;e.amacron=500;e.sacute=389;e.idieresis=278;e.Ocircumflex=778;e.Ugrave=722;e.Delta=612;e.thorn=556;e.twosuperior=300;e.Odieresis=778;e.mu=556;e.igrave=278;e.ohungarumlaut=500;e.Eogonek=667;e.dcroat=556;e.threequarters=750;e.Scedilla=556;e.lcaron=394;e.Kcommaaccent=778;e.Lacute=667;e.trademark=1e3;e.edotaccent=444;e.Igrave=389;e.Imacron=389;e.Lcaron=667;e.onehalf=750;e.lessequal=549;e.ocircumflex=500;e.ntilde=556;e.Uhungarumlaut=722;e.Eacute=667;e.emacron=444;e.gbreve=500;e.onequarter=750;e.Scaron=556;e.Scommaaccent=556;e.Ohungarumlaut=778;e.degree=400;e.ograve=500;e.Ccaron=722;e.ugrave=556;e.radical=549;e.Dcaron=722;e.rcommaaccent=444;e.Ntilde=722;e.otilde=500;e.Rcommaaccent=722;e.Lcommaaccent=667;e.Atilde=722;e.Aogonek=722;e.Aring=722;e.Otilde=778;e.zdotaccent=444;e.Ecaron=667;e.Iogonek=389;e.kcommaaccent=556;e.minus=570;e.Icircumflex=389;e.ncaron=556;e.tcommaaccent=333;e.logicalnot=570;e.odieresis=500;e.udieresis=556;e.notequal=549;e.gcommaaccent=500;e.eth=500;e.zcaron=444;e.ncommaaccent=556;e.onesuperior=300;e.imacron=278;e.Euro=500}));e["Times-BoldItalic"]=getLookupTableFactory((function(e){e.space=250;e.exclam=389;e.quotedbl=555;e.numbersign=500;e.dollar=500;e.percent=833;e.ampersand=778;e.quoteright=333;e.parenleft=333;e.parenright=333;e.asterisk=500;e.plus=570;e.comma=250;e.hyphen=333;e.period=250;e.slash=278;e.zero=500;e.one=500;e.two=500;e.three=500;e.four=500;e.five=500;e.six=500;e.seven=500;e.eight=500;e.nine=500;e.colon=333;e.semicolon=333;e.less=570;e.equal=570;e.greater=570;e.question=500;e.at=832;e.A=667;e.B=667;e.C=667;e.D=722;e.E=667;e.F=667;e.G=722;e.H=778;e.I=389;e.J=500;e.K=667;e.L=611;e.M=889;e.N=722;e.O=722;e.P=611;e.Q=722;e.R=667;e.S=556;e.T=611;e.U=722;e.V=667;e.W=889;e.X=667;e.Y=611;e.Z=611;e.bracketleft=333;e.backslash=278;e.bracketright=333;e.asciicircum=570;e.underscore=500;e.quoteleft=333;e.a=500;e.b=500;e.c=444;e.d=500;e.e=444;e.f=333;e.g=500;e.h=556;e.i=278;e.j=278;e.k=500;e.l=278;e.m=778;e.n=556;e.o=500;e.p=500;e.q=500;e.r=389;e.s=389;e.t=278;e.u=556;e.v=444;e.w=667;e.x=500;e.y=444;e.z=389;e.braceleft=348;e.bar=220;e.braceright=348;e.asciitilde=570;e.exclamdown=389;e.cent=500;e.sterling=500;e.fraction=167;e.yen=500;e.florin=500;e.section=500;e.currency=500;e.quotesingle=278;e.quotedblleft=500;e.guillemotleft=500;e.guilsinglleft=333;e.guilsinglright=333;e.fi=556;e.fl=556;e.endash=500;e.dagger=500;e.daggerdbl=500;e.periodcentered=250;e.paragraph=500;e.bullet=350;e.quotesinglbase=333;e.quotedblbase=500;e.quotedblright=500;e.guillemotright=500;e.ellipsis=1e3;e.perthousand=1e3;e.questiondown=500;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=1e3;e.AE=944;e.ordfeminine=266;e.Lslash=611;e.Oslash=722;e.OE=944;e.ordmasculine=300;e.ae=722;e.dotlessi=278;e.lslash=278;e.oslash=500;e.oe=722;e.germandbls=500;e.Idieresis=389;e.eacute=444;e.abreve=500;e.uhungarumlaut=556;e.ecaron=444;e.Ydieresis=611;e.divide=570;e.Yacute=611;e.Acircumflex=667;e.aacute=500;e.Ucircumflex=722;e.yacute=444;e.scommaaccent=389;e.ecircumflex=444;e.Uring=722;e.Udieresis=722;e.aogonek=500;e.Uacute=722;e.uogonek=556;e.Edieresis=667;e.Dcroat=722;e.commaaccent=250;e.copyright=747;e.Emacron=667;e.ccaron=444;e.aring=500;e.Ncommaaccent=722;e.lacute=278;e.agrave=500;e.Tcommaaccent=611;e.Cacute=667;e.atilde=500;e.Edotaccent=667;e.scaron=389;e.scedilla=389;e.iacute=278;e.lozenge=494;e.Rcaron=667;e.Gcommaaccent=722;e.ucircumflex=556;e.acircumflex=500;e.Amacron=667;e.rcaron=389;e.ccedilla=444;e.Zdotaccent=611;e.Thorn=611;e.Omacron=722;e.Racute=667;e.Sacute=556;e.dcaron=608;e.Umacron=722;e.uring=556;e.threesuperior=300;e.Ograve=722;e.Agrave=667;e.Abreve=667;e.multiply=570;e.uacute=556;e.Tcaron=611;e.partialdiff=494;e.ydieresis=444;e.Nacute=722;e.icircumflex=278;e.Ecircumflex=667;e.adieresis=500;e.edieresis=444;e.cacute=444;e.nacute=556;e.umacron=556;e.Ncaron=722;e.Iacute=389;e.plusminus=570;e.brokenbar=220;e.registered=747;e.Gbreve=722;e.Idotaccent=389;e.summation=600;e.Egrave=667;e.racute=389;e.omacron=500;e.Zacute=611;e.Zcaron=611;e.greaterequal=549;e.Eth=722;e.Ccedilla=667;e.lcommaaccent=278;e.tcaron=366;e.eogonek=444;e.Uogonek=722;e.Aacute=667;e.Adieresis=667;e.egrave=444;e.zacute=389;e.iogonek=278;e.Oacute=722;e.oacute=500;e.amacron=500;e.sacute=389;e.idieresis=278;e.Ocircumflex=722;e.Ugrave=722;e.Delta=612;e.thorn=500;e.twosuperior=300;e.Odieresis=722;e.mu=576;e.igrave=278;e.ohungarumlaut=500;e.Eogonek=667;e.dcroat=500;e.threequarters=750;e.Scedilla=556;e.lcaron=382;e.Kcommaaccent=667;e.Lacute=611;e.trademark=1e3;e.edotaccent=444;e.Igrave=389;e.Imacron=389;e.Lcaron=611;e.onehalf=750;e.lessequal=549;e.ocircumflex=500;e.ntilde=556;e.Uhungarumlaut=722;e.Eacute=667;e.emacron=444;e.gbreve=500;e.onequarter=750;e.Scaron=556;e.Scommaaccent=556;e.Ohungarumlaut=722;e.degree=400;e.ograve=500;e.Ccaron=667;e.ugrave=556;e.radical=549;e.Dcaron=722;e.rcommaaccent=389;e.Ntilde=722;e.otilde=500;e.Rcommaaccent=667;e.Lcommaaccent=611;e.Atilde=667;e.Aogonek=667;e.Aring=667;e.Otilde=722;e.zdotaccent=389;e.Ecaron=667;e.Iogonek=389;e.kcommaaccent=500;e.minus=606;e.Icircumflex=389;e.ncaron=556;e.tcommaaccent=278;e.logicalnot=606;e.odieresis=500;e.udieresis=556;e.notequal=549;e.gcommaaccent=500;e.eth=500;e.zcaron=389;e.ncommaaccent=556;e.onesuperior=300;e.imacron=278;e.Euro=500}));e["Times-Italic"]=getLookupTableFactory((function(e){e.space=250;e.exclam=333;e.quotedbl=420;e.numbersign=500;e.dollar=500;e.percent=833;e.ampersand=778;e.quoteright=333;e.parenleft=333;e.parenright=333;e.asterisk=500;e.plus=675;e.comma=250;e.hyphen=333;e.period=250;e.slash=278;e.zero=500;e.one=500;e.two=500;e.three=500;e.four=500;e.five=500;e.six=500;e.seven=500;e.eight=500;e.nine=500;e.colon=333;e.semicolon=333;e.less=675;e.equal=675;e.greater=675;e.question=500;e.at=920;e.A=611;e.B=611;e.C=667;e.D=722;e.E=611;e.F=611;e.G=722;e.H=722;e.I=333;e.J=444;e.K=667;e.L=556;e.M=833;e.N=667;e.O=722;e.P=611;e.Q=722;e.R=611;e.S=500;e.T=556;e.U=722;e.V=611;e.W=833;e.X=611;e.Y=556;e.Z=556;e.bracketleft=389;e.backslash=278;e.bracketright=389;e.asciicircum=422;e.underscore=500;e.quoteleft=333;e.a=500;e.b=500;e.c=444;e.d=500;e.e=444;e.f=278;e.g=500;e.h=500;e.i=278;e.j=278;e.k=444;e.l=278;e.m=722;e.n=500;e.o=500;e.p=500;e.q=500;e.r=389;e.s=389;e.t=278;e.u=500;e.v=444;e.w=667;e.x=444;e.y=444;e.z=389;e.braceleft=400;e.bar=275;e.braceright=400;e.asciitilde=541;e.exclamdown=389;e.cent=500;e.sterling=500;e.fraction=167;e.yen=500;e.florin=500;e.section=500;e.currency=500;e.quotesingle=214;e.quotedblleft=556;e.guillemotleft=500;e.guilsinglleft=333;e.guilsinglright=333;e.fi=500;e.fl=500;e.endash=500;e.dagger=500;e.daggerdbl=500;e.periodcentered=250;e.paragraph=523;e.bullet=350;e.quotesinglbase=333;e.quotedblbase=556;e.quotedblright=556;e.guillemotright=500;e.ellipsis=889;e.perthousand=1e3;e.questiondown=500;e.grave=333;e.acute=333;e.circumflex=333;e.tilde=333;e.macron=333;e.breve=333;e.dotaccent=333;e.dieresis=333;e.ring=333;e.cedilla=333;e.hungarumlaut=333;e.ogonek=333;e.caron=333;e.emdash=889;e.AE=889;e.ordfeminine=276;e.Lslash=556;e.Oslash=722;e.OE=944;e.ordmasculine=310;e.ae=667;e.dotlessi=278;e.lslash=278;e.oslash=500;e.oe=667;e.germandbls=500;e.Idieresis=333;e.eacute=444;e.abreve=500;e.uhungarumlaut=500;e.ecaron=444;e.Ydieresis=556;e.divide=675;e.Yacute=556;e.Acircumflex=611;e.aacute=500;e.Ucircumflex=722;e.yacute=444;e.scommaaccent=389;e.ecircumflex=444;e.Uring=722;e.Udieresis=722;e.aogonek=500;e.Uacute=722;e.uogonek=500;e.Edieresis=611;e.Dcroat=722;e.commaaccent=250;e.copyright=760;e.Emacron=611;e.ccaron=444;e.aring=500;e.Ncommaaccent=667;e.lacute=278;e.agrave=500;e.Tcommaaccent=556;e.Cacute=667;e.atilde=500;e.Edotaccent=611;e.scaron=389;e.scedilla=389;e.iacute=278;e.lozenge=471;e.Rcaron=611;e.Gcommaaccent=722;e.ucircumflex=500;e.acircumflex=500;e.Amacron=611;e.rcaron=389;e.ccedilla=444;e.Zdotaccent=556;e.Thorn=611;e.Omacron=722;e.Racute=611;e.Sacute=500;e.dcaron=544;e.Umacron=722;e.uring=500;e.threesuperior=300;e.Ograve=722;e.Agrave=611;e.Abreve=611;e.multiply=675;e.uacute=500;e.Tcaron=556;e.partialdiff=476;e.ydieresis=444;e.Nacute=667;e.icircumflex=278;e.Ecircumflex=611;e.adieresis=500;e.edieresis=444;e.cacute=444;e.nacute=500;e.umacron=500;e.Ncaron=667;e.Iacute=333;e.plusminus=675;e.brokenbar=275;e.registered=760;e.Gbreve=722;e.Idotaccent=333;e.summation=600;e.Egrave=611;e.racute=389;e.omacron=500;e.Zacute=556;e.Zcaron=556;e.greaterequal=549;e.Eth=722;e.Ccedilla=667;e.lcommaaccent=278;e.tcaron=300;e.eogonek=444;e.Uogonek=722;e.Aacute=611;e.Adieresis=611;e.egrave=444;e.zacute=389;e.iogonek=278;e.Oacute=722;e.oacute=500;e.amacron=500;e.sacute=389;e.idieresis=278;e.Ocircumflex=722;e.Ugrave=722;e.Delta=612;e.thorn=500;e.twosuperior=300;e.Odieresis=722;e.mu=500;e.igrave=278;e.ohungarumlaut=500;e.Eogonek=611;e.dcroat=500;e.threequarters=750;e.Scedilla=500;e.lcaron=300;e.Kcommaaccent=667;e.Lacute=556;e.trademark=980;e.edotaccent=444;e.Igrave=333;e.Imacron=333;e.Lcaron=611;e.onehalf=750;e.lessequal=549;e.ocircumflex=500;e.ntilde=500;e.Uhungarumlaut=722;e.Eacute=611;e.emacron=444;e.gbreve=500;e.onequarter=750;e.Scaron=500;e.Scommaaccent=500;e.Ohungarumlaut=722;e.degree=400;e.ograve=500;e.Ccaron=667;e.ugrave=500;e.radical=453;e.Dcaron=722;e.rcommaaccent=389;e.Ntilde=667;e.otilde=500;e.Rcommaaccent=611;e.Lcommaaccent=556;e.Atilde=611;e.Aogonek=611;e.Aring=611;e.Otilde=722;e.zdotaccent=389;e.Ecaron=611;e.Iogonek=333;e.kcommaaccent=444;e.minus=675;e.Icircumflex=333;e.ncaron=500;e.tcommaaccent=278;e.logicalnot=675;e.odieresis=500;e.udieresis=500;e.notequal=549;e.gcommaaccent=500;e.eth=500;e.zcaron=389;e.ncommaaccent=500;e.onesuperior=300;e.imacron=278;e.Euro=500}));e.ZapfDingbats=getLookupTableFactory((function(e){e.space=278;e.a1=974;e.a2=961;e.a202=974;e.a3=980;e.a4=719;e.a5=789;e.a119=790;e.a118=791;e.a117=690;e.a11=960;e.a12=939;e.a13=549;e.a14=855;e.a15=911;e.a16=933;e.a105=911;e.a17=945;e.a18=974;e.a19=755;e.a20=846;e.a21=762;e.a22=761;e.a23=571;e.a24=677;e.a25=763;e.a26=760;e.a27=759;e.a28=754;e.a6=494;e.a7=552;e.a8=537;e.a9=577;e.a10=692;e.a29=786;e.a30=788;e.a31=788;e.a32=790;e.a33=793;e.a34=794;e.a35=816;e.a36=823;e.a37=789;e.a38=841;e.a39=823;e.a40=833;e.a41=816;e.a42=831;e.a43=923;e.a44=744;e.a45=723;e.a46=749;e.a47=790;e.a48=792;e.a49=695;e.a50=776;e.a51=768;e.a52=792;e.a53=759;e.a54=707;e.a55=708;e.a56=682;e.a57=701;e.a58=826;e.a59=815;e.a60=789;e.a61=789;e.a62=707;e.a63=687;e.a64=696;e.a65=689;e.a66=786;e.a67=787;e.a68=713;e.a69=791;e.a70=785;e.a71=791;e.a72=873;e.a73=761;e.a74=762;e.a203=762;e.a75=759;e.a204=759;e.a76=892;e.a77=892;e.a78=788;e.a79=784;e.a81=438;e.a82=138;e.a83=277;e.a84=415;e.a97=392;e.a98=392;e.a99=668;e.a100=668;e.a89=390;e.a90=390;e.a93=317;e.a94=317;e.a91=276;e.a92=276;e.a205=509;e.a85=509;e.a206=410;e.a86=410;e.a87=234;e.a88=234;e.a95=334;e.a96=334;e.a101=732;e.a102=544;e.a103=544;e.a104=910;e.a106=667;e.a107=760;e.a108=760;e.a112=776;e.a111=595;e.a110=694;e.a109=626;e.a120=788;e.a121=788;e.a122=788;e.a123=788;e.a124=788;e.a125=788;e.a126=788;e.a127=788;e.a128=788;e.a129=788;e.a130=788;e.a131=788;e.a132=788;e.a133=788;e.a134=788;e.a135=788;e.a136=788;e.a137=788;e.a138=788;e.a139=788;e.a140=788;e.a141=788;e.a142=788;e.a143=788;e.a144=788;e.a145=788;e.a146=788;e.a147=788;e.a148=788;e.a149=788;e.a150=788;e.a151=788;e.a152=788;e.a153=788;e.a154=788;e.a155=788;e.a156=788;e.a157=788;e.a158=788;e.a159=788;e.a160=894;e.a161=838;e.a163=1016;e.a164=458;e.a196=748;e.a165=924;e.a192=748;e.a166=918;e.a167=927;e.a168=928;e.a169=928;e.a170=834;e.a171=873;e.a172=828;e.a173=924;e.a162=924;e.a174=917;e.a175=930;e.a176=931;e.a177=463;e.a178=883;e.a179=836;e.a193=836;e.a180=867;e.a199=867;e.a181=696;e.a200=696;e.a182=874;e.a201=874;e.a183=760;e.a184=946;e.a197=771;e.a185=865;e.a194=771;e.a198=888;e.a186=967;e.a195=888;e.a187=831;e.a188=873;e.a189=927;e.a190=970;e.a191=918}))})),ni=getLookupTableFactory((function(e){e.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426};e["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439};e["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426};e["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426};e.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523};e["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532};e["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523};e["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532};e["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450};e["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461};e["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441};e["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462};e.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN};e.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}}));class GlyfTable{constructor({glyfTable:e,isGlyphLocationsLong:t,locaTable:a,numGlyphs:r}){this.glyphs=[];const i=new DataView(a.buffer,a.byteOffset,a.byteLength),n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=t?4:2;let o=t?i.getUint32(0):2*i.getUint16(0),c=0;for(let e=0;e<r;e++){c+=s;const e=t?i.getUint32(c):2*i.getUint16(c);if(e===o){this.glyphs.push(new Glyph({}));continue}const a=Glyph.parse(o,n);this.glyphs.push(a);o=e}}getSize(){return Math.sumPrecise(this.glyphs.map((e=>e.getSize()+3&-4)))}write(){const e=this.getSize(),t=new DataView(new ArrayBuffer(e)),a=e>131070,r=a?4:2,i=new DataView(new ArrayBuffer((this.glyphs.length+1)*r));a?i.setUint32(0,0):i.setUint16(0,0);let n=0,s=0;for(const e of this.glyphs){n+=e.write(n,t);n=n+3&-4;s+=r;a?i.setUint32(s,n):i.setUint16(s,n>>1)}return{isLocationLong:a,loca:new Uint8Array(i.buffer),glyf:new Uint8Array(t.buffer)}}scale(e){for(let t=0,a=this.glyphs.length;t<a;t++)this.glyphs[t].scale(e[t])}}class Glyph{constructor({header:e=null,simple:t=null,composites:a=null}){this.header=e;this.simple=t;this.composites=a}static parse(e,t){const[a,r]=GlyphHeader.parse(e,t);e+=a;if(r.numberOfContours<0){const a=[];for(;;){const[r,i]=CompositeGlyph.parse(e,t);e+=r;a.push(i);if(!(32&i.flags))break}return new Glyph({header:r,composites:a})}const i=SimpleGlyph.parse(e,t,r.numberOfContours);return new Glyph({header:r,simple:i})}getSize(){if(!this.header)return 0;const e=this.simple?this.simple.getSize():Math.sumPrecise(this.composites.map((e=>e.getSize())));return this.header.getSize()+e}write(e,t){if(!this.header)return 0;const a=e;e+=this.header.write(e,t);if(this.simple)e+=this.simple.write(e,t);else for(const a of this.composites)e+=a.write(e,t);return e-a}scale(e){if(!this.header)return;const t=(this.header.xMin+this.header.xMax)/2;this.header.scale(t,e);if(this.simple)this.simple.scale(t,e);else for(const a of this.composites)a.scale(t,e)}}class GlyphHeader{constructor({numberOfContours:e,xMin:t,yMin:a,xMax:r,yMax:i}){this.numberOfContours=e;this.xMin=t;this.yMin=a;this.xMax=r;this.yMax=i}static parse(e,t){return[10,new GlyphHeader({numberOfContours:t.getInt16(e),xMin:t.getInt16(e+2),yMin:t.getInt16(e+4),xMax:t.getInt16(e+6),yMax:t.getInt16(e+8)})]}getSize(){return 10}write(e,t){t.setInt16(e,this.numberOfContours);t.setInt16(e+2,this.xMin);t.setInt16(e+4,this.yMin);t.setInt16(e+6,this.xMax);t.setInt16(e+8,this.yMax);return 10}scale(e,t){this.xMin=Math.round(e+(this.xMin-e)*t);this.xMax=Math.round(e+(this.xMax-e)*t)}}class Contour{constructor({flags:e,xCoordinates:t,yCoordinates:a}){this.xCoordinates=t;this.yCoordinates=a;this.flags=e}}class SimpleGlyph{constructor({contours:e,instructions:t}){this.contours=e;this.instructions=t}static parse(e,t,a){const r=[];for(let i=0;i<a;i++){const a=t.getUint16(e);e+=2;r.push(a)}const i=r[a-1]+1,n=t.getUint16(e);e+=2;const s=new Uint8Array(t).slice(e,e+n);e+=n;const o=[];for(let a=0;a<i;e++,a++){let r=t.getUint8(e);o.push(r);if(8&r){const i=t.getUint8(++e);r^=8;for(let e=0;e<i;e++)o.push(r);a+=i}}const c=[];let l=[],h=[],u=[];const d=[];let f=0,g=0;for(let a=0;a<i;a++){const i=o[a];if(2&i){const a=t.getUint8(e++);g+=16&i?a:-a;l.push(g)}else if(16&i)l.push(g);else{g+=t.getInt16(e);e+=2;l.push(g)}if(r[f]===a){f++;c.push(l);l=[]}}g=0;f=0;for(let a=0;a<i;a++){const i=o[a];if(4&i){const a=t.getUint8(e++);g+=32&i?a:-a;h.push(g)}else if(32&i)h.push(g);else{g+=t.getInt16(e);e+=2;h.push(g)}u.push(1&i|64&i);if(r[f]===a){l=c[f];f++;d.push(new Contour({flags:u,xCoordinates:l,yCoordinates:h}));h=[];u=[]}}return new SimpleGlyph({contours:d,instructions:s})}getSize(){let e=2*this.contours.length+2+this.instructions.length,t=0,a=0;for(const r of this.contours){e+=r.flags.length;for(let i=0,n=r.xCoordinates.length;i<n;i++){const n=r.xCoordinates[i],s=r.yCoordinates[i];let o=Math.abs(n-t);o>255?e+=2:o>0&&(e+=1);t=n;o=Math.abs(s-a);o>255?e+=2:o>0&&(e+=1);a=s}}return e}write(e,t){const a=e,r=[],i=[],n=[];let s=0,o=0;for(const a of this.contours){for(let e=0,t=a.xCoordinates.length;e<t;e++){let t=a.flags[e];const c=a.xCoordinates[e];let l=c-s;if(0===l){t|=16;r.push(0)}else{const e=Math.abs(l);if(e<=255){t|=l>=0?18:2;r.push(e)}else r.push(l)}s=c;const h=a.yCoordinates[e];l=h-o;if(0===l){t|=32;i.push(0)}else{const e=Math.abs(l);if(e<=255){t|=l>=0?36:4;i.push(e)}else i.push(l)}o=h;n.push(t)}t.setUint16(e,r.length-1);e+=2}t.setUint16(e,this.instructions.length);e+=2;if(this.instructions.length){new Uint8Array(t.buffer,0,t.buffer.byteLength).set(this.instructions,e);e+=this.instructions.length}for(const a of n)t.setUint8(e++,a);for(let a=0,i=r.length;a<i;a++){const i=r[a],s=n[a];if(2&s)t.setUint8(e++,i);else if(!(16&s)){t.setInt16(e,i);e+=2}}for(let a=0,r=i.length;a<r;a++){const r=i[a],s=n[a];if(4&s)t.setUint8(e++,r);else if(!(32&s)){t.setInt16(e,r);e+=2}}return e-a}scale(e,t){for(const a of this.contours)if(0!==a.xCoordinates.length)for(let r=0,i=a.xCoordinates.length;r<i;r++)a.xCoordinates[r]=Math.round(e+(a.xCoordinates[r]-e)*t)}}class CompositeGlyph{constructor({flags:e,glyphIndex:t,argument1:a,argument2:r,transf:i,instructions:n}){this.flags=e;this.glyphIndex=t;this.argument1=a;this.argument2=r;this.transf=i;this.instructions=n}static parse(e,t){const a=e,r=[];let i=t.getUint16(e);const n=t.getUint16(e+2);e+=4;let s,o;if(1&i){if(2&i){s=t.getInt16(e);o=t.getInt16(e+2)}else{s=t.getUint16(e);o=t.getUint16(e+2)}e+=4;i^=1}else{if(2&i){s=t.getInt8(e);o=t.getInt8(e+1)}else{s=t.getUint8(e);o=t.getUint8(e+1)}e+=2}if(8&i){r.push(t.getUint16(e));e+=2}else if(64&i){r.push(t.getUint16(e),t.getUint16(e+2));e+=4}else if(128&i){r.push(t.getUint16(e),t.getUint16(e+2),t.getUint16(e+4),t.getUint16(e+6));e+=8}let c=null;if(256&i){const a=t.getUint16(e);e+=2;c=new Uint8Array(t).slice(e,e+a);e+=a}return[e-a,new CompositeGlyph({flags:i,glyphIndex:n,argument1:s,argument2:o,transf:r,instructions:c})]}getSize(){let e=4+2*this.transf.length;256&this.flags&&(e+=2+this.instructions.length);e+=2;2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(e+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(e+=2);return e}write(e,t){const a=e;2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=1):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=1);t.setUint16(e,this.flags);t.setUint16(e+2,this.glyphIndex);e+=4;if(1&this.flags){if(2&this.flags){t.setInt16(e,this.argument1);t.setInt16(e+2,this.argument2)}else{t.setUint16(e,this.argument1);t.setUint16(e+2,this.argument2)}e+=4}else{t.setUint8(e,this.argument1);t.setUint8(e+1,this.argument2);e+=2}if(256&this.flags){t.setUint16(e,this.instructions.length);e+=2;if(this.instructions.length){new Uint8Array(t.buffer,0,t.buffer.byteLength).set(this.instructions,e);e+=this.instructions.length}}return e-a}scale(e,t){}}function writeInt16(e,t,a){e[t]=a>>8&255;e[t+1]=255&a}function writeInt32(e,t,a){e[t]=a>>24&255;e[t+1]=a>>16&255;e[t+2]=a>>8&255;e[t+3]=255&a}function writeData(e,t,a){if(a instanceof Uint8Array)e.set(a,t);else if("string"==typeof a)for(let r=0,i=a.length;r<i;r++)e[t++]=255&a.charCodeAt(r);else for(const r of a)e[t++]=255&r}class OpenTypeFileBuilder{constructor(e){this.sfnt=e;this.tables=Object.create(null)}static getSearchParams(e,t){let a=1,r=0;for(;(a^e)>a;){a<<=1;r++}const i=a*t;return{range:i,entry:r,rangeShift:t*e-i}}toArray(){let e=this.sfnt;const t=this.tables,a=Object.keys(t);a.sort();const r=a.length;let i,n,s,o,c,l=12+16*r;const h=[l];for(i=0;i<r;i++){o=t[a[i]];l+=(o.length+3&-4)>>>0;h.push(l)}const u=new Uint8Array(l);for(i=0;i<r;i++){o=t[a[i]];writeData(u,h[i],o)}"true"===e&&(e=string32(65536));u[0]=255&e.charCodeAt(0);u[1]=255&e.charCodeAt(1);u[2]=255&e.charCodeAt(2);u[3]=255&e.charCodeAt(3);writeInt16(u,4,r);const d=OpenTypeFileBuilder.getSearchParams(r,16);writeInt16(u,6,d.range);writeInt16(u,8,d.entry);writeInt16(u,10,d.rangeShift);l=12;for(i=0;i<r;i++){c=a[i];u[l]=255&c.charCodeAt(0);u[l+1]=255&c.charCodeAt(1);u[l+2]=255&c.charCodeAt(2);u[l+3]=255&c.charCodeAt(3);let e=0;for(n=h[i],s=h[i+1];n<s;n+=4){e=e+readUint32(u,n)>>>0}writeInt32(u,l+4,e);writeInt32(u,l+8,h[i]);writeInt32(u,l+12,t[c].length);l+=16}return u}addTable(e,t){if(e in this.tables)throw new Error("Table "+e+" already exists");this.tables[e]=t}}const si=[4],oi=[5],ci=[6],li=[7],hi=[8],ui=[12,35],di=[14],fi=[21],gi=[22],pi=[30],mi=[31];class Type1CharString{constructor(){this.width=0;this.lsb=0;this.flexing=!1;this.output=[];this.stack=[]}convert(e,t,a){const r=e.length;let i,n,s,o=!1;for(let c=0;c<r;c++){let r=e[c];if(r<32){12===r&&(r=(r<<8)+e[++c]);switch(r){case 1:case 3:case 9:case 3072:case 3073:case 3074:case 3105:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){o=!0;break}const e=this.stack.pop();this.stack.push(0,e);break}o=this.executeCommand(1,si);break;case 5:o=this.executeCommand(2,oi);break;case 6:o=this.executeCommand(1,ci);break;case 7:o=this.executeCommand(1,li);break;case 8:o=this.executeCommand(6,hi);break;case 10:if(this.stack.length<1){o=!0;break}s=this.stack.pop();if(!t[s]){o=!0;break}o=this.convert(t[s],t,a);break;case 11:return o;case 13:if(this.stack.length<2){o=!0;break}i=this.stack.pop();n=this.stack.pop();this.lsb=n;this.width=i;this.stack.push(i,n);o=this.executeCommand(2,gi);break;case 14:this.output.push(di[0]);break;case 21:if(this.flexing)break;o=this.executeCommand(2,fi);break;case 22:if(this.flexing){this.stack.push(0);break}o=this.executeCommand(1,gi);break;case 30:o=this.executeCommand(4,pi);break;case 31:o=this.executeCommand(4,mi);break;case 3078:if(a){const e=this.stack.at(-5);this.seac=this.stack.splice(-4,4);this.seac[0]+=this.lsb-e;o=this.executeCommand(0,di)}else o=this.executeCommand(4,di);break;case 3079:if(this.stack.length<4){o=!0;break}this.stack.pop();i=this.stack.pop();const e=this.stack.pop();n=this.stack.pop();this.lsb=n;this.width=i;this.stack.push(i,n,e);o=this.executeCommand(3,fi);break;case 3084:if(this.stack.length<2){o=!0;break}const c=this.stack.pop(),l=this.stack.pop();this.stack.push(l/c);break;case 3088:if(this.stack.length<2){o=!0;break}s=this.stack.pop();const h=this.stack.pop();if(0===s&&3===h){const e=this.stack.splice(-17,17);this.stack.push(e[2]+e[0],e[3]+e[1],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14]);o=this.executeCommand(13,ui,!0);this.flexing=!1;this.stack.push(e[15],e[16])}else 1===s&&0===h&&(this.flexing=!0);break;case 3089:break;default:warn(\'Unknown type 1 charstring command of "\'+r+\'"\')}if(o)break}else{r<=246?r-=139:r=r<=250?256*(r-247)+e[++c]+108:r<=254?-256*(r-251)-e[++c]-108:(255&e[++c])<<24|(255&e[++c])<<16|(255&e[++c])<<8|255&e[++c];this.stack.push(r)}}return o}executeCommand(e,t,a){const r=this.stack.length;if(e>r)return!0;const i=r-e;for(let e=i;e<r;e++){let t=this.stack[e];if(Number.isInteger(t))this.output.push(28,t>>8&255,255&t);else{t=65536*t|0;this.output.push(255,t>>24&255,t>>16&255,t>>8&255,255&t)}}this.output.push(...t);a?this.stack.splice(i,e):this.stack.length=0;return!1}}function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function decrypt(e,t,a){if(a>=e.length)return new Uint8Array(0);let r,i,n=0|t;for(r=0;r<a;r++)n=52845*(e[r]+n)+22719&65535;const s=e.length-a,o=new Uint8Array(s);for(r=a,i=0;i<s;r++,i++){const t=e[r];o[i]=t^n>>8;n=52845*(t+n)+22719&65535}return o}function isSpecial(e){return 47===e||91===e||93===e||123===e||125===e||40===e||41===e}class Type1Parser{constructor(e,t,a){if(t){const t=e.getBytes(),a=!((isHexDigit(t[0])||isWhiteSpace(t[0]))&&isHexDigit(t[1])&&isHexDigit(t[2])&&isHexDigit(t[3])&&isHexDigit(t[4])&&isHexDigit(t[5])&&isHexDigit(t[6])&&isHexDigit(t[7]));e=new Stream(a?decrypt(t,55665,4):function decryptAscii(e,t,a){let r=0|t;const i=e.length,n=new Uint8Array(i>>>1);let s,o;for(s=0,o=0;s<i;s++){const t=e[s];if(!isHexDigit(t))continue;s++;let a;for(;s<i&&!isHexDigit(a=e[s]);)s++;if(s<i){const e=parseInt(String.fromCharCode(t,a),16);n[o++]=e^r>>8;r=52845*(e+r)+22719&65535}}return n.slice(a,o)}(t,55665,4))}this.seacAnalysisEnabled=!!a;this.stream=e;this.nextChar()}readNumberArray(){this.getToken();const e=[];for(;;){const t=this.getToken();if(null===t||"]"===t||"}"===t)break;e.push(parseFloat(t||0))}return e}readNumber(){const e=this.getToken();return parseFloat(e||0)}readInt(){const e=this.getToken();return 0|parseInt(e||0,10)}readBoolean(){return"true"===this.getToken()?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){this.stream.skip(-2);return this.currentChar=this.stream.getByte()}getToken(){let e=!1,t=this.currentChar;for(;;){if(-1===t)return null;if(e)10!==t&&13!==t||(e=!1);else if(37===t)e=!0;else if(!isWhiteSpace(t))break;t=this.nextChar()}if(isSpecial(t)){this.nextChar();return String.fromCharCode(t)}let a="";do{a+=String.fromCharCode(t);t=this.nextChar()}while(t>=0&&!isWhiteSpace(t)&&!isSpecial(t));return a}readCharStrings(e,t){return-1===t?e:decrypt(e,4330,t)}extractFontProgram(e){const t=this.stream,a=[],r=[],i=Object.create(null);i.lenIV=4;const n={subrs:[],charstrings:[],properties:{privateData:i}};let s,o,c,l;for(;null!==(s=this.getToken());)if("/"===s){s=this.getToken();switch(s){case"CharStrings":this.getToken();this.getToken();this.getToken();this.getToken();for(;;){s=this.getToken();if(null===s||"end"===s)break;if("/"!==s)continue;const e=this.getToken();o=this.readInt();this.getToken();c=o>0?t.getBytes(o):new Uint8Array(0);l=n.properties.privateData.lenIV;const a=this.readCharStrings(c,l);this.nextChar();s=this.getToken();"noaccess"===s?this.getToken():"/"===s&&this.prevChar();r.push({glyph:e,encoded:a})}break;case"Subrs":this.readInt();this.getToken();for(;"dup"===this.getToken();){const e=this.readInt();o=this.readInt();this.getToken();c=o>0?t.getBytes(o):new Uint8Array(0);l=n.properties.privateData.lenIV;const r=this.readCharStrings(c,l);this.nextChar();s=this.getToken();"noaccess"===s&&this.getToken();a[e]=r}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const e=this.readNumberArray();e.length>0&&e.length,0;break;case"StemSnapH":case"StemSnapV":n.properties.privateData[s]=this.readNumberArray();break;case"StdHW":case"StdVW":n.properties.privateData[s]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":n.properties.privateData[s]=this.readNumber();break;case"ExpansionFactor":n.properties.privateData[s]=this.readNumber()||.06;break;case"ForceBold":n.properties.privateData[s]=this.readBoolean()}}for(const{encoded:t,glyph:i}of r){const r=new Type1CharString,s=r.convert(t,a,this.seacAnalysisEnabled);let o=r.output;s&&(o=[14]);const c={glyphName:i,charstring:o,width:r.width,lsb:r.lsb,seac:r.seac};".notdef"===i?n.charstrings.unshift(c):n.charstrings.push(c);if(e.builtInEncoding){const t=e.builtInEncoding.indexOf(i);t>-1&&void 0===e.widths[t]&&t>=e.firstChar&&t<=e.lastChar&&(e.widths[t]=r.width)}}return n}extractFontHeader(e){let t;for(;null!==(t=this.getToken());)if("/"===t){t=this.getToken();switch(t){case"FontMatrix":const a=this.readNumberArray();e.fontMatrix=a;break;case"Encoding":const r=this.getToken();let i;if(/^\\d+$/.test(r)){i=[];const e=0|parseInt(r,10);this.getToken();for(let a=0;a<e;a++){t=this.getToken();for(;"dup"!==t&&"def"!==t;){t=this.getToken();if(null===t)return}if("def"===t)break;const e=this.readInt();this.getToken();const a=this.getToken();i[e]=a;this.getToken()}}else i=getEncoding(r);e.builtInEncoding=i;break;case"FontBBox":const n=this.readNumberArray();e.ascent=Math.max(n[3],n[1]);e.descent=Math.min(n[1],n[3]);e.ascentScaled=!0}}}}function findBlock(e,t,a){const r=e.length,i=t.length,n=r-i;let s=a,o=!1;for(;s<n;){let a=0;for(;a<i&&e[s+a]===t[a];)a++;if(a>=i){s+=a;for(;s<r&&isWhiteSpace(e[s]);)s++;o=!0;break}s++}return{found:o,length:s}}class Type1Font{constructor(e,t,a){let r=a.length1,i=a.length2,n=t.peekBytes(6);const s=128===n[0]&&1===n[1];if(s){t.skip(6);r=n[5]<<24|n[4]<<16|n[3]<<8|n[2]}const o=function getHeaderBlock(e,t){const a=[101,101,120,101,99],r=e.pos;let i,n,s,o;try{i=e.getBytes(t);n=i.length}catch{}if(n===t){s=findBlock(i,a,t-2*a.length);if(s.found&&s.length===t)return{stream:new Stream(i),length:t}}warn(\'Invalid "Length1" property in Type1 font -- trying to recover.\');e.pos=r;for(;;){s=findBlock(e.peekBytes(2048),a,0);if(0===s.length)break;e.pos+=s.length;if(s.found){o=e.pos-r;break}}e.pos=r;if(o)return{stream:new Stream(e.getBytes(o)),length:o};warn(\'Unable to recover "Length1" property in Type1 font -- using as is.\');return{stream:new Stream(e.getBytes(t)),length:t}}(t,r);new Type1Parser(o.stream,!1,Rr).extractFontHeader(a);if(s){n=t.getBytes(6);i=n[5]<<24|n[4]<<16|n[3]<<8|n[2]}const c=function getEexecBlock(e,t){const a=e.getBytes();if(0===a.length)throw new FormatError("getEexecBlock - no font program found.");return{stream:new Stream(a),length:a.length}}(t),l=new Type1Parser(c.stream,!0,Rr).extractFontProgram(a);for(const e in l.properties)a[e]=l.properties[e];const h=l.charstrings,u=this.getType2Charstrings(h),d=this.getType2Subrs(l.subrs);this.charstrings=h;this.data=this.wrap(e,u,this.charstrings,d,a);this.seacs=this.getSeacs(l.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const e=[".notdef"];for(const{glyphName:t}of this.charstrings)e.push(t);return e}getGlyphMapping(e){const t=this.charstrings;if(e.composite){const a=Object.create(null);for(let r=0,i=t.length;r<i;r++){a[e.cMap.charCodeOf(r)]=r+1}return a}const a=[".notdef"];let r,i;for(i=0;i<t.length;i++)a.push(t[i].glyphName);const n=e.builtInEncoding;if(n){r=Object.create(null);for(const e in n){i=a.indexOf(n[e]);i>=0&&(r[e]=i)}}return type1FontGlyphMapping(e,r,a)}hasGlyphId(e){if(e<0||e>=this.numGlyphs)return!1;if(0===e)return!0;return this.charstrings[e-1].charstring.length>0}getSeacs(e){const t=[];for(let a=0,r=e.length;a<r;a++){const r=e[a];r.seac&&(t[a+1]=r.seac)}return t}getType2Charstrings(e){const t=[];for(const a of e)t.push(a.charstring);return t}getType2Subrs(e){let t=0;const a=e.length;t=a<1133?107:a<33769?1131:32768;const r=[];let i;for(i=0;i<t;i++)r.push([11]);for(i=0;i<a;i++)r.push(e[i]);return r}wrap(e,t,a,r,i){const n=new CFF;n.header=new CFFHeader(1,0,4,4);n.names=[e];const s=new CFFTopDict;s.setByName("version",391);s.setByName("Notice",392);s.setByName("FullName",393);s.setByName("FamilyName",394);s.setByName("Weight",395);s.setByName("Encoding",null);s.setByName("FontMatrix",i.fontMatrix);s.setByName("FontBBox",i.bbox);s.setByName("charset",null);s.setByName("CharStrings",null);s.setByName("Private",null);n.topDict=s;const o=new CFFStrings;o.add("Version 0.11");o.add("See original notice");o.add(e);o.add(e);o.add("Medium");n.strings=o;n.globalSubrIndex=new CFFIndex;const c=t.length,l=[".notdef"];let h,u;for(h=0;h<c;h++){const e=a[h].glyphName;-1===Hr.indexOf(e)&&o.add(e);l.push(e)}n.charset=new CFFCharset(!1,0,l);const d=new CFFIndex;d.add([139,14]);for(h=0;h<c;h++)d.add(t[h]);n.charStrings=d;const f=new CFFPrivateDict;f.setByName("Subrs",null);const g=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(h=0,u=g.length;h<u;h++){const e=g[h];if(!(e in i.privateData))continue;const t=i.privateData[e];if(Array.isArray(t))for(let e=t.length-1;e>0;e--)t[e]-=t[e-1];f.setByName(e,t)}n.topDict.privateDict=f;const p=new CFFIndex;for(h=0,u=r.length;h<u;h++)p.add(r[h]);f.subrsIndex=p;return new CFFCompiler(n).compile()}}const bi=[[57344,63743],[1048576,1114109]],yi=1e3,wi=["ascent","bbox","black","bold","charProcOperatorList","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","disableFontFace","fallbackName","fontExtraProperties","fontMatrix","isInvalidPDFjsFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","systemFontInfo","vertical"],xi=["cMap","composite","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","subtype","toFontChar","toUnicode","type","vmetrics","widths"];function adjustWidths(e){if(!e.fontMatrix)return;if(e.fontMatrix[0]===t[0])return;const a=.001/e.fontMatrix[0],r=e.widths;for(const e in r)r[e]*=a;e.defaultWidth*=a}function amendFallbackToUnicode(e){if(!e.fallbackToUnicode)return;if(e.toUnicode instanceof IdentityToUnicodeMap)return;const t=[];for(const a in e.fallbackToUnicode)e.toUnicode.has(a)||(t[a]=e.fallbackToUnicode[a]);t.length>0&&e.toUnicode.amend(t)}class fonts_Glyph{constructor(e,t,a,r,i,n,s,o,c){this.originalCharCode=e;this.fontChar=t;this.unicode=a;this.accent=r;this.width=i;this.vmetric=n;this.operatorListId=s;this.isSpace=o;this.isInFont=c}get category(){return shadow(this,"category",function getCharUnicodeCategory(e){const t=Dr.get(e);if(t)return t;const a=e.match(Mr),r={isWhitespace:!!a?.[1],isZeroWidthDiacritic:!!a?.[2],isInvisibleFormatMark:!!a?.[3]};Dr.set(e,r);return r}(this.unicode),!0)}}function int16(e,t){return(e<<8)+t}function writeSignedInt16(e,t,a){e[t+1]=a;e[t]=a>>>8}function signedInt16(e,t){const a=(e<<8)+t;return 32768&a?a-65536:a}function string16(e){return String.fromCharCode(e>>8&255,255&e)}function safeString16(e){e>32767?e=32767:e<-32768&&(e=-32768);return String.fromCharCode(e>>8&255,255&e)}function isTrueTypeCollectionFile(e){return"ttcf"===bytesToString(e.peekBytes(4))}function getFontFileType(e,{type:t,subtype:a,composite:r}){let i,n;if(function isTrueTypeFile(e){const t=e.peekBytes(4);return 65536===readUint32(t,0)||"true"===bytesToString(t)}(e)||isTrueTypeCollectionFile(e))i=r?"CIDFontType2":"TrueType";else if(function isOpenTypeFile(e){return"OTTO"===bytesToString(e.peekBytes(4))}(e))i=r?"CIDFontType2":"OpenType";else if(function isType1File(e){const t=e.peekBytes(2);return 37===t[0]&&33===t[1]||128===t[0]&&1===t[1]}(e))i=r?"CIDFontType0":"MMType1"===t?"MMType1":"Type1";else if(function isCFFFile(e){const t=e.peekBytes(4);return t[0]>=1&&t[3]>=1&&t[3]<=4}(e))if(r){i="CIDFontType0";n="CIDFontType0C"}else{i="MMType1"===t?"MMType1":"Type1";n="Type1C"}else{warn("getFontFileType: Unable to detect correct font file Type/Subtype.");i=t;n=a}return[i,n]}function applyStandardFontGlyphMap(e,t){for(const a in t)e[+a]=t[a]}function buildToFontChar(e,t,a){const r=[];let i;for(let a=0,n=e.length;a<n;a++){i=getUnicodeForGlyph(e[a],t);-1!==i&&(r[a]=i)}for(const e in a){i=getUnicodeForGlyph(a[e],t);-1!==i&&(r[+e]=i)}return r}function isMacNameRecord(e){return 1===e.platform&&0===e.encoding&&0===e.language}function isWinNameRecord(e){return 3===e.platform&&1===e.encoding&&1033===e.language}function convertCidString(e,t,a=!1){switch(t.length){case 1:return t.charCodeAt(0);case 2:return t.charCodeAt(0)<<8|t.charCodeAt(1)}const r=`Unsupported CID string (charCode ${e}): "${t}".`;if(a)throw new FormatError(r);warn(r);return t}function adjustMapping(e,t,a,r){const i=Object.create(null),n=new Map,s=[],o=new Set;let c=0;let l=bi[c][0],h=bi[c][1];let u=null;for(const f in e){let g=e[f];if(!t(g))continue;if(l>h){c++;if(c>=bi.length){warn("Ran out of space in font private use area.");break}l=bi[c][0];h=bi[c][1]}const p=l++;0===g&&(g=a);let m=r.get(f);if("string"==typeof m)if(1===m.length)m=m.codePointAt(0);else{if(!u){u=new Map;for(let e=64256;e<=64335;e++){const t=String.fromCharCode(e).normalize("NFKD");t.length>1&&u.set(t,e)}}m=u.get(m)||m.codePointAt(0)}if(m&&!(d=m,bi[0][0]<=d&&d<=bi[0][1]||bi[1][0]<=d&&d<=bi[1][1])&&!o.has(g)){n.set(m,g);o.add(g)}i[p]=g;s[f]=p}var d;return{toFontChar:s,charCodeToGlyphId:i,toUnicodeExtraMap:n,nextAvailableFontCharCode:l}}function createCmapTable(e,t,a){const r=function getRanges(e,t,a){const r=[];for(const t in e)e[t]>=a||r.push({fontCharCode:0|t,glyphId:e[t]});if(t)for(const[e,i]of t)i>=a||r.push({fontCharCode:e,glyphId:i});0===r.length&&r.push({fontCharCode:0,glyphId:0});r.sort(((e,t)=>e.fontCharCode-t.fontCharCode));const i=[],n=r.length;for(let e=0;e<n;){const t=r[e].fontCharCode,a=[r[e].glyphId];++e;let s=t;for(;e<n&&s+1===r[e].fontCharCode;){a.push(r[e].glyphId);++s;++e;if(65535===s)break}i.push([t,s,a])}return i}(e,t,a),i=r.at(-1)[1]>65535?2:1;let n,s,o,c,l="\\0\\0"+string16(i)+"\\0\\0"+string32(4+8*i);for(n=r.length-1;n>=0&&!(r[n][0]<=65535);--n);const h=n+1;r[n][0]<65535&&65535===r[n][1]&&(r[n][1]=65534);const u=r[n][1]<65535?1:0,d=h+u,f=OpenTypeFileBuilder.getSearchParams(d,2);let g,p,m,b,y="",w="",x="",S="",k="",C=0;for(n=0,s=h;n<s;n++){g=r[n];p=g[0];m=g[1];y+=string16(p);w+=string16(m);b=g[2];let e=!0;for(o=1,c=b.length;o<c;++o)if(b[o]!==b[o-1]+1){e=!1;break}if(e){x+=string16(b[0]-p&65535);S+=string16(0)}else{const e=2*(d-n)+2*C;C+=m-p+1;x+=string16(0);S+=string16(e);for(o=0,c=b.length;o<c;++o)k+=string16(b[o])}}if(u>0){w+="Ã¿Ã¿";y+="Ã¿Ã¿";x+="\\0";S+="\\0\\0"}const v="\\0\\0"+string16(2*d)+string16(f.range)+string16(f.entry)+string16(f.rangeShift)+w+"\\0\\0"+y+x+S+k;let F="",T="";if(i>1){l+="\\0\\0\\n"+string32(4+8*i+4+v.length);F="";for(n=0,s=r.length;n<s;n++){g=r[n];p=g[0];b=g[2];let e=b[0];for(o=1,c=b.length;o<c;++o)if(b[o]!==b[o-1]+1){m=g[0]+o-1;F+=string32(p)+string32(m)+string32(e);p=m+1;e=b[o]}F+=string32(p)+string32(g[1])+string32(e)}T="\\0\\f\\0\\0"+string32(F.length+16)+"\\0\\0\\0\\0"+string32(F.length/12)}return l+"\\0"+string16(v.length+4)+v+T+F}function createOS2Table(e,t,a){a||={unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};let r=0,i=0,n=0,s=0,o=null,c=0,l=-1;if(t){for(let e in t){e|=0;(o>e||!o)&&(o=e);c<e&&(c=e);l=getUnicodeRangeFor(e,l);if(l<32)r|=1<<l;else if(l<64)i|=1<<l-32;else if(l<96)n|=1<<l-64;else{if(!(l<123))throw new FormatError("Unicode ranges Bits > 123 are reserved for internal usage");s|=1<<l-96}}c>65535&&(c=65535)}else{o=0;c=255}const h=e.bbox||[0,0,0,0],u=a.unitsPerEm||(e.fontMatrix?1/Math.max(...e.fontMatrix.slice(0,4).map(Math.abs)):1e3),d=e.ascentScaled?1:u/yi,f=a.ascent||Math.round(d*(e.ascent||h[3]));let g=a.descent||Math.round(d*(e.descent||h[1]));g>0&&e.descent>0&&h[1]<0&&(g=-g);const p=a.yMax||f,m=-a.yMin||-g;return"\\0$Ã´\\0\\0\\0ÂÂ»\\0\\0\\0ÂÂÂ»\\0\\0Ã\\x001\\0\\0\\0\\0"+String.fromCharCode(e.fixedPitch?9:0)+"\\0\\0\\0\\0\\0\\0"+string32(r)+string32(i)+string32(n)+string32(s)+"*21*"+string16(e.italicAngle?1:0)+string16(o||e.firstChar)+string16(c||e.lastChar)+string16(f)+string16(g)+"\\0d"+string16(p)+string16(m)+"\\0\\0\\0\\0\\0\\0\\0\\0"+string16(e.xHeight)+string16(e.capHeight)+string16(0)+string16(o||e.firstChar)+"\\0"}function createPostTable(e){return"\\0\\0\\0"+string32(Math.floor(65536*e.italicAngle))+"\\0\\0\\0\\0"+string32(e.fixedPitch?1:0)+"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0"}function createPostscriptName(e){return e.replaceAll(/[^\\x21-\\x7E]|[[\\](){}<>/%]/g,"").slice(0,63)}function createNameTable(e,t){t||(t=[[],[]]);const a=[t[0][0]||"Original licence",t[0][1]||e,t[0][2]||"Unknown",t[0][3]||"uniqueID",t[0][4]||e,t[0][5]||"Version 0.11",t[0][6]||createPostscriptName(e),t[0][7]||"Unknown",t[0][8]||"Unknown",t[0][9]||"Unknown"],r=[];let i,n,s,o,c;for(i=0,n=a.length;i<n;i++){c=t[1][i]||a[i];const e=[];for(s=0,o=c.length;s<o;s++)e.push(string16(c.charCodeAt(s)));r.push(e.join(""))}const l=[a,r],h=["\\0","\\0"],u=["\\0\\0","\\0"],d=["\\0\\0","\\t"],f=a.length*h.length;let g="\\0\\0"+string16(f)+string16(12*f+6),p=0;for(i=0,n=h.length;i<n;i++){const e=l[i];for(s=0,o=e.length;s<o;s++){c=e[s];g+=h[i]+u[i]+d[i]+string16(s)+string16(c.length)+string16(p);p+=c.length}}g+=a.join("")+r.join("");return g}class Font{constructor(e,t,a,r){this.name=e;this.psName=null;this.mimetype=null;this.disableFontFace=r.disableFontFace;this.fontExtraProperties=r.fontExtraProperties;this.loadedName=a.loadedName;this.isType3Font=a.isType3Font;this.missingFile=!1;this.cssFontInfo=a.cssFontInfo;this._charsCache=Object.create(null);this._glyphCache=Object.create(null);let i=!!(a.flags&Er);if(!i&&!a.isSimulatedFlags){const t=e.replaceAll(/[,_]/g,"-").split("-",1)[0],a=Qr();for(const e of t.split("+"))if(a[e]){i=!0;break}}this.isSerifFont=i;this.isSymbolicFont=!!(a.flags&Pr);this.isMonospace=!!(a.flags&Nr);let{type:n,subtype:s}=a;this.type=n;this.subtype=s;this.systemFontInfo=a.systemFontInfo;const o=e.match(/^InvalidPDFjsFont_(.*)_\\d+$/);this.isInvalidPDFjsFont=!!o;this.isInvalidPDFjsFont?this.fallbackName=o[1]:this.isMonospace?this.fallbackName="monospace":this.isSerifFont?this.fallbackName="serif":this.fallbackName="sans-serif";if(this.systemFontInfo?.guessFallback){this.systemFontInfo.guessFallback=!1;this.systemFontInfo.css+=`,${this.fallbackName}`}this.differences=a.differences;this.widths=a.widths;this.defaultWidth=a.defaultWidth;this.composite=a.composite;this.cMap=a.cMap;this.capHeight=a.capHeight/yi;this.ascent=a.ascent/yi;this.descent=a.descent/yi;this.lineHeight=this.ascent-this.descent;this.fontMatrix=a.fontMatrix;this.bbox=a.bbox;this.defaultEncoding=a.defaultEncoding;this.toUnicode=a.toUnicode;this.toFontChar=[];if("Type3"===a.type){for(let e=0;e<256;e++)this.toFontChar[e]=this.differences[e]||a.defaultEncoding[e];return}this.cidEncoding=a.cidEncoding||"";this.vertical=!!a.vertical;if(this.vertical){this.vmetrics=a.vmetrics;this.defaultVMetrics=a.defaultVMetrics}if(!t||t.isEmpty){t&&warn(\'Font file is empty in "\'+e+\'" (\'+this.loadedName+")");this.fallbackToSystemFont(a);return}[n,s]=getFontFileType(t,a);n===this.type&&s===this.subtype||info(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${n}/${s}.`);let c;try{switch(n){case"MMType1":info("MMType1 font ("+e+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const r="Type1C"===s||"CIDFontType0C"===s?new CFFFont(t,a):new Type1Font(e,t,a);adjustWidths(a);c=this.convert(e,r,a);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype";c=this.checkAndRepair(e,t,a);adjustWidths(a);this.isOpenType&&(n="OpenType");break;default:throw new FormatError(`Font ${n} is not supported`)}}catch(e){warn(e);this.fallbackToSystemFont(a);return}amendFallbackToUnicode(a);this.data=c;this.type=n;this.subtype=s;this.fontMatrix=a.fontMatrix;this.widths=a.widths;this.defaultWidth=a.defaultWidth;this.toUnicode=a.toUnicode;this.seacMap=a.seacMap}get renderer(){return shadow(this,"renderer",FontRendererFactory.create(this,Rr))}exportData(){const e=this.fontExtraProperties?[...wi,...xi]:wi,t=Object.create(null);for(const a of e){const e=this[a];void 0!==e&&(t[a]=e)}return t}fallbackToSystemFont(e){this.missingFile=!0;const{name:t,type:a}=this;let r=normalizeFontName(t);const i=Jr(),n=Zr(),s=!!i[r],o=!(!n[r]||!i[n[r]]);r=i[r]||n[r]||r;const c=ni()[r];if(c){isNaN(this.ascent)&&(this.ascent=c.ascent/yi);isNaN(this.descent)&&(this.descent=c.descent/yi);isNaN(this.capHeight)&&(this.capHeight=c.capHeight/yi)}this.bold=/bold/gi.test(r);this.italic=/oblique|italic/gi.test(r);this.black=/Black/g.test(t);const l=/Narrow/g.test(t);this.remeasure=(!s||l)&&Object.keys(this.widths).length>0;if((s||o)&&"CIDFontType2"===a&&this.cidEncoding.startsWith("Identity-")){const a=e.cidToGidMap,r=[];applyStandardFontGlyphMap(r,ti());/Arial-?Black/i.test(t)?applyStandardFontGlyphMap(r,ai()):/Calibri/i.test(t)&&applyStandardFontGlyphMap(r,ri());if(a){for(const e in r){const t=r[e];void 0!==a[t]&&(r[+e]=a[t])}a.length!==this.toUnicode.length&&e.hasIncludedToUnicodeMap&&this.toUnicode instanceof IdentityToUnicodeMap&&this.toUnicode.forEach((function(e,t){const i=r[e];void 0===a[i]&&(r[+e]=t)}))}this.toUnicode instanceof IdentityToUnicodeMap||this.toUnicode.forEach((function(e,t){r[+e]=t}));this.toFontChar=r;this.toUnicode=new ToUnicodeMap(r)}else if(/Symbol/i.test(r))this.toFontChar=buildToFontChar(Cr,Fr(),this.differences);else if(/Dingbats/i.test(r))this.toFontChar=buildToFontChar(vr,Ir(),this.differences);else if(s||o){const e=buildToFontChar(this.defaultEncoding,Fr(),this.differences);"CIDFontType2"!==a||this.cidEncoding.startsWith("Identity-")||this.toUnicode instanceof IdentityToUnicodeMap||this.toUnicode.forEach((function(t,a){e[+t]=a}));this.toFontChar=e}else{const e=Fr(),a=[];this.toUnicode.forEach(((t,r)=>{if(!this.composite){const a=getUnicodeForGlyph(this.differences[t]||this.defaultEncoding[t],e);-1!==a&&(r=a)}a[+t]=r}));this.composite&&this.toUnicode instanceof IdentityToUnicodeMap&&/Tahoma|Verdana/i.test(t)&&applyStandardFontGlyphMap(a,ti());this.toFontChar=a}amendFallbackToUnicode(e);this.loadedName=r.split("-",1)[0]}checkAndRepair(e,t,a){const r=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function readTables(e,t){const a=Object.create(null);a["OS/2"]=null;a.cmap=null;a.head=null;a.hhea=null;a.hmtx=null;a.maxp=null;a.name=null;a.post=null;for(let i=0;i<t;i++){const t=readTableEntry(e);r.includes(t.tag)&&(0!==t.length&&(a[t.tag]=t))}return a}function readTableEntry(e){const t=e.getString(4),a=e.getInt32()>>>0,r=e.getInt32()>>>0,i=e.getInt32()>>>0,n=e.pos;e.pos=e.start||0;e.skip(r);const s=e.getBytes(i);e.pos=n;if("head"===t){s[8]=s[9]=s[10]=s[11]=0;s[17]|=32}return{tag:t,checksum:a,length:i,offset:r,data:s}}function readOpenTypeHeader(e){return{version:e.getString(4),numTables:e.getUint16(),searchRange:e.getUint16(),entrySelector:e.getUint16(),rangeShift:e.getUint16()}}function sanitizeGlyph(e,t,a,r,i,n){const s={length:0,sizeOfInstructions:0};if(t<0||t>=e.length||a>e.length||a-t<=12)return s;const o=e.subarray(t,a),c=signedInt16(o[2],o[3]),l=signedInt16(o[4],o[5]),h=signedInt16(o[6],o[7]),u=signedInt16(o[8],o[9]);if(c>h){writeSignedInt16(o,2,h);writeSignedInt16(o,6,c)}if(l>u){writeSignedInt16(o,4,u);writeSignedInt16(o,8,l)}const d=signedInt16(o[0],o[1]);if(d<0){if(d<-1)return s;r.set(o,i);s.length=o.length;return s}let f,g=10,p=0;for(f=0;f<d;f++){p=(o[g]<<8|o[g+1])+1;g+=2}const m=g,b=o[g]<<8|o[g+1];s.sizeOfInstructions=b;g+=2+b;const y=g;let w=0;for(f=0;f<p;f++){const e=o[g++];192&e&&(o[g-1]=63&e);let t=2;2&e?t=1:16&e&&(t=0);let a=2;4&e?a=1:32&e&&(a=0);const r=t+a;w+=r;if(8&e){const e=o[g++];0===e&&(o[g-1]^=8);f+=e;w+=e*r}}if(0===w)return s;let x=g+w;if(x>o.length)return s;if(!n&&b>0){r.set(o.subarray(0,m),i);r.set([0,0],i+m);r.set(o.subarray(y,x),i+m+2);x-=b;o.length-x>3&&(x=x+3&-4);s.length=x;return s}if(o.length-x>3){x=x+3&-4;r.set(o.subarray(0,x),i);s.length=x;return s}r.set(o,i);s.length=o.length;return s}function readNameTable(e){const a=(t.start||0)+e.offset;t.pos=a;const r=[[],[]],i=[],n=e.length,s=a+n;if(0!==t.getUint16()||n<6)return[r,i];const o=t.getUint16(),c=t.getUint16();let l,h;for(l=0;l<o&&t.pos+12<=s;l++){const e={platform:t.getUint16(),encoding:t.getUint16(),language:t.getUint16(),name:t.getUint16(),length:t.getUint16(),offset:t.getUint16()};(isMacNameRecord(e)||isWinNameRecord(e))&&i.push(e)}for(l=0,h=i.length;l<h;l++){const e=i[l];if(e.length<=0)continue;const n=a+c+e.offset;if(n+e.length>s)continue;t.pos=n;const o=e.name;if(e.encoding){let a="";for(let r=0,i=e.length;r<i;r+=2)a+=String.fromCharCode(t.getUint16());r[1][o]=a}else r[0][o]=t.getString(e.length)}return[r,i]}const i=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function sanitizeTTProgram(e,t){let a,r,n,s,o,c=e.data,l=0,h=0,u=0;const d=[],f=[],g=[];let p=t.tooComplexToFollowFunctions,m=!1,b=0,y=0;for(let e=c.length;l<e;){const e=c[l++];if(64===e){r=c[l++];if(m||y)l+=r;else for(a=0;a<r;a++)d.push(c[l++])}else if(65===e){r=c[l++];if(m||y)l+=2*r;else for(a=0;a<r;a++){n=c[l++];d.push(n<<8|c[l++])}}else if(176==(248&e)){r=e-176+1;if(m||y)l+=r;else for(a=0;a<r;a++)d.push(c[l++])}else if(184==(248&e)){r=e-184+1;if(m||y)l+=2*r;else for(a=0;a<r;a++){n=c[l++];d.push(signedInt16(n,c[l++]))}}else if(43!==e||p)if(44!==e||p){if(45===e)if(m){m=!1;h=l}else{o=f.pop();if(!o){warn("TT: ENDF bad stack");t.hintsValid=!1;return}s=g.pop();c=o.data;l=o.i;t.functionsStackDeltas[s]=d.length-o.stackTop}else if(137===e){if(m||y){warn("TT: nested IDEFs not allowed");p=!0}m=!0;u=l}else if(88===e)++b;else if(27===e)y=b;else if(89===e){y===b&&(y=0);--b}else if(28===e&&!m&&!y){const e=d.at(-1);e>0&&(l+=e-1)}}else{if(m||y){warn("TT: nested FDEFs not allowed");p=!0}m=!0;u=l;s=d.pop();t.functionsDefined[s]={data:c,i:l}}else if(!m&&!y){s=d.at(-1);if(isNaN(s))info("TT: CALL empty stack (or invalid entry).");else{t.functionsUsed[s]=!0;if(s in t.functionsStackDeltas){const e=d.length+t.functionsStackDeltas[s];if(e<0){warn("TT: CALL invalid functions stack delta.");t.hintsValid=!1;return}d.length=e}else if(s in t.functionsDefined&&!g.includes(s)){f.push({data:c,i:l,stackTop:d.length-1});g.push(s);o=t.functionsDefined[s];if(!o){warn("TT: CALL non-existent function");t.hintsValid=!1;return}c=o.data;l=o.i}}}if(!m&&!y){let t=0;e<=142?t=i[e]:e>=192&&e<=223?t=-1:e>=224&&(t=-2);if(e>=113&&e<=117){r=d.pop();isNaN(r)||(t=2*-r)}for(;t<0&&d.length>0;){d.pop();t++}for(;t>0;){d.push(NaN);t--}}}t.tooComplexToFollowFunctions=p;const w=[c];l>c.length&&w.push(new Uint8Array(l-c.length));if(u>h){warn("TT: complementing a missing function tail");w.push(new Uint8Array([34,45]))}!function foldTTTable(e,t){if(t.length>1){let a,r,i=0;for(a=0,r=t.length;a<r;a++)i+=t[a].length;i=i+3&-4;const n=new Uint8Array(i);let s=0;for(a=0,r=t.length;a<r;a++){n.set(t[a],s);s+=t[a].length}e.data=n;e.length=i}}(e,w)}let n,s,o,c;if(isTrueTypeCollectionFile(t=new Stream(new Uint8Array(t.getBytes())))){const e=function readTrueTypeCollectionData(e,t){const{numFonts:a,offsetTable:r}=function readTrueTypeCollectionHeader(e){const t=e.getString(4);assert("ttcf"===t,"Must be a TrueType Collection font.");const a=e.getUint16(),r=e.getUint16(),i=e.getInt32()>>>0,n=[];for(let t=0;t<i;t++)n.push(e.getInt32()>>>0);const s={ttcTag:t,majorVersion:a,minorVersion:r,numFonts:i,offsetTable:n};switch(a){case 1:return s;case 2:s.dsigTag=e.getInt32()>>>0;s.dsigLength=e.getInt32()>>>0;s.dsigOffset=e.getInt32()>>>0;return s}throw new FormatError(`Invalid TrueType Collection majorVersion: ${a}.`)}(e),i=t.split("+");let n;for(let s=0;s<a;s++){e.pos=(e.start||0)+r[s];const a=readOpenTypeHeader(e),o=readTables(e,a.numTables);if(!o.name)throw new FormatError(\'TrueType Collection font must contain a "name" table.\');const[c]=readNameTable(o.name);for(let e=0,r=c.length;e<r;e++)for(let r=0,s=c[e].length;r<s;r++){const s=c[e][r]?.replaceAll(/\\s/g,"");if(s){if(s===t)return{header:a,tables:o};if(!(i.length<2))for(const e of i)s===e&&(n={name:e,header:a,tables:o})}}}if(n){warn(`TrueType Collection does not contain "${t}" font, falling back to "${n.name}" font instead.`);return{header:n.header,tables:n.tables}}throw new FormatError(`TrueType Collection does not contain "${t}" font.`)}(t,this.name);n=e.header;s=e.tables}else{n=readOpenTypeHeader(t);s=readTables(t,n.numTables)}const l=!s["CFF "];if(l){if(!s.loca)throw new FormatError(\'Required "loca" table is not found\');if(!s.glyf){warn(\'Required "glyf" table is not found -- trying to recover.\');s.glyf={tag:"glyf",data:new Uint8Array(0)}}this.isOpenType=!1}else{const t=a.composite&&(a.cidToGidMap?.length>0||!(a.cMap instanceof IdentityCMap));if("OTTO"===n.version&&!t||!s.head||!s.hhea||!s.maxp||!s.post){c=new Stream(s["CFF "].data);o=new CFFFont(c,a);return this.convert(e,o,a)}delete s.glyf;delete s.loca;delete s.fpgm;delete s.prep;delete s["cvt "];this.isOpenType=!0}if(!s.maxp)throw new FormatError(\'Required "maxp" table is not found\');t.pos=(t.start||0)+s.maxp.offset;let h=t.getInt32();const u=t.getUint16();if(65536!==h&&20480!==h){if(6===s.maxp.length)h=20480;else{if(!(s.maxp.length>=32))throw new FormatError(\'"maxp" table has a wrong version number\');h=65536}!function writeUint32(e,t,a){e[t+3]=255&a;e[t+2]=a>>>8;e[t+1]=a>>>16;e[t]=a>>>24}(s.maxp.data,0,h)}if(a.scaleFactors?.length===u&&l){const{scaleFactors:e}=a,t=int16(s.head.data[50],s.head.data[51]),r=new GlyfTable({glyfTable:s.glyf.data,isGlyphLocationsLong:t,locaTable:s.loca.data,numGlyphs:u});r.scale(e);const{glyf:i,loca:n,isLocationLong:o}=r.write();s.glyf.data=i;s.loca.data=n;if(o!==!!t){s.head.data[50]=0;s.head.data[51]=o?1:0}const c=s.hmtx.data;for(let t=0;t<u;t++){const a=4*t,r=Math.round(e[t]*int16(c[a],c[a+1]));c[a]=r>>8&255;c[a+1]=255&r;writeSignedInt16(c,a+2,Math.round(e[t]*signedInt16(c[a+2],c[a+3])))}}let d=u+1,f=!0;if(d>65535){f=!1;d=u;warn("Not enough space in glyfs to duplicate first glyph.")}let g=0,p=0;if(h>=65536&&s.maxp.length>=32){t.pos+=8;if(t.getUint16()>2){s.maxp.data[14]=0;s.maxp.data[15]=2}t.pos+=4;g=t.getUint16();t.pos+=4;p=t.getUint16()}s.maxp.data[4]=d>>8;s.maxp.data[5]=255&d;const m=function sanitizeTTPrograms(e,t,a,r){const i={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};e&&sanitizeTTProgram(e,i);t&&sanitizeTTProgram(t,i);e&&function checkInvalidFunctions(e,t){if(!e.tooComplexToFollowFunctions)if(e.functionsDefined.length>t){warn("TT: more functions defined than expected");e.hintsValid=!1}else for(let a=0,r=e.functionsUsed.length;a<r;a++){if(a>t){warn("TT: invalid function id: "+a);e.hintsValid=!1;return}if(e.functionsUsed[a]&&!e.functionsDefined[a]){warn("TT: undefined function: "+a);e.hintsValid=!1;return}}}(i,r);if(a&&1&a.length){const e=new Uint8Array(a.length+1);e.set(a.data);a.data=e}return i.hintsValid}(s.fpgm,s.prep,s["cvt "],g);if(!m){delete s.fpgm;delete s.prep;delete s["cvt "]}!function sanitizeMetrics(e,t,a,r,i,n){if(!t){a&&(a.data=null);return}e.pos=(e.start||0)+t.offset;e.pos+=4;e.pos+=2;e.pos+=2;e.pos+=2;e.pos+=2;e.pos+=2;e.pos+=2;e.pos+=2;e.pos+=2;e.pos+=2;const s=e.getUint16();e.pos+=8;e.pos+=2;let o=e.getUint16();if(0!==s){if(!(2&int16(r.data[44],r.data[45]))){t.data[22]=0;t.data[23]=0}}if(o>i){info(`The numOfMetrics (${o}) should not be greater than the numGlyphs (${i}).`);o=i;t.data[34]=(65280&o)>>8;t.data[35]=255&o}const c=i-o-(a.length-4*o>>1);if(c>0){const e=new Uint8Array(a.length+2*c);e.set(a.data);if(n){e[a.length]=a.data[2];e[a.length+1]=a.data[3]}a.data=e}}(t,s.hhea,s.hmtx,s.head,d,f);if(!s.head)throw new FormatError(\'Required "head" table is not found\');!function sanitizeHead(e,t,a){const r=e.data,i=function int32(e,t,a,r){return(e<<24)+(t<<16)+(a<<8)+r}(r[0],r[1],r[2],r[3]);if(i>>16!=1){info("Attempting to fix invalid version in head table: "+i);r[0]=0;r[1]=1;r[2]=0;r[3]=0}const n=int16(r[50],r[51]);if(n<0||n>1){info("Attempting to fix invalid indexToLocFormat in head table: "+n);const e=t+1;if(a===e<<1){r[50]=0;r[51]=0}else{if(a!==e<<2)throw new FormatError("Could not fix indexToLocFormat: "+n);r[50]=0;r[51]=1}}}(s.head,u,l?s.loca.length:0);let b=Object.create(null);if(l){const e=int16(s.head.data[50],s.head.data[51]),t=function sanitizeGlyphLocations(e,t,a,r,i,n,s){let o,c,l;if(r){o=4;c=function fontItemDecodeLong(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};l=function fontItemEncodeLong(e,t,a){e[t]=a>>>24&255;e[t+1]=a>>16&255;e[t+2]=a>>8&255;e[t+3]=255&a}}else{o=2;c=function fontItemDecode(e,t){return e[t]<<9|e[t+1]<<1};l=function fontItemEncode(e,t,a){e[t]=a>>9&255;e[t+1]=a>>1&255}}const h=n?a+1:a,u=o*(1+h),d=new Uint8Array(u);d.set(e.data.subarray(0,u));e.data=d;const f=t.data,g=f.length,p=new Uint8Array(g);let m,b;const y=[];for(m=0,b=0;m<a+1;m++,b+=o){let e=c(d,b);e>g&&(e=g);y.push({index:m,offset:e,endOffset:0})}y.sort(((e,t)=>e.offset-t.offset));for(m=0;m<a;m++)y[m].endOffset=y[m+1].offset;y.sort(((e,t)=>e.index-t.index));for(m=0;m<a;m++){const{offset:e,endOffset:t}=y[m];if(0!==e||0!==t)break;const a=y[m+1].offset;if(0!==a){y[m].endOffset=a;break}}const w=y.at(-2);0!==w.offset&&0===w.endOffset&&(w.endOffset=g);const x=Object.create(null);let S=0;l(d,0,S);for(m=0,b=o;m<a;m++,b+=o){const e=sanitizeGlyph(f,y[m].offset,y[m].endOffset,p,S,i),t=e.length;0===t&&(x[m]=!0);e.sizeOfInstructions>s&&(s=e.sizeOfInstructions);S+=t;l(d,b,S)}if(0===S){const e=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(m=0,b=o;m<h;m++,b+=o)l(d,b,e.length);t.data=e}else if(n){const a=c(d,o);if(p.length>a+S)t.data=p.subarray(0,a+S);else{t.data=new Uint8Array(a+S);t.data.set(p.subarray(0,S))}t.data.set(p.subarray(0,a),S);l(e.data,d.length-o,S+a)}else t.data=p.subarray(0,S);return{missingGlyphs:x,maxSizeOfInstructions:s}}(s.loca,s.glyf,u,e,m,f,p);b=t.missingGlyphs;if(h>=65536&&s.maxp.length>=32){s.maxp.data[26]=t.maxSizeOfInstructions>>8;s.maxp.data[27]=255&t.maxSizeOfInstructions}}if(!s.hhea)throw new FormatError(\'Required "hhea" table is not found\');if(0===s.hhea.data[10]&&0===s.hhea.data[11]){s.hhea.data[10]=255;s.hhea.data[11]=255}const y={unitsPerEm:int16(s.head.data[18],s.head.data[19]),yMax:signedInt16(s.head.data[42],s.head.data[43]),yMin:signedInt16(s.head.data[38],s.head.data[39]),ascent:signedInt16(s.hhea.data[4],s.hhea.data[5]),descent:signedInt16(s.hhea.data[6],s.hhea.data[7]),lineGap:signedInt16(s.hhea.data[8],s.hhea.data[9])};this.ascent=y.ascent/y.unitsPerEm;this.descent=y.descent/y.unitsPerEm;this.lineGap=y.lineGap/y.unitsPerEm;if(this.cssFontInfo?.lineHeight){this.lineHeight=this.cssFontInfo.metrics.lineHeight;this.lineGap=this.cssFontInfo.metrics.lineGap}else this.lineHeight=this.ascent-this.descent+this.lineGap;s.post&&function readPostScriptTable(e,a,r){const i=(t.start||0)+e.offset;t.pos=i;const n=i+e.length,s=t.getInt32();t.skip(28);let o,c,l=!0;switch(s){case 65536:o=jr;break;case 131072:const e=t.getUint16();if(e!==r){l=!1;break}const i=[];for(c=0;c<e;++c){const e=t.getUint16();if(e>=32768){l=!1;break}i.push(e)}if(!l)break;const h=[],u=[];for(;t.pos<n;){const e=t.getByte();u.length=e;for(c=0;c<e;++c)u[c]=String.fromCharCode(t.getByte());h.push(u.join(""))}o=[];for(c=0;c<e;++c){const e=i[c];e<258?o.push(jr[e]):o.push(h[e-258])}break;case 196608:break;default:warn("Unknown/unsupported post table version "+s);l=!1;a.defaultEncoding&&(o=a.defaultEncoding)}a.glyphNames=o;return l}(s.post,a,u);s.post={tag:"post",data:createPostTable(a)};const w=Object.create(null);function hasGlyph(e){return!b[e]}if(a.composite){const e=a.cidToGidMap||[],t=0===e.length;a.cMap.forEach((function(a,r){"string"==typeof r&&(r=convertCidString(a,r,!0));if(r>65535)throw new FormatError("Max size of CID is 65,535");let i=-1;t?i=r:void 0!==e[r]&&(i=e[r]);i>=0&&i<u&&hasGlyph(i)&&(w[a]=i)}))}else{const e=function readCmapTable(e,t,a,r){if(!e){warn("No cmap table available.");return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1}}let i,n=(t.start||0)+e.offset;t.pos=n;t.skip(2);const s=t.getUint16();let o,c=!1;for(let e=0;e<s;e++){const i=t.getUint16(),n=t.getUint16(),l=t.getInt32()>>>0;let h=!1;if(o?.platformId!==i||o?.encodingId!==n){if(0!==i||0!==n&&1!==n&&3!==n)if(1===i&&0===n)h=!0;else if(3!==i||1!==n||!r&&o){if(a&&3===i&&0===n){h=!0;let a=!0;if(e<s-1){const e=t.peekBytes(2);int16(e[0],e[1])<i&&(a=!1)}a&&(c=!0)}}else{h=!0;a||(c=!0)}else h=!0;h&&(o={platformId:i,encodingId:n,offset:l});if(c)break}}o&&(t.pos=n+o.offset);if(!o||-1===t.peekByte()){warn("Could not find a preferred cmap table.");return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1}}const l=t.getUint16();let h=!1;const u=[];let d,f;if(0===l){t.skip(4);for(d=0;d<256;d++){const e=t.getByte();e&&u.push({charCode:d,glyphId:e})}h=!0}else if(2===l){t.skip(4);const e=[];let a=0;for(let r=0;r<256;r++){const r=t.getUint16()>>3;e.push(r);a=Math.max(r,a)}const r=[];for(let e=0;e<=a;e++)r.push({firstCode:t.getUint16(),entryCount:t.getUint16(),idDelta:signedInt16(t.getByte(),t.getByte()),idRangePos:t.pos+t.getUint16()});for(let a=0;a<256;a++)if(0===e[a]){t.pos=r[0].idRangePos+2*a;f=t.getUint16();u.push({charCode:a,glyphId:f})}else{const i=r[e[a]];for(d=0;d<i.entryCount;d++){const e=(a<<8)+d+i.firstCode;t.pos=i.idRangePos+2*d;f=t.getUint16();0!==f&&(f=(f+i.idDelta)%65536);u.push({charCode:e,glyphId:f})}}}else if(4===l){t.skip(4);const e=t.getUint16()>>1;t.skip(6);const a=[];let r;for(r=0;r<e;r++)a.push({end:t.getUint16()});t.skip(2);for(r=0;r<e;r++)a[r].start=t.getUint16();for(r=0;r<e;r++)a[r].delta=t.getUint16();let s,o=0;for(r=0;r<e;r++){i=a[r];const n=t.getUint16();if(n){s=(n>>1)-(e-r);i.offsetIndex=s;o=Math.max(o,s+i.end-i.start+1)}else i.offsetIndex=-1}const c=[];for(d=0;d<o;d++)c.push(t.getUint16());for(r=0;r<e;r++){i=a[r];n=i.start;const e=i.end,t=i.delta;s=i.offsetIndex;for(d=n;d<=e;d++)if(65535!==d){f=s<0?d:c[s+d-n];f=f+t&65535;u.push({charCode:d,glyphId:f})}}}else if(6===l){t.skip(4);const e=t.getUint16(),a=t.getUint16();for(d=0;d<a;d++){f=t.getUint16();const a=e+d;u.push({charCode:a,glyphId:f})}}else{if(12!==l){warn("cmap table has unsupported format: "+l);return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1}}{t.skip(10);const e=t.getInt32()>>>0;for(d=0;d<e;d++){const e=t.getInt32()>>>0,a=t.getInt32()>>>0;let r=t.getInt32()>>>0;for(let t=e;t<=a;t++)u.push({charCode:t,glyphId:r++})}}}u.sort(((e,t)=>e.charCode-t.charCode));const g=[],p=new Set;for(const e of u){const{charCode:t}=e;if(!p.has(t)){p.add(t);g.push(e)}}return{platformId:o.platformId,encodingId:o.encodingId,mappings:g,hasShortCmap:h}}(s.cmap,t,this.isSymbolicFont,a.hasEncoding),r=e.platformId,i=e.encodingId,n=e.mappings;let o=[],c=!1;!a.hasEncoding||"MacRomanEncoding"!==a.baseEncodingName&&"WinAnsiEncoding"!==a.baseEncodingName||(o=getEncoding(a.baseEncodingName));if(a.hasEncoding&&!this.isSymbolicFont&&(3===r&&1===i||1===r&&0===i)){const e=Fr();for(let t=0;t<256;t++){let s;s=void 0!==this.differences[t]?this.differences[t]:o.length&&""!==o[t]?o[t]:Ar[t];if(!s)continue;const c=recoverGlyphName(s,e);let l;3===r&&1===i?l=e[c]:1===r&&0===i&&(l=Sr.indexOf(c));if(void 0===l){if(!a.glyphNames&&a.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof IdentityToUnicodeMap)){const e=this.toUnicode.get(t);e&&(l=e.codePointAt(0))}if(void 0===l)continue}for(const e of n)if(e.charCode===l){w[t]=e.glyphId;break}}}else if(0===r){for(const e of n)w[e.charCode]=e.glyphId;c=!0}else if(3===r&&0===i)for(const e of n){let t=e.charCode;t>=61440&&t<=61695&&(t&=255);w[t]=e.glyphId}else for(const e of n)w[e.charCode]=e.glyphId;if(a.glyphNames&&(o.length||this.differences.length))for(let e=0;e<256;++e){if(!c&&void 0!==w[e])continue;const t=this.differences[e]||o[e];if(!t)continue;const r=a.glyphNames.indexOf(t);r>0&&hasGlyph(r)&&(w[e]=r)}}0===w.length&&(w[0]=0);let x=d-1;f||(x=0);if(!a.cssFontInfo){const e=adjustMapping(w,hasGlyph,x,this.toUnicode);this.toFontChar=e.toFontChar;s.cmap={tag:"cmap",data:createCmapTable(e.charCodeToGlyphId,e.toUnicodeExtraMap,d)};s["OS/2"]&&function validateOS2Table(e,t){t.pos=(t.start||0)+e.offset;const a=t.getUint16();t.skip(60);const r=t.getUint16();if(a<4&&768&r)return!1;if(t.getUint16()>t.getUint16())return!1;t.skip(6);if(0===t.getUint16())return!1;e.data[8]=e.data[9]=0;return!0}(s["OS/2"],t)||(s["OS/2"]={tag:"OS/2",data:createOS2Table(a,e.charCodeToGlyphId,y)})}if(!l)try{c=new Stream(s["CFF "].data);o=new CFFParser(c,a,Rr).parse();o.duplicateFirstGlyph();const e=new CFFCompiler(o);s["CFF "].data=e.compile()}catch{warn("Failed to compile font "+a.loadedName)}if(s.name){const[t,r]=readNameTable(s.name);s.name.data=createNameTable(e,t);this.psName=t[0][6]||null;a.composite||function adjustTrueTypeToUnicode(e,t,a){if(e.isInternalFont)return;if(e.hasIncludedToUnicodeMap)return;if(e.hasEncoding)return;if(e.toUnicode instanceof IdentityToUnicodeMap)return;if(!t)return;if(0===a.length)return;if(e.defaultEncoding===kr)return;for(const e of a)if(!isWinNameRecord(e))return;const r=kr,i=[],n=Fr();for(const e in r){const t=r[e];if(""===t)continue;const a=n[t];void 0!==a&&(i[e]=String.fromCharCode(a))}i.length>0&&e.toUnicode.amend(i)}(a,this.isSymbolicFont,r)}else s.name={tag:"name",data:createNameTable(this.name)};const S=new OpenTypeFileBuilder(n.version);for(const e in s)S.addTable(e,s[e].data);return S.toArray()}convert(e,a,r){r.fixedPitch=!1;r.builtInEncoding&&function adjustType1ToUnicode(e,t){if(e.isInternalFont)return;if(e.hasIncludedToUnicodeMap)return;if(t===e.defaultEncoding)return;if(e.toUnicode instanceof IdentityToUnicodeMap)return;const a=[],r=Fr();for(const i in t){if(e.hasEncoding&&(e.baseEncodingName||void 0!==e.differences[i]))continue;const n=getUnicodeForGlyph(t[i],r);-1!==n&&(a[i]=String.fromCharCode(n))}a.length>0&&e.toUnicode.amend(a)}(r,r.builtInEncoding);let i=1;a instanceof CFFFont&&(i=a.numGlyphs-1);const n=a.getGlyphMapping(r);let s=null,o=n,c=null;if(!r.cssFontInfo){s=adjustMapping(n,a.hasGlyphId.bind(a),i,this.toUnicode);this.toFontChar=s.toFontChar;o=s.charCodeToGlyphId;c=s.toUnicodeExtraMap}const l=a.numGlyphs;function getCharCodes(e,t){let a=null;for(const r in e)t===e[r]&&(a||=[]).push(0|r);return a}function createCharCode(e,t){for(const a in e)if(t===e[a])return 0|a;s.charCodeToGlyphId[s.nextAvailableFontCharCode]=t;return s.nextAvailableFontCharCode++}const h=a.seacs;if(s&&h?.length){const e=r.fontMatrix||t,i=a.getCharset(),o=Object.create(null);for(let t in h){t|=0;const a=h[t],r=Ar[a[2]],c=Ar[a[3]],l=i.indexOf(r),u=i.indexOf(c);if(l<0||u<0)continue;const d={x:a[0]*e[0]+a[1]*e[2]+e[4],y:a[0]*e[1]+a[1]*e[3]+e[5]},f=getCharCodes(n,t);if(f)for(const e of f){const t=s.charCodeToGlyphId,a=createCharCode(t,l),r=createCharCode(t,u);o[e]={baseFontCharCode:a,accentFontCharCode:r,accentOffset:d}}}r.seacMap=o}const u=r.fontMatrix?1/Math.max(...r.fontMatrix.slice(0,4).map(Math.abs)):1e3,d=new OpenTypeFileBuilder("OTTO");d.addTable("CFF ",a.data);d.addTable("OS/2",createOS2Table(r,o));d.addTable("cmap",createCmapTable(o,c,l));d.addTable("head","\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0_<Ãµ\\0\\0"+safeString16(u)+"\\0\\0\\0\\0Â\\v~\'\\0\\0\\0\\0Â\\v~\'\\0\\0"+safeString16(r.descent)+"Ã¿"+safeString16(r.ascent)+string16(r.italicAngle?2:0)+"\\0\\0\\0\\0\\0\\0\\0");d.addTable("hhea","\\0\\0\\0"+safeString16(r.ascent)+safeString16(r.descent)+"\\0\\0Ã¿Ã¿\\0\\0\\0\\0\\0\\0"+safeString16(r.capHeight)+safeString16(Math.tan(r.italicAngle)*r.xHeight)+"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0"+string16(l));d.addTable("hmtx",function fontFieldsHmtx(){const e=a.charstrings,t=a.cff?a.cff.widths:null;let r="\\0\\0\\0\\0";for(let a=1,i=l;a<i;a++){let i=0;if(e){const t=e[a-1];i="width"in t?t.width:0}else t&&(i=Math.ceil(t[a]||0));r+=string16(i)+string16(0)}return r}());d.addTable("maxp","\\0\\0P\\0"+string16(l));d.addTable("name",createNameTable(e));d.addTable("post",createPostTable(r));return d.toArray()}get _spaceWidth(){const e=["space","minus","one","i","I"];let t;for(const a of e){if(a in this.widths){t=this.widths[a];break}const e=Fr()[a];let r=0;if(this.composite&&this.cMap.contains(e)){r=this.cMap.lookup(e);"string"==typeof r&&(r=convertCidString(e,r))}!r&&this.toUnicode&&(r=this.toUnicode.charCodeOf(e));r<=0&&(r=e);t=this.widths[r];if(t)break}return shadow(this,"_spaceWidth",t||this.defaultWidth)}_charToGlyph(e,t=!1){let a,r,i,n=this._glyphCache[e];if(n?.isSpace===t)return n;let s=e;if(this.cMap?.contains(e)){s=this.cMap.lookup(e);"string"==typeof s&&(s=convertCidString(e,s))}r=this.widths[s];"number"!=typeof r&&(r=this.defaultWidth);const o=this.vmetrics?.[s];let c=this.toUnicode.get(e)||e;"number"==typeof c&&(c=String.fromCharCode(c));let l=void 0!==this.toFontChar[e];a=this.toFontChar[e]||e;if(this.missingFile){const t=this.differences[e]||this.defaultEncoding[e];if((".notdef"===t||""===t)&&"Type1"===this.type){a=32;if(""===t){r||=this._spaceWidth;c=String.fromCharCode(a)}}a=function mapSpecialUnicodeValues(e){return e>=65520&&e<=65535?0:e>=62976&&e<=63743?Tr()[e]||e:173===e?45:e}(a)}this.isType3Font&&(i=a);let h=null;if(this.seacMap?.[e]){l=!0;const t=this.seacMap[e];a=t.baseFontCharCode;h={fontChar:String.fromCodePoint(t.accentFontCharCode),offset:t.accentOffset}}let u="";"number"==typeof a&&(a<=1114111?u=String.fromCodePoint(a):warn(`charToGlyph - invalid fontCharCode: ${a}`));if(this.missingFile&&this.vertical&&1===u.length){const e=_r()[u.charCodeAt(0)];e&&(u=c=String.fromCharCode(e))}n=new fonts_Glyph(e,u,c,h,r,o,i,t,l);return this._glyphCache[e]=n}charsToGlyphs(e){let t=this._charsCache[e];if(t)return t;t=[];if(this.cMap){const a=Object.create(null),r=e.length;let i=0;for(;i<r;){this.cMap.readCharCode(e,i,a);const{charcode:r,length:n}=a;i+=n;const s=this._charToGlyph(r,1===n&&32===e.charCodeAt(i-1));t.push(s)}}else for(let a=0,r=e.length;a<r;++a){const r=e.charCodeAt(a),i=this._charToGlyph(r,32===r);t.push(i)}return this._charsCache[e]=t}getCharPositions(e){const t=[];if(this.cMap){const a=Object.create(null);let r=0;for(;r<e.length;){this.cMap.readCharCode(e,r,a);const i=a.length;t.push([r,r+i]);r+=i}}else for(let a=0,r=e.length;a<r;++a)t.push([a,a+1]);return t}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString(e){const t=[],a=[],hasCurrentBufErrors=()=>t.length%2==1,r=this.toUnicode instanceof IdentityToUnicodeMap?e=>this.toUnicode.charCodeOf(e):e=>this.toUnicode.charCodeOf(String.fromCodePoint(e));for(let i=0,n=e.length;i<n;i++){const n=e.codePointAt(i);n>55295&&(n<57344||n>65533)&&i++;if(this.toUnicode){const e=r(n);if(-1!==e){if(hasCurrentBufErrors()){t.push(a.join(""));a.length=0}for(let t=(this.cMap?this.cMap.getCharCodeLength(e):1)-1;t>=0;t--)a.push(String.fromCharCode(e>>8*t&255));continue}}if(!hasCurrentBufErrors()){t.push(a.join(""));a.length=0}a.push(String.fromCodePoint(n))}t.push(a.join(""));return t}}class ErrorFont{constructor(e){this.error=e;this.loadedName="g_font_error";this.missingFile=!0}charsToGlyphs(){return[]}encodeString(e){return[e]}exportData(){return{error:this.error}}}const Si=2,Ai=3,ki=4,Ci=5,vi=6,Fi=7;class Pattern{constructor(){unreachable("Cannot initialize Pattern.")}static parseShading(e,t,a,r,i,n){const s=e instanceof BaseStream?e.dict:e,o=s.get("ShadingType");try{switch(o){case Si:case Ai:return new RadialAxialShading(s,t,a,r,i,n);case ki:case Ci:case vi:case Fi:return new MeshShading(e,t,a,r,i,n);default:throw new FormatError("Unsupported ShadingType: "+o)}}catch(e){if(e instanceof MissingDataException)throw e;warn(e);return new DummyShading}}}class BaseShading{static SMALL_NUMBER=1e-6;getIR(){unreachable("Abstract method `getIR` called.")}}class RadialAxialShading extends BaseShading{constructor(e,t,a,r,i,n){super();this.shadingType=e.get("ShadingType");let s=0;this.shadingType===Si?s=4:this.shadingType===Ai&&(s=6);this.coordsArr=e.getArray("Coords");if(!isNumberArray(this.coordsArr,s))throw new FormatError("RadialAxialShading: Invalid /Coords array.");const o=ColorSpaceUtils.parse({cs:e.getRaw("CS")||e.getRaw("ColorSpace"),xref:t,resources:a,pdfFunctionFactory:r,globalColorSpaceCache:i,localColorSpaceCache:n});this.bbox=lookupNormalRect(e.getArray("BBox"),null);let c=0,l=1;const h=e.getArray("Domain");isNumberArray(h,2)&&([c,l]=h);let u=!1,d=!1;const f=e.getArray("Extend");(function isBooleanArray(e,t){return Array.isArray(e)&&(null===t||e.length===t)&&e.every((e=>"boolean"==typeof e))})(f,2)&&([u,d]=f);if(!(this.shadingType!==Ai||u&&d)){const[e,t,a,r,i,n]=this.coordsArr,s=Math.hypot(e-r,t-i);a<=n+s&&n<=a+s&&warn("Unsupported radial gradient.")}this.extendStart=u;this.extendEnd=d;const g=e.getRaw("Function"),p=r.create(g,!0),m=(l-c)/840,b=this.colorStops=[];if(c>=l||m<=0){info("Bad shading domain.");return}const y=new Float32Array(o.numComps),w=new Float32Array(1);let x=0;w[0]=c;p(w,0,y,0);const S=new Uint8ClampedArray(3);o.getRgb(y,0,S);let[k,C,v]=S;b.push([0,Util.makeHexColor(k,C,v)]);let F=1;w[0]=c+m;p(w,0,y,0);o.getRgb(y,0,S);let[T,O,M]=S,D=T-k+1,R=O-C+1,N=M-v+1,E=T-k-1,L=O-C-1,j=M-v-1;for(let e=2;e<840;e++){w[0]=c+e*m;p(w,0,y,0);o.getRgb(y,0,S);const[t,a,r]=S,i=e-x;D=Math.min(D,(t-k+1)/i);R=Math.min(R,(a-C+1)/i);N=Math.min(N,(r-v+1)/i);E=Math.max(E,(t-k-1)/i);L=Math.max(L,(a-C-1)/i);j=Math.max(j,(r-v-1)/i);if(!(E<=D&&L<=R&&j<=N)){const e=Util.makeHexColor(T,O,M);b.push([F/840,e]);D=t-T+1;R=a-O+1;N=r-M+1;E=t-T-1;L=a-O-1;j=r-M-1;x=F;k=T;C=O;v=M}F=e;T=t;O=a;M=r}b.push([1,Util.makeHexColor(T,O,M)]);let _="transparent";e.has("Background")&&(_=o.getRgbHex(e.get("Background"),0));if(!u){b.unshift([0,_]);b[1][0]+=BaseShading.SMALL_NUMBER}if(!d){b.at(-1)[0]-=BaseShading.SMALL_NUMBER;b.push([1,_])}this.colorStops=b}getIR(){const{coordsArr:e,shadingType:t}=this;let a,r,i,n,s;if(t===Si){r=[e[0],e[1]];i=[e[2],e[3]];n=null;s=null;a="axial"}else if(t===Ai){r=[e[0],e[1]];i=[e[3],e[4]];n=e[2];s=e[5];a="radial"}else unreachable(`getPattern type unknown: ${t}`);return["RadialAxial",a,this.bbox,this.colorStops,r,i,n,s]}}class MeshStreamReader{constructor(e,t){this.stream=e;this.context=t;this.buffer=0;this.bufferLength=0;const a=t.numComps;this.tmpCompsBuf=new Float32Array(a);const r=t.colorSpace.numComps;this.tmpCsCompsBuf=t.colorFn?new Float32Array(r):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const e=this.stream.getByte();if(e<0)return!1;this.buffer=e;this.bufferLength=8;return!0}readBits(e){const{stream:t}=this;let{buffer:a,bufferLength:r}=this;if(32===e){if(0===r)return t.getInt32()>>>0;a=a<<24|t.getByte()<<16|t.getByte()<<8|t.getByte();const e=t.getByte();this.buffer=e&(1<<r)-1;return(a<<8-r|(255&e)>>r)>>>0}if(8===e&&0===r)return t.getByte();for(;r<e;){a=a<<8|t.getByte();r+=8}r-=e;this.bufferLength=r;this.buffer=a&(1<<r)-1;return a>>r}align(){this.buffer=0;this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const{bitsPerCoordinate:e,decode:t}=this.context,a=this.readBits(e),r=this.readBits(e),i=e<32?1/((1<<e)-1):2.3283064365386963e-10;return[a*i*(t[1]-t[0])+t[0],r*i*(t[3]-t[2])+t[2]]}readComponents(){const{bitsPerComponent:e,colorFn:t,colorSpace:a,decode:r,numComps:i}=this.context,n=e<32?1/((1<<e)-1):2.3283064365386963e-10,s=this.tmpCompsBuf;for(let t=0,a=4;t<i;t++,a+=2){const i=this.readBits(e);s[t]=i*n*(r[a+1]-r[a])+r[a]}const o=this.tmpCsCompsBuf;t?.(s,0,o,0);return a.getRgb(o,0)}}let Ii=Object.create(null);function getB(e){return Ii[e]||=function buildB(e){const t=[];for(let a=0;a<=e;a++){const r=a/e,i=1-r;t.push(new Float32Array([i**3,3*r*i**2,3*r**2*i,r**3]))}return t}(e)}class MeshShading extends BaseShading{static MIN_SPLIT_PATCH_CHUNKS_AMOUNT=3;static MAX_SPLIT_PATCH_CHUNKS_AMOUNT=20;static TRIANGLE_DENSITY=20;constructor(e,t,a,r,i,n){super();if(!(e instanceof BaseStream))throw new FormatError("Mesh data is not a stream");const s=e.dict;this.shadingType=s.get("ShadingType");this.bbox=lookupNormalRect(s.getArray("BBox"),null);const o=ColorSpaceUtils.parse({cs:s.getRaw("CS")||s.getRaw("ColorSpace"),xref:t,resources:a,pdfFunctionFactory:r,globalColorSpaceCache:i,localColorSpaceCache:n});this.background=s.has("Background")?o.getRgb(s.get("Background"),0):null;const c=s.getRaw("Function"),l=c?r.create(c,!0):null;this.coords=[];this.colors=[];this.figures=[];const h={bitsPerCoordinate:s.get("BitsPerCoordinate"),bitsPerComponent:s.get("BitsPerComponent"),bitsPerFlag:s.get("BitsPerFlag"),decode:s.getArray("Decode"),colorFn:l,colorSpace:o,numComps:l?1:o.numComps},u=new MeshStreamReader(e,h);let d=!1;switch(this.shadingType){case ki:this._decodeType4Shading(u);break;case Ci:const e=0|s.get("VerticesPerRow");if(e<2)throw new FormatError("Invalid VerticesPerRow");this._decodeType5Shading(u,e);break;case vi:this._decodeType6Shading(u);d=!0;break;case Fi:this._decodeType7Shading(u);d=!0;break;default:unreachable("Unsupported mesh type.")}if(d){this._updateBounds();for(let e=0,t=this.figures.length;e<t;e++)this._buildFigureFromPatch(e)}this._updateBounds();this._packData()}_decodeType4Shading(e){const t=this.coords,a=this.colors,r=[],i=[];let n=0;for(;e.hasData;){const s=e.readFlag(),o=e.readCoordinate(),c=e.readComponents();if(0===n){if(!(0<=s&&s<=2))throw new FormatError("Unknown type4 flag");switch(s){case 0:n=3;break;case 1:i.push(i.at(-2),i.at(-1));n=1;break;case 2:i.push(i.at(-3),i.at(-1));n=1}r.push(s)}i.push(t.length);t.push(o);a.push(c);n--;e.align()}this.figures.push({type:"triangles",coords:new Int32Array(i),colors:new Int32Array(i)})}_decodeType5Shading(e,t){const a=this.coords,r=this.colors,i=[];for(;e.hasData;){const t=e.readCoordinate(),n=e.readComponents();i.push(a.length);a.push(t);r.push(n)}this.figures.push({type:"lattice",coords:new Int32Array(i),colors:new Int32Array(i),verticesPerRow:t})}_decodeType6Shading(e){const t=this.coords,a=this.colors,r=new Int32Array(16),i=new Int32Array(4);for(;e.hasData;){const n=e.readFlag();if(!(0<=n&&n<=3))throw new FormatError("Unknown type6 flag");const s=t.length;for(let a=0,r=0!==n?8:12;a<r;a++)t.push(e.readCoordinate());const o=a.length;for(let t=0,r=0!==n?2:4;t<r;t++)a.push(e.readComponents());let c,l,h,u;switch(n){case 0:r[12]=s+3;r[13]=s+4;r[14]=s+5;r[15]=s+6;r[8]=s+2;r[11]=s+7;r[4]=s+1;r[7]=s+8;r[0]=s;r[1]=s+11;r[2]=s+10;r[3]=s+9;i[2]=o+1;i[3]=o+2;i[0]=o;i[1]=o+3;break;case 1:c=r[12];l=r[13];h=r[14];u=r[15];r[12]=u;r[13]=s+0;r[14]=s+1;r[15]=s+2;r[8]=h;r[11]=s+3;r[4]=l;r[7]=s+4;r[0]=c;r[1]=s+7;r[2]=s+6;r[3]=s+5;c=i[2];l=i[3];i[2]=l;i[3]=o;i[0]=c;i[1]=o+1;break;case 2:c=r[15];l=r[11];r[12]=r[3];r[13]=s+0;r[14]=s+1;r[15]=s+2;r[8]=r[7];r[11]=s+3;r[4]=l;r[7]=s+4;r[0]=c;r[1]=s+7;r[2]=s+6;r[3]=s+5;c=i[3];i[2]=i[1];i[3]=o;i[0]=c;i[1]=o+1;break;case 3:r[12]=r[0];r[13]=s+0;r[14]=s+1;r[15]=s+2;r[8]=r[1];r[11]=s+3;r[4]=r[2];r[7]=s+4;r[0]=r[3];r[1]=s+7;r[2]=s+6;r[3]=s+5;i[2]=i[0];i[3]=o;i[0]=i[1];i[1]=o+1}r[5]=t.length;t.push([(-4*t[r[0]][0]-t[r[15]][0]+6*(t[r[4]][0]+t[r[1]][0])-2*(t[r[12]][0]+t[r[3]][0])+3*(t[r[13]][0]+t[r[7]][0]))/9,(-4*t[r[0]][1]-t[r[15]][1]+6*(t[r[4]][1]+t[r[1]][1])-2*(t[r[12]][1]+t[r[3]][1])+3*(t[r[13]][1]+t[r[7]][1]))/9]);r[6]=t.length;t.push([(-4*t[r[3]][0]-t[r[12]][0]+6*(t[r[2]][0]+t[r[7]][0])-2*(t[r[0]][0]+t[r[15]][0])+3*(t[r[4]][0]+t[r[14]][0]))/9,(-4*t[r[3]][1]-t[r[12]][1]+6*(t[r[2]][1]+t[r[7]][1])-2*(t[r[0]][1]+t[r[15]][1])+3*(t[r[4]][1]+t[r[14]][1]))/9]);r[9]=t.length;t.push([(-4*t[r[12]][0]-t[r[3]][0]+6*(t[r[8]][0]+t[r[13]][0])-2*(t[r[0]][0]+t[r[15]][0])+3*(t[r[11]][0]+t[r[1]][0]))/9,(-4*t[r[12]][1]-t[r[3]][1]+6*(t[r[8]][1]+t[r[13]][1])-2*(t[r[0]][1]+t[r[15]][1])+3*(t[r[11]][1]+t[r[1]][1]))/9]);r[10]=t.length;t.push([(-4*t[r[15]][0]-t[r[0]][0]+6*(t[r[11]][0]+t[r[14]][0])-2*(t[r[12]][0]+t[r[3]][0])+3*(t[r[2]][0]+t[r[8]][0]))/9,(-4*t[r[15]][1]-t[r[0]][1]+6*(t[r[11]][1]+t[r[14]][1])-2*(t[r[12]][1]+t[r[3]][1])+3*(t[r[2]][1]+t[r[8]][1]))/9]);this.figures.push({type:"patch",coords:new Int32Array(r),colors:new Int32Array(i)})}}_decodeType7Shading(e){const t=this.coords,a=this.colors,r=new Int32Array(16),i=new Int32Array(4);for(;e.hasData;){const n=e.readFlag();if(!(0<=n&&n<=3))throw new FormatError("Unknown type7 flag");const s=t.length;for(let a=0,r=0!==n?12:16;a<r;a++)t.push(e.readCoordinate());const o=a.length;for(let t=0,r=0!==n?2:4;t<r;t++)a.push(e.readComponents());let c,l,h,u;switch(n){case 0:r[12]=s+3;r[13]=s+4;r[14]=s+5;r[15]=s+6;r[8]=s+2;r[9]=s+13;r[10]=s+14;r[11]=s+7;r[4]=s+1;r[5]=s+12;r[6]=s+15;r[7]=s+8;r[0]=s;r[1]=s+11;r[2]=s+10;r[3]=s+9;i[2]=o+1;i[3]=o+2;i[0]=o;i[1]=o+3;break;case 1:c=r[12];l=r[13];h=r[14];u=r[15];r[12]=u;r[13]=s+0;r[14]=s+1;r[15]=s+2;r[8]=h;r[9]=s+9;r[10]=s+10;r[11]=s+3;r[4]=l;r[5]=s+8;r[6]=s+11;r[7]=s+4;r[0]=c;r[1]=s+7;r[2]=s+6;r[3]=s+5;c=i[2];l=i[3];i[2]=l;i[3]=o;i[0]=c;i[1]=o+1;break;case 2:c=r[15];l=r[11];r[12]=r[3];r[13]=s+0;r[14]=s+1;r[15]=s+2;r[8]=r[7];r[9]=s+9;r[10]=s+10;r[11]=s+3;r[4]=l;r[5]=s+8;r[6]=s+11;r[7]=s+4;r[0]=c;r[1]=s+7;r[2]=s+6;r[3]=s+5;c=i[3];i[2]=i[1];i[3]=o;i[0]=c;i[1]=o+1;break;case 3:r[12]=r[0];r[13]=s+0;r[14]=s+1;r[15]=s+2;r[8]=r[1];r[9]=s+9;r[10]=s+10;r[11]=s+3;r[4]=r[2];r[5]=s+8;r[6]=s+11;r[7]=s+4;r[0]=r[3];r[1]=s+7;r[2]=s+6;r[3]=s+5;i[2]=i[0];i[3]=o;i[0]=i[1];i[1]=o+1}this.figures.push({type:"patch",coords:new Int32Array(r),colors:new Int32Array(i)})}}_buildFigureFromPatch(e){const t=this.figures[e];assert("patch"===t.type,"Unexpected patch mesh figure");const a=this.coords,r=this.colors,i=t.coords,n=t.colors,s=Math.min(a[i[0]][0],a[i[3]][0],a[i[12]][0],a[i[15]][0]),o=Math.min(a[i[0]][1],a[i[3]][1],a[i[12]][1],a[i[15]][1]),c=Math.max(a[i[0]][0],a[i[3]][0],a[i[12]][0],a[i[15]][0]),l=Math.max(a[i[0]][1],a[i[3]][1],a[i[12]][1],a[i[15]][1]);let h=Math.ceil((c-s)*MeshShading.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));h=MathClamp(h,MeshShading.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,MeshShading.MAX_SPLIT_PATCH_CHUNKS_AMOUNT);let u=Math.ceil((l-o)*MeshShading.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));u=MathClamp(u,MeshShading.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,MeshShading.MAX_SPLIT_PATCH_CHUNKS_AMOUNT);const d=h+1,f=new Int32Array((u+1)*d),g=new Int32Array((u+1)*d);let p=0;const m=new Uint8Array(3),b=new Uint8Array(3),y=r[n[0]],w=r[n[1]],x=r[n[2]],S=r[n[3]],k=getB(u),C=getB(h);for(let e=0;e<=u;e++){m[0]=(y[0]*(u-e)+x[0]*e)/u|0;m[1]=(y[1]*(u-e)+x[1]*e)/u|0;m[2]=(y[2]*(u-e)+x[2]*e)/u|0;b[0]=(w[0]*(u-e)+S[0]*e)/u|0;b[1]=(w[1]*(u-e)+S[1]*e)/u|0;b[2]=(w[2]*(u-e)+S[2]*e)/u|0;for(let t=0;t<=h;t++,p++){if(!(0!==e&&e!==u||0!==t&&t!==h))continue;let n=0,s=0,o=0;for(let r=0;r<=3;r++)for(let c=0;c<=3;c++,o++){const l=k[e][r]*C[t][c];n+=a[i[o]][0]*l;s+=a[i[o]][1]*l}f[p]=a.length;a.push([n,s]);g[p]=r.length;const c=new Uint8Array(3);c[0]=(m[0]*(h-t)+b[0]*t)/h|0;c[1]=(m[1]*(h-t)+b[1]*t)/h|0;c[2]=(m[2]*(h-t)+b[2]*t)/h|0;r.push(c)}}f[0]=i[0];g[0]=n[0];f[h]=i[3];g[h]=n[1];f[d*u]=i[12];g[d*u]=n[2];f[d*u+h]=i[15];g[d*u+h]=n[3];this.figures[e]={type:"lattice",coords:f,colors:g,verticesPerRow:d}}_updateBounds(){let e=this.coords[0][0],t=this.coords[0][1],a=e,r=t;for(let i=1,n=this.coords.length;i<n;i++){const n=this.coords[i][0],s=this.coords[i][1];e=e>n?n:e;t=t>s?s:t;a=a<n?n:a;r=r<s?s:r}this.bounds=[e,t,a,r]}_packData(){let e,t,a,r;const i=this.coords,n=new Float32Array(2*i.length);for(e=0,a=0,t=i.length;e<t;e++){const t=i[e];n[a++]=t[0];n[a++]=t[1]}this.coords=n;const s=this.colors,o=new Uint8Array(3*s.length);for(e=0,a=0,t=s.length;e<t;e++){const t=s[e];o[a++]=t[0];o[a++]=t[1];o[a++]=t[2]}this.colors=o;const c=this.figures;for(e=0,t=c.length;e<t;e++){const t=c[e],i=t.coords,n=t.colors;for(a=0,r=i.length;a<r;a++){i[a]*=2;n[a]*=3}}}getIR(){const{bounds:e}=this;if(e[2]-e[0]==0||e[3]-e[1]==0)throw new FormatError(`Invalid MeshShading bounds: [${e}].`);return["Mesh",this.shadingType,this.coords,this.colors,this.figures,e,this.bbox,this.background]}}class DummyShading extends BaseShading{getIR(){return["Dummy"]}}function getTilingPatternIR(e,t,a){const r=lookupMatrix(t.getArray("Matrix"),Fa),i=lookupNormalRect(t.getArray("BBox"),null);if(!i||i[2]-i[0]==0||i[3]-i[1]==0)throw new FormatError("Invalid getTilingPatternIR /BBox array.");const n=t.get("XStep");if("number"!=typeof n)throw new FormatError("Invalid getTilingPatternIR /XStep value.");const s=t.get("YStep");if("number"!=typeof s)throw new FormatError("Invalid getTilingPatternIR /YStep value.");const o=t.get("PaintType");if(!Number.isInteger(o))throw new FormatError("Invalid getTilingPatternIR /PaintType value.");const c=t.get("TilingType");if(!Number.isInteger(c))throw new FormatError("Invalid getTilingPatternIR /TilingType value.");return["TilingPattern",a,e,r,i,n,s,o,c]}const Ti=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Oi={lineHeight:1.2207,lineGap:.2207},Mi=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Di={lineHeight:1.2207,lineGap:.2207},Bi=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Ri={lineHeight:1.2207,lineGap:.2207},Ni=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1],Ei={lineHeight:1.2207,lineGap:.2207},Pi=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],ji={lineHeight:1.2,lineGap:.2},_i=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],Xi={lineHeight:1.35,lineGap:.2},qi=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],Hi={lineHeight:1.35,lineGap:.2},Wi=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],zi={lineHeight:1.2,lineGap:.2},$i=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],Gi=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],Vi=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],Ki=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],Ji=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],Yi=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],Zi=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],Qi=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],en=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],tn={lineHeight:1.2,lineGap:.2},an=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],rn={lineHeight:1.2,lineGap:.2},nn=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],sn={lineHeight:1.2,lineGap:.2},on=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],cn={lineHeight:1.2,lineGap:.2},ln=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],hn={lineHeight:1.33008,lineGap:0},un=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],dn={lineHeight:1.33008,lineGap:0},fn=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],gn={lineHeight:1.33008,lineGap:0},pn=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1],mn={lineHeight:1.33008,lineGap:0},bn=getLookupTableFactory((function(e){e["MyriadPro-Regular"]=e["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:on,baseWidths:Zi,baseMapping:Qi,metrics:cn};e["MyriadPro-Bold"]=e["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:en,baseWidths:$i,baseMapping:Gi,metrics:tn};e["MyriadPro-It"]=e["MyriadPro-Italic"]=e["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:nn,baseWidths:Ji,baseMapping:Yi,metrics:sn};e["MyriadPro-BoldIt"]=e["MyriadPro-BoldItalic"]=e["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:an,baseWidths:Vi,baseMapping:Ki,metrics:rn};e.ArialMT=e.Arial=e["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:Zi,baseMapping:Qi};e["Arial-BoldMT"]=e["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:$i,baseMapping:Gi};e["Arial-ItalicMT"]=e["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:Ji,baseMapping:Yi};e["Arial-BoldItalicMT"]=e["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:Vi,baseMapping:Ki};e["Calibri-Regular"]={name:"LiberationSans-Regular",factors:Ni,baseWidths:Zi,baseMapping:Qi,metrics:Ei};e["Calibri-Bold"]={name:"LiberationSans-Bold",factors:Ti,baseWidths:$i,baseMapping:Gi,metrics:Oi};e["Calibri-Italic"]={name:"LiberationSans-Italic",factors:Bi,baseWidths:Ji,baseMapping:Yi,metrics:Ri};e["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:Mi,baseWidths:Vi,baseMapping:Ki,metrics:Di};e["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:pn,baseWidths:Zi,baseMapping:Qi,metrics:mn};e["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:ln,baseWidths:$i,baseMapping:Gi,metrics:hn};e["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:fn,baseWidths:Ji,baseMapping:Yi,metrics:gn};e["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:un,baseWidths:Vi,baseMapping:Ki,metrics:dn};e["Helvetica-Regular"]=e.Helvetica={name:"LiberationSans-Regular",factors:Wi,baseWidths:Zi,baseMapping:Qi,metrics:zi};e["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:Pi,baseWidths:$i,baseMapping:Gi,metrics:ji};e["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:qi,baseWidths:Ji,baseMapping:Yi,metrics:Hi};e["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:_i,baseWidths:Vi,baseMapping:Ki,metrics:Xi}}));function getXfaFontName(e){const t=normalizeFontName(e);return bn()[t]}function getXfaFontDict(e){const t=function getXfaFontWidths(e){const t=getXfaFontName(e);if(!t)return null;const{baseWidths:a,baseMapping:r,factors:i}=t,n=i?a.map(((e,t)=>e*i[t])):a;let s,o=-2;const c=[];for(const[e,t]of r.map(((e,t)=>[e,t])).sort((([e],[t])=>e-t)))if(-1!==e)if(e===o+1){s.push(n[t]);o+=1}else{o=e;s=[n[t]];c.push(e,s)}return c}(e),a=new Dict(null);a.set("BaseFont",Name.get(e));a.set("Type",Name.get("Font"));a.set("Subtype",Name.get("CIDFontType2"));a.set("Encoding",Name.get("Identity-H"));a.set("CIDToGIDMap",Name.get("Identity"));a.set("W",t);a.set("FirstChar",t[0]);a.set("LastChar",t.at(-2)+t.at(-1).length-1);const r=new Dict(null);a.set("FontDescriptor",r);const i=new Dict(null);i.set("Ordering","Identity");i.set("Registry","Adobe");i.set("Supplement",0);a.set("CIDSystemInfo",i);return a}class PostScriptParser{constructor(e){this.lexer=e;this.operators=[];this.token=null;this.prev=null}nextToken(){this.prev=this.token;this.token=this.lexer.getToken()}accept(e){if(this.token.type===e){this.nextToken();return!0}return!1}expect(e){if(this.accept(e))return!0;throw new FormatError(`Unexpected symbol: found ${this.token.type} expected ${e}.`)}parse(){this.nextToken();this.expect(yn.LBRACE);this.parseBlock();this.expect(yn.RBRACE);return this.operators}parseBlock(){for(;;)if(this.accept(yn.NUMBER))this.operators.push(this.prev.value);else if(this.accept(yn.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(yn.LBRACE))return;this.parseCondition()}}parseCondition(){const e=this.operators.length;this.operators.push(null,null);this.parseBlock();this.expect(yn.RBRACE);if(this.accept(yn.IF)){this.operators[e]=this.operators.length;this.operators[e+1]="jz"}else{if(!this.accept(yn.LBRACE))throw new FormatError("PS Function: error parsing conditional.");{const t=this.operators.length;this.operators.push(null,null);const a=this.operators.length;this.parseBlock();this.expect(yn.RBRACE);this.expect(yn.IFELSE);this.operators[t]=this.operators.length;this.operators[t+1]="j";this.operators[e]=a;this.operators[e+1]="jz"}}}}const yn={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};class PostScriptToken{static get opCache(){return shadow(this,"opCache",Object.create(null))}constructor(e,t){this.type=e;this.value=t}static getOperator(e){return PostScriptToken.opCache[e]||=new PostScriptToken(yn.OPERATOR,e)}static get LBRACE(){return shadow(this,"LBRACE",new PostScriptToken(yn.LBRACE,"{"))}static get RBRACE(){return shadow(this,"RBRACE",new PostScriptToken(yn.RBRACE,"}"))}static get IF(){return shadow(this,"IF",new PostScriptToken(yn.IF,"IF"))}static get IFELSE(){return shadow(this,"IFELSE",new PostScriptToken(yn.IFELSE,"IFELSE"))}}class PostScriptLexer{constructor(e){this.stream=e;this.nextChar();this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let e=!1,t=this.currentChar;for(;;){if(t<0)return wa;if(e)10!==t&&13!==t||(e=!1);else if(37===t)e=!0;else if(!isWhiteSpace(t))break;t=this.nextChar()}switch(0|t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new PostScriptToken(yn.NUMBER,this.getNumber());case 123:this.nextChar();return PostScriptToken.LBRACE;case 125:this.nextChar();return PostScriptToken.RBRACE}const a=this.strBuf;a.length=0;a[0]=String.fromCharCode(t);for(;(t=this.nextChar())>=0&&(t>=65&&t<=90||t>=97&&t<=122);)a.push(String.fromCharCode(t));const r=a.join("");switch(r.toLowerCase()){case"if":return PostScriptToken.IF;case"ifelse":return PostScriptToken.IFELSE;default:return PostScriptToken.getOperator(r)}}getNumber(){let e=this.currentChar;const t=this.strBuf;t.length=0;t[0]=String.fromCharCode(e);for(;(e=this.nextChar())>=0&&(e>=48&&e<=57||45===e||46===e);)t.push(String.fromCharCode(e));const a=parseFloat(t.join(""));if(isNaN(a))throw new FormatError(`Invalid floating point number: ${a}`);return a}}class BaseLocalCache{constructor(e){this._onlyRefs=!0===e?.onlyRefs;if(!this._onlyRefs){this._nameRefMap=new Map;this._imageMap=new Map}this._imageCache=new RefSetCache}getByName(e){this._onlyRefs&&unreachable("Should not call `getByName` method.");const t=this._nameRefMap.get(e);return t?this.getByRef(t):this._imageMap.get(e)||null}getByRef(e){return this._imageCache.get(e)||null}set(e,t,a){unreachable("Abstract method `set` called.")}}class LocalImageCache extends BaseLocalCache{set(e,t=null,a){if("string"!=typeof e)throw new Error(\'LocalImageCache.set - expected "name" argument.\');if(t){if(this._imageCache.has(t))return;this._nameRefMap.set(e,t);this._imageCache.put(t,a)}else this._imageMap.has(e)||this._imageMap.set(e,a)}}class LocalColorSpaceCache extends BaseLocalCache{set(e=null,t=null,a){if("string"!=typeof e&&!t)throw new Error(\'LocalColorSpaceCache.set - expected "name" and/or "ref" argument.\');if(t){if(this._imageCache.has(t))return;null!==e&&this._nameRefMap.set(e,t);this._imageCache.put(t,a)}else this._imageMap.has(e)||this._imageMap.set(e,a)}}class LocalFunctionCache extends BaseLocalCache{constructor(e){super({onlyRefs:!0})}set(e=null,t,a){if(!t)throw new Error(\'LocalFunctionCache.set - expected "ref" argument.\');this._imageCache.has(t)||this._imageCache.put(t,a)}}class LocalGStateCache extends BaseLocalCache{set(e,t=null,a){if("string"!=typeof e)throw new Error(\'LocalGStateCache.set - expected "name" argument.\');if(t){if(this._imageCache.has(t))return;this._nameRefMap.set(e,t);this._imageCache.put(t,a)}else this._imageMap.has(e)||this._imageMap.set(e,a)}}class LocalTilingPatternCache extends BaseLocalCache{constructor(e){super({onlyRefs:!0})}set(e=null,t,a){if(!t)throw new Error(\'LocalTilingPatternCache.set - expected "ref" argument.\');this._imageCache.has(t)||this._imageCache.put(t,a)}}class RegionalImageCache extends BaseLocalCache{constructor(e){super({onlyRefs:!0})}set(e=null,t,a){if(!t)throw new Error(\'RegionalImageCache.set - expected "ref" argument.\');this._imageCache.has(t)||this._imageCache.put(t,a)}}class GlobalColorSpaceCache extends BaseLocalCache{constructor(e){super({onlyRefs:!0})}set(e=null,t,a){if(!t)throw new Error(\'GlobalColorSpaceCache.set - expected "ref" argument.\');this._imageCache.has(t)||this._imageCache.put(t,a)}clear(){this._imageCache.clear()}}class GlobalImageCache{static NUM_PAGES_THRESHOLD=2;static MIN_IMAGES_TO_CACHE=10;static MAX_BYTE_SIZE=5e7;#H=new RefSet;constructor(){this._refCache=new RefSetCache;this._imageCache=new RefSetCache}get#W(){let e=0;for(const t of this._imageCache)e+=t.byteSize;return e}get#z(){return!(this._imageCache.size<GlobalImageCache.MIN_IMAGES_TO_CACHE)&&!(this.#W<GlobalImageCache.MAX_BYTE_SIZE)}shouldCache(e,t){let a=this._refCache.get(e);if(!a){a=new Set;this._refCache.put(e,a)}a.add(t);return!(a.size<GlobalImageCache.NUM_PAGES_THRESHOLD)&&!(!this._imageCache.has(e)&&this.#z)}addDecodeFailed(e){this.#H.put(e)}hasDecodeFailed(e){return this.#H.has(e)}addByteSize(e,t){const a=this._imageCache.get(e);a&&(a.byteSize||(a.byteSize=t))}getData(e,t){const a=this._refCache.get(e);if(!a)return null;if(a.size<GlobalImageCache.NUM_PAGES_THRESHOLD)return null;const r=this._imageCache.get(e);if(!r)return null;a.add(t);return r}setData(e,t){if(!this._refCache.has(e))throw new Error(\'GlobalImageCache.setData - expected "shouldCache" to have been called.\');this._imageCache.has(e)||(this.#z?warn("GlobalImageCache.setData - cache limit reached."):this._imageCache.put(e,t))}clear(e=!1){if(!e){this.#H.clear();this._refCache.clear()}this._imageCache.clear()}}class PDFFunctionFactory{constructor({xref:e,isEvalSupported:t=!0}){this.xref=e;this.isEvalSupported=!1!==t}create(e,t=!1){let a,r;e instanceof Ref?a=e:e instanceof Dict?a=e.objId:e instanceof BaseStream&&(a=e.dict?.objId);if(a){const e=this._localFunctionCache.getByRef(a);if(e)return e}const i=this.xref.fetchIfRef(e);if(Array.isArray(i)){if(!t)throw new Error(\'PDFFunctionFactory.create - expected "parseArray" argument.\');r=PDFFunction.parseArray(this,i)}else r=PDFFunction.parse(this,i);a&&this._localFunctionCache.set(null,a,r);return r}get _localFunctionCache(){return shadow(this,"_localFunctionCache",new LocalFunctionCache)}}function toNumberArray(e){return Array.isArray(e)?isNumberArray(e,null)?e:e.map((e=>+e)):null}class PDFFunction{static getSampleArray(e,t,a,r){let i,n,s=1;for(i=0,n=e.length;i<n;i++)s*=e[i];s*=t;const o=new Array(s);let c=0,l=0;const h=1/(2**a-1),u=r.getBytes((s*a+7)/8);let d=0;for(i=0;i<s;i++){for(;c<a;){l<<=8;l|=u[d++];c+=8}c-=a;o[i]=(l>>c)*h;l&=(1<<c)-1}return o}static parse(e,t){const a=t.dict||t;switch(a.get("FunctionType")){case 0:return this.constructSampled(e,t,a);case 1:break;case 2:return this.constructInterpolated(e,a);case 3:return this.constructStiched(e,a);case 4:return this.constructPostScript(e,t,a)}throw new FormatError("Unknown type of function")}static parseArray(e,t){const{xref:a}=e,r=[];for(const i of t)r.push(this.parse(e,a.fetchIfRef(i)));return function(e,t,a,i){for(let n=0,s=r.length;n<s;n++)r[n](e,t,a,i+n)}}static constructSampled(e,t,a){function toMultiArray(e){const t=e.length,a=[];let r=0;for(let i=0;i<t;i+=2)a[r++]=[e[i],e[i+1]];return a}function interpolate(e,t,a,r,i){return r+(i-r)/(a-t)*(e-t)}let r=toNumberArray(a.getArray("Domain")),i=toNumberArray(a.getArray("Range"));if(!r||!i)throw new FormatError("No domain or range");const n=r.length/2,s=i.length/2;r=toMultiArray(r);i=toMultiArray(i);const o=toNumberArray(a.getArray("Size")),c=a.get("BitsPerSample"),l=a.get("Order")||1;1!==l&&info("No support for cubic spline interpolation: "+l);let h=toNumberArray(a.getArray("Encode"));if(h)h=toMultiArray(h);else{h=[];for(let e=0;e<n;++e)h.push([0,o[e]-1])}let u=toNumberArray(a.getArray("Decode"));u=u?toMultiArray(u):i;const d=this.getSampleArray(o,s,c,t);return function constructSampledFn(e,t,a,c){const l=1<<n,f=new Float64Array(l).fill(1),g=new Uint32Array(l);let p,m,b=s,y=1;for(p=0;p<n;++p){const a=r[p][0],i=r[p][1];let n=interpolate(MathClamp(e[t+p],a,i),a,i,h[p][0],h[p][1]);const s=o[p];n=MathClamp(n,0,s-1);const c=n<s-1?Math.floor(n):n-1,u=c+1-n,d=n-c,w=c*b,x=w+b;for(m=0;m<l;m++)if(m&y){f[m]*=d;g[m]+=x}else{f[m]*=u;g[m]+=w}b*=s;y<<=1}for(m=0;m<s;++m){let e=0;for(p=0;p<l;p++)e+=d[g[p]+m]*f[p];e=interpolate(e,0,1,u[m][0],u[m][1]);a[c+m]=MathClamp(e,i[m][0],i[m][1])}}}static constructInterpolated(e,t){const a=toNumberArray(t.getArray("C0"))||[0],r=toNumberArray(t.getArray("C1"))||[1],i=t.get("N"),n=[];for(let e=0,t=a.length;e<t;++e)n.push(r[e]-a[e]);const s=n.length;return function constructInterpolatedFn(e,t,r,o){const c=1===i?e[t]:e[t]**i;for(let e=0;e<s;++e)r[o+e]=a[e]+c*n[e]}}static constructStiched(e,t){const a=toNumberArray(t.getArray("Domain"));if(!a)throw new FormatError("No domain");if(1!==a.length/2)throw new FormatError("Bad domain for stiched function");const{xref:r}=e,i=[];for(const a of t.get("Functions"))i.push(this.parse(e,r.fetchIfRef(a)));const n=toNumberArray(t.getArray("Bounds")),s=toNumberArray(t.getArray("Encode")),o=new Float32Array(1);return function constructStichedFn(e,t,r,c){const l=MathClamp(e[t],a[0],a[1]),h=n.length;let u;for(u=0;u<h&&!(l<n[u]);++u);let d=a[0];u>0&&(d=n[u-1]);let f=a[1];u<n.length&&(f=n[u]);const g=s[2*u],p=s[2*u+1];o[0]=d===f?g:g+(l-d)*(p-g)/(f-d);i[u](o,0,r,c)}}static constructPostScript(e,t,a){const r=toNumberArray(a.getArray("Domain")),i=toNumberArray(a.getArray("Range"));if(!r)throw new FormatError("No domain.");if(!i)throw new FormatError("No range.");const n=new PostScriptLexer(t),s=new PostScriptParser(n).parse();if(e.isEvalSupported&&FeatureTest.isEvalSupported){const e=(new PostScriptCompiler).compile(s,r,i);if(e)return new Function("src","srcOffset","dest","destOffset",e)}info("Unable to compile PS function");const o=i.length>>1,c=r.length>>1,l=new PostScriptEvaluator(s),h=Object.create(null);let u=8192;const d=new Float32Array(c);return function constructPostScriptFn(e,t,a,r){let n,s,f="";const g=d;for(n=0;n<c;n++){s=e[t+n];g[n]=s;f+=s+"_"}const p=h[f];if(void 0!==p){a.set(p,r);return}const m=new Float32Array(o),b=l.execute(g),y=b.length-o;for(n=0;n<o;n++){s=b[y+n];let e=i[2*n];if(s<e)s=e;else{e=i[2*n+1];s>e&&(s=e)}m[n]=s}if(u>0){u--;h[f]=m}a.set(m,r)}}}function isPDFFunction(e){let t;if(e instanceof Dict)t=e;else{if(!(e instanceof BaseStream))return!1;t=e.dict}return t.has("FunctionType")}class PostScriptStack{static MAX_STACK_SIZE=100;constructor(e){this.stack=e?Array.from(e):[]}push(e){if(this.stack.length>=PostScriptStack.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(e)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(e){if(this.stack.length+e>=PostScriptStack.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const t=this.stack;for(let a=t.length-e,r=e-1;r>=0;r--,a++)t.push(t[a])}index(e){this.push(this.stack[this.stack.length-e-1])}roll(e,t){const a=this.stack,r=a.length-e,i=a.length-1,n=r+(t-Math.floor(t/e)*e);for(let e=r,t=i;e<t;e++,t--){const r=a[e];a[e]=a[t];a[t]=r}for(let e=r,t=n-1;e<t;e++,t--){const r=a[e];a[e]=a[t];a[t]=r}for(let e=n,t=i;e<t;e++,t--){const r=a[e];a[e]=a[t];a[t]=r}}}class PostScriptEvaluator{constructor(e){this.operators=e}execute(e){const t=new PostScriptStack(e);let a=0;const r=this.operators,i=r.length;let n,s,o;for(;a<i;){n=r[a++];if("number"!=typeof n)switch(n){case"jz":o=t.pop();s=t.pop();s||(a=o);break;case"j":s=t.pop();a=s;break;case"abs":s=t.pop();t.push(Math.abs(s));break;case"add":o=t.pop();s=t.pop();t.push(s+o);break;case"and":o=t.pop();s=t.pop();"boolean"==typeof s&&"boolean"==typeof o?t.push(s&&o):t.push(s&o);break;case"atan":o=t.pop();s=t.pop();s=Math.atan2(s,o)/Math.PI*180;s<0&&(s+=360);t.push(s);break;case"bitshift":o=t.pop();s=t.pop();s>0?t.push(s<<o):t.push(s>>o);break;case"ceiling":s=t.pop();t.push(Math.ceil(s));break;case"copy":s=t.pop();t.copy(s);break;case"cos":s=t.pop();t.push(Math.cos(s%360/180*Math.PI));break;case"cvi":s=0|t.pop();t.push(s);break;case"cvr":break;case"div":o=t.pop();s=t.pop();t.push(s/o);break;case"dup":t.copy(1);break;case"eq":o=t.pop();s=t.pop();t.push(s===o);break;case"exch":t.roll(2,1);break;case"exp":o=t.pop();s=t.pop();t.push(s**o);break;case"false":t.push(!1);break;case"floor":s=t.pop();t.push(Math.floor(s));break;case"ge":o=t.pop();s=t.pop();t.push(s>=o);break;case"gt":o=t.pop();s=t.pop();t.push(s>o);break;case"idiv":o=t.pop();s=t.pop();t.push(s/o|0);break;case"index":s=t.pop();t.index(s);break;case"le":o=t.pop();s=t.pop();t.push(s<=o);break;case"ln":s=t.pop();t.push(Math.log(s));break;case"log":s=t.pop();t.push(Math.log10(s));break;case"lt":o=t.pop();s=t.pop();t.push(s<o);break;case"mod":o=t.pop();s=t.pop();t.push(s%o);break;case"mul":o=t.pop();s=t.pop();t.push(s*o);break;case"ne":o=t.pop();s=t.pop();t.push(s!==o);break;case"neg":s=t.pop();t.push(-s);break;case"not":s=t.pop();"boolean"==typeof s?t.push(!s):t.push(~s);break;case"or":o=t.pop();s=t.pop();"boolean"==typeof s&&"boolean"==typeof o?t.push(s||o):t.push(s|o);break;case"pop":t.pop();break;case"roll":o=t.pop();s=t.pop();t.roll(s,o);break;case"round":s=t.pop();t.push(Math.round(s));break;case"sin":s=t.pop();t.push(Math.sin(s%360/180*Math.PI));break;case"sqrt":s=t.pop();t.push(Math.sqrt(s));break;case"sub":o=t.pop();s=t.pop();t.push(s-o);break;case"true":t.push(!0);break;case"truncate":s=t.pop();s=s<0?Math.ceil(s):Math.floor(s);t.push(s);break;case"xor":o=t.pop();s=t.pop();"boolean"==typeof s&&"boolean"==typeof o?t.push(s!==o):t.push(s^o);break;default:throw new FormatError(`Unknown operator ${n}`)}else t.push(n)}return t.stack}}class AstNode{constructor(e){this.type=e}visit(e){unreachable("abstract method")}}class AstArgument extends AstNode{constructor(e,t,a){super("args");this.index=e;this.min=t;this.max=a}visit(e){e.visitArgument(this)}}class AstLiteral extends AstNode{constructor(e){super("literal");this.number=e;this.min=e;this.max=e}visit(e){e.visitLiteral(this)}}class AstBinaryOperation extends AstNode{constructor(e,t,a,r,i){super("binary");this.op=e;this.arg1=t;this.arg2=a;this.min=r;this.max=i}visit(e){e.visitBinaryOperation(this)}}class AstMin extends AstNode{constructor(e,t){super("max");this.arg=e;this.min=e.min;this.max=t}visit(e){e.visitMin(this)}}class AstVariable extends AstNode{constructor(e,t,a){super("var");this.index=e;this.min=t;this.max=a}visit(e){e.visitVariable(this)}}class AstVariableDefinition extends AstNode{constructor(e,t){super("definition");this.variable=e;this.arg=t}visit(e){e.visitVariableDefinition(this)}}class ExpressionBuilderVisitor{constructor(){this.parts=[]}visitArgument(e){this.parts.push("Math.max(",e.min,", Math.min(",e.max,", src[srcOffset + ",e.index,"]))")}visitVariable(e){this.parts.push("v",e.index)}visitLiteral(e){this.parts.push(e.number)}visitBinaryOperation(e){this.parts.push("(");e.arg1.visit(this);this.parts.push(" ",e.op," ");e.arg2.visit(this);this.parts.push(")")}visitVariableDefinition(e){this.parts.push("var ");e.variable.visit(this);this.parts.push(" = ");e.arg.visit(this);this.parts.push(";")}visitMin(e){this.parts.push("Math.min(");e.arg.visit(this);this.parts.push(", ",e.max,")")}toString(){return this.parts.join("")}}function buildAddOperation(e,t){return"literal"===t.type&&0===t.number?e:"literal"===e.type&&0===e.number?t:"literal"===t.type&&"literal"===e.type?new AstLiteral(e.number+t.number):new AstBinaryOperation("+",e,t,e.min+t.min,e.max+t.max)}function buildMulOperation(e,t){if("literal"===t.type){if(0===t.number)return new AstLiteral(0);if(1===t.number)return e;if("literal"===e.type)return new AstLiteral(e.number*t.number)}if("literal"===e.type){if(0===e.number)return new AstLiteral(0);if(1===e.number)return t}const a=Math.min(e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max),r=Math.max(e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max);return new AstBinaryOperation("*",e,t,a,r)}function buildSubOperation(e,t){if("literal"===t.type){if(0===t.number)return e;if("literal"===e.type)return new AstLiteral(e.number-t.number)}return"binary"===t.type&&"-"===t.op&&"literal"===e.type&&1===e.number&&"literal"===t.arg1.type&&1===t.arg1.number?t.arg2:new AstBinaryOperation("-",e,t,e.min-t.max,e.max-t.min)}function buildMinOperation(e,t){return e.min>=t?new AstLiteral(t):e.max<=t?e:new AstMin(e,t)}class PostScriptCompiler{compile(e,t,a){const r=[],i=[],n=t.length>>1,s=a.length>>1;let o,c,l,h,u,d,f,g,p=0;for(let e=0;e<n;e++)r.push(new AstArgument(e,t[2*e],t[2*e+1]));for(let t=0,a=e.length;t<a;t++){g=e[t];if("number"!=typeof g)switch(g){case"add":if(r.length<2)return null;h=r.pop();l=r.pop();r.push(buildAddOperation(l,h));break;case"cvr":if(r.length<1)return null;break;case"mul":if(r.length<2)return null;h=r.pop();l=r.pop();r.push(buildMulOperation(l,h));break;case"sub":if(r.length<2)return null;h=r.pop();l=r.pop();r.push(buildSubOperation(l,h));break;case"exch":if(r.length<2)return null;u=r.pop();d=r.pop();r.push(u,d);break;case"pop":if(r.length<1)return null;r.pop();break;case"index":if(r.length<1)return null;l=r.pop();if("literal"!==l.type)return null;o=l.number;if(o<0||!Number.isInteger(o)||r.length<o)return null;u=r[r.length-o-1];if("literal"===u.type||"var"===u.type){r.push(u);break}f=new AstVariable(p++,u.min,u.max);r[r.length-o-1]=f;r.push(f);i.push(new AstVariableDefinition(f,u));break;case"dup":if(r.length<1)return null;if("number"==typeof e[t+1]&&"gt"===e[t+2]&&e[t+3]===t+7&&"jz"===e[t+4]&&"pop"===e[t+5]&&e[t+6]===e[t+1]){l=r.pop();r.push(buildMinOperation(l,e[t+1]));t+=6;break}u=r.at(-1);if("literal"===u.type||"var"===u.type){r.push(u);break}f=new AstVariable(p++,u.min,u.max);r[r.length-1]=f;r.push(f);i.push(new AstVariableDefinition(f,u));break;case"roll":if(r.length<2)return null;h=r.pop();l=r.pop();if("literal"!==h.type||"literal"!==l.type)return null;c=h.number;o=l.number;if(o<=0||!Number.isInteger(o)||!Number.isInteger(c)||r.length<o)return null;c=(c%o+o)%o;if(0===c)break;r.push(...r.splice(r.length-o,o-c));break;default:return null}else r.push(new AstLiteral(g))}if(r.length!==s)return null;const m=[];for(const e of i){const t=new ExpressionBuilderVisitor;e.visit(t);m.push(t.toString())}for(let e=0,t=r.length;e<t;e++){const t=r[e],i=new ExpressionBuilderVisitor;t.visit(i);const n=a[2*e],s=a[2*e+1],o=[i.toString()];if(n>t.min){o.unshift("Math.max(",n,", ");o.push(")")}if(s<t.max){o.unshift("Math.min(",s,", ");o.push(")")}o.unshift("dest[destOffset + ",e,"] = ");o.push(";");m.push(o.join(""))}return m.join("\\n")}}const wn=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],xn=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function isOdd(e){return!!(1&e)}function isEven(e){return!(1&e)}function findUnequal(e,t,a){let r,i;for(r=t,i=e.length;r<i;++r)if(e[r]!==a)return r;return r}function reverseValues(e,t,a){for(let r=t,i=a-1;r<i;++r,--i){const t=e[r];e[r]=e[i];e[i]=t}}function createBidiText(e,t,a=!1){let r="ltr";a?r="ttb":t||(r="rtl");return{str:e,dir:r}}const Sn=[],An=[];function bidi(e,t=-1,a=!1){let r=!0;const i=e.length;if(0===i||a)return createBidiText(e,r,a);Sn.length=i;An.length=i;let n,s,o=0;for(n=0;n<i;++n){Sn[n]=e.charAt(n);const t=e.charCodeAt(n);let a="L";if(t<=255)a=wn[t];else if(1424<=t&&t<=1524)a="R";else if(1536<=t&&t<=1791){a=xn[255&t];a||warn("Bidi: invalid Unicode character "+t.toString(16))}else(1792<=t&&t<=2220||64336<=t&&t<=65023||65136<=t&&t<=65279)&&(a="AL");"R"!==a&&"AL"!==a&&"AN"!==a||o++;An[n]=a}if(0===o){r=!0;return createBidiText(e,r)}if(-1===t)if(o/i<.3&&i>4){r=!0;t=0}else{r=!1;t=1}const c=[];for(n=0;n<i;++n)c[n]=t;const l=isOdd(t)?"R":"L",h=l,u=h;let d,f=h;for(n=0;n<i;++n)"NSM"===An[n]?An[n]=f:f=An[n];f=h;for(n=0;n<i;++n){d=An[n];"EN"===d?An[n]="AL"===f?"AN":"EN":"R"!==d&&"L"!==d&&"AL"!==d||(f=d)}for(n=0;n<i;++n){d=An[n];"AL"===d&&(An[n]="R")}for(n=1;n<i-1;++n){"ES"===An[n]&&"EN"===An[n-1]&&"EN"===An[n+1]&&(An[n]="EN");"CS"!==An[n]||"EN"!==An[n-1]&&"AN"!==An[n-1]||An[n+1]!==An[n-1]||(An[n]=An[n-1])}for(n=0;n<i;++n)if("EN"===An[n]){for(let e=n-1;e>=0&&"ET"===An[e];--e)An[e]="EN";for(let e=n+1;e<i&&"ET"===An[e];++e)An[e]="EN"}for(n=0;n<i;++n){d=An[n];"WS"!==d&&"ES"!==d&&"ET"!==d&&"CS"!==d||(An[n]="ON")}f=h;for(n=0;n<i;++n){d=An[n];"EN"===d?An[n]="L"===f?"L":"EN":"R"!==d&&"L"!==d||(f=d)}for(n=0;n<i;++n)if("ON"===An[n]){const e=findUnequal(An,n+1,"ON");let t=h;n>0&&(t=An[n-1]);let a=u;e+1<i&&(a=An[e+1]);"L"!==t&&(t="R");"L"!==a&&(a="R");t===a&&An.fill(t,n,e);n=e-1}for(n=0;n<i;++n)"ON"===An[n]&&(An[n]=l);for(n=0;n<i;++n){d=An[n];isEven(c[n])?"R"===d?c[n]+=1:"AN"!==d&&"EN"!==d||(c[n]+=2):"L"!==d&&"AN"!==d&&"EN"!==d||(c[n]+=1)}let g,p=-1,m=99;for(n=0,s=c.length;n<s;++n){g=c[n];p<g&&(p=g);m>g&&isOdd(g)&&(m=g)}for(g=p;g>=m;--g){let e=-1;for(n=0,s=c.length;n<s;++n)if(c[n]<g){if(e>=0){reverseValues(Sn,e,n);e=-1}}else e<0&&(e=n);e>=0&&reverseValues(Sn,e,c.length)}for(n=0,s=Sn.length;n<s;++n){const e=Sn[n];"<"!==e&&">"!==e||(Sn[n]="")}return createBidiText(Sn.join(""),r)}const kn={style:"normal",weight:"normal"},Cn={style:"normal",weight:"bold"},vn={style:"italic",weight:"normal"},Fn={style:"italic",weight:"bold"},In=new Map([["Times-Roman",{local:["Times New Roman","Times-Roman","Times","Liberation Serif","Nimbus Roman","Nimbus Roman L","Tinos","Thorndale","TeX Gyre Termes","FreeSerif","Linux Libertine O","Libertinus Serif","DejaVu Serif","Bitstream Vera Serif","Ubuntu"],style:kn,ultimate:"serif"}],["Times-Bold",{alias:"Times-Roman",style:Cn,ultimate:"serif"}],["Times-Italic",{alias:"Times-Roman",style:vn,ultimate:"serif"}],["Times-BoldItalic",{alias:"Times-Roman",style:Fn,ultimate:"serif"}],["Helvetica",{local:["Helvetica","Helvetica Neue","Arial","Arial Nova","Liberation Sans","Arimo","Nimbus Sans","Nimbus Sans L","A030","TeX Gyre Heros","FreeSans","DejaVu Sans","Albany","Bitstream Vera Sans","Arial Unicode MS","Microsoft Sans Serif","Apple Symbols","Cantarell"],path:"LiberationSans-Regular.ttf",style:kn,ultimate:"sans-serif"}],["Helvetica-Bold",{alias:"Helvetica",path:"LiberationSans-Bold.ttf",style:Cn,ultimate:"sans-serif"}],["Helvetica-Oblique",{alias:"Helvetica",path:"LiberationSans-Italic.ttf",style:vn,ultimate:"sans-serif"}],["Helvetica-BoldOblique",{alias:"Helvetica",path:"LiberationSans-BoldItalic.ttf",style:Fn,ultimate:"sans-serif"}],["Courier",{local:["Courier","Courier New","Liberation Mono","Nimbus Mono","Nimbus Mono L","Cousine","Cumberland","TeX Gyre Cursor","FreeMono","Linux Libertine Mono O","Libertinus Mono"],style:kn,ultimate:"monospace"}],["Courier-Bold",{alias:"Courier",style:Cn,ultimate:"monospace"}],["Courier-Oblique",{alias:"Courier",style:vn,ultimate:"monospace"}],["Courier-BoldOblique",{alias:"Courier",style:Fn,ultimate:"monospace"}],["ArialBlack",{local:["Arial Black"],style:{style:"normal",weight:"900"},fallback:"Helvetica-Bold"}],["ArialBlack-Bold",{alias:"ArialBlack"}],["ArialBlack-Italic",{alias:"ArialBlack",style:{style:"italic",weight:"900"},fallback:"Helvetica-BoldOblique"}],["ArialBlack-BoldItalic",{alias:"ArialBlack-Italic"}],["ArialNarrow",{local:["Arial Narrow","Liberation Sans Narrow","Helvetica Condensed","Nimbus Sans Narrow","TeX Gyre Heros Cn"],style:kn,fallback:"Helvetica"}],["ArialNarrow-Bold",{alias:"ArialNarrow",style:Cn,fallback:"Helvetica-Bold"}],["ArialNarrow-Italic",{alias:"ArialNarrow",style:vn,fallback:"Helvetica-Oblique"}],["ArialNarrow-BoldItalic",{alias:"ArialNarrow",style:Fn,fallback:"Helvetica-BoldOblique"}],["Calibri",{local:["Calibri","Carlito"],style:kn,fallback:"Helvetica"}],["Calibri-Bold",{alias:"Calibri",style:Cn,fallback:"Helvetica-Bold"}],["Calibri-Italic",{alias:"Calibri",style:vn,fallback:"Helvetica-Oblique"}],["Calibri-BoldItalic",{alias:"Calibri",style:Fn,fallback:"Helvetica-BoldOblique"}],["Wingdings",{local:["Wingdings","URW Dingbats"],style:kn}],["Wingdings-Regular",{alias:"Wingdings"}],["Wingdings-Bold",{alias:"Wingdings"}]]),Tn=new Map([["Arial-Black","ArialBlack"]]);function getFamilyName(e){const t=new Set(["thin","extralight","ultralight","demilight","semilight","light","book","regular","normal","medium","demibold","semibold","bold","extrabold","ultrabold","black","heavy","extrablack","ultrablack","roman","italic","oblique","ultracondensed","extracondensed","condensed","semicondensed","normal","semiexpanded","expanded","extraexpanded","ultraexpanded","bolditalic"]);return e.split(/[- ,+]+/g).filter((e=>!t.has(e.toLowerCase()))).join(" ")}function generateFont({alias:e,local:t,path:a,fallback:r,style:i,ultimate:n},s,o,c=!0,l=!0,h=""){const u={style:null,ultimate:null};if(t){const e=h?` ${h}`:"";for(const a of t)s.push(`local(${a}${e})`)}if(e){const t=In.get(e),n=h||function getStyleToAppend(e){switch(e){case Cn:return"Bold";case vn:return"Italic";case Fn:return"Bold Italic";default:if("bold"===e?.weight)return"Bold";if("italic"===e?.style)return"Italic"}return""}(i);Object.assign(u,generateFont(t,s,o,c&&!r,l&&!a,n))}i&&(u.style=i);n&&(u.ultimate=n);if(c&&r){const e=In.get(r),{ultimate:t}=generateFont(e,s,o,c,l&&!a,h);u.ultimate||=t}l&&a&&o&&s.push(`url(${o}${a})`);return u}function getFontSubstitution(e,t,a,r,i,n){if(r.startsWith("InvalidPDFjsFont_"))return null;"TrueType"!==n&&"Type1"!==n||!/^[A-Z]{6}\\+/.test(r)||(r=r.slice(7));const s=r=normalizeFontName(r);let o=e.get(s);if(o)return o;let c=In.get(r);if(!c)for(const[e,t]of Tn)if(r.startsWith(e)){r=`${t}${r.substring(e.length)}`;c=In.get(r);break}let l=!1;if(!c){c=In.get(i);l=!0}const h=`${t.getDocId()}_s${t.createFontId()}`;if(!c){if(!validateFontName(r)){warn(`Cannot substitute the font because of its name: ${r}`);e.set(s,null);return null}const t=/bold/gi.test(r),a=/oblique|italic/gi.test(r),i=t&&a&&Fn||t&&Cn||a&&vn||kn;o={css:`"${getFamilyName(r)}",${h}`,guessFallback:!0,loadedName:h,baseFontName:r,src:`local(${r})`,style:i};e.set(s,o);return o}const u=[];l&&validateFontName(r)&&u.push(`local(${r})`);const{style:d,ultimate:f}=generateFont(c,u,a),g=null===f,p=g?"":`,${f}`;o={css:`"${getFamilyName(r)}",${h}${p}`,guessFallback:g,loadedName:h,baseFontName:r,src:u.join(","),style:d};e.set(s,o);return o}const On=3285377520,Mn=4294901760,Dn=65535;class MurmurHash3_64{constructor(e){this.h1=e?4294967295&e:On;this.h2=e?4294967295&e:On}update(e){let t,a;if("string"==typeof e){t=new Uint8Array(2*e.length);a=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);if(i<=255)t[a++]=i;else{t[a++]=i>>>8;t[a++]=255&i}}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice();a=t.byteLength}const r=a>>2,i=a-4*r,n=new Uint32Array(t.buffer,0,r);let s=0,o=0,c=this.h1,l=this.h2;const h=3432918353,u=461845907,d=11601,f=13715;for(let e=0;e<r;e++)if(1&e){s=n[e];s=s*h&Mn|s*d&Dn;s=s<<15|s>>>17;s=s*u&Mn|s*f&Dn;c^=s;c=c<<13|c>>>19;c=5*c+3864292196}else{o=n[e];o=o*h&Mn|o*d&Dn;o=o<<15|o>>>17;o=o*u&Mn|o*f&Dn;l^=o;l=l<<13|l>>>19;l=5*l+3864292196}s=0;switch(i){case 3:s^=t[4*r+2]<<16;case 2:s^=t[4*r+1]<<8;case 1:s^=t[4*r];s=s*h&Mn|s*d&Dn;s=s<<15|s>>>17;s=s*u&Mn|s*f&Dn;1&r?c^=s:l^=s}this.h1=c;this.h2=l}hexdigest(){let e=this.h1,t=this.h2;e^=t>>>1;e=3981806797*e&Mn|36045*e&Dn;t=4283543511*t&Mn|(2950163797*(t<<16|e>>>16)&Mn)>>>16;e^=t>>>1;e=444984403*e&Mn|60499*e&Dn;t=3301882366*t&Mn|(3120437893*(t<<16|e>>>16)&Mn)>>>16;e^=t>>>1;return(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}function resizeImageMask(e,t,a,r,i,n){const s=i*n;let o;o=t<=8?new Uint8Array(s):t<=16?new Uint16Array(s):new Uint32Array(s);const c=a/i,l=r/n;let h,u,d,f,g=0;const p=new Uint16Array(i),m=a;for(h=0;h<i;h++)p[h]=Math.floor(h*c);for(h=0;h<n;h++){d=Math.floor(h*l)*m;for(u=0;u<i;u++){f=d+p[u];o[g++]=e[f]}}return o}class PDFImage{constructor({xref:e,res:t,image:a,isInline:r=!1,smask:i=null,mask:n=null,isMask:s=!1,pdfFunctionFactory:o,globalColorSpaceCache:c,localColorSpaceCache:l}){this.image=a;const h=a.dict,u=h.get("F","Filter");let d;if(u instanceof Name)d=u.name;else if(Array.isArray(u)){const t=e.fetchIfRef(u[0]);t instanceof Name&&(d=t.name)}switch(d){case"JPXDecode":({width:a.width,height:a.height,componentsCount:a.numComps,bitsPerComponent:a.bitsPerComponent}=JpxImage.parseImageProperties(a.stream));a.stream.reset();const e=ImageResizer.getReducePowerForJPX(a.width,a.height,a.numComps);this.jpxDecoderOptions={numComponents:0,isIndexedColormap:!1,smaskInData:h.has("SMaskInData"),reducePower:e};if(e){const t=2**e;a.width=Math.ceil(a.width/t);a.height=Math.ceil(a.height/t)}break;case"JBIG2Decode":a.bitsPerComponent=1;a.numComps=1}let f=h.get("W","Width"),g=h.get("H","Height");if(Number.isInteger(a.width)&&a.width>0&&Number.isInteger(a.height)&&a.height>0&&(a.width!==f||a.height!==g)){warn("PDFImage - using the Width/Height of the image data, rather than the image dictionary.");f=a.width;g=a.height}else{const e="number"==typeof f&&f>0,t="number"==typeof g&&g>0;if(!e||!t){if(!a.fallbackDims)throw new FormatError(`Invalid image width: ${f} or height: ${g}`);warn("PDFImage - using the Width/Height of the parent image, for SMask/Mask data.");e||(f=a.fallbackDims.width);t||(g=a.fallbackDims.height)}}this.width=f;this.height=g;this.interpolate=h.get("I","Interpolate");this.imageMask=h.get("IM","ImageMask")||!1;this.matte=h.get("Matte")||!1;let p=a.bitsPerComponent;if(!p){p=h.get("BPC","BitsPerComponent");if(!p){if(!this.imageMask)throw new FormatError(`Bits per component missing in image: ${this.imageMask}`);p=1}}this.bpc=p;if(!this.imageMask){let i=h.getRaw("CS")||h.getRaw("ColorSpace");const n=!!i;if(n)this.jpxDecoderOptions?.smaskInData&&(i=Name.get("DeviceRGBA"));else if(this.jpxDecoderOptions)i=Name.get("DeviceRGBA");else switch(a.numComps){case 1:i=Name.get("DeviceGray");break;case 3:i=Name.get("DeviceRGB");break;case 4:i=Name.get("DeviceCMYK");break;default:throw new Error(`Images with ${a.numComps} color components not supported.`)}this.colorSpace=ColorSpaceUtils.parse({cs:i,xref:e,resources:r?t:null,pdfFunctionFactory:o,globalColorSpaceCache:c,localColorSpaceCache:l});this.numComps=this.colorSpace.numComps;if(this.jpxDecoderOptions){this.jpxDecoderOptions.numComponents=n?this.numComps:0;this.jpxDecoderOptions.isIndexedColormap="Indexed"===this.colorSpace.name}}this.decode=h.getArray("D","Decode");this.needsDecode=!1;if(this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,p)||s&&!ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const e=(1<<p)-1;this.decodeCoefficients=[];this.decodeAddends=[];const t="Indexed"===this.colorSpace?.name;for(let a=0,r=0;a<this.decode.length;a+=2,++r){const i=this.decode[a],n=this.decode[a+1];this.decodeCoefficients[r]=t?(n-i)/e:n-i;this.decodeAddends[r]=t?i:e*i}}if(i){i.fallbackDims??={width:f,height:g};this.smask=new PDFImage({xref:e,res:t,image:i,isInline:r,pdfFunctionFactory:o,globalColorSpaceCache:c,localColorSpaceCache:l})}else if(n)if(n instanceof BaseStream){if(n.dict.get("IM","ImageMask")){n.fallbackDims??={width:f,height:g};this.mask=new PDFImage({xref:e,res:t,image:n,isInline:r,isMask:!0,pdfFunctionFactory:o,globalColorSpaceCache:c,localColorSpaceCache:l})}else warn("Ignoring /Mask in image without /ImageMask.")}else this.mask=n}static async buildImage({xref:e,res:t,image:a,isInline:r=!1,pdfFunctionFactory:i,globalColorSpaceCache:n,localColorSpaceCache:s}){const o=a;let c=null,l=null;const h=a.dict.get("SMask"),u=a.dict.get("Mask");h?h instanceof BaseStream?c=h:warn("Unsupported /SMask format."):u&&(u instanceof BaseStream||Array.isArray(u)?l=u:warn("Unsupported /Mask format."));return new PDFImage({xref:e,res:t,image:o,isInline:r,smask:c,mask:l,pdfFunctionFactory:i,globalColorSpaceCache:n,localColorSpaceCache:s})}static async createMask({image:e,isOffscreenCanvasSupported:t=!1}){const{dict:a}=e,r=a.get("W","Width"),i=a.get("H","Height"),n=a.get("I","Interpolate"),s=a.getArray("D","Decode"),o=s?.[0]>0,c=(r+7>>3)*i,l=e.getBytes(c),h=1===r&&1===i&&o===(0===l.length||!!(128&l[0]));if(h)return{isSingleOpaquePixel:h};if(t){if(ImageResizer.needsToBeResized(r,i)){const e=new Uint8ClampedArray(r*i*4);convertBlackAndWhiteToRGBA({src:l,dest:e,width:r,height:i,nonBlackColor:0,inverseDecode:o});return ImageResizer.createImage({kind:v,data:e,width:r,height:i,interpolate:n})}const e=new OffscreenCanvas(r,i),t=e.getContext("2d"),a=t.createImageData(r,i);convertBlackAndWhiteToRGBA({src:l,dest:a.data,width:r,height:i,nonBlackColor:0,inverseDecode:o});t.putImageData(a,0,0);return{data:null,width:r,height:i,interpolate:n,bitmap:e.transferToImageBitmap()}}const u=l.byteLength;let d;if(e instanceof DecodeStream&&(!o||c===u))d=l;else if(o){d=new Uint8Array(c);d.set(l);d.fill(255,u)}else d=new Uint8Array(l);if(o)for(let e=0;e<u;e++)d[e]^=255;return{data:d,width:r,height:i,interpolate:n}}get drawWidth(){return Math.max(this.width,this.smask?.width||0,this.mask?.width||0)}get drawHeight(){return Math.max(this.height,this.smask?.height||0,this.mask?.height||0)}decodeBuffer(e){const t=this.bpc,a=this.numComps,r=this.decodeAddends,i=this.decodeCoefficients,n=(1<<t)-1;let s,o;if(1===t){for(s=0,o=e.length;s<o;s++)e[s]=+!e[s];return}let c=0;for(s=0,o=this.width*this.height;s<o;s++)for(let t=0;t<a;t++){e[c]=MathClamp(r[t]+e[c]*i[t],0,n);c++}}getComponents(e){const t=this.bpc;if(8===t)return e;const a=this.width,r=this.height,i=this.numComps,n=a*r*i;let s,o=0;s=t<=8?new Uint8Array(n):t<=16?new Uint16Array(n):new Uint32Array(n);const c=a*i,l=(1<<t)-1;let h,u,d=0;if(1===t){let t,a,i;for(let n=0;n<r;n++){a=d+(-8&c);i=d+c;for(;d<a;){u=e[o++];s[d]=u>>7&1;s[d+1]=u>>6&1;s[d+2]=u>>5&1;s[d+3]=u>>4&1;s[d+4]=u>>3&1;s[d+5]=u>>2&1;s[d+6]=u>>1&1;s[d+7]=1&u;d+=8}if(d<i){u=e[o++];t=128;for(;d<i;){s[d++]=+!!(u&t);t>>=1}}}}else{let a=0;u=0;for(d=0,h=n;d<h;++d){if(d%c==0){u=0;a=0}for(;a<t;){u=u<<8|e[o++];a+=8}const r=a-t;let i=u>>r;i<0?i=0:i>l&&(i=l);s[d]=i;u&=(1<<r)-1;a=r}}return s}async fillOpacity(e,t,a,r,i){const n=this.smask,s=this.mask;let o,c,l,h,u,d;if(n){c=n.width;l=n.height;o=new Uint8ClampedArray(c*l);await n.fillGrayBuffer(o);c===t&&l===a||(o=resizeImageMask(o,n.bpc,c,l,t,a))}else if(s)if(s instanceof PDFImage){c=s.width;l=s.height;o=new Uint8ClampedArray(c*l);s.numComps=1;await s.fillGrayBuffer(o);for(h=0,u=c*l;h<u;++h)o[h]=255-o[h];c===t&&l===a||(o=resizeImageMask(o,s.bpc,c,l,t,a))}else{if(!Array.isArray(s))throw new FormatError("Unknown mask format.");{o=new Uint8ClampedArray(t*a);const e=this.numComps;for(h=0,u=t*a;h<u;++h){let t=0;const a=h*e;for(d=0;d<e;++d){const e=i[a+d],r=2*d;if(e<s[r]||e>s[r+1]){t=255;break}}o[h]=t}}}if(o)for(h=0,d=3,u=t*r;h<u;++h,d+=4)e[d]=o[h];else for(h=0,d=3,u=t*r;h<u;++h,d+=4)e[d]=255}undoPreblend(e,t,a){const r=this.smask?.matte;if(!r)return;const i=this.colorSpace.getRgb(r,0),n=i[0],s=i[1],o=i[2],c=t*a*4;for(let t=0;t<c;t+=4){const a=e[t+3];if(0===a){e[t]=255;e[t+1]=255;e[t+2]=255;continue}const r=255/a;e[t]=(e[t]-n)*r+n;e[t+1]=(e[t+1]-s)*r+s;e[t+2]=(e[t+2]-o)*r+o}}async createImageData(e=!1,t=!1){const a=this.drawWidth,r=this.drawHeight,i={width:a,height:r,interpolate:this.interpolate,kind:0,data:null},n=this.numComps,s=this.width,o=this.height,c=this.bpc,l=s*n*c+7>>3,h=t&&ImageResizer.needsToBeResized(a,r);if(!this.smask&&!this.mask&&"DeviceRGBA"===this.colorSpace.name){i.kind=v;const e=i.data=await this.getImageBytes(o*s*4,{});return t?h?ImageResizer.createImage(i,!1):this.createBitmap(v,a,r,e):i}if(!e){let e;"DeviceGray"===this.colorSpace.name&&1===c?e=k:"DeviceRGB"!==this.colorSpace.name||8!==c||this.needsDecode||(e=C);if(e&&!this.smask&&!this.mask&&a===s&&r===o){const n=await this.#$(s,o);if(n)return n;const c=await this.getImageBytes(o*l,{});if(t)return h?ImageResizer.createImage({data:c,kind:e,width:a,height:r,interpolate:this.interpolate},this.needsDecode):this.createBitmap(e,s,o,c);i.kind=e;i.data=c;if(this.needsDecode){assert(e===k,"PDFImage.createImageData: The image must be grayscale.");const t=i.data;for(let e=0,a=t.length;e<a;e++)t[e]^=255}return i}if(this.image instanceof JpegStream&&!this.smask&&!this.mask&&!this.needsDecode){let e=o*l;if(t&&!h){let t=!1;switch(this.colorSpace.name){case"DeviceGray":e*=4;t=!0;break;case"DeviceRGB":e=e/3*4;t=!0;break;case"DeviceCMYK":t=!0}if(t){const t=await this.#$(a,r);if(t)return t;const i=await this.getImageBytes(e,{drawWidth:a,drawHeight:r,forceRGBA:!0});return this.createBitmap(v,a,r,i)}}else switch(this.colorSpace.name){case"DeviceGray":e*=3;case"DeviceRGB":case"DeviceCMYK":i.kind=C;i.data=await this.getImageBytes(e,{drawWidth:a,drawHeight:r,forceRGB:!0});return h?ImageResizer.createImage(i):i}}}const u=await this.getImageBytes(o*l,{internal:!0}),d=0|u.length/l*r/o,f=this.getComponents(u);let g,p,m,b,y,w;if(t&&!h){m=new OffscreenCanvas(a,r);b=m.getContext("2d");y=b.createImageData(a,r);w=y.data}i.kind=v;if(e||this.smask||this.mask){t&&!h||(w=new Uint8ClampedArray(a*r*4));g=1;p=!0;await this.fillOpacity(w,a,r,d,f)}else{if(!t||h){i.kind=C;w=new Uint8ClampedArray(a*r*3);g=0}else{new Uint32Array(w.buffer).fill(FeatureTest.isLittleEndian?4278190080:255);g=1}p=!1}this.needsDecode&&this.decodeBuffer(f);this.colorSpace.fillRgb(w,s,o,a,r,d,c,f,g);p&&this.undoPreblend(w,a,d);if(t&&!h){b.putImageData(y,0,0);return{data:null,width:a,height:r,bitmap:m.transferToImageBitmap(),interpolate:this.interpolate}}i.data=w;return h?ImageResizer.createImage(i):i}async fillGrayBuffer(e){const t=this.numComps;if(1!==t)throw new FormatError(`Reading gray scale from a color image: ${t}`);const a=this.width,r=this.height,i=this.bpc,n=a*t*i+7>>3,s=await this.getImageBytes(r*n,{internal:!0}),o=this.getComponents(s);let c,l;if(1===i){l=a*r;if(this.needsDecode)for(c=0;c<l;++c)e[c]=o[c]-1&255;else for(c=0;c<l;++c)e[c]=255&-o[c];return}this.needsDecode&&this.decodeBuffer(o);l=a*r;const h=255/((1<<i)-1);for(c=0;c<l;++c)e[c]=h*o[c]}createBitmap(e,t,a,r){const i=new OffscreenCanvas(t,a),n=i.getContext("2d");let s;if(e===v)s=new ImageData(r,t,a);else{s=n.createImageData(t,a);convertToRGBA({kind:e,src:r,dest:new Uint32Array(s.data.buffer),width:t,height:a,inverseDecode:this.needsDecode})}n.putImageData(s,0,0);return{data:null,width:t,height:a,bitmap:i.transferToImageBitmap(),interpolate:this.interpolate}}async#$(e,t){const a=await this.image.getTransferableImage();return a?{data:null,width:e,height:t,bitmap:a,interpolate:this.interpolate}:null}async getImageBytes(e,{drawWidth:t,drawHeight:a,forceRGBA:r=!1,forceRGB:i=!1,internal:n=!1}){this.image.reset();this.image.drawWidth=t||this.width;this.image.drawHeight=a||this.height;this.image.forceRGBA=!!r;this.image.forceRGB=!!i;const s=await this.image.getImageData(e,this.jpxDecoderOptions);if(n||this.image instanceof DecodeStream)return s;assert(s instanceof Uint8Array,\'PDFImage.getImageBytes: Unsupported "imageBytes" type.\');return new Uint8Array(s)}}const Bn=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,isOffscreenCanvasSupported:!1,isImageDecoderSupported:!1,canvasMaxAreaInBytes:-1,fontExtraProperties:!1,useSystemFonts:!0,useWasm:!0,useWorkerFetch:!0,cMapUrl:null,iccUrl:null,standardFontDataUrl:null,wasmUrl:null}),Rn=1,Nn=2,En=Promise.resolve();function normalizeBlendMode(e,t=!1){if(Array.isArray(e)){for(const t of e){const e=normalizeBlendMode(t,!0);if(e)return e}warn(`Unsupported blend mode Array: ${e}`);return"source-over"}if(!(e instanceof Name))return t?null:"source-over";switch(e.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}if(t)return null;warn(`Unsupported blend mode: ${e.name}`);return"source-over"}function addCachedImageOps(e,{objId:t,fn:a,args:r,optionalContent:i,hasMask:n}){t&&e.addDependency(t);e.addImageOps(a,r,i,n);a===Vt&&r[0]?.count>0&&r[0].count++}class TimeSlotManager{static TIME_SLOT_DURATION_MS=20;static CHECK_TIME_EVERY=100;constructor(){this.reset()}check(){if(++this.checked<TimeSlotManager.CHECK_TIME_EVERY)return!1;this.checked=0;return this.endTime<=Date.now()}reset(){this.endTime=Date.now()+TimeSlotManager.TIME_SLOT_DURATION_MS;this.checked=0}}class PartialEvaluator{constructor({xref:e,handler:t,pageIndex:a,idFactory:r,fontCache:i,builtInCMapCache:n,standardFontDataCache:s,globalColorSpaceCache:o,globalImageCache:c,systemFontCache:l,options:h=null}){this.xref=e;this.handler=t;this.pageIndex=a;this.idFactory=r;this.fontCache=i;this.builtInCMapCache=n;this.standardFontDataCache=s;this.globalColorSpaceCache=o;this.globalImageCache=c;this.systemFontCache=l;this.options=h||Bn;this.type3FontRefs=null;this._regionalImageCache=new RegionalImageCache;this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){return shadow(this,"_pdfFunctionFactory",new PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported}))}get parsingType3Font(){return!!this.type3FontRefs}clone(e=null){const t=Object.create(this);t.options=Object.assign(Object.create(null),this.options,e);return t}hasBlendModes(e,t){if(!(e instanceof Dict))return!1;if(e.objId&&t.has(e.objId))return!1;const a=new RefSet(t);e.objId&&a.put(e.objId);const r=[e],i=this.xref;for(;r.length;){const e=r.shift(),t=e.get("ExtGState");if(t instanceof Dict)for(let e of t.getRawValues()){if(e instanceof Ref){if(a.has(e))continue;try{e=i.fetch(e)}catch(t){a.put(e);info(`hasBlendModes - ignoring ExtGState: "${t}".`);continue}}if(!(e instanceof Dict))continue;e.objId&&a.put(e.objId);const t=e.get("BM");if(t instanceof Name){if("Normal"!==t.name)return!0}else if(void 0!==t&&Array.isArray(t))for(const e of t)if(e instanceof Name&&"Normal"!==e.name)return!0}const n=e.get("XObject");if(n instanceof Dict)for(let e of n.getRawValues()){if(e instanceof Ref){if(a.has(e))continue;try{e=i.fetch(e)}catch(t){a.put(e);info(`hasBlendModes - ignoring XObject: "${t}".`);continue}}if(!(e instanceof BaseStream))continue;e.dict.objId&&a.put(e.dict.objId);const t=e.dict.get("Resources");if(t instanceof Dict&&(!t.objId||!a.has(t.objId))){r.push(t);t.objId&&a.put(t.objId)}}}for(const e of a)t.put(e);return!1}async fetchBuiltInCMap(e){const t=this.builtInCMapCache.get(e);if(t)return t;let a;a=this.options.useWorkerFetch?{cMapData:await fetchBinaryData(`${this.options.cMapUrl}${e}.bcmap`),isCompressed:!0}:await this.handler.sendWithPromise("FetchBinaryData",{type:"cMapReaderFactory",name:e});this.builtInCMapCache.set(e,a);return a}async fetchStandardFontData(e){const t=this.standardFontDataCache.get(e);if(t)return new Stream(t);if(this.options.useSystemFonts&&"Symbol"!==e&&"ZapfDingbats"!==e)return null;const a=Yr()[e];let r;try{r=this.options.useWorkerFetch?await fetchBinaryData(`${this.options.standardFontDataUrl}${a}`):await this.handler.sendWithPromise("FetchBinaryData",{type:"standardFontDataFactory",filename:a})}catch(e){warn(e);return null}this.standardFontDataCache.set(e,r);return new Stream(r)}async buildFormXObject(e,t,a,r,i,n,s,o){const{dict:c}=t,l=lookupMatrix(c.getArray("Matrix"),null),h=lookupNormalRect(c.getArray("BBox"),null);let u,d;c.has("OC")&&(u=await this.parseMarkedContentProps(c.get("OC"),e));void 0!==u&&r.addOp(jt,["OC",u]);const f=c.get("Group");if(f){d={matrix:l,bbox:h,smask:a,isolated:!1,knockout:!1};let t=null;if(isName(f.get("S"),"Transparency")){d.isolated=f.get("I")||!1;d.knockout=f.get("K")||!1;if(f.has("CS")){const a=this._getColorSpace(f.getRaw("CS"),e,s);t=a instanceof ColorSpace?a:await this._handleColorSpace(a)}}if(a?.backdrop){t||=ColorSpaceUtils.rgb;a.backdrop=t.getRgbHex(a.backdrop,0)}r.addOp(Wt,[d])}const g=[l&&new Float32Array(l),!f&&h&&new Float32Array(h)||null];r.addOp(qt,g);const p=c.get("Resources");await this.getOperatorList({stream:t,task:i,resources:p instanceof Dict?p:e,operatorList:r,initialState:n,prevRefs:o});r.addOp(Ht,[]);f&&r.addOp(zt,[d]);void 0!==u&&r.addOp(_t,[])}_sendImgData(e,t,a=!1){const r=t?[t.bitmap||t.data.buffer]:null;return this.parsingType3Font||a?this.handler.send("commonobj",[e,"Image",t],r):this.handler.send("obj",[e,this.pageIndex,"Image",t],r)}async buildPaintImageXObject({resources:e,image:t,isInline:a=!1,operatorList:r,cacheKey:i,localImageCache:n,localColorSpaceCache:s}){const{maxImageSize:o,ignoreErrors:c,isOffscreenCanvasSupported:l}=this.options,{dict:h}=t,u=h.objId,d=h.get("W","Width"),f=h.get("H","Height");if(!d||"number"!=typeof d||!f||"number"!=typeof f){warn("Image dimensions are missing, or not numbers.");return}if(-1!==o&&d*f>o){const e="Image exceeded maximum allowed size and was removed.";if(!c)throw new Error(e);warn(e);return}let g;h.has("OC")&&(g=await this.parseMarkedContentProps(h.get("OC"),e));let p,m,b;if(h.get("IM","ImageMask")||!1){p=await PDFImage.createMask({image:t,isOffscreenCanvasSupported:l&&!this.parsingType3Font});if(p.isSingleOpaquePixel){m=ta;b=[];r.addImageOps(m,b,g);if(i){const e={fn:m,args:b,optionalContent:g};n.set(i,u,e);u&&this._regionalImageCache.set(null,u,e)}return}if(this.parsingType3Font){b=function compileType3Glyph({data:e,width:t,height:a}){if(t>1e3||a>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=t+1,n=new Uint8Array(i*(a+1));let s,o,c;const l=t+7&-8,h=new Uint8Array(l*a);let u=0;for(const t of e){let e=128;for(;e>0;){h[u++]=t&e?0:255;e>>=1}}let d=0;u=0;if(0!==h[u]){n[0]=1;++d}for(o=1;o<t;o++){if(h[u]!==h[u+1]){n[o]=h[u]?2:1;++d}u++}if(0!==h[u]){n[o]=2;++d}for(s=1;s<a;s++){u=s*l;c=s*i;if(h[u-l]!==h[u]){n[c]=h[u]?1:8;++d}let e=(h[u]?4:0)+(h[u-l]?8:0);for(o=1;o<t;o++){e=(e>>2)+(h[u+1]?4:0)+(h[u-l+1]?8:0);if(r[e]){n[c+o]=r[e];++d}u++}if(h[u-l]!==h[u]){n[c+o]=h[u]?2:4;++d}if(d>1e3)return null}u=l*(a-1);c=s*i;if(0!==h[u]){n[c]=8;++d}for(o=1;o<t;o++){if(h[u]!==h[u+1]){n[c+o]=h[u]?4:8;++d}u++}if(0!==h[u]){n[c+o]=4;++d}if(d>1e3)return null;const f=new Int32Array([0,i,-1,0,-i,0,0,0,1]),g=[],{a:p,b:m,c:b,d:y,e:w,f:x}=(new DOMMatrix).scaleSelf(1/t,-1/a).translateSelf(0,-a);for(s=0;d&&s<=a;s++){let e=s*i;const a=e+t;for(;e<a&&!n[e];)e++;if(e===a)continue;let r=e%i,o=s;g.push(sa,p*r+b*o+w,m*r+y*o+x);const c=e;let l=n[e];do{const t=f[l];do{e+=t}while(!n[e]);const a=n[e];if(5!==a&&10!==a){l=a;n[e]=0}else{l=a&51*l>>4;n[e]&=l>>2|l<<2}r=e%i;o=e/i|0;g.push(oa,p*r+b*o+w,m*r+y*o+x);n[e]||--d}while(c!==e);--s}return[na,[new Float32Array(g)],new Float32Array([0,0,t,a])]}(p);if(b){r.addImageOps(aa,b,g);return}warn("Cannot compile Type3 glyph.");r.addImageOps(Vt,[p],g);return}const e=`mask_${this.idFactory.createObjId()}`;r.addDependency(e);p.dataLen=p.bitmap?p.width*p.height*4:p.data.length;this._sendImgData(e,p);m=Vt;b=[{data:e,width:p.width,height:p.height,interpolate:p.interpolate,count:1}];r.addImageOps(m,b,g);if(i){const t={objId:e,fn:m,args:b,optionalContent:g};n.set(i,u,t);u&&this._regionalImageCache.set(null,u,t)}return}const y=h.has("SMask")||h.has("Mask");if(a&&d+f<200&&!y){try{const i=new PDFImage({xref:this.xref,res:e,image:t,isInline:a,pdfFunctionFactory:this._pdfFunctionFactory,globalColorSpaceCache:this.globalColorSpaceCache,localColorSpaceCache:s});p=await i.createImageData(!0,!1);r.addImageOps(Yt,[p],g)}catch(e){const t=`Unable to decode inline image: "${e}".`;if(!c)throw new Error(t);warn(t)}return}let w=`img_${this.idFactory.createObjId()}`,x=!1,S=null;if(this.parsingType3Font)w=`${this.idFactory.getDocId()}_type3_${w}`;else if(i&&u){x=this.globalImageCache.shouldCache(u,this.pageIndex);if(x){assert(!a,"Cannot cache an inline image globally.");w=`${this.idFactory.getDocId()}_${w}`}}r.addDependency(w);m=Jt;b=[w,d,f];r.addImageOps(m,b,g,y);if(x){S={objId:w,fn:m,args:b,optionalContent:g,hasMask:y,byteSize:0};if(this.globalImageCache.hasDecodeFailed(u)){this.globalImageCache.setData(u,S);this._sendImgData(w,null,x);return}if(d*f>25e4||y){const e=await this.handler.sendWithPromise("commonobj",[w,"CopyLocalImage",{imageRef:u}]);if(e){this.globalImageCache.setData(u,S);this.globalImageCache.addByteSize(u,e);return}}}PDFImage.buildImage({xref:this.xref,res:e,image:t,isInline:a,pdfFunctionFactory:this._pdfFunctionFactory,globalColorSpaceCache:this.globalColorSpaceCache,localColorSpaceCache:s}).then((async e=>{p=await e.createImageData(!1,l);p.dataLen=p.bitmap?p.width*p.height*4:p.data.length;p.ref=u;x&&this.globalImageCache.addByteSize(u,p.dataLen);return this._sendImgData(w,p,x)})).catch((e=>{warn(`Unable to decode image "${w}": "${e}".`);u&&this.globalImageCache.addDecodeFailed(u);return this._sendImgData(w,null,x)}));if(i){const e={objId:w,fn:m,args:b,optionalContent:g,hasMask:y};n.set(i,u,e);if(u){this._regionalImageCache.set(null,u,e);if(x){assert(S,"The global cache-data must be available.");this.globalImageCache.setData(u,S)}}}}handleSMask(e,t,a,r,i,n,s){const o=e.get("G"),c={subtype:e.get("S").name,backdrop:e.get("BC")},l=e.get("TR");if(isPDFFunction(l)){const e=this._pdfFunctionFactory.create(l),t=new Uint8Array(256),a=new Float32Array(1);for(let r=0;r<256;r++){a[0]=r/255;e(a,0,a,0);t[r]=255*a[0]|0}c.transferMap=t}return this.buildFormXObject(t,o,c,a,r,i.state.clone({newPath:!0}),n,s)}handleTransferFunction(e){let t;if(Array.isArray(e))t=e;else{if(!isPDFFunction(e))return null;t=[e]}const a=[];let r=0,i=0;for(const e of t){const t=this.xref.fetchIfRef(e);r++;if(isName(t,"Identity")){a.push(null);continue}if(!isPDFFunction(t))return null;const n=this._pdfFunctionFactory.create(t),s=new Uint8Array(256),o=new Float32Array(1);for(let e=0;e<256;e++){o[0]=e/255;n(o,0,o,0);s[e]=255*o[0]|0}a.push(s);i++}return 1!==r&&4!==r||0===i?null:a}handleTilingType(e,t,a,r,i,n,s,o){const c=new OperatorList,l=Dict.merge({xref:this.xref,dictArray:[i.get("Resources"),a]});return this.getOperatorList({stream:r,task:s,resources:l,operatorList:c}).then((function(){const a=c.getIR(),r=getTilingPatternIR(a,i,t);n.addDependencies(c.dependencies);n.addOp(e,r);i.objId&&o.set(null,i.objId,{operatorListIR:a,dict:i})})).catch((e=>{if(!(e instanceof AbortException)){if(!this.options.ignoreErrors)throw e;warn(`handleTilingType - ignoring pattern: "${e}".`)}}))}async handleSetFont(e,t,a,r,i,n,s=null,o=null){const c=t?.[0]instanceof Name?t[0].name:null,l=await this.loadFont(c,a,e,i,s,o);l.font.isType3Font&&r.addDependencies(l.type3Dependencies);n.font=l.font;l.send(this.handler);return l.loadedName}handleText(e,t){const a=t.font,r=a.charsToGlyphs(e);if(a.data){(!!(t.textRenderingMode&S)||"Pattern"===t.fillColorSpace.name||a.disableFontFace)&&PartialEvaluator.buildFontPaths(a,r,this.handler,this.options)}return r}ensureStateFont(e){if(e.font)return;const t=new FormatError("Missing setFont (Tf) operator before text rendering operator.");if(!this.options.ignoreErrors)throw t;warn(`ensureStateFont: "${t}".`)}async setGState({resources:e,gState:t,operatorList:a,cacheKey:r,task:i,stateManager:n,localGStateCache:s,localColorSpaceCache:o,seenRefs:c}){const l=t.objId;let h=!0;const u=[];let d=Promise.resolve();for(const[r,s]of t)switch(r){case"Type":break;case"LW":if("number"!=typeof s){warn(`Invalid LW (line width): ${s}`);break}u.push([r,Math.abs(s)]);break;case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":u.push([r,s]);break;case"Font":h=!1;d=d.then((()=>this.handleSetFont(e,null,s[0],a,i,n.state).then((function(e){a.addDependency(e);u.push([r,[e,s[1]]])}))));break;case"BM":u.push([r,normalizeBlendMode(s)]);break;case"SMask":if(isName(s,"None")){u.push([r,!1]);break}if(s instanceof Dict){h=!1;d=d.then((()=>this.handleSMask(s,e,a,i,n,o,c)));u.push([r,!0])}else warn("Unsupported SMask type");break;case"TR":const t=this.handleTransferFunction(s);u.push([r,t]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":info("graphic state operator "+r);break;default:info("Unknown graphic state operator "+r)}await d;u.length>0&&a.addOp(De,[u]);h&&s.set(r,l,u)}loadFont(e,t,a,r,i=null,n=null){const errorFont=async()=>new TranslatedFont({loadedName:"g_font_error",font:new ErrorFont(`Font "${e}" is not available.`),dict:t});let s;if(t)t instanceof Ref&&(s=t);else{const t=a.get("Font");t&&(s=t.getRaw(e))}if(s){if(this.type3FontRefs?.has(s))return errorFont();if(this.fontCache.has(s))return this.fontCache.get(s);try{t=this.xref.fetchIfRef(s)}catch(e){warn(`loadFont - lookup failed: "${e}".`)}}if(!(t instanceof Dict)){if(!this.options.ignoreErrors&&!this.parsingType3Font){warn(`Font "${e}" is not available.`);return errorFont()}warn(`Font "${e}" is not available -- attempting to fallback to a default font.`);t=i||PartialEvaluator.fallbackFontDict}if(t.cacheKey&&this.fontCache.has(t.cacheKey))return this.fontCache.get(t.cacheKey);const{promise:o,resolve:c}=Promise.withResolvers();let l;try{l=this.preEvaluateFont(t);l.cssFontInfo=n}catch(e){warn(`loadFont - preEvaluateFont failed: "${e}".`);return errorFont()}const{descriptor:h,hash:u}=l,d=s instanceof Ref;let f;if(u&&h instanceof Dict){const e=h.fontAliases||=Object.create(null);if(e[u]){const t=e[u].aliasRef;if(d&&t&&this.fontCache.has(t)){this.fontCache.putAlias(s,t);return this.fontCache.get(s)}}else e[u]={fontID:this.idFactory.createFontId()};d&&(e[u].aliasRef=s);f=e[u].fontID}else f=this.idFactory.createFontId();assert(f?.startsWith("f"),\'The "fontID" must be (correctly) defined.\');if(d)this.fontCache.put(s,o);else{t.cacheKey=`cacheKey_${f}`;this.fontCache.put(t.cacheKey,o)}t.loadedName=`${this.idFactory.getDocId()}_${f}`;this.translateFont(l).then((async e=>{const i=new TranslatedFont({loadedName:t.loadedName,font:e,dict:t});if(e.isType3Font)try{await i.loadType3Data(this,a,r)}catch(e){throw new Error(`Type3 font load error: ${e}`)}c(i)})).catch((e=>{warn(`loadFont - translateFont failed: "${e}".`);c(new TranslatedFont({loadedName:t.loadedName,font:new ErrorFont(e?.message),dict:t}))}));return o}buildPath(e,t,a){const{pathMinMax:r,pathBuffer:i}=a;switch(0|e){case Xe:{const e=a.currentPointX=t[0],n=a.currentPointY=t[1],s=t[2],o=t[3],c=e+s,l=n+o;0===s||0===o?i.push(sa,e,n,oa,c,l,la):i.push(sa,e,n,oa,c,n,oa,c,l,oa,e,l,la);Util.rectBoundingBox(e,n,c,l,r);break}case Ee:{const e=a.currentPointX=t[0],n=a.currentPointY=t[1];i.push(sa,e,n);Util.pointBoundingBox(e,n,r);break}case Pe:{const e=a.currentPointX=t[0],n=a.currentPointY=t[1];i.push(oa,e,n);Util.pointBoundingBox(e,n,r);break}case Le:{const e=a.currentPointX,n=a.currentPointY,[s,o,c,l,h,u]=t;a.currentPointX=h;a.currentPointY=u;i.push(ca,s,o,c,l,h,u);Util.bezierBoundingBox(e,n,s,o,c,l,h,u,r);break}case je:{const e=a.currentPointX,n=a.currentPointY,[s,o,c,l]=t;a.currentPointX=c;a.currentPointY=l;i.push(ca,e,n,s,o,c,l);Util.bezierBoundingBox(e,n,e,n,s,o,c,l,r);break}case _e:{const e=a.currentPointX,n=a.currentPointY,[s,o,c,l]=t;a.currentPointX=c;a.currentPointY=l;i.push(ca,s,o,c,l,c,l);Util.bezierBoundingBox(e,n,s,o,c,l,c,l,r);break}case Ue:i.push(la)}}_getColorSpace(e,t,a){return ColorSpaceUtils.parse({cs:e,xref:this.xref,resources:t,pdfFunctionFactory:this._pdfFunctionFactory,globalColorSpaceCache:this.globalColorSpaceCache,localColorSpaceCache:a,asyncIfNotCached:!0})}async _handleColorSpace(e){try{return await e}catch(e){if(e instanceof AbortException)return null;if(this.options.ignoreErrors){warn(`_handleColorSpace - ignoring ColorSpace: "${e}".`);return null}throw e}}parseShading({shading:e,resources:t,localColorSpaceCache:a,localShadingPatternCache:r}){let i,n=r.get(e);if(n)return n;try{i=Pattern.parseShading(e,this.xref,t,this._pdfFunctionFactory,this.globalColorSpaceCache,a).getIR()}catch(t){if(t instanceof AbortException)return null;if(this.options.ignoreErrors){warn(`parseShading - ignoring shading: "${t}".`);r.set(e,null);return null}throw t}n=`pattern_${this.idFactory.createObjId()}`;this.parsingType3Font&&(n=`${this.idFactory.getDocId()}_type3_${n}`);r.set(e,n);this.parsingType3Font?this.handler.send("commonobj",[n,"Pattern",i]):this.handler.send("obj",[n,this.pageIndex,"Pattern",i]);return n}handleColorN(e,t,a,r,i,n,s,o,c,l){const h=a.pop();if(h instanceof Name){const u=i.getRaw(h.name),d=u instanceof Ref&&c.getByRef(u);if(d)try{const i=r.base?r.base.getRgbHex(a,0):null,n=getTilingPatternIR(d.operatorListIR,d.dict,i);e.addOp(t,n);return}catch{}const f=this.xref.fetchIfRef(u);if(f){const i=f instanceof BaseStream?f.dict:f,h=i.get("PatternType");if(h===Rn){const o=r.base?r.base.getRgbHex(a,0):null;return this.handleTilingType(t,o,n,f,i,e,s,c)}if(h===Nn){const a=i.get("Shading"),r=this.parseShading({shading:a,resources:n,localColorSpaceCache:o,localShadingPatternCache:l});if(r){const a=lookupMatrix(i.getArray("Matrix"),null);e.addOp(t,["Shading",r,a])}return}throw new FormatError(`Unknown PatternType: ${h}`)}}throw new FormatError(`Unknown PatternName: ${h}`)}_parseVisibilityExpression(e,t,a){if(++t>10){warn("Visibility expression is too deeply nested");return}const r=e.length,i=this.xref.fetchIfRef(e[0]);if(!(r<2)&&i instanceof Name){switch(i.name){case"And":case"Or":case"Not":a.push(i.name);break;default:warn(`Invalid operator ${i.name} in visibility expression`);return}for(let i=1;i<r;i++){const r=e[i],n=this.xref.fetchIfRef(r);if(Array.isArray(n)){const e=[];a.push(e);this._parseVisibilityExpression(n,t,e)}else r instanceof Ref&&a.push(r.toString())}}else warn("Invalid visibility expression")}async parseMarkedContentProps(e,t){let a;if(e instanceof Name){a=t.get("Properties").get(e.name)}else{if(!(e instanceof Dict))throw new FormatError("Optional content properties malformed.");a=e}const r=a.get("Type")?.name;if("OCG"===r)return{type:r,id:a.objId};if("OCMD"===r){const e=a.get("VE");if(Array.isArray(e)){const t=[];this._parseVisibilityExpression(e,0,t);if(t.length>0)return{type:"OCMD",expression:t}}const t=a.get("OCGs");if(Array.isArray(t)||t instanceof Dict){const e=[];if(Array.isArray(t))for(const a of t)e.push(a.toString());else e.push(t.objId);return{type:r,ids:e,policy:a.get("P")instanceof Name?a.get("P").name:null,expression:null}}if(t instanceof Ref)return{type:r,id:t.toString()}}return null}getOperatorList({stream:e,task:t,resources:a,operatorList:r,initialState:i=null,fallbackFontDict:n=null,prevRefs:s=null}){const o=e.dict?.objId,c=new RefSet(s);if(o){if(s?.has(o))throw new Error(`getOperatorList - ignoring circular reference: ${o}`);c.put(o)}a||=Dict.empty;i||=new EvalState;if(!r)throw new Error(\'getOperatorList: missing "operatorList" parameter\');const l=this,h=this.xref,u=new LocalImageCache,d=new LocalColorSpaceCache,f=new LocalGStateCache,g=new LocalTilingPatternCache,p=new Map,m=a.get("XObject")||Dict.empty,b=a.get("Pattern")||Dict.empty,y=new StateManager(i),w=new EvaluatorPreprocessor(e,h,y),x=new TimeSlotManager;function closePendingRestoreOPS(e){for(let e=0,t=w.savedStatesDepth;e<t;e++)r.addOp(Re,[])}return new Promise((function promiseBody(e,i){const next=function(t){Promise.all([t,r.ready]).then((function(){try{promiseBody(e,i)}catch(e){i(e)}}),i)};t.ensureNotTerminated();x.reset();const s={};let o,S,k,C,v,F;for(;!(o=x.check());){s.args=null;if(!w.read(s))break;let e=s.args,i=s.fn;switch(0|i){case Nt:F=e[0]instanceof Name;v=e[0].name;if(F){const t=u.getByName(v);if(t){addCachedImageOps(r,t);e=null;continue}}next(new Promise((function(e,i){if(!F)throw new FormatError("XObject must be referred to by name.");let n=m.getRaw(v);if(n instanceof Ref){const t=u.getByRef(n)||l._regionalImageCache.getByRef(n)||l.globalImageCache.getData(n,l.pageIndex);if(t){addCachedImageOps(r,t);e();return}n=h.fetch(n)}if(!(n instanceof BaseStream))throw new FormatError("XObject should be a stream");const s=n.dict.get("Subtype");if(!(s instanceof Name))throw new FormatError("XObject should have a Name subtype");if("Form"!==s.name)if("Image"!==s.name){if("PS"!==s.name)throw new FormatError(`Unhandled XObject subtype ${s.name}`);info("Ignored XObject subtype PS");e()}else l.buildPaintImageXObject({resources:a,image:n,operatorList:r,cacheKey:v,localImageCache:u,localColorSpaceCache:d}).then(e,i);else{y.save();l.buildFormXObject(a,n,null,r,t,y.state.clone({newPath:!0}),d,c).then((function(){y.restore();e()}),i)}})).catch((function(e){if(!(e instanceof AbortException)){if(!l.options.ignoreErrors)throw e;warn(`getOperatorList - ignoring XObject: "${e}".`)}})));return;case nt:const s=e[1];next(l.handleSetFont(a,e,null,r,t,y.state,n).then((function(e){r.addDependency(e);r.addOp(nt,[e,s])})));return;case Rt:const o=e[0].cacheKey;if(o){const t=u.getByName(o);if(t){addCachedImageOps(r,t);e=null;continue}}next(l.buildPaintImageXObject({resources:a,image:e[0],isInline:!0,operatorList:r,cacheKey:o,localImageCache:u,localColorSpaceCache:d}));return;case dt:if(!y.state.font){l.ensureStateFont(y.state);continue}e[0]=l.handleText(e[0],y.state);break;case ft:if(!y.state.font){l.ensureStateFont(y.state);continue}const w=[],x=y.state;for(const t of e[0])"string"==typeof t?w.push(...l.handleText(t,x)):"number"==typeof t&&w.push(t);e[0]=w;i=dt;break;case gt:if(!y.state.font){l.ensureStateFont(y.state);continue}r.addOp(ut);e[0]=l.handleText(e[0],y.state);i=dt;break;case pt:if(!y.state.font){l.ensureStateFont(y.state);continue}r.addOp(ut);r.addOp(at,[e.shift()]);r.addOp(tt,[e.shift()]);e[0]=l.handleText(e[0],y.state);i=dt;break;case st:y.state.textRenderingMode=e[0];break;case wt:{const t=l._getColorSpace(e[0],a,d);if(t instanceof ColorSpace){y.state.fillColorSpace=t;continue}next(l._handleColorSpace(t).then((e=>{y.state.fillColorSpace=e||ColorSpaceUtils.gray})));return}case yt:{const t=l._getColorSpace(e[0],a,d);if(t instanceof ColorSpace){y.state.strokeColorSpace=t;continue}next(l._handleColorSpace(t).then((e=>{y.state.strokeColorSpace=e||ColorSpaceUtils.gray})));return}case At:C=y.state.fillColorSpace;e=[C.getRgbHex(e,0)];i=It;break;case xt:C=y.state.strokeColorSpace;e=[C.getRgbHex(e,0)];i=Ft;break;case vt:y.state.fillColorSpace=ColorSpaceUtils.gray;e=[ColorSpaceUtils.gray.getRgbHex(e,0)];i=It;break;case Ct:y.state.strokeColorSpace=ColorSpaceUtils.gray;e=[ColorSpaceUtils.gray.getRgbHex(e,0)];i=Ft;break;case Ot:y.state.fillColorSpace=ColorSpaceUtils.cmyk;e=[ColorSpaceUtils.cmyk.getRgbHex(e,0)];i=It;break;case Tt:y.state.strokeColorSpace=ColorSpaceUtils.cmyk;e=[ColorSpaceUtils.cmyk.getRgbHex(e,0)];i=Ft;break;case It:y.state.fillColorSpace=ColorSpaceUtils.rgb;e=[ColorSpaceUtils.rgb.getRgbHex(e,0)];break;case Ft:y.state.strokeColorSpace=ColorSpaceUtils.rgb;e=[ColorSpaceUtils.rgb.getRgbHex(e,0)];break;case kt:C=y.state.patternFillColorSpace;if(!C){if(isNumberArray(e,null)){e=[ColorSpaceUtils.gray.getRgbHex(e,0)];i=It;break}e=[];i=ia;break}if("Pattern"===C.name){next(l.handleColorN(r,kt,e,C,b,a,t,d,g,p));return}e=[C.getRgbHex(e,0)];i=It;break;case St:C=y.state.patternStrokeColorSpace;if(!C){if(isNumberArray(e,null)){e=[ColorSpaceUtils.gray.getRgbHex(e,0)];i=Ft;break}e=[];i=ra;break}if("Pattern"===C.name){next(l.handleColorN(r,St,e,C,b,a,t,d,g,p));return}e=[C.getRgbHex(e,0)];i=Ft;break;case Mt:let T;try{const t=a.get("Shading");if(!t)throw new FormatError("No shading resource found");T=t.get(e[0].name);if(!T)throw new FormatError("No shading object found")}catch(e){if(e instanceof AbortException)continue;if(l.options.ignoreErrors){warn(`getOperatorList - ignoring Shading: "${e}".`);continue}throw e}const O=l.parseShading({shading:T,resources:a,localColorSpaceCache:d,localShadingPatternCache:p});if(!O)continue;e=[O];i=Mt;break;case De:F=e[0]instanceof Name;v=e[0].name;if(F){const t=f.getByName(v);if(t){t.length>0&&r.addOp(De,[t]);e=null;continue}}next(new Promise((function(e,i){if(!F)throw new FormatError("GState must be referred to by name.");const n=a.get("ExtGState");if(!(n instanceof Dict))throw new FormatError("ExtGState should be a dictionary.");const s=n.get(v);if(!(s instanceof Dict))throw new FormatError("GState should be a dictionary.");l.setGState({resources:a,gState:s,operatorList:r,cacheKey:v,task:t,stateManager:y,localGStateCache:f,localColorSpaceCache:d,seenRefs:c}).then(e,i)})).catch((function(e){if(!(e instanceof AbortException)){if(!l.options.ignoreErrors)throw e;warn(`getOperatorList - ignoring ExtGState: "${e}".`)}})));return;case Ce:{const[t]=e;if("number"!=typeof t){warn(`Invalid setLineWidth: ${t}`);continue}e[0]=Math.abs(t);break}case Ee:case Pe:case Le:case je:case _e:case Ue:case Xe:l.buildPath(i,e,y.state);continue;case qe:case He:case We:case ze:case $e:case Ge:case Ve:case Ke:case Je:{const{state:{pathBuffer:e,pathMinMax:t}}=y;i!==He&&i!==Ve&&i!==Ke||e.push(la);if(0===e.length)r.addOp(aa,[i,[null],null]);else{r.addOp(aa,[i,[new Float32Array(e)],t.slice()]);e.length=0;t.set([1/0,1/0,-1/0,-1/0],0)}continue}case ht:r.addOp(i,[new Float32Array(e)]);continue;case Et:case Pt:case Ut:case Xt:continue;case jt:if(!(e[0]instanceof Name)){warn(`Expected name for beginMarkedContentProps arg0=${e[0]}`);r.addOp(jt,["OC",null]);continue}if("OC"===e[0].name){next(l.parseMarkedContentProps(e[1],a).then((e=>{r.addOp(jt,["OC",e])})).catch((e=>{if(!(e instanceof AbortException)){if(!l.options.ignoreErrors)throw e;warn(`getOperatorList - ignoring beginMarkedContentProps: "${e}".`);r.addOp(jt,["OC",null])}})));return}e=[e[0].name,e[1]instanceof Dict?e[1].get("MCID"):null];break;default:if(null!==e){for(S=0,k=e.length;S<k&&!(e[S]instanceof Dict);S++);if(S<k){warn("getOperatorList - ignoring operator: "+i);continue}}}r.addOp(i,e)}if(o)next(En);else{closePendingRestoreOPS();e()}})).catch((e=>{if(!(e instanceof AbortException)){if(!this.options.ignoreErrors)throw e;warn(`getOperatorList - ignoring errors during "${t.name}" task: "${e}".`);closePendingRestoreOPS()}}))}getTextContent({stream:e,task:a,resources:r,stateManager:i=null,includeMarkedContent:n=!1,sink:s,seenStyles:o=new Set,viewBox:c,lang:l=null,markedContentData:h=null,disableNormalization:u=!1,keepWhiteSpace:d=!1,prevRefs:f=null,intersector:g=null}){const p=e.dict?.objId,m=new RefSet(f);if(p){if(f?.has(p))throw new Error(`getTextContent - ignoring circular reference: ${p}`);m.put(p)}r||=Dict.empty;i||=new StateManager(new TextState);n&&(h||={level:0});const b={items:[],styles:Object.create(null),lang:l},y={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},w=[" "," "];let x=0;function saveLastChar(e){const t=(x+1)%2,a=" "!==w[x]&&" "===w[t];w[x]=e;x=t;return!d&&a}function shouldAddWhitepsace(){return!d&&" "!==w[x]&&" "===w[(x+1)%2]}function resetLastChars(){w[0]=w[1]=" ";x=0}const S=this,k=this.xref,C=[];let v=null;const F=new LocalImageCache,T=new LocalGStateCache,O=new EvaluatorPreprocessor(e,k,i);let M;function pushWhitespace({width:e=0,height:t=0,transform:a=y.prevTransform,fontName:r=y.fontName}){g?.addExtraChar(" ");b.items.push({str:" ",dir:"ltr",width:e,height:t,transform:a,fontName:r,hasEOL:!1})}function getCurrentTextTransform(){const e=M.font,a=[M.fontSize*M.textHScale,0,0,M.fontSize,0,M.textRise];if(e.isType3Font&&(M.fontSize<=1||e.isCharBBox)&&!isArrayEqual(M.fontMatrix,t)){const t=e.bbox[3]-e.bbox[1];t>0&&(a[3]*=t*M.fontMatrix[3])}return Util.transform(M.ctm,Util.transform(M.textMatrix,a))}function ensureTextContentItem(){if(y.initialized)return y;const{font:e,loadedName:t}=M;if(!o.has(t)){o.add(t);b.styles[t]={fontFamily:e.fallbackName,ascent:e.ascent,descent:e.descent,vertical:e.vertical};if(S.options.fontExtraProperties&&e.systemFontInfo){const a=b.styles[t];a.fontSubstitution=e.systemFontInfo.css;a.fontSubstitutionLoadedName=e.systemFontInfo.loadedName}}y.fontName=t;const a=y.transform=getCurrentTextTransform();if(e.vertical){y.width=y.totalWidth=Math.hypot(a[0],a[1]);y.height=y.totalHeight=0;y.vertical=!0}else{y.width=y.totalWidth=0;y.height=y.totalHeight=Math.hypot(a[2],a[3]);y.vertical=!1}const r=Math.hypot(M.textLineMatrix[0],M.textLineMatrix[1]),i=Math.hypot(M.ctm[0],M.ctm[1]);y.textAdvanceScale=i*r;const{fontSize:n}=M;y.trackingSpaceMin=.102*n;y.notASpace=.03*n;y.negativeSpaceMax=-.2*n;y.spaceInFlowMin=.102*n;y.spaceInFlowMax=.6*n;y.hasEOL=!1;y.initialized=!0;return y}function updateAdvanceScale(){if(!y.initialized)return;const e=Math.hypot(M.textLineMatrix[0],M.textLineMatrix[1]),t=Math.hypot(M.ctm[0],M.ctm[1])*e;if(t!==y.textAdvanceScale){if(y.vertical){y.totalHeight+=y.height*y.textAdvanceScale;y.height=0}else{y.totalWidth+=y.width*y.textAdvanceScale;y.width=0}y.textAdvanceScale=t}}function runBidiTransform(e){let t=e.str.join("");u||(t=function normalizeUnicode(e){if(!ma){ma=/([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;ba=new Map([["ï¬","Å¿t"]])}return e.replaceAll(ma,((e,t,a)=>t?t.normalize("NFKC"):ba.get(a)))}(t));const a=bidi(t,-1,e.vertical);return{str:a.str,dir:a.dir,width:Math.abs(e.totalWidth),height:Math.abs(e.totalHeight),transform:e.transform,fontName:e.fontName,hasEOL:e.hasEOL}}async function handleSetFont(e,i){const n=await S.loadFont(e,i,r,a);M.loadedName=n.loadedName;M.font=n.font;M.fontMatrix=n.font.fontMatrix||t}function applyInverseRotation(e,t,a){const r=Math.hypot(a[0],a[1]);return[(a[0]*e+a[1]*t)/r,(a[2]*e+a[3]*t)/r]}function compareWithLastPosition(e){const t=getCurrentTextTransform();let a=t[4],r=t[5];if(M.font?.vertical){if(a<c[0]||a>c[2]||r+e<c[1]||r>c[3])return!1}else if(a+e<c[0]||a>c[2]||r<c[1]||r>c[3])return!1;if(!M.font||!y.prevTransform)return!0;let i=y.prevTransform[4],n=y.prevTransform[5];if(i===a&&n===r)return!0;let s=-1;t[0]&&0===t[1]&&0===t[2]?s=t[0]>0?0:180:t[1]&&0===t[0]&&0===t[3]&&(s=t[1]>0?90:270);switch(s){case 0:break;case 90:[a,r]=[r,a];[i,n]=[n,i];break;case 180:[a,r,i,n]=[-a,-r,-i,-n];break;case 270:[a,r]=[-r,-a];[i,n]=[-n,-i];break;default:[a,r]=applyInverseRotation(a,r,t);[i,n]=applyInverseRotation(i,n,y.prevTransform)}if(M.font.vertical){const e=(n-r)/y.textAdvanceScale,t=a-i,s=Math.sign(y.height);if(e<s*y.negativeSpaceMax){if(Math.abs(t)>.5*y.width){appendEOL();return!0}resetLastChars();flushTextContentItem();return!0}if(Math.abs(t)>y.width){appendEOL();return!0}e<=s*y.notASpace&&resetLastChars();if(e<=s*y.trackingSpaceMin)if(shouldAddWhitepsace()){resetLastChars();flushTextContentItem();pushWhitespace({height:Math.abs(e)})}else y.height+=e;else if(!addFakeSpaces(e,y.prevTransform,s))if(0===y.str.length){resetLastChars();pushWhitespace({height:Math.abs(e)})}else y.height+=e;Math.abs(t)>.25*y.width&&flushTextContentItem();return!0}const o=(a-i)/y.textAdvanceScale,l=r-n,h=Math.sign(y.width);if(o<h*y.negativeSpaceMax){if(Math.abs(l)>.5*y.height){appendEOL();return!0}resetLastChars();flushTextContentItem();return!0}if(Math.abs(l)>y.height){appendEOL();return!0}o<=h*y.notASpace&&resetLastChars();if(o<=h*y.trackingSpaceMin)if(shouldAddWhitepsace()){resetLastChars();flushTextContentItem();pushWhitespace({width:Math.abs(o)})}else y.width+=o;else if(!addFakeSpaces(o,y.prevTransform,h))if(0===y.str.length){resetLastChars();pushWhitespace({width:Math.abs(o)})}else y.width+=o;Math.abs(l)>.25*y.height&&flushTextContentItem();return!0}function buildTextContentItem({chars:e,extraSpacing:t}){const a=M.font;if(!e){const e=M.charSpacing+t;e&&(a.vertical?M.translateTextMatrix(0,-e):M.translateTextMatrix(e*M.textHScale,0));d&&compareWithLastPosition(0);return}const r=a.charsToGlyphs(e),i=M.fontMatrix[0]*M.fontSize;for(let e=0,n=r.length;e<n;e++){const s=r[e],{category:o}=s;if(o.isInvisibleFormatMark)continue;let c=M.charSpacing+(e+1===n?t:0),l=s.width;a.vertical&&(l=s.vmetric?s.vmetric[0]:-l);let h=l*i;if(!d&&o.isWhitespace){if(a.vertical){c+=-h+M.wordSpacing;M.translateTextMatrix(0,-c)}else{c+=h+M.wordSpacing;M.translateTextMatrix(c*M.textHScale,0)}saveLastChar(" ");continue}if(!o.isZeroWidthDiacritic&&!compareWithLastPosition(h)){a.vertical?M.translateTextMatrix(0,h):M.translateTextMatrix(h*M.textHScale,0);continue}const u=ensureTextContentItem();o.isZeroWidthDiacritic&&(h=0);if(a.vertical){g?.addGlyph(getCurrentTextTransform(),0,h,s.unicode);M.translateTextMatrix(0,h);h=Math.abs(h);u.height+=h}else{h*=M.textHScale;g?.addGlyph(getCurrentTextTransform(),h,0,s.unicode);M.translateTextMatrix(h,0);u.width+=h}h&&(u.prevTransform=getCurrentTextTransform());const f=s.unicode;if(saveLastChar(f)){u.str.push(" ");g?.addExtraChar(" ")}g||u.str.push(f);c&&(a.vertical?M.translateTextMatrix(0,-c):M.translateTextMatrix(c*M.textHScale,0))}}function appendEOL(){g?.addExtraChar("\\n");resetLastChars();if(y.initialized){y.hasEOL=!0;flushTextContentItem()}else b.items.push({str:"",dir:"ltr",width:0,height:0,transform:getCurrentTextTransform(),fontName:M.loadedName,hasEOL:!0})}function addFakeSpaces(e,t,a){if(a*y.spaceInFlowMin<=e&&e<=a*y.spaceInFlowMax){if(y.initialized){resetLastChars();y.str.push(" ");g?.addExtraChar(" ")}return!1}const r=y.fontName;let i=0;if(y.vertical){i=e;e=0}flushTextContentItem();resetLastChars();pushWhitespace({width:Math.abs(e),height:Math.abs(i),transform:t||getCurrentTextTransform(),fontName:r});return!0}function flushTextContentItem(){if(y.initialized&&y.str){y.vertical?y.totalHeight+=y.height*y.textAdvanceScale:y.totalWidth+=y.width*y.textAdvanceScale;b.items.push(runBidiTransform(y));y.initialized=!1;y.str.length=0}}function enqueueChunk(e=!1){const t=b.items.length;if(0!==t&&!(e&&t<10)){s?.enqueue(b,t);b.items=[];b.styles=Object.create(null)}}const D=new TimeSlotManager;return new Promise((function promiseBody(e,t){const next=function(a){enqueueChunk(!0);Promise.all([a,s?.ready]).then((function(){try{promiseBody(e,t)}catch(e){t(e)}}),t)};a.ensureNotTerminated();D.reset();const f={};let g,p,y,w=[];for(;!(g=D.check());){w.length=0;f.args=w;if(!O.read(f))break;const e=M;M=i.state;const t=f.fn;w=f.args;switch(0|t){case nt:const t=w[0].name,f=w[1];if(M.font&&t===M.fontName&&f===M.fontSize)break;flushTextContentItem();M.fontName=t;M.fontSize=f;next(handleSetFont(t,null));return;case ot:M.textRise=w[0];break;case rt:M.textHScale=w[0]/100;break;case it:M.leading=w[0];break;case ct:M.translateTextLineMatrix(w[0],w[1]);M.textMatrix=M.textLineMatrix.slice();break;case lt:M.leading=-w[1];M.translateTextLineMatrix(w[0],w[1]);M.textMatrix=M.textLineMatrix.slice();break;case ut:M.carriageReturn();break;case ht:M.setTextMatrix(w[0],w[1],w[2],w[3],w[4],w[5]);M.setTextLineMatrix(w[0],w[1],w[2],w[3],w[4],w[5]);updateAdvanceScale();break;case tt:M.charSpacing=w[0];break;case at:M.wordSpacing=w[0];break;case Qe:M.textMatrix=Fa.slice();M.textLineMatrix=Fa.slice();break;case ft:if(!i.state.font){S.ensureStateFont(i.state);continue}const g=(M.font.vertical?1:-1)*M.fontSize/1e3,x=w[0];for(let e=0,t=x.length;e<t;e++){const t=x[e];if("string"==typeof t)C.push(t);else if("number"==typeof t&&0!==t){const e=C.join("");C.length=0;buildTextContentItem({chars:e,extraSpacing:t*g})}}if(C.length>0){const e=C.join("");C.length=0;buildTextContentItem({chars:e,extraSpacing:0})}break;case dt:if(!i.state.font){S.ensureStateFont(i.state);continue}buildTextContentItem({chars:w[0],extraSpacing:0});break;case gt:if(!i.state.font){S.ensureStateFont(i.state);continue}M.carriageReturn();buildTextContentItem({chars:w[0],extraSpacing:0});break;case pt:if(!i.state.font){S.ensureStateFont(i.state);continue}M.wordSpacing=w[0];M.charSpacing=w[1];M.carriageReturn();buildTextContentItem({chars:w[2],extraSpacing:0});break;case Nt:flushTextContentItem();v??=r.get("XObject")||Dict.empty;y=w[0]instanceof Name;p=w[0].name;if(y&&F.getByName(p))break;next(new Promise((function(e,t){if(!y)throw new FormatError("XObject must be referred to by name.");let f=v.getRaw(p);if(f instanceof Ref){if(F.getByRef(f)){e();return}if(S.globalImageCache.getData(f,S.pageIndex)){e();return}f=k.fetch(f)}if(!(f instanceof BaseStream))throw new FormatError("XObject should be a stream");const{dict:g}=f,b=g.get("Subtype");if(!(b instanceof Name))throw new FormatError("XObject should have a Name subtype");if("Form"!==b.name){F.set(p,g.objId,!0);e();return}const w=i.state.clone(),x=new StateManager(w),C=lookupMatrix(g.getArray("Matrix"),null);C&&x.transform(C);const T=g.get("Resources");enqueueChunk();const O={enqueueInvoked:!1,enqueue(e,t){this.enqueueInvoked=!0;s.enqueue(e,t)},get desiredSize(){return s.desiredSize??0},get ready(){return s.ready}};S.getTextContent({stream:f,task:a,resources:T instanceof Dict?T:r,stateManager:x,includeMarkedContent:n,sink:s&&O,seenStyles:o,viewBox:c,lang:l,markedContentData:h,disableNormalization:u,keepWhiteSpace:d,prevRefs:m}).then((function(){O.enqueueInvoked||F.set(p,g.objId,!0);e()}),t)})).catch((function(e){if(!(e instanceof AbortException)){if(!S.options.ignoreErrors)throw e;warn(`getTextContent - ignoring XObject: "${e}".`)}})));return;case De:y=w[0]instanceof Name;p=w[0].name;if(y&&T.getByName(p))break;next(new Promise((function(e,t){if(!y)throw new FormatError("GState must be referred to by name.");const a=r.get("ExtGState");if(!(a instanceof Dict))throw new FormatError("ExtGState should be a dictionary.");const i=a.get(p);if(!(i instanceof Dict))throw new FormatError("GState should be a dictionary.");const n=i.get("Font");if(n){flushTextContentItem();M.fontName=null;M.fontSize=n[1];handleSetFont(null,n[0]).then(e,t)}else{T.set(p,i.objId,!0);e()}})).catch((function(e){if(!(e instanceof AbortException)){if(!S.options.ignoreErrors)throw e;warn(`getTextContent - ignoring ExtGState: "${e}".`)}})));return;case Lt:flushTextContentItem();if(n){h.level++;b.items.push({type:"beginMarkedContent",tag:w[0]instanceof Name?w[0].name:null})}break;case jt:flushTextContentItem();if(n){h.level++;let e=null;w[1]instanceof Dict&&(e=w[1].get("MCID"));b.items.push({type:"beginMarkedContentProps",id:Number.isInteger(e)?`${S.idFactory.getPageObjId()}_mc${e}`:null,tag:w[0]instanceof Name?w[0].name:null})}break;case _t:flushTextContentItem();if(n){if(0===h.level)break;h.level--;b.items.push({type:"endMarkedContent"})}break;case Re:!e||e.font===M.font&&e.fontSize===M.fontSize&&e.fontName===M.fontName||flushTextContentItem()}if(b.items.length>=(s?.desiredSize??1)){g=!0;break}}if(g)next(En);else{flushTextContentItem();enqueueChunk();e()}})).catch((e=>{if(!(e instanceof AbortException)){if(!this.options.ignoreErrors)throw e;warn(`getTextContent - ignoring errors during "${a.name}" task: "${e}".`);flushTextContentItem();enqueueChunk()}}))}async extractDataStructures(e,t){const a=this.xref;let r;const i=this.readToUnicode(t.toUnicode);if(t.composite){const a=e.get("CIDSystemInfo");a instanceof Dict&&(t.cidSystemInfo={registry:stringToPDFString(a.get("Registry")),ordering:stringToPDFString(a.get("Ordering")),supplement:a.get("Supplement")});try{const t=e.get("CIDToGIDMap");t instanceof BaseStream&&(r=t.getBytes())}catch(e){if(!this.options.ignoreErrors)throw e;warn(`extractDataStructures - ignoring CIDToGIDMap data: "${e}".`)}}const n=[];let s,o=null;if(e.has("Encoding")){s=e.get("Encoding");if(s instanceof Dict){o=s.get("BaseEncoding");o=o instanceof Name?o.name:null;if(s.has("Differences")){const e=s.get("Differences");let t=0;for(const r of e){const e=a.fetchIfRef(r);if("number"==typeof e)t=e;else{if(!(e instanceof Name))throw new FormatError(`Invalid entry in \'Differences\' array: ${e}`);n[t++]=e.name}}}}else if(s instanceof Name)o=s.name;else{const e="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new FormatError(e);warn(e)}"MacRomanEncoding"!==o&&"MacExpertEncoding"!==o&&"WinAnsiEncoding"!==o&&(o=null)}const c=!t.file||t.isInternalFont,l=ei()[t.name];o&&c&&l&&(o=null);if(o)t.defaultEncoding=getEncoding(o);else{const e=!!(t.flags&Pr),a=!!(t.flags&Lr);s=Ar;"TrueType"!==t.type||a||(s=kr);if(e||l){s=Sr;c&&(/Symbol/i.test(t.name)?s=Cr:/Dingbats/i.test(t.name)?s=vr:/Wingdings/i.test(t.name)&&(s=kr))}t.defaultEncoding=s}t.differences=n;t.baseEncodingName=o;t.hasEncoding=!!o||n.length>0;t.dict=e;t.toUnicode=await i;const h=await this.buildToUnicode(t);t.toUnicode=h;r&&(t.cidToGidMap=this.readCidToGidMap(r,h));return t}_simpleFontToUnicode(e,t=!1){assert(!e.composite,"Must be a simple font.");const a=[],r=e.defaultEncoding.slice(),i=e.baseEncodingName,n=e.differences;for(const e in n){const t=n[e];".notdef"!==t&&(r[e]=t)}const s=Fr();for(const n in r){let o=r[n];if(""===o)continue;let c=s[o];if(void 0!==c){a[n]=String.fromCharCode(c);continue}let l=0;switch(o[0]){case"G":3===o.length&&(l=parseInt(o.substring(1),16));break;case"g":5===o.length&&(l=parseInt(o.substring(1),16));break;case"C":case"c":if(o.length>=3&&o.length<=4){const a=o.substring(1);if(t){l=parseInt(a,16);break}l=+a;if(Number.isNaN(l)&&Number.isInteger(parseInt(a,16)))return this._simpleFontToUnicode(e,!0)}break;case"u":c=getUnicodeForGlyph(o,s);-1!==c&&(l=c);break;default:switch(o){case"f_h":case"f_t":case"T_h":a[n]=o.replaceAll("_","");continue}}if(l>0&&l<=1114111&&Number.isInteger(l)){if(i&&l===+n){const e=getEncoding(i);if(e&&(o=e[n])){a[n]=String.fromCharCode(s[o]);continue}}a[n]=String.fromCodePoint(l)}}return a}async buildToUnicode(e){e.hasIncludedToUnicodeMap=e.toUnicode?.length>0;if(e.hasIncludedToUnicodeMap){!e.composite&&e.hasEncoding&&(e.fallbackToUnicode=this._simpleFontToUnicode(e));return e.toUnicode}if(!e.composite)return new ToUnicodeMap(this._simpleFontToUnicode(e));if(e.composite&&(e.cMap.builtInCMap&&!(e.cMap instanceof IdentityCMap)||"Adobe"===e.cidSystemInfo?.registry&&("GB1"===e.cidSystemInfo.ordering||"CNS1"===e.cidSystemInfo.ordering||"Japan1"===e.cidSystemInfo.ordering||"Korea1"===e.cidSystemInfo.ordering))){const{registry:t,ordering:a}=e.cidSystemInfo,r=Name.get(`${t}-${a}-UCS2`),i=await CMapFactory.create({encoding:r,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),n=[],s=[];e.cMap.forEach((function(e,t){if(t>65535)throw new FormatError("Max size of CID is 65,535");const a=i.lookup(t);if(a){s.length=0;for(let e=0,t=a.length;e<t;e+=2)s.push((a.charCodeAt(e)<<8)+a.charCodeAt(e+1));n[e]=String.fromCharCode(...s)}}));return new ToUnicodeMap(n)}return new IdentityToUnicodeMap(e.firstChar,e.lastChar)}async readToUnicode(e){if(!e)return null;if(e instanceof Name){const t=await CMapFactory.create({encoding:e,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});return t instanceof IdentityCMap?new IdentityToUnicodeMap(0,65535):new ToUnicodeMap(t.getMap())}if(e instanceof BaseStream)try{const t=await CMapFactory.create({encoding:e,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});if(t instanceof IdentityCMap)return new IdentityToUnicodeMap(0,65535);const a=new Array(t.length);t.forEach((function(e,t){if("number"==typeof t){a[e]=String.fromCodePoint(t);return}t.length%2!=0&&(t="\\0"+t);const r=[];for(let e=0;e<t.length;e+=2){const a=t.charCodeAt(e)<<8|t.charCodeAt(e+1);if(55296!=(63488&a)){r.push(a);continue}e+=2;const i=t.charCodeAt(e)<<8|t.charCodeAt(e+1);r.push(((1023&a)<<10)+(1023&i)+65536)}a[e]=String.fromCodePoint(...r)}));return new ToUnicodeMap(a)}catch(e){if(e instanceof AbortException)return null;if(this.options.ignoreErrors){warn(`readToUnicode - ignoring ToUnicode data: "${e}".`);return null}throw e}return null}readCidToGidMap(e,t){const a=[];for(let r=0,i=e.length;r<i;r++){const i=e[r++]<<8|e[r],n=r>>1;(0!==i||t.has(n))&&(a[n]=i)}return a}extractWidths(e,t,a){const r=this.xref;let i=[],n=0;const s=[];let o;if(a.composite){const t=e.get("DW");n="number"==typeof t?Math.ceil(t):1e3;const c=e.get("W");if(Array.isArray(c))for(let e=0,t=c.length;e<t;e++){let t=r.fetchIfRef(c[e++]);if(!Number.isInteger(t))break;const a=r.fetchIfRef(c[e]);if(Array.isArray(a))for(const e of a){const a=r.fetchIfRef(e);"number"==typeof a&&(i[t]=a);t++}else{if(!Number.isInteger(a))break;{const n=r.fetchIfRef(c[++e]);if("number"!=typeof n)continue;for(let e=t;e<=a;e++)i[e]=n}}}if(a.vertical){const t=e.getArray("DW2");let a=isNumberArray(t,2)?t:[880,-1e3];o=[a[1],.5*n,a[0]];a=e.get("W2");if(Array.isArray(a))for(let e=0,t=a.length;e<t;e++){let t=r.fetchIfRef(a[e++]);if(!Number.isInteger(t))break;const i=r.fetchIfRef(a[e]);if(Array.isArray(i))for(let e=0,a=i.length;e<a;e++){const a=[r.fetchIfRef(i[e++]),r.fetchIfRef(i[e++]),r.fetchIfRef(i[e])];isNumberArray(a,null)&&(s[t]=a);t++}else{if(!Number.isInteger(i))break;{const n=[r.fetchIfRef(a[++e]),r.fetchIfRef(a[++e]),r.fetchIfRef(a[++e])];if(!isNumberArray(n,null))continue;for(let e=t;e<=i;e++)s[e]=n}}}}}else{const s=e.get("Widths");if(Array.isArray(s)){let e=a.firstChar;for(const t of s){const a=r.fetchIfRef(t);"number"==typeof a&&(i[e]=a);e++}const o=t.get("MissingWidth");n="number"==typeof o?o:0}else{const t=e.get("BaseFont");if(t instanceof Name){const e=this.getBaseFontMetrics(t.name);i=this.buildCharCodeToWidth(e.widths,a);n=e.defaultWidth}}}let c=!0,l=n;for(const e in i){const t=i[e];if(t)if(l){if(l!==t){c=!1;break}}else l=t}c?a.flags|=Nr:a.flags&=~Nr;a.defaultWidth=n;a.widths=i;a.defaultVMetrics=o;a.vmetrics=s}isSerifFont(e){const t=e.split("-",1)[0];return t in Qr()||/serif/gi.test(t)}getBaseFontMetrics(e){let t=0,a=Object.create(null),r=!1;let i=Jr()[e]||e;const n=ii();i in n||(i=this.isSerifFont(e)?"Times-Roman":"Helvetica");const s=n[i];if("number"==typeof s){t=s;r=!0}else a=s();return{defaultWidth:t,monospace:r,widths:a}}buildCharCodeToWidth(e,t){const a=Object.create(null),r=t.differences,i=t.defaultEncoding;for(let t=0;t<256;t++)t in r&&e[r[t]]?a[t]=e[r[t]]:t in i&&e[i[t]]&&(a[t]=e[i[t]]);return a}preEvaluateFont(e){const t=e;let a=e.get("Subtype");if(!(a instanceof Name))throw new FormatError("invalid font Subtype");let r,i=!1;if("Type0"===a.name){const t=e.get("DescendantFonts");if(!t)throw new FormatError("Descendant fonts are not specified");if(!((e=Array.isArray(t)?this.xref.fetchIfRef(t[0]):t)instanceof Dict))throw new FormatError("Descendant font is not a dictionary.");a=e.get("Subtype");if(!(a instanceof Name))throw new FormatError("invalid font Subtype");i=!0}let n=e.get("FirstChar");Number.isInteger(n)||(n=0);let s=e.get("LastChar");Number.isInteger(s)||(s=i?65535:255);const o=e.get("FontDescriptor"),c=e.get("ToUnicode")||t.get("ToUnicode");if(o){r=new MurmurHash3_64;const a=t.getRaw("Encoding");if(a instanceof Name)r.update(a.name);else if(a instanceof Ref)r.update(a.toString());else if(a instanceof Dict)for(const e of a.getRawValues())if(e instanceof Name)r.update(e.name);else if(e instanceof Ref)r.update(e.toString());else if(Array.isArray(e)){const t=e.length,a=new Array(t);for(let r=0;r<t;r++){const t=e[r];t instanceof Name?a[r]=t.name:("number"==typeof t||t instanceof Ref)&&(a[r]=t.toString())}r.update(a.join())}r.update(`${n}-${s}`);if(c instanceof BaseStream){const e=c.str||c,t=e.buffer?new Uint8Array(e.buffer.buffer,0,e.bufferLength):new Uint8Array(e.bytes.buffer,e.start,e.end-e.start);r.update(t)}else c instanceof Name&&r.update(c.name);const o=e.get("Widths")||t.get("Widths");if(Array.isArray(o)){const e=[];for(const t of o)("number"==typeof t||t instanceof Ref)&&e.push(t.toString());r.update(e.join())}if(i){r.update("compositeFont");const a=e.get("W")||t.get("W");if(Array.isArray(a)){const e=[];for(const t of a)if("number"==typeof t||t instanceof Ref)e.push(t.toString());else if(Array.isArray(t)){const a=[];for(const e of t)("number"==typeof e||e instanceof Ref)&&a.push(e.toString());e.push(`[${a.join()}]`)}r.update(e.join())}const i=e.getRaw("CIDToGIDMap")||t.getRaw("CIDToGIDMap");i instanceof Name?r.update(i.name):i instanceof Ref?r.update(i.toString()):i instanceof BaseStream&&r.update(i.peekBytes())}}return{descriptor:o,dict:e,baseDict:t,composite:i,type:a.name,firstChar:n,lastChar:s,toUnicode:c,hash:r?r.hexdigest():""}}async translateFont({descriptor:e,dict:a,baseDict:r,composite:i,type:n,firstChar:s,lastChar:o,toUnicode:c,cssFontInfo:l}){const h="Type3"===n;if(!e){if(!h){let e=a.get("BaseFont");if(!(e instanceof Name))throw new FormatError("Base font is not specified");e=e.name.replaceAll(/[,_]/g,"-");const t=this.getBaseFontMetrics(e),i=e.split("-",1)[0],l=(this.isSerifFont(i)?Er:0)|(t.monospace?Nr:0)|(ei()[i]?Pr:Lr),u={type:n,name:e,loadedName:r.loadedName,systemFontInfo:null,widths:t.widths,defaultWidth:t.defaultWidth,isSimulatedFlags:!0,flags:l,firstChar:s,lastChar:o,toUnicode:c,xHeight:0,capHeight:0,italicAngle:0,isType3Font:h},d=a.get("Widths"),f=getStandardFontName(e);let g=null;if(f){g=await this.fetchStandardFontData(f);u.isInternalFont=!!g}!u.isInternalFont&&this.options.useSystemFonts&&(u.systemFontInfo=getFontSubstitution(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,e,f,n));const p=await this.extractDataStructures(a,u);if(Array.isArray(d)){const e=[];let t=s;for(const a of d){const r=this.xref.fetchIfRef(a);"number"==typeof r&&(e[t]=r);t++}p.widths=e}else p.widths=this.buildCharCodeToWidth(t.widths,p);return new Font(e,g,p,this.options)}e=Dict.empty}let u=e.get("FontName"),d=a.get("BaseFont");"string"==typeof u&&(u=Name.get(u));"string"==typeof d&&(d=Name.get(d));const f=u?.name,g=d?.name;if(h)f||(u=Name.get(n));else if(f!==g){info(`The FontDescriptor\'s FontName is "${f}" but should be the same as the Font\'s BaseFont "${g}".`);f&&g&&(g.startsWith(f)||!isKnownFontName(f)&&isKnownFontName(g))&&(u=null);u||=d}if(!(u instanceof Name))throw new FormatError("invalid font name");let p,m,b,y,w;try{p=e.get("FontFile","FontFile2","FontFile3");if(p){if(!(p instanceof BaseStream))throw new FormatError("FontFile should be a stream");if(p.isEmpty)throw new FormatError("FontFile is empty")}}catch(e){if(!this.options.ignoreErrors)throw e;warn(`translateFont - fetching "${u.name}" font file: "${e}".`);p=null}let x=!1,S=null,k=null;if(p){if(p.dict){const e=p.dict.get("Subtype");e instanceof Name&&(m=e.name);b=p.dict.get("Length1");y=p.dict.get("Length2");w=p.dict.get("Length3")}}else if(l){const e=getXfaFontName(u.name);if(e){l.fontFamily=`${l.fontFamily}-PdfJS-XFA`;l.metrics=e.metrics||null;S=e.factors||null;p=await this.fetchStandardFontData(e.name);x=!!p;r=a=getXfaFontDict(u.name);i=!0}}else if(!h){const e=getStandardFontName(u.name);if(e){p=await this.fetchStandardFontData(e);x=!!p}!x&&this.options.useSystemFonts&&(k=getFontSubstitution(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,u.name,e,n))}const C=lookupMatrix(a.getArray("FontMatrix"),t),v=lookupNormalRect(e.getArray("FontBBox")||a.getArray("FontBBox"),h?[0,0,0,0]:void 0);let F=e.get("Ascent");"number"!=typeof F&&(F=void 0);let T=e.get("Descent");"number"!=typeof T&&(T=void 0);let O=e.get("XHeight");"number"!=typeof O&&(O=0);let M=e.get("CapHeight");"number"!=typeof M&&(M=0);let D=e.get("Flags");Number.isInteger(D)||(D=0);let R=e.get("ItalicAngle");"number"!=typeof R&&(R=0);const N={type:n,name:u.name,subtype:m,file:p,length1:b,length2:y,length3:w,isInternalFont:x,loadedName:r.loadedName,composite:i,fixedPitch:!1,fontMatrix:C,firstChar:s,lastChar:o,toUnicode:c,bbox:v,ascent:F,descent:T,xHeight:O,capHeight:M,flags:D,italicAngle:R,isType3Font:h,cssFontInfo:l,scaleFactors:S,systemFontInfo:k};if(i){const e=r.get("Encoding");e instanceof Name&&(N.cidEncoding=e.name);const t=await CMapFactory.create({encoding:e,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});N.cMap=t;N.vertical=N.cMap.vertical}const E=await this.extractDataStructures(a,N);this.extractWidths(a,e,E);return new Font(u.name,p,E,this.options)}static buildFontPaths(e,t,a,r){function buildPath(t){const i=`${e.loadedName}_path_${t}`;try{if(e.renderer.hasBuiltPath(t))return;a.send("commonobj",[i,"FontPath",e.renderer.getPathJs(t)])}catch(e){if(r.ignoreErrors){warn(`buildFontPaths - ignoring ${i} glyph: "${e}".`);return}throw e}}for(const e of t){buildPath(e.fontChar);const t=e.accent;t?.fontChar&&buildPath(t.fontChar)}}static get fallbackFontDict(){const e=new Dict;e.set("BaseFont",Name.get("Helvetica"));e.set("Type",Name.get("FallbackType"));e.set("Subtype",Name.get("FallbackType"));e.set("Encoding",Name.get("WinAnsiEncoding"));return shadow(this,"fallbackFontDict",e)}}class TranslatedFont{#G=!1;#V=null;constructor({loadedName:e,font:t,dict:a}){this.loadedName=e;this.font=t;this.dict=a;this.type3Dependencies=t.isType3Font?new Set:null}send(e){if(!this.#G){this.#G=!0;e.send("commonobj",[this.loadedName,"Font",this.font.exportData()])}}fallback(e,t){if(this.font.data){this.font.disableFontFace=!0;PartialEvaluator.buildFontPaths(this.font,this.font.glyphCacheValues,e,t)}}loadType3Data(e,t,a){if(this.#V)return this.#V;const{font:r,type3Dependencies:i}=this;assert(r.isType3Font,"Must be a Type3 font.");const n=e.clone({ignoreErrors:!1}),s=new RefSet(e.type3FontRefs);this.dict.objId&&!s.has(this.dict.objId)&&s.put(this.dict.objId);n.type3FontRefs=s;let o=Promise.resolve();const c=this.dict.get("CharProcs"),l=this.dict.get("Resources")||t,h=Object.create(null),[u,d,f,g]=r.bbox,p=f-u,m=g-d,b=Math.hypot(p,m);for(const e of c.getKeys())o=o.then((()=>{const t=c.get(e),r=new OperatorList;return n.getOperatorList({stream:t,task:a,resources:l,operatorList:r}).then((()=>{switch(r.fnArray[0]){case bt:this.#K(r,b);break;case mt:b||this.#J(r)}h[e]=r.getIR();for(const e of r.dependencies)i.add(e)})).catch((function(t){warn(`Type3 font resource "${e}" is not available.`);const a=new OperatorList;h[e]=a.getIR()}))}));this.#V=o.then((()=>{r.charProcOperatorList=h;if(this._bbox){r.isCharBBox=!0;r.bbox=this._bbox}}));return this.#V}#K(e,t=NaN){const a=Util.normalizeRect(e.argsArray[0].slice(2)),r=a[2]-a[0],i=a[3]-a[1],n=Math.hypot(r,i);if(0===r||0===i){e.fnArray.splice(0,1);e.argsArray.splice(0,1)}else if(0===t||Math.round(n/t)>=10){this._bbox??=[1/0,1/0,-1/0,-1/0];Util.rectBoundingBox(...a,this._bbox)}let s=0,o=e.length;for(;s<o;){switch(e.fnArray[s]){case bt:break;case yt:case wt:case xt:case St:case At:case kt:case Ct:case vt:case Ft:case It:case Tt:case Ot:case Mt:case Oe:e.fnArray.splice(s,1);e.argsArray.splice(s,1);o--;continue;case De:const[t]=e.argsArray[s];let a=0,r=t.length;for(;a<r;){const[e]=t[a];switch(e){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":t.splice(a,1);r--;continue}a++}}s++}}#J(e){let t=1;const a=e.length;for(;t<a;){if(e.fnArray[t]===aa){const a=e.argsArray[t][2];this._bbox??=[1/0,1/0,-1/0,-1/0];Util.rectBoundingBox(...a,this._bbox)}t++}}}class StateManager{constructor(e=new EvalState){this.state=e;this.stateStack=[]}save(){const e=this.state;this.stateStack.push(this.state);this.state=e.clone()}restore(){const e=this.stateStack.pop();e&&(this.state=e)}transform(e){this.state.ctm=Util.transform(this.state.ctm,e)}}class TextState{constructor(){this.ctm=new Float32Array(Fa);this.fontName=null;this.fontSize=0;this.loadedName=null;this.font=null;this.fontMatrix=t;this.textMatrix=Fa.slice();this.textLineMatrix=Fa.slice();this.charSpacing=0;this.wordSpacing=0;this.leading=0;this.textHScale=1;this.textRise=0}setTextMatrix(e,t,a,r,i,n){const s=this.textMatrix;s[0]=e;s[1]=t;s[2]=a;s[3]=r;s[4]=i;s[5]=n}setTextLineMatrix(e,t,a,r,i,n){const s=this.textLineMatrix;s[0]=e;s[1]=t;s[2]=a;s[3]=r;s[4]=i;s[5]=n}translateTextMatrix(e,t){const a=this.textMatrix;a[4]=a[0]*e+a[2]*t+a[4];a[5]=a[1]*e+a[3]*t+a[5]}translateTextLineMatrix(e,t){const a=this.textLineMatrix;a[4]=a[0]*e+a[2]*t+a[4];a[5]=a[1]*e+a[3]*t+a[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading);this.textMatrix=this.textLineMatrix.slice()}clone(){const e=Object.create(this);e.textMatrix=this.textMatrix.slice();e.textLineMatrix=this.textLineMatrix.slice();e.fontMatrix=this.fontMatrix.slice();return e}}class EvalState{constructor(){this.ctm=new Float32Array(Fa);this.font=null;this.textRenderingMode=x;this._fillColorSpace=this._strokeColorSpace=ColorSpaceUtils.gray;this.patternFillColorSpace=null;this.patternStrokeColorSpace=null;this.currentPointX=this.currentPointY=0;this.pathMinMax=new Float32Array([1/0,1/0,-1/0,-1/0]);this.pathBuffer=[]}get fillColorSpace(){return this._fillColorSpace}set fillColorSpace(e){this._fillColorSpace=this.patternFillColorSpace=e}get strokeColorSpace(){return this._strokeColorSpace}set strokeColorSpace(e){this._strokeColorSpace=this.patternStrokeColorSpace=e}clone({newPath:e=!1}={}){const t=Object.create(this);if(e){t.pathBuffer=[];t.pathMinMax=new Float32Array([1/0,1/0,-1/0,-1/0])}return t}}class EvaluatorPreprocessor{static get opMap(){return shadow(this,"opMap",Object.assign(Object.create(null),{w:{id:Ce,numArgs:1,variableArgs:!1},J:{id:ve,numArgs:1,variableArgs:!1},j:{id:Fe,numArgs:1,variableArgs:!1},M:{id:Ie,numArgs:1,variableArgs:!1},d:{id:Te,numArgs:2,variableArgs:!1},ri:{id:Oe,numArgs:1,variableArgs:!1},i:{id:Me,numArgs:1,variableArgs:!1},gs:{id:De,numArgs:1,variableArgs:!1},q:{id:Be,numArgs:0,variableArgs:!1},Q:{id:Re,numArgs:0,variableArgs:!1},cm:{id:Ne,numArgs:6,variableArgs:!1},m:{id:Ee,numArgs:2,variableArgs:!1},l:{id:Pe,numArgs:2,variableArgs:!1},c:{id:Le,numArgs:6,variableArgs:!1},v:{id:je,numArgs:4,variableArgs:!1},y:{id:_e,numArgs:4,variableArgs:!1},h:{id:Ue,numArgs:0,variableArgs:!1},re:{id:Xe,numArgs:4,variableArgs:!1},S:{id:qe,numArgs:0,variableArgs:!1},s:{id:He,numArgs:0,variableArgs:!1},f:{id:We,numArgs:0,variableArgs:!1},F:{id:We,numArgs:0,variableArgs:!1},"f*":{id:ze,numArgs:0,variableArgs:!1},B:{id:$e,numArgs:0,variableArgs:!1},"B*":{id:Ge,numArgs:0,variableArgs:!1},b:{id:Ve,numArgs:0,variableArgs:!1},"b*":{id:Ke,numArgs:0,variableArgs:!1},n:{id:Je,numArgs:0,variableArgs:!1},W:{id:Ye,numArgs:0,variableArgs:!1},"W*":{id:Ze,numArgs:0,variableArgs:!1},BT:{id:Qe,numArgs:0,variableArgs:!1},ET:{id:et,numArgs:0,variableArgs:!1},Tc:{id:tt,numArgs:1,variableArgs:!1},Tw:{id:at,numArgs:1,variableArgs:!1},Tz:{id:rt,numArgs:1,variableArgs:!1},TL:{id:it,numArgs:1,variableArgs:!1},Tf:{id:nt,numArgs:2,variableArgs:!1},Tr:{id:st,numArgs:1,variableArgs:!1},Ts:{id:ot,numArgs:1,variableArgs:!1},Td:{id:ct,numArgs:2,variableArgs:!1},TD:{id:lt,numArgs:2,variableArgs:!1},Tm:{id:ht,numArgs:6,variableArgs:!1},"T*":{id:ut,numArgs:0,variableArgs:!1},Tj:{id:dt,numArgs:1,variableArgs:!1},TJ:{id:ft,numArgs:1,variableArgs:!1},"\'":{id:gt,numArgs:1,variableArgs:!1},\'"\':{id:pt,numArgs:3,variableArgs:!1},d0:{id:mt,numArgs:2,variableArgs:!1},d1:{id:bt,numArgs:6,variableArgs:!1},CS:{id:yt,numArgs:1,variableArgs:!1},cs:{id:wt,numArgs:1,variableArgs:!1},SC:{id:xt,numArgs:4,variableArgs:!0},SCN:{id:St,numArgs:33,variableArgs:!0},sc:{id:At,numArgs:4,variableArgs:!0},scn:{id:kt,numArgs:33,variableArgs:!0},G:{id:Ct,numArgs:1,variableArgs:!1},g:{id:vt,numArgs:1,variableArgs:!1},RG:{id:Ft,numArgs:3,variableArgs:!1},rg:{id:It,numArgs:3,variableArgs:!1},K:{id:Tt,numArgs:4,variableArgs:!1},k:{id:Ot,numArgs:4,variableArgs:!1},sh:{id:Mt,numArgs:1,variableArgs:!1},BI:{id:Dt,numArgs:0,variableArgs:!1},ID:{id:Bt,numArgs:0,variableArgs:!1},EI:{id:Rt,numArgs:1,variableArgs:!1},Do:{id:Nt,numArgs:1,variableArgs:!1},MP:{id:Et,numArgs:1,variableArgs:!1},DP:{id:Pt,numArgs:2,variableArgs:!1},BMC:{id:Lt,numArgs:1,variableArgs:!1},BDC:{id:jt,numArgs:2,variableArgs:!1},EMC:{id:_t,numArgs:0,variableArgs:!1},BX:{id:Ut,numArgs:0,variableArgs:!1},EX:{id:Xt,numArgs:0,variableArgs:!1},BM:null,BD:null,true:null,fa:null,fal:null,fals:null,false:null,nu:null,nul:null,null:null}))}static MAX_INVALID_PATH_OPS=10;constructor(e,t,a=new StateManager){this.parser=new Parser({lexer:new Lexer(e,EvaluatorPreprocessor.opMap),xref:t});this.stateManager=a;this.nonProcessedArgs=[];this._isPathOp=!1;this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(e){let t=e.args;for(;;){const a=this.parser.getObj();if(a instanceof Cmd){const r=a.cmd,i=EvaluatorPreprocessor.opMap[r];if(!i){warn(`Unknown command "${r}".`);continue}const n=i.id,s=i.numArgs;let o=null!==t?t.length:0;this._isPathOp||(this._numInvalidPathOPS=0);this._isPathOp=n>=Ee&&n<=Je;if(i.variableArgs)o>s&&info(`Command ${r}: expected [0, ${s}] args, but received ${o} args.`);else{if(o!==s){const e=this.nonProcessedArgs;for(;o>s;){e.push(t.shift());o--}for(;o<s&&0!==e.length;){null===t&&(t=[]);t.unshift(e.pop());o++}}if(o<s){const e=`command ${r}: expected ${s} args, but received ${o} args.`;if(this._isPathOp&&++this._numInvalidPathOPS>EvaluatorPreprocessor.MAX_INVALID_PATH_OPS)throw new FormatError(`Invalid ${e}`);warn(`Skipping ${e}`);null!==t&&(t.length=0);continue}}this.preprocessCommand(n,t);e.fn=n;e.args=t;return!0}if(a===wa)return!1;if(null!==a){null===t&&(t=[]);t.push(a);if(t.length>33)throw new FormatError("Too many arguments")}}}preprocessCommand(e,t){switch(0|e){case Be:this.stateManager.save();break;case Re:this.stateManager.restore();break;case Ne:this.stateManager.transform(t)}}}class DefaultAppearanceEvaluator extends EvaluatorPreprocessor{constructor(e){super(new StringStream(e))}parse(){const e={fn:0,args:[]},t={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;;){e.args.length=0;if(!this.read(e))break;if(0!==this.savedStatesDepth)continue;const{fn:a,args:r}=e;switch(0|a){case nt:const[e,a]=r;e instanceof Name&&(t.fontName=e.name);"number"==typeof a&&a>0&&(t.fontSize=a);break;case It:ColorSpaceUtils.rgb.getRgbItem(r,0,t.fontColor,0);break;case vt:ColorSpaceUtils.gray.getRgbItem(r,0,t.fontColor,0);break;case Ot:ColorSpaceUtils.cmyk.getRgbItem(r,0,t.fontColor,0)}}}catch(e){warn(`parseDefaultAppearance - ignoring errors: "${e}".`)}return t}}function parseDefaultAppearance(e){return new DefaultAppearanceEvaluator(e).parse()}class AppearanceStreamEvaluator extends EvaluatorPreprocessor{constructor(e,t,a,r){super(e);this.stream=e;this.evaluatorOptions=t;this.xref=a;this.globalColorSpaceCache=r;this.resources=e.dict?.get("Resources")}parse(){const e={fn:0,args:[]};let t={scaleFactor:1,fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3),fillColorSpace:ColorSpaceUtils.gray},a=!1;const r=[];try{for(;;){e.args.length=0;if(a||!this.read(e))break;const{fn:i,args:n}=e;switch(0|i){case Be:r.push({scaleFactor:t.scaleFactor,fontSize:t.fontSize,fontName:t.fontName,fontColor:t.fontColor.slice(),fillColorSpace:t.fillColorSpace});break;case Re:t=r.pop()||t;break;case ht:t.scaleFactor*=Math.hypot(n[0],n[1]);break;case nt:const[e,i]=n;e instanceof Name&&(t.fontName=e.name);"number"==typeof i&&i>0&&(t.fontSize=i*t.scaleFactor);break;case wt:t.fillColorSpace=ColorSpaceUtils.parse({cs:n[0],xref:this.xref,resources:this.resources,pdfFunctionFactory:this._pdfFunctionFactory,globalColorSpaceCache:this.globalColorSpaceCache,localColorSpaceCache:this._localColorSpaceCache});break;case At:t.fillColorSpace.getRgbItem(n,0,t.fontColor,0);break;case It:ColorSpaceUtils.rgb.getRgbItem(n,0,t.fontColor,0);break;case vt:ColorSpaceUtils.gray.getRgbItem(n,0,t.fontColor,0);break;case Ot:ColorSpaceUtils.cmyk.getRgbItem(n,0,t.fontColor,0);break;case dt:case ft:case gt:case pt:a=!0}}}catch(e){warn(`parseAppearanceStream - ignoring errors: "${e}".`)}this.stream.reset();delete t.scaleFactor;delete t.fillColorSpace;return t}get _localColorSpaceCache(){return shadow(this,"_localColorSpaceCache",new LocalColorSpaceCache)}get _pdfFunctionFactory(){return shadow(this,"_pdfFunctionFactory",new PDFFunctionFactory({xref:this.xref,isEvalSupported:this.evaluatorOptions.isEvalSupported}))}}function getPdfColor(e,t){if(e[0]===e[1]&&e[1]===e[2]){return`${numberToString(e[0]/255)} ${t?"g":"G"}`}return Array.from(e,(e=>numberToString(e/255))).join(" ")+" "+(t?"rg":"RG")}class FakeUnicodeFont{constructor(e,t){this.xref=e;this.widths=null;this.firstChar=1/0;this.lastChar=-1/0;this.fontFamily=t;const a=new OffscreenCanvas(1,1);this.ctxMeasure=a.getContext("2d",{willReadFrequently:!0});FakeUnicodeFont._fontNameId||(FakeUnicodeFont._fontNameId=1);this.fontName=Name.get(`InvalidPDFjsFont_${t}_${FakeUnicodeFont._fontNameId++}`)}get fontDescriptorRef(){if(!FakeUnicodeFont._fontDescriptorRef){const e=new Dict(this.xref);e.setIfName("Type","FontDescriptor");e.set("FontName",this.fontName);e.set("FontFamily","MyriadPro Regular");e.set("FontBBox",[0,0,0,0]);e.setIfName("FontStretch","Normal");e.set("FontWeight",400);e.set("ItalicAngle",0);FakeUnicodeFont._fontDescriptorRef=this.xref.getNewPersistentRef(e)}return FakeUnicodeFont._fontDescriptorRef}get descendantFontRef(){const e=new Dict(this.xref);e.set("BaseFont",this.fontName);e.setIfName("Type","Font");e.setIfName("Subtype","CIDFontType0");e.setIfName("CIDToGIDMap","Identity");e.set("FirstChar",this.firstChar);e.set("LastChar",this.lastChar);e.set("FontDescriptor",this.fontDescriptorRef);e.set("DW",1e3);const t=[],a=[...this.widths.entries()].sort();let r=null,i=null;for(const[e,n]of a)if(r)if(e===r+i.length)i.push(n);else{t.push(r,i);r=e;i=[n]}else{r=e;i=[n]}r&&t.push(r,i);e.set("W",t);const n=new Dict(this.xref);n.set("Ordering","Identity");n.set("Registry","Adobe");n.set("Supplement",0);e.set("CIDSystemInfo",n);return this.xref.getNewPersistentRef(e)}get baseFontRef(){const e=new Dict(this.xref);e.set("BaseFont",this.fontName);e.setIfName("Type","Font");e.setIfName("Subtype","Type0");e.setIfName("Encoding","Identity-H");e.set("DescendantFonts",[this.descendantFontRef]);e.setIfName("ToUnicode","Identity-H");return this.xref.getNewPersistentRef(e)}get resources(){const e=new Dict(this.xref),t=new Dict(this.xref);t.set(this.fontName.name,this.baseFontRef);e.set("Font",t);return e}_createContext(){this.widths=new Map;this.ctxMeasure.font=`1000px ${this.fontFamily}`;return this.ctxMeasure}createFontResources(e){const t=this._createContext();for(const a of e.split(/\\r\\n?|\\n/))for(const e of a.split("")){const a=e.charCodeAt(0);if(this.widths.has(a))continue;const r=t.measureText(e),i=Math.ceil(r.width);this.widths.set(a,i);this.firstChar=Math.min(a,this.firstChar);this.lastChar=Math.max(a,this.lastChar)}return this.resources}static getFirstPositionInfo(e,t,i){const[n,s,o,c]=e;let l=o-n,h=c-s;t%180!=0&&([l,h]=[h,l]);const u=a*i;return{coords:[0,h+r*i-u],bbox:[0,0,l,h],matrix:0!==t?getRotationMatrix(t,h,u):void 0}}createAppearance(e,t,i,n,s,o){const c=this._createContext(),l=[];let h=-1/0;for(const t of e.split(/\\r\\n?|\\n/)){l.push(t);const e=c.measureText(t).width;h=Math.max(h,e);for(const e of codePointIter(t)){const t=String.fromCodePoint(e);let a=this.widths.get(e);if(void 0===a){const r=c.measureText(t);a=Math.ceil(r.width);this.widths.set(e,a);this.firstChar=Math.min(e,this.firstChar);this.lastChar=Math.max(e,this.lastChar)}}}h*=n/1e3;const[u,d,f,g]=t;let p=f-u,m=g-d;i%180!=0&&([p,m]=[m,p]);let b=1;h>p&&(b=p/h);let y=1;const w=a*n,x=r*n,S=w*l.length;S>m&&(y=m/S);const k=n*Math.min(b,y),C=["q",`0 0 ${numberToString(p)} ${numberToString(m)} re W n`,"BT",`1 0 0 1 0 ${numberToString(m+x)} Tm 0 Tc ${getPdfColor(s,!0)}`,`/${this.fontName.name} ${numberToString(k)} Tf`],{resources:v}=this;if(1!==(o="number"==typeof o&&o>=0&&o<=1?o:1)){C.push("/R0 gs");const e=new Dict(this.xref),t=new Dict(this.xref);t.set("ca",o);t.set("CA",o);t.setIfName("Type","ExtGState");e.set("R0",t);v.set("ExtGState",e)}const F=numberToString(w);for(const e of l)C.push(`0 -${F} Td <${stringToUTF16HexString(e)}> Tj`);C.push("ET","Q");const T=C.join("\\n"),O=new Dict(this.xref);O.setIfName("Subtype","Form");O.setIfName("Type","XObject");O.set("BBox",[0,0,p,m]);O.set("Length",T.length);O.set("Resources",v);if(i){const e=getRotationMatrix(i,p,m);O.set("Matrix",e)}const M=new StringStream(T);M.dict=O;return M}}const Pn=["m/d","m/d/yy","mm/dd/yy","mm/yy","d-mmm","d-mmm-yy","dd-mmm-yy","yy-mm-dd","mmm-yy","mmmm-yy","mmm d, yyyy","mmmm d, yyyy","m/d/yy h:MM tt","m/d/yy HH:MM"],Ln=["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"];class NameOrNumberTree{constructor(e,t,a){this.root=e;this.xref=t;this._type=a}getAll(){const e=new Map;if(!this.root)return e;const t=this.xref,a=new RefSet;a.put(this.root);const r=[this.root];for(;r.length>0;){const i=t.fetchIfRef(r.shift());if(!(i instanceof Dict))continue;if(i.has("Kids")){const e=i.get("Kids");if(!Array.isArray(e))continue;for(const t of e){if(a.has(t))throw new FormatError(`Duplicate entry in "${this._type}" tree.`);r.push(t);a.put(t)}continue}const n=i.get(this._type);if(Array.isArray(n))for(let a=0,r=n.length;a<r;a+=2)e.set(t.fetchIfRef(n[a]),t.fetchIfRef(n[a+1]))}return e}getRaw(e){if(!this.root)return null;const t=this.xref;let a=t.fetchIfRef(this.root),r=0;for(;a.has("Kids");){if(++r>10){warn(`Search depth limit reached for "${this._type}" tree.`);return null}const i=a.get("Kids");if(!Array.isArray(i))return null;let n=0,s=i.length-1;for(;n<=s;){const r=n+s>>1,o=t.fetchIfRef(i[r]),c=o.get("Limits");if(e<t.fetchIfRef(c[0]))s=r-1;else{if(!(e>t.fetchIfRef(c[1]))){a=o;break}n=r+1}}if(n>s)return null}const i=a.get(this._type);if(Array.isArray(i)){let a=0,r=i.length-2;for(;a<=r;){const n=a+r>>1,s=n+(1&n),o=t.fetchIfRef(i[s]);if(e<o)r=s-2;else{if(!(e>o))return i[s+1];a=s+2}}}return null}get(e){return this.xref.fetchIfRef(this.getRaw(e))}}class NameTree extends NameOrNumberTree{constructor(e,t){super(e,t,"Names")}}class NumberTree extends NameOrNumberTree{constructor(e,t){super(e,t,"Nums")}}function clearGlobalCaches(){!function clearPatternCaches(){Ii=Object.create(null)}();!function clearPrimitiveCaches(){xa=Object.create(null);Sa=Object.create(null);Aa=Object.create(null)}();!function clearUnicodeCaches(){Dr.clear()}();JpxImage.cleanup()}function pickPlatformItem(e){return e instanceof Dict?e.has("UF")?e.get("UF"):e.has("F")?e.get("F"):e.has("Unix")?e.get("Unix"):e.has("Mac")?e.get("Mac"):e.has("DOS")?e.get("DOS"):null:null}class FileSpec{#Y=!1;constructor(e,t,a=!1){if(e instanceof Dict){this.xref=t;this.root=e;e.has("FS")&&(this.fs=e.get("FS"));e.has("RF")&&warn("Related file specifications are not supported");a||(e.has("EF")?this.#Y=!0:warn("Non-embedded file specifications are not supported"))}}get filename(){let e="";const t=pickPlatformItem(this.root);t&&"string"==typeof t&&(e=stringToPDFString(t,!0).replaceAll("\\\\\\\\","\\\\").replaceAll("\\\\/","/").replaceAll("\\\\","/"));return shadow(this,"filename",e||"unnamed")}get content(){if(!this.#Y)return null;this._contentRef||=pickPlatformItem(this.root?.get("EF"));let e=null;if(this._contentRef){const t=this.xref.fetchIfRef(this._contentRef);t instanceof BaseStream?e=t.getBytes():warn("Embedded file specification points to non-existing/invalid content")}else warn("Embedded file specification does not have any content");return e}get description(){let e="";const t=this.root?.get("Desc");t&&"string"==typeof t&&(e=stringToPDFString(t));return shadow(this,"description",e)}get serializable(){return{rawFilename:this.filename,filename:(e=this.filename,e.substring(e.lastIndexOf("/")+1)),content:this.content,description:this.description};var e}}const jn=0,_n=-2,Un=-3,Xn=-4,qn=-5,Hn=-6,Wn=-9;function isWhitespace(e,t){const a=e[t];return" "===a||"\\n"===a||"\\r"===a||"\\t"===a}class XMLParserBase{_resolveEntities(e){return e.replaceAll(/&([^;]+);/g,((e,t)=>{if("#x"===t.substring(0,2))return String.fromCodePoint(parseInt(t.substring(2),16));if("#"===t.substring(0,1))return String.fromCodePoint(parseInt(t.substring(1),10));switch(t){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return\'"\';case"apos":return"\'"}return this.onResolveEntity(t)}))}_parseContent(e,t){const a=[];let r=t;function skipWs(){for(;r<e.length&&isWhitespace(e,r);)++r}for(;r<e.length&&!isWhitespace(e,r)&&">"!==e[r]&&"/"!==e[r];)++r;const i=e.substring(t,r);skipWs();for(;r<e.length&&">"!==e[r]&&"/"!==e[r]&&"?"!==e[r];){skipWs();let t="",i="";for(;r<e.length&&!isWhitespace(e,r)&&"="!==e[r];){t+=e[r];++r}skipWs();if("="!==e[r])return null;++r;skipWs();const n=e[r];if(\'"\'!==n&&"\'"!==n)return null;const s=e.indexOf(n,++r);if(s<0)return null;i=e.substring(r,s);a.push({name:t,value:this._resolveEntities(i)});r=s+1;skipWs()}return{name:i,attributes:a,parsed:r-t}}_parseProcessingInstruction(e,t){let a=t;for(;a<e.length&&!isWhitespace(e,a)&&">"!==e[a]&&"?"!==e[a]&&"/"!==e[a];)++a;const r=e.substring(t,a);!function skipWs(){for(;a<e.length&&isWhitespace(e,a);)++a}();const i=a;for(;a<e.length&&("?"!==e[a]||">"!==e[a+1]);)++a;return{name:r,value:e.substring(i,a),parsed:a-t}}parseXml(e){let t=0;for(;t<e.length;){let a=t;if("<"===e[t]){++a;let t;switch(e[a]){case"/":++a;t=e.indexOf(">",a);if(t<0){this.onError(Wn);return}this.onEndElement(e.substring(a,t));a=t+1;break;case"?":++a;const r=this._parseProcessingInstruction(e,a);if("?>"!==e.substring(a+r.parsed,a+r.parsed+2)){this.onError(Un);return}this.onPi(r.name,r.value);a+=r.parsed+2;break;case"!":if("--"===e.substring(a+1,a+3)){t=e.indexOf("--\\x3e",a+3);if(t<0){this.onError(qn);return}this.onComment(e.substring(a+3,t));a=t+3}else if("[CDATA["===e.substring(a+1,a+8)){t=e.indexOf("]]>",a+8);if(t<0){this.onError(_n);return}this.onCdata(e.substring(a+8,t));a=t+3}else{if("DOCTYPE"!==e.substring(a+1,a+8)){this.onError(Hn);return}{const r=e.indexOf("[",a+8);let i=!1;t=e.indexOf(">",a+8);if(t<0){this.onError(Xn);return}if(r>0&&t>r){t=e.indexOf("]>",a+8);if(t<0){this.onError(Xn);return}i=!0}const n=e.substring(a+8,t+(i?1:0));this.onDoctype(n);a=t+(i?2:1)}}break;default:const i=this._parseContent(e,a);if(null===i){this.onError(Hn);return}let n=!1;if("/>"===e.substring(a+i.parsed,a+i.parsed+2))n=!0;else if(">"!==e.substring(a+i.parsed,a+i.parsed+1)){this.onError(Wn);return}this.onBeginElement(i.name,i.attributes,n);a+=i.parsed+(n?2:1)}}else{for(;a<e.length&&"<"!==e[a];)a++;const r=e.substring(t,a);this.onText(this._resolveEntities(r))}t=a}}onResolveEntity(e){return`&${e};`}onPi(e,t){}onComment(e){}onCdata(e){}onDoctype(e){}onText(e){}onBeginElement(e,t,a){}onEndElement(e){}onError(e){}}class SimpleDOMNode{constructor(e,t){this.nodeName=e;this.nodeValue=t;Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes?.[0]}get nextSibling(){const e=this.parentNode.childNodes;if(!e)return;const t=e.indexOf(this);return-1!==t?e[t+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((e=>e.textContent)).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){return this.childNodes?.length>0}searchNode(e,t){if(t>=e.length)return this;const a=e[t];if(a.name.startsWith("#")&&t<e.length-1)return this.searchNode(e,t+1);const r=[];let i=this;for(;;){if(a.name===i.nodeName){if(0!==a.pos){if(0===r.length)return null;{const[n]=r.pop();let s=0;for(const r of n.childNodes)if(a.name===r.nodeName){if(s===a.pos)return r.searchNode(e,t+1);s++}return i.searchNode(e,t+1)}}{const a=i.searchNode(e,t+1);if(null!==a)return a}}if(i.childNodes?.length>0){r.push([i,0]);i=i.childNodes[0]}else{if(0===r.length)return null;for(;0!==r.length;){const[e,t]=r.pop(),a=t+1;if(a<e.childNodes.length){r.push([e,a]);i=e.childNodes[a];break}}if(0===r.length)return null}}}dump(e){if("#text"!==this.nodeName){e.push(`<${this.nodeName}`);if(this.attributes)for(const t of this.attributes)e.push(` ${t.name}="${encodeToXmlString(t.value)}"`);if(this.hasChildNodes()){e.push(">");for(const t of this.childNodes)t.dump(e);e.push(`</${this.nodeName}>`)}else this.nodeValue?e.push(`>${encodeToXmlString(this.nodeValue)}</${this.nodeName}>`):e.push("/>")}else e.push(encodeToXmlString(this.nodeValue))}}class SimpleXMLParser extends XMLParserBase{constructor({hasAttributes:e=!1,lowerCaseName:t=!1}){super();this._currentFragment=null;this._stack=null;this._errorCode=jn;this._hasAttributes=e;this._lowerCaseName=t}parseFromString(e){this._currentFragment=[];this._stack=[];this._errorCode=jn;this.parseXml(e);if(this._errorCode!==jn)return;const[t]=this._currentFragment;return t?{documentElement:t}:void 0}onText(e){if(function isWhitespaceString(e){for(let t=0,a=e.length;t<a;t++)if(!isWhitespace(e,t))return!1;return!0}(e))return;const t=new SimpleDOMNode("#text",e);this._currentFragment.push(t)}onCdata(e){const t=new SimpleDOMNode("#text",e);this._currentFragment.push(t)}onBeginElement(e,t,a){this._lowerCaseName&&(e=e.toLowerCase());const r=new SimpleDOMNode(e);r.childNodes=[];this._hasAttributes&&(r.attributes=t);this._currentFragment.push(r);if(!a){this._stack.push(this._currentFragment);this._currentFragment=r.childNodes}}onEndElement(e){this._currentFragment=this._stack.pop()||[];const t=this._currentFragment.at(-1);if(!t)return null;for(const e of t.childNodes)e.parentNode=t;return t}onError(e){this._errorCode=e}}class MetadataParser{constructor(e){e=this._repair(e);const t=new SimpleXMLParser({lowerCaseName:!0}).parseFromString(e);this._metadataMap=new Map;this._data=e;t&&this._parse(t)}_repair(e){return e.replace(/^[^<]+/,"").replaceAll(/>\\\\376\\\\377([^<]+)/g,(function(e,t){const a=t.replaceAll(/\\\\([0-3])([0-7])([0-7])/g,(function(e,t,a,r){return String.fromCharCode(64*t+8*a+1*r)})).replaceAll(/&(amp|apos|gt|lt|quot);/g,(function(e,t){switch(t){case"amp":return"&";case"apos":return"\'";case"gt":return">";case"lt":return"<";case"quot":return\'"\'}throw new Error(`_repair: ${t} isn\'t defined.`)})),r=[">"];for(let e=0,t=a.length;e<t;e+=2){const t=256*a.charCodeAt(e)+a.charCodeAt(e+1);t>=32&&t<127&&60!==t&&62!==t&&38!==t?r.push(String.fromCharCode(t)):r.push("&#x"+(65536+t).toString(16).substring(1)+";")}return r.join("")}))}_getSequence(e){const t=e.nodeName;return"rdf:bag"!==t&&"rdf:seq"!==t&&"rdf:alt"!==t?null:e.childNodes.filter((e=>"rdf:li"===e.nodeName))}_parseArray(e){if(!e.hasChildNodes())return;const[t]=e.childNodes,a=this._getSequence(t)||[];this._metadataMap.set(e.nodeName,a.map((e=>e.textContent.trim())))}_parse(e){let t=e.documentElement;if("rdf:rdf"!==t.nodeName){t=t.firstChild;for(;t&&"rdf:rdf"!==t.nodeName;)t=t.nextSibling}if(t&&"rdf:rdf"===t.nodeName&&t.hasChildNodes())for(const e of t.childNodes)if("rdf:description"===e.nodeName)for(const t of e.childNodes){const e=t.nodeName;switch(e){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(t);continue}this._metadataMap.set(e,t.textContent.trim())}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}}const zn=1,$n=2,Gn=3,Vn=4,Kn=5;class StructTreeRoot{constructor(e,t,a){this.xref=e;this.dict=t;this.ref=a instanceof Ref?a:null;this.roleMap=new Map;this.structParentIds=null}init(){this.readRoleMap()}#Z(e,t,a){if(!(e instanceof Ref)||t<0)return;this.structParentIds||=new RefSetCache;let r=this.structParentIds.get(e);if(!r){r=[];this.structParentIds.put(e,r)}r.push([t,a])}addAnnotationIdToPage(e,t){this.#Z(e,t,Vn)}readRoleMap(){const e=this.dict.get("RoleMap");if(e instanceof Dict)for(const[t,a]of e)a instanceof Name&&this.roleMap.set(t,a.name)}static async canCreateStructureTree({catalogRef:e,pdfManager:t,newAnnotationsByPage:a}){if(!(e instanceof Ref)){warn("Cannot save the struct tree: no catalog reference.");return!1}let r=0,i=!0;for(const[e,n]of a){const{ref:a}=await t.getPage(e);if(!(a instanceof Ref)){warn(`Cannot save the struct tree: page ${e} has no ref.`);i=!0;break}for(const e of n)if(e.accessibilityData?.type){e.parentTreeId=r++;i=!1}}if(i){for(const e of a.values())for(const t of e)delete t.parentTreeId;return!1}return!0}static async createStructureTree({newAnnotationsByPage:e,xref:t,catalogRef:a,pdfManager:r,changes:i}){const n=await r.ensureCatalog("cloneDict"),s=new RefSetCache;s.put(a,n);const o=t.getNewTemporaryRef();n.set("StructTreeRoot",o);const c=new Dict(t);c.set("Type",Name.get("StructTreeRoot"));const l=t.getNewTemporaryRef();c.set("ParentTree",l);const h=[];c.set("K",h);s.put(o,c);const u=new Dict(t),d=[];u.set("Nums",d);const f=await this.#Q({newAnnotationsByPage:e,structTreeRootRef:o,structTreeRoot:null,kids:h,nums:d,xref:t,pdfManager:r,changes:i,cache:s});c.set("ParentTreeNextKey",f);s.put(l,u);for(const[e,t]of s.items())i.put(e,{data:t})}async canUpdateStructTree({pdfManager:e,newAnnotationsByPage:t}){if(!this.ref){warn("Cannot update the struct tree: no root reference.");return!1}let a=this.dict.get("ParentTreeNextKey");if(!Number.isInteger(a)||a<0){warn("Cannot update the struct tree: invalid next key.");return!1}const r=this.dict.get("ParentTree");if(!(r instanceof Dict)){warn("Cannot update the struct tree: ParentTree isn\'t a dict.");return!1}const i=r.get("Nums");if(!Array.isArray(i)){warn("Cannot update the struct tree: nums isn\'t an array.");return!1}const n=new NumberTree(r,this.xref);for(const a of t.keys()){const{pageDict:t}=await e.getPage(a);if(!t.has("StructParents"))continue;const r=t.get("StructParents");if(!Number.isInteger(r)||!Array.isArray(n.get(r))){warn(`Cannot save the struct tree: page ${a} has a wrong id.`);return!1}}let s=!0;for(const[r,i]of t){const{pageDict:t}=await e.getPage(r);StructTreeRoot.#ee({elements:i,xref:this.xref,pageDict:t,numberTree:n});for(const e of i)if(e.accessibilityData?.type){e.accessibilityData.structParent>=0||(e.parentTreeId=a++);s=!1}}if(s){for(const e of t.values())for(const t of e){delete t.parentTreeId;delete t.structTreeParent}return!1}return!0}async updateStructureTree({newAnnotationsByPage:e,pdfManager:t,changes:a}){const{ref:r,xref:i}=this,n=this.dict.clone(),s=new RefSetCache;s.put(r,n);let o,c=n.getRaw("ParentTree");if(c instanceof Ref)o=i.fetch(c);else{o=c;c=i.getNewTemporaryRef();n.set("ParentTree",c)}o=o.clone();s.put(c,o);let l=o.getRaw("Nums"),h=null;if(l instanceof Ref){h=l;l=i.fetch(h)}l=l.slice();h||o.set("Nums",l);const u=await StructTreeRoot.#Q({newAnnotationsByPage:e,structTreeRootRef:r,structTreeRoot:this,kids:null,nums:l,xref:i,pdfManager:t,changes:a,cache:s});if(-1!==u){n.set("ParentTreeNextKey",u);h&&s.put(h,l);for(const[e,t]of s.items())a.put(e,{data:t})}}static async#Q({newAnnotationsByPage:e,structTreeRootRef:t,structTreeRoot:a,kids:r,nums:i,xref:n,pdfManager:s,changes:o,cache:c}){const l=Name.get("OBJR");let h,u=-1;for(const[d,f]of e){const e=await s.getPage(d),{ref:g}=e,p=g instanceof Ref;for(const{accessibilityData:s,ref:m,parentTreeId:b,structTreeParent:y}of f){if(!s?.type)continue;const{structParent:f}=s;if(a&&Number.isInteger(f)&&f>=0){let t=(h||=new Map).get(d);if(void 0===t){t=new StructTreePage(a,e.pageDict).collectObjects(g);h.set(d,t)}const r=t?.get(f);if(r){const e=n.fetch(r).clone();StructTreeRoot.#te(e,s);o.put(r,{data:e});continue}}u=Math.max(u,b);const w=n.getNewTemporaryRef(),x=new Dict(n);StructTreeRoot.#te(x,s);await this.#ae({structTreeParent:y,tagDict:x,newTagRef:w,structTreeRootRef:t,fallbackKids:r,xref:n,cache:c});const S=new Dict(n);x.set("K",S);S.set("Type",l);p&&S.set("Pg",g);S.set("Obj",m);c.put(w,x);i.push(b,w)}}return u+1}static#te(e,{type:t,title:a,lang:r,alt:i,expanded:n,actualText:s}){e.set("S",Name.get(t));a&&e.set("T",stringToAsciiOrUTF16BE(a));r&&e.set("Lang",stringToAsciiOrUTF16BE(r));i&&e.set("Alt",stringToAsciiOrUTF16BE(i));n&&e.set("E",stringToAsciiOrUTF16BE(n));s&&e.set("ActualText",stringToAsciiOrUTF16BE(s))}static#ee({elements:e,xref:t,pageDict:a,numberTree:r}){const i=new Map;for(const t of e)if(t.structTreeParentId){const e=parseInt(t.structTreeParentId.split("_mc")[1],10);let a=i.get(e);if(!a){a=[];i.set(e,a)}a.push(t)}const n=a.get("StructParents");if(!Number.isInteger(n))return;const s=r.get(n),updateElement=(e,a,r)=>{const n=i.get(e);if(n){const e=a.getRaw("P"),i=t.fetchIfRef(e);if(e instanceof Ref&&i instanceof Dict){const e={ref:r,dict:a};for(const t of n)t.structTreeParent=e}return!0}return!1};for(const e of s){if(!(e instanceof Ref))continue;const a=t.fetch(e),r=a.get("K");if(Number.isInteger(r))updateElement(r,a,e);else if(Array.isArray(r))for(let i of r){i=t.fetchIfRef(i);if(Number.isInteger(i)&&updateElement(i,a,e))break;if(!(i instanceof Dict))continue;if(!isName(i.get("Type"),"MCR"))break;const r=i.get("MCID");if(Number.isInteger(r)&&updateElement(r,a,e))break}}}static async#ae({structTreeParent:e,tagDict:t,newTagRef:a,structTreeRootRef:r,fallbackKids:i,xref:n,cache:s}){let o,c=null;if(e){({ref:c}=e);o=e.dict.getRaw("P")||r}else o=r;t.set("P",o);const l=n.fetchIfRef(o);if(!l){i.push(a);return}let h=s.get(o);if(!h){h=l.clone();s.put(o,h)}const u=h.getRaw("K");let d=u instanceof Ref?s.get(u):null;if(!d){d=n.fetchIfRef(u);d=Array.isArray(d)?d.slice():[u];const e=n.getNewTemporaryRef();h.set("K",e);s.put(e,d)}const f=d.indexOf(c);d.splice(f>=0?f+1:d.length,0,a)}}class StructElementNode{constructor(e,t){this.tree=e;this.xref=e.xref;this.dict=t;this.kids=[];this.parseKids()}get role(){const e=this.dict.get("S"),t=e instanceof Name?e.name:"",{root:a}=this.tree;return a.roleMap.get(t)??t}parseKids(){let e=null;const t=this.dict.getRaw("Pg");t instanceof Ref&&(e=t.toString());const a=this.dict.get("K");if(Array.isArray(a))for(const t of a){const a=this.parseKid(e,this.xref.fetchIfRef(t));a&&this.kids.push(a)}else{const t=this.parseKid(e,a);t&&this.kids.push(t)}}parseKid(e,t){if(Number.isInteger(t))return this.tree.pageDict.objId!==e?null:new StructElement({type:zn,mcid:t,pageObjId:e});if(!(t instanceof Dict))return null;const a=t.getRaw("Pg");a instanceof Ref&&(e=a.toString());const r=t.get("Type")instanceof Name?t.get("Type").name:null;if("MCR"===r){if(this.tree.pageDict.objId!==e)return null;const a=t.getRaw("Stm");return new StructElement({type:$n,refObjId:a instanceof Ref?a.toString():null,pageObjId:e,mcid:t.get("MCID")})}if("OBJR"===r){if(this.tree.pageDict.objId!==e)return null;const a=t.getRaw("Obj");return new StructElement({type:Gn,refObjId:a instanceof Ref?a.toString():null,pageObjId:e})}return new StructElement({type:Kn,dict:t})}}class StructElement{constructor({type:e,dict:t=null,mcid:a=null,pageObjId:r=null,refObjId:i=null}){this.type=e;this.dict=t;this.mcid=a;this.pageObjId=r;this.refObjId=i;this.parentNode=null}}class StructTreePage{constructor(e,t){this.root=e;this.xref=e?.xref??null;this.rootDict=e?.dict??null;this.pageDict=t;this.nodes=[]}collectObjects(e){if(!(this.root&&this.rootDict&&e instanceof Ref))return null;const t=this.rootDict.get("ParentTree");if(!t)return null;const a=this.root.structParentIds?.get(e);if(!a)return null;const r=new Map,i=new NumberTree(t,this.xref);for(const[e]of a){const t=i.getRaw(e);t instanceof Ref&&r.set(e,t)}return r}parse(e){if(!(this.root&&this.rootDict&&e instanceof Ref))return;const t=this.rootDict.get("ParentTree");if(!t)return;const a=this.pageDict.get("StructParents"),r=this.root.structParentIds?.get(e);if(!Number.isInteger(a)&&!r)return;const i=new Map,n=new NumberTree(t,this.xref);if(Number.isInteger(a)){const e=n.get(a);if(Array.isArray(e))for(const t of e)t instanceof Ref&&this.addNode(this.xref.fetch(t),i)}if(r)for(const[e,t]of r){const a=n.get(e);if(a){const e=this.addNode(this.xref.fetchIfRef(a),i);1===e?.kids?.length&&e.kids[0].type===Gn&&(e.kids[0].type=t)}}}addNode(e,t,a=0){if(a>40){warn("StructTree MAX_DEPTH reached.");return null}if(!(e instanceof Dict))return null;if(t.has(e))return t.get(e);const r=new StructElementNode(this,e);t.set(e,r);const i=e.get("P");if(!(i instanceof Dict)||isName(i.get("Type"),"StructTreeRoot")){this.addTopLevelNode(e,r)||t.delete(e);return r}const n=this.addNode(i,t,a+1);if(!n)return r;let s=!1;for(const t of n.kids)if(t.type===Kn&&t.dict===e){t.parentNode=r;s=!0}s||t.delete(e);return r}addTopLevelNode(e,t){const a=this.rootDict.get("K");if(!a)return!1;if(a instanceof Dict){if(a.objId!==e.objId)return!1;this.nodes[0]=t;return!0}if(!Array.isArray(a))return!0;let r=!1;for(let i=0;i<a.length;i++){const n=a[i];if(n?.toString()===e.objId){this.nodes[i]=t;r=!0}}return r}get serializable(){function nodeToSerializable(e,t,a=0){if(a>40){warn("StructTree too deep to be fully serialized.");return}const r=Object.create(null);r.role=e.role;r.children=[];t.children.push(r);let i=e.dict.get("Alt");"string"!=typeof i&&(i=e.dict.get("ActualText"));"string"==typeof i&&(r.alt=stringToPDFString(i));const n=e.dict.get("A");if(n instanceof Dict){const e=lookupNormalRect(n.getArray("BBox"),null);if(e)r.bbox=e;else{const e=n.get("Width"),t=n.get("Height");"number"==typeof e&&e>0&&"number"==typeof t&&t>0&&(r.bbox=[0,0,e,t])}}const s=e.dict.get("Lang");"string"==typeof s&&(r.lang=stringToPDFString(s));for(const t of e.kids){const e=t.type===Kn?t.parentNode:null;e?nodeToSerializable(e,r,a+1):t.type===zn||t.type===$n?r.children.push({type:"content",id:`p${t.pageObjId}_mc${t.mcid}`}):t.type===Gn?r.children.push({type:"object",id:t.refObjId}):t.type===Vn&&r.children.push({type:"annotation",id:`pdfjs_internal_id_${t.refObjId}`})}}const e=Object.create(null);e.children=[];e.role="Root";for(const t of this.nodes)t&&nodeToSerializable(t,e);return e}}const Jn=function _isValidExplicitDest(e,t,a){if(!Array.isArray(a)||a.length<2)return!1;const[r,i,...n]=a;if(!e(r)&&!Number.isInteger(r))return!1;if(!t(i))return!1;const s=n.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;o=!1;break;default:return!1}for(const e of n)if(!("number"==typeof e||o&&null===e))return!1;return!0}.bind(null,(e=>e instanceof Ref),isName);function fetchDest(e){e instanceof Dict&&(e=e.get("D"));return Jn(e)?e:null}function fetchRemoteDest(e){let t=e.get("D");if(t){t instanceof Name&&(t=t.name);if("string"==typeof t)return stringToPDFString(t,!0);if(Jn(t))return JSON.stringify(t)}return null}class Catalog{#re=null;#ie=null;builtInCMapCache=new Map;fontCache=new RefSetCache;globalColorSpaceCache=new GlobalColorSpaceCache;globalImageCache=new GlobalImageCache;nonBlendModesSet=new RefSet;pageDictCache=new RefSetCache;pageIndexCache=new RefSetCache;pageKidsCountCache=new RefSetCache;standardFontDataCache=new Map;systemFontCache=new Map;constructor(e,t){this.pdfManager=e;this.xref=t;this.#ie=t.getCatalogObj();if(!(this.#ie instanceof Dict))throw new FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict}cloneDict(){return this.#ie.clone()}get version(){const e=this.#ie.get("Version");if(e instanceof Name){if(Ca.test(e.name))return shadow(this,"version",e.name);warn(`Invalid PDF catalog version: ${e.name}`)}return shadow(this,"version",null)}get lang(){const e=this.#ie.get("Lang");return shadow(this,"lang",e&&"string"==typeof e?stringToPDFString(e):null)}get needsRendering(){const e=this.#ie.get("NeedsRendering");return shadow(this,"needsRendering","boolean"==typeof e&&e)}get collection(){let e=null;try{const t=this.#ie.get("Collection");t instanceof Dict&&t.size>0&&(e=t)}catch(e){if(e instanceof MissingDataException)throw e;info("Cannot fetch Collection entry; assuming no collection is present.")}return shadow(this,"collection",e)}get acroForm(){let e=null;try{const t=this.#ie.get("AcroForm");t instanceof Dict&&t.size>0&&(e=t)}catch(e){if(e instanceof MissingDataException)throw e;info("Cannot fetch AcroForm entry; assuming no forms are present.")}return shadow(this,"acroForm",e)}get acroFormRef(){const e=this.#ie.getRaw("AcroForm");return shadow(this,"acroFormRef",e instanceof Ref?e:null)}get metadata(){const e=this.#ie.getRaw("Metadata");if(!(e instanceof Ref))return shadow(this,"metadata",null);let t=null;try{const a=this.xref.fetch(e,!this.xref.encrypt?.encryptMetadata);if(a instanceof BaseStream&&a.dict instanceof Dict){const e=a.dict.get("Type"),r=a.dict.get("Subtype");if(isName(e,"Metadata")&&isName(r,"XML")){const e=stringToUTF8String(a.getString());e&&(t=new MetadataParser(e).serializable)}}}catch(e){if(e instanceof MissingDataException)throw e;info(`Skipping invalid Metadata: "${e}".`)}return shadow(this,"metadata",t)}get markInfo(){let e=null;try{e=this.#ne()}catch(e){if(e instanceof MissingDataException)throw e;warn("Unable to read mark info.")}return shadow(this,"markInfo",e)}#ne(){const e=this.#ie.get("MarkInfo");if(!(e instanceof Dict))return null;const t={Marked:!1,UserProperties:!1,Suspects:!1};for(const a in t){const r=e.get(a);"boolean"==typeof r&&(t[a]=r)}return t}get structTreeRoot(){let e=null;try{e=this.#se()}catch(e){if(e instanceof MissingDataException)throw e;warn("Unable read to structTreeRoot info.")}return shadow(this,"structTreeRoot",e)}#se(){const e=this.#ie.getRaw("StructTreeRoot"),t=this.xref.fetchIfRef(e);if(!(t instanceof Dict))return null;const a=new StructTreeRoot(this.xref,t,e);a.init();return a}get toplevelPagesDict(){const e=this.#ie.get("Pages");if(!(e instanceof Dict))throw new FormatError("Invalid top-level pages dictionary.");return shadow(this,"toplevelPagesDict",e)}get documentOutline(){let e=null;try{e=this.#oe()}catch(e){if(e instanceof MissingDataException)throw e;warn("Unable to read document outline.")}return shadow(this,"documentOutline",e)}#oe(){let e=this.#ie.get("Outlines");if(!(e instanceof Dict))return null;e=e.getRaw("First");if(!(e instanceof Ref))return null;const t={items:[]},a=[{obj:e,parent:t}],r=new RefSet;r.put(e);const i=this.xref,n=new Uint8ClampedArray(3);for(;a.length>0;){const t=a.shift(),s=i.fetchIfRef(t.obj);if(null===s)continue;s.has("Title")||warn("Invalid outline item encountered.");const o={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:s,resultObj:o,docBaseUrl:this.baseUrl,docAttachments:this.attachments});const c=s.get("Title"),l=s.get("F")||0,h=s.getArray("C"),u=s.get("Count");let d=n;!isNumberArray(h,3)||0===h[0]&&0===h[1]&&0===h[2]||(d=ColorSpaceUtils.rgb.getRgb(h,0));const f={action:o.action,attachment:o.attachment,dest:o.dest,url:o.url,unsafeUrl:o.unsafeUrl,newWindow:o.newWindow,setOCGState:o.setOCGState,title:"string"==typeof c?stringToPDFString(c):"",color:d,count:Number.isInteger(u)?u:void 0,bold:!!(2&l),italic:!!(1&l),items:[]};t.parent.items.push(f);e=s.getRaw("First");if(e instanceof Ref&&!r.has(e)){a.push({obj:e,parent:f});r.put(e)}e=s.getRaw("Next");if(e instanceof Ref&&!r.has(e)){a.push({obj:e,parent:t.parent});r.put(e)}}return t.items.length>0?t.items:null}get permissions(){let e=null;try{e=this.#ce()}catch(e){if(e instanceof MissingDataException)throw e;warn("Unable to read permissions.")}return shadow(this,"permissions",e)}#ce(){const e=this.xref.trailer.get("Encrypt");if(!(e instanceof Dict))return null;let t=e.get("P");if("number"!=typeof t)return null;t+=2**32;const a=[];for(const e in w){const r=w[e];t&r&&a.push(r)}return a}get optionalContentConfig(){let e=null;try{const t=this.#ie.get("OCProperties");if(!t)return shadow(this,"optionalContentConfig",null);const a=t.get("D");if(!a)return shadow(this,"optionalContentConfig",null);const r=t.get("OCGs");if(!Array.isArray(r))return shadow(this,"optionalContentConfig",null);const i=new RefSetCache;for(const e of r)e instanceof Ref&&!i.has(e)&&i.put(e,this.#le(e));e=this.#he(a,i)}catch(e){if(e instanceof MissingDataException)throw e;warn(`Unable to read optional content config: ${e}`)}return shadow(this,"optionalContentConfig",e)}#le(e){const t=this.xref.fetch(e),a={id:e.toString(),name:null,intent:null,usage:{print:null,view:null},rbGroups:[]},r=t.get("Name");"string"==typeof r&&(a.name=stringToPDFString(r));let i=t.getArray("Intent");Array.isArray(i)||(i=[i]);i.every((e=>e instanceof Name))&&(a.intent=i.map((e=>e.name)));const n=t.get("Usage");if(!(n instanceof Dict))return a;const s=a.usage,o=n.get("Print");if(o instanceof Dict){const e=o.get("PrintState");if(e instanceof Name)switch(e.name){case"ON":case"OFF":s.print={printState:e.name}}}const c=n.get("View");if(c instanceof Dict){const e=c.get("ViewState");if(e instanceof Name)switch(e.name){case"ON":case"OFF":s.view={viewState:e.name}}}return a}#he(e,t){function parseOnOff(e){const a=[];if(Array.isArray(e))for(const r of e)r instanceof Ref&&t.has(r)&&a.push(r.toString());return a}function parseOrder(e,a=0){if(!Array.isArray(e))return null;const i=[];for(const n of e){if(n instanceof Ref&&t.has(n)){r.put(n);i.push(n.toString());continue}const e=parseNestedOrder(n,a);e&&i.push(e)}if(a>0)return i;const n=[];for(const[e]of t.items())r.has(e)||n.push(e.toString());n.length&&i.push({name:null,order:n});return i}function parseNestedOrder(e,t){if(++t>i){warn("parseNestedOrder - reached MAX_NESTED_LEVELS.");return null}const r=a.fetchIfRef(e);if(!Array.isArray(r))return null;const n=a.fetchIfRef(r[0]);if("string"!=typeof n)return null;const s=parseOrder(r.slice(1),t);return s?.length?{name:stringToPDFString(n),order:s}:null}const a=this.xref,r=new RefSet,i=10;!function parseRBGroups(e){if(Array.isArray(e))for(const r of e){const e=a.fetchIfRef(r);if(!Array.isArray(e)||!e.length)continue;const i=new Set;for(const a of e)if(a instanceof Ref&&t.has(a)&&!i.has(a.toString())){i.add(a.toString());t.get(a).rbGroups.push(i)}}}(e.get("RBGroups"));return{name:"string"==typeof e.get("Name")?stringToPDFString(e.get("Name")):null,creator:"string"==typeof e.get("Creator")?stringToPDFString(e.get("Creator")):null,baseState:e.get("BaseState")instanceof Name?e.get("BaseState").name:null,on:parseOnOff(e.get("ON")),off:parseOnOff(e.get("OFF")),order:parseOrder(e.get("Order")),groups:[...t]}}setActualNumPages(e=null){this.#re=e}get hasActualNumPages(){return null!==this.#re}get _pagesCount(){const e=this.toplevelPagesDict.get("Count");if(!Number.isInteger(e))throw new FormatError("Page count in top-level pages dictionary is not an integer.");return shadow(this,"_pagesCount",e)}get numPages(){return this.#re??this._pagesCount}get destinations(){const e=this.#ue(),t=Object.create(null);for(const a of e)if(a instanceof NameTree)for(const[e,r]of a.getAll()){const a=fetchDest(r);a&&(t[stringToPDFString(e,!0)]=a)}else if(a instanceof Dict)for(const[e,r]of a){const a=fetchDest(r);a&&(t[stringToPDFString(e,!0)]||=a)}return shadow(this,"destinations",t)}getDestination(e){if(this.hasOwnProperty("destinations"))return this.destinations[e]??null;const t=this.#ue();for(const a of t)if(a instanceof NameTree||a instanceof Dict){const t=fetchDest(a.get(e));if(t)return t}if(t.length){const t=this.destinations[e];if(t)return t}return null}#ue(){const e=this.#ie.get("Names"),t=[];e?.has("Dests")&&t.push(new NameTree(e.getRaw("Dests"),this.xref));this.#ie.has("Dests")&&t.push(this.#ie.get("Dests"));return t}get pageLabels(){let e=null;try{e=this.#de()}catch(e){if(e instanceof MissingDataException)throw e;warn("Unable to read page labels.")}return shadow(this,"pageLabels",e)}#de(){const e=this.#ie.getRaw("PageLabels");if(!e)return null;const t=new Array(this.numPages);let a=null,r="";const i=new NumberTree(e,this.xref).getAll();let n="",s=1;for(let e=0,o=this.numPages;e<o;e++){const o=i.get(e);if(void 0!==o){if(!(o instanceof Dict))throw new FormatError("PageLabel is not a dictionary.");if(o.has("Type")&&!isName(o.get("Type"),"PageLabel"))throw new FormatError("Invalid type in PageLabel dictionary.");if(o.has("S")){const e=o.get("S");if(!(e instanceof Name))throw new FormatError("Invalid style in PageLabel dictionary.");a=e.name}else a=null;if(o.has("P")){const e=o.get("P");if("string"!=typeof e)throw new FormatError("Invalid prefix in PageLabel dictionary.");r=stringToPDFString(e)}else r="";if(o.has("St")){const e=o.get("St");if(!(Number.isInteger(e)&&e>=1))throw new FormatError("Invalid start in PageLabel dictionary.");s=e}else s=1}switch(a){case"D":n=s;break;case"R":case"r":n=toRomanNumerals(s,"r"===a);break;case"A":case"a":const e=26,t="a"===a?97:65,r=s-1;n=String.fromCharCode(t+r%e).repeat(Math.floor(r/e)+1);break;default:if(a)throw new FormatError(`Invalid style "${a}" in PageLabel dictionary.`);n=""}t[e]=r+n;s++}return t}get pageLayout(){const e=this.#ie.get("PageLayout");let t="";if(e instanceof Name)switch(e.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":t=e.name}return shadow(this,"pageLayout",t)}get pageMode(){const e=this.#ie.get("PageMode");let t="UseNone";if(e instanceof Name)switch(e.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":t=e.name}return shadow(this,"pageMode",t)}get viewerPreferences(){const e=this.#ie.get("ViewerPreferences");if(!(e instanceof Dict))return shadow(this,"viewerPreferences",null);let t=null;for(const[a,r]of e){let e;switch(a){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":"boolean"==typeof r&&(e=r);break;case"NonFullScreenPageMode":if(r instanceof Name)switch(r.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":e=r.name;break;default:e="UseNone"}break;case"Direction":if(r instanceof Name)switch(r.name){case"L2R":case"R2L":e=r.name;break;default:e="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(r instanceof Name)switch(r.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":e=r.name;break;default:e="CropBox"}break;case"PrintScaling":if(r instanceof Name)switch(r.name){case"None":case"AppDefault":e=r.name;break;default:e="AppDefault"}break;case"Duplex":if(r instanceof Name)switch(r.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":e=r.name;break;default:e="None"}break;case"PrintPageRange":if(Array.isArray(r)&&r.length%2==0){r.every(((e,t,a)=>Number.isInteger(e)&&e>0&&(0===t||e>=a[t-1])&&e<=this.numPages))&&(e=r)}break;case"NumCopies":Number.isInteger(r)&&r>0&&(e=r);break;default:warn(`Ignoring non-standard key in ViewerPreferences: ${a}.`);continue}if(void 0!==e){t??=Object.create(null);t[a]=e}else warn(`Bad value, for key "${a}", in ViewerPreferences: ${r}.`)}return shadow(this,"viewerPreferences",t)}get openAction(){const e=this.#ie.get("OpenAction"),t=Object.create(null);if(e instanceof Dict){const a=new Dict(this.xref);a.set("A",e);const r={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:a,resultObj:r});Array.isArray(r.dest)?t.dest=r.dest:r.action&&(t.action=r.action)}else Jn(e)&&(t.dest=e);return shadow(this,"openAction",objectSize(t)>0?t:null)}get attachments(){const e=this.#ie.get("Names");let t=null;if(e instanceof Dict&&e.has("EmbeddedFiles")){const a=new NameTree(e.getRaw("EmbeddedFiles"),this.xref);for(const[e,r]of a.getAll()){const a=new FileSpec(r,this.xref);t??=Object.create(null);t[stringToPDFString(e,!0)]=a.serializable}}return shadow(this,"attachments",t)}get xfaImages(){const e=this.#ie.get("Names");let t=null;if(e instanceof Dict&&e.has("XFAImages")){const a=new NameTree(e.getRaw("XFAImages"),this.xref);for(const[e,r]of a.getAll())if(r instanceof BaseStream){t??=new Map;t.set(stringToPDFString(e,!0),r.getBytes())}}return shadow(this,"xfaImages",t)}#fe(){const e=this.#ie.get("Names");let t=null;function appendIfJavaScriptDict(e,a){if(!(a instanceof Dict))return;if(!isName(a.get("S"),"JavaScript"))return;let r=a.get("JS");if(r instanceof BaseStream)r=r.getString();else if("string"!=typeof r)return;r=stringToPDFString(r,!0).replaceAll("\\0","");r&&(t||=new Map).set(e,r)}if(e instanceof Dict&&e.has("JavaScript")){const t=new NameTree(e.getRaw("JavaScript"),this.xref);for(const[e,a]of t.getAll())appendIfJavaScriptDict(stringToPDFString(e,!0),a)}const a=this.#ie.get("OpenAction");a&&appendIfJavaScriptDict("OpenAction",a);return t}get jsActions(){const e=this.#fe();let t=collectActions(this.xref,this.#ie,we);if(e){t||=Object.create(null);for(const[a,r]of e)a in t?t[a].push(r):t[a]=[r]}return shadow(this,"jsActions",t)}async cleanup(e=!1){clearGlobalCaches();this.globalColorSpaceCache.clear();this.globalImageCache.clear(e);this.pageKidsCountCache.clear();this.pageIndexCache.clear();this.pageDictCache.clear();this.nonBlendModesSet.clear();for(const{dict:e}of await Promise.all(this.fontCache))delete e.cacheKey;this.fontCache.clear();this.builtInCMapCache.clear();this.standardFontDataCache.clear();this.systemFontCache.clear()}async getPageDict(e){const t=[this.toplevelPagesDict],a=new RefSet,r=this.#ie.getRaw("Pages");r instanceof Ref&&a.put(r);const i=this.xref,n=this.pageKidsCountCache,s=this.pageIndexCache,o=this.pageDictCache;let c=0;for(;t.length;){const r=t.pop();if(r instanceof Ref){const l=n.get(r);if(l>=0&&c+l<=e){c+=l;continue}if(a.has(r))throw new FormatError("Pages tree contains circular reference.");a.put(r);const h=await(o.get(r)||i.fetchAsync(r));if(h instanceof Dict){let t=h.getRaw("Type");t instanceof Ref&&(t=await i.fetchAsync(t));if(isName(t,"Page")||!h.has("Kids")){n.has(r)||n.put(r,1);s.has(r)||s.put(r,c);if(c===e)return[h,r];c++;continue}}t.push(h);continue}if(!(r instanceof Dict))throw new FormatError("Page dictionary kid reference points to wrong type of object.");const{objId:l}=r;let h=r.getRaw("Count");h instanceof Ref&&(h=await i.fetchAsync(h));if(Number.isInteger(h)&&h>=0){l&&!n.has(l)&&n.put(l,h);if(c+h<=e){c+=h;continue}}let u=r.getRaw("Kids");u instanceof Ref&&(u=await i.fetchAsync(u));if(!Array.isArray(u)){let t=r.getRaw("Type");t instanceof Ref&&(t=await i.fetchAsync(t));if(isName(t,"Page")||!r.has("Kids")){if(c===e)return[r,null];c++;continue}throw new FormatError("Page dictionary kids object is not an array.")}for(let e=u.length-1;e>=0;e--){const a=u[e];t.push(a);r===this.toplevelPagesDict&&a instanceof Ref&&!o.has(a)&&o.put(a,i.fetchAsync(a))}}throw new Error(`Page index ${e} not found.`)}async getAllPageDicts(e=!1){const{ignoreErrors:t}=this.pdfManager.evaluatorOptions,a=[{currentNode:this.toplevelPagesDict,posInKids:0}],r=new RefSet,i=this.#ie.getRaw("Pages");i instanceof Ref&&r.put(i);const n=new Map,s=this.xref,o=this.pageIndexCache;let c=0;function addPageDict(e,t){t&&!o.has(t)&&o.put(t,c);n.set(c++,[e,t])}function addPageError(a){if(a instanceof XRefEntryException&&!e)throw a;if(e&&t&&0===c){warn(`getAllPageDicts - Skipping invalid first page: "${a}".`);a=Dict.empty}n.set(c++,[a,null])}for(;a.length>0;){const e=a.at(-1),{currentNode:t,posInKids:i}=e;let n=t.getRaw("Kids");if(n instanceof Ref)try{n=await s.fetchAsync(n)}catch(e){addPageError(e);break}if(!Array.isArray(n)){addPageError(new FormatError("Page dictionary kids object is not an array."));break}if(i>=n.length){a.pop();continue}const o=n[i];let c;if(o instanceof Ref){if(r.has(o)){addPageError(new FormatError("Pages tree contains circular reference."));break}r.put(o);try{c=await s.fetchAsync(o)}catch(e){addPageError(e);break}}else c=o;if(!(c instanceof Dict)){addPageError(new FormatError("Page dictionary kid reference points to wrong type of object."));break}let l=c.getRaw("Type");if(l instanceof Ref)try{l=await s.fetchAsync(l)}catch(e){addPageError(e);break}isName(l,"Page")||!c.has("Kids")?addPageDict(c,o instanceof Ref?o:null):a.push({currentNode:c,posInKids:0});e.posInKids++}return n}getPageIndex(e){const t=this.pageIndexCache.get(e);if(void 0!==t)return Promise.resolve(t);const a=this.xref;let r=0;const next=t=>function pagesBeforeRef(t){let r,i=0;return a.fetchAsync(t).then((function(a){if(isRefsEqual(t,e)&&!isDict(a,"Page")&&!(a instanceof Dict&&!a.has("Type")&&a.has("Contents")))throw new FormatError("The reference does not point to a /Page dictionary.");if(!a)return null;if(!(a instanceof Dict))throw new FormatError("Node must be a dictionary.");r=a.getRaw("Parent");return a.getAsync("Parent")})).then((function(e){if(!e)return null;if(!(e instanceof Dict))throw new FormatError("Parent must be a dictionary.");return e.getAsync("Kids")})).then((function(e){if(!e)return null;const n=[];let s=!1;for(const r of e){if(!(r instanceof Ref))throw new FormatError("Kid must be a reference.");if(isRefsEqual(r,t)){s=!0;break}n.push(a.fetchAsync(r).then((function(e){if(!(e instanceof Dict))throw new FormatError("Kid node must be a dictionary.");e.has("Count")?i+=e.get("Count"):i++})))}if(!s)throw new FormatError("Kid reference not found in parent\'s kids.");return Promise.all(n).then((()=>[i,r]))}))}(t).then((t=>{if(!t){this.pageIndexCache.put(e,r);return r}const[a,i]=t;r+=a;return next(i)}));return next(e)}get baseUrl(){const e=this.#ie.get("URI");if(e instanceof Dict){const t=e.get("Base");if("string"==typeof t){const e=createValidAbsoluteUrl(t,null,{tryConvertEncoding:!0});if(e)return shadow(this,"baseUrl",e.href)}}return shadow(this,"baseUrl",this.pdfManager.docBaseUrl)}static parseDestDictionary({destDict:e,resultObj:t,docBaseUrl:a=null,docAttachments:r=null}){if(!(e instanceof Dict)){warn("parseDestDictionary: `destDict` must be a dictionary.");return}let i,n,s=e.get("A");if(!(s instanceof Dict))if(e.has("Dest"))s=e.get("Dest");else{s=e.get("AA");s instanceof Dict&&(s.has("D")?s=s.get("D"):s.has("U")&&(s=s.get("U")))}if(s instanceof Dict){const e=s.get("S");if(!(e instanceof Name)){warn("parseDestDictionary: Invalid type in Action dictionary.");return}const a=e.name;switch(a){case"ResetForm":const e=s.get("Flags"),o=!(1&("number"==typeof e?e:0)),c=[],l=[];for(const e of s.get("Fields")||[])e instanceof Ref?l.push(e.toString()):"string"==typeof e&&c.push(stringToPDFString(e));t.resetForm={fields:c,refs:l,include:o};break;case"URI":i=s.get("URI");i instanceof Name&&(i="/"+i.name);break;case"GoTo":n=s.get("D");break;case"Launch":case"GoToR":const h=s.get("F");if(h instanceof Dict){const e=new FileSpec(h,null,!0),{rawFilename:t}=e.serializable;i=t}else"string"==typeof h&&(i=h);const u=fetchRemoteDest(s);u&&"string"==typeof i&&(i=i.split("#",1)[0]+"#"+u);const d=s.get("NewWindow");"boolean"==typeof d&&(t.newWindow=d);break;case"GoToE":const f=s.get("T");let g;if(r&&f instanceof Dict){const e=f.get("R"),t=f.get("N");isName(e,"C")&&"string"==typeof t&&(g=r[stringToPDFString(t,!0)])}if(g){t.attachment=g;const e=fetchRemoteDest(s);e&&(t.attachmentDest=e)}else warn(\'parseDestDictionary - unimplemented "GoToE" action.\');break;case"Named":const p=s.get("N");p instanceof Name&&(t.action=p.name);break;case"SetOCGState":const m=s.get("State"),b=s.get("PreserveRB");if(!Array.isArray(m)||0===m.length)break;const y=[];for(const e of m)if(e instanceof Name)switch(e.name){case"ON":case"OFF":case"Toggle":y.push(e.name)}else e instanceof Ref&&y.push(e.toString());if(y.length!==m.length)break;t.setOCGState={state:y,preserveRB:"boolean"!=typeof b||b};break;case"JavaScript":const w=s.get("JS");let x;w instanceof BaseStream?x=w.getString():"string"==typeof w&&(x=w);const S=x&&recoverJsURL(stringToPDFString(x,!0));if(S){i=S.url;t.newWindow=S.newWindow;break}default:if("JavaScript"===a||"SubmitForm"===a)break;warn(`parseDestDictionary - unsupported action: "${a}".`)}}else e.has("Dest")&&(n=e.get("Dest"));if("string"==typeof i){const e=createValidAbsoluteUrl(i,a,{addDefaultProtocol:!0,tryConvertEncoding:!0});e&&(t.url=e.href);t.unsafeUrl=i}if(n){n instanceof Name&&(n=n.name);"string"==typeof n?t.dest=stringToPDFString(n,!0):Jn(n)&&(t.dest=n)}}}function addChildren(e,t){if(e instanceof Dict)e=e.getRawValues();else if(e instanceof BaseStream)e=e.dict.getRawValues();else if(!Array.isArray(e))return;for(const r of e)((a=r)instanceof Ref||a instanceof Dict||a instanceof BaseStream||Array.isArray(a))&&t.push(r);var a}class ObjectLoader{refSet=new RefSet;constructor(e,t,a){this.dict=e;this.keys=t;this.xref=a}async load(){const{keys:e,dict:t}=this,a=[];for(const r of e){const e=t.getRaw(r);void 0!==e&&a.push(e)}await this.#ge(a);this.refSet=null}async#ge(e){const t=[],a=[];for(;e.length;){let r=e.pop();if(r instanceof Ref){if(this.refSet.has(r))continue;try{this.refSet.put(r);r=this.xref.fetch(r)}catch(e){if(!(e instanceof MissingDataException)){warn(`ObjectLoader.#walk - requesting all data: "${e}".`);await this.xref.stream.manager.requestAllChunks();return}t.push(r);a.push({begin:e.begin,end:e.end})}}if(r instanceof BaseStream){const e=r.getBaseStreams();if(e){let i=!1;for(const t of e)if(!t.isDataLoaded){i=!0;a.push({begin:t.start,end:t.end})}i&&t.push(r)}}addChildren(r,e)}if(a.length){await this.xref.stream.manager.requestRanges(a);for(const e of t)e instanceof Ref&&this.refSet.remove(e);await this.#ge(t)}}static async load(e,t,a){if(a.stream.isDataLoaded)return;const r=new ObjectLoader(e,t,a);await r.load()}}const Yn=Symbol(),Zn=Symbol(),Qn=Symbol(),es=Symbol(),ts=Symbol(),as=Symbol(),rs=Symbol(),is=Symbol(),ns=Symbol(),ss=Symbol("content"),os=Symbol("data"),cs=Symbol(),ls=Symbol("extra"),hs=Symbol(),us=Symbol(),ds=Symbol(),fs=Symbol(),gs=Symbol(),ps=Symbol(),ms=Symbol(),bs=Symbol(),ys=Symbol(),ws=Symbol(),xs=Symbol(),Ss=Symbol(),As=Symbol(),ks=Symbol(),Cs=Symbol(),vs=Symbol(),Fs=Symbol(),Is=Symbol(),Ts=Symbol(),Os=Symbol(),Ms=Symbol(),Ds=Symbol(),Bs=Symbol(),Rs=Symbol(),Ns=Symbol(),Es=Symbol(),Ls=Symbol(),js=Symbol(),_s=Symbol(),Us=Symbol(),Xs=Symbol(),qs=Symbol(),Hs=Symbol("namespaceId"),Ws=Symbol("nodeName"),zs=Symbol(),$s=Symbol(),Gs=Symbol(),Vs=Symbol(),Ks=Symbol(),Js=Symbol(),Ys=Symbol(),Zs=Symbol(),Qs=Symbol("root"),eo=Symbol(),to=Symbol(),ao=Symbol(),ro=Symbol(),io=Symbol(),no=Symbol(),so=Symbol(),oo=Symbol(),co=Symbol(),lo=Symbol(),ho=Symbol(),uo=Symbol("uid"),fo=Symbol(),go={config:{id:0,check:e=>e.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:e=>e.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:e=>e.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:e=>e.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:e=>e.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:e=>"http://ns.adobe.com/xdp/pdf/"===e},signature:{id:6,check:e=>"http://www.w3.org/2000/09/xmldsig#"===e},sourceSet:{id:7,check:e=>e.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:e=>"http://www.w3.org/1999/XSL/Transform"===e},template:{id:9,check:e=>e.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:e=>e.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:e=>"http://ns.adobe.com/xdp/"===e},xfdf:{id:12,check:e=>"http://ns.adobe.com/xfdf/"===e},xhtml:{id:13,check:e=>"http://www.w3.org/1999/xhtml"===e},xmpmeta:{id:14,check:e=>"http://ns.adobe.com/xmpmeta/"===e}},po={pt:e=>e,cm:e=>e/2.54*72,mm:e=>e/25.4*72,in:e=>72*e,px:e=>e},mo=/([+-]?\\d+\\.?\\d*)(.*)/;function stripQuotes(e){return e.startsWith("\'")||e.startsWith(\'"\')?e.slice(1,-1):e}function getInteger({data:e,defaultValue:t,validate:a}){if(!e)return t;e=e.trim();const r=parseInt(e,10);return!isNaN(r)&&a(r)?r:t}function getFloat({data:e,defaultValue:t,validate:a}){if(!e)return t;e=e.trim();const r=parseFloat(e);return!isNaN(r)&&a(r)?r:t}function getKeyword({data:e,defaultValue:t,validate:a}){return e&&a(e=e.trim())?e:t}function getStringOption(e,t){return getKeyword({data:e,defaultValue:t[0],validate:e=>t.includes(e)})}function getMeasurement(e,t="0"){t||="0";if(!e)return getMeasurement(t);const a=e.trim().match(mo);if(!a)return getMeasurement(t);const[,r,i]=a,n=parseFloat(r);if(isNaN(n))return getMeasurement(t);if(0===n)return 0;const s=po[i];return s?s(n):n}function getRatio(e){if(!e)return{num:1,den:1};const t=e.split(":",2).map((e=>parseFloat(e.trim()))).filter((e=>!isNaN(e)));1===t.length&&t.push(1);if(0===t.length)return{num:1,den:1};const[a,r]=t;return{num:a,den:r}}function getRelevant(e){return e?e.trim().split(/\\s+/).map((e=>({excluded:"-"===e[0],viewname:e.substring(1)}))):[]}class HTMLResult{static get FAILURE(){return shadow(this,"FAILURE",new HTMLResult(!1,null,null,null))}static get EMPTY(){return shadow(this,"EMPTY",new HTMLResult(!0,null,null,null))}constructor(e,t,a,r){this.success=e;this.html=t;this.bbox=a;this.breakNode=r}isBreak(){return!!this.breakNode}static breakNode(e){return new HTMLResult(!1,null,null,e)}static success(e,t=null){return new HTMLResult(!0,e,t,null)}}class FontFinder{constructor(e){this.fonts=new Map;this.cache=new Map;this.warned=new Set;this.defaultFont=null;this.add(e)}add(e,t=null){for(const t of e)this.addPdfFont(t);for(const e of this.fonts.values())e.regular||(e.regular=e.italic||e.bold||e.bolditalic);if(!t||0===t.size)return;const a=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const e of t)this.fonts.set(e,a)}addPdfFont(e){const t=e.cssFontInfo,a=t.fontFamily;let r=this.fonts.get(a);if(!r){r=Object.create(null);this.fonts.set(a,r);this.defaultFont||(this.defaultFont=r)}let i="";const n=parseFloat(t.fontWeight);0!==parseFloat(t.italicAngle)?i=n>=700?"bolditalic":"italic":n>=700&&(i="bold");if(!i){(e.name.includes("Bold")||e.psName?.includes("Bold"))&&(i="bold");(e.name.includes("Italic")||e.name.endsWith("It")||e.psName?.includes("Italic")||e.psName?.endsWith("It"))&&(i+="italic")}i||(i="regular");r[i]=e}getDefault(){return this.defaultFont}find(e,t=!0){let a=this.fonts.get(e)||this.cache.get(e);if(a)return a;const r=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let i=e.replaceAll(r,"");a=this.fonts.get(i);if(a){this.cache.set(e,a);return a}i=i.toLowerCase();const n=[];for(const[e,t]of this.fonts.entries())e.replaceAll(r,"").toLowerCase().startsWith(i)&&n.push(t);if(0===n.length)for(const[,e]of this.fonts.entries())e.regular.name?.replaceAll(r,"").toLowerCase().startsWith(i)&&n.push(e);if(0===n.length){i=i.replaceAll(/psmt|mt/gi,"");for(const[e,t]of this.fonts.entries())e.replaceAll(r,"").toLowerCase().startsWith(i)&&n.push(t)}if(0===n.length)for(const e of this.fonts.values())e.regular.name?.replaceAll(r,"").toLowerCase().startsWith(i)&&n.push(e);if(n.length>=1){1!==n.length&&t&&warn(`XFA - Too many choices to guess the correct font: ${e}`);this.cache.set(e,n[0]);return n[0]}if(t&&!this.warned.has(e)){this.warned.add(e);warn(`XFA - Cannot find the font: ${e}`)}return null}}function selectFont(e,t){return"italic"===e.posture?"bold"===e.weight?t.bolditalic:t.italic:"bold"===e.weight?t.bold:t.regular}class FontInfo{constructor(e,t,a,r){this.lineHeight=a;this.paraMargin=t||{top:0,bottom:0,left:0,right:0};if(!e){[this.pdfFont,this.xfaFont]=this.defaultFont(r);return}this.xfaFont={typeface:e.typeface,posture:e.posture,weight:e.weight,size:e.size,letterSpacing:e.letterSpacing};const i=r.find(e.typeface);if(i){this.pdfFont=selectFont(e,i);this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(r))}else[this.pdfFont,this.xfaFont]=this.defaultFont(r)}defaultFont(e){const t=e.find("Helvetica",!1)||e.find("Myriad Pro",!1)||e.find("Arial",!1)||e.getDefault();if(t?.regular){const e=t.regular;return[e,{typeface:e.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0}]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}}class FontSelector{constructor(e,t,a,r){this.fontFinder=r;this.stack=[new FontInfo(e,t,a,r)]}pushData(e,t,a){const r=this.stack.at(-1);for(const t of["typeface","posture","weight","size","letterSpacing"])e[t]||(e[t]=r.xfaFont[t]);for(const e of["top","bottom","left","right"])isNaN(t[e])&&(t[e]=r.paraMargin[e]);const i=new FontInfo(e,t,a||r.lineHeight,this.fontFinder);i.pdfFont||(i.pdfFont=r.pdfFont);this.stack.push(i)}popFont(){this.stack.pop()}topFont(){return this.stack.at(-1)}}class TextMeasure{constructor(e,t,a,r){this.glyphs=[];this.fontSelector=new FontSelector(e,t,a,r);this.extraHeight=0}pushData(e,t,a){this.fontSelector.pushData(e,t,a)}popFont(e){return this.fontSelector.popFont()}addPara(){const e=this.fontSelector.topFont();this.extraHeight+=e.paraMargin.top+e.paraMargin.bottom}addString(e){if(!e)return;const t=this.fontSelector.topFont(),a=t.xfaFont.size;if(t.pdfFont){const r=t.xfaFont.letterSpacing,i=t.pdfFont,n=i.lineHeight||1.2,s=t.lineHeight||Math.max(1.2,n)*a,o=n-(void 0===i.lineGap?.2:i.lineGap),c=Math.max(1,o)*a,l=a/1e3,h=i.defaultWidth||i.charsToGlyphs(" ")[0].width;for(const t of e.split(/[\\u2029\\n]/)){const e=i.encodeString(t).join(""),a=i.charsToGlyphs(e);for(const e of a){const t=e.width||h;this.glyphs.push([t*l+r,s,c,e.unicode,!1])}this.glyphs.push([0,0,0,"\\n",!0])}this.glyphs.pop()}else{for(const t of e.split(/[\\u2029\\n]/)){for(const e of t.split(""))this.glyphs.push([a,1.2*a,a,e,!1]);this.glyphs.push([0,0,0,"\\n",!0])}this.glyphs.pop()}}compute(e){let t=-1,a=0,r=0,i=0,n=0,s=0,o=!1,c=!0;for(let l=0,h=this.glyphs.length;l<h;l++){const[h,u,d,f,g]=this.glyphs[l],p=" "===f,m=c?d:u;if(g){r=Math.max(r,n);n=0;i+=s;s=m;t=-1;a=0;c=!1}else if(p)if(n+h>e){r=Math.max(r,n);n=0;i+=s;s=m;t=-1;a=0;o=!0;c=!1}else{s=Math.max(m,s);a=n;n+=h;t=l}else if(n+h>e){i+=s;s=m;if(-1!==t){l=t;r=Math.max(r,a);n=0;t=-1;a=0}else{r=Math.max(r,n);n=h}o=!0;c=!1}else{n+=h;s=Math.max(m,s)}}r=Math.max(r,n);i+=s+this.extraHeight;return{width:1.02*r,height:i,isBroken:o}}}const bo=/^[^.[]+/,yo=/^[^\\]]+/,wo=0,xo=1,So=2,Ao=3,ko=4,Co=new Map([["$data",(e,t)=>e.datasets?e.datasets.data:e],["$record",(e,t)=>(e.datasets?e.datasets.data:e)[Ss]()[0]],["$template",(e,t)=>e.template],["$connectionSet",(e,t)=>e.connectionSet],["$form",(e,t)=>e.form],["$layout",(e,t)=>e.layout],["$host",(e,t)=>e.host],["$dataWindow",(e,t)=>e.dataWindow],["$event",(e,t)=>e.event],["!",(e,t)=>e.datasets],["$xfa",(e,t)=>e],["xfa",(e,t)=>e],["$",(e,t)=>t]]),vo=new WeakMap;function parseExpression(e,t,a=!0){let r=e.match(bo);if(!r)return null;let[i]=r;const n=[{name:i,cacheName:"."+i,index:0,js:null,formCalc:null,operator:wo}];let s=i.length;for(;s<e.length;){const c=s;if("["===e.charAt(s++)){r=e.slice(s).match(yo);if(!r){warn("XFA - Invalid index in SOM expression");return null}n.at(-1).index="*"===(o=(o=r[0]).trim())?1/0:parseInt(o,10)||0;s+=r[0].length+1;continue}let l;switch(e.charAt(s)){case".":if(!t)return null;s++;l=xo;break;case"#":s++;l=So;break;case"[":if(a){warn("XFA - SOM expression contains a FormCalc subexpression which is not supported for now.");return null}l=Ao;break;case"(":if(a){warn("XFA - SOM expression contains a JavaScript subexpression which is not supported for now.");return null}l=ko;break;default:l=wo}r=e.slice(s).match(bo);if(!r)break;[i]=r;s+=i.length;n.push({name:i,cacheName:e.slice(c,s),operator:l,index:0,js:null,formCalc:null})}var o;return n}function searchNode(e,t,a,r=!0,i=!0){const n=parseExpression(a,r);if(!n)return null;const s=Co.get(n[0].name);let o,c=0;if(s){o=!0;e=[s(e,t)];c=1}else{o=null===t;e=[t||e]}for(let a=n.length;c<a;c++){const{name:a,cacheName:r,operator:s,index:l}=n[c],h=[];for(const t of e){if(!t.isXFAObject)continue;let e,n;if(i){n=vo.get(t);if(!n){n=new Map;vo.set(t,n)}e=n.get(r)}if(!e){switch(s){case wo:e=t[ms](a,!1);break;case xo:e=t[ms](a,!0);break;case So:e=t[ps](a);e=e.isXFAObjectArray?e.children:[e]}i&&n.set(r,e)}e.length>0&&h.push(e)}if(0!==h.length||o||0!==c)e=isFinite(l)?h.filter((e=>l<e.length)).map((e=>e[l])):h.flat();else{const a=t[vs]();if(!(t=a))return null;c=-1;e=[t]}}return 0===e.length?null:e}function createDataNode(e,t,a){const r=parseExpression(a);if(!r)return null;if(r.some((e=>e.operator===xo)))return null;const i=Co.get(r[0].name);let n=0;if(i){e=i(e,t);n=1}else e=t||e;for(let t=r.length;n<t;n++){const{name:t,operator:a,index:i}=r[n];if(!isFinite(i)){r[n].index=0;return e.createNodes(r.slice(n))}let s;switch(a){case wo:s=e[ms](t,!1);break;case xo:s=e[ms](t,!0);break;case So:s=e[ps](t);s=s.isXFAObjectArray?s.children:[s]}if(0===s.length)return e.createNodes(r.slice(n));if(!(i<s.length)){r[n].index=i-s.length;return e.createNodes(r.slice(n))}{const t=s[i];if(!t.isXFAObject){warn("XFA - Cannot create a node.");return null}e=t}}return null}const Fo=Symbol(),Io=Symbol(),Oo=Symbol(),Mo=Symbol("_children"),Do=Symbol(),Bo=Symbol(),Ro=Symbol(),No=Symbol(),Eo=Symbol(),Po=Symbol(),Lo=Symbol(),jo=Symbol(),_o=Symbol(),Uo=Symbol("parent"),Xo=Symbol(),qo=Symbol(),Ho=Symbol();let Wo=0;const zo=go.datasets.id;class XFAObject{constructor(e,t,a=!1){this[Hs]=e;this[Ws]=t;this[Lo]=a;this[Uo]=null;this[Mo]=[];this[uo]=`${t}${Wo++}`;this[Is]=null}get isXFAObject(){return!0}get isXFAObjectArray(){return!1}createNodes(e){let t=this,a=null;for(const{name:r,index:i}of e){for(let e=0,n=isFinite(i)?i:0;e<=n;e++){const e=t[Hs]===zo?-1:t[Hs];a=new XmlObject(e,r);t[Qn](a)}t=a}return a}[$s](e){if(!this[Lo]||!this[Gs](e))return!1;const t=e[Ws],a=this[t];if(!(a instanceof XFAObjectArray)){null!==a&&this[Zs](a);this[t]=e;this[Qn](e);return!0}if(a.push(e)){this[Qn](e);return!0}let r="";this.id?r=` (id: ${this.id})`:this.name&&(r=` (name: ${this.name} ${this.h.value})`);warn(`XFA - node "${this[Ws]}"${r} has already enough "${t}"!`);return!1}[Gs](e){return this.hasOwnProperty(e[Ws])&&e[Hs]===this[Hs]}[Ls](){return!1}[Yn](){return!1}[Bs](){return!1}[Rs](){return!1}[Js](){this.para&&this[Fs]()[ls].paraStack.pop()}[Ys](){this[Fs]()[ls].paraStack.push(this.para)}[ao](e){this.id&&this[Hs]===go.template.id&&e.set(this.id,this)}[Fs](){return this[Is].template}[js](){return!1}[_s](){return!1}[Qn](e){e[Uo]=this;this[Mo].push(e);!e[Is]&&this[Is]&&(e[Is]=this[Is])}[Zs](e){const t=this[Mo].indexOf(e);this[Mo].splice(t,1)}[Ts](){return this.hasOwnProperty("value")}[io](e){}[Vs](e){}[hs](){}[ts](e){delete this[Lo];if(this[rs]){e.clean(this[rs]);delete this[rs]}}[Ms](e){return this[Mo].indexOf(e)}[Ds](e,t){t[Uo]=this;this[Mo].splice(e,0,t);!t[Is]&&this[Is]&&(t[Is]=this[Is])}[Us](){return!this.name}[qs](){return""}[so](){return 0===this[Mo].length?this[ss]:this[Mo].map((e=>e[so]())).join("")}get[Oo](){const e=Object.getPrototypeOf(this);if(!e._attributes){const t=e._attributes=new Set;for(const e of Object.getOwnPropertyNames(this)){if(null===this[e]||this[e]instanceof XFAObject||this[e]instanceof XFAObjectArray)break;t.add(e)}}return shadow(this,Oo,e._attributes)}[Es](e){let t=this;for(;t;){if(t===e)return!0;t=t[vs]()}return!1}[vs](){return this[Uo]}[Cs](){return this[vs]()}[Ss](e=null){return e?this[e]:this[Mo]}[cs](){const e=Object.create(null);this[ss]&&(e.$content=this[ss]);for(const t of Object.getOwnPropertyNames(this)){const a=this[t];null!==a&&(a instanceof XFAObject?e[t]=a[cs]():a instanceof XFAObjectArray?a.isEmpty()||(e[t]=a.dump()):e[t]=a)}return e}[ho](){return null}[co](){return HTMLResult.EMPTY}*[As](){for(const e of this[Ss]())yield e}*[No](e,t){for(const a of this[As]())if(!e||t===e.has(a[Ws])){const e=this[gs](),t=a[co](e);t.success||(this[ls].failingNode=a);yield t}}[us](){return null}[Zn](e,t){this[ls].children.push(e)}[gs](){}[es]({filter:e=null,include:t=!0}){if(this[ls].generator){const e=this[gs](),t=this[ls].failingNode[co](e);if(!t.success)return t;t.html&&this[Zn](t.html,t.bbox);delete this[ls].failingNode}else this[ls].generator=this[No](e,t);for(;;){const e=this[ls].generator.next();if(e.done)break;const t=e.value;if(!t.success)return t;t.html&&this[Zn](t.html,t.bbox)}this[ls].generator=null;return HTMLResult.EMPTY}[ro](e){this[qo]=new Set(Object.keys(e))}[Po](e){const t=this[Oo],a=this[qo];return[...e].filter((e=>t.has(e)&&!a.has(e)))}[eo](e,t=new Set){for(const a of this[Mo])a[Xo](e,t)}[Xo](e,t){const a=this[Eo](e,t);a?this[Fo](a,e,t):this[eo](e,t)}[Eo](e,t){const{use:a,usehref:r}=this;if(!a&&!r)return null;let i=null,n=null,s=null,o=a;if(r){o=r;r.startsWith("#som(")&&r.endsWith(")")?n=r.slice(5,-1):r.startsWith(".#som(")&&r.endsWith(")")?n=r.slice(6,-1):r.startsWith("#")?s=r.slice(1):r.startsWith(".#")&&(s=r.slice(2))}else a.startsWith("#")?s=a.slice(1):n=a;this.use=this.usehref="";if(s)i=e.get(s);else{i=searchNode(e.get(Qs),this,n,!0,!1);i&&(i=i[0])}if(!i){warn(`XFA - Invalid prototype reference: ${o}.`);return null}if(i[Ws]!==this[Ws]){warn(`XFA - Incompatible prototype: ${i[Ws]} !== ${this[Ws]}.`);return null}if(t.has(i)){warn("XFA - Cycle detected in prototypes use.");return null}t.add(i);const c=i[Eo](e,t);c&&i[Fo](c,e,t);i[eo](e,t);t.delete(i);return i}[Fo](e,t,a){if(a.has(e)){warn("XFA - Cycle detected in prototypes use.");return}!this[ss]&&e[ss]&&(this[ss]=e[ss]);new Set(a).add(e);for(const t of this[Po](e[qo])){this[t]=e[t];this[qo]&&this[qo].add(t)}for(const r of Object.getOwnPropertyNames(this)){if(this[Oo].has(r))continue;const i=this[r],n=e[r];if(i instanceof XFAObjectArray){for(const e of i[Mo])e[Xo](t,a);for(let r=i[Mo].length,s=n[Mo].length;r<s;r++){const n=e[Mo][r][is]();if(!i.push(n))break;n[Uo]=this;this[Mo].push(n);n[Xo](t,a)}}else if(null===i){if(null!==n){const e=n[is]();e[Uo]=this;this[r]=e;this[Mo].push(e);e[Xo](t,a)}}else{i[eo](t,a);n&&i[Fo](n,t,a)}}}static[Do](e){return Array.isArray(e)?e.map((e=>XFAObject[Do](e))):"object"==typeof e&&null!==e?Object.assign({},e):e}[is](){const e=Object.create(Object.getPrototypeOf(this));for(const t of Object.getOwnPropertySymbols(this))try{e[t]=this[t]}catch{shadow(e,t,this[t])}e[uo]=`${e[Ws]}${Wo++}`;e[Mo]=[];for(const t of Object.getOwnPropertyNames(this)){if(this[Oo].has(t)){e[t]=XFAObject[Do](this[t]);continue}const a=this[t];e[t]=a instanceof XFAObjectArray?new XFAObjectArray(a[jo]):null}for(const t of this[Mo]){const a=t[Ws],r=t[is]();e[Mo].push(r);r[Uo]=e;null===e[a]?e[a]=r:e[a][Mo].push(r)}return e}[Ss](e=null){return e?this[Mo].filter((t=>t[Ws]===e)):this[Mo]}[ps](e){return this[e]}[ms](e,t,a=!0){return Array.from(this[bs](e,t,a))}*[bs](e,t,a=!0){if("parent"!==e){for(const a of this[Mo]){a[Ws]===e&&(yield a);a.name===e&&(yield a);(t||a[Us]())&&(yield*a[bs](e,t,!1))}a&&this[Oo].has(e)&&(yield new XFAAttribute(this,e,this[e]))}else yield this[Uo]}}class XFAObjectArray{constructor(e=1/0){this[jo]=e;this[Mo]=[]}get isXFAObject(){return!1}get isXFAObjectArray(){return!0}push(e){if(this[Mo].length<=this[jo]){this[Mo].push(e);return!0}warn(`XFA - node "${e[Ws]}" accepts no more than ${this[jo]} children`);return!1}isEmpty(){return 0===this[Mo].length}dump(){return 1===this[Mo].length?this[Mo][0][cs]():this[Mo].map((e=>e[cs]()))}[is](){const e=new XFAObjectArray(this[jo]);e[Mo]=this[Mo].map((e=>e[is]()));return e}get children(){return this[Mo]}clear(){this[Mo].length=0}}class XFAAttribute{constructor(e,t,a){this[Uo]=e;this[Ws]=t;this[ss]=a;this[ns]=!1;this[uo]="attribute"+Wo++}[vs](){return this[Uo]}[Ns](){return!0}[ys](){return this[ss].trim()}[io](e){e=e.value||"";this[ss]=e.toString()}[so](){return this[ss]}[Es](e){return this[Uo]===e||this[Uo][Es](e)}}class XmlObject extends XFAObject{constructor(e,t,a={}){super(e,t);this[ss]="";this[Bo]=null;if("#text"!==t){const e=new Map;this[Io]=e;for(const[t,r]of Object.entries(a))e.set(t,new XFAAttribute(this,t,r));if(a.hasOwnProperty(zs)){const e=a[zs].xfa.dataNode;void 0!==e&&("dataGroup"===e?this[Bo]=!1:"dataValue"===e&&(this[Bo]=!0))}}this[ns]=!1}[lo](e){const t=this[Ws];if("#text"===t){e.push(encodeToXmlString(this[ss]));return}const a=utf8StringToString(t),r=this[Hs]===zo?"xfa:":"";e.push(`<${r}${a}`);for(const[t,a]of this[Io].entries()){const r=utf8StringToString(t);e.push(` ${r}="${encodeToXmlString(a[ss])}"`)}null!==this[Bo]&&(this[Bo]?e.push(\' xfa:dataNode="dataValue"\'):e.push(\' xfa:dataNode="dataGroup"\'));if(this[ss]||0!==this[Mo].length){e.push(">");if(this[ss])"string"==typeof this[ss]?e.push(encodeToXmlString(this[ss])):this[ss][lo](e);else for(const t of this[Mo])t[lo](e);e.push(`</${r}${a}>`)}else e.push("/>")}[$s](e){if(this[ss]){const e=new XmlObject(this[Hs],"#text");this[Qn](e);e[ss]=this[ss];this[ss]=""}this[Qn](e);return!0}[Vs](e){this[ss]+=e}[hs](){if(this[ss]&&this[Mo].length>0){const e=new XmlObject(this[Hs],"#text");this[Qn](e);e[ss]=this[ss];delete this[ss]}}[co](){return"#text"===this[Ws]?HTMLResult.success({name:"#text",value:this[ss]}):HTMLResult.EMPTY}[Ss](e=null){return e?this[Mo].filter((t=>t[Ws]===e)):this[Mo]}[fs](){return this[Io]}[ps](e){const t=this[Io].get(e);return void 0!==t?t:this[Ss](e)}*[bs](e,t){const a=this[Io].get(e);a&&(yield a);for(const a of this[Mo]){a[Ws]===e&&(yield a);t&&(yield*a[bs](e,t))}}*[ds](e,t){const a=this[Io].get(e);!a||t&&a[ns]||(yield a);for(const a of this[Mo])yield*a[ds](e,t)}*[xs](e,t,a){for(const r of this[Mo]){r[Ws]!==e||a&&r[ns]||(yield r);t&&(yield*r[xs](e,t,a))}}[Ns](){return null===this[Bo]?0===this[Mo].length||this[Mo][0][Hs]===go.xhtml.id:this[Bo]}[ys](){return null===this[Bo]?0===this[Mo].length?this[ss].trim():this[Mo][0][Hs]===go.xhtml.id?this[Mo][0][so]().trim():null:this[ss].trim()}[io](e){e=e.value||"";this[ss]=e.toString()}[cs](e=!1){const t=Object.create(null);e&&(t.$ns=this[Hs]);this[ss]&&(t.$content=this[ss]);t.$name=this[Ws];t.children=[];for(const a of this[Mo])t.children.push(a[cs](e));t.attributes=Object.create(null);for(const[e,a]of this[Io])t.attributes[e]=a[ss];return t}}class ContentObject extends XFAObject{constructor(e,t){super(e,t);this[ss]=""}[Vs](e){this[ss]+=e}[hs](){}}class OptionObject extends ContentObject{constructor(e,t,a){super(e,t);this[_o]=a}[hs](){this[ss]=getKeyword({data:this[ss],defaultValue:this[_o][0],validate:e=>this[_o].includes(e)})}[ts](e){super[ts](e);delete this[_o]}}class StringObject extends ContentObject{[hs](){this[ss]=this[ss].trim()}}class IntegerObject extends ContentObject{constructor(e,t,a,r){super(e,t);this[Ro]=a;this[Ho]=r}[hs](){this[ss]=getInteger({data:this[ss],defaultValue:this[Ro],validate:this[Ho]})}[ts](e){super[ts](e);delete this[Ro];delete this[Ho]}}class Option01 extends IntegerObject{constructor(e,t){super(e,t,0,(e=>1===e))}}class Option10 extends IntegerObject{constructor(e,t){super(e,t,1,(e=>0===e))}}function measureToString(e){return"string"==typeof e?"0px":Number.isInteger(e)?`${e}px`:`${e.toFixed(2)}px`}const $o={anchorType(e,t){const a=e[Cs]();if(a&&(!a.layout||"position"===a.layout)){"transform"in t||(t.transform="");switch(e.anchorType){case"bottomCenter":t.transform+="translate(-50%, -100%)";break;case"bottomLeft":t.transform+="translate(0,-100%)";break;case"bottomRight":t.transform+="translate(-100%,-100%)";break;case"middleCenter":t.transform+="translate(-50%,-50%)";break;case"middleLeft":t.transform+="translate(0,-50%)";break;case"middleRight":t.transform+="translate(-100%,-50%)";break;case"topCenter":t.transform+="translate(-50%,0)";break;case"topRight":t.transform+="translate(-100%,0)"}}},dimensions(e,t){const a=e[Cs]();let r=e.w;const i=e.h;if(a.layout?.includes("row")){const t=a[ls],i=e.colSpan;let n;if(-1===i){n=Math.sumPrecise(t.columnWidths.slice(t.currentColumn));t.currentColumn=0}else{n=Math.sumPrecise(t.columnWidths.slice(t.currentColumn,t.currentColumn+i));t.currentColumn=(t.currentColumn+e.colSpan)%t.columnWidths.length}isNaN(n)||(r=e.w=n)}t.width=""!==r?measureToString(r):"auto";t.height=""!==i?measureToString(i):"auto"},position(e,t){const a=e[Cs]();if(!a?.layout||"position"===a.layout){t.position="absolute";t.left=measureToString(e.x);t.top=measureToString(e.y)}},rotate(e,t){if(e.rotate){"transform"in t||(t.transform="");t.transform+=`rotate(-${e.rotate}deg)`;t.transformOrigin="top left"}},presence(e,t){switch(e.presence){case"invisible":t.visibility="hidden";break;case"hidden":case"inactive":t.display="none"}},hAlign(e,t){if("para"===e[Ws])switch(e.hAlign){case"justifyAll":t.textAlign="justify-all";break;case"radix":t.textAlign="left";break;default:t.textAlign=e.hAlign}else switch(e.hAlign){case"left":t.alignSelf="start";break;case"center":t.alignSelf="center";break;case"right":t.alignSelf="end"}},margin(e,t){e.margin&&(t.margin=e.margin[ho]().margin)}};function setMinMaxDimensions(e,t){if("position"===e[Cs]().layout){e.minW>0&&(t.minWidth=measureToString(e.minW));e.maxW>0&&(t.maxWidth=measureToString(e.maxW));e.minH>0&&(t.minHeight=measureToString(e.minH));e.maxH>0&&(t.maxHeight=measureToString(e.maxH))}}function layoutText(e,t,a,r,i,n){const s=new TextMeasure(t,a,r,i);"string"==typeof e?s.addString(e):e[Ks](s);return s.compute(n)}function layoutNode(e,t){let a=null,r=null,i=!1;if((!e.w||!e.h)&&e.value){let n=0,s=0;if(e.margin){n=e.margin.leftInset+e.margin.rightInset;s=e.margin.topInset+e.margin.bottomInset}let o=null,c=null;if(e.para){c=Object.create(null);o=""===e.para.lineHeight?null:e.para.lineHeight;c.top=""===e.para.spaceAbove?0:e.para.spaceAbove;c.bottom=""===e.para.spaceBelow?0:e.para.spaceBelow;c.left=""===e.para.marginLeft?0:e.para.marginLeft;c.right=""===e.para.marginRight?0:e.para.marginRight}let l=e.font;if(!l){const t=e[Fs]();let a=e[vs]();for(;a&&a!==t;){if(a.font){l=a.font;break}a=a[vs]()}}const h=(e.w||t.width)-n,u=e[Is].fontFinder;if(e.value.exData&&e.value.exData[ss]&&"text/html"===e.value.exData.contentType){const t=layoutText(e.value.exData[ss],l,c,o,u,h);r=t.width;a=t.height;i=t.isBroken}else{const t=e.value[so]();if(t){const e=layoutText(t,l,c,o,u,h);r=e.width;a=e.height;i=e.isBroken}}null===r||e.w||(r+=n);null===a||e.h||(a+=s)}return{w:r,h:a,isBroken:i}}function computeBbox(e,t,a){let r;if(""!==e.w&&""!==e.h)r=[e.x,e.y,e.w,e.h];else{if(!a)return null;let i=e.w;if(""===i){if(0===e.maxW){const t=e[Cs]();i="position"===t.layout&&""!==t.w?0:e.minW}else i=Math.min(e.maxW,a.width);t.attributes.style.width=measureToString(i)}let n=e.h;if(""===n){if(0===e.maxH){const t=e[Cs]();n="position"===t.layout&&""!==t.h?0:e.minH}else n=Math.min(e.maxH,a.height);t.attributes.style.height=measureToString(n)}r=[e.x,e.y,i,n]}return r}function fixDimensions(e){const t=e[Cs]();if(t.layout?.includes("row")){const a=t[ls],r=e.colSpan;let i;i=-1===r?Math.sumPrecise(a.columnWidths.slice(a.currentColumn)):Math.sumPrecise(a.columnWidths.slice(a.currentColumn,a.currentColumn+r));isNaN(i)||(e.w=i)}t.layout&&"position"!==t.layout&&(e.x=e.y=0);"table"===e.layout&&""===e.w&&Array.isArray(e.columnWidths)&&(e.w=Math.sumPrecise(e.columnWidths))}function layoutClass(e){switch(e.layout){case"position":default:return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb"}}function toStyle(e,...t){const a=Object.create(null);for(const r of t){const t=e[r];if(null!==t)if($o.hasOwnProperty(r))$o[r](e,a);else if(t instanceof XFAObject){const e=t[ho]();e?Object.assign(a,e):warn(`(DEBUG) - XFA - style for ${r} not implemented yet`)}}return a}function createWrapper(e,t){const{attributes:a}=t,{style:r}=a,i={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};a.class.push("xfaWrapped");if(e.border){const{widths:a,insets:n}=e.border[ls];let s,o,c=n[0],l=n[3];const h=n[0]+n[2],u=n[1]+n[3];switch(e.border.hand){case"even":c-=a[0]/2;l-=a[3]/2;s=`calc(100% + ${(a[1]+a[3])/2-u}px)`;o=`calc(100% + ${(a[0]+a[2])/2-h}px)`;break;case"left":c-=a[0];l-=a[3];s=`calc(100% + ${a[1]+a[3]-u}px)`;o=`calc(100% + ${a[0]+a[2]-h}px)`;break;case"right":s=u?`calc(100% - ${u}px)`:"100%";o=h?`calc(100% - ${h}px)`:"100%"}const d=["xfaBorder"];isPrintOnly(e.border)&&d.push("xfaPrintOnly");const f={name:"div",attributes:{class:d,style:{top:`${c}px`,left:`${l}px`,width:s,height:o}},children:[]};for(const e of["border","borderWidth","borderColor","borderRadius","borderStyle"])if(void 0!==r[e]){f.attributes.style[e]=r[e];delete r[e]}i.children.push(f,t)}else i.children.push(t);for(const e of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])if(void 0!==r[e]){i.attributes.style[e]=r[e];delete r[e]}i.attributes.style.position="absolute"===r.position?"absolute":"relative";delete r.position;if(r.alignSelf){i.attributes.style.alignSelf=r.alignSelf;delete r.alignSelf}return i}function fixTextIndent(e){const t=getMeasurement(e.textIndent,"0px");if(t>=0)return;const a="padding"+("left"===("right"===e.textAlign?"right":"left")?"Left":"Right"),r=getMeasurement(e[a],"0px");e[a]=r-t+"px"}function setAccess(e,t){switch(e.access){case"nonInteractive":t.push("xfaNonInteractive");break;case"readOnly":t.push("xfaReadOnly");break;case"protected":t.push("xfaDisabled")}}function isPrintOnly(e){return e.relevant.length>0&&!e.relevant[0].excluded&&"print"===e.relevant[0].viewname}function getCurrentPara(e){const t=e[Fs]()[ls].paraStack;return t.length?t.at(-1):null}function setPara(e,t,a){if(a.attributes.class?.includes("xfaRich")){if(t){""===e.h&&(t.height="auto");""===e.w&&(t.width="auto")}const r=getCurrentPara(e);if(r){const e=a.attributes.style;e.display="flex";e.flexDirection="column";switch(r.vAlign){case"top":e.justifyContent="start";break;case"bottom":e.justifyContent="end";break;case"middle":e.justifyContent="center"}const t=r[ho]();for(const[a,r]of Object.entries(t))a in e||(e[a]=r)}}}function setFontFamily(e,t,a,r){if(!a){delete r.fontFamily;return}const i=stripQuotes(e.typeface);r.fontFamily=`"${i}"`;const n=a.find(i);if(n){const{fontFamily:a}=n.regular.cssFontInfo;a!==i&&(r.fontFamily=`"${a}"`);const s=getCurrentPara(t);if(s&&""!==s.lineHeight)return;if(r.lineHeight)return;const o=selectFont(e,n);o&&(r.lineHeight=Math.max(1.2,o.lineHeight))}}function fixURL(e){const t=createValidAbsoluteUrl(e,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return t?t.href:null}function createLine(e,t){return{name:"div",attributes:{class:["lr-tb"===e.layout?"xfaLr":"xfaRl"]},children:t}}function flushHTML(e){if(!e[ls])return null;const t={name:"div",attributes:e[ls].attributes,children:e[ls].children};if(e[ls].failingNode){const a=e[ls].failingNode[us]();a&&(e.layout.endsWith("-tb")?t.children.push(createLine(e,[a])):t.children.push(a))}return 0===t.children.length?null:t}function addHTML(e,t,a){const r=e[ls],i=r.availableSpace,[n,s,o,c]=a;switch(e.layout){case"position":r.width=Math.max(r.width,n+o);r.height=Math.max(r.height,s+c);r.children.push(t);break;case"lr-tb":case"rl-tb":if(!r.line||1===r.attempt){r.line=createLine(e,[]);r.children.push(r.line);r.numberInLine=0}r.numberInLine+=1;r.line.children.push(t);if(0===r.attempt){r.currentWidth+=o;r.height=Math.max(r.height,r.prevHeight+c)}else{r.currentWidth=o;r.prevHeight=r.height;r.height+=c;r.attempt=0}r.width=Math.max(r.width,r.currentWidth);break;case"rl-row":case"row":{r.children.push(t);r.width+=o;r.height=Math.max(r.height,c);const e=measureToString(r.height);for(const t of r.children)t.attributes.style.height=e;break}case"table":case"tb":r.width=MathClamp(o,r.width,i.width);r.height+=c;r.children.push(t)}}function getAvailableSpace(e){const t=e[ls].availableSpace,a=e.margin?e.margin.topInset+e.margin.bottomInset:0,r=e.margin?e.margin.leftInset+e.margin.rightInset:0;switch(e.layout){case"lr-tb":case"rl-tb":return 0===e[ls].attempt?{width:t.width-r-e[ls].currentWidth,height:t.height-a-e[ls].prevHeight}:{width:t.width-r,height:t.height-a-e[ls].height};case"rl-row":case"row":return{width:Math.sumPrecise(e[ls].columnWidths.slice(e[ls].currentColumn)),height:t.height-r};case"table":case"tb":return{width:t.width-r,height:t.height-a-e[ls].height};default:return t}}function checkDimensions(e,t){if(null===e[Fs]()[ls].firstUnsplittable)return!0;if(0===e.w||0===e.h)return!0;const a=e[Cs](),r=a[ls]?.attempt||0,[,i,n,s]=function getTransformedBBox(e){let t,a,r=""===e.w?NaN:e.w,i=""===e.h?NaN:e.h,[n,s]=[0,0];switch(e.anchorType||""){case"bottomCenter":[n,s]=[r/2,i];break;case"bottomLeft":[n,s]=[0,i];break;case"bottomRight":[n,s]=[r,i];break;case"middleCenter":[n,s]=[r/2,i/2];break;case"middleLeft":[n,s]=[0,i/2];break;case"middleRight":[n,s]=[r,i/2];break;case"topCenter":[n,s]=[r/2,0];break;case"topRight":[n,s]=[r,0]}switch(e.rotate||0){case 0:[t,a]=[-n,-s];break;case 90:[t,a]=[-s,n];[r,i]=[i,-r];break;case 180:[t,a]=[n,s];[r,i]=[-r,-i];break;case 270:[t,a]=[s,-n];[r,i]=[-i,r]}return[e.x+t+Math.min(0,r),e.y+a+Math.min(0,i),Math.abs(r),Math.abs(i)]}(e);switch(a.layout){case"lr-tb":case"rl-tb":return 0===r?e[Fs]()[ls].noLayoutFailure?""!==e.w?Math.round(n-t.width)<=2:t.width>2:!(""!==e.h&&Math.round(s-t.height)>2)&&(""!==e.w?Math.round(n-t.width)<=2||0===a[ls].numberInLine&&t.height>2:t.width>2):!!e[Fs]()[ls].noLayoutFailure||!(""!==e.h&&Math.round(s-t.height)>2)&&((""===e.w||Math.round(n-t.width)<=2||!a[_s]())&&t.height>2);case"table":case"tb":return!!e[Fs]()[ls].noLayoutFailure||(""===e.h||e[js]()?(""===e.w||Math.round(n-t.width)<=2||!a[_s]())&&t.height>2:Math.round(s-t.height)<=2);case"position":if(e[Fs]()[ls].noLayoutFailure)return!0;if(""===e.h||Math.round(s+i-t.height)<=2)return!0;return s+i>e[Fs]()[ls].currentContentArea.h;case"rl-row":case"row":return!!e[Fs]()[ls].noLayoutFailure||(""===e.h||Math.round(s-t.height)<=2);default:return!0}}const Go=go.template.id,Vo="http://www.w3.org/2000/svg",Ko=/^H(\\d+)$/,Jo=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),Yo=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function getBorderDims(e){if(!e||!e.border)return{w:0,h:0};const t=e.border[ws]();return t?{w:t.widths[0]+t.widths[2]+t.insets[0]+t.insets[2],h:t.widths[1]+t.widths[3]+t.insets[1]+t.insets[3]}:{w:0,h:0}}function hasMargin(e){return e.margin&&(e.margin.topInset||e.margin.rightInset||e.margin.bottomInset||e.margin.leftInset)}function _setValue(e,t){if(!e.value){const t=new Value({});e[Qn](t);e.value=t}e.value[io](t)}function*getContainedChildren(e){for(const t of e[Ss]())t instanceof SubformSet?yield*t[As]():yield t}function isRequired(e){return"error"===e.validate?.nullTest}function setTabIndex(e){for(;e;){if(!e.traversal){e[no]=e[vs]()[no];return}if(e[no])return;let t=null;for(const a of e.traversal[Ss]())if("next"===a.operation){t=a;break}if(!t||!t.ref){e[no]=e[vs]()[no];return}const a=e[Fs]();e[no]=++a[no];const r=a[to](t.ref,e);if(!r)return;e=r[0]}}function applyAssist(e,t){const a=e.assist;if(a){const e=a[co]();e&&(t.title=e);const r=a.role.match(Ko);if(r){const e="heading",a=r[1];t.role=e;t["aria-level"]=a}}if("table"===e.layout)t.role="table";else if("row"===e.layout)t.role="row";else{const a=e[vs]();"row"===a.layout&&(t.role="TH"===a.assist?.role?"columnheader":"cell")}}function ariaLabel(e){if(!e.assist)return null;const t=e.assist;return t.speak&&""!==t.speak[ss]?t.speak[ss]:t.toolTip?t.toolTip[ss]:null}function valueToHtml(e){return HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:e}]})}function setFirstUnsplittable(e){const t=e[Fs]();if(null===t[ls].firstUnsplittable){t[ls].firstUnsplittable=e;t[ls].noLayoutFailure=!0}}function unsetFirstUnsplittable(e){const t=e[Fs]();t[ls].firstUnsplittable===e&&(t[ls].noLayoutFailure=!1)}function handleBreak(e){if(e[ls])return!1;e[ls]=Object.create(null);if("auto"===e.targetType)return!1;const t=e[Fs]();let a=null;if(e.target){a=t[to](e.target,e[vs]());if(!a)return!1;a=a[0]}const{currentPageArea:r,currentContentArea:i}=t[ls];if("pageArea"===e.targetType){a instanceof PageArea||(a=null);if(e.startNew){e[ls].target=a||r;return!0}if(a&&a!==r){e[ls].target=a;return!0}return!1}a instanceof ContentArea||(a=null);const n=a&&a[vs]();let s,o=n;if(e.startNew)if(a){const e=n.contentArea.children,t=e.indexOf(i),r=e.indexOf(a);-1!==t&&t<r&&(o=null);s=r-1}else s=r.contentArea.children.indexOf(i);else{if(!a||a===i)return!1;s=n.contentArea.children.indexOf(a)-1;o=n===r?null:n}e[ls].target=o;e[ls].index=s;return!0}function handleOverflow(e,t,a){const r=e[Fs](),i=r[ls].noLayoutFailure,n=t[Cs];t[Cs]=()=>e;r[ls].noLayoutFailure=!0;const s=t[co](a);e[Zn](s.html,s.bbox);r[ls].noLayoutFailure=i;t[Cs]=n}class AppearanceFilter extends StringObject{constructor(e){super(Go,"appearanceFilter");this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||""}}class Arc extends XFAObject{constructor(e){super(Go,"arc",!0);this.circular=getInteger({data:e.circular,defaultValue:0,validate:e=>1===e});this.hand=getStringOption(e.hand,["even","left","right"]);this.id=e.id||"";this.startAngle=getFloat({data:e.startAngle,defaultValue:0,validate:e=>!0});this.sweepAngle=getFloat({data:e.sweepAngle,defaultValue:360,validate:e=>!0});this.use=e.use||"";this.usehref=e.usehref||"";this.edge=null;this.fill=null}[co](){const e=this.edge||new Edge({}),t=e[ho](),a=Object.create(null);"visible"===this.fill?.presence?Object.assign(a,this.fill[ho]()):a.fill="transparent";a.strokeWidth=measureToString("visible"===e.presence?e.thickness:0);a.stroke=t.color;let r;const i={xmlns:Vo,style:{width:"100%",height:"100%",overflow:"visible"}};if(360===this.sweepAngle)r={name:"ellipse",attributes:{xmlns:Vo,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:a}};else{const e=this.startAngle*Math.PI/180,t=this.sweepAngle*Math.PI/180,n=this.sweepAngle>180?1:0,[s,o,c,l]=[50*(1+Math.cos(e)),50*(1-Math.sin(e)),50*(1+Math.cos(e+t)),50*(1-Math.sin(e+t))];r={name:"path",attributes:{xmlns:Vo,d:`M ${s} ${o} A 50 50 0 ${n} 0 ${c} ${l}`,vectorEffect:"non-scaling-stroke",style:a}};Object.assign(i,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const n={name:"svg",children:[r],attributes:i};if(hasMargin(this[vs]()[vs]()))return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[n]});n.attributes.style.position="absolute";return HTMLResult.success(n)}}class Area extends XFAObject{constructor(e){super(Go,"area",!0);this.colSpan=getInteger({data:e.colSpan,defaultValue:1,validate:e=>e>=1||-1===e});this.id=e.id||"";this.name=e.name||"";this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.x=getMeasurement(e.x,"0pt");this.y=getMeasurement(e.y,"0pt");this.desc=null;this.extras=null;this.area=new XFAObjectArray;this.draw=new XFAObjectArray;this.exObject=new XFAObjectArray;this.exclGroup=new XFAObjectArray;this.field=new XFAObjectArray;this.subform=new XFAObjectArray;this.subformSet=new XFAObjectArray}*[As](){yield*getContainedChildren(this)}[Us](){return!0}[Rs](){return!0}[Zn](e,t){const[a,r,i,n]=t;this[ls].width=Math.max(this[ls].width,a+i);this[ls].height=Math.max(this[ls].height,r+n);this[ls].children.push(e)}[gs](){return this[ls].availableSpace}[co](e){const t=toStyle(this,"position"),a={style:t,id:this[uo],class:["xfaArea"]};isPrintOnly(this)&&a.class.push("xfaPrintOnly");this.name&&(a.xfaName=this.name);const r=[];this[ls]={children:r,width:0,height:0,availableSpace:e};const i=this[es]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!i.success){if(i.isBreak())return i;delete this[ls];return HTMLResult.FAILURE}t.width=measureToString(this[ls].width);t.height=measureToString(this[ls].height);const n={name:"div",attributes:a,children:r},s=[this.x,this.y,this[ls].width,this[ls].height];delete this[ls];return HTMLResult.success(n,s)}}class Assist extends XFAObject{constructor(e){super(Go,"assist",!0);this.id=e.id||"";this.role=e.role||"";this.use=e.use||"";this.usehref=e.usehref||"";this.speak=null;this.toolTip=null}[co](){return this.toolTip?.[ss]||null}}class Barcode extends XFAObject{constructor(e){super(Go,"barcode",!0);this.charEncoding=getKeyword({data:e.charEncoding?e.charEncoding.toLowerCase():"",defaultValue:"",validate:e=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(e)||e.match(/iso-8859-\\d{2}/)});this.checksum=getStringOption(e.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]);this.dataColumnCount=getInteger({data:e.dataColumnCount,defaultValue:-1,validate:e=>e>=0});this.dataLength=getInteger({data:e.dataLength,defaultValue:-1,validate:e=>e>=0});this.dataPrep=getStringOption(e.dataPrep,["none","flateCompress"]);this.dataRowCount=getInteger({data:e.dataRowCount,defaultValue:-1,validate:e=>e>=0});this.endChar=e.endChar||"";this.errorCorrectionLevel=getInteger({data:e.errorCorrectionLevel,defaultValue:-1,validate:e=>e>=0&&e<=8});this.id=e.id||"";this.moduleHeight=getMeasurement(e.moduleHeight,"5mm");this.moduleWidth=getMeasurement(e.moduleWidth,"0.25mm");this.printCheckDigit=getInteger({data:e.printCheckDigit,defaultValue:0,validate:e=>1===e});this.rowColumnRatio=getRatio(e.rowColumnRatio);this.startChar=e.startChar||"";this.textLocation=getStringOption(e.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]);this.truncate=getInteger({data:e.truncate,defaultValue:0,validate:e=>1===e});this.type=getStringOption(e.type?e.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]);this.upsMode=getStringOption(e.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]);this.use=e.use||"";this.usehref=e.usehref||"";this.wideNarrowRatio=getRatio(e.wideNarrowRatio);this.encrypt=null;this.extras=null}}class Bind extends XFAObject{constructor(e){super(Go,"bind",!0);this.match=getStringOption(e.match,["once","dataRef","global","none"]);this.ref=e.ref||"";this.picture=null}}class BindItems extends XFAObject{constructor(e){super(Go,"bindItems");this.connection=e.connection||"";this.labelRef=e.labelRef||"";this.ref=e.ref||"";this.valueRef=e.valueRef||""}}class Bookend extends XFAObject{constructor(e){super(Go,"bookend");this.id=e.id||"";this.leader=e.leader||"";this.trailer=e.trailer||"";this.use=e.use||"";this.usehref=e.usehref||""}}class BooleanElement extends Option01{constructor(e){super(Go,"boolean");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[co](e){return valueToHtml(1===this[ss]?"1":"0")}}class Border extends XFAObject{constructor(e){super(Go,"border",!0);this.break=getStringOption(e.break,["close","open"]);this.hand=getStringOption(e.hand,["even","left","right"]);this.id=e.id||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.corner=new XFAObjectArray(4);this.edge=new XFAObjectArray(4);this.extras=null;this.fill=null;this.margin=null}[ws](){if(!this[ls]){const e=this.edge.children.slice();if(e.length<4){const t=e.at(-1)||new Edge({});for(let a=e.length;a<4;a++)e.push(t)}const t=e.map((e=>e.thickness)),a=[0,0,0,0];if(this.margin){a[0]=this.margin.topInset;a[1]=this.margin.rightInset;a[2]=this.margin.bottomInset;a[3]=this.margin.leftInset}this[ls]={widths:t,insets:a,edges:e}}return this[ls]}[ho](){const{edges:e}=this[ws](),t=e.map((e=>{const t=e[ho]();t.color||="#000000";return t})),a=Object.create(null);this.margin&&Object.assign(a,this.margin[ho]());"visible"===this.fill?.presence&&Object.assign(a,this.fill[ho]());if(this.corner.children.some((e=>0!==e.radius))){const e=this.corner.children.map((e=>e[ho]()));if(2===e.length||3===e.length){const t=e.at(-1);for(let a=e.length;a<4;a++)e.push(t)}a.borderRadius=e.map((e=>e.radius)).join(" ")}switch(this.presence){case"invisible":case"hidden":a.borderStyle="";break;case"inactive":a.borderStyle="none";break;default:a.borderStyle=t.map((e=>e.style)).join(" ")}a.borderWidth=t.map((e=>e.width)).join(" ");a.borderColor=t.map((e=>e.color)).join(" ");return a}}class Break extends XFAObject{constructor(e){super(Go,"break",!0);this.after=getStringOption(e.after,["auto","contentArea","pageArea","pageEven","pageOdd"]);this.afterTarget=e.afterTarget||"";this.before=getStringOption(e.before,["auto","contentArea","pageArea","pageEven","pageOdd"]);this.beforeTarget=e.beforeTarget||"";this.bookendLeader=e.bookendLeader||"";this.bookendTrailer=e.bookendTrailer||"";this.id=e.id||"";this.overflowLeader=e.overflowLeader||"";this.overflowTarget=e.overflowTarget||"";this.overflowTrailer=e.overflowTrailer||"";this.startNew=getInteger({data:e.startNew,defaultValue:0,validate:e=>1===e});this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}}class BreakAfter extends XFAObject{constructor(e){super(Go,"breakAfter",!0);this.id=e.id||"";this.leader=e.leader||"";this.startNew=getInteger({data:e.startNew,defaultValue:0,validate:e=>1===e});this.target=e.target||"";this.targetType=getStringOption(e.targetType,["auto","contentArea","pageArea"]);this.trailer=e.trailer||"";this.use=e.use||"";this.usehref=e.usehref||"";this.script=null}}class BreakBefore extends XFAObject{constructor(e){super(Go,"breakBefore",!0);this.id=e.id||"";this.leader=e.leader||"";this.startNew=getInteger({data:e.startNew,defaultValue:0,validate:e=>1===e});this.target=e.target||"";this.targetType=getStringOption(e.targetType,["auto","contentArea","pageArea"]);this.trailer=e.trailer||"";this.use=e.use||"";this.usehref=e.usehref||"";this.script=null}[co](e){this[ls]={};return HTMLResult.FAILURE}}class Button extends XFAObject{constructor(e){super(Go,"button",!0);this.highlight=getStringOption(e.highlight,["inverted","none","outline","push"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}[co](e){const t=this[vs]()[vs](),a={name:"button",attributes:{id:this[uo],class:["xfaButton"],style:{}},children:[]};for(const e of t.event.children){if("click"!==e.activity||!e.script)continue;const t=recoverJsURL(e.script[ss]);if(!t)continue;const r=fixURL(t.url);r&&a.children.push({name:"a",attributes:{id:"link"+this[uo],href:r,newWindow:t.newWindow,class:["xfaLink"],style:{}},children:[]})}return HTMLResult.success(a)}}class Calculate extends XFAObject{constructor(e){super(Go,"calculate",!0);this.id=e.id||"";this.override=getStringOption(e.override,["disabled","error","ignore","warning"]);this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.message=null;this.script=null}}class Caption extends XFAObject{constructor(e){super(Go,"caption",!0);this.id=e.id||"";this.placement=getStringOption(e.placement,["left","bottom","inline","right","top"]);this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.reserve=Math.ceil(getMeasurement(e.reserve));this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.font=null;this.margin=null;this.para=null;this.value=null}[io](e){_setValue(this,e)}[ws](e){if(!this[ls]){let{width:t,height:a}=e;switch(this.placement){case"left":case"right":case"inline":t=this.reserve<=0?t:this.reserve;break;case"top":case"bottom":a=this.reserve<=0?a:this.reserve}this[ls]=layoutNode(this,{width:t,height:a})}return this[ls]}[co](e){if(!this.value)return HTMLResult.EMPTY;this[Ys]();const t=this.value[co](e).html;if(!t){this[Js]();return HTMLResult.EMPTY}const a=this.reserve;if(this.reserve<=0){const{w:t,h:a}=this[ws](e);switch(this.placement){case"left":case"right":case"inline":this.reserve=t;break;case"top":case"bottom":this.reserve=a}}const r=[];"string"==typeof t?r.push({name:"#text",value:t}):r.push(t);const i=toStyle(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(i.width=measureToString(this.reserve));break;case"top":case"bottom":this.reserve>0&&(i.height=measureToString(this.reserve))}setPara(this,null,t);this[Js]();this.reserve=a;return HTMLResult.success({name:"div",attributes:{style:i,class:["xfaCaption"]},children:r})}}class Certificate extends StringObject{constructor(e){super(Go,"certificate");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Certificates extends XFAObject{constructor(e){super(Go,"certificates",!0);this.credentialServerPolicy=getStringOption(e.credentialServerPolicy,["optional","required"]);this.id=e.id||"";this.url=e.url||"";this.urlPolicy=e.urlPolicy||"";this.use=e.use||"";this.usehref=e.usehref||"";this.encryption=null;this.issuers=null;this.keyUsage=null;this.oids=null;this.signing=null;this.subjectDNs=null}}class CheckButton extends XFAObject{constructor(e){super(Go,"checkButton",!0);this.id=e.id||"";this.mark=getStringOption(e.mark,["default","check","circle","cross","diamond","square","star"]);this.shape=getStringOption(e.shape,["square","round"]);this.size=getMeasurement(e.size,"10pt");this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.extras=null;this.margin=null}[co](e){const t=toStyle(this,"margin"),a=measureToString(this.size);t.width=t.height=a;let r,i,n;const s=this[vs]()[vs](),o=s.items.children.length&&s.items.children[0][co]().html||[],c={on:(void 0!==o[0]?o[0]:"on").toString(),off:(void 0!==o[1]?o[1]:"off").toString()},l=(s.value?.[so]()||"off")===c.on||void 0,h=s[Cs](),u=s[uo];let d;if(h instanceof ExclGroup){n=h[uo];r="radio";i="xfaRadio";d=h[os]?.[uo]||h[uo]}else{r="checkbox";i="xfaCheckbox";d=s[os]?.[uo]||s[uo]}const f={name:"input",attributes:{class:[i],style:t,fieldId:u,dataId:d,type:r,checked:l,xfaOn:c.on,xfaOff:c.off,"aria-label":ariaLabel(s),"aria-required":!1}};n&&(f.attributes.name=n);if(isRequired(s)){f.attributes["aria-required"]=!0;f.attributes.required=!0}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[f]})}}class ChoiceList extends XFAObject{constructor(e){super(Go,"choiceList",!0);this.commitOn=getStringOption(e.commitOn,["select","exit"]);this.id=e.id||"";this.open=getStringOption(e.open,["userControl","always","multiSelect","onEntry"]);this.textEntry=getInteger({data:e.textEntry,defaultValue:0,validate:e=>1===e});this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.extras=null;this.margin=null}[co](e){const t=toStyle(this,"border","margin"),a=this[vs]()[vs](),r={fontSize:`calc(${a.font?.size||10}px * var(--total-scale-factor))`},i=[];if(a.items.children.length>0){const e=a.items;let t=0,n=0;if(2===e.children.length){t=e.children[0].save;n=1-t}const s=e.children[t][co]().html,o=e.children[n][co]().html;let c=!1;const l=a.value?.[so]()||"";for(let e=0,t=s.length;e<t;e++){const t={name:"option",attributes:{value:o[e]||s[e],style:r},value:s[e]};o[e]===l&&(t.attributes.selected=c=!0);i.push(t)}c||i.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const n={class:["xfaSelect"],fieldId:a[uo],dataId:a[os]?.[uo]||a[uo],style:t,"aria-label":ariaLabel(a),"aria-required":!1};if(isRequired(a)){n["aria-required"]=!0;n.required=!0}"multiSelect"===this.open&&(n.multiple=!0);return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:i,attributes:n}]})}}class Color extends XFAObject{constructor(e){super(Go,"color",!0);this.cSpace=getStringOption(e.cSpace,["SRGB"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.value=e.value?function getColor(e,t=[0,0,0]){let[a,r,i]=t;if(!e)return{r:a,g:r,b:i};const n=e.split(",",3).map((e=>MathClamp(parseInt(e.trim(),10),0,255))).map((e=>isNaN(e)?0:e));if(n.length<3)return{r:a,g:r,b:i};[a,r,i]=n;return{r:a,g:r,b:i}}(e.value):"";this.extras=null}[Ts](){return!1}[ho](){return this.value?Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class Comb extends XFAObject{constructor(e){super(Go,"comb");this.id=e.id||"";this.numberOfCells=getInteger({data:e.numberOfCells,defaultValue:0,validate:e=>e>=0});this.use=e.use||"";this.usehref=e.usehref||""}}class Connect extends XFAObject{constructor(e){super(Go,"connect",!0);this.connection=e.connection||"";this.id=e.id||"";this.ref=e.ref||"";this.usage=getStringOption(e.usage,["exportAndImport","exportOnly","importOnly"]);this.use=e.use||"";this.usehref=e.usehref||"";this.picture=null}}class ContentArea extends XFAObject{constructor(e){super(Go,"contentArea",!0);this.h=getMeasurement(e.h);this.id=e.id||"";this.name=e.name||"";this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.w=getMeasurement(e.w);this.x=getMeasurement(e.x,"0pt");this.y=getMeasurement(e.y,"0pt");this.desc=null;this.extras=null}[co](e){const t={left:measureToString(this.x),top:measureToString(this.y),width:measureToString(this.w),height:measureToString(this.h)},a=["xfaContentarea"];isPrintOnly(this)&&a.push("xfaPrintOnly");return HTMLResult.success({name:"div",children:[],attributes:{style:t,class:a,id:this[uo]}})}}class Corner extends XFAObject{constructor(e){super(Go,"corner",!0);this.id=e.id||"";this.inverted=getInteger({data:e.inverted,defaultValue:0,validate:e=>1===e});this.join=getStringOption(e.join,["square","round"]);this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.radius=getMeasurement(e.radius);this.stroke=getStringOption(e.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]);this.thickness=getMeasurement(e.thickness,"0.5pt");this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null}[ho](){const e=toStyle(this,"visibility");e.radius=measureToString("square"===this.join?0:this.radius);return e}}class DateElement extends ContentObject{constructor(e){super(Go,"date");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){const e=this[ss].trim();this[ss]=e?new Date(e):null}[co](e){return valueToHtml(this[ss]?this[ss].toString():"")}}class DateTime extends ContentObject{constructor(e){super(Go,"dateTime");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){const e=this[ss].trim();this[ss]=e?new Date(e):null}[co](e){return valueToHtml(this[ss]?this[ss].toString():"")}}class DateTimeEdit extends XFAObject{constructor(e){super(Go,"dateTimeEdit",!0);this.hScrollPolicy=getStringOption(e.hScrollPolicy,["auto","off","on"]);this.id=e.id||"";this.picker=getStringOption(e.picker,["host","none"]);this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.comb=null;this.extras=null;this.margin=null}[co](e){const t=toStyle(this,"border","font","margin"),a=this[vs]()[vs](),r={name:"input",attributes:{type:"text",fieldId:a[uo],dataId:a[os]?.[uo]||a[uo],class:["xfaTextfield"],style:t,"aria-label":ariaLabel(a),"aria-required":!1}};if(isRequired(a)){r.attributes["aria-required"]=!0;r.attributes.required=!0}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[r]})}}class Decimal extends ContentObject{constructor(e){super(Go,"decimal");this.fracDigits=getInteger({data:e.fracDigits,defaultValue:2,validate:e=>!0});this.id=e.id||"";this.leadDigits=getInteger({data:e.leadDigits,defaultValue:-1,validate:e=>!0});this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){const e=parseFloat(this[ss].trim());this[ss]=isNaN(e)?null:e}[co](e){return valueToHtml(null!==this[ss]?this[ss].toString():"")}}class DefaultUi extends XFAObject{constructor(e){super(Go,"defaultUi",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}}class Desc extends XFAObject{constructor(e){super(Go,"desc",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.boolean=new XFAObjectArray;this.date=new XFAObjectArray;this.dateTime=new XFAObjectArray;this.decimal=new XFAObjectArray;this.exData=new XFAObjectArray;this.float=new XFAObjectArray;this.image=new XFAObjectArray;this.integer=new XFAObjectArray;this.text=new XFAObjectArray;this.time=new XFAObjectArray}}class DigestMethod extends OptionObject{constructor(e){super(Go,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||""}}class DigestMethods extends XFAObject{constructor(e){super(Go,"digestMethods",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.digestMethod=new XFAObjectArray}}class Draw extends XFAObject{constructor(e){super(Go,"draw",!0);this.anchorType=getStringOption(e.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);this.colSpan=getInteger({data:e.colSpan,defaultValue:1,validate:e=>e>=1||-1===e});this.h=e.h?getMeasurement(e.h):"";this.hAlign=getStringOption(e.hAlign,["left","center","justify","justifyAll","radix","right"]);this.id=e.id||"";this.locale=e.locale||"";this.maxH=getMeasurement(e.maxH,"0pt");this.maxW=getMeasurement(e.maxW,"0pt");this.minH=getMeasurement(e.minH,"0pt");this.minW=getMeasurement(e.minW,"0pt");this.name=e.name||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.relevant=getRelevant(e.relevant);this.rotate=getInteger({data:e.rotate,defaultValue:0,validate:e=>e%90==0});this.use=e.use||"";this.usehref=e.usehref||"";this.w=e.w?getMeasurement(e.w):"";this.x=getMeasurement(e.x,"0pt");this.y=getMeasurement(e.y,"0pt");this.assist=null;this.border=null;this.caption=null;this.desc=null;this.extras=null;this.font=null;this.keep=null;this.margin=null;this.para=null;this.traversal=null;this.ui=null;this.value=null;this.setProperty=new XFAObjectArray}[io](e){_setValue(this,e)}[co](e){setTabIndex(this);if("hidden"===this.presence||"inactive"===this.presence)return HTMLResult.EMPTY;fixDimensions(this);this[Ys]();const t=this.w,a=this.h,{w:r,h:i,isBroken:n}=layoutNode(this,e);if(r&&""===this.w){if(n&&this[Cs]()[_s]()){this[Js]();return HTMLResult.FAILURE}this.w=r}i&&""===this.h&&(this.h=i);setFirstUnsplittable(this);if(!checkDimensions(this,e)){this.w=t;this.h=a;this[Js]();return HTMLResult.FAILURE}unsetFirstUnsplittable(this);const s=toStyle(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");setMinMaxDimensions(this,s);if(s.margin){s.padding=s.margin;delete s.margin}const o=["xfaDraw"];this.font&&o.push("xfaFont");isPrintOnly(this)&&o.push("xfaPrintOnly");const c={style:s,id:this[uo],class:o};this.name&&(c.xfaName=this.name);const l={name:"div",attributes:c,children:[]};applyAssist(this,c);const h=computeBbox(this,l,e),u=this.value?this.value[co](e).html:null;if(null===u){this.w=t;this.h=a;this[Js]();return HTMLResult.success(createWrapper(this,l),h)}l.children.push(u);setPara(this,s,u);this.w=t;this.h=a;this[Js]();return HTMLResult.success(createWrapper(this,l),h)}}class Edge extends XFAObject{constructor(e){super(Go,"edge",!0);this.cap=getStringOption(e.cap,["square","butt","round"]);this.id=e.id||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.stroke=getStringOption(e.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]);this.thickness=getMeasurement(e.thickness,"0.5pt");this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null}[ho](){const e=toStyle(this,"visibility");Object.assign(e,{linecap:this.cap,width:measureToString(this.thickness),color:this.color?this.color[ho]():"#000000",style:""});if("visible"!==this.presence)e.style="none";else switch(this.stroke){case"solid":e.style="solid";break;case"dashDot":case"dashDotDot":case"dashed":e.style="dashed";break;case"dotted":e.style="dotted";break;case"embossed":e.style="ridge";break;case"etched":e.style="groove";break;case"lowered":e.style="inset";break;case"raised":e.style="outset"}return e}}class Encoding extends OptionObject{constructor(e){super(Go,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Encodings extends XFAObject{constructor(e){super(Go,"encodings",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.encoding=new XFAObjectArray}}class Encrypt extends XFAObject{constructor(e){super(Go,"encrypt",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.certificate=null}}class EncryptData extends XFAObject{constructor(e){super(Go,"encryptData",!0);this.id=e.id||"";this.operation=getStringOption(e.operation,["encrypt","decrypt"]);this.target=e.target||"";this.use=e.use||"";this.usehref=e.usehref||"";this.filter=null;this.manifest=null}}class Encryption extends XFAObject{constructor(e){super(Go,"encryption",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.certificate=new XFAObjectArray}}class EncryptionMethod extends OptionObject{constructor(e){super(Go,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||""}}class EncryptionMethods extends XFAObject{constructor(e){super(Go,"encryptionMethods",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.encryptionMethod=new XFAObjectArray}}class Event extends XFAObject{constructor(e){super(Go,"event",!0);this.activity=getStringOption(e.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]);this.id=e.id||"";this.listen=getStringOption(e.listen,["refOnly","refAndDescendents"]);this.name=e.name||"";this.ref=e.ref||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.encryptData=null;this.execute=null;this.script=null;this.signData=null;this.submit=null}}class ExData extends ContentObject{constructor(e){super(Go,"exData");this.contentType=e.contentType||"";this.href=e.href||"";this.id=e.id||"";this.maxLength=getInteger({data:e.maxLength,defaultValue:-1,validate:e=>e>=-1});this.name=e.name||"";this.rid=e.rid||"";this.transferEncoding=getStringOption(e.transferEncoding,["none","base64","package"]);this.use=e.use||"";this.usehref=e.usehref||""}[Bs](){return"text/html"===this.contentType}[$s](e){if("text/html"===this.contentType&&e[Hs]===go.xhtml.id){this[ss]=e;return!0}if("text/xml"===this.contentType){this[ss]=e;return!0}return!1}[co](e){return"text/html"===this.contentType&&this[ss]?this[ss][co](e):HTMLResult.EMPTY}}class ExObject extends XFAObject{constructor(e){super(Go,"exObject",!0);this.archive=e.archive||"";this.classId=e.classId||"";this.codeBase=e.codeBase||"";this.codeType=e.codeType||"";this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.boolean=new XFAObjectArray;this.date=new XFAObjectArray;this.dateTime=new XFAObjectArray;this.decimal=new XFAObjectArray;this.exData=new XFAObjectArray;this.exObject=new XFAObjectArray;this.float=new XFAObjectArray;this.image=new XFAObjectArray;this.integer=new XFAObjectArray;this.text=new XFAObjectArray;this.time=new XFAObjectArray}}class ExclGroup extends XFAObject{constructor(e){super(Go,"exclGroup",!0);this.access=getStringOption(e.access,["open","nonInteractive","protected","readOnly"]);this.accessKey=e.accessKey||"";this.anchorType=getStringOption(e.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);this.colSpan=getInteger({data:e.colSpan,defaultValue:1,validate:e=>e>=1||-1===e});this.h=e.h?getMeasurement(e.h):"";this.hAlign=getStringOption(e.hAlign,["left","center","justify","justifyAll","radix","right"]);this.id=e.id||"";this.layout=getStringOption(e.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]);this.maxH=getMeasurement(e.maxH,"0pt");this.maxW=getMeasurement(e.maxW,"0pt");this.minH=getMeasurement(e.minH,"0pt");this.minW=getMeasurement(e.minW,"0pt");this.name=e.name||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.w=e.w?getMeasurement(e.w):"";this.x=getMeasurement(e.x,"0pt");this.y=getMeasurement(e.y,"0pt");this.assist=null;this.bind=null;this.border=null;this.calculate=null;this.caption=null;this.desc=null;this.extras=null;this.margin=null;this.para=null;this.traversal=null;this.validate=null;this.connect=new XFAObjectArray;this.event=new XFAObjectArray;this.field=new XFAObjectArray;this.setProperty=new XFAObjectArray}[Rs](){return!0}[Ts](){return!0}[io](e){for(const t of this.field.children){if(!t.value){const e=new Value({});t[Qn](e);t.value=e}t.value[io](e)}}[_s](){return this.layout.endsWith("-tb")&&0===this[ls].attempt&&this[ls].numberInLine>0||this[vs]()[_s]()}[js](){const e=this[Cs]();if(!e[js]())return!1;if(void 0!==this[ls]._isSplittable)return this[ls]._isSplittable;if("position"===this.layout||this.layout.includes("row")){this[ls]._isSplittable=!1;return!1}if(e.layout?.endsWith("-tb")&&0!==e[ls].numberInLine)return!1;this[ls]._isSplittable=!0;return!0}[us](){return flushHTML(this)}[Zn](e,t){addHTML(this,e,t)}[gs](){return getAvailableSpace(this)}[co](e){setTabIndex(this);if("hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return HTMLResult.EMPTY;fixDimensions(this);const t=[],a={id:this[uo],class:[]};setAccess(this,a.class);this[ls]||=Object.create(null);Object.assign(this[ls],{children:t,attributes:a,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,e.width),height:Math.min(this.h||1/0,e.height)},width:0,height:0,prevHeight:0,currentWidth:0});const r=this[js]();r||setFirstUnsplittable(this);if(!checkDimensions(this,e))return HTMLResult.FAILURE;const i=new Set(["field"]);if(this.layout.includes("row")){const e=this[Cs]().columnWidths;if(Array.isArray(e)&&e.length>0){this[ls].columnWidths=e;this[ls].currentColumn=0}}const n=toStyle(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),s=["xfaExclgroup"],o=layoutClass(this);o&&s.push(o);isPrintOnly(this)&&s.push("xfaPrintOnly");a.style=n;a.class=s;this.name&&(a.xfaName=this.name);this[Ys]();const c="lr-tb"===this.layout||"rl-tb"===this.layout,l=c?2:1;for(;this[ls].attempt<l;this[ls].attempt++){c&&1===this[ls].attempt&&(this[ls].numberInLine=0);const e=this[es]({filter:i,include:!0});if(e.success)break;if(e.isBreak()){this[Js]();return e}if(c&&0===this[ls].attempt&&0===this[ls].numberInLine&&!this[Fs]()[ls].noLayoutFailure){this[ls].attempt=l;break}}this[Js]();r||unsetFirstUnsplittable(this);if(this[ls].attempt===l){r||delete this[ls];return HTMLResult.FAILURE}let h=0,u=0;if(this.margin){h=this.margin.leftInset+this.margin.rightInset;u=this.margin.topInset+this.margin.bottomInset}const d=Math.max(this[ls].width+h,this.w||0),f=Math.max(this[ls].height+u,this.h||0),g=[this.x,this.y,d,f];""===this.w&&(n.width=measureToString(d));""===this.h&&(n.height=measureToString(f));const p={name:"div",attributes:a,children:t};applyAssist(this,a);delete this[ls];return HTMLResult.success(createWrapper(this,p),g)}}class Execute extends XFAObject{constructor(e){super(Go,"execute");this.connection=e.connection||"";this.executeType=getStringOption(e.executeType,["import","remerge"]);this.id=e.id||"";this.runAt=getStringOption(e.runAt,["client","both","server"]);this.use=e.use||"";this.usehref=e.usehref||""}}class Extras extends XFAObject{constructor(e){super(Go,"extras",!0);this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||"";this.boolean=new XFAObjectArray;this.date=new XFAObjectArray;this.dateTime=new XFAObjectArray;this.decimal=new XFAObjectArray;this.exData=new XFAObjectArray;this.extras=new XFAObjectArray;this.float=new XFAObjectArray;this.image=new XFAObjectArray;this.integer=new XFAObjectArray;this.text=new XFAObjectArray;this.time=new XFAObjectArray}}class Field extends XFAObject{constructor(e){super(Go,"field",!0);this.access=getStringOption(e.access,["open","nonInteractive","protected","readOnly"]);this.accessKey=e.accessKey||"";this.anchorType=getStringOption(e.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);this.colSpan=getInteger({data:e.colSpan,defaultValue:1,validate:e=>e>=1||-1===e});this.h=e.h?getMeasurement(e.h):"";this.hAlign=getStringOption(e.hAlign,["left","center","justify","justifyAll","radix","right"]);this.id=e.id||"";this.locale=e.locale||"";this.maxH=getMeasurement(e.maxH,"0pt");this.maxW=getMeasurement(e.maxW,"0pt");this.minH=getMeasurement(e.minH,"0pt");this.minW=getMeasurement(e.minW,"0pt");this.name=e.name||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.relevant=getRelevant(e.relevant);this.rotate=getInteger({data:e.rotate,defaultValue:0,validate:e=>e%90==0});this.use=e.use||"";this.usehref=e.usehref||"";this.w=e.w?getMeasurement(e.w):"";this.x=getMeasurement(e.x,"0pt");this.y=getMeasurement(e.y,"0pt");this.assist=null;this.bind=null;this.border=null;this.calculate=null;this.caption=null;this.desc=null;this.extras=null;this.font=null;this.format=null;this.items=new XFAObjectArray(2);this.keep=null;this.margin=null;this.para=null;this.traversal=null;this.ui=null;this.validate=null;this.value=null;this.bindItems=new XFAObjectArray;this.connect=new XFAObjectArray;this.event=new XFAObjectArray;this.setProperty=new XFAObjectArray}[Rs](){return!0}[io](e){_setValue(this,e)}[co](e){setTabIndex(this);if(!this.ui){this.ui=new Ui({});this.ui[Is]=this[Is];this[Qn](this.ui);let e;switch(this.items.children.length){case 0:e=new TextEdit({});this.ui.textEdit=e;break;case 1:e=new CheckButton({});this.ui.checkButton=e;break;case 2:e=new ChoiceList({});this.ui.choiceList=e}this.ui[Qn](e)}if(!this.ui||"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return HTMLResult.EMPTY;this.caption&&delete this.caption[ls];this[Ys]();const t=this.caption?this.caption[co](e).html:null,a=this.w,r=this.h;let i=0,n=0;if(this.margin){i=this.margin.leftInset+this.margin.rightInset;n=this.margin.topInset+this.margin.bottomInset}let s=null;if(""===this.w||""===this.h){let t=null,a=null,r=0,o=0;if(this.ui.checkButton)r=o=this.ui.checkButton.size;else{const{w:t,h:a}=layoutNode(this,e);if(null!==t){r=t;o=a}else o=function fonts_getMetrics(e,t=!1){let a=null;if(e){const t=stripQuotes(e.typeface),r=e[Is].fontFinder.find(t);a=selectFont(e,r)}if(!a)return{lineHeight:12,lineGap:2,lineNoGap:10};const r=e.size||10,i=a.lineHeight?Math.max(t?0:1.2,a.lineHeight):1.2,n=void 0===a.lineGap?.2:a.lineGap;return{lineHeight:i*r,lineGap:n*r,lineNoGap:Math.max(1,i-n)*r}}(this.font,!0).lineNoGap}s=getBorderDims(this.ui[ws]());r+=s.w;o+=s.h;if(this.caption){const{w:i,h:n,isBroken:s}=this.caption[ws](e);if(s&&this[Cs]()[_s]()){this[Js]();return HTMLResult.FAILURE}t=i;a=n;switch(this.caption.placement){case"left":case"right":case"inline":t+=r;break;case"top":case"bottom":a+=o}}else{t=r;a=o}if(t&&""===this.w){t+=i;this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<t?t:this.minW)}if(a&&""===this.h){a+=n;this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<a?a:this.minH)}}this[Js]();fixDimensions(this);setFirstUnsplittable(this);if(!checkDimensions(this,e)){this.w=a;this.h=r;this[Js]();return HTMLResult.FAILURE}unsetFirstUnsplittable(this);const o=toStyle(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");setMinMaxDimensions(this,o);const c=["xfaField"];this.font&&c.push("xfaFont");isPrintOnly(this)&&c.push("xfaPrintOnly");const l={style:o,id:this[uo],class:c};if(o.margin){o.padding=o.margin;delete o.margin}setAccess(this,c);this.name&&(l.xfaName=this.name);const h=[],u={name:"div",attributes:l,children:h};applyAssist(this,l);const d=this.border?this.border[ho]():null,f=computeBbox(this,u,e),g=this.ui[co]().html;if(!g){Object.assign(o,d);return HTMLResult.success(createWrapper(this,u),f)}this[no]&&(g.children?.[0]?g.children[0].attributes.tabindex=this[no]:g.attributes.tabindex=this[no]);g.attributes.style||=Object.create(null);let p=null;if(this.ui.button){1===g.children.length&&([p]=g.children.splice(0,1));Object.assign(g.attributes.style,d)}else Object.assign(o,d);h.push(g);if(this.value)if(this.ui.imageEdit)g.children.push(this.value[co]().html);else if(!this.ui.button){let e="";if(this.value.exData)e=this.value.exData[so]();else if(this.value.text)e=this.value.text[ws]();else{const t=this.value[co]().html;null!==t&&(e=t.children[0].value)}this.ui.textEdit&&this.value.text?.maxChars&&(g.children[0].attributes.maxLength=this.value.text.maxChars);if(e){if(this.ui.numericEdit){e=parseFloat(e);e=isNaN(e)?"":e.toString()}"textarea"===g.children[0].name?g.children[0].attributes.textContent=e:g.children[0].attributes.value=e}}if(!this.ui.imageEdit&&g.children?.[0]&&this.h){s=s||getBorderDims(this.ui[ws]());let t=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){t=this.caption.reserve;t<=0&&(t=this.caption[ws](e).h);const a=this.h-t-n-s.h;g.children[0].attributes.style.height=measureToString(a)}else g.children[0].attributes.style.height="100%"}p&&g.children.push(p);if(!t){g.attributes.class&&g.attributes.class.push("xfaLeft");this.w=a;this.h=r;return HTMLResult.success(createWrapper(this,u),f)}if(this.ui.button){o.padding&&delete o.padding;"div"===t.name&&(t.name="span");g.children.push(t);return HTMLResult.success(u,f)}this.ui.checkButton&&(t.attributes.class[0]="xfaCaptionForCheckButton");g.attributes.class||=[];g.children.splice(0,0,t);switch(this.caption.placement){case"left":case"inline":g.attributes.class.push("xfaLeft");break;case"right":g.attributes.class.push("xfaRight");break;case"top":g.attributes.class.push("xfaTop");break;case"bottom":g.attributes.class.push("xfaBottom")}this.w=a;this.h=r;return HTMLResult.success(createWrapper(this,u),f)}}class Fill extends XFAObject{constructor(e){super(Go,"fill",!0);this.id=e.id||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null;this.linear=null;this.pattern=null;this.radial=null;this.solid=null;this.stipple=null}[ho](){const e=this[vs](),t=e[vs]()[vs](),a=Object.create(null);let r="color",i=r;if(e instanceof Border){r="background-color";i="background";t instanceof Ui&&(a.backgroundColor="white")}if(e instanceof Rectangle||e instanceof Arc){r=i="fill";a.fill="white"}for(const e of Object.getOwnPropertyNames(this)){if("extras"===e||"color"===e)continue;const t=this[e];if(!(t instanceof XFAObject))continue;const n=t[ho](this.color);n&&(a[n.startsWith("#")?r:i]=n);return a}if(this.color?.value){const e=this.color[ho]();a[e.startsWith("#")?r:i]=e}return a}}class Filter extends XFAObject{constructor(e){super(Go,"filter",!0);this.addRevocationInfo=getStringOption(e.addRevocationInfo,["","required","optional","none"]);this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||"";this.version=getInteger({data:this.version,defaultValue:5,validate:e=>e>=1&&e<=5});this.appearanceFilter=null;this.certificates=null;this.digestMethods=null;this.encodings=null;this.encryptionMethods=null;this.handler=null;this.lockDocument=null;this.mdp=null;this.reasons=null;this.timeStamp=null}}class Float extends ContentObject{constructor(e){super(Go,"float");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){const e=parseFloat(this[ss].trim());this[ss]=isNaN(e)?null:e}[co](e){return valueToHtml(null!==this[ss]?this[ss].toString():"")}}class template_Font extends XFAObject{constructor(e){super(Go,"font",!0);this.baselineShift=getMeasurement(e.baselineShift);this.fontHorizontalScale=getFloat({data:e.fontHorizontalScale,defaultValue:100,validate:e=>e>=0});this.fontVerticalScale=getFloat({data:e.fontVerticalScale,defaultValue:100,validate:e=>e>=0});this.id=e.id||"";this.kerningMode=getStringOption(e.kerningMode,["none","pair"]);this.letterSpacing=getMeasurement(e.letterSpacing,"0");this.lineThrough=getInteger({data:e.lineThrough,defaultValue:0,validate:e=>1===e||2===e});this.lineThroughPeriod=getStringOption(e.lineThroughPeriod,["all","word"]);this.overline=getInteger({data:e.overline,defaultValue:0,validate:e=>1===e||2===e});this.overlinePeriod=getStringOption(e.overlinePeriod,["all","word"]);this.posture=getStringOption(e.posture,["normal","italic"]);this.size=getMeasurement(e.size,"10pt");this.typeface=e.typeface||"Courier";this.underline=getInteger({data:e.underline,defaultValue:0,validate:e=>1===e||2===e});this.underlinePeriod=getStringOption(e.underlinePeriod,["all","word"]);this.use=e.use||"";this.usehref=e.usehref||"";this.weight=getStringOption(e.weight,["normal","bold"]);this.extras=null;this.fill=null}[ts](e){super[ts](e);this[Is].usedTypefaces.add(this.typeface)}[ho](){const e=toStyle(this,"fill"),t=e.color;if(t)if("#000000"===t)delete e.color;else if(!t.startsWith("#")){e.background=t;e.backgroundClip="text";e.color="transparent"}this.baselineShift&&(e.verticalAlign=measureToString(this.baselineShift));e.fontKerning="none"===this.kerningMode?"none":"normal";e.letterSpacing=measureToString(this.letterSpacing);if(0!==this.lineThrough){e.textDecoration="line-through";2===this.lineThrough&&(e.textDecorationStyle="double")}if(0!==this.overline){e.textDecoration="overline";2===this.overline&&(e.textDecorationStyle="double")}e.fontStyle=this.posture;e.fontSize=measureToString(.99*this.size);setFontFamily(this,this,this[Is].fontFinder,e);if(0!==this.underline){e.textDecoration="underline";2===this.underline&&(e.textDecorationStyle="double")}e.fontWeight=this.weight;return e}}class Format extends XFAObject{constructor(e){super(Go,"format",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.picture=null}}class Handler extends StringObject{constructor(e){super(Go,"handler");this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||""}}class Hyphenation extends XFAObject{constructor(e){super(Go,"hyphenation");this.excludeAllCaps=getInteger({data:e.excludeAllCaps,defaultValue:0,validate:e=>1===e});this.excludeInitialCap=getInteger({data:e.excludeInitialCap,defaultValue:0,validate:e=>1===e});this.hyphenate=getInteger({data:e.hyphenate,defaultValue:0,validate:e=>1===e});this.id=e.id||"";this.pushCharacterCount=getInteger({data:e.pushCharacterCount,defaultValue:3,validate:e=>e>=0});this.remainCharacterCount=getInteger({data:e.remainCharacterCount,defaultValue:3,validate:e=>e>=0});this.use=e.use||"";this.usehref=e.usehref||"";this.wordCharacterCount=getInteger({data:e.wordCharacterCount,defaultValue:7,validate:e=>e>=0})}}class Image extends StringObject{constructor(e){super(Go,"image");this.aspect=getStringOption(e.aspect,["fit","actual","height","none","width"]);this.contentType=e.contentType||"";this.href=e.href||"";this.id=e.id||"";this.name=e.name||"";this.transferEncoding=getStringOption(e.transferEncoding,["base64","none","package"]);this.use=e.use||"";this.usehref=e.usehref||""}[co](){if(this.contentType&&!Jo.has(this.contentType.toLowerCase()))return HTMLResult.EMPTY;let e=this[Is].images?.get(this.href);if(!e&&(this.href||!this[ss]))return HTMLResult.EMPTY;e||"base64"!==this.transferEncoding||(e=function fromBase64Util(e){return Uint8Array.fromBase64?Uint8Array.fromBase64(e):stringToBytes(atob(e))}(this[ss]));if(!e)return HTMLResult.EMPTY;if(!this.contentType){for(const[t,a]of Yo)if(e.length>t.length&&t.every(((t,a)=>t===e[a]))){this.contentType=a;break}if(!this.contentType)return HTMLResult.EMPTY}const t=new Blob([e],{type:this.contentType});let a;switch(this.aspect){case"fit":case"actual":break;case"height":a={height:"100%",objectFit:"fill"};break;case"none":a={width:"100%",height:"100%",objectFit:"fill"};break;case"width":a={width:"100%",objectFit:"fill"}}const r=this[vs]();return HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:a,src:URL.createObjectURL(t),alt:r?ariaLabel(r[vs]()):null}})}}class ImageEdit extends XFAObject{constructor(e){super(Go,"imageEdit",!0);this.data=getStringOption(e.data,["link","embed"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.extras=null;this.margin=null}[co](e){return"embed"===this.data?HTMLResult.success({name:"div",children:[],attributes:{}}):HTMLResult.EMPTY}}class Integer extends ContentObject{constructor(e){super(Go,"integer");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){const e=parseInt(this[ss].trim(),10);this[ss]=isNaN(e)?null:e}[co](e){return valueToHtml(null!==this[ss]?this[ss].toString():"")}}class Issuers extends XFAObject{constructor(e){super(Go,"issuers",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.certificate=new XFAObjectArray}}class Items extends XFAObject{constructor(e){super(Go,"items",!0);this.id=e.id||"";this.name=e.name||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.ref=e.ref||"";this.save=getInteger({data:e.save,defaultValue:0,validate:e=>1===e});this.use=e.use||"";this.usehref=e.usehref||"";this.boolean=new XFAObjectArray;this.date=new XFAObjectArray;this.dateTime=new XFAObjectArray;this.decimal=new XFAObjectArray;this.exData=new XFAObjectArray;this.float=new XFAObjectArray;this.image=new XFAObjectArray;this.integer=new XFAObjectArray;this.text=new XFAObjectArray;this.time=new XFAObjectArray}[co](){const e=[];for(const t of this[Ss]())e.push(t[so]());return HTMLResult.success(e)}}class Keep extends XFAObject{constructor(e){super(Go,"keep",!0);this.id=e.id||"";const t=["none","contentArea","pageArea"];this.intact=getStringOption(e.intact,t);this.next=getStringOption(e.next,t);this.previous=getStringOption(e.previous,t);this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}}class KeyUsage extends XFAObject{constructor(e){super(Go,"keyUsage");const t=["","yes","no"];this.crlSign=getStringOption(e.crlSign,t);this.dataEncipherment=getStringOption(e.dataEncipherment,t);this.decipherOnly=getStringOption(e.decipherOnly,t);this.digitalSignature=getStringOption(e.digitalSignature,t);this.encipherOnly=getStringOption(e.encipherOnly,t);this.id=e.id||"";this.keyAgreement=getStringOption(e.keyAgreement,t);this.keyCertSign=getStringOption(e.keyCertSign,t);this.keyEncipherment=getStringOption(e.keyEncipherment,t);this.nonRepudiation=getStringOption(e.nonRepudiation,t);this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||""}}class Line extends XFAObject{constructor(e){super(Go,"line",!0);this.hand=getStringOption(e.hand,["even","left","right"]);this.id=e.id||"";this.slope=getStringOption(e.slope,["\\\\","/"]);this.use=e.use||"";this.usehref=e.usehref||"";this.edge=null}[co](){const e=this[vs]()[vs](),t=this.edge||new Edge({}),a=t[ho](),r=Object.create(null),i="visible"===t.presence?t.thickness:0;r.strokeWidth=measureToString(i);r.stroke=a.color;let n,s,o,c,l="100%",h="100%";if(e.w<=i){[n,s,o,c]=["50%",0,"50%","100%"];l=r.strokeWidth}else if(e.h<=i){[n,s,o,c]=[0,"50%","100%","50%"];h=r.strokeWidth}else"\\\\"===this.slope?[n,s,o,c]=[0,0,"100%","100%"]:[n,s,o,c]=[0,"100%","100%",0];const u={name:"svg",children:[{name:"line",attributes:{xmlns:Vo,x1:n,y1:s,x2:o,y2:c,style:r}}],attributes:{xmlns:Vo,width:l,height:h,style:{overflow:"visible"}}};if(hasMargin(e))return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[u]});u.attributes.style.position="absolute";return HTMLResult.success(u)}}class Linear extends XFAObject{constructor(e){super(Go,"linear",!0);this.id=e.id||"";this.type=getStringOption(e.type,["toRight","toBottom","toLeft","toTop"]);this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null}[ho](e){e=e?e[ho]():"#FFFFFF";return`linear-gradient(${this.type.replace(/([RBLT])/," $1").toLowerCase()}, ${e}, ${this.color?this.color[ho]():"#000000"})`}}class LockDocument extends ContentObject{constructor(e){super(Go,"lockDocument");this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||""}[hs](){this[ss]=getStringOption(this[ss],["auto","0","1"])}}class Manifest extends XFAObject{constructor(e){super(Go,"manifest",!0);this.action=getStringOption(e.action,["include","all","exclude"]);this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.ref=new XFAObjectArray}}class Margin extends XFAObject{constructor(e){super(Go,"margin",!0);this.bottomInset=getMeasurement(e.bottomInset,"0");this.id=e.id||"";this.leftInset=getMeasurement(e.leftInset,"0");this.rightInset=getMeasurement(e.rightInset,"0");this.topInset=getMeasurement(e.topInset,"0");this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}[ho](){return{margin:measureToString(this.topInset)+" "+measureToString(this.rightInset)+" "+measureToString(this.bottomInset)+" "+measureToString(this.leftInset)}}}class Mdp extends XFAObject{constructor(e){super(Go,"mdp");this.id=e.id||"";this.permissions=getInteger({data:e.permissions,defaultValue:2,validate:e=>1===e||3===e});this.signatureType=getStringOption(e.signatureType,["filler","author"]);this.use=e.use||"";this.usehref=e.usehref||""}}class Medium extends XFAObject{constructor(e){super(Go,"medium");this.id=e.id||"";this.imagingBBox=function getBBox(e){const t=-1;if(!e)return{x:t,y:t,width:t,height:t};const a=e.split(",",4).map((e=>getMeasurement(e.trim(),"-1")));if(a.length<4||a[2]<0||a[3]<0)return{x:t,y:t,width:t,height:t};const[r,i,n,s]=a;return{x:r,y:i,width:n,height:s}}(e.imagingBBox);this.long=getMeasurement(e.long);this.orientation=getStringOption(e.orientation,["portrait","landscape"]);this.short=getMeasurement(e.short);this.stock=e.stock||"";this.trayIn=getStringOption(e.trayIn,["auto","delegate","pageFront"]);this.trayOut=getStringOption(e.trayOut,["auto","delegate"]);this.use=e.use||"";this.usehref=e.usehref||""}}class Message extends XFAObject{constructor(e){super(Go,"message",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.text=new XFAObjectArray}}class NumericEdit extends XFAObject{constructor(e){super(Go,"numericEdit",!0);this.hScrollPolicy=getStringOption(e.hScrollPolicy,["auto","off","on"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.comb=null;this.extras=null;this.margin=null}[co](e){const t=toStyle(this,"border","font","margin"),a=this[vs]()[vs](),r={name:"input",attributes:{type:"text",fieldId:a[uo],dataId:a[os]?.[uo]||a[uo],class:["xfaTextfield"],style:t,"aria-label":ariaLabel(a),"aria-required":!1}};if(isRequired(a)){r.attributes["aria-required"]=!0;r.attributes.required=!0}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[r]})}}class Occur extends XFAObject{constructor(e){super(Go,"occur",!0);this.id=e.id||"";this.initial=""!==e.initial?getInteger({data:e.initial,defaultValue:"",validate:e=>!0}):"";this.max=""!==e.max?getInteger({data:e.max,defaultValue:1,validate:e=>!0}):"";this.min=""!==e.min?getInteger({data:e.min,defaultValue:1,validate:e=>!0}):"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}[ts](){const e=this[vs](),t=this.min;""===this.min&&(this.min=e instanceof PageArea||e instanceof PageSet?0:1);""===this.max&&(this.max=""===t?e instanceof PageArea||e instanceof PageSet?-1:1:this.min);-1!==this.max&&this.max<this.min&&(this.max=this.min);""===this.initial&&(this.initial=e instanceof Template?1:this.min)}}class Oid extends StringObject{constructor(e){super(Go,"oid");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Oids extends XFAObject{constructor(e){super(Go,"oids",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.oid=new XFAObjectArray}}class Overflow extends XFAObject{constructor(e){super(Go,"overflow");this.id=e.id||"";this.leader=e.leader||"";this.target=e.target||"";this.trailer=e.trailer||"";this.use=e.use||"";this.usehref=e.usehref||""}[ws](){if(!this[ls]){const e=this[vs](),t=this[Fs](),a=t[to](this.target,e),r=t[to](this.leader,e),i=t[to](this.trailer,e);this[ls]={target:a?.[0]||null,leader:r?.[0]||null,trailer:i?.[0]||null,addLeader:!1,addTrailer:!1}}return this[ls]}}class PageArea extends XFAObject{constructor(e){super(Go,"pageArea",!0);this.blankOrNotBlank=getStringOption(e.blankOrNotBlank,["any","blank","notBlank"]);this.id=e.id||"";this.initialNumber=getInteger({data:e.initialNumber,defaultValue:1,validate:e=>!0});this.name=e.name||"";this.numbered=getInteger({data:e.numbered,defaultValue:1,validate:e=>!0});this.oddOrEven=getStringOption(e.oddOrEven,["any","even","odd"]);this.pagePosition=getStringOption(e.pagePosition,["any","first","last","only","rest"]);this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.desc=null;this.extras=null;this.medium=null;this.occur=null;this.area=new XFAObjectArray;this.contentArea=new XFAObjectArray;this.draw=new XFAObjectArray;this.exclGroup=new XFAObjectArray;this.field=new XFAObjectArray;this.subform=new XFAObjectArray}[Xs](){if(!this[ls]){this[ls]={numberOfUse:0};return!0}return!this.occur||-1===this.occur.max||this[ls].numberOfUse<this.occur.max}[as](){delete this[ls]}[ks](){this[ls]||={numberOfUse:0};const e=this[vs]();if("orderedOccurrence"===e.relation&&this[Xs]()){this[ls].numberOfUse+=1;return this}return e[ks]()}[gs](){return this[ls].space||{width:0,height:0}}[co](){this[ls]||={numberOfUse:1};const e=[];this[ls].children=e;const t=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){t.width=measureToString(this.medium.short);t.height=measureToString(this.medium.long);this[ls].space={width:this.medium.short,height:this.medium.long};if("landscape"===this.medium.orientation){const e=t.width;t.width=t.height;t.height=e;this[ls].space={width:this.medium.long,height:this.medium.short}}}else warn("XFA - No medium specified in pageArea: please file a bug.");this[es]({filter:new Set(["area","draw","field","subform"]),include:!0});this[es]({filter:new Set(["contentArea"]),include:!0});return HTMLResult.success({name:"div",children:e,attributes:{class:["xfaPage"],id:this[uo],style:t,xfaName:this.name}})}}class PageSet extends XFAObject{constructor(e){super(Go,"pageSet",!0);this.duplexImposition=getStringOption(e.duplexImposition,["longEdge","shortEdge"]);this.id=e.id||"";this.name=e.name||"";this.relation=getStringOption(e.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]);this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.occur=null;this.pageArea=new XFAObjectArray;this.pageSet=new XFAObjectArray}[as](){for(const e of this.pageArea.children)e[as]();for(const e of this.pageSet.children)e[as]()}[Xs](){return!this.occur||-1===this.occur.max||this[ls].numberOfUse<this.occur.max}[ks](){this[ls]||={numberOfUse:1,pageIndex:-1,pageSetIndex:-1};if("orderedOccurrence"===this.relation){if(this[ls].pageIndex+1<this.pageArea.children.length){this[ls].pageIndex+=1;return this.pageArea.children[this[ls].pageIndex][ks]()}if(this[ls].pageSetIndex+1<this.pageSet.children.length){this[ls].pageSetIndex+=1;return this.pageSet.children[this[ls].pageSetIndex][ks]()}if(this[Xs]()){this[ls].numberOfUse+=1;this[ls].pageIndex=-1;this[ls].pageSetIndex=-1;return this[ks]()}const e=this[vs]();if(e instanceof PageSet)return e[ks]();this[as]();return this[ks]()}const e=this[Fs]()[ls].pageNumber,t=e%2==0?"even":"odd",a=0===e?"first":"rest";let r=this.pageArea.children.find((e=>e.oddOrEven===t&&e.pagePosition===a));if(r)return r;r=this.pageArea.children.find((e=>"any"===e.oddOrEven&&e.pagePosition===a));if(r)return r;r=this.pageArea.children.find((e=>"any"===e.oddOrEven&&"any"===e.pagePosition));return r||this.pageArea.children[0]}}class Para extends XFAObject{constructor(e){super(Go,"para",!0);this.hAlign=getStringOption(e.hAlign,["left","center","justify","justifyAll","radix","right"]);this.id=e.id||"";this.lineHeight=e.lineHeight?getMeasurement(e.lineHeight,"0pt"):"";this.marginLeft=e.marginLeft?getMeasurement(e.marginLeft,"0pt"):"";this.marginRight=e.marginRight?getMeasurement(e.marginRight,"0pt"):"";this.orphans=getInteger({data:e.orphans,defaultValue:0,validate:e=>e>=0});this.preserve=e.preserve||"";this.radixOffset=e.radixOffset?getMeasurement(e.radixOffset,"0pt"):"";this.spaceAbove=e.spaceAbove?getMeasurement(e.spaceAbove,"0pt"):"";this.spaceBelow=e.spaceBelow?getMeasurement(e.spaceBelow,"0pt"):"";this.tabDefault=e.tabDefault?getMeasurement(this.tabDefault):"";this.tabStops=(e.tabStops||"").trim().split(/\\s+/).map(((e,t)=>t%2==1?getMeasurement(e):e));this.textIndent=e.textIndent?getMeasurement(e.textIndent,"0pt"):"";this.use=e.use||"";this.usehref=e.usehref||"";this.vAlign=getStringOption(e.vAlign,["top","bottom","middle"]);this.widows=getInteger({data:e.widows,defaultValue:0,validate:e=>e>=0});this.hyphenation=null}[ho](){const e=toStyle(this,"hAlign");""!==this.marginLeft&&(e.paddingLeft=measureToString(this.marginLeft));""!==this.marginRight&&(e.paddingRight=measureToString(this.marginRight));""!==this.spaceAbove&&(e.paddingTop=measureToString(this.spaceAbove));""!==this.spaceBelow&&(e.paddingBottom=measureToString(this.spaceBelow));if(""!==this.textIndent){e.textIndent=measureToString(this.textIndent);fixTextIndent(e)}this.lineHeight>0&&(e.lineHeight=measureToString(this.lineHeight));""!==this.tabDefault&&(e.tabSize=measureToString(this.tabDefault));this.tabStops.length;this.hyphenatation&&Object.assign(e,this.hyphenatation[ho]());return e}}class PasswordEdit extends XFAObject{constructor(e){super(Go,"passwordEdit",!0);this.hScrollPolicy=getStringOption(e.hScrollPolicy,["auto","off","on"]);this.id=e.id||"";this.passwordChar=e.passwordChar||"*";this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.extras=null;this.margin=null}}class template_Pattern extends XFAObject{constructor(e){super(Go,"pattern",!0);this.id=e.id||"";this.type=getStringOption(e.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]);this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null}[ho](e){e=e?e[ho]():"#FFFFFF";const t=this.color?this.color[ho]():"#000000",a="repeating-linear-gradient",r=`${e},${e} 5px,${t} 5px,${t} 10px`;switch(this.type){case"crossHatch":return`${a}(to top,${r}) ${a}(to right,${r})`;case"crossDiagonal":return`${a}(45deg,${r}) ${a}(-45deg,${r})`;case"diagonalLeft":return`${a}(45deg,${r})`;case"diagonalRight":return`${a}(-45deg,${r})`;case"horizontal":return`${a}(to top,${r})`;case"vertical":return`${a}(to right,${r})`}return""}}class Picture extends StringObject{constructor(e){super(Go,"picture");this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Proto extends XFAObject{constructor(e){super(Go,"proto",!0);this.appearanceFilter=new XFAObjectArray;this.arc=new XFAObjectArray;this.area=new XFAObjectArray;this.assist=new XFAObjectArray;this.barcode=new XFAObjectArray;this.bindItems=new XFAObjectArray;this.bookend=new XFAObjectArray;this.boolean=new XFAObjectArray;this.border=new XFAObjectArray;this.break=new XFAObjectArray;this.breakAfter=new XFAObjectArray;this.breakBefore=new XFAObjectArray;this.button=new XFAObjectArray;this.calculate=new XFAObjectArray;this.caption=new XFAObjectArray;this.certificate=new XFAObjectArray;this.certificates=new XFAObjectArray;this.checkButton=new XFAObjectArray;this.choiceList=new XFAObjectArray;this.color=new XFAObjectArray;this.comb=new XFAObjectArray;this.connect=new XFAObjectArray;this.contentArea=new XFAObjectArray;this.corner=new XFAObjectArray;this.date=new XFAObjectArray;this.dateTime=new XFAObjectArray;this.dateTimeEdit=new XFAObjectArray;this.decimal=new XFAObjectArray;this.defaultUi=new XFAObjectArray;this.desc=new XFAObjectArray;this.digestMethod=new XFAObjectArray;this.digestMethods=new XFAObjectArray;this.draw=new XFAObjectArray;this.edge=new XFAObjectArray;this.encoding=new XFAObjectArray;this.encodings=new XFAObjectArray;this.encrypt=new XFAObjectArray;this.encryptData=new XFAObjectArray;this.encryption=new XFAObjectArray;this.encryptionMethod=new XFAObjectArray;this.encryptionMethods=new XFAObjectArray;this.event=new XFAObjectArray;this.exData=new XFAObjectArray;this.exObject=new XFAObjectArray;this.exclGroup=new XFAObjectArray;this.execute=new XFAObjectArray;this.extras=new XFAObjectArray;this.field=new XFAObjectArray;this.fill=new XFAObjectArray;this.filter=new XFAObjectArray;this.float=new XFAObjectArray;this.font=new XFAObjectArray;this.format=new XFAObjectArray;this.handler=new XFAObjectArray;this.hyphenation=new XFAObjectArray;this.image=new XFAObjectArray;this.imageEdit=new XFAObjectArray;this.integer=new XFAObjectArray;this.issuers=new XFAObjectArray;this.items=new XFAObjectArray;this.keep=new XFAObjectArray;this.keyUsage=new XFAObjectArray;this.line=new XFAObjectArray;this.linear=new XFAObjectArray;this.lockDocument=new XFAObjectArray;this.manifest=new XFAObjectArray;this.margin=new XFAObjectArray;this.mdp=new XFAObjectArray;this.medium=new XFAObjectArray;this.message=new XFAObjectArray;this.numericEdit=new XFAObjectArray;this.occur=new XFAObjectArray;this.oid=new XFAObjectArray;this.oids=new XFAObjectArray;this.overflow=new XFAObjectArray;this.pageArea=new XFAObjectArray;this.pageSet=new XFAObjectArray;this.para=new XFAObjectArray;this.passwordEdit=new XFAObjectArray;this.pattern=new XFAObjectArray;this.picture=new XFAObjectArray;this.radial=new XFAObjectArray;this.reason=new XFAObjectArray;this.reasons=new XFAObjectArray;this.rectangle=new XFAObjectArray;this.ref=new XFAObjectArray;this.script=new XFAObjectArray;this.setProperty=new XFAObjectArray;this.signData=new XFAObjectArray;this.signature=new XFAObjectArray;this.signing=new XFAObjectArray;this.solid=new XFAObjectArray;this.speak=new XFAObjectArray;this.stipple=new XFAObjectArray;this.subform=new XFAObjectArray;this.subformSet=new XFAObjectArray;this.subjectDN=new XFAObjectArray;this.subjectDNs=new XFAObjectArray;this.submit=new XFAObjectArray;this.text=new XFAObjectArray;this.textEdit=new XFAObjectArray;this.time=new XFAObjectArray;this.timeStamp=new XFAObjectArray;this.toolTip=new XFAObjectArray;this.traversal=new XFAObjectArray;this.traverse=new XFAObjectArray;this.ui=new XFAObjectArray;this.validate=new XFAObjectArray;this.value=new XFAObjectArray;this.variables=new XFAObjectArray}}class Radial extends XFAObject{constructor(e){super(Go,"radial",!0);this.id=e.id||"";this.type=getStringOption(e.type,["toEdge","toCenter"]);this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null}[ho](e){e=e?e[ho]():"#FFFFFF";const t=this.color?this.color[ho]():"#000000";return`radial-gradient(circle at center, ${"toEdge"===this.type?`${e},${t}`:`${t},${e}`})`}}class Reason extends StringObject{constructor(e){super(Go,"reason");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Reasons extends XFAObject{constructor(e){super(Go,"reasons",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.reason=new XFAObjectArray}}class Rectangle extends XFAObject{constructor(e){super(Go,"rectangle",!0);this.hand=getStringOption(e.hand,["even","left","right"]);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.corner=new XFAObjectArray(4);this.edge=new XFAObjectArray(4);this.fill=null}[co](){const e=this.edge.children.length?this.edge.children[0]:new Edge({}),t=e[ho](),a=Object.create(null);"visible"===this.fill?.presence?Object.assign(a,this.fill[ho]()):a.fill="transparent";a.strokeWidth=measureToString("visible"===e.presence?e.thickness:0);a.stroke=t.color;const r=(this.corner.children.length?this.corner.children[0]:new Corner({}))[ho](),i={name:"svg",children:[{name:"rect",attributes:{xmlns:Vo,width:"100%",height:"100%",x:0,y:0,rx:r.radius,ry:r.radius,style:a}}],attributes:{xmlns:Vo,style:{overflow:"visible"},width:"100%",height:"100%"}};if(hasMargin(this[vs]()[vs]()))return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[i]});i.attributes.style.position="absolute";return HTMLResult.success(i)}}class RefElement extends StringObject{constructor(e){super(Go,"ref");this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Script extends StringObject{constructor(e){super(Go,"script");this.binding=e.binding||"";this.contentType=e.contentType||"";this.id=e.id||"";this.name=e.name||"";this.runAt=getStringOption(e.runAt,["client","both","server"]);this.use=e.use||"";this.usehref=e.usehref||""}}class SetProperty extends XFAObject{constructor(e){super(Go,"setProperty");this.connection=e.connection||"";this.ref=e.ref||"";this.target=e.target||""}}class SignData extends XFAObject{constructor(e){super(Go,"signData",!0);this.id=e.id||"";this.operation=getStringOption(e.operation,["sign","clear","verify"]);this.ref=e.ref||"";this.target=e.target||"";this.use=e.use||"";this.usehref=e.usehref||"";this.filter=null;this.manifest=null}}class Signature extends XFAObject{constructor(e){super(Go,"signature",!0);this.id=e.id||"";this.type=getStringOption(e.type,["PDF1.3","PDF1.6"]);this.use=e.use||"";this.usehref=e.usehref||"";this.border=null;this.extras=null;this.filter=null;this.manifest=null;this.margin=null}}class Signing extends XFAObject{constructor(e){super(Go,"signing",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.certificate=new XFAObjectArray}}class Solid extends XFAObject{constructor(e){super(Go,"solid",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null}[ho](e){return e?e[ho]():"#FFFFFF"}}class Speak extends StringObject{constructor(e){super(Go,"speak");this.disable=getInteger({data:e.disable,defaultValue:0,validate:e=>1===e});this.id=e.id||"";this.priority=getStringOption(e.priority,["custom","caption","name","toolTip"]);this.rid=e.rid||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Stipple extends XFAObject{constructor(e){super(Go,"stipple",!0);this.id=e.id||"";this.rate=getInteger({data:e.rate,defaultValue:50,validate:e=>e>=0&&e<=100});this.use=e.use||"";this.usehref=e.usehref||"";this.color=null;this.extras=null}[ho](e){const t=this.rate/100;return Util.makeHexColor(Math.round(e.value.r*(1-t)+this.value.r*t),Math.round(e.value.g*(1-t)+this.value.g*t),Math.round(e.value.b*(1-t)+this.value.b*t))}}class Subform extends XFAObject{constructor(e){super(Go,"subform",!0);this.access=getStringOption(e.access,["open","nonInteractive","protected","readOnly"]);this.allowMacro=getInteger({data:e.allowMacro,defaultValue:0,validate:e=>1===e});this.anchorType=getStringOption(e.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);this.colSpan=getInteger({data:e.colSpan,defaultValue:1,validate:e=>e>=1||-1===e});this.columnWidths=(e.columnWidths||"").trim().split(/\\s+/).map((e=>"-1"===e?-1:getMeasurement(e)));this.h=e.h?getMeasurement(e.h):"";this.hAlign=getStringOption(e.hAlign,["left","center","justify","justifyAll","radix","right"]);this.id=e.id||"";this.layout=getStringOption(e.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]);this.locale=e.locale||"";this.maxH=getMeasurement(e.maxH,"0pt");this.maxW=getMeasurement(e.maxW,"0pt");this.mergeMode=getStringOption(e.mergeMode,["consumeData","matchTemplate"]);this.minH=getMeasurement(e.minH,"0pt");this.minW=getMeasurement(e.minW,"0pt");this.name=e.name||"";this.presence=getStringOption(e.presence,["visible","hidden","inactive","invisible"]);this.relevant=getRelevant(e.relevant);this.restoreState=getStringOption(e.restoreState,["manual","auto"]);this.scope=getStringOption(e.scope,["name","none"]);this.use=e.use||"";this.usehref=e.usehref||"";this.w=e.w?getMeasurement(e.w):"";this.x=getMeasurement(e.x,"0pt");this.y=getMeasurement(e.y,"0pt");this.assist=null;this.bind=null;this.bookend=null;this.border=null;this.break=null;this.calculate=null;this.desc=null;this.extras=null;this.keep=null;this.margin=null;this.occur=null;this.overflow=null;this.pageSet=null;this.para=null;this.traversal=null;this.validate=null;this.variables=null;this.area=new XFAObjectArray;this.breakAfter=new XFAObjectArray;this.breakBefore=new XFAObjectArray;this.connect=new XFAObjectArray;this.draw=new XFAObjectArray;this.event=new XFAObjectArray;this.exObject=new XFAObjectArray;this.exclGroup=new XFAObjectArray;this.field=new XFAObjectArray;this.proto=new XFAObjectArray;this.setProperty=new XFAObjectArray;this.subform=new XFAObjectArray;this.subformSet=new XFAObjectArray}[Cs](){const e=this[vs]();return e instanceof SubformSet?e[Cs]():e}[Rs](){return!0}[_s](){return this.layout.endsWith("-tb")&&0===this[ls].attempt&&this[ls].numberInLine>0||this[vs]()[_s]()}*[As](){yield*getContainedChildren(this)}[us](){return flushHTML(this)}[Zn](e,t){addHTML(this,e,t)}[gs](){return getAvailableSpace(this)}[js](){const e=this[Cs]();if(!e[js]())return!1;if(void 0!==this[ls]._isSplittable)return this[ls]._isSplittable;if("position"===this.layout||this.layout.includes("row")){this[ls]._isSplittable=!1;return!1}if(this.keep&&"none"!==this.keep.intact){this[ls]._isSplittable=!1;return!1}if(e.layout?.endsWith("-tb")&&0!==e[ls].numberInLine)return!1;this[ls]._isSplittable=!0;return!0}[co](e){setTabIndex(this);if(this.break){if("auto"!==this.break.after||""!==this.break.afterTarget){const e=new BreakAfter({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});e[Is]=this[Is];this[Qn](e);this.breakAfter.push(e)}if("auto"!==this.break.before||""!==this.break.beforeTarget){const e=new BreakBefore({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});e[Is]=this[Is];this[Qn](e);this.breakBefore.push(e)}if(""!==this.break.overflowTarget){const e=new Overflow({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});e[Is]=this[Is];this[Qn](e);this.overflow.push(e)}this[Zs](this.break);this.break=null}if("hidden"===this.presence||"inactive"===this.presence)return HTMLResult.EMPTY;(this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&warn("XFA - Several breakBefore or breakAfter in subforms: please file a bug.");if(this.breakBefore.children.length>=1){const e=this.breakBefore.children[0];if(handleBreak(e))return HTMLResult.breakNode(e)}if(this[ls]?.afterBreakAfter)return HTMLResult.EMPTY;fixDimensions(this);const t=[],a={id:this[uo],class:[]};setAccess(this,a.class);this[ls]||=Object.create(null);Object.assign(this[ls],{children:t,line:null,attributes:a,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,e.width),height:Math.min(this.h||1/0,e.height)},width:0,height:0,prevHeight:0,currentWidth:0});const r=this[Fs](),i=r[ls].noLayoutFailure,n=this[js]();n||setFirstUnsplittable(this);if(!checkDimensions(this,e))return HTMLResult.FAILURE;const s=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const e=this[Cs]().columnWidths;if(Array.isArray(e)&&e.length>0){this[ls].columnWidths=e;this[ls].currentColumn=0}}const o=toStyle(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),c=["xfaSubform"],l=layoutClass(this);l&&c.push(l);a.style=o;a.class=c;this.name&&(a.xfaName=this.name);if(this.overflow){const t=this.overflow[ws]();if(t.addLeader){t.addLeader=!1;handleOverflow(this,t.leader,e)}}this[Ys]();const h="lr-tb"===this.layout||"rl-tb"===this.layout,u=h?2:1;for(;this[ls].attempt<u;this[ls].attempt++){h&&1===this[ls].attempt&&(this[ls].numberInLine=0);const e=this[es]({filter:s,include:!0});if(e.success)break;if(e.isBreak()){this[Js]();return e}if(h&&0===this[ls].attempt&&0===this[ls].numberInLine&&!r[ls].noLayoutFailure){this[ls].attempt=u;break}}this[Js]();n||unsetFirstUnsplittable(this);r[ls].noLayoutFailure=i;if(this[ls].attempt===u){this.overflow&&(this[Fs]()[ls].overflowNode=this.overflow);n||delete this[ls];return HTMLResult.FAILURE}if(this.overflow){const t=this.overflow[ws]();if(t.addTrailer){t.addTrailer=!1;handleOverflow(this,t.trailer,e)}}let d=0,f=0;if(this.margin){d=this.margin.leftInset+this.margin.rightInset;f=this.margin.topInset+this.margin.bottomInset}const g=Math.max(this[ls].width+d,this.w||0),p=Math.max(this[ls].height+f,this.h||0),m=[this.x,this.y,g,p];""===this.w&&(o.width=measureToString(g));""===this.h&&(o.height=measureToString(p));if(("0px"===o.width||"0px"===o.height)&&0===t.length)return HTMLResult.EMPTY;const b={name:"div",attributes:a,children:t};applyAssist(this,a);const y=HTMLResult.success(createWrapper(this,b),m);if(this.breakAfter.children.length>=1){const e=this.breakAfter.children[0];if(handleBreak(e)){this[ls].afterBreakAfter=y;return HTMLResult.breakNode(e)}}delete this[ls];return y}}class SubformSet extends XFAObject{constructor(e){super(Go,"subformSet",!0);this.id=e.id||"";this.name=e.name||"";this.relation=getStringOption(e.relation,["ordered","choice","unordered"]);this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.bookend=null;this.break=null;this.desc=null;this.extras=null;this.occur=null;this.overflow=null;this.breakAfter=new XFAObjectArray;this.breakBefore=new XFAObjectArray;this.subform=new XFAObjectArray;this.subformSet=new XFAObjectArray}*[As](){yield*getContainedChildren(this)}[Cs](){let e=this[vs]();for(;!(e instanceof Subform);)e=e[vs]();return e}[Rs](){return!0}}class SubjectDN extends ContentObject{constructor(e){super(Go,"subjectDN");this.delimiter=e.delimiter||",";this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){this[ss]=new Map(this[ss].split(this.delimiter).map((e=>{(e=e.split("=",2))[0]=e[0].trim();return e})))}}class SubjectDNs extends XFAObject{constructor(e){super(Go,"subjectDNs",!0);this.id=e.id||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||"";this.subjectDN=new XFAObjectArray}}class Submit extends XFAObject{constructor(e){super(Go,"submit",!0);this.embedPDF=getInteger({data:e.embedPDF,defaultValue:0,validate:e=>1===e});this.format=getStringOption(e.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]);this.id=e.id||"";this.target=e.target||"";this.textEncoding=getKeyword({data:e.textEncoding?e.textEncoding.toLowerCase():"",defaultValue:"",validate:e=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(e)||e.match(/iso-8859-\\d{2}/)});this.use=e.use||"";this.usehref=e.usehref||"";this.xdpContent=e.xdpContent||"";this.encrypt=null;this.encryptData=new XFAObjectArray;this.signData=new XFAObjectArray}}class Template extends XFAObject{constructor(e){super(Go,"template",!0);this.baseProfile=getStringOption(e.baseProfile,["full","interactiveForms"]);this.extras=null;this.subform=new XFAObjectArray}[hs](){0===this.subform.children.length&&warn("XFA - No subforms in template node.");this.subform.children.length>=2&&warn("XFA - Several subforms in template node: please file a bug.");this[no]=5e3}[js](){return!0}[to](e,t){return e.startsWith("#")?[this[Os].get(e.slice(1))]:searchNode(this,t,e,!0,!0)}*[oo](){if(!this.subform.children.length)return HTMLResult.success({name:"div",children:[]});this[ls]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const e=this.subform.children[0];e.pageSet[as]();const t=e.pageSet.pageArea.children,a={name:"div",children:[]};let r=null,i=null,n=null;if(e.breakBefore.children.length>=1){i=e.breakBefore.children[0];n=i.target}else if(e.subform.children.length>=1&&e.subform.children[0].breakBefore.children.length>=1){i=e.subform.children[0].breakBefore.children[0];n=i.target}else if(e.break?.beforeTarget){i=e.break;n=i.beforeTarget}else if(e.subform.children.length>=1&&e.subform.children[0].break?.beforeTarget){i=e.subform.children[0].break;n=i.beforeTarget}if(i){const e=this[to](n,i[vs]());if(e instanceof PageArea){r=e;i[ls]={}}}r||=t[0];r[ls]={numberOfUse:1};const s=r[vs]();s[ls]={numberOfUse:1,pageIndex:s.pageArea.children.indexOf(r),pageSetIndex:0};let o,c=null,l=null,h=!0,u=0,d=0;for(;;){if(h)u=0;else{a.children.pop();if(3==++u){warn("XFA - Something goes wrong: please file a bug.");return a}}o=null;this[ls].currentPageArea=r;const t=r[co]().html;a.children.push(t);if(c){this[ls].noLayoutFailure=!0;t.children.push(c[co](r[ls].space).html);c=null}if(l){this[ls].noLayoutFailure=!0;t.children.push(l[co](r[ls].space).html);l=null}const i=r.contentArea.children,n=t.children.filter((e=>e.attributes.class.includes("xfaContentarea")));h=!1;this[ls].firstUnsplittable=null;this[ls].noLayoutFailure=!1;const flush=t=>{const a=e[us]();if(a){h||=a.children?.length>0;n[t].children.push(a)}};for(let t=d,r=i.length;t<r;t++){const r=this[ls].currentContentArea=i[t],s={width:r.w,height:r.h};d=0;if(c){n[t].children.push(c[co](s).html);c=null}if(l){n[t].children.push(l[co](s).html);l=null}const u=e[co](s);if(u.success){if(u.html){h||=u.html.children?.length>0;n[t].children.push(u.html)}else!h&&a.children.length>1&&a.children.pop();return a}if(u.isBreak()){const e=u.breakNode;flush(t);if("auto"===e.targetType)continue;if(e.leader){c=this[to](e.leader,e[vs]());c=c?c[0]:null}if(e.trailer){l=this[to](e.trailer,e[vs]());l=l?l[0]:null}if("pageArea"===e.targetType){o=e[ls].target;t=1/0}else if(e[ls].target){o=e[ls].target;d=e[ls].index+1;t=1/0}else t=e[ls].index}else if(this[ls].overflowNode){const e=this[ls].overflowNode;this[ls].overflowNode=null;const a=e[ws](),r=a.target;a.addLeader=null!==a.leader;a.addTrailer=null!==a.trailer;flush(t);const n=t;t=1/0;if(r instanceof PageArea)o=r;else if(r instanceof ContentArea){const e=i.indexOf(r);if(-1!==e)e>n?t=e-1:d=e;else{o=r[vs]();d=o.contentArea.children.indexOf(r)}}}else flush(t)}this[ls].pageNumber+=1;o&&(o[Xs]()?o[ls].numberOfUse+=1:o=null);r=o||r[ks]();yield null}}}class Text extends ContentObject{constructor(e){super(Go,"text");this.id=e.id||"";this.maxChars=getInteger({data:e.maxChars,defaultValue:0,validate:e=>e>=0});this.name=e.name||"";this.rid=e.rid||"";this.use=e.use||"";this.usehref=e.usehref||""}[Yn](){return!0}[$s](e){if(e[Hs]===go.xhtml.id){this[ss]=e;return!0}warn(`XFA - Invalid content in Text: ${e[Ws]}.`);return!1}[Vs](e){this[ss]instanceof XFAObject||super[Vs](e)}[hs](){"string"==typeof this[ss]&&(this[ss]=this[ss].replaceAll("\\r\\n","\\n"))}[ws](){return"string"==typeof this[ss]?this[ss].split(/[\\u2029\\u2028\\n]/).filter((e=>!!e)).join("\\n"):this[ss][so]()}[co](e){if("string"==typeof this[ss]){const e=valueToHtml(this[ss]).html;if(this[ss].includes("\\u2029")){e.name="div";e.children=[];this[ss].split("\\u2029").map((e=>e.split(/[\\u2028\\n]/).flatMap((e=>[{name:"span",value:e},{name:"br"}])))).forEach((t=>{e.children.push({name:"p",children:t})}))}else if(/[\\u2028\\n]/.test(this[ss])){e.name="div";e.children=[];this[ss].split(/[\\u2028\\n]/).forEach((t=>{e.children.push({name:"span",value:t},{name:"br"})}))}return HTMLResult.success(e)}return this[ss][co](e)}}class TextEdit extends XFAObject{constructor(e){super(Go,"textEdit",!0);this.allowRichText=getInteger({data:e.allowRichText,defaultValue:0,validate:e=>1===e});this.hScrollPolicy=getStringOption(e.hScrollPolicy,["auto","off","on"]);this.id=e.id||"";this.multiLine=getInteger({data:e.multiLine,defaultValue:"",validate:e=>0===e||1===e});this.use=e.use||"";this.usehref=e.usehref||"";this.vScrollPolicy=getStringOption(e.vScrollPolicy,["auto","off","on"]);this.border=null;this.comb=null;this.extras=null;this.margin=null}[co](e){const t=toStyle(this,"border","font","margin");let a;const r=this[vs]()[vs]();""===this.multiLine&&(this.multiLine=r instanceof Draw?1:0);a=1===this.multiLine?{name:"textarea",attributes:{dataId:r[os]?.[uo]||r[uo],fieldId:r[uo],class:["xfaTextfield"],style:t,"aria-label":ariaLabel(r),"aria-required":!1}}:{name:"input",attributes:{type:"text",dataId:r[os]?.[uo]||r[uo],fieldId:r[uo],class:["xfaTextfield"],style:t,"aria-label":ariaLabel(r),"aria-required":!1}};if(isRequired(r)){a.attributes["aria-required"]=!0;a.attributes.required=!0}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[a]})}}class Time extends StringObject{constructor(e){super(Go,"time");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}[hs](){const e=this[ss].trim();this[ss]=e?new Date(e):null}[co](e){return valueToHtml(this[ss]?this[ss].toString():"")}}class TimeStamp extends XFAObject{constructor(e){super(Go,"timeStamp");this.id=e.id||"";this.server=e.server||"";this.type=getStringOption(e.type,["optional","required"]);this.use=e.use||"";this.usehref=e.usehref||""}}class ToolTip extends StringObject{constructor(e){super(Go,"toolTip");this.id=e.id||"";this.rid=e.rid||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Traversal extends XFAObject{constructor(e){super(Go,"traversal",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.traverse=new XFAObjectArray}}class Traverse extends XFAObject{constructor(e){super(Go,"traverse",!0);this.id=e.id||"";this.operation=getStringOption(e.operation,["next","back","down","first","left","right","up"]);this.ref=e.ref||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.script=null}get name(){return this.operation}[Us](){return!1}}class Ui extends XFAObject{constructor(e){super(Go,"ui",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.picture=null;this.barcode=null;this.button=null;this.checkButton=null;this.choiceList=null;this.dateTimeEdit=null;this.defaultUi=null;this.imageEdit=null;this.numericEdit=null;this.passwordEdit=null;this.signature=null;this.textEdit=null}[ws](){if(void 0===this[ls]){for(const e of Object.getOwnPropertyNames(this)){if("extras"===e||"picture"===e)continue;const t=this[e];if(t instanceof XFAObject){this[ls]=t;return t}}this[ls]=null}return this[ls]}[co](e){const t=this[ws]();return t?t[co](e):HTMLResult.EMPTY}}class Validate extends XFAObject{constructor(e){super(Go,"validate",!0);this.formatTest=getStringOption(e.formatTest,["warning","disabled","error"]);this.id=e.id||"";this.nullTest=getStringOption(e.nullTest,["disabled","error","warning"]);this.scriptTest=getStringOption(e.scriptTest,["error","disabled","warning"]);this.use=e.use||"";this.usehref=e.usehref||"";this.extras=null;this.message=null;this.picture=null;this.script=null}}class Value extends XFAObject{constructor(e){super(Go,"value",!0);this.id=e.id||"";this.override=getInteger({data:e.override,defaultValue:0,validate:e=>1===e});this.relevant=getRelevant(e.relevant);this.use=e.use||"";this.usehref=e.usehref||"";this.arc=null;this.boolean=null;this.date=null;this.dateTime=null;this.decimal=null;this.exData=null;this.float=null;this.image=null;this.integer=null;this.line=null;this.rectangle=null;this.text=null;this.time=null}[io](e){const t=this[vs]();if(t instanceof Field&&t.ui?.imageEdit){if(!this.image){this.image=new Image({});this[Qn](this.image)}this.image[ss]=e[ss];return}const a=e[Ws];if(null===this[a]){for(const e of Object.getOwnPropertyNames(this)){const t=this[e];if(t instanceof XFAObject){this[e]=null;this[Zs](t)}}this[e[Ws]]=e;this[Qn](e)}else this[a][ss]=e[ss]}[so](){if(this.exData)return"string"==typeof this.exData[ss]?this.exData[ss].trim():this.exData[ss][so]().trim();for(const e of Object.getOwnPropertyNames(this)){if("image"===e)continue;const t=this[e];if(t instanceof XFAObject)return(t[ss]||"").toString().trim()}return null}[co](e){for(const t of Object.getOwnPropertyNames(this)){const a=this[t];if(a instanceof XFAObject)return a[co](e)}return HTMLResult.EMPTY}}class Variables extends XFAObject{constructor(e){super(Go,"variables",!0);this.id=e.id||"";this.use=e.use||"";this.usehref=e.usehref||"";this.boolean=new XFAObjectArray;this.date=new XFAObjectArray;this.dateTime=new XFAObjectArray;this.decimal=new XFAObjectArray;this.exData=new XFAObjectArray;this.float=new XFAObjectArray;this.image=new XFAObjectArray;this.integer=new XFAObjectArray;this.manifest=new XFAObjectArray;this.script=new XFAObjectArray;this.text=new XFAObjectArray;this.time=new XFAObjectArray}[Us](){return!0}}class TemplateNamespace{static[fo](e,t){if(TemplateNamespace.hasOwnProperty(e)){const a=TemplateNamespace[e](t);a[ro](t);return a}}static appearanceFilter(e){return new AppearanceFilter(e)}static arc(e){return new Arc(e)}static area(e){return new Area(e)}static assist(e){return new Assist(e)}static barcode(e){return new Barcode(e)}static bind(e){return new Bind(e)}static bindItems(e){return new BindItems(e)}static bookend(e){return new Bookend(e)}static boolean(e){return new BooleanElement(e)}static border(e){return new Border(e)}static break(e){return new Break(e)}static breakAfter(e){return new BreakAfter(e)}static breakBefore(e){return new BreakBefore(e)}static button(e){return new Button(e)}static calculate(e){return new Calculate(e)}static caption(e){return new Caption(e)}static certificate(e){return new Certificate(e)}static certificates(e){return new Certificates(e)}static checkButton(e){return new CheckButton(e)}static choiceList(e){return new ChoiceList(e)}static color(e){return new Color(e)}static comb(e){return new Comb(e)}static connect(e){return new Connect(e)}static contentArea(e){return new ContentArea(e)}static corner(e){return new Corner(e)}static date(e){return new DateElement(e)}static dateTime(e){return new DateTime(e)}static dateTimeEdit(e){return new DateTimeEdit(e)}static decimal(e){return new Decimal(e)}static defaultUi(e){return new DefaultUi(e)}static desc(e){return new Desc(e)}static digestMethod(e){return new DigestMethod(e)}static digestMethods(e){return new DigestMethods(e)}static draw(e){return new Draw(e)}static edge(e){return new Edge(e)}static encoding(e){return new Encoding(e)}static encodings(e){return new Encodings(e)}static encrypt(e){return new Encrypt(e)}static encryptData(e){return new EncryptData(e)}static encryption(e){return new Encryption(e)}static encryptionMethod(e){return new EncryptionMethod(e)}static encryptionMethods(e){return new EncryptionMethods(e)}static event(e){return new Event(e)}static exData(e){return new ExData(e)}static exObject(e){return new ExObject(e)}static exclGroup(e){return new ExclGroup(e)}static execute(e){return new Execute(e)}static extras(e){return new Extras(e)}static field(e){return new Field(e)}static fill(e){return new Fill(e)}static filter(e){return new Filter(e)}static float(e){return new Float(e)}static font(e){return new template_Font(e)}static format(e){return new Format(e)}static handler(e){return new Handler(e)}static hyphenation(e){return new Hyphenation(e)}static image(e){return new Image(e)}static imageEdit(e){return new ImageEdit(e)}static integer(e){return new Integer(e)}static issuers(e){return new Issuers(e)}static items(e){return new Items(e)}static keep(e){return new Keep(e)}static keyUsage(e){return new KeyUsage(e)}static line(e){return new Line(e)}static linear(e){return new Linear(e)}static lockDocument(e){return new LockDocument(e)}static manifest(e){return new Manifest(e)}static margin(e){return new Margin(e)}static mdp(e){return new Mdp(e)}static medium(e){return new Medium(e)}static message(e){return new Message(e)}static numericEdit(e){return new NumericEdit(e)}static occur(e){return new Occur(e)}static oid(e){return new Oid(e)}static oids(e){return new Oids(e)}static overflow(e){return new Overflow(e)}static pageArea(e){return new PageArea(e)}static pageSet(e){return new PageSet(e)}static para(e){return new Para(e)}static passwordEdit(e){return new PasswordEdit(e)}static pattern(e){return new template_Pattern(e)}static picture(e){return new Picture(e)}static proto(e){return new Proto(e)}static radial(e){return new Radial(e)}static reason(e){return new Reason(e)}static reasons(e){return new Reasons(e)}static rectangle(e){return new Rectangle(e)}static ref(e){return new RefElement(e)}static script(e){return new Script(e)}static setProperty(e){return new SetProperty(e)}static signData(e){return new SignData(e)}static signature(e){return new Signature(e)}static signing(e){return new Signing(e)}static solid(e){return new Solid(e)}static speak(e){return new Speak(e)}static stipple(e){return new Stipple(e)}static subform(e){return new Subform(e)}static subformSet(e){return new SubformSet(e)}static subjectDN(e){return new SubjectDN(e)}static subjectDNs(e){return new SubjectDNs(e)}static submit(e){return new Submit(e)}static template(e){return new Template(e)}static text(e){return new Text(e)}static textEdit(e){return new TextEdit(e)}static time(e){return new Time(e)}static timeStamp(e){return new TimeStamp(e)}static toolTip(e){return new ToolTip(e)}static traversal(e){return new Traversal(e)}static traverse(e){return new Traverse(e)}static ui(e){return new Ui(e)}static validate(e){return new Validate(e)}static value(e){return new Value(e)}static variables(e){return new Variables(e)}}const Zo=go.datasets.id;function createText(e){const t=new Text({});t[ss]=e;return t}class Binder{constructor(e){this.root=e;this.datasets=e.datasets;this.data=e.datasets?.data||new XmlObject(go.datasets.id,"data");this.emptyMerge=0===this.data[Ss]().length;this.root.form=this.form=e.template[is]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){this._bindElement(this.form,this.data);return this.form}getData(){return this.data}_bindValue(e,t,a){e[os]=t;if(e[Ts]())if(t[Ns]()){const a=t[ys]();e[io](createText(a))}else if(e instanceof Field&&"multiSelect"===e.ui?.choiceList?.open){const a=t[Ss]().map((e=>e[ss].trim())).join("\\n");e[io](createText(a))}else this._isConsumeData()&&warn("XFA - Nodes haven\'t the same type.");else!t[Ns]()||this._isMatchTemplate()?this._bindElement(e,t):warn("XFA - Nodes haven\'t the same type.")}_findDataByNameToConsume(e,t,a,r){if(!e)return null;let i,n;for(let r=0;r<3;r++){i=a[xs](e,!1,!0);for(;;){n=i.next().value;if(!n)break;if(t===n[Ns]())return n}if(a[Hs]===go.datasets.id&&"data"===a[Ws])break;a=a[vs]()}if(!r)return null;i=this.data[xs](e,!0,!1);n=i.next().value;if(n)return n;i=this.data[ds](e,!0);n=i.next().value;return n?.[Ns]()?n:null}_setProperties(e,t){if(e.hasOwnProperty("setProperty"))for(const{ref:a,target:r,connection:i}of e.setProperty.children){if(i)continue;if(!a)continue;const n=searchNode(this.root,t,a,!1,!1);if(!n){warn(`XFA - Invalid reference: ${a}.`);continue}const[s]=n;if(!s[Es](this.data)){warn("XFA - Invalid node: must be a data node.");continue}const o=searchNode(this.root,e,r,!1,!1);if(!o){warn(`XFA - Invalid target: ${r}.`);continue}const[c]=o;if(!c[Es](e)){warn("XFA - Invalid target: must be a property or subproperty.");continue}const l=c[vs]();if(c instanceof SetProperty||l instanceof SetProperty){warn("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(c instanceof BindItems||l instanceof BindItems){warn("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const h=s[so](),u=c[Ws];if(c instanceof XFAAttribute){const e=Object.create(null);e[u]=h;const t=Reflect.construct(Object.getPrototypeOf(l).constructor,[e]);l[u]=t[u]}else if(c.hasOwnProperty(ss)){c[os]=s;c[ss]=h;c[hs]()}else warn("XFA - Invalid node to use in setProperty")}}_bindItems(e,t){if(!e.hasOwnProperty("items")||!e.hasOwnProperty("bindItems")||e.bindItems.isEmpty())return;for(const t of e.items.children)e[Zs](t);e.items.clear();const a=new Items({}),r=new Items({});e[Qn](a);e.items.push(a);e[Qn](r);e.items.push(r);for(const{ref:i,labelRef:n,valueRef:s,connection:o}of e.bindItems.children){if(o)continue;if(!i)continue;const e=searchNode(this.root,t,i,!1,!1);if(e)for(const t of e){if(!t[Es](this.datasets)){warn(`XFA - Invalid ref (${i}): must be a datasets child.`);continue}const e=searchNode(this.root,t,n,!0,!1);if(!e){warn(`XFA - Invalid label: ${n}.`);continue}const[o]=e;if(!o[Es](this.datasets)){warn("XFA - Invalid label: must be a datasets child.");continue}const c=searchNode(this.root,t,s,!0,!1);if(!c){warn(`XFA - Invalid value: ${s}.`);continue}const[l]=c;if(!l[Es](this.datasets)){warn("XFA - Invalid value: must be a datasets child.");continue}const h=createText(o[so]()),u=createText(l[so]());a[Qn](h);a.text.push(h);r[Qn](u);r.text.push(u)}else warn(`XFA - Invalid reference: ${i}.`)}}_bindOccurrences(e,t,a){let r;if(t.length>1){r=e[is]();r[Zs](r.occur);r.occur=null}this._bindValue(e,t[0],a);this._setProperties(e,t[0]);this._bindItems(e,t[0]);if(1===t.length)return;const i=e[vs](),n=e[Ws],s=i[Ms](e);for(let e=1,o=t.length;e<o;e++){const o=t[e],c=r[is]();i[n].push(c);i[Ds](s+e,c);this._bindValue(c,o,a);this._setProperties(c,o);this._bindItems(c,o)}}_createOccurrences(e){if(!this.emptyMerge)return;const{occur:t}=e;if(!t||t.initial<=1)return;const a=e[vs](),r=e[Ws];if(!(a[r]instanceof XFAObjectArray))return;let i;i=e.name?a[r].children.filter((t=>t.name===e.name)).length:a[r].children.length;const n=a[Ms](e)+1,s=t.initial-i;if(s){const t=e[is]();t[Zs](t.occur);t.occur=null;a[r].push(t);a[Ds](n,t);for(let e=1;e<s;e++){const i=t[is]();a[r].push(i);a[Ds](n+e,i)}}}_getOccurInfo(e){const{name:t,occur:a}=e;if(!a||!t)return[1,1];const r=-1===a.max?1/0:a.max;return[a.min,r]}_setAndBind(e,t){this._setProperties(e,t);this._bindItems(e,t);this._bindElement(e,t)}_bindElement(e,t){const a=[];this._createOccurrences(e);for(const r of e[Ss]()){if(r[os])continue;if(void 0===this._mergeMode&&"subform"===r[Ws]){this._mergeMode="consumeData"===r.mergeMode;const e=t[Ss]();if(e.length>0)this._bindOccurrences(r,[e[0]],null);else if(this.emptyMerge){const e=t[Hs]===Zo?-1:t[Hs],a=r[os]=new XmlObject(e,r.name||"root");t[Qn](a);this._bindElement(r,a)}continue}if(!r[Rs]())continue;let e=!1,i=null,n=null,s=null;if(r.bind){switch(r.bind.match){case"none":this._setAndBind(r,t);continue;case"global":e=!0;break;case"dataRef":if(!r.bind.ref){warn(`XFA - ref is empty in node ${r[Ws]}.`);this._setAndBind(r,t);continue}n=r.bind.ref}r.bind.picture&&(i=r.bind.picture[ss])}const[o,c]=this._getOccurInfo(r);if(n){s=searchNode(this.root,t,n,!0,!1);if(null===s){s=createDataNode(this.data,t,n);if(!s)continue;this._isConsumeData()&&(s[ns]=!0);this._setAndBind(r,s);continue}this._isConsumeData()&&(s=s.filter((e=>!e[ns])));s.length>c?s=s.slice(0,c):0===s.length&&(s=null);s&&this._isConsumeData()&&s.forEach((e=>{e[ns]=!0}))}else{if(!r.name){this._setAndBind(r,t);continue}if(this._isConsumeData()){const a=[];for(;a.length<c;){const i=this._findDataByNameToConsume(r.name,r[Ts](),t,e);if(!i)break;i[ns]=!0;a.push(i)}s=a.length>0?a:null}else{s=t[xs](r.name,!1,this.emptyMerge).next().value;if(!s){if(0===o){a.push(r);continue}const e=t[Hs]===Zo?-1:t[Hs];s=r[os]=new XmlObject(e,r.name);this.emptyMerge&&(s[ns]=!0);t[Qn](s);this._setAndBind(r,s);continue}this.emptyMerge&&(s[ns]=!0);s=[s]}}s?this._bindOccurrences(r,s,i):o>0?this._setAndBind(r,t):a.push(r)}a.forEach((e=>e[vs]()[Zs](e)))}}class DataHandler{constructor(e,t){this.data=t;this.dataset=e.datasets||null}serialize(e){const t=[[-1,this.data[Ss]()]];for(;t.length>0;){const a=t.at(-1),[r,i]=a;if(r+1===i.length){t.pop();continue}const n=i[++a[0]],s=e.get(n[uo]);if(s)n[io](s);else{const t=n[fs]();for(const a of t.values()){const t=e.get(a[uo]);if(t){a[io](t);break}}}const o=n[Ss]();o.length>0&&t.push([-1,o])}const a=[\'<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">\'];if(this.dataset)for(const e of this.dataset[Ss]())"data"!==e[Ws]&&e[lo](a);this.data[lo](a);a.push("</xfa:datasets>");return a.join("")}}const Qo=go.config.id;class Acrobat extends XFAObject{constructor(e){super(Qo,"acrobat",!0);this.acrobat7=null;this.autoSave=null;this.common=null;this.validate=null;this.validateApprovalSignatures=null;this.submitUrl=new XFAObjectArray}}class Acrobat7 extends XFAObject{constructor(e){super(Qo,"acrobat7",!0);this.dynamicRender=null}}class ADBE_JSConsole extends OptionObject{constructor(e){super(Qo,"ADBE_JSConsole",["delegate","Enable","Disable"])}}class ADBE_JSDebugger extends OptionObject{constructor(e){super(Qo,"ADBE_JSDebugger",["delegate","Enable","Disable"])}}class AddSilentPrint extends Option01{constructor(e){super(Qo,"addSilentPrint")}}class AddViewerPreferences extends Option01{constructor(e){super(Qo,"addViewerPreferences")}}class AdjustData extends Option10{constructor(e){super(Qo,"adjustData")}}class AdobeExtensionLevel extends IntegerObject{constructor(e){super(Qo,"adobeExtensionLevel",0,(e=>e>=1&&e<=8))}}class Agent extends XFAObject{constructor(e){super(Qo,"agent",!0);this.name=e.name?e.name.trim():"";this.common=new XFAObjectArray}}class AlwaysEmbed extends ContentObject{constructor(e){super(Qo,"alwaysEmbed")}}class Amd extends StringObject{constructor(e){super(Qo,"amd")}}class config_Area extends XFAObject{constructor(e){super(Qo,"area");this.level=getInteger({data:e.level,defaultValue:0,validate:e=>e>=1&&e<=3});this.name=getStringOption(e.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}}class Attributes extends OptionObject{constructor(e){super(Qo,"attributes",["preserve","delegate","ignore"])}}class AutoSave extends OptionObject{constructor(e){super(Qo,"autoSave",["disabled","enabled"])}}class Base extends StringObject{constructor(e){super(Qo,"base")}}class BatchOutput extends XFAObject{constructor(e){super(Qo,"batchOutput");this.format=getStringOption(e.format,["none","concat","zip","zipCompress"])}}class BehaviorOverride extends ContentObject{constructor(e){super(Qo,"behaviorOverride")}[hs](){this[ss]=new Map(this[ss].trim().split(/\\s+/).filter((e=>e.includes(":"))).map((e=>e.split(":",2))))}}class Cache extends XFAObject{constructor(e){super(Qo,"cache",!0);this.templateCache=null}}class Change extends Option01{constructor(e){super(Qo,"change")}}class Common extends XFAObject{constructor(e){super(Qo,"common",!0);this.data=null;this.locale=null;this.localeSet=null;this.messaging=null;this.suppressBanner=null;this.template=null;this.validationMessaging=null;this.versionControl=null;this.log=new XFAObjectArray}}class Compress extends XFAObject{constructor(e){super(Qo,"compress");this.scope=getStringOption(e.scope,["imageOnly","document"])}}class CompressLogicalStructure extends Option01{constructor(e){super(Qo,"compressLogicalStructure")}}class CompressObjectStream extends Option10{constructor(e){super(Qo,"compressObjectStream")}}class Compression extends XFAObject{constructor(e){super(Qo,"compression",!0);this.compressLogicalStructure=null;this.compressObjectStream=null;this.level=null;this.type=null}}class Config extends XFAObject{constructor(e){super(Qo,"config",!0);this.acrobat=null;this.present=null;this.trace=null;this.agent=new XFAObjectArray}}class Conformance extends OptionObject{constructor(e){super(Qo,"conformance",["A","B"])}}class ContentCopy extends Option01{constructor(e){super(Qo,"contentCopy")}}class Copies extends IntegerObject{constructor(e){super(Qo,"copies",1,(e=>e>=1))}}class Creator extends StringObject{constructor(e){super(Qo,"creator")}}class CurrentPage extends IntegerObject{constructor(e){super(Qo,"currentPage",0,(e=>e>=0))}}class Data extends XFAObject{constructor(e){super(Qo,"data",!0);this.adjustData=null;this.attributes=null;this.incrementalLoad=null;this.outputXSL=null;this.range=null;this.record=null;this.startNode=null;this.uri=null;this.window=null;this.xsl=null;this.excludeNS=new XFAObjectArray;this.transform=new XFAObjectArray}}class Debug extends XFAObject{constructor(e){super(Qo,"debug",!0);this.uri=null}}class DefaultTypeface extends ContentObject{constructor(e){super(Qo,"defaultTypeface");this.writingScript=getStringOption(e.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}}class Destination extends OptionObject{constructor(e){super(Qo,"destination",["pdf","pcl","ps","webClient","zpl"])}}class DocumentAssembly extends Option01{constructor(e){super(Qo,"documentAssembly")}}class Driver extends XFAObject{constructor(e){super(Qo,"driver",!0);this.name=e.name?e.name.trim():"";this.fontInfo=null;this.xdc=null}}class DuplexOption extends OptionObject{constructor(e){super(Qo,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}}class DynamicRender extends OptionObject{constructor(e){super(Qo,"dynamicRender",["forbidden","required"])}}class Embed extends Option01{constructor(e){super(Qo,"embed")}}class config_Encrypt extends Option01{constructor(e){super(Qo,"encrypt")}}class config_Encryption extends XFAObject{constructor(e){super(Qo,"encryption",!0);this.encrypt=null;this.encryptionLevel=null;this.permissions=null}}class EncryptionLevel extends OptionObject{constructor(e){super(Qo,"encryptionLevel",["40bit","128bit"])}}class Enforce extends StringObject{constructor(e){super(Qo,"enforce")}}class Equate extends XFAObject{constructor(e){super(Qo,"equate");this.force=getInteger({data:e.force,defaultValue:1,validate:e=>0===e});this.from=e.from||"";this.to=e.to||""}}class EquateRange extends XFAObject{constructor(e){super(Qo,"equateRange");this.from=e.from||"";this.to=e.to||"";this._unicodeRange=e.unicodeRange||""}get unicodeRange(){const e=[],t=/U\\+([0-9a-fA-F]+)/,a=this._unicodeRange;for(let r of a.split(",").map((e=>e.trim())).filter((e=>!!e))){r=r.split("-",2).map((e=>{const a=e.match(t);return a?parseInt(a[1],16):0}));1===r.length&&r.push(r[0]);e.push(r)}return shadow(this,"unicodeRange",e)}}class Exclude extends ContentObject{constructor(e){super(Qo,"exclude")}[hs](){this[ss]=this[ss].trim().split(/\\s+/).filter((e=>e&&["calculate","close","enter","exit","initialize","ready","validate"].includes(e)))}}class ExcludeNS extends StringObject{constructor(e){super(Qo,"excludeNS")}}class FlipLabel extends OptionObject{constructor(e){super(Qo,"flipLabel",["usePrinterSetting","on","off"])}}class config_FontInfo extends XFAObject{constructor(e){super(Qo,"fontInfo",!0);this.embed=null;this.map=null;this.subsetBelow=null;this.alwaysEmbed=new XFAObjectArray;this.defaultTypeface=new XFAObjectArray;this.neverEmbed=new XFAObjectArray}}class FormFieldFilling extends Option01{constructor(e){super(Qo,"formFieldFilling")}}class GroupParent extends StringObject{constructor(e){super(Qo,"groupParent")}}class IfEmpty extends OptionObject{constructor(e){super(Qo,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}}class IncludeXDPContent extends StringObject{constructor(e){super(Qo,"includeXDPContent")}}class IncrementalLoad extends OptionObject{constructor(e){super(Qo,"incrementalLoad",["none","forwardOnly"])}}class IncrementalMerge extends Option01{constructor(e){super(Qo,"incrementalMerge")}}class Interactive extends Option01{constructor(e){super(Qo,"interactive")}}class Jog extends OptionObject{constructor(e){super(Qo,"jog",["usePrinterSetting","none","pageSet"])}}class LabelPrinter extends XFAObject{constructor(e){super(Qo,"labelPrinter",!0);this.name=getStringOption(e.name,["zpl","dpl","ipl","tcpl"]);this.batchOutput=null;this.flipLabel=null;this.fontInfo=null;this.xdc=null}}class Layout extends OptionObject{constructor(e){super(Qo,"layout",["paginate","panel"])}}class Level extends IntegerObject{constructor(e){super(Qo,"level",0,(e=>e>0))}}class Linearized extends Option01{constructor(e){super(Qo,"linearized")}}class Locale extends StringObject{constructor(e){super(Qo,"locale")}}class LocaleSet extends StringObject{constructor(e){super(Qo,"localeSet")}}class Log extends XFAObject{constructor(e){super(Qo,"log",!0);this.mode=null;this.threshold=null;this.to=null;this.uri=null}}class MapElement extends XFAObject{constructor(e){super(Qo,"map",!0);this.equate=new XFAObjectArray;this.equateRange=new XFAObjectArray}}class MediumInfo extends XFAObject{constructor(e){super(Qo,"mediumInfo",!0);this.map=null}}class config_Message extends XFAObject{constructor(e){super(Qo,"message",!0);this.msgId=null;this.severity=null}}class Messaging extends XFAObject{constructor(e){super(Qo,"messaging",!0);this.message=new XFAObjectArray}}class Mode extends OptionObject{constructor(e){super(Qo,"mode",["append","overwrite"])}}class ModifyAnnots extends Option01{constructor(e){super(Qo,"modifyAnnots")}}class MsgId extends IntegerObject{constructor(e){super(Qo,"msgId",1,(e=>e>=1))}}class NameAttr extends StringObject{constructor(e){super(Qo,"nameAttr")}}class NeverEmbed extends ContentObject{constructor(e){super(Qo,"neverEmbed")}}class NumberOfCopies extends IntegerObject{constructor(e){super(Qo,"numberOfCopies",null,(e=>e>=2&&e<=5))}}class OpenAction extends XFAObject{constructor(e){super(Qo,"openAction",!0);this.destination=null}}class Output extends XFAObject{constructor(e){super(Qo,"output",!0);this.to=null;this.type=null;this.uri=null}}class OutputBin extends StringObject{constructor(e){super(Qo,"outputBin")}}class OutputXSL extends XFAObject{constructor(e){super(Qo,"outputXSL",!0);this.uri=null}}class Overprint extends OptionObject{constructor(e){super(Qo,"overprint",["none","both","draw","field"])}}class Packets extends StringObject{constructor(e){super(Qo,"packets")}[hs](){"*"!==this[ss]&&(this[ss]=this[ss].trim().split(/\\s+/).filter((e=>["config","datasets","template","xfdf","xslt"].includes(e))))}}class PageOffset extends XFAObject{constructor(e){super(Qo,"pageOffset");this.x=getInteger({data:e.x,defaultValue:"useXDCSetting",validate:e=>!0});this.y=getInteger({data:e.y,defaultValue:"useXDCSetting",validate:e=>!0})}}class PageRange extends StringObject{constructor(e){super(Qo,"pageRange")}[hs](){const e=this[ss].trim().split(/\\s+/).map((e=>parseInt(e,10))),t=[];for(let a=0,r=e.length;a<r;a+=2)t.push(e.slice(a,a+2));this[ss]=t}}class Pagination extends OptionObject{constructor(e){super(Qo,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}}class PaginationOverride extends OptionObject{constructor(e){super(Qo,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}}class Part extends IntegerObject{constructor(e){super(Qo,"part",1,(e=>!1))}}class Pcl extends XFAObject{constructor(e){super(Qo,"pcl",!0);this.name=e.name||"";this.batchOutput=null;this.fontInfo=null;this.jog=null;this.mediumInfo=null;this.outputBin=null;this.pageOffset=null;this.staple=null;this.xdc=null}}class Pdf extends XFAObject{constructor(e){super(Qo,"pdf",!0);this.name=e.name||"";this.adobeExtensionLevel=null;this.batchOutput=null;this.compression=null;this.creator=null;this.encryption=null;this.fontInfo=null;this.interactive=null;this.linearized=null;this.openAction=null;this.pdfa=null;this.producer=null;this.renderPolicy=null;this.scriptModel=null;this.silentPrint=null;this.submitFormat=null;this.tagged=null;this.version=null;this.viewerPreferences=null;this.xdc=null}}class Pdfa extends XFAObject{constructor(e){super(Qo,"pdfa",!0);this.amd=null;this.conformance=null;this.includeXDPContent=null;this.part=null}}class Permissions extends XFAObject{constructor(e){super(Qo,"permissions",!0);this.accessibleContent=null;this.change=null;this.contentCopy=null;this.documentAssembly=null;this.formFieldFilling=null;this.modifyAnnots=null;this.plaintextMetadata=null;this.print=null;this.printHighQuality=null}}class PickTrayByPDFSize extends Option01{constructor(e){super(Qo,"pickTrayByPDFSize")}}class config_Picture extends StringObject{constructor(e){super(Qo,"picture")}}class PlaintextMetadata extends Option01{constructor(e){super(Qo,"plaintextMetadata")}}class Presence extends OptionObject{constructor(e){super(Qo,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}}class Present extends XFAObject{constructor(e){super(Qo,"present",!0);this.behaviorOverride=null;this.cache=null;this.common=null;this.copies=null;this.destination=null;this.incrementalMerge=null;this.layout=null;this.output=null;this.overprint=null;this.pagination=null;this.paginationOverride=null;this.script=null;this.validate=null;this.xdp=null;this.driver=new XFAObjectArray;this.labelPrinter=new XFAObjectArray;this.pcl=new XFAObjectArray;this.pdf=new XFAObjectArray;this.ps=new XFAObjectArray;this.submitUrl=new XFAObjectArray;this.webClient=new XFAObjectArray;this.zpl=new XFAObjectArray}}class Print extends Option01{constructor(e){super(Qo,"print")}}class PrintHighQuality extends Option01{constructor(e){super(Qo,"printHighQuality")}}class PrintScaling extends OptionObject{constructor(e){super(Qo,"printScaling",["appdefault","noScaling"])}}class PrinterName extends StringObject{constructor(e){super(Qo,"printerName")}}class Producer extends StringObject{constructor(e){super(Qo,"producer")}}class Ps extends XFAObject{constructor(e){super(Qo,"ps",!0);this.name=e.name||"";this.batchOutput=null;this.fontInfo=null;this.jog=null;this.mediumInfo=null;this.outputBin=null;this.staple=null;this.xdc=null}}class Range extends ContentObject{constructor(e){super(Qo,"range")}[hs](){this[ss]=this[ss].split(",",2).map((e=>e.split("-").map((e=>parseInt(e.trim(),10))))).filter((e=>e.every((e=>!isNaN(e))))).map((e=>{1===e.length&&e.push(e[0]);return e}))}}class Record extends ContentObject{constructor(e){super(Qo,"record")}[hs](){this[ss]=this[ss].trim();const e=parseInt(this[ss],10);!isNaN(e)&&e>=0&&(this[ss]=e)}}class Relevant extends ContentObject{constructor(e){super(Qo,"relevant")}[hs](){this[ss]=this[ss].trim().split(/\\s+/)}}class Rename extends ContentObject{constructor(e){super(Qo,"rename")}[hs](){this[ss]=this[ss].trim();(this[ss].toLowerCase().startsWith("xml")||new RegExp("[\\\\p{L}_][\\\\p{L}\\\\d._\\\\p{M}-]*","u").test(this[ss]))&&warn("XFA - Rename: invalid XFA name")}}class RenderPolicy extends OptionObject{constructor(e){super(Qo,"renderPolicy",["server","client"])}}class RunScripts extends OptionObject{constructor(e){super(Qo,"runScripts",["both","client","none","server"])}}class config_Script extends XFAObject{constructor(e){super(Qo,"script",!0);this.currentPage=null;this.exclude=null;this.runScripts=null}}class ScriptModel extends OptionObject{constructor(e){super(Qo,"scriptModel",["XFA","none"])}}class Severity extends OptionObject{constructor(e){super(Qo,"severity",["ignore","error","information","trace","warning"])}}class SilentPrint extends XFAObject{constructor(e){super(Qo,"silentPrint",!0);this.addSilentPrint=null;this.printerName=null}}class Staple extends XFAObject{constructor(e){super(Qo,"staple");this.mode=getStringOption(e.mode,["usePrinterSetting","on","off"])}}class StartNode extends StringObject{constructor(e){super(Qo,"startNode")}}class StartPage extends IntegerObject{constructor(e){super(Qo,"startPage",0,(e=>!0))}}class SubmitFormat extends OptionObject{constructor(e){super(Qo,"submitFormat",["html","delegate","fdf","xml","pdf"])}}class SubmitUrl extends StringObject{constructor(e){super(Qo,"submitUrl")}}class SubsetBelow extends IntegerObject{constructor(e){super(Qo,"subsetBelow",100,(e=>e>=0&&e<=100))}}class SuppressBanner extends Option01{constructor(e){super(Qo,"suppressBanner")}}class Tagged extends Option01{constructor(e){super(Qo,"tagged")}}class config_Template extends XFAObject{constructor(e){super(Qo,"template",!0);this.base=null;this.relevant=null;this.startPage=null;this.uri=null;this.xsl=null}}class Threshold extends OptionObject{constructor(e){super(Qo,"threshold",["trace","error","information","warning"])}}class To extends OptionObject{constructor(e){super(Qo,"to",["null","memory","stderr","stdout","system","uri"])}}class TemplateCache extends XFAObject{constructor(e){super(Qo,"templateCache");this.maxEntries=getInteger({data:e.maxEntries,defaultValue:5,validate:e=>e>=0})}}class Trace extends XFAObject{constructor(e){super(Qo,"trace",!0);this.area=new XFAObjectArray}}class Transform extends XFAObject{constructor(e){super(Qo,"transform",!0);this.groupParent=null;this.ifEmpty=null;this.nameAttr=null;this.picture=null;this.presence=null;this.rename=null;this.whitespace=null}}class Type extends OptionObject{constructor(e){super(Qo,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}}class Uri extends StringObject{constructor(e){super(Qo,"uri")}}class config_Validate extends OptionObject{constructor(e){super(Qo,"validate",["preSubmit","prePrint","preExecute","preSave"])}}class ValidateApprovalSignatures extends ContentObject{constructor(e){super(Qo,"validateApprovalSignatures")}[hs](){this[ss]=this[ss].trim().split(/\\s+/).filter((e=>["docReady","postSign"].includes(e)))}}class ValidationMessaging extends OptionObject{constructor(e){super(Qo,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}}class Version extends OptionObject{constructor(e){super(Qo,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}}class VersionControl extends XFAObject{constructor(e){super(Qo,"VersionControl");this.outputBelow=getStringOption(e.outputBelow,["warn","error","update"]);this.sourceAbove=getStringOption(e.sourceAbove,["warn","error"]);this.sourceBelow=getStringOption(e.sourceBelow,["update","maintain"])}}class ViewerPreferences extends XFAObject{constructor(e){super(Qo,"viewerPreferences",!0);this.ADBE_JSConsole=null;this.ADBE_JSDebugger=null;this.addViewerPreferences=null;this.duplexOption=null;this.enforce=null;this.numberOfCopies=null;this.pageRange=null;this.pickTrayByPDFSize=null;this.printScaling=null}}class WebClient extends XFAObject{constructor(e){super(Qo,"webClient",!0);this.name=e.name?e.name.trim():"";this.fontInfo=null;this.xdc=null}}class Whitespace extends OptionObject{constructor(e){super(Qo,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}}class Window extends ContentObject{constructor(e){super(Qo,"window")}[hs](){const e=this[ss].split(",",2).map((e=>parseInt(e.trim(),10)));if(e.some((e=>isNaN(e))))this[ss]=[0,0];else{1===e.length&&e.push(e[0]);this[ss]=e}}}class Xdc extends XFAObject{constructor(e){super(Qo,"xdc",!0);this.uri=new XFAObjectArray;this.xsl=new XFAObjectArray}}class Xdp extends XFAObject{constructor(e){super(Qo,"xdp",!0);this.packets=null}}class Xsl extends XFAObject{constructor(e){super(Qo,"xsl",!0);this.debug=null;this.uri=null}}class Zpl extends XFAObject{constructor(e){super(Qo,"zpl",!0);this.name=e.name?e.name.trim():"";this.batchOutput=null;this.flipLabel=null;this.fontInfo=null;this.xdc=null}}class ConfigNamespace{static[fo](e,t){if(ConfigNamespace.hasOwnProperty(e))return ConfigNamespace[e](t)}static acrobat(e){return new Acrobat(e)}static acrobat7(e){return new Acrobat7(e)}static ADBE_JSConsole(e){return new ADBE_JSConsole(e)}static ADBE_JSDebugger(e){return new ADBE_JSDebugger(e)}static addSilentPrint(e){return new AddSilentPrint(e)}static addViewerPreferences(e){return new AddViewerPreferences(e)}static adjustData(e){return new AdjustData(e)}static adobeExtensionLevel(e){return new AdobeExtensionLevel(e)}static agent(e){return new Agent(e)}static alwaysEmbed(e){return new AlwaysEmbed(e)}static amd(e){return new Amd(e)}static area(e){return new config_Area(e)}static attributes(e){return new Attributes(e)}static autoSave(e){return new AutoSave(e)}static base(e){return new Base(e)}static batchOutput(e){return new BatchOutput(e)}static behaviorOverride(e){return new BehaviorOverride(e)}static cache(e){return new Cache(e)}static change(e){return new Change(e)}static common(e){return new Common(e)}static compress(e){return new Compress(e)}static compressLogicalStructure(e){return new CompressLogicalStructure(e)}static compressObjectStream(e){return new CompressObjectStream(e)}static compression(e){return new Compression(e)}static config(e){return new Config(e)}static conformance(e){return new Conformance(e)}static contentCopy(e){return new ContentCopy(e)}static copies(e){return new Copies(e)}static creator(e){return new Creator(e)}static currentPage(e){return new CurrentPage(e)}static data(e){return new Data(e)}static debug(e){return new Debug(e)}static defaultTypeface(e){return new DefaultTypeface(e)}static destination(e){return new Destination(e)}static documentAssembly(e){return new DocumentAssembly(e)}static driver(e){return new Driver(e)}static duplexOption(e){return new DuplexOption(e)}static dynamicRender(e){return new DynamicRender(e)}static embed(e){return new Embed(e)}static encrypt(e){return new config_Encrypt(e)}static encryption(e){return new config_Encryption(e)}static encryptionLevel(e){return new EncryptionLevel(e)}static enforce(e){return new Enforce(e)}static equate(e){return new Equate(e)}static equateRange(e){return new EquateRange(e)}static exclude(e){return new Exclude(e)}static excludeNS(e){return new ExcludeNS(e)}static flipLabel(e){return new FlipLabel(e)}static fontInfo(e){return new config_FontInfo(e)}static formFieldFilling(e){return new FormFieldFilling(e)}static groupParent(e){return new GroupParent(e)}static ifEmpty(e){return new IfEmpty(e)}static includeXDPContent(e){return new IncludeXDPContent(e)}static incrementalLoad(e){return new IncrementalLoad(e)}static incrementalMerge(e){return new IncrementalMerge(e)}static interactive(e){return new Interactive(e)}static jog(e){return new Jog(e)}static labelPrinter(e){return new LabelPrinter(e)}static layout(e){return new Layout(e)}static level(e){return new Level(e)}static linearized(e){return new Linearized(e)}static locale(e){return new Locale(e)}static localeSet(e){return new LocaleSet(e)}static log(e){return new Log(e)}static map(e){return new MapElement(e)}static mediumInfo(e){return new MediumInfo(e)}static message(e){return new config_Message(e)}static messaging(e){return new Messaging(e)}static mode(e){return new Mode(e)}static modifyAnnots(e){return new ModifyAnnots(e)}static msgId(e){return new MsgId(e)}static nameAttr(e){return new NameAttr(e)}static neverEmbed(e){return new NeverEmbed(e)}static numberOfCopies(e){return new NumberOfCopies(e)}static openAction(e){return new OpenAction(e)}static output(e){return new Output(e)}static outputBin(e){return new OutputBin(e)}static outputXSL(e){return new OutputXSL(e)}static overprint(e){return new Overprint(e)}static packets(e){return new Packets(e)}static pageOffset(e){return new PageOffset(e)}static pageRange(e){return new PageRange(e)}static pagination(e){return new Pagination(e)}static paginationOverride(e){return new PaginationOverride(e)}static part(e){return new Part(e)}static pcl(e){return new Pcl(e)}static pdf(e){return new Pdf(e)}static pdfa(e){return new Pdfa(e)}static permissions(e){return new Permissions(e)}static pickTrayByPDFSize(e){return new PickTrayByPDFSize(e)}static picture(e){return new config_Picture(e)}static plaintextMetadata(e){return new PlaintextMetadata(e)}static presence(e){return new Presence(e)}static present(e){return new Present(e)}static print(e){return new Print(e)}static printHighQuality(e){return new PrintHighQuality(e)}static printScaling(e){return new PrintScaling(e)}static printerName(e){return new PrinterName(e)}static producer(e){return new Producer(e)}static ps(e){return new Ps(e)}static range(e){return new Range(e)}static record(e){return new Record(e)}static relevant(e){return new Relevant(e)}static rename(e){return new Rename(e)}static renderPolicy(e){return new RenderPolicy(e)}static runScripts(e){return new RunScripts(e)}static script(e){return new config_Script(e)}static scriptModel(e){return new ScriptModel(e)}static severity(e){return new Severity(e)}static silentPrint(e){return new SilentPrint(e)}static staple(e){return new Staple(e)}static startNode(e){return new StartNode(e)}static startPage(e){return new StartPage(e)}static submitFormat(e){return new SubmitFormat(e)}static submitUrl(e){return new SubmitUrl(e)}static subsetBelow(e){return new SubsetBelow(e)}static suppressBanner(e){return new SuppressBanner(e)}static tagged(e){return new Tagged(e)}static template(e){return new config_Template(e)}static templateCache(e){return new TemplateCache(e)}static threshold(e){return new Threshold(e)}static to(e){return new To(e)}static trace(e){return new Trace(e)}static transform(e){return new Transform(e)}static type(e){return new Type(e)}static uri(e){return new Uri(e)}static validate(e){return new config_Validate(e)}static validateApprovalSignatures(e){return new ValidateApprovalSignatures(e)}static validationMessaging(e){return new ValidationMessaging(e)}static version(e){return new Version(e)}static versionControl(e){return new VersionControl(e)}static viewerPreferences(e){return new ViewerPreferences(e)}static webClient(e){return new WebClient(e)}static whitespace(e){return new Whitespace(e)}static window(e){return new Window(e)}static xdc(e){return new Xdc(e)}static xdp(e){return new Xdp(e)}static xsl(e){return new Xsl(e)}static zpl(e){return new Zpl(e)}}const ec=go.connectionSet.id;class ConnectionSet extends XFAObject{constructor(e){super(ec,"connectionSet",!0);this.wsdlConnection=new XFAObjectArray;this.xmlConnection=new XFAObjectArray;this.xsdConnection=new XFAObjectArray}}class EffectiveInputPolicy extends XFAObject{constructor(e){super(ec,"effectiveInputPolicy");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class EffectiveOutputPolicy extends XFAObject{constructor(e){super(ec,"effectiveOutputPolicy");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class Operation extends StringObject{constructor(e){super(ec,"operation");this.id=e.id||"";this.input=e.input||"";this.name=e.name||"";this.output=e.output||"";this.use=e.use||"";this.usehref=e.usehref||""}}class RootElement extends StringObject{constructor(e){super(ec,"rootElement");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class SoapAction extends StringObject{constructor(e){super(ec,"soapAction");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class SoapAddress extends StringObject{constructor(e){super(ec,"soapAddress");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class connection_set_Uri extends StringObject{constructor(e){super(ec,"uri");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class WsdlAddress extends StringObject{constructor(e){super(ec,"wsdlAddress");this.id=e.id||"";this.name=e.name||"";this.use=e.use||"";this.usehref=e.usehref||""}}class WsdlConnection extends XFAObject{constructor(e){super(ec,"wsdlConnection",!0);this.dataDescription=e.dataDescription||"";this.name=e.name||"";this.effectiveInputPolicy=null;this.effectiveOutputPolicy=null;this.operation=null;this.soapAction=null;this.soapAddress=null;this.wsdlAddress=null}}class XmlConnection extends XFAObject{constructor(e){super(ec,"xmlConnection",!0);this.dataDescription=e.dataDescription||"";this.name=e.name||"";this.uri=null}}class XsdConnection extends XFAObject{constructor(e){super(ec,"xsdConnection",!0);this.dataDescription=e.dataDescription||"";this.name=e.name||"";this.rootElement=null;this.uri=null}}class ConnectionSetNamespace{static[fo](e,t){if(ConnectionSetNamespace.hasOwnProperty(e))return ConnectionSetNamespace[e](t)}static connectionSet(e){return new ConnectionSet(e)}static effectiveInputPolicy(e){return new EffectiveInputPolicy(e)}static effectiveOutputPolicy(e){return new EffectiveOutputPolicy(e)}static operation(e){return new Operation(e)}static rootElement(e){return new RootElement(e)}static soapAction(e){return new SoapAction(e)}static soapAddress(e){return new SoapAddress(e)}static uri(e){return new connection_set_Uri(e)}static wsdlAddress(e){return new WsdlAddress(e)}static wsdlConnection(e){return new WsdlConnection(e)}static xmlConnection(e){return new XmlConnection(e)}static xsdConnection(e){return new XsdConnection(e)}}const tc=go.datasets.id;class datasets_Data extends XmlObject{constructor(e){super(tc,"data",e)}[Ls](){return!0}}class Datasets extends XFAObject{constructor(e){super(tc,"datasets",!0);this.data=null;this.Signature=null}[$s](e){const t=e[Ws];("data"===t&&e[Hs]===tc||"Signature"===t&&e[Hs]===go.signature.id)&&(this[t]=e);this[Qn](e)}}class DatasetsNamespace{static[fo](e,t){if(DatasetsNamespace.hasOwnProperty(e))return DatasetsNamespace[e](t)}static datasets(e){return new Datasets(e)}static data(e){return new datasets_Data(e)}}const ac=go.localeSet.id;class CalendarSymbols extends XFAObject{constructor(e){super(ac,"calendarSymbols",!0);this.name="gregorian";this.dayNames=new XFAObjectArray(2);this.eraNames=null;this.meridiemNames=null;this.monthNames=new XFAObjectArray(2)}}class CurrencySymbol extends StringObject{constructor(e){super(ac,"currencySymbol");this.name=getStringOption(e.name,["symbol","isoname","decimal"])}}class CurrencySymbols extends XFAObject{constructor(e){super(ac,"currencySymbols",!0);this.currencySymbol=new XFAObjectArray(3)}}class DatePattern extends StringObject{constructor(e){super(ac,"datePattern");this.name=getStringOption(e.name,["full","long","med","short"])}}class DatePatterns extends XFAObject{constructor(e){super(ac,"datePatterns",!0);this.datePattern=new XFAObjectArray(4)}}class DateTimeSymbols extends ContentObject{constructor(e){super(ac,"dateTimeSymbols")}}class Day extends StringObject{constructor(e){super(ac,"day")}}class DayNames extends XFAObject{constructor(e){super(ac,"dayNames",!0);this.abbr=getInteger({data:e.abbr,defaultValue:0,validate:e=>1===e});this.day=new XFAObjectArray(7)}}class Era extends StringObject{constructor(e){super(ac,"era")}}class EraNames extends XFAObject{constructor(e){super(ac,"eraNames",!0);this.era=new XFAObjectArray(2)}}class locale_set_Locale extends XFAObject{constructor(e){super(ac,"locale",!0);this.desc=e.desc||"";this.name="isoname";this.calendarSymbols=null;this.currencySymbols=null;this.datePatterns=null;this.dateTimeSymbols=null;this.numberPatterns=null;this.numberSymbols=null;this.timePatterns=null;this.typeFaces=null}}class locale_set_LocaleSet extends XFAObject{constructor(e){super(ac,"localeSet",!0);this.locale=new XFAObjectArray}}class Meridiem extends StringObject{constructor(e){super(ac,"meridiem")}}class MeridiemNames extends XFAObject{constructor(e){super(ac,"meridiemNames",!0);this.meridiem=new XFAObjectArray(2)}}class Month extends StringObject{constructor(e){super(ac,"month")}}class MonthNames extends XFAObject{constructor(e){super(ac,"monthNames",!0);this.abbr=getInteger({data:e.abbr,defaultValue:0,validate:e=>1===e});this.month=new XFAObjectArray(12)}}class NumberPattern extends StringObject{constructor(e){super(ac,"numberPattern");this.name=getStringOption(e.name,["full","long","med","short"])}}class NumberPatterns extends XFAObject{constructor(e){super(ac,"numberPatterns",!0);this.numberPattern=new XFAObjectArray(4)}}class NumberSymbol extends StringObject{constructor(e){super(ac,"numberSymbol");this.name=getStringOption(e.name,["decimal","grouping","percent","minus","zero"])}}class NumberSymbols extends XFAObject{constructor(e){super(ac,"numberSymbols",!0);this.numberSymbol=new XFAObjectArray(5)}}class TimePattern extends StringObject{constructor(e){super(ac,"timePattern");this.name=getStringOption(e.name,["full","long","med","short"])}}class TimePatterns extends XFAObject{constructor(e){super(ac,"timePatterns",!0);this.timePattern=new XFAObjectArray(4)}}class TypeFace extends XFAObject{constructor(e){super(ac,"typeFace",!0);this.name=""|e.name}}class TypeFaces extends XFAObject{constructor(e){super(ac,"typeFaces",!0);this.typeFace=new XFAObjectArray}}class LocaleSetNamespace{static[fo](e,t){if(LocaleSetNamespace.hasOwnProperty(e))return LocaleSetNamespace[e](t)}static calendarSymbols(e){return new CalendarSymbols(e)}static currencySymbol(e){return new CurrencySymbol(e)}static currencySymbols(e){return new CurrencySymbols(e)}static datePattern(e){return new DatePattern(e)}static datePatterns(e){return new DatePatterns(e)}static dateTimeSymbols(e){return new DateTimeSymbols(e)}static day(e){return new Day(e)}static dayNames(e){return new DayNames(e)}static era(e){return new Era(e)}static eraNames(e){return new EraNames(e)}static locale(e){return new locale_set_Locale(e)}static localeSet(e){return new locale_set_LocaleSet(e)}static meridiem(e){return new Meridiem(e)}static meridiemNames(e){return new MeridiemNames(e)}static month(e){return new Month(e)}static monthNames(e){return new MonthNames(e)}static numberPattern(e){return new NumberPattern(e)}static numberPatterns(e){return new NumberPatterns(e)}static numberSymbol(e){return new NumberSymbol(e)}static numberSymbols(e){return new NumberSymbols(e)}static timePattern(e){return new TimePattern(e)}static timePatterns(e){return new TimePatterns(e)}static typeFace(e){return new TypeFace(e)}static typeFaces(e){return new TypeFaces(e)}}const rc=go.signature.id;class signature_Signature extends XFAObject{constructor(e){super(rc,"signature",!0)}}class SignatureNamespace{static[fo](e,t){if(SignatureNamespace.hasOwnProperty(e))return SignatureNamespace[e](t)}static signature(e){return new signature_Signature(e)}}const ic=go.stylesheet.id;class Stylesheet extends XFAObject{constructor(e){super(ic,"stylesheet",!0)}}class StylesheetNamespace{static[fo](e,t){if(StylesheetNamespace.hasOwnProperty(e))return StylesheetNamespace[e](t)}static stylesheet(e){return new Stylesheet(e)}}const nc=go.xdp.id;class xdp_Xdp extends XFAObject{constructor(e){super(nc,"xdp",!0);this.uuid=e.uuid||"";this.timeStamp=e.timeStamp||"";this.config=null;this.connectionSet=null;this.datasets=null;this.localeSet=null;this.stylesheet=new XFAObjectArray;this.template=null}[Gs](e){const t=go[e[Ws]];return t&&e[Hs]===t.id}}class XdpNamespace{static[fo](e,t){if(XdpNamespace.hasOwnProperty(e))return XdpNamespace[e](t)}static xdp(e){return new xdp_Xdp(e)}}const sc=go.xhtml.id,oc=Symbol(),cc=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),lc=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",e=>"none"===e?"none":"normal"],["xfa-font-horizontal-scale",e=>`scaleX(${Math.max(0,parseInt(e)/100).toFixed(2)})`],["xfa-font-vertical-scale",e=>`scaleY(${Math.max(0,parseInt(e)/100).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(e,t)=>measureToString(.99*(e=t.fontSize=Math.abs(getMeasurement(e))))],["letter-spacing",e=>measureToString(getMeasurement(e))],["line-height",e=>measureToString(getMeasurement(e))],["margin",e=>measureToString(getMeasurement(e))],["margin-bottom",e=>measureToString(getMeasurement(e))],["margin-left",e=>measureToString(getMeasurement(e))],["margin-right",e=>measureToString(getMeasurement(e))],["margin-top",e=>measureToString(getMeasurement(e))],["text-indent",e=>measureToString(getMeasurement(e))],["font-family",e=>e],["vertical-align",e=>measureToString(getMeasurement(e))]]),hc=/\\s+/g,uc=/[\\r\\n]+/g,dc=/\\r\\n?/g;function mapStyle(e,t,a){const r=Object.create(null);if(!e)return r;const i=Object.create(null);for(const[t,a]of e.split(";").map((e=>e.split(":",2)))){const e=lc.get(t);if(""===e)continue;let n=a;e&&(n="string"==typeof e?e:e(a,i));t.endsWith("scale")?r.transform=r.transform?`${r[t]} ${n}`:n:r[t.replaceAll(/-([a-zA-Z])/g,((e,t)=>t.toUpperCase()))]=n}r.fontFamily&&setFontFamily({typeface:r.fontFamily,weight:r.fontWeight||"normal",posture:r.fontStyle||"normal",size:i.fontSize||0},t,t[Is].fontFinder,r);if(a&&r.verticalAlign&&"0px"!==r.verticalAlign&&r.fontSize){const e=.583,t=.333,a=getMeasurement(r.fontSize);r.fontSize=measureToString(a*e);r.verticalAlign=measureToString(Math.sign(getMeasurement(r.verticalAlign))*a*t)}a&&r.fontSize&&(r.fontSize=`calc(${r.fontSize} * var(--total-scale-factor))`);fixTextIndent(r);return r}const fc=new Set(["body","html"]);class XhtmlObject extends XmlObject{constructor(e,t){super(sc,t);this[oc]=!1;this.style=e.style||""}[ts](e){super[ts](e);this.style=function checkStyle(e){return e.style?e.style.split(";").filter((e=>!!e.trim())).map((e=>e.split(":",2).map((e=>e.trim())))).filter((([t,a])=>{"font-family"===t&&e[Is].usedTypefaces.add(a);return cc.has(t)})).map((e=>e.join(":"))).join(";"):""}(this)}[Yn](){return!fc.has(this[Ws])}[Vs](e,t=!1){if(t)this[oc]=!0;else{e=e.replaceAll(uc,"");this.style.includes("xfa-spacerun:yes")||(e=e.replaceAll(hc," "))}e&&(this[ss]+=e)}[Ks](e,t=!0){const a=Object.create(null),r={top:NaN,bottom:NaN,left:NaN,right:NaN};let i=null;for(const[e,t]of this.style.split(";").map((e=>e.split(":",2))))switch(e){case"font-family":a.typeface=stripQuotes(t);break;case"font-size":a.size=getMeasurement(t);break;case"font-weight":a.weight=t;break;case"font-style":a.posture=t;break;case"letter-spacing":a.letterSpacing=getMeasurement(t);break;case"margin":const e=t.split(/ \\t/).map((e=>getMeasurement(e)));switch(e.length){case 1:r.top=r.bottom=r.left=r.right=e[0];break;case 2:r.top=r.bottom=e[0];r.left=r.right=e[1];break;case 3:r.top=e[0];r.bottom=e[2];r.left=r.right=e[1];break;case 4:r.top=e[0];r.left=e[1];r.bottom=e[2];r.right=e[3]}break;case"margin-top":r.top=getMeasurement(t);break;case"margin-bottom":r.bottom=getMeasurement(t);break;case"margin-left":r.left=getMeasurement(t);break;case"margin-right":r.right=getMeasurement(t);break;case"line-height":i=getMeasurement(t)}e.pushData(a,r,i);if(this[ss])e.addString(this[ss]);else for(const t of this[Ss]())"#text"!==t[Ws]?t[Ks](e):e.addString(t[ss]);t&&e.popFont()}[co](e){const t=[];this[ls]={children:t};this[es]({});if(0===t.length&&!this[ss])return HTMLResult.EMPTY;let a;a=this[oc]?this[ss]?this[ss].replaceAll(dc,"\\n"):void 0:this[ss]||void 0;return HTMLResult.success({name:this[Ws],attributes:{href:this.href,style:mapStyle(this.style,this,this[oc])},children:t,value:a})}}class A extends XhtmlObject{constructor(e){super(e,"a");this.href=fixURL(e.href)||""}}class B extends XhtmlObject{constructor(e){super(e,"b")}[Ks](e){e.pushFont({weight:"bold"});super[Ks](e);e.popFont()}}class Body extends XhtmlObject{constructor(e){super(e,"body")}[co](e){const t=super[co](e),{html:a}=t;if(!a)return HTMLResult.EMPTY;a.name="div";a.attributes.class=["xfaRich"];return t}}class Br extends XhtmlObject{constructor(e){super(e,"br")}[so](){return"\\n"}[Ks](e){e.addString("\\n")}[co](e){return HTMLResult.success({name:"br"})}}class Html extends XhtmlObject{constructor(e){super(e,"html")}[co](e){const t=[];this[ls]={children:t};this[es]({});if(0===t.length)return HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[ss]||""});if(1===t.length){const e=t[0];if(e.attributes?.class.includes("xfaRich"))return HTMLResult.success(e)}return HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:t})}}class I extends XhtmlObject{constructor(e){super(e,"i")}[Ks](e){e.pushFont({posture:"italic"});super[Ks](e);e.popFont()}}class Li extends XhtmlObject{constructor(e){super(e,"li")}}class Ol extends XhtmlObject{constructor(e){super(e,"ol")}}class P extends XhtmlObject{constructor(e){super(e,"p")}[Ks](e){super[Ks](e,!1);e.addString("\\n");e.addPara();e.popFont()}[so](){return this[vs]()[Ss]().at(-1)===this?super[so]():super[so]()+"\\n"}}class Span extends XhtmlObject{constructor(e){super(e,"span")}}class Sub extends XhtmlObject{constructor(e){super(e,"sub")}}class Sup extends XhtmlObject{constructor(e){super(e,"sup")}}class Ul extends XhtmlObject{constructor(e){super(e,"ul")}}class XhtmlNamespace{static[fo](e,t){if(XhtmlNamespace.hasOwnProperty(e))return XhtmlNamespace[e](t)}static a(e){return new A(e)}static b(e){return new B(e)}static body(e){return new Body(e)}static br(e){return new Br(e)}static html(e){return new Html(e)}static i(e){return new I(e)}static li(e){return new Li(e)}static ol(e){return new Ol(e)}static p(e){return new P(e)}static span(e){return new Span(e)}static sub(e){return new Sub(e)}static sup(e){return new Sup(e)}static ul(e){return new Ul(e)}}const gc={config:ConfigNamespace,connection:ConnectionSetNamespace,datasets:DatasetsNamespace,localeSet:LocaleSetNamespace,signature:SignatureNamespace,stylesheet:StylesheetNamespace,template:TemplateNamespace,xdp:XdpNamespace,xhtml:XhtmlNamespace};class UnknownNamespace{constructor(e){this.namespaceId=e}[fo](e,t){return new XmlObject(this.namespaceId,e,t)}}class Root extends XFAObject{constructor(e){super(-1,"root",Object.create(null));this.element=null;this[Os]=e}[$s](e){this.element=e;return!0}[hs](){super[hs]();if(this.element.template instanceof Template){this[Os].set(Qs,this.element);this.element.template[eo](this[Os]);this.element.template[Os]=this[Os]}}}class Empty extends XFAObject{constructor(){super(-1,"",Object.create(null))}[$s](e){return!1}}class Builder{constructor(e=null){this._namespaceStack=[];this._nsAgnosticLevel=0;this._namespacePrefixes=new Map;this._namespaces=new Map;this._nextNsId=Math.max(...Object.values(go).map((({id:e})=>e)));this._currentNamespace=e||new UnknownNamespace(++this._nextNsId)}buildRoot(e){return new Root(e)}build({nsPrefix:e,name:t,attributes:a,namespace:r,prefixes:i}){const n=null!==r;if(n){this._namespaceStack.push(this._currentNamespace);this._currentNamespace=this._searchNamespace(r)}i&&this._addNamespacePrefix(i);if(a.hasOwnProperty(zs)){const e=gc.datasets,t=a[zs];let r=null;for(const[a,i]of Object.entries(t)){if(this._getNamespaceToUse(a)===e){r={xfa:i};break}}r?a[zs]=r:delete a[zs]}const s=this._getNamespaceToUse(e),o=s?.[fo](t,a)||new Empty;o[Ls]()&&this._nsAgnosticLevel++;(n||i||o[Ls]())&&(o[rs]={hasNamespace:n,prefixes:i,nsAgnostic:o[Ls]()});return o}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(e){let t=this._namespaces.get(e);if(t)return t;for(const[a,{check:r}]of Object.entries(go))if(r(e)){t=gc[a];if(t){this._namespaces.set(e,t);return t}break}t=new UnknownNamespace(++this._nextNsId);this._namespaces.set(e,t);return t}_addNamespacePrefix(e){for(const{prefix:t,value:a}of e){const e=this._searchNamespace(a);let r=this._namespacePrefixes.get(t);if(!r){r=[];this._namespacePrefixes.set(t,r)}r.push(e)}}_getNamespaceToUse(e){if(!e)return this._currentNamespace;const t=this._namespacePrefixes.get(e);if(t?.length>0)return t.at(-1);warn(`Unknown namespace prefix: ${e}.`);return null}clean(e){const{hasNamespace:t,prefixes:a,nsAgnostic:r}=e;t&&(this._currentNamespace=this._namespaceStack.pop());a&&a.forEach((({prefix:e})=>{this._namespacePrefixes.get(e).pop()}));r&&this._nsAgnosticLevel--}}class XFAParser extends XMLParserBase{constructor(e=null,t=!1){super();this._builder=new Builder(e);this._stack=[];this._globalData={usedTypefaces:new Set};this._ids=new Map;this._current=this._builder.buildRoot(this._ids);this._errorCode=jn;this._whiteRegex=/^\\s+$/;this._nbsps=/\\xa0+/g;this._richText=t}parse(e){this.parseXml(e);if(this._errorCode===jn){this._current[hs]();return this._current.element}}onText(e){e=e.replace(this._nbsps,(e=>e.slice(1)+" "));this._richText||this._current[Yn]()?this._current[Vs](e,this._richText):this._whiteRegex.test(e)||this._current[Vs](e.trim())}onCdata(e){this._current[Vs](e)}_mkAttributes(e,t){let a=null,r=null;const i=Object.create({});for(const{name:n,value:s}of e)if("xmlns"===n)a?warn(`XFA - multiple namespace definition in <${t}>`):a=s;else if(n.startsWith("xmlns:")){const e=n.substring(6);r??=[];r.push({prefix:e,value:s})}else{const e=n.indexOf(":");if(-1===e)i[n]=s;else{const t=i[zs]??=Object.create(null),[a,r]=[n.slice(0,e),n.slice(e+1)];(t[a]||=Object.create(null))[r]=s}}return[a,r,i]}_getNameAndPrefix(e,t){const a=e.indexOf(":");return-1===a?[e,null]:[e.substring(a+1),t?"":e.substring(0,a)]}onBeginElement(e,t,a){const[r,i,n]=this._mkAttributes(t,e),[s,o]=this._getNameAndPrefix(e,this._builder.isNsAgnostic()),c=this._builder.build({nsPrefix:o,name:s,attributes:n,namespace:r,prefixes:i});c[Is]=this._globalData;if(a){c[hs]();this._current[$s](c)&&c[ao](this._ids);c[ts](this._builder)}else{this._stack.push(this._current);this._current=c}}onEndElement(e){const t=this._current;if(t[Bs]()&&"string"==typeof t[ss]){const e=new XFAParser;e._globalData=this._globalData;const a=e.parse(t[ss]);t[ss]=null;t[$s](a)}t[hs]();this._current=this._stack.pop();this._current[$s](t)&&t[ao](this._ids);t[ts](this._builder)}onError(e){this._errorCode=e}}class XFAFactory{constructor(e){try{this.root=(new XFAParser).parse(XFAFactory._createDocument(e));const t=new Binder(this.root);this.form=t.bind();this.dataHandler=new DataHandler(this.root,t.getData());this.form[Is].template=this.form}catch(e){warn(`XFA - an error occurred during parsing and binding: ${e}`)}}isValid(){return!(!this.root||!this.form)}_createPagesHelper(){const e=this.form[oo]();return new Promise(((t,a)=>{const nextIteration=()=>{try{const a=e.next();a.done?t(a.value):setTimeout(nextIteration,0)}catch(e){a(e)}};setTimeout(nextIteration,0)}))}async _createPages(){try{this.pages=await this._createPagesHelper();this.dims=this.pages.children.map((e=>{const{width:t,height:a}=e.attributes.style;return[0,0,parseInt(t),parseInt(a)]}))}catch(e){warn(`XFA - an error occurred during layout: ${e}`)}}getBoundingBox(e){return this.dims[e]}async getNumPages(){this.pages||await this._createPages();return this.dims.length}setImages(e){this.form[Is].images=e}setFonts(e){this.form[Is].fontFinder=new FontFinder(e);const t=[];for(let e of this.form[Is].usedTypefaces){e=stripQuotes(e);this.form[Is].fontFinder.find(e)||t.push(e)}return t.length>0?t:null}appendFonts(e,t){this.form[Is].fontFinder.add(e,t)}async getPages(){this.pages||await this._createPages();const e=this.pages;this.pages=null;return e}serializeData(e){return this.dataHandler.serialize(e)}static _createDocument(e){return e["/xdp:xdp"]?Object.values(e).join(""):e["xdp:xdp"]}static getRichTextAsHtml(e){if(!e||"string"!=typeof e)return null;try{let t=new XFAParser(XhtmlNamespace,!0).parse(e);if(!["body","xhtml"].includes(t[Ws])){const e=XhtmlNamespace.body({});e[Qn](t);t=e}const a=t[co]();if(!a.success)return null;const{html:r}=a,{attributes:i}=r;if(i){i.class&&(i.class=i.class.filter((e=>!e.startsWith("xfa"))));i.dir="auto"}return{html:r,str:t[so]()}}catch(e){warn(`XFA - an error occurred during parsing of rich text: ${e}`)}return null}}class AnnotationFactory{static createGlobals(e){return Promise.all([e.ensureCatalog("acroForm"),e.ensureDoc("xfaDatasets"),e.ensureCatalog("structTreeRoot"),e.ensureCatalog("baseUrl"),e.ensureCatalog("attachments"),e.ensureCatalog("globalColorSpaceCache")]).then((([t,a,r,i,n,s])=>({pdfManager:e,acroForm:t instanceof Dict?t:Dict.empty,xfaDatasets:a,structTreeRoot:r,baseUrl:i,attachments:n,globalColorSpaceCache:s})),(e=>{warn(`createGlobals: "${e}".`);return null}))}static async create(e,t,a,r,i,n,s){const o=i?await this._getPageIndex(e,t,a.pdfManager):null;return a.pdfManager.ensure(this,"_create",[e,t,a,r,i,n,o,s])}static _create(e,t,a,r,i=!1,n=null,s=null,o=null){const c=e.fetchIfRef(t);if(!(c instanceof Dict))return;const{acroForm:l,pdfManager:h}=a,u=t instanceof Ref?t.toString():`annot_${r.createObjId()}`;let d=c.get("Subtype");d=d instanceof Name?d.name:null;const f={xref:e,ref:t,dict:c,subtype:d,id:u,annotationGlobals:a,collectFields:i,orphanFields:n,needAppearances:!i&&!0===l.get("NeedAppearances"),pageIndex:s,evaluatorOptions:h.evaluatorOptions,pageRef:o};switch(d){case"Link":return new LinkAnnotation(f);case"Text":return new TextAnnotation(f);case"Widget":let e=getInheritableProperty({dict:c,key:"FT"});e=e instanceof Name?e.name:null;switch(e){case"Tx":return new TextWidgetAnnotation(f);case"Btn":return new ButtonWidgetAnnotation(f);case"Ch":return new ChoiceWidgetAnnotation(f);case"Sig":return new SignatureWidgetAnnotation(f)}warn(`Unimplemented widget field type "${e}", falling back to base field type.`);return new WidgetAnnotation(f);case"Popup":return new PopupAnnotation(f);case"FreeText":return new FreeTextAnnotation(f);case"Line":return new LineAnnotation(f);case"Square":return new SquareAnnotation(f);case"Circle":return new CircleAnnotation(f);case"PolyLine":return new PolylineAnnotation(f);case"Polygon":return new PolygonAnnotation(f);case"Caret":return new CaretAnnotation(f);case"Ink":return new InkAnnotation(f);case"Highlight":return new HighlightAnnotation(f);case"Underline":return new UnderlineAnnotation(f);case"Squiggly":return new SquigglyAnnotation(f);case"StrikeOut":return new StrikeOutAnnotation(f);case"Stamp":return new StampAnnotation(f);case"FileAttachment":return new FileAttachmentAnnotation(f);default:i||warn(d?`Unimplemented annotation type "${d}", falling back to base annotation.`:"Annotation is missing the required /Subtype.");return new Annotation(f)}}static async _getPageIndex(e,t,a){try{const r=await e.fetchIfRefAsync(t);if(!(r instanceof Dict))return-1;const i=r.getRaw("P");if(i instanceof Ref)try{return await a.ensureCatalog("getPageIndex",[i])}catch(e){info(`_getPageIndex -- not a valid page reference: "${e}".`)}if(r.has("Kids"))return-1;const n=await a.ensureDoc("numPages");for(let e=0;e<n;e++){const r=await a.getPage(e),i=await a.ensure(r,"annotations");for(const a of i)if(a instanceof Ref&&isRefsEqual(a,t))return e}}catch(e){warn(`_getPageIndex: "${e}".`)}return-1}static generateImages(e,t,a){if(!a){warn("generateImages: OffscreenCanvas is not supported, cannot save or print some annotations with images.");return null}let r;for(const{bitmapId:a,bitmap:i}of e)if(i){r||=new Map;r.set(a,StampAnnotation.createImage(i,t))}return r}static async saveNewAnnotations(e,t,a,r,i){const n=e.xref;let s;const o=[],{isOffscreenCanvasSupported:c}=e.options;for(const l of a)if(!l.deleted)switch(l.annotationType){case g:if(!s){const e=new Dict(n);e.setIfName("BaseFont","Helvetica");e.setIfName("Type","Font");e.setIfName("Subtype","Type1");e.setIfName("Encoding","WinAnsiEncoding");s=n.getNewTemporaryRef();i.put(s,{data:e})}o.push(FreeTextAnnotation.createNewAnnotation(n,l,i,{evaluator:e,task:t,baseFontRef:s}));break;case p:l.quadPoints?o.push(HighlightAnnotation.createNewAnnotation(n,l,i)):o.push(InkAnnotation.createNewAnnotation(n,l,i));break;case b:o.push(InkAnnotation.createNewAnnotation(n,l,i));break;case m:const a=c?await(r?.get(l.bitmapId)):null;if(a?.imageStream){const{imageStream:e,smaskStream:t}=a;if(t){const a=n.getNewTemporaryRef();i.put(a,{data:t});e.dict.set("SMask",a)}const r=a.imageRef=n.getNewTemporaryRef();i.put(r,{data:e});a.imageStream=a.smaskStream=null}o.push(StampAnnotation.createNewAnnotation(n,l,i,{image:a}));break;case y:o.push(StampAnnotation.createNewAnnotation(n,l,i,{}))}return{annotations:(await Promise.all(o)).flat()}}static async printNewAnnotations(e,t,a,r,i){if(!r)return null;const{options:n,xref:s}=t,o=[];for(const c of r)if(!c.deleted)switch(c.annotationType){case g:o.push(FreeTextAnnotation.createNewPrintAnnotation(e,s,c,{evaluator:t,task:a,evaluatorOptions:n}));break;case p:c.quadPoints?o.push(HighlightAnnotation.createNewPrintAnnotation(e,s,c,{evaluatorOptions:n})):o.push(InkAnnotation.createNewPrintAnnotation(e,s,c,{evaluatorOptions:n}));break;case b:o.push(InkAnnotation.createNewPrintAnnotation(e,s,c,{evaluatorOptions:n}));break;case m:const r=n.isOffscreenCanvasSupported?await(i?.get(c.bitmapId)):null;if(r?.imageStream){const{imageStream:e,smaskStream:t}=r;t&&e.dict.set("SMask",t);r.imageRef=new JpegStream(e,e.length);r.imageStream=r.smaskStream=null}o.push(StampAnnotation.createNewPrintAnnotation(e,s,c,{image:r,evaluatorOptions:n}));break;case y:o.push(StampAnnotation.createNewPrintAnnotation(e,s,c,{evaluatorOptions:n}))}return Promise.all(o)}}function getRgbColor(e,t=new Uint8ClampedArray(3)){if(!Array.isArray(e))return t;const a=t||new Uint8ClampedArray(3);switch(e.length){case 0:return null;case 1:ColorSpaceUtils.gray.getRgbItem(e,0,a,0);return a;case 3:ColorSpaceUtils.rgb.getRgbItem(e,0,a,0);return a;case 4:ColorSpaceUtils.cmyk.getRgbItem(e,0,a,0);return a;default:return t}}function getPdfColorArray(e,t=null){return e&&Array.from(e,(e=>e/255))||t}function getQuadPoints(e,t){const a=e.getArray("QuadPoints");if(!isNumberArray(a,null)||0===a.length||a.length%8>0)return null;const r=new Float32Array(a.length);for(let e=0,i=a.length;e<i;e+=8){const[i,n,s,o,c,l,h,u]=a.slice(e,e+8),d=Math.min(i,s,c,h),f=Math.max(i,s,c,h),g=Math.min(n,o,l,u),p=Math.max(n,o,l,u);if(null!==t&&(d<t[0]||f>t[2]||g<t[1]||p>t[3]))return null;r.set([d,p,f,p,d,g,f,g],e)}return r}function getTransformMatrix(e,t,a){const r=new Float32Array([1/0,1/0,-1/0,-1/0]);Util.axialAlignedBoundingBox(t,a,r);const[i,n,s,o]=r;if(i===s||n===o)return[1,0,0,1,e[0],e[1]];const c=(e[2]-e[0])/(s-i),l=(e[3]-e[1])/(o-n);return[c,0,0,l,e[0]-i*c,e[1]-n*l]}class Annotation{constructor(e){const{dict:t,xref:a,annotationGlobals:r,ref:i,orphanFields:n}=e,s=n?.get(i);s&&t.set("Parent",s);this.setTitle(t.get("T"));this.setContents(t.get("Contents"));this.setModificationDate(t.get("M"));this.setFlags(t.get("F"));this.setRectangle(t.getArray("Rect"));this.setColor(t.getArray("C"));this.setBorderStyle(t);this.setAppearance(t);this.setOptionalContent(t);const o=t.get("MK");this.setBorderAndBackgroundColors(o);this.setRotation(o,t);this.ref=e.ref instanceof Ref?e.ref:null;this._streams=[];this.appearance&&this._streams.push(this.appearance);const c=!!(this.flags&ee),l=!!(this.flags&te);this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:e.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:e.subtype,hasOwnCanvas:!1,noRotate:!!(this.flags&Z),noHTML:c&&l,isEditable:!1,structParent:-1};if(r.structTreeRoot){let a=t.get("StructParent");this.data.structParent=a=Number.isInteger(a)&&a>=0?a:-1;r.structTreeRoot.addAnnotationIdToPage(e.pageRef,a)}if(e.collectFields){const r=t.get("Kids");if(Array.isArray(r)){const e=[];for(const t of r)t instanceof Ref&&e.push(t.toString());0!==e.length&&(this.data.kidIds=e)}this.data.actions=collectActions(a,t,ye);this.data.fieldName=this._constructFieldName(t);this.data.pageIndex=e.pageIndex}const h=t.get("IT");h instanceof Name&&(this.data.it=h.name);this._isOffscreenCanvasSupported=e.evaluatorOptions.isOffscreenCanvasSupported;this._fallbackFontDict=null;this._needAppearances=!1}_hasFlag(e,t){return!!(e&t)}_buildFlags(e,t){let{flags:a}=this;if(void 0===e){if(void 0===t)return;return t?a&~Y:a&~J|Y}if(e){a|=Y;return t?a&~Q|J:a&~J|Q}a&=~(J|Q);return t?a&~Y:a|Y}_isViewable(e){return!this._hasFlag(e,K)&&!this._hasFlag(e,Q)}_isPrintable(e){return this._hasFlag(e,Y)&&!this._hasFlag(e,J)&&!this._hasFlag(e,K)}mustBeViewed(e,t){const a=e?.get(this.data.id)?.noView;return void 0!==a?!a:this.viewable&&!this._hasFlag(this.flags,J)}mustBePrinted(e){const t=e?.get(this.data.id)?.noPrint;return void 0!==t?!t:this.printable}mustBeViewedWhenEditing(e,t=null){return e?!this.data.isEditable:!t?.has(this.data.id)}get viewable(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}get printable(){return null!==this.data.quadPoints&&(0!==this.flags&&this._isPrintable(this.flags))}_parseStringHelper(e){const t="string"==typeof e?stringToPDFString(e):"";return{str:t,dir:t&&"rtl"===bidi(t).dir?"rtl":"ltr"}}setDefaultAppearance(e){const{dict:t,annotationGlobals:a}=e,r=getInheritableProperty({dict:t,key:"DA"})||a.acroForm.get("DA");this._defaultAppearance="string"==typeof r?r:"";this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance)}setTitle(e){this._title=this._parseStringHelper(e)}setContents(e){this._contents=this._parseStringHelper(e)}setModificationDate(e){this.modificationDate="string"==typeof e?e:null}setFlags(e){this.flags=Number.isInteger(e)&&e>0?e:0;this.flags&K&&"Annotation"!==this.constructor.name&&(this.flags^=K)}hasFlag(e){return this._hasFlag(this.flags,e)}setRectangle(e){this.rectangle=lookupNormalRect(e,[0,0,0,0])}setColor(e){this.color=getRgbColor(e)}setLineEndings(e){this.lineEndings=["None","None"];if(Array.isArray(e)&&2===e.length)for(let t=0;t<2;t++){const a=e[t];if(a instanceof Name)switch(a.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[t]=a.name;continue}warn(`Ignoring invalid lineEnding: ${a}`)}}setRotation(e,t){this.rotation=0;let a=e instanceof Dict?e.get("R")||0:t.get("Rotate")||0;if(Number.isInteger(a)&&0!==a){a%=360;a<0&&(a+=360);a%90==0&&(this.rotation=a)}}setBorderAndBackgroundColors(e){if(e instanceof Dict){this.borderColor=getRgbColor(e.getArray("BC"),null);this.backgroundColor=getRgbColor(e.getArray("BG"),null)}else this.borderColor=this.backgroundColor=null}setBorderStyle(e){this.borderStyle=new AnnotationBorderStyle;if(e instanceof Dict)if(e.has("BS")){const t=e.get("BS");if(t instanceof Dict){const e=t.get("Type");if(!e||isName(e,"Border")){this.borderStyle.setWidth(t.get("W"),this.rectangle);this.borderStyle.setStyle(t.get("S"));this.borderStyle.setDashArray(t.getArray("D"))}}}else if(e.has("Border")){const t=e.getArray("Border");if(Array.isArray(t)&&t.length>=3){this.borderStyle.setHorizontalCornerRadius(t[0]);this.borderStyle.setVerticalCornerRadius(t[1]);this.borderStyle.setWidth(t[2],this.rectangle);4===t.length&&this.borderStyle.setDashArray(t[3],!0)}}else this.borderStyle.setWidth(0)}setAppearance(e){this.appearance=null;const t=e.get("AP");if(!(t instanceof Dict))return;const a=t.get("N");if(a instanceof BaseStream){this.appearance=a;return}if(!(a instanceof Dict))return;const r=e.get("AS");if(!(r instanceof Name&&a.has(r.name)))return;const i=a.get(r.name);i instanceof BaseStream&&(this.appearance=i)}setOptionalContent(e){this.oc=null;const t=e.get("OC");t instanceof Name?warn("setOptionalContent: Support for /Name-entry is not implemented."):t instanceof Dict&&(this.oc=t)}async loadResources(e,t){const a=await t.dict.getAsync("Resources");a&&await ObjectLoader.load(a,e,a.xref);return a}async getOperatorList(e,t,a,r){const{hasOwnCanvas:i,id:n,rect:o}=this.data;let c=this.appearance;const l=!!(i&&a&s);if(l&&(0===this.width||0===this.height)){this.data.hasOwnCanvas=!1;return{opList:new OperatorList,separateForm:!1,separateCanvas:!1}}if(!c){if(!l)return{opList:new OperatorList,separateForm:!1,separateCanvas:!1};c=new StringStream("");c.dict=new Dict}const h=c.dict,u=await this.loadResources(Ia,c),d=lookupRect(h.getArray("BBox"),[0,0,1,1]),f=lookupMatrix(h.getArray("Matrix"),Fa),g=getTransformMatrix(o,d,f),p=new OperatorList;let m;this.oc&&(m=await e.parseMarkedContentProps(this.oc,null));void 0!==m&&p.addOp(jt,["OC",m]);p.addOp($t,[n,o,g,f,l]);await e.getOperatorList({stream:c,task:t,resources:u,operatorList:p,fallbackFontDict:this._fallbackFontDict});p.addOp(Gt,[]);void 0!==m&&p.addOp(_t,[]);this.reset();return{opList:p,separateForm:!1,separateCanvas:l}}async save(e,t,a,r){return null}get overlaysTextContent(){return!1}get hasTextContent(){return!1}async extractTextContent(e,t,a){if(!this.appearance)return;const r=await this.loadResources(Ta,this.appearance),i=[],n=[];let s=null;const o={desiredSize:Math.Infinity,ready:!0,enqueue(e,t){for(const t of e.items)if(void 0!==t.str){s||=t.transform.slice(-2);n.push(t.str);if(t.hasEOL){i.push(n.join("").trimEnd());n.length=0}}}};await e.getTextContent({stream:this.appearance,task:t,resources:r,includeMarkedContent:!0,keepWhiteSpace:!0,sink:o,viewBox:a});this.reset();n.length&&i.push(n.join("").trimEnd());if(i.length>1||i[0]){const e=this.appearance.dict,t=lookupRect(e.getArray("BBox"),null),a=lookupMatrix(e.getArray("Matrix"),null);this.data.textPosition=this._transformPoint(s,t,a);this.data.textContent=i}}_transformPoint(e,t,a){const{rect:r}=this.data;t||=[0,0,1,1];a||=[1,0,0,1,0,0];const i=getTransformMatrix(r,t,a);i[4]-=r[0];i[5]-=r[1];const n=e.slice();Util.applyTransform(n,i);Util.applyTransform(n,a);return n}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation}:null}reset(){for(const e of this._streams)e.reset()}_constructFieldName(e){if(!e.has("T")&&!e.has("Parent")){warn("Unknown field name, falling back to empty field name.");return""}if(!e.has("Parent"))return stringToPDFString(e.get("T"));const t=[];e.has("T")&&t.unshift(stringToPDFString(e.get("T")));let a=e;const r=new RefSet;e.objId&&r.put(e.objId);for(;a.has("Parent");){a=a.get("Parent");if(!(a instanceof Dict)||a.objId&&r.has(a.objId))break;a.objId&&r.put(a.objId);a.has("T")&&t.unshift(stringToPDFString(a.get("T")))}return t.join(".")}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class AnnotationBorderStyle{constructor(){this.width=1;this.rawWidth=1;this.style=fe;this.dashArray=[3];this.horizontalCornerRadius=0;this.verticalCornerRadius=0}setWidth(e,t=[0,0,0,0]){if(e instanceof Name)this.width=0;else if("number"==typeof e){if(e>0){this.rawWidth=e;const a=(t[2]-t[0])/2,r=(t[3]-t[1])/2;if(a>0&&r>0&&(e>a||e>r)){warn(`AnnotationBorderStyle.setWidth - ignoring width: ${e}`);e=1}}this.width=e}}setStyle(e){if(e instanceof Name)switch(e.name){case"S":this.style=fe;break;case"D":this.style=ge;break;case"B":this.style=pe;break;case"I":this.style=me;break;case"U":this.style=be}}setDashArray(e,t=!1){if(Array.isArray(e)){let a=!0,r=!0;for(const t of e){if(!(+t>=0)){a=!1;break}t>0&&(r=!1)}if(0===e.length||a&&!r){this.dashArray=e;t&&this.setStyle(Name.get("D"))}else this.width=0}else e&&(this.width=0)}setHorizontalCornerRadius(e){Number.isInteger(e)&&(this.horizontalCornerRadius=e)}setVerticalCornerRadius(e){Number.isInteger(e)&&(this.verticalCornerRadius=e)}}class MarkupAnnotation extends Annotation{constructor(e){super(e);const{dict:t}=e;if(t.has("IRT")){const e=t.getRaw("IRT");this.data.inReplyTo=e instanceof Ref?e.toString():null;const a=t.get("RT");this.data.replyType=a instanceof Name?a.name:V}let a=null;if(this.data.replyType===G){const e=t.get("IRT");this.setTitle(e.get("T"));this.data.titleObj=this._title;this.setContents(e.get("Contents"));this.data.contentsObj=this._contents;if(e.has("CreationDate")){this.setCreationDate(e.get("CreationDate"));this.data.creationDate=this.creationDate}else this.data.creationDate=null;if(e.has("M")){this.setModificationDate(e.get("M"));this.data.modificationDate=this.modificationDate}else this.data.modificationDate=null;a=e.getRaw("Popup");if(e.has("C")){this.setColor(e.getArray("C"));this.data.color=this.color}else this.data.color=null}else{this.data.titleObj=this._title;this.setCreationDate(t.get("CreationDate"));this.data.creationDate=this.creationDate;a=t.getRaw("Popup");t.has("C")||(this.data.color=null)}this.data.popupRef=a instanceof Ref?a.toString():null;t.has("RC")&&(this.data.richText=XFAFactory.getRichTextAsHtml(t.get("RC")))}setCreationDate(e){this.creationDate="string"==typeof e?e:null}_setDefaultAppearance({xref:e,extra:t,strokeColor:a,fillColor:r,blendMode:i,strokeAlpha:n,fillAlpha:s,pointsCallback:o}){const c=this.data.rect=[1/0,1/0,-1/0,-1/0],l=["q"];t&&l.push(t);a&&l.push(`${a[0]} ${a[1]} ${a[2]} RG`);r&&l.push(`${r[0]} ${r[1]} ${r[2]} rg`);const h=this.data.quadPoints||Float32Array.from([this.rectangle[0],this.rectangle[3],this.rectangle[2],this.rectangle[3],this.rectangle[0],this.rectangle[1],this.rectangle[2],this.rectangle[1]]);for(let e=0,t=h.length;e<t;e+=8){const t=o(l,h.subarray(e,e+8));Util.rectBoundingBox(...t,c)}l.push("Q");const u=new Dict(e),d=new Dict(e);d.setIfName("Subtype","Form");const f=new StringStream(l.join(" "));f.dict=d;u.set("Fm0",f);const g=new Dict(e);i&&g.setIfName("BM",i);g.setIfNumber("CA",n);g.setIfNumber("ca",s);const p=new Dict(e);p.set("GS0",g);const m=new Dict(e);m.set("ExtGState",p);m.set("XObject",u);const b=new Dict(e);b.set("Resources",m);b.set("BBox",c);this.appearance=new StringStream("/GS0 gs /Fm0 Do");this.appearance.dict=b;this._streams.push(this.appearance,f)}static async createNewAnnotation(e,t,a,r){const i=t.ref||=e.getNewTemporaryRef(),n=await this.createNewAppearanceStream(t,e,r);let s;if(n){const r=e.getNewTemporaryRef();s=this.createNewDict(t,e,{apRef:r});a.put(r,{data:n})}else s=this.createNewDict(t,e,{});Number.isInteger(t.parentTreeId)&&s.set("StructParent",t.parentTreeId);a.put(i,{data:s});const o={ref:i};if(t.popup){const r=t.popup;if(r.deleted){s.delete("Popup");s.delete("Contents");s.delete("RC");return o}const n=r.ref||=e.getNewTemporaryRef();r.parent=i;const c=PopupAnnotation.createNewDict(r,e);a.put(n,{data:c});s.setIfDefined("Contents",stringToAsciiOrUTF16BE(r.contents));s.set("Popup",n);return[o,{ref:n}]}return o}static async createNewPrintAnnotation(e,t,a,r){const i=await this.createNewAppearanceStream(a,t,r),n=this.createNewDict(a,t,i?{ap:i}:{}),s=new this.prototype.constructor({dict:n,xref:t,annotationGlobals:e,evaluatorOptions:r.evaluatorOptions});a.ref&&(s.ref=s.refToReplace=a.ref);return s}}class WidgetAnnotation extends Annotation{constructor(e){super(e);const{dict:t,xref:a,annotationGlobals:r}=e,i=this.data;this._needAppearances=e.needAppearances;i.annotationType=$;void 0===i.fieldName&&(i.fieldName=this._constructFieldName(t));void 0===i.actions&&(i.actions=collectActions(a,t,ye));let n=getInheritableProperty({dict:t,key:"V",getArray:!0});i.fieldValue=this._decodeFormValue(n);const s=getInheritableProperty({dict:t,key:"DV",getArray:!0});i.defaultFieldValue=this._decodeFormValue(s);if(void 0===n&&r.xfaDatasets){const e=this._title.str;if(e){this._hasValueFromXFA=!0;i.fieldValue=n=r.xfaDatasets.getValue(e)}}void 0===n&&null!==i.defaultFieldValue&&(i.fieldValue=i.defaultFieldValue);i.alternativeText=stringToPDFString(t.get("TU")||"");this.setDefaultAppearance(e);i.hasAppearance||=this._needAppearances&&void 0!==i.fieldValue&&null!==i.fieldValue;const o=getInheritableProperty({dict:t,key:"FT"});i.fieldType=o instanceof Name?o.name:null;const c=getInheritableProperty({dict:t,key:"DR"}),l=r.acroForm.get("DR"),h=this.appearance?.dict.get("Resources");this._fieldResources={localResources:c,acroFormResources:l,appearanceResources:h,mergedResources:Dict.merge({xref:a,dictArray:[c,h,l],mergeSubDicts:!0})};i.fieldFlags=getInheritableProperty({dict:t,key:"Ff"});(!Number.isInteger(i.fieldFlags)||i.fieldFlags<0)&&(i.fieldFlags=0);i.password=this.hasFieldFlag(ne);i.readOnly=this.hasFieldFlag(ae);i.required=this.hasFieldFlag(re);i.hidden=this._hasFlag(i.annotationFlags,J)||this._hasFlag(i.annotationFlags,Q)}_decodeFormValue(e){return Array.isArray(e)?e.filter((e=>"string"==typeof e)).map((e=>stringToPDFString(e))):e instanceof Name?stringToPDFString(e.name):"string"==typeof e?stringToPDFString(e):null}hasFieldFlag(e){return!!(this.data.fieldFlags&e)}_isViewable(e){return!0}mustBeViewed(e,t){return t?this.viewable:super.mustBeViewed(e,t)&&!this._hasFlag(this.flags,Q)}getRotationMatrix(e){let t=e?.get(this.data.id)?.rotation;void 0===t&&(t=this.rotation);return 0===t?Fa:getRotationMatrix(t,this.width,this.height)}getBorderAndBackgroundAppearances(e){let t=e?.get(this.data.id)?.rotation;void 0===t&&(t=this.rotation);if(!this.backgroundColor&&!this.borderColor)return"";const a=0===t||180===t?`0 0 ${this.width} ${this.height} re`:`0 0 ${this.height} ${this.width} re`;let r="";this.backgroundColor&&(r=`${getPdfColor(this.backgroundColor,!0)} ${a} f `);if(this.borderColor){r+=`${this.borderStyle.width||1} w ${getPdfColor(this.borderColor,!1)} ${a} S `}return r}async getOperatorList(e,t,a,r){if(a&l&&!(this instanceof SignatureWidgetAnnotation)&&!this.data.noHTML&&!this.data.hasOwnCanvas)return{opList:new OperatorList,separateForm:!0,separateCanvas:!1};if(!this._hasText)return super.getOperatorList(e,t,a,r);const i=await this._getAppearance(e,t,a,r);if(this.appearance&&null===i)return super.getOperatorList(e,t,a,r);const n=new OperatorList;if(!this._defaultAppearance||null===i)return{opList:n,separateForm:!1,separateCanvas:!1};const o=!!(this.data.hasOwnCanvas&&a&s),c=[0,0,this.width,this.height],h=getTransformMatrix(this.data.rect,c,[1,0,0,1,0,0]);let u;this.oc&&(u=await e.parseMarkedContentProps(this.oc,null));void 0!==u&&n.addOp(jt,["OC",u]);n.addOp($t,[this.data.id,this.data.rect,h,this.getRotationMatrix(r),o]);const d=new StringStream(i);await e.getOperatorList({stream:d,task:t,resources:this._fieldResources.mergedResources,operatorList:n});n.addOp(Gt,[]);void 0!==u&&n.addOp(_t,[]);return{opList:n,separateForm:!1,separateCanvas:o}}_getMKDict(e){const t=new Dict(null);e&&t.set("R",e);t.setIfArray("BC",getPdfColorArray(this.borderColor));t.setIfArray("BG",getPdfColorArray(this.backgroundColor));return t.size>0?t:null}amendSavedDict(e,t){}setValue(e,t,a,r){const{dict:i,ref:n}=function getParentToUpdate(e,t,a){const r=new RefSet,i=e,n={dict:null,ref:null};for(;e instanceof Dict&&!r.has(t);){r.put(t);if(e.has("T"))break;if(!((t=e.getRaw("Parent"))instanceof Ref))return n;e=a.fetch(t)}if(e instanceof Dict&&e!==i){n.dict=e;n.ref=t}return n}(e,this.ref,a);if(i){if(!r.has(n)){const e=i.clone();e.set("V",t);r.put(n,{data:e});return e}}else e.set("V",t);return null}async save(e,t,a,r){const i=a?.get(this.data.id),n=this._buildFlags(i?.noView,i?.noPrint);let s=i?.value,o=i?.rotation;if(s===this.data.fieldValue||void 0===s){if(!this._hasValueFromXFA&&void 0===o&&void 0===n)return;s||=this.data.fieldValue}if(void 0===o&&!this._hasValueFromXFA&&Array.isArray(s)&&Array.isArray(this.data.fieldValue)&&isArrayEqual(s,this.data.fieldValue)&&void 0===n)return;void 0===o&&(o=this.rotation);let l=null;if(!this._needAppearances){l=await this._getAppearance(e,t,c,a);if(null===l&&void 0===n)return}let h=!1;if(l?.needAppearances){h=!0;l=null}const{xref:u}=e,d=u.fetchIfRef(this.ref);if(!(d instanceof Dict))return;const f=new Dict(u);for(const e of d.getKeys())"AP"!==e&&f.set(e,d.getRaw(e));if(void 0!==n){f.set("F",n);if(null===l&&!h){const e=d.getRaw("AP");e&&f.set("AP",e)}}const g={path:this.data.fieldName,value:s},p=this.setValue(f,Array.isArray(s)?s.map(stringToAsciiOrUTF16BE):stringToAsciiOrUTF16BE(s),u,r);this.amendSavedDict(a,p||f);const m=this._getMKDict(o);m&&f.set("MK",m);r.put(this.ref,{data:f,xfa:g,needAppearances:h});if(null!==l){const e=u.getNewTemporaryRef(),t=new Dict(u);f.set("AP",t);t.set("N",e);const i=this._getSaveFieldResources(u),n=new StringStream(l),s=n.dict=new Dict(u);s.setIfName("Subtype","Form");s.set("Resources",i);const c=o%180==0?[0,0,this.width,this.height]:[0,0,this.height,this.width];s.set("BBox",c);const h=this.getRotationMatrix(a);h!==Fa&&s.set("Matrix",h);r.put(e,{data:n,xfa:null,needAppearances:!1})}f.set("M",`D:${getModificationDate()}`)}async _getAppearance(e,t,a,r){if(this.data.password)return null;const n=r?.get(this.data.id);let s,o;if(n){s=n.formattedValue||n.value;o=n.rotation}if(void 0===o&&void 0===s&&!this._needAppearances&&(!this._hasValueFromXFA||this.appearance))return null;const l=this.getBorderAndBackgroundAppearances(r);if(void 0===s){s=this.data.fieldValue;if(!s)return`/Tx BMC q ${l}Q EMC`}Array.isArray(s)&&1===s.length&&(s=s[0]);assert("string"==typeof s,"Expected `value` to be a string.");s=s.trimEnd();if(this.data.combo){const e=this.data.options.find((({exportValue:e})=>s===e));s=e?.displayValue||s}if(""===s)return`/Tx BMC q ${l}Q EMC`;void 0===o&&(o=this.rotation);let h,u=-1;if(this.data.multiLine){h=s.split(/\\r\\n?|\\n/).map((e=>e.normalize("NFC")));u=h.length}else h=[s.replace(/\\r\\n?|\\n/,"").normalize("NFC")];let{width:d,height:f}=this;90!==o&&270!==o||([d,f]=[f,d]);this._defaultAppearance||(this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance="/Helvetica 0 Tf 0 g"));let g,p,m,b=await WidgetAnnotation._getFontData(e,t,this.data.defaultAppearanceData,this._fieldResources.mergedResources);const y=[];let w=!1;for(const e of h){const t=b.encodeString(e);t.length>1&&(w=!0);y.push(t.join(""))}if(w&&a&c)return{needAppearances:!0};if(w&&this._isOffscreenCanvasSupported){const a=this.data.comb?"monospace":"sans-serif",r=new FakeUnicodeFont(e.xref,a),i=r.createFontResources(h.join("")),n=i.getRaw("Font");if(this._fieldResources.mergedResources.has("Font")){const e=this._fieldResources.mergedResources.get("Font");for(const t of n.getKeys())e.set(t,n.getRaw(t))}else this._fieldResources.mergedResources.set("Font",n);const o=r.fontName.name;b=await WidgetAnnotation._getFontData(e,t,{fontName:o,fontSize:0},i);for(let e=0,t=y.length;e<t;e++)y[e]=stringToUTF16String(h[e]);const c=Object.assign(Object.create(null),this.data.defaultAppearanceData);this.data.defaultAppearanceData.fontSize=0;this.data.defaultAppearanceData.fontName=o;[g,p,m]=this._computeFontSize(f-2,d-4,s,b,u);this.data.defaultAppearanceData=c}else{this._isOffscreenCanvasSupported||warn("_getAppearance: OffscreenCanvas is not supported, annotation may not render correctly.");[g,p,m]=this._computeFontSize(f-2,d-4,s,b,u)}let x=b.descent;x=isNaN(x)?i*m:Math.max(i*m,Math.abs(x)*p);const S=Math.min(Math.floor((f-p)/2),1),k=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(g,y,b,p,d,f,k,2,S,x,m,r);if(this.data.comb)return this._getCombAppearance(g,b,y[0],p,d,f,2,S,x,m,r);const C=S+x;if(0===k||k>2)return`/Tx BMC q ${l}BT `+g+` 1 0 0 1 ${numberToString(2)} ${numberToString(C)} Tm (${escapeString(y[0])}) Tj ET Q EMC`;return`/Tx BMC q ${l}BT `+g+` 1 0 0 1 0 0 Tm ${this._renderText(y[0],b,p,d,k,{shift:0},2,C)} ET Q EMC`}static async _getFontData(e,t,a,r){const i=new OperatorList,n={font:null,clone(){return this}},{fontName:s,fontSize:o}=a;await e.handleSetFont(r,[s&&Name.get(s),o],null,i,t,n,null);return n.font}_getTextWidth(e,t){return Math.sumPrecise(t.charsToGlyphs(e).map((e=>e.width)))/1e3}_computeFontSize(e,t,r,i,n){let{fontSize:s}=this.data.defaultAppearanceData,o=(s||12)*a,c=Math.round(e/o);if(!s){const roundWithTwoDigits=e=>Math.floor(100*e)/100;if(-1===n){const n=this._getTextWidth(r,i);s=roundWithTwoDigits(Math.min(e/a,t/n));c=1}else{const l=r.split(/\\r\\n?|\\n/),h=[];for(const e of l){const t=i.encodeString(e).join(""),a=i.charsToGlyphs(t),r=i.getCharPositions(t);h.push({line:t,glyphs:a,positions:r})}const isTooBig=a=>{let r=0;for(const n of h){r+=this._splitLine(null,i,a,t,n).length*a;if(r>e)return!0}return!1};c=Math.max(c,n);for(;;){o=e/c;s=roundWithTwoDigits(o/a);if(!isTooBig(s))break;c++}}const{fontName:l,fontColor:h}=this.data.defaultAppearanceData;this._defaultAppearance=function createDefaultAppearance({fontSize:e,fontName:t,fontColor:a}){return`/${escapePDFName(t)} ${e} Tf ${getPdfColor(a,!0)}`}({fontSize:s,fontName:l,fontColor:h})}return[this._defaultAppearance,s,e/c]}_renderText(e,t,a,r,i,n,s,o){let c;if(1===i){c=(r-this._getTextWidth(e,t)*a)/2}else if(2===i){c=r-this._getTextWidth(e,t)*a-s}else c=s;const l=numberToString(c-n.shift);n.shift=c;return`${l} ${o=numberToString(o)} Td (${escapeString(e)}) Tj`}_getSaveFieldResources(e){const{localResources:t,appearanceResources:a,acroFormResources:r}=this._fieldResources,i=this.data.defaultAppearanceData?.fontName;if(!i)return t||Dict.empty;for(const e of[t,a])if(e instanceof Dict){const t=e.get("Font");if(t instanceof Dict&&t.has(i))return e}if(r instanceof Dict){const a=r.get("Font");if(a instanceof Dict&&a.has(i)){const r=new Dict(e);r.set(i,a.getRaw(i));const n=new Dict(e);n.set("Font",r);return Dict.merge({xref:e,dictArray:[n,t],mergeSubDicts:!0})}}return t||Dict.empty}getFieldObject(){return null}}class TextWidgetAnnotation extends WidgetAnnotation{constructor(e){super(e);const{dict:t}=e;if(t.has("PMD")){this.flags|=J;this.data.hidden=!0;warn("Barcodes are not supported")}this.data.hasOwnCanvas=this.data.readOnly&&!this.data.noHTML;this._hasText=!0;"string"!=typeof this.data.fieldValue&&(this.data.fieldValue="");let a=getInheritableProperty({dict:t,key:"Q"});(!Number.isInteger(a)||a<0||a>2)&&(a=null);this.data.textAlignment=a;let r=getInheritableProperty({dict:t,key:"MaxLen"});(!Number.isInteger(r)||r<0)&&(r=0);this.data.maxLen=r;this.data.multiLine=this.hasFieldFlag(ie);this.data.comb=this.hasFieldFlag(de)&&!this.data.multiLine&&!this.data.password&&!this.hasFieldFlag(le)&&0!==this.data.maxLen;this.data.doNotScroll=this.hasFieldFlag(ue);const{data:{actions:i}}=this;if(!i)return;const n=/^AF(Date|Time)_(?:Keystroke|Format)(?:Ex)?\\([\'"]?([^\'"]+)[\'"]?\\);$/;let s=!1;(1===i.Format?.length&&1===i.Keystroke?.length&&n.test(i.Format[0])&&n.test(i.Keystroke[0])||0===i.Format?.length&&1===i.Keystroke?.length&&n.test(i.Keystroke[0])||0===i.Keystroke?.length&&1===i.Format?.length&&n.test(i.Format[0]))&&(s=!0);const o=[];i.Format&&o.push(...i.Format);i.Keystroke&&o.push(...i.Keystroke);if(s){delete i.Keystroke;i.Format=o}for(const e of o){const t=e.match(n);if(!t)continue;const a="Date"===t[1];let r=t[2];const i=parseInt(r,10);isNaN(i)||Math.floor(Math.log10(i))+1!==t[2].length||(r=(a?Pn:Ln)[i]??r);this.data.datetimeFormat=r;if(!s)break;if(a){if(/HH|MM|ss|h/.test(r)){this.data.datetimeType="datetime-local";this.data.timeStep=/ss/.test(r)?1:60}else this.data.datetimeType="date";break}this.data.datetimeType="time";this.data.timeStep=/ss/.test(r)?1:60;break}}get hasTextContent(){return!!this.appearance&&!this._needAppearances}_getCombAppearance(e,t,a,r,i,n,s,o,c,l,h){const u=i/this.data.maxLen,d=this.getBorderAndBackgroundAppearances(h),f=[],g=t.getCharPositions(a);for(const[e,t]of g)f.push(`(${escapeString(a.substring(e,t))}) Tj`);const p=f.join(` ${numberToString(u)} 0 Td `);return`/Tx BMC q ${d}BT `+e+` 1 0 0 1 ${numberToString(s)} ${numberToString(o+c)} Tm ${p} ET Q EMC`}_getMultilineAppearance(e,t,a,r,i,n,s,o,c,l,h,u){const d=[],f=i-2*o,g={shift:0};for(let e=0,n=t.length;e<n;e++){const n=t[e],u=this._splitLine(n,a,r,f);for(let t=0,n=u.length;t<n;t++){const n=u[t],f=0===e&&0===t?-c-(h-l):-h;d.push(this._renderText(n,a,r,i,s,g,o,f))}}const p=this.getBorderAndBackgroundAppearances(u),m=d.join("\\n");return`/Tx BMC q ${p}BT `+e+` 1 0 0 1 0 ${numberToString(n)} Tm ${m} ET Q EMC`}_splitLine(e,t,a,r,i={}){e=i.line||e;const n=i.glyphs||t.charsToGlyphs(e);if(n.length<=1)return[e];const s=i.positions||t.getCharPositions(e),o=a/1e3,c=[];let l=-1,h=-1,u=-1,d=0,f=0;for(let t=0,a=n.length;t<a;t++){const[a,i]=s[t],g=n[t],p=g.width*o;if(" "===g.unicode)if(f+p>r){c.push(e.substring(d,a));d=a;f=p;l=-1;u=-1}else{f+=p;l=a;h=i;u=t}else if(f+p>r)if(-1!==l){c.push(e.substring(d,h));d=h;t=u+1;l=-1;f=0}else{c.push(e.substring(d,a));d=a;f=p}else f+=p}d<e.length&&c.push(e.substring(d,e.length));return c}async extractTextContent(e,t,a){await super.extractTextContent(e,t,a);const r=this.data.textContent;if(!r)return;const i=r.join("\\n");if(i===this.data.fieldValue)return;const n=i.replaceAll(/([.*+?^${}()|[\\]\\\\])|(\\s+)/g,((e,t)=>t?`\\\\${t}`:"\\\\s+"));new RegExp(`^\\\\s*${n}\\\\s*$`).test(this.data.fieldValue)&&(this.data.textContent=this.data.fieldValue.split("\\n"))}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.data.password,charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,datetimeFormat:this.data.datetimeFormat,hasDatetimeHTML:!!this.data.datetimeType,type:"text"}}}class ButtonWidgetAnnotation extends WidgetAnnotation{constructor(e){super(e);this.checkedAppearance=null;this.uncheckedAppearance=null;const t=this.hasFieldFlag(se),a=this.hasFieldFlag(oe);this.data.checkBox=!t&&!a;this.data.radioButton=t&&!a;this.data.pushButton=a;this.data.isTooltipOnly=!1;if(this.data.checkBox)this._processCheckBox(e);else if(this.data.radioButton)this._processRadioButton(e);else if(this.data.pushButton){this.data.hasOwnCanvas=!0;this.data.noHTML=!1;this._processPushButton(e)}else warn("Invalid field flags for button widget annotation")}async getOperatorList(e,t,a,r){if(this.data.pushButton)return super.getOperatorList(e,t,a,!1,r);let i=null,n=null;if(r){const e=r.get(this.data.id);i=e?e.value:null;n=e?e.rotation:null}if(null===i&&this.appearance)return super.getOperatorList(e,t,a,r);null==i&&(i=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue);const s=i?this.checkedAppearance:this.uncheckedAppearance;if(s){const i=this.appearance,o=lookupMatrix(s.dict.getArray("Matrix"),Fa);n&&s.dict.set("Matrix",this.getRotationMatrix(r));this.appearance=s;const c=super.getOperatorList(e,t,a,r);this.appearance=i;s.dict.set("Matrix",o);return c}return{opList:new OperatorList,separateForm:!1,separateCanvas:!1}}async save(e,t,a,r){this.data.checkBox?this._saveCheckbox(e,t,a,r):this.data.radioButton&&this._saveRadioButton(e,t,a,r)}async _saveCheckbox(e,t,a,r){if(!a)return;const i=a.get(this.data.id),n=this._buildFlags(i?.noView,i?.noPrint);let s=i?.rotation,o=i?.value;if(void 0===s&&void 0===n){if(void 0===o)return;if(this.data.fieldValue===this.data.exportValue===o)return}let c=e.xref.fetchIfRef(this.ref);if(!(c instanceof Dict))return;c=c.clone();void 0===s&&(s=this.rotation);void 0===o&&(o=this.data.fieldValue===this.data.exportValue);const l={path:this.data.fieldName,value:o?this.data.exportValue:""},h=Name.get(o?this.data.exportValue:"Off");this.setValue(c,h,e.xref,r);c.set("AS",h);c.set("M",`D:${getModificationDate()}`);void 0!==n&&c.set("F",n);const u=this._getMKDict(s);u&&c.set("MK",u);r.put(this.ref,{data:c,xfa:l,needAppearances:!1})}async _saveRadioButton(e,t,a,r){if(!a)return;const i=a.get(this.data.id),n=this._buildFlags(i?.noView,i?.noPrint);let s=i?.rotation,o=i?.value;if(void 0===s&&void 0===n){if(void 0===o)return;if(this.data.fieldValue===this.data.buttonValue===o)return}let c=e.xref.fetchIfRef(this.ref);if(!(c instanceof Dict))return;c=c.clone();void 0===o&&(o=this.data.fieldValue===this.data.buttonValue);void 0===s&&(s=this.rotation);const l={path:this.data.fieldName,value:o?this.data.buttonValue:""},h=Name.get(o?this.data.buttonValue:"Off");o&&this.setValue(c,h,e.xref,r);c.set("AS",h);c.set("M",`D:${getModificationDate()}`);void 0!==n&&c.set("F",n);const u=this._getMKDict(s);u&&c.set("MK",u);r.put(this.ref,{data:c,xfa:l,needAppearances:!1})}_getDefaultCheckedAppearance(e,t){const{width:a,height:r}=this,i=[0,0,a,r],n=.8*Math.min(a,r);let s,o;if("check"===t){s={width:.755*n,height:.705*n};o="3"}else if("disc"===t){s={width:.791*n,height:.705*n};o="l"}else unreachable(`_getDefaultCheckedAppearance - unsupported type: ${t}`);const c=`q BT /PdfJsZaDb ${n} Tf 0 g ${numberToString((a-s.width)/2)} ${numberToString((r-s.height)/2)} Td (${o}) Tj ET Q`,l=new Dict(e.xref);l.set("FormType",1);l.setIfName("Subtype","Form");l.setIfName("Type","XObject");l.set("BBox",i);l.set("Matrix",[1,0,0,1,0,0]);l.set("Length",c.length);const h=new Dict(e.xref),u=new Dict(e.xref);u.set("PdfJsZaDb",this.fallbackFontDict);h.set("Font",u);l.set("Resources",h);this.checkedAppearance=new StringStream(c);this.checkedAppearance.dict=l;this._streams.push(this.checkedAppearance)}_processCheckBox(e){const t=e.dict.get("AP");if(!(t instanceof Dict))return;const a=t.get("N");if(!(a instanceof Dict))return;const r=this._decodeFormValue(e.dict.get("AS"));"string"==typeof r&&(this.data.fieldValue=r);const i=null!==this.data.fieldValue&&"Off"!==this.data.fieldValue?this.data.fieldValue:"Yes",n=this._decodeFormValue(a.getKeys());if(0===n.length)n.push("Off",i);else if(1===n.length)"Off"===n[0]?n.push(i):n.unshift("Off");else if(n.includes(i)){n.length=0;n.push("Off",i)}else{const e=n.find((e=>"Off"!==e));n.length=0;n.push("Off",e)}n.includes(this.data.fieldValue)||(this.data.fieldValue="Off");this.data.exportValue=n[1];const s=a.get(this.data.exportValue);this.checkedAppearance=s instanceof BaseStream?s:null;const o=a.get("Off");this.uncheckedAppearance=o instanceof BaseStream?o:null;this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(e,"check");this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance);this._fallbackFontDict=this.fallbackFontDict;null===this.data.defaultFieldValue&&(this.data.defaultFieldValue="Off")}_processRadioButton(e){this.data.buttonValue=null;const t=e.dict.get("Parent");if(t instanceof Dict){this.parent=e.dict.getRaw("Parent");const a=t.get("V");a instanceof Name&&(this.data.fieldValue=this._decodeFormValue(a))}const a=e.dict.get("AP");if(!(a instanceof Dict))return;const r=a.get("N");if(!(r instanceof Dict))return;for(const e of r.getKeys())if("Off"!==e){this.data.buttonValue=this._decodeFormValue(e);break}const i=r.get(this.data.buttonValue);this.checkedAppearance=i instanceof BaseStream?i:null;const n=r.get("Off");this.uncheckedAppearance=n instanceof BaseStream?n:null;this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(e,"disc");this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance);this._fallbackFontDict=this.fallbackFontDict;null===this.data.defaultFieldValue&&(this.data.defaultFieldValue="Off")}_processPushButton(e){const{dict:t,annotationGlobals:a}=e;if(t.has("A")||t.has("AA")||this.data.alternativeText){this.data.isTooltipOnly=!t.has("A")&&!t.has("AA");Catalog.parseDestDictionary({destDict:t,resultObj:this.data,docBaseUrl:a.baseUrl,docAttachments:a.attachments})}else warn("Push buttons without action dictionaries are not supported")}getFieldObject(){let e,t="button";if(this.data.checkBox){t="checkbox";e=this.data.exportValue}else if(this.data.radioButton){t="radiobutton";e=this.data.buttonValue}return{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:e,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:t}}get fallbackFontDict(){const e=new Dict;e.setIfName("BaseFont","ZapfDingbats");e.setIfName("Type","FallbackType");e.setIfName("Subtype","FallbackType");e.setIfName("Encoding","ZapfDingbatsEncoding");return shadow(this,"fallbackFontDict",e)}}class ChoiceWidgetAnnotation extends WidgetAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.indices=t.getArray("I");this.hasIndices=Array.isArray(this.indices)&&this.indices.length>0;this.data.options=[];const r=getInheritableProperty({dict:t,key:"Opt"});if(Array.isArray(r))for(let e=0,t=r.length;e<t;e++){const t=a.fetchIfRef(r[e]),i=Array.isArray(t);this.data.options[e]={exportValue:this._decodeFormValue(i?a.fetchIfRef(t[0]):t),displayValue:this._decodeFormValue(i?a.fetchIfRef(t[1]):t)}}if(this.hasIndices){this.data.fieldValue=[];const e=this.data.options.length;for(const t of this.indices)Number.isInteger(t)&&t>=0&&t<e&&this.data.fieldValue.push(this.data.options[t].exportValue)}else"string"==typeof this.data.fieldValue?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||=[];0===this.data.options.length&&this.data.fieldValue.length>0&&(this.data.options=this.data.fieldValue.map((e=>({exportValue:e,displayValue:e}))));this.data.combo=this.hasFieldFlag(ce);this.data.multiSelect=this.hasFieldFlag(he);this._hasText=!0}getFieldObject(){const e=this.data.combo?"combobox":"listbox",t=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:t,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:e}}amendSavedDict(e,t){if(!this.hasIndices)return;let a=e?.get(this.data.id)?.value;Array.isArray(a)||(a=[a]);const r=[],{options:i}=this.data;for(let e=0,t=0,n=i.length;e<n;e++)if(i[e].exportValue===a[t]){r.push(e);t+=1}t.set("I",r)}async _getAppearance(e,t,r,i){if(this.data.combo)return super._getAppearance(e,t,r,i);let n,s;const o=i?.get(this.data.id);if(o){s=o.rotation;n=o.value}if(void 0===s&&void 0===n&&!this._needAppearances)return null;void 0===n?n=this.data.fieldValue:Array.isArray(n)||(n=[n]);let{width:c,height:l}=this;90!==s&&270!==s||([c,l]=[l,c]);const h=this.data.options.length,u=[];for(let e=0;e<h;e++){const{exportValue:t}=this.data.options[e];n.includes(t)&&u.push(e)}this._defaultAppearance||(this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const d=await WidgetAnnotation._getFontData(e,t,this.data.defaultAppearanceData,this._fieldResources.mergedResources);let f,{fontSize:g}=this.data.defaultAppearanceData;if(g)f=this._defaultAppearance;else{const e=(l-1)/h;let t,a=-1;for(const{displayValue:e}of this.data.options){const r=this._getTextWidth(e,d);if(r>a){a=r;t=e}}[f,g]=this._computeFontSize(e,c-4,t,d,-1)}const p=g*a,m=(p-g)/2,b=Math.floor(l/p);let y=0;if(u.length>0){const e=Math.min(...u),t=Math.max(...u);y=Math.max(0,t-b+1);y>e&&(y=e)}const w=Math.min(y+b+1,h),x=["/Tx BMC q",`1 1 ${c} ${l} re W n`];if(u.length){x.push("0.600006 0.756866 0.854904 rg");for(const e of u)y<=e&&e<w&&x.push(`1 ${l-(e-y+1)*p} ${c} ${p} re f`)}x.push("BT",f,`1 0 0 1 0 ${l} Tm`);const S={shift:0};for(let e=y;e<w;e++){const{displayValue:t}=this.data.options[e],a=e===y?m:0;x.push(this._renderText(t,d,g,c,0,S,2,-p+a))}x.push("ET Q EMC");return x.join("\\n")}}class SignatureWidgetAnnotation extends WidgetAnnotation{constructor(e){super(e);this.data.fieldValue=null;this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!this.data.hasOwnCanvas}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}}class TextAnnotation extends MarkupAnnotation{constructor(e){super(e);this.data.noRotate=!0;this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!1;const{dict:t}=e;this.data.annotationType=F;if(this.data.hasAppearance)this.data.name="NoIcon";else{this.data.rect[1]=this.data.rect[3]-22;this.data.rect[2]=this.data.rect[0]+22;this.data.name=t.has("Name")?t.get("Name").name:"Note"}if(t.has("State")){this.data.state=t.get("State")||null;this.data.stateModel=t.get("StateModel")||null}else{this.data.state=null;this.data.stateModel=null}}}class LinkAnnotation extends Annotation{constructor(e){super(e);const{dict:t,annotationGlobals:a}=e;this.data.annotationType=T;this.data.noHTML=!1;const r=getQuadPoints(t,this.rectangle);r&&(this.data.quadPoints=r);this.data.borderColor||=this.data.color;Catalog.parseDestDictionary({destDict:t,resultObj:this.data,docBaseUrl:a.baseUrl,docAttachments:a.attachments})}get overlaysTextContent(){return!0}}class PopupAnnotation extends Annotation{constructor(e){super(e);const{dict:t}=e;this.data.annotationType=W;this.data.noHTML=!1;0!==this.width&&0!==this.height||(this.data.rect=null);let a=t.get("Parent");if(!a){warn("Popup annotation has a missing or invalid parent annotation.");return}this.data.parentRect=lookupNormalRect(a.getArray("Rect"),null);this.data.creationDate=a.get("CreationDate")||"";isName(a.get("RT"),G)&&(a=a.get("IRT"));if(a.has("M")){this.setModificationDate(a.get("M"));this.data.modificationDate=this.modificationDate}else this.data.modificationDate=null;if(a.has("C")){this.setColor(a.getArray("C"));this.data.color=this.color}else this.data.color=null;if(!this.viewable){const e=a.get("F");this._isViewable(e)&&this.setFlags(e)}this.setTitle(a.get("T"));this.data.titleObj=this._title;this.setContents(a.get("Contents"));this.data.contentsObj=this._contents;a.has("RC")&&(this.data.richText=XFAFactory.getRichTextAsHtml(a.get("RC")));this.data.open=!!t.get("Open")}static createNewDict(e,t,a){const{oldAnnotation:r,rect:i,parent:n}=e,s=r||new Dict(t);s.setIfNotExists("Type",Name.get("Annot"));s.setIfNotExists("Subtype",Name.get("Popup"));s.setIfNotExists("Open",!1);s.setIfArray("Rect",i);s.set("Parent",n);return s}static async createNewAppearanceStream(e,t,a){return null}}class FreeTextAnnotation extends MarkupAnnotation{constructor(e){super(e);this.data.hasOwnCanvas=this.data.noRotate;this.data.isEditable=!this.data.noHTML;this.data.noHTML=!1;const{annotationGlobals:t,evaluatorOptions:a,xref:r}=e;this.data.annotationType=O;this.setDefaultAppearance(e);this._hasAppearance=!!this.appearance;if(this._hasAppearance){const{fontColor:e,fontSize:i}=function parseAppearanceStream(e,t,a,r){return new AppearanceStreamEvaluator(e,t,a,r).parse()}(this.appearance,a,r,t.globalColorSpaceCache);this.data.defaultAppearanceData.fontColor=e;this.data.defaultAppearanceData.fontSize=i||10}else{this.data.defaultAppearanceData.fontSize||=10;const{fontColor:t,fontSize:a}=this.data.defaultAppearanceData;if(this._contents.str){this.data.textContent=this._contents.str.split(/\\r\\n?|\\n/).map((e=>e.trimEnd()));const{coords:e,bbox:t,matrix:r}=FakeUnicodeFont.getFirstPositionInfo(this.rectangle,this.rotation,a);this.data.textPosition=this._transformPoint(e,t,r)}if(this._isOffscreenCanvasSupported){const i=e.dict.get("CA"),n=new FakeUnicodeFont(r,"sans-serif");this.appearance=n.createAppearance(this._contents.str,this.rectangle,this.rotation,a,t,i);this._streams.push(this.appearance)}else warn("FreeTextAnnotation: OffscreenCanvas is not supported, annotation may not render correctly.")}}get hasTextContent(){return this._hasAppearance}static createNewDict(e,t,{apRef:a,ap:r}){const{color:i,date:n,fontSize:s,oldAnnotation:o,rect:c,rotation:l,user:h,value:u}=e,d=o||new Dict(t);d.setIfNotExists("Type",Name.get("Annot"));d.setIfNotExists("Subtype",Name.get("FreeText"));d.set(o?"M":"CreationDate",`D:${getModificationDate(n)}`);o&&d.delete("RC");d.setIfArray("Rect",c);const f=`/Helv ${s} Tf ${getPdfColor(i,!0)}`;d.set("DA",f);d.setIfDefined("Contents",stringToAsciiOrUTF16BE(u));d.setIfNotExists("F",4);d.setIfNotExists("Border",[0,0,0]);d.setIfNumber("Rotate",l);d.setIfDefined("T",stringToAsciiOrUTF16BE(h));if(a||r){const e=new Dict(t);d.set("AP",e);e.set("N",a||r)}return d}static async createNewAppearanceStream(e,t,r){const{baseFontRef:i,evaluator:n,task:s}=r,{color:o,fontSize:c,rect:l,rotation:h,value:u}=e;if(!o)return null;const d=new Dict(t),f=new Dict(t);if(i)f.set("Helv",i);else{const e=new Dict(t);e.setIfName("BaseFont","Helvetica");e.setIfName("Type","Font");e.setIfName("Subtype","Type1");e.setIfName("Encoding","WinAnsiEncoding");f.set("Helv",e)}d.set("Font",f);const g=await WidgetAnnotation._getFontData(n,s,{fontName:"Helv",fontSize:c},d),[p,m,b,y]=l;let w=b-p,x=y-m;h%180!=0&&([w,x]=[x,w]);const S=u.split("\\n"),k=c/1e3;let C=-1/0;const v=[];for(let e of S){const t=g.encodeString(e);if(t.length>1)return null;e=t.join("");v.push(e);let a=0;const r=g.charsToGlyphs(e);for(const e of r)a+=e.width*k;C=Math.max(C,a)}let F=1;C>w&&(F=w/C);let T=1;const O=a*c,M=1*c,D=O*S.length;D>x&&(T=x/D);const R=c*Math.min(F,T);let N,E,L;switch(h){case 0:L=[1,0,0,1];E=[l[0],l[1],w,x];N=[l[0],l[3]-M];break;case 90:L=[0,1,-1,0];E=[l[1],-l[2],w,x];N=[l[1],-l[0]-M];break;case 180:L=[-1,0,0,-1];E=[-l[2],-l[3],w,x];N=[-l[2],-l[1]-M];break;case 270:L=[0,-1,1,0];E=[-l[3],l[0],w,x];N=[-l[3],l[2]-M]}const j=["q",`${L.join(" ")} 0 0 cm`,`${E.join(" ")} re W n`,"BT",`${getPdfColor(o,!0)}`,`0 Tc /Helv ${numberToString(R)} Tf`];j.push(`${N.join(" ")} Td (${escapeString(v[0])}) Tj`);const _=numberToString(O);for(let e=1,t=v.length;e<t;e++){const t=v[e];j.push(`0 -${_} Td (${escapeString(t)}) Tj`)}j.push("ET","Q");const U=j.join("\\n"),X=new Dict(t);X.set("FormType",1);X.setIfName("Subtype","Form");X.setIfName("Type","XObject");X.set("BBox",l);X.set("Resources",d);X.set("Matrix",[1,0,0,1,-l[0],-l[1]]);const q=new StringStream(U);q.dict=X;return q}}class LineAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=M;this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!1;const r=lookupRect(t.getArray("L"),[0,0,0,0]);this.data.lineCoordinates=Util.normalizeRect(r);this.setLineEndings(t.getArray("LE"));this.data.lineEndings=this.lineEndings;if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),i=t.get("CA"),n=getPdfColorArray(getRgbColor(t.getArray("IC"),null)),s=n?i:null,o=this.borderStyle.width||1,c=2*o,l=[this.data.lineCoordinates[0]-c,this.data.lineCoordinates[1]-c,this.data.lineCoordinates[2]+c,this.data.lineCoordinates[3]+c];Util.intersect(this.rectangle,l)||(this.rectangle=l);this._setDefaultAppearance({xref:a,extra:`${o} w`,strokeColor:e,fillColor:n,strokeAlpha:i,fillAlpha:s,pointsCallback:(e,t)=>{e.push(`${r[0]} ${r[1]} m`,`${r[2]} ${r[3]} l`,"S");return[t[0]-o,t[7]-o,t[2]+o,t[3]+o]}})}}}class SquareAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=D;this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!1;if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA"),i=getPdfColorArray(getRgbColor(t.getArray("IC"),null)),n=i?r:null;if(0===this.borderStyle.width&&!i)return;this._setDefaultAppearance({xref:a,extra:`${this.borderStyle.width} w`,strokeColor:e,fillColor:i,strokeAlpha:r,fillAlpha:n,pointsCallback:(e,t)=>{const a=t[4]+this.borderStyle.width/2,r=t[5]+this.borderStyle.width/2,n=t[6]-t[4]-this.borderStyle.width,s=t[3]-t[7]-this.borderStyle.width;e.push(`${a} ${r} ${n} ${s} re`);i?e.push("B"):e.push("S");return[t[0],t[7],t[2],t[3]]}})}}}class CircleAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=R;if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA"),i=getPdfColorArray(getRgbColor(t.getArray("IC"),null)),n=i?r:null;if(0===this.borderStyle.width&&!i)return;const s=4/3*Math.tan(Math.PI/8);this._setDefaultAppearance({xref:a,extra:`${this.borderStyle.width} w`,strokeColor:e,fillColor:i,strokeAlpha:r,fillAlpha:n,pointsCallback:(e,t)=>{const a=t[0]+this.borderStyle.width/2,r=t[1]-this.borderStyle.width/2,n=t[6]-this.borderStyle.width/2,o=t[7]+this.borderStyle.width/2,c=a+(n-a)/2,l=r+(o-r)/2,h=(n-a)/2*s,u=(o-r)/2*s;e.push(`${c} ${o} m`,`${c+h} ${o} ${n} ${l+u} ${n} ${l} c`,`${n} ${l-u} ${c+h} ${r} ${c} ${r} c`,`${c-h} ${r} ${a} ${l-u} ${a} ${l} c`,`${a} ${l+u} ${c-h} ${o} ${c} ${o} c`,"h");i?e.push("B"):e.push("S");return[t[0],t[7],t[2],t[3]]}})}}}class PolylineAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=E;this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!1;this.data.vertices=null;if(!(this instanceof PolygonAnnotation)){this.setLineEndings(t.getArray("LE"));this.data.lineEndings=this.lineEndings}const r=t.getArray("Vertices");if(!isNumberArray(r,null))return;const i=this.data.vertices=Float32Array.from(r);if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA");let n,s=getRgbColor(t.getArray("IC"),null);s&&(s=getPdfColorArray(s));n=s?this.color?s.every(((t,a)=>t===e[a]))?"f":"B":"f":"S";const o=this.borderStyle.width||1,c=2*o,l=[1/0,1/0,-1/0,-1/0];for(let e=0,t=i.length;e<t;e+=2)Util.rectBoundingBox(i[e]-c,i[e+1]-c,i[e]+c,i[e+1]+c,l);Util.intersect(this.rectangle,l)||(this.rectangle=l);this._setDefaultAppearance({xref:a,extra:`${o} w`,strokeColor:e,strokeAlpha:r,fillColor:s,fillAlpha:s?r:null,pointsCallback:(e,t)=>{for(let t=0,a=i.length;t<a;t+=2)e.push(`${i[t]} ${i[t+1]} ${0===t?"m":"l"}`);e.push(n);return[t[0],t[7],t[2],t[3]]}})}}}class PolygonAnnotation extends PolylineAnnotation{constructor(e){super(e);this.data.annotationType=N}}class CaretAnnotation extends MarkupAnnotation{constructor(e){super(e);this.data.annotationType=q}}class InkAnnotation extends MarkupAnnotation{constructor(e){super(e);this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!1;const{dict:t,xref:a}=e;this.data.annotationType=H;this.data.inkLists=[];this.data.isEditable=!this.data.noHTML;this.data.noHTML=!1;this.data.opacity=t.get("CA")||1;const r=t.getArray("InkList");if(Array.isArray(r)){for(let e=0,t=r.length;e<t;++e){if(!Array.isArray(r[e]))continue;const t=new Float32Array(r[e].length);this.data.inkLists.push(t);for(let i=0,n=r[e].length;i<n;i+=2){const n=a.fetchIfRef(r[e][i]),s=a.fetchIfRef(r[e][i+1]);if("number"==typeof n&&"number"==typeof s){t[i]=n;t[i+1]=s}}}if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA"),i=this.borderStyle.width||1,n=2*i,s=[1/0,1/0,-1/0,-1/0];for(const e of this.data.inkLists)for(let t=0,a=e.length;t<a;t+=2)Util.rectBoundingBox(e[t]-n,e[t+1]-n,e[t]+n,e[t+1]+n,s);Util.intersect(this.rectangle,s)||(this.rectangle=s);this._setDefaultAppearance({xref:a,extra:`${i} w`,strokeColor:e,strokeAlpha:r,pointsCallback:(e,t)=>{for(const t of this.data.inkLists){for(let a=0,r=t.length;a<r;a+=2)e.push(`${t[a]} ${t[a+1]} ${0===a?"m":"l"}`);e.push("S")}return[t[0],t[7],t[2],t[3]]}})}}}static createNewDict(e,t,{apRef:a,ap:r}){const{oldAnnotation:i,color:n,date:s,opacity:o,paths:c,outlines:l,rect:h,rotation:u,thickness:d,user:f}=e,g=i||new Dict(t);g.setIfNotExists("Type",Name.get("Annot"));g.setIfNotExists("Subtype",Name.get("Ink"));g.set(i?"M":"CreationDate",`D:${getModificationDate(s)}`);g.setIfArray("Rect",h);g.setIfArray("InkList",l?.points||c?.points);g.setIfNotExists("F",4);g.setIfNumber("Rotate",u);g.setIfDefined("T",stringToAsciiOrUTF16BE(f));l&&g.setIfName("IT","InkHighlight");if(d>0){const e=new Dict(t);g.set("BS",e);e.set("W",d)}g.setIfArray("C",getPdfColorArray(n));g.setIfNumber("CA",o);if(r||a){const e=new Dict(t);g.set("AP",e);e.set("N",a||r)}return g}static async createNewAppearanceStream(e,t,a){if(e.outlines)return this.createNewAppearanceStreamForHighlight(e,t,a);const{color:r,rect:i,paths:n,thickness:s,opacity:o}=e;if(!r)return null;const c=[`${s} w 1 J 1 j`,`${getPdfColor(r,!1)}`];1!==o&&c.push("/R0 gs");for(const e of n.lines){c.push(`${numberToString(e[4])} ${numberToString(e[5])} m`);for(let t=6,a=e.length;t<a;t+=6)if(isNaN(e[t]))c.push(`${numberToString(e[t+4])} ${numberToString(e[t+5])} l`);else{const[a,r,i,n,s,o]=e.slice(t,t+6);c.push([a,r,i,n,s,o].map(numberToString).join(" ")+" c")}6===e.length&&c.push(`${numberToString(e[4])} ${numberToString(e[5])} l`)}c.push("S");const l=c.join("\\n"),h=new Dict(t);h.set("FormType",1);h.setIfName("Subtype","Form");h.setIfName("Type","XObject");h.set("BBox",i);h.set("Length",l.length);if(1!==o){const e=new Dict(t),a=new Dict(t),r=new Dict(t);r.set("CA",o);r.setIfName("Type","ExtGState");a.set("R0",r);e.set("ExtGState",a);h.set("Resources",e)}const u=new StringStream(l);u.dict=h;return u}static async createNewAppearanceStreamForHighlight(e,t,a){const{color:r,rect:i,outlines:{outline:n},opacity:s}=e;if(!r)return null;const o=[`${getPdfColor(r,!0)}`,"/R0 gs"];o.push(`${numberToString(n[4])} ${numberToString(n[5])} m`);for(let e=6,t=n.length;e<t;e+=6)if(isNaN(n[e]))o.push(`${numberToString(n[e+4])} ${numberToString(n[e+5])} l`);else{const[t,a,r,i,s,c]=n.slice(e,e+6);o.push([t,a,r,i,s,c].map(numberToString).join(" ")+" c")}o.push("h f");const c=o.join("\\n"),l=new Dict(t);l.set("FormType",1);l.setIfName("Subtype","Form");l.setIfName("Type","XObject");l.set("BBox",i);l.set("Length",c.length);const h=new Dict(t),u=new Dict(t);h.set("ExtGState",u);l.set("Resources",h);const d=new Dict(t);u.set("R0",d);d.setIfName("BM","Multiply");if(1!==s){d.set("ca",s);d.setIfName("Type","ExtGState")}const f=new StringStream(c);f.dict=l;return f}}class HighlightAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=L;this.data.isEditable=!this.data.noHTML;this.data.noHTML=!1;this.data.opacity=t.get("CA")||1;if(this.data.quadPoints=getQuadPoints(t,null)){const e=this.appearance?.dict.get("Resources");if(!this.appearance||!e?.has("ExtGState")){this.appearance&&warn("HighlightAnnotation - ignoring built-in appearance stream.");const e=getPdfColorArray(this.color,[1,1,0]),r=t.get("CA");this._setDefaultAppearance({xref:a,fillColor:e,blendMode:"Multiply",fillAlpha:r,pointsCallback:(e,t)=>{e.push(`${t[0]} ${t[1]} m`,`${t[2]} ${t[3]} l`,`${t[6]} ${t[7]} l`,`${t[4]} ${t[5]} l`,"f");return[t[0],t[7],t[2],t[3]]}})}}else this.data.popupRef=null}get overlaysTextContent(){return!0}static createNewDict(e,t,{apRef:a,ap:r}){const{color:i,date:n,oldAnnotation:s,opacity:o,rect:c,rotation:l,user:h,quadPoints:u}=e,d=s||new Dict(t);d.setIfNotExists("Type",Name.get("Annot"));d.setIfNotExists("Subtype",Name.get("Highlight"));d.set(s?"M":"CreationDate",`D:${getModificationDate(n)}`);d.setIfArray("Rect",c);d.setIfNotExists("F",4);d.setIfNotExists("Border",[0,0,0]);d.setIfNumber("Rotate",l);d.setIfArray("QuadPoints",u);d.setIfArray("C",getPdfColorArray(i));d.setIfNumber("CA",o);d.setIfDefined("T",stringToAsciiOrUTF16BE(h));if(a||r){const e=new Dict(t);d.set("AP",e);e.set("N",a||r)}return d}static async createNewAppearanceStream(e,t,a){const{color:r,rect:i,outlines:n,opacity:s}=e;if(!r)return null;const o=[`${getPdfColor(r,!0)}`,"/R0 gs"],c=[];for(const e of n){c.length=0;c.push(`${numberToString(e[0])} ${numberToString(e[1])} m`);for(let t=2,a=e.length;t<a;t+=2)c.push(`${numberToString(e[t])} ${numberToString(e[t+1])} l`);c.push("h");o.push(c.join("\\n"))}o.push("f*");const l=o.join("\\n"),h=new Dict(t);h.set("FormType",1);h.setIfName("Subtype","Form");h.setIfName("Type","XObject");h.set("BBox",i);h.set("Length",l.length);const u=new Dict(t),d=new Dict(t);u.set("ExtGState",d);h.set("Resources",u);const f=new Dict(t);d.set("R0",f);f.setIfName("BM","Multiply");if(1!==s){f.set("ca",s);f.setIfName("Type","ExtGState")}const g=new StringStream(l);g.dict=h;return g}}class UnderlineAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=j;if(this.data.quadPoints=getQuadPoints(t,null)){if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA");this._setDefaultAppearance({xref:a,extra:"[] 0 d 0.571 w",strokeColor:e,strokeAlpha:r,pointsCallback:(e,t)=>{e.push(`${t[4]} ${t[5]+1.3} m`,`${t[6]} ${t[7]+1.3} l`,"S");return[t[0],t[7],t[2],t[3]]}})}}else this.data.popupRef=null}get overlaysTextContent(){return!0}}class SquigglyAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=_;if(this.data.quadPoints=getQuadPoints(t,null)){if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA");this._setDefaultAppearance({xref:a,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:r,pointsCallback:(e,t)=>{const a=(t[1]-t[5])/6;let r=a,i=t[4];const n=t[5],s=t[6];e.push(`${i} ${n+r} m`);do{i+=2;r=0===r?a:0;e.push(`${i} ${n+r} l`)}while(i<s);e.push("S");return[t[4],n-2*a,s,n+2*a]}})}}else this.data.popupRef=null}get overlaysTextContent(){return!0}}class StrikeOutAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e;this.data.annotationType=U;if(this.data.quadPoints=getQuadPoints(t,null)){if(!this.appearance){const e=getPdfColorArray(this.color,[0,0,0]),r=t.get("CA");this._setDefaultAppearance({xref:a,extra:"[] 0 d 1 w",strokeColor:e,strokeAlpha:r,pointsCallback:(e,t)=>{e.push((t[0]+t[4])/2+" "+(t[1]+t[5])/2+" m",(t[2]+t[6])/2+" "+(t[3]+t[7])/2+" l","S");return[t[0],t[7],t[2],t[3]]}})}}else this.data.popupRef=null}get overlaysTextContent(){return!0}}class StampAnnotation extends MarkupAnnotation{#pe=null;constructor(e){super(e);this.data.annotationType=X;this.data.hasOwnCanvas=this.data.noRotate;this.data.isEditable=!this.data.noHTML;this.data.noHTML=!1}mustBeViewedWhenEditing(e,t=null){if(e){if(!this.data.isEditable)return!0;this.#pe??=this.data.hasOwnCanvas;this.data.hasOwnCanvas=!0;return!0}if(null!==this.#pe){this.data.hasOwnCanvas=this.#pe;this.#pe=null}return!t?.has(this.data.id)}static async createImage(e,t){const{width:a,height:r}=e,i=new OffscreenCanvas(a,r),n=i.getContext("2d",{alpha:!0});n.drawImage(e,0,0);const s=n.getImageData(0,0,a,r).data,o=new Uint32Array(s.buffer),c=o.some(FeatureTest.isLittleEndian?e=>e>>>24!=255:e=>!!(255&~e));if(c){n.fillStyle="white";n.fillRect(0,0,a,r);n.drawImage(e,0,0)}const l=i.convertToBlob({type:"image/jpeg",quality:1}).then((e=>e.arrayBuffer())),h=Name.get("XObject"),u=Name.get("Image"),d=new Dict(t);d.set("Type",h);d.set("Subtype",u);d.set("BitsPerComponent",8);d.setIfName("ColorSpace","DeviceRGB");d.setIfName("Filter","DCTDecode");d.set("BBox",[0,0,a,r]);d.set("Width",a);d.set("Height",r);let f=null;if(c){const e=new Uint8Array(o.length);if(FeatureTest.isLittleEndian)for(let t=0,a=o.length;t<a;t++)e[t]=o[t]>>>24;else for(let t=0,a=o.length;t<a;t++)e[t]=255&o[t];const i=new Dict(t);i.set("Type",h);i.set("Subtype",u);i.set("BitsPerComponent",8);i.setIfName("ColorSpace","DeviceGray");i.set("Width",a);i.set("Height",r);f=new Stream(e,0,0,i)}return{imageStream:new Stream(await l,0,0,d),smaskStream:f,width:a,height:r}}static createNewDict(e,t,{apRef:a,ap:r}){const{date:i,oldAnnotation:n,rect:s,rotation:o,user:c}=e,l=n||new Dict(t);l.setIfNotExists("Type",Name.get("Annot"));l.setIfNotExists("Subtype",Name.get("Stamp"));l.set(n?"M":"CreationDate",`D:${getModificationDate(i)}`);l.setIfArray("Rect",s);l.setIfNotExists("F",4);l.setIfNotExists("Border",[0,0,0]);l.setIfNumber("Rotate",o);l.setIfDefined("T",stringToAsciiOrUTF16BE(c));if(a||r){const e=new Dict(t);l.set("AP",e);e.set("N",a||r)}return l}static async#me(e,t){const{areContours:a,color:r,rect:i,lines:n,thickness:s}=e;if(!r)return null;const o=[`${s} w 1 J 1 j`,`${getPdfColor(r,a)}`];for(const e of n){o.push(`${numberToString(e[4])} ${numberToString(e[5])} m`);for(let t=6,a=e.length;t<a;t+=6)if(isNaN(e[t]))o.push(`${numberToString(e[t+4])} ${numberToString(e[t+5])} l`);else{const[a,r,i,n,s,c]=e.slice(t,t+6);o.push([a,r,i,n,s,c].map(numberToString).join(" ")+" c")}6===e.length&&o.push(`${numberToString(e[4])} ${numberToString(e[5])} l`)}o.push(a?"F":"S");const c=o.join("\\n"),l=new Dict(t);l.set("FormType",1);l.setIfName("Subtype","Form");l.setIfName("Type","XObject");l.set("BBox",i);l.set("Length",c.length);const h=new StringStream(c);h.dict=l;return h}static async createNewAppearanceStream(e,t,a){if(e.oldAnnotation)return null;if(e.isSignature)return this.#me(e,t);const{rotation:r}=e,{imageRef:i,width:n,height:s}=a.image,o=new Dict(t),c=new Dict(t);o.set("XObject",c);c.set("Im0",i);const l=`q ${n} 0 0 ${s} 0 0 cm /Im0 Do Q`,h=new Dict(t);h.set("FormType",1);h.setIfName("Subtype","Form");h.setIfName("Type","XObject");h.set("BBox",[0,0,n,s]);h.set("Resources",o);if(r){const e=getRotationMatrix(r,n,s);h.set("Matrix",e)}const u=new StringStream(l);u.dict=h;return u}}class FileAttachmentAnnotation extends MarkupAnnotation{constructor(e){super(e);const{dict:t,xref:a}=e,r=new FileSpec(t.get("FS"),a);this.data.annotationType=z;this.data.hasOwnCanvas=this.data.noRotate;this.data.noHTML=!1;this.data.file=r.serializable;const i=t.get("Name");this.data.name=i instanceof Name?stringToPDFString(i.name):"PushPin";const n=t.get("ca");this.data.fillAlpha="number"==typeof n&&n>=0&&n<=1?n:null}}const pc={get r(){return shadow(this,"r",new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]))},get k(){return shadow(this,"k",new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]))}};function calculateMD5(e,t,a){let r=1732584193,i=-271733879,n=-1732584194,s=271733878;const o=a+72&-64,c=new Uint8Array(o);let l,h;for(l=0;l<a;++l)c[l]=e[t++];c[l++]=128;const u=o-8;l<u&&(l=u);c[l++]=a<<3&255;c[l++]=a>>5&255;c[l++]=a>>13&255;c[l++]=a>>21&255;c[l++]=a>>>29&255;l+=3;const d=new Int32Array(16),{k:f,r:g}=pc;for(l=0;l<o;){for(h=0;h<16;++h,l+=4)d[h]=c[l]|c[l+1]<<8|c[l+2]<<16|c[l+3]<<24;let e,t,a=r,o=i,u=n,p=s;for(h=0;h<64;++h){if(h<16){e=o&u|~o&p;t=h}else if(h<32){e=p&o|~p&u;t=5*h+1&15}else if(h<48){e=o^u^p;t=3*h+5&15}else{e=u^(o|~p);t=7*h&15}const r=p,i=a+e+f[h]+d[t]|0,n=g[h];p=u;u=o;o=o+(i<<n|i>>>32-n)|0;a=r}r=r+a|0;i=i+o|0;n=n+u|0;s=s+p|0}return new Uint8Array([255&r,r>>8&255,r>>16&255,r>>>24&255,255&i,i>>8&255,i>>16&255,i>>>24&255,255&n,n>>8&255,n>>16&255,n>>>24&255,255&s,s>>8&255,s>>16&255,s>>>24&255])}function decodeString(e){try{return stringToUTF8String(e)}catch(t){warn(`UTF-8 decoding failed: "${t}".`);return e}}class DatasetXMLParser extends SimpleXMLParser{constructor(e){super(e);this.node=null}onEndElement(e){const t=super.onEndElement(e);if(t&&"xfa:datasets"===e){this.node=t;throw new Error("Aborting DatasetXMLParser.")}}}class DatasetReader{constructor(e){if(e.datasets)this.node=new SimpleXMLParser({hasAttributes:!0}).parseFromString(e.datasets).documentElement;else{const t=new DatasetXMLParser({hasAttributes:!0});try{t.parseFromString(e["xdp:xdp"])}catch{}this.node=t.node}}getValue(e){if(!this.node||!e)return"";const t=this.node.searchNode(parseXFAPath(e),0);if(!t)return"";const a=t.firstChild;return"value"===a?.nodeName?t.children.map((e=>decodeString(e.textContent))):decodeString(t.textContent)}}class SingleIntersector{#be;#ye=1/0;#we=1/0;#xe=-1/0;#Se=-1/0;#Ae=null;#ke=[];#Ce=[];#ve=-1;#Fe=!1;constructor(e){this.#be=e;const t=e.data.quadPoints;if(t){for(let e=0,a=t.length;e<a;e+=8){this.#ye=Math.min(this.#ye,t[e]);this.#xe=Math.max(this.#xe,t[e+2]);this.#we=Math.min(this.#we,t[e+5]);this.#Se=Math.max(this.#Se,t[e+1])}t.length>8&&(this.#Ae=t)}else[this.#ye,this.#we,this.#xe,this.#Se]=e.data.rect}overlaps(e){return!(this.#ye>=e.#xe||this.#xe<=e.#ye||this.#we>=e.#Se||this.#Se<=e.#we)}#Ie(e,t){if(this.#ye>=e||this.#xe<=e||this.#we>=t||this.#Se<=t)return!1;const a=this.#Ae;if(!a)return!0;if(this.#ve>=0){const r=this.#ve;if(!(a[r]>=e||a[r+2]<=e||a[r+5]>=t||a[r+1]<=t))return!0;this.#ve=-1}for(let r=0,i=a.length;r<i;r+=8)if(!(a[r]>=e||a[r+2]<=e||a[r+5]>=t||a[r+1]<=t)){this.#ve=r;return!0}return!1}addGlyph(e,t,a){if(!this.#Ie(e,t)){this.disableExtraChars();return!1}if(this.#Ce.length>0){this.#ke.push(this.#Ce.join(""));this.#Ce.length=0}this.#ke.push(a);this.#Fe=!0;return!0}addExtraChar(e){this.#Fe&&this.#Ce.push(e)}disableExtraChars(){if(this.#Fe){this.#Fe=!1;this.#Ce.length=0}}setText(){this.#be.data.overlaidText=this.#ke.join("")}}class Intersector{#Te=new Map;constructor(e){for(const t of e){if(!t.data.quadPoints&&!t.data.rect)continue;const e=new SingleIntersector(t);for(const[t,a]of this.#Te)t.overlaps(e)&&(a?a.add(e):this.#Te.set(t,new Set([e])));this.#Te.set(e,null)}}addGlyph(e,t,a,r){const i=e[4]+t/2,n=e[5]+a/2;let s;for(const[e,t]of this.#Te)s?s.has(e)?e.addGlyph(i,n,r):e.disableExtraChars():e.addGlyph(i,n,r)&&(s=t)}addExtraChar(e){for(const t of this.#Te.keys())t.addExtraChar(e)}setText(){for(const e of this.#Te.keys())e.setText()}}class Word64{constructor(e,t){this.high=0|e;this.low=0|t}and(e){this.high&=e.high;this.low&=e.low}xor(e){this.high^=e.high;this.low^=e.low}shiftRight(e){if(e>=32){this.low=this.high>>>e-32|0;this.high=0}else{this.low=this.low>>>e|this.high<<32-e;this.high=this.high>>>e|0}}rotateRight(e){let t,a;if(32&e){a=this.low;t=this.high}else{t=this.low;a=this.high}e&=31;this.low=t>>>e|a<<32-e;this.high=a>>>e|t<<32-e}not(){this.high=~this.high;this.low=~this.low}add(e){const t=(this.low>>>0)+(e.low>>>0);let a=(this.high>>>0)+(e.high>>>0);t>4294967295&&(a+=1);this.low=0|t;this.high=0|a}copyTo(e,t){e[t]=this.high>>>24&255;e[t+1]=this.high>>16&255;e[t+2]=this.high>>8&255;e[t+3]=255&this.high;e[t+4]=this.low>>>24&255;e[t+5]=this.low>>16&255;e[t+6]=this.low>>8&255;e[t+7]=255&this.low}assign(e){this.high=e.high;this.low=e.low}}const mc={get k(){return shadow(this,"k",[new Word64(1116352408,3609767458),new Word64(1899447441,602891725),new Word64(3049323471,3964484399),new Word64(3921009573,2173295548),new Word64(961987163,4081628472),new Word64(1508970993,3053834265),new Word64(2453635748,2937671579),new Word64(2870763221,3664609560),new Word64(3624381080,2734883394),new Word64(310598401,1164996542),new Word64(607225278,1323610764),new Word64(1426881987,3590304994),new Word64(1925078388,4068182383),new Word64(2162078206,991336113),new Word64(2614888103,633803317),new Word64(3248222580,3479774868),new Word64(3835390401,2666613458),new Word64(4022224774,944711139),new Word64(264347078,2341262773),new Word64(604807628,2007800933),new Word64(770255983,1495990901),new Word64(1249150122,1856431235),new Word64(1555081692,3175218132),new Word64(1996064986,2198950837),new Word64(2554220882,3999719339),new Word64(2821834349,766784016),new Word64(2952996808,2566594879),new Word64(3210313671,3203337956),new Word64(3336571891,1034457026),new Word64(3584528711,2466948901),new Word64(113926993,3758326383),new Word64(338241895,168717936),new Word64(666307205,1188179964),new Word64(773529912,1546045734),new Word64(1294757372,1522805485),new Word64(1396182291,2643833823),new Word64(1695183700,2343527390),new Word64(1986661051,1014477480),new Word64(2177026350,1206759142),new Word64(2456956037,344077627),new Word64(2730485921,1290863460),new Word64(2820302411,3158454273),new Word64(3259730800,3505952657),new Word64(3345764771,106217008),new Word64(3516065817,3606008344),new Word64(3600352804,1432725776),new Word64(4094571909,1467031594),new Word64(275423344,851169720),new Word64(430227734,3100823752),new Word64(506948616,1363258195),new Word64(659060556,3750685593),new Word64(883997877,3785050280),new Word64(958139571,3318307427),new Word64(1322822218,3812723403),new Word64(1537002063,2003034995),new Word64(1747873779,3602036899),new Word64(1955562222,1575990012),new Word64(2024104815,1125592928),new Word64(2227730452,2716904306),new Word64(2361852424,442776044),new Word64(2428436474,593698344),new Word64(2756734187,3733110249),new Word64(3204031479,2999351573),new Word64(3329325298,3815920427),new Word64(3391569614,3928383900),new Word64(3515267271,566280711),new Word64(3940187606,3454069534),new Word64(4118630271,4000239992),new Word64(116418474,1914138554),new Word64(174292421,2731055270),new Word64(289380356,3203993006),new Word64(460393269,320620315),new Word64(685471733,587496836),new Word64(852142971,1086792851),new Word64(1017036298,365543100),new Word64(1126000580,2618297676),new Word64(1288033470,3409855158),new Word64(1501505948,4234509866),new Word64(1607167915,987167468),new Word64(1816402316,1246189591)])}};function ch(e,t,a,r,i){e.assign(t);e.and(a);i.assign(t);i.not();i.and(r);e.xor(i)}function maj(e,t,a,r,i){e.assign(t);e.and(a);i.assign(t);i.and(r);e.xor(i);i.assign(a);i.and(r);e.xor(i)}function sigma(e,t,a){e.assign(t);e.rotateRight(28);a.assign(t);a.rotateRight(34);e.xor(a);a.assign(t);a.rotateRight(39);e.xor(a)}function sigmaPrime(e,t,a){e.assign(t);e.rotateRight(14);a.assign(t);a.rotateRight(18);e.xor(a);a.assign(t);a.rotateRight(41);e.xor(a)}function littleSigma(e,t,a){e.assign(t);e.rotateRight(1);a.assign(t);a.rotateRight(8);e.xor(a);a.assign(t);a.shiftRight(7);e.xor(a)}function littleSigmaPrime(e,t,a){e.assign(t);e.rotateRight(19);a.assign(t);a.rotateRight(61);e.xor(a);a.assign(t);a.shiftRight(6);e.xor(a)}function calculateSHA512(e,t,a,r=!1){let i,n,s,o,c,l,h,u;if(r){i=new Word64(3418070365,3238371032);n=new Word64(1654270250,914150663);s=new Word64(2438529370,812702999);o=new Word64(355462360,4144912697);c=new Word64(1731405415,4290775857);l=new Word64(2394180231,1750603025);h=new Word64(3675008525,1694076839);u=new Word64(1203062813,3204075428)}else{i=new Word64(1779033703,4089235720);n=new Word64(3144134277,2227873595);s=new Word64(1013904242,4271175723);o=new Word64(2773480762,1595750129);c=new Word64(1359893119,2917565137);l=new Word64(2600822924,725511199);h=new Word64(528734635,4215389547);u=new Word64(1541459225,327033209)}const d=128*Math.ceil((a+17)/128),f=new Uint8Array(d);let g,p;for(g=0;g<a;++g)f[g]=e[t++];f[g++]=128;const m=d-16;g<m&&(g=m);g+=11;f[g++]=a>>>29&255;f[g++]=a>>21&255;f[g++]=a>>13&255;f[g++]=a>>5&255;f[g++]=a<<3&255;const b=new Array(80);for(g=0;g<80;g++)b[g]=new Word64(0,0);const{k:y}=mc;let w=new Word64(0,0),x=new Word64(0,0),S=new Word64(0,0),k=new Word64(0,0),C=new Word64(0,0),v=new Word64(0,0),F=new Word64(0,0),T=new Word64(0,0);const O=new Word64(0,0),M=new Word64(0,0),D=new Word64(0,0),R=new Word64(0,0);let N,E;for(g=0;g<d;){for(p=0;p<16;++p){b[p].high=f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3];b[p].low=f[g+4]<<24|f[g+5]<<16|f[g+6]<<8|f[g+7];g+=8}for(p=16;p<80;++p){N=b[p];littleSigmaPrime(N,b[p-2],R);N.add(b[p-7]);littleSigma(D,b[p-15],R);N.add(D);N.add(b[p-16])}w.assign(i);x.assign(n);S.assign(s);k.assign(o);C.assign(c);v.assign(l);F.assign(h);T.assign(u);for(p=0;p<80;++p){O.assign(T);sigmaPrime(D,C,R);O.add(D);ch(D,C,v,F,R);O.add(D);O.add(y[p]);O.add(b[p]);sigma(M,w,R);maj(D,w,x,S,R);M.add(D);N=T;T=F;F=v;v=C;k.add(O);C=k;k=S;S=x;x=w;N.assign(O);N.add(M);w=N}i.add(w);n.add(x);s.add(S);o.add(k);c.add(C);l.add(v);h.add(F);u.add(T)}if(r){E=new Uint8Array(48);i.copyTo(E,0);n.copyTo(E,8);s.copyTo(E,16);o.copyTo(E,24);c.copyTo(E,32);l.copyTo(E,40)}else{E=new Uint8Array(64);i.copyTo(E,0);n.copyTo(E,8);s.copyTo(E,16);o.copyTo(E,24);c.copyTo(E,32);l.copyTo(E,40);h.copyTo(E,48);u.copyTo(E,56)}return E}const bc={get k(){return shadow(this,"k",[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])}};function rotr(e,t){return e>>>t|e<<32-t}function calculate_sha256_ch(e,t,a){return e&t^~e&a}function calculate_sha256_maj(e,t,a){return e&t^e&a^t&a}function calculate_sha256_sigma(e){return rotr(e,2)^rotr(e,13)^rotr(e,22)}function calculate_sha256_sigmaPrime(e){return rotr(e,6)^rotr(e,11)^rotr(e,25)}function calculate_sha256_littleSigma(e){return rotr(e,7)^rotr(e,18)^e>>>3}function calculateSHA256(e,t,a){let r=1779033703,i=3144134277,n=1013904242,s=2773480762,o=1359893119,c=2600822924,l=528734635,h=1541459225;const u=64*Math.ceil((a+9)/64),d=new Uint8Array(u);let f,g;for(f=0;f<a;++f)d[f]=e[t++];d[f++]=128;const p=u-8;f<p&&(f=p);f+=3;d[f++]=a>>>29&255;d[f++]=a>>21&255;d[f++]=a>>13&255;d[f++]=a>>5&255;d[f++]=a<<3&255;const m=new Uint32Array(64),{k:b}=bc;for(f=0;f<u;){for(g=0;g<16;++g){m[g]=d[f]<<24|d[f+1]<<16|d[f+2]<<8|d[f+3];f+=4}for(g=16;g<64;++g)m[g]=(rotr(y=m[g-2],17)^rotr(y,19)^y>>>10)+m[g-7]+calculate_sha256_littleSigma(m[g-15])+m[g-16]|0;let e,t,a=r,u=i,p=n,w=s,x=o,S=c,k=l,C=h;for(g=0;g<64;++g){e=C+calculate_sha256_sigmaPrime(x)+calculate_sha256_ch(x,S,k)+b[g]+m[g];t=calculate_sha256_sigma(a)+calculate_sha256_maj(a,u,p);C=k;k=S;S=x;x=w+e|0;w=p;p=u;u=a;a=e+t|0}r=r+a|0;i=i+u|0;n=n+p|0;s=s+w|0;o=o+x|0;c=c+S|0;l=l+k|0;h=h+C|0}var y;return new Uint8Array([r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o,c>>24&255,c>>16&255,c>>8&255,255&c,l>>24&255,l>>16&255,l>>8&255,255&l,h>>24&255,h>>16&255,h>>8&255,255&h])}class DecryptStream extends DecodeStream{constructor(e,t,a){super(t);this.str=e;this.dict=e.dict;this.decrypt=a;this.nextChunk=null;this.initialized=!1}readBlock(){let e;if(this.initialized)e=this.nextChunk;else{e=this.str.getBytes(512);this.initialized=!0}if(!e?.length){this.eof=!0;return}this.nextChunk=this.str.getBytes(512);const t=this.nextChunk?.length>0;e=(0,this.decrypt)(e,!t);const a=this.bufferLength,r=a+e.length;this.ensureBuffer(r).set(e,a);this.bufferLength=r}}class ARCFourCipher{constructor(e){this.a=0;this.b=0;const t=new Uint8Array(256),a=e.length;for(let e=0;e<256;++e)t[e]=e;for(let r=0,i=0;r<256;++r){const n=t[r];i=i+n+e[r%a]&255;t[r]=t[i];t[i]=n}this.s=t}encryptBlock(e){let t=this.a,a=this.b;const r=this.s,i=e.length,n=new Uint8Array(i);for(let s=0;s<i;++s){t=t+1&255;const i=r[t];a=a+i&255;const o=r[a];r[t]=o;r[a]=i;n[s]=e[s]^r[i+o&255]}this.a=t;this.b=a;return n}decryptBlock(e){return this.encryptBlock(e)}encrypt(e){return this.encryptBlock(e)}}class NullCipher{decryptBlock(e){return e}encrypt(e){return e}}class AESBaseCipher{_s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]);_inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]);_mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]);_mixCol=new Uint8Array(256).map(((e,t)=>t<128?t<<1:t<<1^27));constructor(){this.buffer=new Uint8Array(16);this.bufferPosition=0}_expandKey(e){unreachable("Cannot call `_expandKey` on the base class")}_decrypt(e,t){let a,r,i;const n=new Uint8Array(16);n.set(e);for(let e=0,a=this._keySize;e<16;++e,++a)n[e]^=t[a];for(let e=this._cyclesOfRepetition-1;e>=1;--e){a=n[13];n[13]=n[9];n[9]=n[5];n[5]=n[1];n[1]=a;a=n[14];r=n[10];n[14]=n[6];n[10]=n[2];n[6]=a;n[2]=r;a=n[15];r=n[11];i=n[7];n[15]=n[3];n[11]=a;n[7]=r;n[3]=i;for(let e=0;e<16;++e)n[e]=this._inv_s[n[e]];for(let a=0,r=16*e;a<16;++a,++r)n[a]^=t[r];for(let e=0;e<16;e+=4){const t=this._mix[n[e]],r=this._mix[n[e+1]],i=this._mix[n[e+2]],s=this._mix[n[e+3]];a=t^r>>>8^r<<24^i>>>16^i<<16^s>>>24^s<<8;n[e]=a>>>24&255;n[e+1]=a>>16&255;n[e+2]=a>>8&255;n[e+3]=255&a}}a=n[13];n[13]=n[9];n[9]=n[5];n[5]=n[1];n[1]=a;a=n[14];r=n[10];n[14]=n[6];n[10]=n[2];n[6]=a;n[2]=r;a=n[15];r=n[11];i=n[7];n[15]=n[3];n[11]=a;n[7]=r;n[3]=i;for(let e=0;e<16;++e){n[e]=this._inv_s[n[e]];n[e]^=t[e]}return n}_encrypt(e,t){const a=this._s;let r,i,n;const s=new Uint8Array(16);s.set(e);for(let e=0;e<16;++e)s[e]^=t[e];for(let e=1;e<this._cyclesOfRepetition;e++){for(let e=0;e<16;++e)s[e]=a[s[e]];n=s[1];s[1]=s[5];s[5]=s[9];s[9]=s[13];s[13]=n;n=s[2];i=s[6];s[2]=s[10];s[6]=s[14];s[10]=n;s[14]=i;n=s[3];i=s[7];r=s[11];s[3]=s[15];s[7]=n;s[11]=i;s[15]=r;for(let e=0;e<16;e+=4){const t=s[e],a=s[e+1],i=s[e+2],n=s[e+3];r=t^a^i^n;s[e]^=r^this._mixCol[t^a];s[e+1]^=r^this._mixCol[a^i];s[e+2]^=r^this._mixCol[i^n];s[e+3]^=r^this._mixCol[n^t]}for(let a=0,r=16*e;a<16;++a,++r)s[a]^=t[r]}for(let e=0;e<16;++e)s[e]=a[s[e]];n=s[1];s[1]=s[5];s[5]=s[9];s[9]=s[13];s[13]=n;n=s[2];i=s[6];s[2]=s[10];s[6]=s[14];s[10]=n;s[14]=i;n=s[3];i=s[7];r=s[11];s[3]=s[15];s[7]=n;s[11]=i;s[15]=r;for(let e=0,a=this._keySize;e<16;++e,++a)s[e]^=t[a];return s}_decryptBlock2(e,t){const a=e.length;let r=this.buffer,i=this.bufferPosition;const n=[];let s=this.iv;for(let t=0;t<a;++t){r[i]=e[t];++i;if(i<16)continue;const a=this._decrypt(r,this._key);for(let e=0;e<16;++e)a[e]^=s[e];s=r;n.push(a);r=new Uint8Array(16);i=0}this.buffer=r;this.bufferLength=i;this.iv=s;if(0===n.length)return new Uint8Array(0);let o=16*n.length;if(t){const e=n.at(-1);let t=e[15];if(t<=16){for(let a=15,r=16-t;a>=r;--a)if(e[a]!==t){t=0;break}o-=t;n[n.length-1]=e.subarray(0,16-t)}}const c=new Uint8Array(o);for(let e=0,t=0,a=n.length;e<a;++e,t+=16)c.set(n[e],t);return c}decryptBlock(e,t,a=null){const r=e.length,i=this.buffer;let n=this.bufferPosition;if(a)this.iv=a;else{for(let t=0;n<16&&t<r;++t,++n)i[n]=e[t];if(n<16){this.bufferLength=n;return new Uint8Array(0)}this.iv=i;e=e.subarray(16)}this.buffer=new Uint8Array(16);this.bufferLength=0;this.decryptBlock=this._decryptBlock2;return this.decryptBlock(e,t)}encrypt(e,t){const a=e.length;let r=this.buffer,i=this.bufferPosition;const n=[];t||=new Uint8Array(16);for(let s=0;s<a;++s){r[i]=e[s];++i;if(i<16)continue;for(let e=0;e<16;++e)r[e]^=t[e];const a=this._encrypt(r,this._key);t=a;n.push(a);r=new Uint8Array(16);i=0}this.buffer=r;this.bufferLength=i;this.iv=t;if(0===n.length)return new Uint8Array(0);const s=16*n.length,o=new Uint8Array(s);for(let e=0,t=0,a=n.length;e<a;++e,t+=16)o.set(n[e],t);return o}}class AES128Cipher extends AESBaseCipher{_rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]);constructor(e){super();this._cyclesOfRepetition=10;this._keySize=160;this._key=this._expandKey(e)}_expandKey(e){const t=this._s,a=this._rcon,r=new Uint8Array(176);r.set(e);for(let e=16,i=1;e<176;++i){let n=r[e-3],s=r[e-2],o=r[e-1],c=r[e-4];n=t[n];s=t[s];o=t[o];c=t[c];n^=a[i];for(let t=0;t<4;++t){r[e]=n^=r[e-16];e++;r[e]=s^=r[e-16];e++;r[e]=o^=r[e-16];e++;r[e]=c^=r[e-16];e++}}return r}}class AES256Cipher extends AESBaseCipher{constructor(e){super();this._cyclesOfRepetition=14;this._keySize=224;this._key=this._expandKey(e)}_expandKey(e){const t=this._s,a=new Uint8Array(240);a.set(e);let r,i,n,s,o=1;for(let e=32,c=1;e<240;++c){if(e%32==16){r=t[r];i=t[i];n=t[n];s=t[s]}else if(e%32==0){r=a[e-3];i=a[e-2];n=a[e-1];s=a[e-4];r=t[r];i=t[i];n=t[n];s=t[s];r^=o;(o<<=1)>=256&&(o=255&(27^o))}for(let t=0;t<4;++t){a[e]=r^=a[e-32];e++;a[e]=i^=a[e-32];e++;a[e]=n^=a[e-32];e++;a[e]=s^=a[e-32];e++}}return a}}class PDFBase{_hash(e,t,a){unreachable("Abstract method `_hash` called")}checkOwnerPassword(e,t,a,r){const i=new Uint8Array(e.length+56);i.set(e,0);i.set(t,e.length);i.set(a,e.length+t.length);return isArrayEqual(this._hash(e,i,a),r)}checkUserPassword(e,t,a){const r=new Uint8Array(e.length+8);r.set(e,0);r.set(t,e.length);return isArrayEqual(this._hash(e,r,[]),a)}getOwnerKey(e,t,a,r){const i=new Uint8Array(e.length+56);i.set(e,0);i.set(t,e.length);i.set(a,e.length+t.length);const n=this._hash(e,i,a);return new AES256Cipher(n).decryptBlock(r,!1,new Uint8Array(16))}getUserKey(e,t,a){const r=new Uint8Array(e.length+8);r.set(e,0);r.set(t,e.length);const i=this._hash(e,r,[]);return new AES256Cipher(i).decryptBlock(a,!1,new Uint8Array(16))}}class PDF17 extends PDFBase{_hash(e,t,a){return calculateSHA256(t,0,t.length)}}class PDF20 extends PDFBase{_hash(e,t,a){let r=calculateSHA256(t,0,t.length).subarray(0,32),i=[0],n=0;for(;n<64||i.at(-1)>n-32;){const t=e.length+r.length+a.length,l=new Uint8Array(t);let h=0;l.set(e,h);h+=e.length;l.set(r,h);h+=r.length;l.set(a,h);const u=new Uint8Array(64*t);for(let e=0,a=0;e<64;e++,a+=t)u.set(l,a);i=new AES128Cipher(r.subarray(0,16)).encrypt(u,r.subarray(16,32));const d=Math.sumPrecise(i.slice(0,16))%3;0===d?r=calculateSHA256(i,0,i.length):1===d?r=(s=i,o=0,c=i.length,calculateSHA512(s,o,c,!0)):2===d&&(r=calculateSHA512(i,0,i.length));n++}var s,o,c;return r.subarray(0,32)}}class CipherTransform{constructor(e,t){this.StringCipherConstructor=e;this.StreamCipherConstructor=t}createStream(e,t){const a=new this.StreamCipherConstructor;return new DecryptStream(e,t,(function cipherTransformDecryptStream(e,t){return a.decryptBlock(e,t)}))}decryptString(e){const t=new this.StringCipherConstructor;let a=stringToBytes(e);a=t.decryptBlock(a,!0);return bytesToString(a)}encryptString(e){const t=new this.StringCipherConstructor;if(t instanceof AESBaseCipher){const a=16-e.length%16;e+=String.fromCharCode(a).repeat(a);const r=new Uint8Array(16);crypto.getRandomValues(r);let i=stringToBytes(e);i=t.encrypt(i,r);const n=new Uint8Array(16+i.length);n.set(r);n.set(i,16);return bytesToString(n)}let a=stringToBytes(e);a=t.encrypt(a);return bytesToString(a)}}class CipherTransformFactory{static get _defaultPasswordBytes(){return shadow(this,"_defaultPasswordBytes",new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]))}#Oe(e,t,a,r,i,n,s,o,c,l,h,u){if(t){const e=Math.min(127,t.length);t=t.subarray(0,e)}else t=[];const d=6===e?new PDF20:new PDF17;return d.checkUserPassword(t,o,s)?d.getUserKey(t,c,h):t.length&&d.checkOwnerPassword(t,r,n,a)?d.getOwnerKey(t,i,n,l):null}#Me(e,t,a,r,i,n,s,o){const c=40+a.length+e.length,l=new Uint8Array(c);let h,u,d=0;if(t){u=Math.min(32,t.length);for(;d<u;++d)l[d]=t[d]}h=0;for(;d<32;)l[d++]=CipherTransformFactory._defaultPasswordBytes[h++];l.set(a,d);d+=a.length;l[d++]=255&i;l[d++]=i>>8&255;l[d++]=i>>16&255;l[d++]=i>>>24&255;l.set(e,d);d+=e.length;if(n>=4&&!o){l.fill(255,d,d+4);d+=4}let f=calculateMD5(l,0,d);const g=s>>3;if(n>=3)for(h=0;h<50;++h)f=calculateMD5(f,0,g);const p=f.subarray(0,g);let m,b;if(n>=3){d=0;l.set(CipherTransformFactory._defaultPasswordBytes,d);d+=32;l.set(e,d);d+=e.length;m=new ARCFourCipher(p);b=m.encryptBlock(calculateMD5(l,0,d));u=p.length;const t=new Uint8Array(u);for(h=1;h<=19;++h){for(let e=0;e<u;++e)t[e]=p[e]^h;m=new ARCFourCipher(t);b=m.encryptBlock(b)}}else{m=new ARCFourCipher(p);b=m.encryptBlock(CipherTransformFactory._defaultPasswordBytes)}return b.every(((e,t)=>r[t]===e))?p:null}#De(e,t,a,r){const i=new Uint8Array(32);let n=0;const s=Math.min(32,e.length);for(;n<s;++n)i[n]=e[n];let o=0;for(;n<32;)i[n++]=CipherTransformFactory._defaultPasswordBytes[o++];let c=calculateMD5(i,0,n);const l=r>>3;if(a>=3)for(o=0;o<50;++o)c=calculateMD5(c,0,c.length);let h,u;if(a>=3){u=t;const e=new Uint8Array(l);for(o=19;o>=0;o--){for(let t=0;t<l;++t)e[t]=c[t]^o;h=new ARCFourCipher(e);u=h.encryptBlock(u)}}else{h=new ARCFourCipher(c.subarray(0,l));u=h.encryptBlock(t)}return u}#Be(e,t,a,r=!1){const i=a.length,n=new Uint8Array(i+9);n.set(a);let s=i;n[s++]=255&e;n[s++]=e>>8&255;n[s++]=e>>16&255;n[s++]=255&t;n[s++]=t>>8&255;if(r){n[s++]=115;n[s++]=65;n[s++]=108;n[s++]=84}return calculateMD5(n,0,s).subarray(0,Math.min(i+5,16))}#Re(e,t,a,r,i){if(!(t instanceof Name))throw new FormatError("Invalid crypt filter name.");const n=this,s=e.get(t.name),o=s?.get("CFM");if(!o||"None"===o.name)return function(){return new NullCipher};if("V2"===o.name)return function(){return new ARCFourCipher(n.#Be(a,r,i,!1))};if("AESV2"===o.name)return function(){return new AES128Cipher(n.#Be(a,r,i,!0))};if("AESV3"===o.name)return function(){return new AES256Cipher(i)};throw new FormatError("Unknown crypto method")}constructor(e,t,a){const r=e.get("Filter");if(!isName(r,"Standard"))throw new FormatError("unknown encryption method");this.filterName=r.name;this.dict=e;const i=e.get("V");if(!Number.isInteger(i)||1!==i&&2!==i&&4!==i&&5!==i)throw new FormatError("unsupported encryption algorithm");this.algorithm=i;let n=e.get("Length");if(!n)if(i<=3)n=40;else{const t=e.get("CF"),a=e.get("StmF");if(t instanceof Dict&&a instanceof Name){t.suppressEncryption=!0;const e=t.get(a.name);n=e?.get("Length")||128;n<40&&(n<<=3)}}if(!Number.isInteger(n)||n<40||n%8!=0)throw new FormatError("invalid key length");const s=stringToBytes(e.get("O")),o=stringToBytes(e.get("U")),c=s.subarray(0,32),l=o.subarray(0,32),h=e.get("P"),u=e.get("R"),d=(4===i||5===i)&&!1!==e.get("EncryptMetadata");this.encryptMetadata=d;const f=stringToBytes(t);let g,p;if(a){if(6===u)try{a=utf8StringToString(a)}catch{warn("CipherTransformFactory: Unable to convert UTF8 encoded password.")}g=stringToBytes(a)}if(5!==i)p=this.#Me(f,g,c,l,h,u,n,d);else{const t=s.subarray(32,40),a=s.subarray(40,48),r=o.subarray(0,48),i=o.subarray(32,40),n=o.subarray(40,48),h=stringToBytes(e.get("OE")),d=stringToBytes(e.get("UE")),f=stringToBytes(e.get("Perms"));p=this.#Oe(u,g,c,t,a,r,l,i,n,h,d,f)}if(!p){if(!a)throw new PasswordException("No password given",ha);const e=this.#De(g,c,u,n);p=this.#Me(f,e,c,l,h,u,n,d)}if(!p)throw new PasswordException("Incorrect Password",ua);if(4===i&&p.length<16){this.encryptionKey=new Uint8Array(16);this.encryptionKey.set(p)}else this.encryptionKey=p;if(i>=4){const t=e.get("CF");t instanceof Dict&&(t.suppressEncryption=!0);this.cf=t;this.stmf=e.get("StmF")||Name.get("Identity");this.strf=e.get("StrF")||Name.get("Identity");this.eff=e.get("EFF")||this.stmf}}createCipherTransform(e,t){if(4===this.algorithm||5===this.algorithm)return new CipherTransform(this.#Re(this.cf,this.strf,e,t,this.encryptionKey),this.#Re(this.cf,this.stmf,e,t,this.encryptionKey));const a=this.#Be(e,t,this.encryptionKey,!1),cipherConstructor=function(){return new ARCFourCipher(a)};return new CipherTransform(cipherConstructor,cipherConstructor)}}class XRef{#Ne=null;constructor(e,t){this.stream=e;this.pdfManager=t;this.entries=[];this._xrefStms=new Set;this._cacheMap=new Map;this._pendingRefs=new RefSet;this._newPersistentRefNum=null;this._newTemporaryRefNum=null;this._persistentRefsCache=null}getNewPersistentRef(e){null===this._newPersistentRefNum&&(this._newPersistentRefNum=this.entries.length||1);const t=this._newPersistentRefNum++;this._cacheMap.set(t,e);return Ref.get(t,0)}getNewTemporaryRef(){if(null===this._newTemporaryRefNum){this._newTemporaryRefNum=this.entries.length||1;if(this._newPersistentRefNum){this._persistentRefsCache=new Map;for(let e=this._newTemporaryRefNum;e<this._newPersistentRefNum;e++){this._persistentRefsCache.set(e,this._cacheMap.get(e));this._cacheMap.delete(e)}}}return Ref.get(this._newTemporaryRefNum++,0)}resetNewTemporaryRef(){this._newTemporaryRefNum=null;if(this._persistentRefsCache)for(const[e,t]of this._persistentRefsCache)this._cacheMap.set(e,t);this._persistentRefsCache=null}setStartXRef(e){this.startXRefQueue=[e]}parse(e=!1){let t,a,r;if(e){warn("Indexing all PDF objects");t=this.indexObjects()}else t=this.readXRef();t.assignXref(this);this.trailer=t;try{a=t.get("Encrypt")}catch(e){if(e instanceof MissingDataException)throw e;warn(`XRef.parse - Invalid "Encrypt" reference: "${e}".`)}if(a instanceof Dict){const e=t.get("ID"),r=e?.length?e[0]:"";a.suppressEncryption=!0;this.encrypt=new CipherTransformFactory(a,r,this.pdfManager.password)}try{r=t.get("Root")}catch(e){if(e instanceof MissingDataException)throw e;warn(`XRef.parse - Invalid "Root" reference: "${e}".`)}if(r instanceof Dict)try{if(r.get("Pages")instanceof Dict){this.root=r;return}}catch(e){if(e instanceof MissingDataException)throw e;warn(`XRef.parse - Invalid "Pages" reference: "${e}".`)}if(!e)throw new XRefParseException;throw new InvalidPDFException("Invalid Root reference.")}processXRefTable(e){"tableState"in this||(this.tableState={entryNum:0,streamPos:e.lexer.stream.pos,parserBuf1:e.buf1,parserBuf2:e.buf2});if(!isCmd(this.readXRefTable(e),"trailer"))throw new FormatError("Invalid XRef table: could not find trailer dictionary");let t=e.getObj();t instanceof Dict||!t.dict||(t=t.dict);if(!(t instanceof Dict))throw new FormatError("Invalid XRef table: could not parse trailer dictionary");delete this.tableState;return t}readXRefTable(e){const t=e.lexer.stream,a=this.tableState;t.pos=a.streamPos;e.buf1=a.parserBuf1;e.buf2=a.parserBuf2;let r;for(;;){if(!("firstEntryNum"in a)||!("entryCount"in a)){if(isCmd(r=e.getObj(),"trailer"))break;a.firstEntryNum=r;a.entryCount=e.getObj()}let i=a.firstEntryNum;const n=a.entryCount;if(!Number.isInteger(i)||!Number.isInteger(n))throw new FormatError("Invalid XRef table: wrong types in subsection header");for(let r=a.entryNum;r<n;r++){a.streamPos=t.pos;a.entryNum=r;a.parserBuf1=e.buf1;a.parserBuf2=e.buf2;const s={};s.offset=e.getObj();s.gen=e.getObj();const o=e.getObj();if(o instanceof Cmd)switch(o.cmd){case"f":s.free=!0;break;case"n":s.uncompressed=!0}if(!Number.isInteger(s.offset)||!Number.isInteger(s.gen)||!s.free&&!s.uncompressed)throw new FormatError(`Invalid entry in XRef subsection: ${i}, ${n}`);0===r&&s.free&&1===i&&(i=0);this.entries[r+i]||(this.entries[r+i]=s)}a.entryNum=0;a.streamPos=t.pos;a.parserBuf1=e.buf1;a.parserBuf2=e.buf2;delete a.firstEntryNum;delete a.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new FormatError("Invalid XRef table: unexpected first object");return r}processXRefStream(e){if(!("streamState"in this)){const{dict:t,pos:a}=e,r=t.get("W"),i=t.get("Index")||[0,t.get("Size")];this.streamState={entryRanges:i,byteWidths:r,entryNum:0,streamPos:a}}this.readXRefStream(e);delete this.streamState;return e.dict}readXRefStream(e){const t=this.streamState;e.pos=t.streamPos;const[a,r,i]=t.byteWidths,n=t.entryRanges;for(;n.length>0;){const[s,o]=n;if(!Number.isInteger(s)||!Number.isInteger(o))throw new FormatError(`Invalid XRef range fields: ${s}, ${o}`);if(!Number.isInteger(a)||!Number.isInteger(r)||!Number.isInteger(i))throw new FormatError(`Invalid XRef entry fields length: ${s}, ${o}`);for(let n=t.entryNum;n<o;++n){t.entryNum=n;t.streamPos=e.pos;let o=0,c=0,l=0;for(let t=0;t<a;++t){const t=e.getByte();if(-1===t)throw new FormatError("Invalid XRef byteWidths \'type\'.");o=o<<8|t}0===a&&(o=1);for(let t=0;t<r;++t){const t=e.getByte();if(-1===t)throw new FormatError("Invalid XRef byteWidths \'offset\'.");c=c<<8|t}for(let t=0;t<i;++t){const t=e.getByte();if(-1===t)throw new FormatError("Invalid XRef byteWidths \'generation\'.");l=l<<8|t}const h={};h.offset=c;h.gen=l;switch(o){case 0:h.free=!0;break;case 1:h.uncompressed=!0;break;case 2:break;default:throw new FormatError(`Invalid XRef entry type: ${o}`)}this.entries[s+n]||(this.entries[s+n]=h)}t.entryNum=0;t.streamPos=e.pos;n.splice(0,2)}}indexObjects(){function readToken(e,t){let a="",r=e[t];for(;10!==r&&13!==r&&60!==r&&!(++t>=e.length);){a+=String.fromCharCode(r);r=e[t]}return a}function skipUntil(e,t,a){const r=a.length,i=e.length;let n=0;for(;t<i;){let i=0;for(;i<r&&e[t+i]===a[i];)++i;if(i>=r)break;t++;n++}return n}const e=/\\b(endobj|\\d+\\s+\\d+\\s+obj|xref|trailer\\s*<<)\\b/g,t=/\\b(startxref|\\d+\\s+\\d+\\s+obj)\\b/g,a=/^(\\d+)\\s+(\\d+)\\s+obj\\b/,r=new Uint8Array([116,114,97,105,108,101,114]),i=new Uint8Array([115,116,97,114,116,120,114,101,102]),n=new Uint8Array([47,88,82,101,102]);this.entries.length=0;this._cacheMap.clear();const s=this.stream;s.pos=0;const o=s.getBytes(),c=bytesToString(o),l=o.length;let h=s.start;const u=[],d=[];for(;h<l;){let f=o[h];if(9===f||10===f||13===f||32===f){++h;continue}if(37===f){do{++h;if(h>=l)break;f=o[h]}while(10!==f&&13!==f);continue}const g=readToken(o,h);let p;if(g.startsWith("xref")&&(4===g.length||/\\s/.test(g[4]))){h+=skipUntil(o,h,r);u.push(h);h+=skipUntil(o,h,i)}else if(p=a.exec(g)){const t=0|p[1],a=0|p[2],r=h+g.length;let i,u=!1;if(this.entries[t]){if(this.entries[t].gen===a)try{new Parser({lexer:new Lexer(s.makeSubStream(r))}).getObj();u=!0}catch(e){e instanceof ParserEOFException?warn(`indexObjects -- checking object (${g}): "${e}".`):u=!0}}else u=!0;u&&(this.entries[t]={offset:h-s.start,gen:a,uncompressed:!0});e.lastIndex=r;const f=e.exec(c);if(f){i=e.lastIndex+1-h;if("endobj"!==f[1]){warn(`indexObjects: Found "${f[1]}" inside of another "obj", caused by missing "endobj" -- trying to recover.`);i-=f[1].length+1}}else i=l-h;const m=o.subarray(h,h+i),b=skipUntil(m,0,n);if(b<i&&m[b+5]<64){d.push(h-s.start);this._xrefStms.add(h-s.start)}h+=i}else if(g.startsWith("trailer")&&(7===g.length||/\\s/.test(g[7]))){u.push(h);const e=h+g.length;let a;t.lastIndex=e;const r=t.exec(c);if(r){a=t.lastIndex+1-h;if("startxref"!==r[1]){warn(`indexObjects: Found "${r[1]}" after "trailer", caused by missing "startxref" -- trying to recover.`);a-=r[1].length+1}}else a=l-h;h+=a}else h+=g.length+1}for(const e of d){this.startXRefQueue.push(e);this.readXRef(!0)}const f=[];let g,p,m=!1;for(const e of u){s.pos=e;const t=new Parser({lexer:new Lexer(s),xref:this,allowStreams:!0,recoveryMode:!0});if(!isCmd(t.getObj(),"trailer"))continue;const a=t.getObj();if(a instanceof Dict){f.push(a);a.has("Encrypt")&&(m=!0)}}for(const e of[...f,"genFallback",...f]){if("genFallback"===e){if(!p)break;this._generationFallback=!0;continue}let t=!1;try{const a=e.get("Root");if(!(a instanceof Dict))continue;const r=a.get("Pages");if(!(r instanceof Dict))continue;const i=r.get("Count");Number.isInteger(i)&&(t=!0)}catch(e){p=e;continue}if(t&&(!m||e.has("Encrypt"))&&e.has("ID"))return e;g=e}if(g)return g;if(this.topDict)return this.topDict;if(!f.length)for(const[e,t]of this.entries.entries()){if(!t)continue;const a=Ref.get(e,t.gen);let r;try{r=this.fetch(a)}catch{continue}r instanceof BaseStream&&(r=r.dict);if(r instanceof Dict&&r.has("Root"))return r}throw new InvalidPDFException("Invalid PDF structure.")}readXRef(e=!1){const t=this.stream,a=new Set;for(;this.startXRefQueue.length;){try{const e=this.startXRefQueue[0];if(a.has(e)){warn("readXRef - skipping XRef table since it was already parsed.");this.startXRefQueue.shift();continue}a.add(e);t.pos=e+t.start;const r=new Parser({lexer:new Lexer(t),xref:this,allowStreams:!0});let i,n=r.getObj();if(isCmd(n,"xref")){i=this.processXRefTable(r);this.topDict||(this.topDict=i);n=i.get("XRefStm");if(Number.isInteger(n)&&!this._xrefStms.has(n)){this._xrefStms.add(n);this.startXRefQueue.push(n);this.#Ne??=n}}else{if(!Number.isInteger(n))throw new FormatError("Invalid XRef stream header");if(!(Number.isInteger(r.getObj())&&isCmd(r.getObj(),"obj")&&(n=r.getObj())instanceof BaseStream))throw new FormatError("Invalid XRef stream");i=this.processXRefStream(n);this.topDict||(this.topDict=i);if(!i)throw new FormatError("Failed to read XRef stream")}n=i.get("Prev");Number.isInteger(n)?this.startXRefQueue.push(n):n instanceof Ref&&this.startXRefQueue.push(n.num)}catch(e){if(e instanceof MissingDataException)throw e;info("(while reading XRef): "+e)}this.startXRefQueue.shift()}if(this.topDict)return this.topDict;if(!e)throw new XRefParseException}get lastXRefStreamPos(){return this.#Ne??(this._xrefStms.size>0?Math.max(...this._xrefStms):null)}getEntry(e){const t=this.entries[e];return t&&!t.free&&t.offset?t:null}fetchIfRef(e,t=!1){return e instanceof Ref?this.fetch(e,t):e}fetch(e,t=!1){if(!(e instanceof Ref))throw new Error("ref object is not a reference");const a=e.num,r=this._cacheMap.get(a);if(void 0!==r){r instanceof Dict&&!r.objId&&(r.objId=e.toString());return r}let i=this.getEntry(a);if(null===i)return i;if(this._pendingRefs.has(e)){this._pendingRefs.remove(e);warn(`Ignoring circular reference: ${e}.`);return ya}this._pendingRefs.put(e);try{i=i.uncompressed?this.fetchUncompressed(e,i,t):this.fetchCompressed(e,i,t);this._pendingRefs.remove(e)}catch(t){this._pendingRefs.remove(e);throw t}i instanceof Dict?i.objId=e.toString():i instanceof BaseStream&&(i.dict.objId=e.toString());return i}fetchUncompressed(e,t,a=!1){const r=e.gen;let i=e.num;if(t.gen!==r){const n=`Inconsistent generation in XRef: ${e}`;if(this._generationFallback&&t.gen<r){warn(n);return this.fetchUncompressed(Ref.get(i,t.gen),t,a)}throw new XRefEntryException(n)}const n=this.stream.makeSubStream(t.offset+this.stream.start),s=new Parser({lexer:new Lexer(n),xref:this,allowStreams:!0}),o=s.getObj(),c=s.getObj(),l=s.getObj();if(o!==i||c!==r||!(l instanceof Cmd))throw new XRefEntryException(`Bad (uncompressed) XRef entry: ${e}`);if("obj"!==l.cmd){if(l.cmd.startsWith("obj")){i=parseInt(l.cmd.substring(3),10);if(!Number.isNaN(i))return i}throw new XRefEntryException(`Bad (uncompressed) XRef entry: ${e}`)}(t=this.encrypt&&!a?s.getObj(this.encrypt.createCipherTransform(i,r)):s.getObj())instanceof BaseStream||this._cacheMap.set(i,t);return t}fetchCompressed(e,t,a=!1){const r=t.offset,i=this.fetch(Ref.get(r,0));if(!(i instanceof BaseStream))throw new FormatError("bad ObjStm stream");const n=i.dict.get("First"),s=i.dict.get("N");if(!Number.isInteger(n)||!Number.isInteger(s))throw new FormatError("invalid first and n parameters for ObjStm stream");let o=new Parser({lexer:new Lexer(i),xref:this,allowStreams:!0});const c=new Array(s),l=new Array(s);for(let e=0;e<s;++e){const t=o.getObj();if(!Number.isInteger(t))throw new FormatError(`invalid object number in the ObjStm stream: ${t}`);const a=o.getObj();if(!Number.isInteger(a))throw new FormatError(`invalid object offset in the ObjStm stream: ${a}`);c[e]=t;const i=this.getEntry(t);i?.offset===r&&i.gen!==e&&(i.gen=e);l[e]=a}const h=(i.start||0)+n,u=new Array(s);for(let e=0;e<s;++e){const t=e<s-1?l[e+1]-l[e]:void 0;if(t<0)throw new FormatError("Invalid offset in the ObjStm stream.");o=new Parser({lexer:new Lexer(i.makeSubStream(h+l[e],t,i.dict)),xref:this,allowStreams:!0});const a=o.getObj();u[e]=a;if(a instanceof BaseStream)continue;const n=c[e],d=this.entries[n];d&&d.offset===r&&d.gen===e&&this._cacheMap.set(n,a)}if(void 0===(t=u[t.gen]))throw new XRefEntryException(`Bad (compressed) XRef entry: ${e}`);return t}async fetchIfRefAsync(e,t){return e instanceof Ref?this.fetchAsync(e,t):e}async fetchAsync(e,t){try{return this.fetch(e,t)}catch(a){if(!(a instanceof MissingDataException))throw a;await this.pdfManager.requestRange(a.begin,a.end);return this.fetchAsync(e,t)}}getCatalogObj(){return this.root}}const yc=[0,0,612,792];class Page{#Ee=null;constructor({pdfManager:e,xref:t,pageIndex:a,pageDict:r,ref:i,globalIdFactory:n,fontCache:s,builtInCMapCache:o,standardFontDataCache:c,globalColorSpaceCache:l,globalImageCache:h,systemFontCache:u,nonBlendModesSet:d,xfaFactory:f}){this.pdfManager=e;this.pageIndex=a;this.pageDict=r;this.xref=t;this.ref=i;this.fontCache=s;this.builtInCMapCache=o;this.standardFontDataCache=c;this.globalColorSpaceCache=l;this.globalImageCache=h;this.systemFontCache=u;this.nonBlendModesSet=d;this.evaluatorOptions=e.evaluatorOptions;this.xfaFactory=f;const g={obj:0};this._localIdFactory=class extends n{static createObjId(){return`p${a}_${++g.obj}`}static getPageObjId(){return`p${i.toString()}`}}}#Pe(e){return new PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalColorSpaceCache:this.globalColorSpaceCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions})}#Le(e,t=!1){const a=getInheritableProperty({dict:this.pageDict,key:e,getArray:t,stopWhenFound:!1});return Array.isArray(a)?1!==a.length&&a[0]instanceof Dict?Dict.merge({xref:this.xref,dictArray:a}):a[0]:a}get content(){return this.pageDict.getArray("Contents")}get resources(){const e=this.#Le("Resources");return shadow(this,"resources",e instanceof Dict?e:Dict.empty)}#je(e){if(this.xfaData)return this.xfaData.bbox;const t=lookupNormalRect(this.#Le(e,!0),null);if(t){if(t[2]-t[0]>0&&t[3]-t[1]>0)return t;warn(`Empty, or invalid, /${e} entry.`)}return null}get mediaBox(){return shadow(this,"mediaBox",this.#je("MediaBox")||yc)}get cropBox(){return shadow(this,"cropBox",this.#je("CropBox")||this.mediaBox)}get userUnit(){const e=this.pageDict.get("UserUnit");return shadow(this,"userUnit","number"==typeof e&&e>0?e:1)}get view(){const{cropBox:e,mediaBox:t}=this;if(e!==t&&!isArrayEqual(e,t)){const a=Util.intersect(e,t);if(a&&a[2]-a[0]>0&&a[3]-a[1]>0)return shadow(this,"view",a);warn("Empty /CropBox and /MediaBox intersection.")}return shadow(this,"view",t)}get rotate(){let e=this.#Le("Rotate")||0;e%90!=0?e=0:e>=360?e%=360:e<0&&(e=(e%360+360)%360);return shadow(this,"rotate",e)}#_e(e,t){if(!this.evaluatorOptions.ignoreErrors)throw e;warn(`getContentStream - ignoring sub-stream (${t}): "${e}".`)}async getContentStream(){const e=await this.pdfManager.ensure(this,"content");return e instanceof BaseStream?e:Array.isArray(e)?new StreamsSequenceStream(e,this.#_e.bind(this)):new NullStream}get xfaData(){return shadow(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}async#Ue(e,t,a){const r=[];for(const i of e)if(i.id){const e=Ref.fromString(i.id);if(!e){warn(`A non-linked annotation cannot be modified: ${i.id}`);continue}if(i.deleted){t.put(e,e);if(i.popupRef){const e=Ref.fromString(i.popupRef);e&&t.put(e,e)}continue}if(i.popup?.deleted){const e=Ref.fromString(i.popupRef);e&&t.put(e,e)}a?.put(e);i.ref=e;r.push(this.xref.fetchAsync(e).then((e=>{e instanceof Dict&&(i.oldAnnotation=e.clone())}),(()=>{warn(`Cannot fetch \\`oldAnnotation\\` for: ${e}.`)})));delete i.id}await Promise.all(r)}async saveNewAnnotations(e,t,a,r,i){if(this.xfaFactory)throw new Error("XFA: Cannot save new annotations.");const n=this.#Pe(e),s=new RefSetCache,o=new RefSet;await this.#Ue(a,s,o);const c=this.pageDict,l=this.annotations.filter((e=>!(e instanceof Ref&&s.has(e)))),h=await AnnotationFactory.saveNewAnnotations(n,t,a,r,i);for(const{ref:e}of h.annotations)e instanceof Ref&&!o.has(e)&&l.push(e);const u=c.clone();u.set("Annots",l);i.put(this.ref,{data:u});for(const e of s)i.put(e,{data:null})}async save(e,t,a,r){const i=this.#Pe(e),n=await this._parsedAnnotations,s=[];for(const e of n)s.push(e.save(i,t,a,r).catch((function(e){warn(`save - ignoring annotation data during "${t.name}" task: "${e}".`);return null})));return Promise.all(s)}async loadResources(e){await(this.#Ee??=this.pdfManager.ensure(this,"resources"));await ObjectLoader.load(this.resources,e,this.xref)}async#Xe(e,t){const a=e?.get("Resources");if(!(a instanceof Dict&&a.size))return this.resources;await ObjectLoader.load(a,t,this.xref);return Dict.merge({xref:this.xref,dictArray:[a,this.resources],mergeSubDicts:!0})}async getOperatorList({handler:e,sink:t,task:a,intent:r,cacheKey:i,annotationStorage:c=null,modifiedIds:d=null}){const g=this.getContentStream(),p=this.loadResources(Ia),m=this.#Pe(e),b=this.xfaFactory?null:getNewAnnotationsMap(c),y=b?.get(this.pageIndex);let w=Promise.resolve(null),x=null;if(y){const e=this.pdfManager.ensureDoc("annotationGlobals");let t;const r=new Set;for(const{bitmapId:e,bitmap:t}of y)!e||t||r.has(e)||r.add(e);const{isOffscreenCanvasSupported:i}=this.evaluatorOptions;if(r.size>0){const e=y.slice();for(const[t,a]of c)t.startsWith(f)&&a.bitmap&&r.has(a.bitmapId)&&e.push(a);t=AnnotationFactory.generateImages(e,this.xref,i)}else t=AnnotationFactory.generateImages(y,this.xref,i);x=new RefSet;w=Promise.all([e,this.#Ue(y,x,null)]).then((([e])=>e?AnnotationFactory.printNewAnnotations(e,m,a,y,t):null))}const S=Promise.all([g,p]).then((async([n])=>{const s=await this.#Xe(n.dict,Ia),o=new OperatorList(r,t);e.send("StartRenderPage",{transparency:m.hasBlendModes(s,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:i});await m.getOperatorList({stream:n,task:a,resources:s,operatorList:o});return o}));let[k,C,v]=await Promise.all([S,this._parsedAnnotations,w]);if(v){C=C.filter((e=>!(e.ref&&x.has(e.ref))));for(let e=0,t=v.length;e<t;e++){const a=v[e];if(a.refToReplace){const r=C.findIndex((e=>e.ref&&isRefsEqual(e.ref,a.refToReplace)));if(r>=0){C.splice(r,1,a);v.splice(e--,1);t--}}}C=C.concat(v)}if(0===C.length||r&h){k.flush(!0);return{length:k.totalLength}}const F=!!(r&l),T=!!(r&u),O=!!(r&n),M=!!(r&s),D=!!(r&o),R=[];for(const e of C)(O||M&&e.mustBeViewed(c,F)&&e.mustBeViewedWhenEditing(T,d)||D&&e.mustBePrinted(c))&&R.push(e.getOperatorList(m,a,r,c).catch((function(e){warn(`getOperatorList - ignoring annotation data during "${a.name}" task: "${e}".`);return{opList:null,separateForm:!1,separateCanvas:!1}})));const N=await Promise.all(R);let E=!1,L=!1;for(const{opList:e,separateForm:t,separateCanvas:a}of N){k.addOpList(e);E||=t;L||=a}k.flush(!0,{form:E,canvas:L});return{length:k.totalLength}}async extractTextContent({handler:e,task:t,includeMarkedContent:a,disableNormalization:r,sink:i,intersector:n=null}){const s=this.getContentStream(),o=this.loadResources(Ta),c=this.pdfManager.ensureCatalog("lang"),[l,,h]=await Promise.all([s,o,c]),u=await this.#Xe(l.dict,Ta);return this.#Pe(e).getTextContent({stream:l,task:t,resources:u,includeMarkedContent:a,disableNormalization:r,sink:i,viewBox:this.view,lang:h,intersector:n})}async getStructTree(){const e=await this.pdfManager.ensureCatalog("structTreeRoot");if(!e)return null;await this._parsedAnnotations;try{const t=await this.pdfManager.ensure(this,"_parseStructTree",[e]);return await this.pdfManager.ensure(t,"serializable")}catch(e){warn(`getStructTree: "${e}".`);return null}}_parseStructTree(e){const t=new StructTreePage(e,this.pageDict);t.parse(this.ref);return t}async getAnnotationsData(e,t,a){const r=await this._parsedAnnotations;if(0===r.length)return r;const i=[],c=[];let l;const h=!!(a&n),u=!!(a&s),d=!!(a&o),f=[];for(const a of r){const r=h||u&&a.viewable;(r||d&&a.printable)&&i.push(a.data);if(a.hasTextContent&&r){l??=this.#Pe(e);c.push(a.extractTextContent(l,t,[-1/0,-1/0,1/0,1/0]).catch((function(e){warn(`getAnnotationsData - ignoring textContent during "${t.name}" task: "${e}".`)})))}else a.overlaysTextContent&&r&&f.push(a)}if(f.length>0){const a=new Intersector(f);c.push(this.extractTextContent({handler:e,task:t,includeMarkedContent:!1,disableNormalization:!1,sink:null,viewBox:this.view,lang:null,intersector:a}).then((()=>{a.setText()})))}await Promise.all(c);return i}get annotations(){const e=this.#Le("Annots");return shadow(this,"annotations",Array.isArray(e)?e:[])}get _parsedAnnotations(){return shadow(this,"_parsedAnnotations",this.pdfManager.ensure(this,"annotations").then((async e=>{if(0===e.length)return e;const[t,a]=await Promise.all([this.pdfManager.ensureDoc("annotationGlobals"),this.pdfManager.ensureDoc("fieldObjects")]);if(!t)return[];const r=a?.orphanFields,i=[];for(const a of e)i.push(AnnotationFactory.create(this.xref,a,t,this._localIdFactory,!1,r,this.ref).catch((function(e){warn(`_parsedAnnotations: "${e}".`);return null})));const n=[];let s,o;for(const e of await Promise.all(i))e&&(e instanceof WidgetAnnotation?(o||=[]).push(e):e instanceof PopupAnnotation?(s||=[]).push(e):n.push(e));o&&n.push(...o);s&&n.push(...s);return n})))}get jsActions(){return shadow(this,"jsActions",collectActions(this.xref,this.pageDict,xe))}}const wc=new Uint8Array([37,80,68,70,45]),xc=new Uint8Array([115,116,97,114,116,120,114,101,102]),Sc=new Uint8Array([101,110,100,111,98,106]);function find(e,t,a=1024,r=!1){const i=t.length,n=e.peekBytes(a),s=n.length-i;if(s<=0)return!1;if(r){const a=i-1;let r=n.length-1;for(;r>=a;){let s=0;for(;s<i&&n[r-s]===t[a-s];)s++;if(s>=i){e.pos+=r-a;return!0}r--}}else{let a=0;for(;a<=s;){let r=0;for(;r<i&&n[a+r]===t[r];)r++;if(r>=i){e.pos+=a;return!0}a++}}return!1}class PDFDocument{#qe=new Map;#He=null;constructor(e,t){if(t.length<=0)throw new InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=e;this.stream=t;this.xref=new XRef(t,e);const a={font:0};this._globalIdFactory=class{static getDocId(){return`g_${e.docId}`}static createFontId(){return"f"+ ++a.font}static createObjId(){unreachable("Abstract method `createObjId` called.")}static getPageObjId(){unreachable("Abstract method `getPageObjId` called.")}}}parse(e){this.xref.parse(e);this.catalog=new Catalog(this.pdfManager,this.xref)}get linearization(){let e=null;try{e=Linearization.create(this.stream)}catch(e){if(e instanceof MissingDataException)throw e;info(e)}return shadow(this,"linearization",e)}get startXRef(){const e=this.stream;let t=0;if(this.linearization){e.reset();if(find(e,Sc)){e.skip(6);let a=e.peekByte();for(;isWhiteSpace(a);){e.pos++;a=e.peekByte()}t=e.pos-e.start}}else{const a=1024,r=xc.length;let i=!1,n=e.end;for(;!i&&n>0;){n-=a-r;n<0&&(n=0);e.pos=n;i=find(e,xc,a,!0)}if(i){e.skip(9);let a;do{a=e.getByte()}while(isWhiteSpace(a));let r="";for(;a>=32&&a<=57;){r+=String.fromCharCode(a);a=e.getByte()}t=parseInt(r,10);isNaN(t)&&(t=0)}}return shadow(this,"startXRef",t)}checkHeader(){const e=this.stream;e.reset();if(!find(e,wc))return;e.moveStart();e.skip(wc.length);let t,a="";for(;(t=e.getByte())>32&&a.length<7;)a+=String.fromCharCode(t);Ca.test(a)?this.#He=a:warn(`Invalid PDF header version: ${a}`)}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let e=0;e=this.catalog.hasActualNumPages?this.catalog.numPages:this.xfaFactory?this.xfaFactory.getNumPages():this.linearization?this.linearization.numPages:this.catalog.numPages;return shadow(this,"numPages",e)}#We(e,t=0){return!!Array.isArray(e)&&e.every((e=>{if(!((e=this.xref.fetchIfRef(e))instanceof Dict))return!1;if(e.has("Kids")){if(++t>10){warn("#hasOnlyDocumentSignatures: maximum recursion depth reached");return!1}return this.#We(e.get("Kids"),t)}const a=isName(e.get("FT"),"Sig"),r=e.get("Rect"),i=Array.isArray(r)&&r.every((e=>0===e));return a&&i}))}#ze(e,t,a=new RefSet){if(Array.isArray(e))for(let r of e){if(r instanceof Ref){if(a.has(r))continue;a.put(r)}r=this.xref.fetchIfRef(r);if(!(r instanceof Dict))continue;if(r.has("Kids")){this.#ze(r.get("Kids"),t,a);continue}if(!isName(r.get("FT"),"Sig"))continue;const e=r.get("V");if(!(e instanceof Dict))continue;const i=e.get("SubFilter");i instanceof Name&&t.add(i.name)}}get _xfaStreams(){const{acroForm:e}=this.catalog;if(!e)return null;const t=e.get("XFA"),a=new Map(["xdp:xdp","template","datasets","config","connectionSet","localeSet","stylesheet","/xdp:xdp"].map((e=>[e,null])));if(t instanceof BaseStream&&!t.isEmpty){a.set("xdp:xdp",t);return a}if(!Array.isArray(t)||0===t.length)return null;for(let e=0,r=t.length;e<r;e+=2){let i;i=0===e?"xdp:xdp":e===r-2?"/xdp:xdp":t[e];if(!a.has(i))continue;const n=this.xref.fetchIfRef(t[e+1]);n instanceof BaseStream&&!n.isEmpty&&a.set(i,n)}return a}get xfaDatasets(){const e=this._xfaStreams;if(!e)return shadow(this,"xfaDatasets",null);for(const t of["datasets","xdp:xdp"]){const a=e.get(t);if(a)try{const e=stringToUTF8String(a.getString());return shadow(this,"xfaDatasets",new DatasetReader({[t]:e}))}catch{warn("XFA - Invalid utf-8 string.");break}}return shadow(this,"xfaDatasets",null)}get xfaData(){const e=this._xfaStreams;if(!e)return null;const t=Object.create(null);for(const[a,r]of e)if(r)try{t[a]=stringToUTF8String(r.getString())}catch{warn("XFA - Invalid utf-8 string.");return null}return t}get xfaFactory(){let e;this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(e=this.xfaData);return shadow(this,"xfaFactory",e?new XFAFactory(e):null)}get isPureXfa(){return!!this.xfaFactory&&this.xfaFactory.isValid()}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async#$e(){const e=await this.pdfManager.ensureCatalog("xfaImages");e&&this.xfaFactory.setImages(e)}async#Ge(e,t){const a=await this.pdfManager.ensureCatalog("acroForm");if(!a)return;const r=await a.getAsync("DR");if(!(r instanceof Dict))return;await ObjectLoader.load(r,["Font"],this.xref);const i=r.get("Font");if(!(i instanceof Dict))return;const n=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions,{useSystemFonts:!1}),{builtInCMapCache:s,fontCache:o,standardFontDataCache:c}=this.catalog,l=new PartialEvaluator({xref:this.xref,handler:e,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:o,builtInCMapCache:s,standardFontDataCache:c,options:n}),h=new OperatorList,u=[],d={get font(){return u.at(-1)},set font(e){u.push(e)},clone(){return this}},parseFont=(e,a,i)=>l.handleSetFont(r,[Name.get(e),1],null,h,t,d,a,i).catch((e=>{warn(`loadXfaFonts: "${e}".`);return null})),f=[];for(const[e,t]of i){const a=t.get("FontDescriptor");if(!(a instanceof Dict))continue;let r=a.get("FontFamily");r=r.replaceAll(/[ ]+(\\d)/g,"$1");const i={fontFamily:r,fontWeight:a.get("FontWeight"),italicAngle:-a.get("ItalicAngle")};validateCSSFont(i)&&f.push(parseFont(e,null,i))}await Promise.all(f);const g=this.xfaFactory.setFonts(u);if(!g)return;n.ignoreErrors=!0;f.length=0;u.length=0;const p=new Set;for(const e of g)getXfaFontName(`${e}-Regular`)||p.add(e);p.size&&g.push("PdfJS-Fallback");for(const e of g)if(!p.has(e))for(const t of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const a=`${e}-${t.name}`;f.push(parseFont(a,getXfaFontDict(a),{fontFamily:e,fontWeight:t.fontWeight,italicAngle:t.italicAngle}))}await Promise.all(f);this.xfaFactory.appendFonts(u,p)}loadXfaResources(e,t){return Promise.all([this.#Ge(e,t).catch((()=>{})),this.#$e()])}serializeXfaData(e){return this.xfaFactory?this.xfaFactory.serializeData(e):null}get version(){return this.catalog.version||this.#He}get formInfo(){const e={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},{acroForm:t}=this.catalog;if(!t)return shadow(this,"formInfo",e);try{const a=t.get("Fields"),r=Array.isArray(a)&&a.length>0;e.hasFields=r;const i=t.get("XFA");e.hasXfa=Array.isArray(i)&&i.length>0||i instanceof BaseStream&&!i.isEmpty;const n=!!(1&t.get("SigFlags")),s=n&&this.#We(a);e.hasAcroForm=r&&!s;e.hasSignatures=n}catch(e){if(e instanceof MissingDataException)throw e;warn(`Cannot fetch form information: "${e}".`)}return shadow(this,"formInfo",e)}get documentInfo(){const{catalog:e,formInfo:t,xref:a}=this,r={PDFFormatVersion:this.version,Language:e.lang,EncryptFilterName:a.encrypt?.filterName??null,IsLinearized:!!this.linearization,IsAcroFormPresent:t.hasAcroForm,IsXFAPresent:t.hasXfa,IsCollectionPresent:!!e.collection,IsSignaturesPresent:t.hasSignatures};let i;try{i=a.trailer.get("Info")}catch(e){if(e instanceof MissingDataException)throw e;info("The document information dictionary is invalid.")}if(!(i instanceof Dict))return shadow(this,"documentInfo",r);for(const[e,t]of i){switch(e){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if("string"==typeof t){r[e]=stringToPDFString(t);continue}break;case"Trapped":if(t instanceof Name){r[e]=t;continue}break;default:let a;switch(typeof t){case"string":a=stringToPDFString(t);break;case"number":case"boolean":a=t;break;default:t instanceof Name&&(a=t)}if(void 0===a){warn(`Bad value, for custom key "${e}", in Info: ${t}.`);continue}r.Custom??=Object.create(null);r.Custom[e]=a;continue}warn(`Bad value, for key "${e}", in Info: ${t}.`)}return shadow(this,"documentInfo",r)}get fingerprints(){const e="\\0".repeat(16);function validate(t){return"string"==typeof t&&16===t.length&&t!==e}const t=this.xref.trailer.get("ID");let a,r;if(Array.isArray(t)&&validate(t[0])){a=stringToBytes(t[0]);t[1]!==t[0]&&validate(t[1])&&(r=stringToBytes(t[1]))}else a=calculateMD5(this.stream.getByteRange(0,1024),0,1024);return shadow(this,"fingerprints",[toHexUtil(a),r?toHexUtil(r):null])}async#Ve(e){const{catalog:t,linearization:a,xref:r}=this,i=Ref.get(a.objectNumberFirst,0);try{const e=await r.fetchAsync(i);if(e instanceof Dict){let a=e.getRaw("Type");a instanceof Ref&&(a=await r.fetchAsync(a));if(isName(a,"Page")||!e.has("Type")&&!e.has("Kids")&&e.has("Contents")){t.pageKidsCountCache.has(i)||t.pageKidsCountCache.put(i,1);t.pageIndexCache.has(i)||t.pageIndexCache.put(i,0);return[e,i]}}throw new FormatError("The Linearization dictionary doesn\'t point to a valid Page dictionary.")}catch(a){warn(`_getLinearizationPage: "${a.message}".`);return t.getPageDict(e)}}getPage(e){const t=this.#qe.get(e);if(t)return t;const{catalog:a,linearization:r,xfaFactory:i}=this;let n;n=i?Promise.resolve([Dict.empty,null]):r?.pageFirst===e?this.#Ve(e):a.getPageDict(e);n=n.then((([t,r])=>new Page({pdfManager:this.pdfManager,xref:this.xref,pageIndex:e,pageDict:t,ref:r,globalIdFactory:this._globalIdFactory,fontCache:a.fontCache,builtInCMapCache:a.builtInCMapCache,standardFontDataCache:a.standardFontDataCache,globalColorSpaceCache:a.globalColorSpaceCache,globalImageCache:a.globalImageCache,systemFontCache:a.systemFontCache,nonBlendModesSet:a.nonBlendModesSet,xfaFactory:i})));this.#qe.set(e,n);return n}async checkFirstPage(e=!1){if(!e)try{await this.getPage(0)}catch(e){if(e instanceof XRefEntryException){this.#qe.delete(0);await this.cleanup();throw new XRefParseException}}}async checkLastPage(e=!1){const{catalog:t,pdfManager:a}=this;t.setActualNumPages();let r;try{await Promise.all([a.ensureDoc("xfaFactory"),a.ensureDoc("linearization"),a.ensureCatalog("numPages")]);if(this.xfaFactory)return;r=this.linearization?this.linearization.numPages:t.numPages;if(!Number.isInteger(r))throw new FormatError("Page count is not an integer.");if(r<=1)return;await this.getPage(r-1)}catch(i){this.#qe.delete(r-1);await this.cleanup();if(i instanceof XRefEntryException&&!e)throw new XRefParseException;warn(`checkLastPage - invalid /Pages tree /Count: ${r}.`);let n;try{n=await t.getAllPageDicts(e)}catch(a){if(a instanceof XRefEntryException&&!e)throw new XRefParseException;t.setActualNumPages(1);return}for(const[e,[r,i]]of n){let n;if(r instanceof Error){n=Promise.reject(r);n.catch((()=>{}))}else n=Promise.resolve(new Page({pdfManager:a,xref:this.xref,pageIndex:e,pageDict:r,ref:i,globalIdFactory:this._globalIdFactory,fontCache:t.fontCache,builtInCMapCache:t.builtInCMapCache,standardFontDataCache:t.standardFontDataCache,globalColorSpaceCache:this.globalColorSpaceCache,globalImageCache:t.globalImageCache,systemFontCache:t.systemFontCache,nonBlendModesSet:t.nonBlendModesSet,xfaFactory:null}));this.#qe.set(e,n)}t.setActualNumPages(n.size)}}async fontFallback(e,t){const{catalog:a,pdfManager:r}=this;for(const i of await Promise.all(a.fontCache))if(i.loadedName===e){i.fallback(t,r.evaluatorOptions);return}}async cleanup(e=!1){return this.catalog?this.catalog.cleanup(e):clearGlobalCaches()}async#Ke(e,t,a,r,i,n,s){const{xref:o}=this;if(!(a instanceof Ref)||n.has(a))return;n.put(a);const c=await o.fetchAsync(a);if(!(c instanceof Dict))return;let l=await c.getAsync("Subtype");l=l instanceof Name?l.name:null;if("Link"===l)return;if(c.has("T")){const t=stringToPDFString(await c.getAsync("T"));e=""===e?t:`${e}.${t}`}else{let a=c;for(;;){a=a.getRaw("Parent")||t;if(a instanceof Ref){if(n.has(a))break;a=await o.fetchAsync(a)}if(!(a instanceof Dict))break;if(a.has("T")){const t=stringToPDFString(await a.getAsync("T"));e=""===e?t:`${e}.${t}`;break}}}t&&!c.has("Parent")&&isName(c.get("Subtype"),"Widget")&&s.put(a,t);r.has(e)||r.set(e,[]);r.get(e).push(AnnotationFactory.create(o,a,i,null,!0,s,null).then((e=>e?.getFieldObject())).catch((function(e){warn(`#collectFieldObjects: "${e}".`);return null})));if(!c.has("Kids"))return;const h=await c.getAsync("Kids");if(Array.isArray(h))for(const t of h)await this.#Ke(e,a,t,r,i,n,s)}get fieldObjects(){return shadow(this,"fieldObjects",this.pdfManager.ensureDoc("formInfo").then((async e=>{if(!e.hasFields)return null;const t=await this.annotationGlobals;if(!t)return null;const{acroForm:a}=t,r=new RefSet,i=Object.create(null),n=new Map,s=new RefSetCache;for(const e of a.get("Fields"))await this.#Ke("",null,e,n,t,r,s);const o=[];for(const[e,t]of n)o.push(Promise.all(t).then((t=>{(t=t.filter((e=>!!e))).length>0&&(i[e]=t)})));await Promise.all(o);return{allFields:objectSize(i)>0?i:null,orphanFields:s}})))}get hasJSActions(){return shadow(this,"hasJSActions",this.pdfManager.ensureDoc("_parseHasJSActions"))}async _parseHasJSActions(){const[e,t]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return!!e||!!t?.allFields&&Object.values(t.allFields).some((e=>e.some((e=>null!==e.actions))))}get calculationOrderIds(){const e=this.catalog.acroForm?.get("CO");if(!Array.isArray(e)||0===e.length)return shadow(this,"calculationOrderIds",null);const t=[];for(const a of e)a instanceof Ref&&t.push(a.toString());return shadow(this,"calculationOrderIds",t.length?t:null)}get annotationGlobals(){return shadow(this,"annotationGlobals",AnnotationFactory.createGlobals(this.pdfManager))}}class BasePdfManager{constructor({docBaseUrl:e,docId:t,enableXfa:a,evaluatorOptions:r,handler:i,password:n}){this._docBaseUrl=function parseDocBaseUrl(e){if(e){const t=createValidAbsoluteUrl(e);if(t)return t.href;warn(`Invalid absolute docBaseUrl: "${e}".`)}return null}(e);this._docId=t;this._password=n;this.enableXfa=a;r.isOffscreenCanvasSupported&&=FeatureTest.isOffscreenCanvasSupported;r.isImageDecoderSupported&&=FeatureTest.isImageDecoderSupported;this.evaluatorOptions=Object.freeze(r);ImageResizer.setOptions(r);JpegStream.setOptions(r);OperatorList.setOptions(r);const s={...r,handler:i};JpxImage.setOptions(s);IccColorSpace.setOptions(s);CmykICCBasedCS.setOptions(s)}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){return this._docBaseUrl}ensureDoc(e,t){return this.ensure(this.pdfDocument,e,t)}ensureXRef(e,t){return this.ensure(this.pdfDocument.xref,e,t)}ensureCatalog(e,t){return this.ensure(this.pdfDocument.catalog,e,t)}getPage(e){return this.pdfDocument.getPage(e)}fontFallback(e,t){return this.pdfDocument.fontFallback(e,t)}cleanup(e=!1){return this.pdfDocument.cleanup(e)}async ensure(e,t,a){unreachable("Abstract method `ensure` called")}requestRange(e,t){unreachable("Abstract method `requestRange` called")}requestLoadedStream(e=!1){unreachable("Abstract method `requestLoadedStream` called")}sendProgressiveData(e){unreachable("Abstract method `sendProgressiveData` called")}updatePassword(e){this._password=e}terminate(e){unreachable("Abstract method `terminate` called")}}class LocalPdfManager extends BasePdfManager{constructor(e){super(e);const t=new Stream(e.source);this.pdfDocument=new PDFDocument(this,t);this._loadedStreamPromise=Promise.resolve(t)}async ensure(e,t,a){const r=e[t];return"function"==typeof r?r.apply(e,a):r}requestRange(e,t){return Promise.resolve()}requestLoadedStream(e=!1){return this._loadedStreamPromise}terminate(e){}}class NetworkPdfManager extends BasePdfManager{constructor(e){super(e);this.streamManager=new ChunkedStreamManager(e.source,{msgHandler:e.handler,length:e.length,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize});this.pdfDocument=new PDFDocument(this,this.streamManager.getStream())}async ensure(e,t,a){try{const r=e[t];return"function"==typeof r?r.apply(e,a):r}catch(r){if(!(r instanceof MissingDataException))throw r;await this.requestRange(r.begin,r.end);return this.ensure(e,t,a)}}requestRange(e,t){return this.streamManager.requestRange(e,t)}requestLoadedStream(e=!1){return this.streamManager.requestAllChunks(e)}sendProgressiveData(e){this.streamManager.onReceiveData({chunk:e})}terminate(e){this.streamManager.abort(e)}}const Ac=1,kc=2,Cc=1,vc=2,Fc=3,Ic=4,Tc=5,Oc=6,Mc=7,Dc=8;function onFn(){}function wrapReason(e){if(e instanceof AbortException||e instanceof InvalidPDFException||e instanceof PasswordException||e instanceof ResponseException||e instanceof UnknownErrorException)return e;e instanceof Error||"object"==typeof e&&null!==e||unreachable(\'wrapReason: Expected "reason" to be a (possibly cloned) Error.\');switch(e.name){case"AbortException":return new AbortException(e.message);case"InvalidPDFException":return new InvalidPDFException(e.message);case"PasswordException":return new PasswordException(e.message,e.code);case"ResponseException":return new ResponseException(e.message,e.status,e.missing);case"UnknownErrorException":return new UnknownErrorException(e.message,e.details)}return new UnknownErrorException(e.message,e.toString())}class MessageHandler{#Je=new AbortController;constructor(e,t,a){this.sourceName=e;this.targetName=t;this.comObj=a;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);a.addEventListener("message",this.#Ye.bind(this),{signal:this.#Je.signal})}#Ye({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#Ze(e);return}if(e.callback){const t=e.callbackId,a=this.callbackCapabilities[t];if(!a)throw new Error(`Cannot resolve callback ${t}`);delete this.callbackCapabilities[t];if(e.callback===Ac)a.resolve(e.data);else{if(e.callback!==kc)throw new Error("Unexpected callback case");a.reject(wrapReason(e.reason))}return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const a=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then((function(t){i.postMessage({sourceName:a,targetName:r,callback:Ac,callbackId:e.callbackId,data:t})}),(function(t){i.postMessage({sourceName:a,targetName:r,callback:kc,callbackId:e.callbackId,reason:wrapReason(t)})}))}else e.streamId?this.#Qe(e):t(e.data)}on(e,t){const a=this.actionHandler;if(a[e])throw new Error(`There is already an actionName called "${e}"`);a[e]=t}send(e,t,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},a)}sendWithPromise(e,t,a){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},a)}catch(e){i.reject(e)}return i.promise}sendWithStream(e,t,a,r){const i=this.streamId++,n=this.sourceName,s=this.targetName,o=this.comObj;return new ReadableStream({start:a=>{const c=Promise.withResolvers();this.streamControllers[i]={controller:a,startCall:c,pullCall:null,cancelCall:null,isClosed:!1};o.postMessage({sourceName:n,targetName:s,action:e,streamId:i,data:t,desiredSize:a.desiredSize},r);return c.promise},pull:e=>{const t=Promise.withResolvers();this.streamControllers[i].pullCall=t;o.postMessage({sourceName:n,targetName:s,stream:Oc,streamId:i,desiredSize:e.desiredSize});return t.promise},cancel:e=>{assert(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();this.streamControllers[i].cancelCall=t;this.streamControllers[i].isClosed=!0;o.postMessage({sourceName:n,targetName:s,stream:Cc,streamId:i,reason:wrapReason(e)});return t.promise}},a)}#Qe(e){const t=e.streamId,a=this.sourceName,r=e.sourceName,i=this.comObj,n=this,s=this.actionHandler[e.action],o={enqueue(e,n=1,s){if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=n;if(o>0&&this.desiredSize<=0){this.sinkCapability=Promise.withResolvers();this.ready=this.sinkCapability.promise}i.postMessage({sourceName:a,targetName:r,stream:Ic,streamId:t,chunk:e},s)},close(){if(!this.isCancelled){this.isCancelled=!0;i.postMessage({sourceName:a,targetName:r,stream:Fc,streamId:t});delete n.streamSinks[t]}},error(e){assert(e instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;i.postMessage({sourceName:a,targetName:r,stream:Tc,streamId:t,reason:wrapReason(e)})}},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve();o.ready=o.sinkCapability.promise;this.streamSinks[t]=o;Promise.try(s,e.data,o).then((function(){i.postMessage({sourceName:a,targetName:r,stream:Dc,streamId:t,success:!0})}),(function(e){i.postMessage({sourceName:a,targetName:r,stream:Dc,streamId:t,reason:wrapReason(e)})}))}#Ze(e){const t=e.streamId,a=this.sourceName,r=e.sourceName,i=this.comObj,n=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case Dc:e.success?n.startCall.resolve():n.startCall.reject(wrapReason(e.reason));break;case Mc:e.success?n.pullCall.resolve():n.pullCall.reject(wrapReason(e.reason));break;case Oc:if(!s){i.postMessage({sourceName:a,targetName:r,stream:Mc,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve();s.desiredSize=e.desiredSize;Promise.try(s.onPull||onFn).then((function(){i.postMessage({sourceName:a,targetName:r,stream:Mc,streamId:t,success:!0})}),(function(e){i.postMessage({sourceName:a,targetName:r,stream:Mc,streamId:t,reason:wrapReason(e)})}));break;case Ic:assert(n,"enqueue should have stream controller");if(n.isClosed)break;n.controller.enqueue(e.chunk);break;case Fc:assert(n,"close should have stream controller");if(n.isClosed)break;n.isClosed=!0;n.controller.close();this.#et(n,t);break;case Tc:assert(n,"error should have stream controller");n.controller.error(wrapReason(e.reason));this.#et(n,t);break;case vc:e.success?n.cancelCall.resolve():n.cancelCall.reject(wrapReason(e.reason));this.#et(n,t);break;case Cc:if(!s)break;const o=wrapReason(e.reason);Promise.try(s.onCancel||onFn,o).then((function(){i.postMessage({sourceName:a,targetName:r,stream:vc,streamId:t,success:!0})}),(function(e){i.postMessage({sourceName:a,targetName:r,stream:vc,streamId:t,reason:wrapReason(e)})}));s.sinkCapability.reject(o);s.isCancelled=!0;delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#et(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]);delete this.streamControllers[t]}destroy(){this.#Je?.abort();this.#Je=null}}async function writeObject(e,t,a,{encrypt:r=null}){const i=r?.createCipherTransform(e.num,e.gen);a.push(`${e.num} ${e.gen} obj\\n`);t instanceof Dict?await writeDict(t,a,i):t instanceof BaseStream?await writeStream(t,a,i):(Array.isArray(t)||ArrayBuffer.isView(t))&&await writeArray(t,a,i);a.push("\\nendobj\\n")}async function writeDict(e,t,a){t.push("<<");for(const r of e.getKeys()){t.push(` /${escapePDFName(r)} `);await writeValue(e.getRaw(r),t,a)}t.push(">>")}async function writeStream(e,t,a){let r=e.getBytes();const{dict:i}=e,[n,s]=await Promise.all([i.getAsync("Filter"),i.getAsync("DecodeParms")]),o=isName(Array.isArray(n)?await i.xref.fetchIfRefAsync(n[0]):n,"FlateDecode");if(r.length>=256||o)try{const e=new CompressionStream("deflate"),t=e.writable.getWriter();await t.ready;t.write(r).then((async()=>{await t.ready;await t.close()})).catch((()=>{}));const a=await new Response(e.readable).arrayBuffer();r=new Uint8Array(a);let c,l;if(n){if(!o){c=Array.isArray(n)?[Name.get("FlateDecode"),...n]:[Name.get("FlateDecode"),n];s&&(l=Array.isArray(s)?[null,...s]:[null,s])}}else c=Name.get("FlateDecode");c&&i.set("Filter",c);l&&i.set("DecodeParms",l)}catch(e){info(`writeStream - cannot compress data: "${e}".`)}let c=bytesToString(r);a&&(c=a.encryptString(c));i.set("Length",c.length);await writeDict(i,t,a);t.push(" stream\\n",c,"\\nendstream")}async function writeArray(e,t,a){t.push("[");let r=!0;for(const i of e){r?r=!1:t.push(" ");await writeValue(i,t,a)}t.push("]")}async function writeValue(e,t,a){if(e instanceof Name)t.push(`/${escapePDFName(e.name)}`);else if(e instanceof Ref)t.push(`${e.num} ${e.gen} R`);else if(Array.isArray(e)||ArrayBuffer.isView(e))await writeArray(e,t,a);else if("string"==typeof e){a&&(e=a.encryptString(e));t.push(`(${escapeString(e)})`)}else"number"==typeof e?t.push(numberToString(e)):"boolean"==typeof e?t.push(e.toString()):e instanceof Dict?await writeDict(e,t,a):e instanceof BaseStream?await writeStream(e,t,a):null===e?t.push("null"):warn(`Unhandled value in writer: ${typeof e}, please file a bug.`)}function writeInt(e,t,a,r){for(let i=t+a-1;i>a-1;i--){r[i]=255&e;e>>=8}return a+t}function writeString(e,t,a){const r=e.length;for(let i=0;i<r;i++)a[t+i]=255&e.charCodeAt(i);return t+r}function updateXFA({xfaData:e,xfaDatasetsRef:t,changes:a,xref:r}){if(null===e){e=function writeXFADataForAcroform(e,t){const a=new SimpleXMLParser({hasAttributes:!0}).parseFromString(e);for(const{xfa:e}of t){if(!e)continue;const{path:t,value:r}=e;if(!t)continue;const i=parseXFAPath(t);let n=a.documentElement.searchNode(i,0);!n&&i.length>1&&(n=a.documentElement.searchNode([i.at(-1)],0));n?n.childNodes=Array.isArray(r)?r.map((e=>new SimpleDOMNode("value",e))):[new SimpleDOMNode("#text",r)]:warn(`Node not found for path: ${t}`)}const r=[];a.documentElement.dump(r);return r.join("")}(r.fetchIfRef(t).getString(),a)}const i=new StringStream(e);i.dict=new Dict(r);i.dict.setIfName("Type","EmbeddedFile");a.put(t,{data:i})}function getIndexes(e){const t=[];for(const{ref:a}of e)a.num===t.at(-2)+t.at(-1)?t[t.length-1]+=1:t.push(a.num,1);return t}function computeIDs(e,t,a){if(Array.isArray(t.fileIds)&&t.fileIds.length>0){const r=function computeMD5(e,t){const a=Math.floor(Date.now()/1e3),r=t.filename||"",i=[a.toString(),r,e.toString(),...t.infoMap.values()],n=Math.sumPrecise(i.map((e=>e.length))),s=new Uint8Array(n);let o=0;for(const e of i)o=writeString(e,o,s);return bytesToString(calculateMD5(s,0,s.length))}(e,t);a.set("ID",[t.fileIds[0],r])}}async function incrementalUpdate({originalData:e,xrefInfo:t,changes:a,xref:r=null,hasXfa:i=!1,xfaDatasetsRef:n=null,hasXfaDatasetsEntry:s=!1,needAppearances:o,acroFormRef:c=null,acroForm:l=null,xfaData:h=null,useXrefStream:u=!1}){await async function updateAcroform({xref:e,acroForm:t,acroFormRef:a,hasXfa:r,hasXfaDatasetsEntry:i,xfaDatasetsRef:n,needAppearances:s,changes:o}){!r||i||n||warn("XFA - Cannot save it");if(!s&&(!r||!n||i))return;const c=t.clone();if(r&&!i){const e=t.get("XFA").slice();e.splice(2,0,"datasets");e.splice(3,0,n);c.set("XFA",e)}s&&c.set("NeedAppearances",!0);o.put(a,{data:c})}({xref:r,acroForm:l,acroFormRef:c,hasXfa:i,hasXfaDatasetsEntry:s,xfaDatasetsRef:n,needAppearances:o,changes:a});i&&updateXFA({xfaData:h,xfaDatasetsRef:n,changes:a,xref:r});const d=function getTrailerDict(e,t,a){const r=new Dict(null);r.set("Prev",e.startXRef);const i=e.newRef;if(a){t.put(i,{data:""});r.set("Size",i.num+1);r.setIfName("Type","XRef")}else r.set("Size",i.num);null!==e.rootRef&&r.set("Root",e.rootRef);null!==e.infoRef&&r.set("Info",e.infoRef);null!==e.encryptRef&&r.set("Encrypt",e.encryptRef);return r}(t,a,u),f=[],g=await async function writeChanges(e,t,a=[]){const r=[];for(const[i,{data:n}]of e.items())if(null!==n&&"string"!=typeof n){await writeObject(i,n,a,t);r.push({ref:i,data:a.join("")});a.length=0}else r.push({ref:i,data:n});return r.sort(((e,t)=>e.ref.num-t.ref.num))}(a,r,f);let p=e.length;const m=e.at(-1);if(10!==m&&13!==m){f.push("\\n");p+=1}for(const{data:e}of g)null!==e&&f.push(e);await(u?async function getXRefStreamTable(e,t,a,r,i){const n=[];let s=0,o=0;for(const{ref:e,data:r}of a){let a;s=Math.max(s,t);if(null!==r){a=Math.min(e.gen,65535);n.push([1,t,a]);t+=r.length}else{a=Math.min(e.gen+1,65535);n.push([0,0,a])}o=Math.max(o,a)}r.set("Index",getIndexes(a));const c=[1,getSizeInBytes(s),getSizeInBytes(o)];r.set("W",c);computeIDs(t,e,r);const l=Math.sumPrecise(c),h=new Uint8Array(l*n.length),u=new Stream(h);u.dict=r;let d=0;for(const[e,t,a]of n){d=writeInt(e,c[0],d,h);d=writeInt(t,c[1],d,h);d=writeInt(a,c[2],d,h)}await writeObject(e.newRef,u,i,{});i.push("startxref\\n",t.toString(),"\\n%%EOF\\n")}(t,p,g,d,f):async function getXRefTable(e,t,a,r,i){i.push("xref\\n");const n=getIndexes(a);let s=0;for(const{ref:e,data:r}of a){if(e.num===n[s]){i.push(`${n[s]} ${n[s+1]}\\n`);s+=2}if(null!==r){i.push(`${t.toString().padStart(10,"0")} ${Math.min(e.gen,65535).toString().padStart(5,"0")} n\\r\\n`);t+=r.length}else i.push(`0000000000 ${Math.min(e.gen+1,65535).toString().padStart(5,"0")} f\\r\\n`)}computeIDs(t,e,r);i.push("trailer\\n");await writeDict(r,i);i.push("\\nstartxref\\n",t.toString(),"\\n%%EOF\\n")}(t,p,g,d,f));const b=e.length+Math.sumPrecise(f.map((e=>e.length))),y=new Uint8Array(b);y.set(e);let w=e.length;for(const e of f)w=writeString(e,w,y);return y}class PDFWorkerStream{constructor(e){this._msgHandler=e;this._contentLength=null;this._fullRequestReader=null;this._rangeRequestReaders=[]}getFullReader(){assert(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once.");this._fullRequestReader=new PDFWorkerStreamReader(this._msgHandler);return this._fullRequestReader}getRangeReader(e,t){const a=new PDFWorkerStreamRangeReader(e,t,this._msgHandler);this._rangeRequestReaders.push(a);return a}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class PDFWorkerStreamReader{constructor(e){this._msgHandler=e;this.onProgress=null;this._contentLength=null;this._isRangeSupported=!1;this._isStreamingSupported=!1;const t=this._msgHandler.sendWithStream("GetReader");this._reader=t.getReader();this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((e=>{this._isStreamingSupported=e.isStreamingSupported;this._isRangeSupported=e.isRangeSupported;this._contentLength=e.contentLength}))}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:e,done:t}=await this._reader.read();return t?{value:void 0,done:!0}:{value:e.buffer,done:!1}}cancel(e){this._reader.cancel(e)}}class PDFWorkerStreamRangeReader{constructor(e,t,a){this._msgHandler=a;this.onProgress=null;const r=this._msgHandler.sendWithStream("GetRangeReader",{begin:e,end:t});this._reader=r.getReader()}get isStreamingSupported(){return!1}async read(){const{value:e,done:t}=await this._reader.read();return t?{value:void 0,done:!0}:{value:e.buffer,done:!1}}cancel(e){this._reader.cancel(e)}}class WorkerTask{constructor(e){this.name=e;this.terminated=!1;this._capability=Promise.withResolvers()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}class WorkerMessageHandler{static{"undefined"==typeof window&&!e&&"undefined"!=typeof self&&"function"==typeof self.postMessage&&"onmessage"in self&&this.initializeFromPort(self)}static setup(e,t){let a=!1;e.on("test",(t=>{if(!a){a=!0;e.send("test",t instanceof Uint8Array)}}));e.on("configure",(e=>{!function setVerbosityLevel(e){Number.isInteger(e)&&(da=e)}(e.verbosity)}));e.on("GetDocRequest",(e=>this.createDocumentHandler(e,t)))}static createDocumentHandler(e,t){let a,r=!1,i=null;const n=new Set,s=getVerbosityLevel(),{docId:o,apiVersion:c}=e,l="5.4.54";if(c!==l)throw new Error(`The API version "${c}" does not match the Worker version "${l}".`);const buildMsg=(e,t)=>`The \\`${e}.prototype\\` contains unexpected enumerable property "${t}", thus breaking e.g. \\`for...in\\` iteration of ${e}s.`;for(const e in{})throw new Error(buildMsg("Object",e));for(const e in[])throw new Error(buildMsg("Array",e));const h=o+"_worker";let u=new MessageHandler(h,o,t);function ensureNotTerminated(){if(r)throw new Error("Worker was terminated")}function startWorkerTask(e){n.add(e)}function finishWorkerTask(e){e.finish();n.delete(e)}async function loadDocument(e){await a.ensureDoc("checkHeader");await a.ensureDoc("parseStartXRef");await a.ensureDoc("parse",[e]);await a.ensureDoc("checkFirstPage",[e]);await a.ensureDoc("checkLastPage",[e]);const t=await a.ensureDoc("isPureXfa");if(t){const e=new WorkerTask("loadXfaResources");startWorkerTask(e);await a.ensureDoc("loadXfaResources",[u,e]);finishWorkerTask(e)}const[r,i]=await Promise.all([a.ensureDoc("numPages"),a.ensureDoc("fingerprints")]);return{numPages:r,fingerprints:i,htmlForXfa:t?await a.ensureDoc("htmlForXfa"):null}}function setupDoc(e){function onSuccess(e){ensureNotTerminated();u.send("GetDoc",{pdfInfo:e})}function onFailure(e){ensureNotTerminated();if(e instanceof PasswordException){const t=new WorkerTask(`PasswordException: response ${e.code}`);startWorkerTask(t);u.sendWithPromise("PasswordRequest",e).then((function({password:e}){finishWorkerTask(t);a.updatePassword(e);pdfManagerReady()})).catch((function(){finishWorkerTask(t);u.send("DocException",e)}))}else u.send("DocException",wrapReason(e))}function pdfManagerReady(){ensureNotTerminated();loadDocument(!1).then(onSuccess,(function(e){ensureNotTerminated();e instanceof XRefParseException?a.requestLoadedStream().then((function(){ensureNotTerminated();loadDocument(!0).then(onSuccess,onFailure)})):onFailure(e)}))}ensureNotTerminated();(async function getPdfManager({data:e,password:t,disableAutoFetch:a,rangeChunkSize:r,length:n,docBaseUrl:s,enableXfa:c,evaluatorOptions:l}){const h={source:null,disableAutoFetch:a,docBaseUrl:s,docId:o,enableXfa:c,evaluatorOptions:l,handler:u,length:n,password:t,rangeChunkSize:r};if(e){h.source=e;return new LocalPdfManager(h)}const d=new PDFWorkerStream(u),f=d.getFullReader(),g=Promise.withResolvers();let p,m=[],b=0;f.headersReady.then((function(){if(f.isRangeSupported){h.source=d;h.length=f.contentLength;h.disableAutoFetch||=f.isStreamingSupported;p=new NetworkPdfManager(h);for(const e of m)p.sendProgressiveData(e);m=[];g.resolve(p);i=null}})).catch((function(e){g.reject(e);i=null}));new Promise((function(e,t){const readChunk=function({value:e,done:a}){try{ensureNotTerminated();if(a){if(!p){const e=arrayBuffersToBytes(m);m=[];n&&e.length!==n&&warn("reported HTTP length is different from actual");h.source=e;p=new LocalPdfManager(h);g.resolve(p)}i=null;return}b+=e.byteLength;f.isStreamingSupported||u.send("DocProgress",{loaded:b,total:Math.max(b,f.contentLength||0)});p?p.sendProgressiveData(e):m.push(e);f.read().then(readChunk,t)}catch(e){t(e)}};f.read().then(readChunk,t)})).catch((function(e){g.reject(e);i=null}));i=e=>{d.cancelAllRequests(e)};return g.promise})(e).then((function(e){if(r){e.terminate(new AbortException("Worker was terminated."));throw new Error("Worker was terminated")}a=e;a.requestLoadedStream(!0).then((e=>{u.send("DataLoaded",{length:e.bytes.byteLength})}))})).then(pdfManagerReady,onFailure)}u.on("GetPage",(function(e){return a.getPage(e.pageIndex).then((function(e){return Promise.all([a.ensure(e,"rotate"),a.ensure(e,"ref"),a.ensure(e,"userUnit"),a.ensure(e,"view")]).then((function([e,t,a,r]){return{rotate:e,ref:t,refStr:t?.toString()??null,userUnit:a,view:r}}))}))}));u.on("GetPageIndex",(function(e){const t=Ref.get(e.num,e.gen);return a.ensureCatalog("getPageIndex",[t])}));u.on("GetDestinations",(function(e){return a.ensureCatalog("destinations")}));u.on("GetDestination",(function(e){return a.ensureCatalog("getDestination",[e.id])}));u.on("GetPageLabels",(function(e){return a.ensureCatalog("pageLabels")}));u.on("GetPageLayout",(function(e){return a.ensureCatalog("pageLayout")}));u.on("GetPageMode",(function(e){return a.ensureCatalog("pageMode")}));u.on("GetViewerPreferences",(function(e){return a.ensureCatalog("viewerPreferences")}));u.on("GetOpenAction",(function(e){return a.ensureCatalog("openAction")}));u.on("GetAttachments",(function(e){return a.ensureCatalog("attachments")}));u.on("GetDocJSActions",(function(e){return a.ensureCatalog("jsActions")}));u.on("GetPageJSActions",(function({pageIndex:e}){return a.getPage(e).then((e=>a.ensure(e,"jsActions")))}));u.on("GetOutline",(function(e){return a.ensureCatalog("documentOutline")}));u.on("GetOptionalContentConfig",(function(e){return a.ensureCatalog("optionalContentConfig")}));u.on("GetPermissions",(function(e){return a.ensureCatalog("permissions")}));u.on("GetMetadata",(function(e){return Promise.all([a.ensureDoc("documentInfo"),a.ensureCatalog("metadata")])}));u.on("GetMarkInfo",(function(e){return a.ensureCatalog("markInfo")}));u.on("GetData",(function(e){return a.requestLoadedStream().then((e=>e.bytes))}));u.on("GetAnnotations",(function({pageIndex:e,intent:t}){return a.getPage(e).then((function(a){const r=new WorkerTask(`GetAnnotations: page ${e}`);startWorkerTask(r);return a.getAnnotationsData(u,r,t).then((e=>{finishWorkerTask(r);return e}),(e=>{finishWorkerTask(r);throw e}))}))}));u.on("GetFieldObjects",(function(e){return a.ensureDoc("fieldObjects").then((e=>e?.allFields||null))}));u.on("HasJSActions",(function(e){return a.ensureDoc("hasJSActions")}));u.on("GetCalculationOrderIds",(function(e){return a.ensureDoc("calculationOrderIds")}));u.on("SaveDocument",(async function({isPureXfa:e,numPages:t,annotationStorage:r,filename:i}){const n=[a.requestLoadedStream(),a.ensureCatalog("acroForm"),a.ensureCatalog("acroFormRef"),a.ensureDoc("startXRef"),a.ensureDoc("xref"),a.ensureDoc("linearization"),a.ensureCatalog("structTreeRoot")],s=new RefSetCache,o=[],c=e?null:getNewAnnotationsMap(r),[l,h,d,f,g,p,m]=await Promise.all(n),b=g.trailer.getRaw("Root")||null;let y;if(c){m?await m.canUpdateStructTree({pdfManager:a,newAnnotationsByPage:c})&&(y=m):await StructTreeRoot.canCreateStructureTree({catalogRef:b,pdfManager:a,newAnnotationsByPage:c})&&(y=null);const e=AnnotationFactory.generateImages(r.values(),g,a.evaluatorOptions.isOffscreenCanvasSupported),t=void 0===y?o:[];for(const[r,i]of c)t.push(a.getPage(r).then((t=>{const a=new WorkerTask(`Save (editor): page ${r}`);startWorkerTask(a);return t.saveNewAnnotations(u,a,i,e,s).finally((function(){finishWorkerTask(a)}))})));null===y?o.push(Promise.all(t).then((async()=>{await StructTreeRoot.createStructureTree({newAnnotationsByPage:c,xref:g,catalogRef:b,pdfManager:a,changes:s})}))):y&&o.push(Promise.all(t).then((async()=>{await y.updateStructureTree({newAnnotationsByPage:c,pdfManager:a,changes:s})})))}if(e)o.push(a.ensureDoc("serializeXfaData",[r]));else for(let e=0;e<t;e++)o.push(a.getPage(e).then((function(t){const a=new WorkerTask(`Save: page ${e}`);startWorkerTask(a);return t.save(u,a,r,s).finally((function(){finishWorkerTask(a)}))})));const w=await Promise.all(o);let x=null;if(e){x=w[0];if(!x)return l.bytes}else if(0===s.size)return l.bytes;const S=d&&h instanceof Dict&&s.values().some((e=>e.needAppearances)),k=h instanceof Dict&&h.get("XFA")||null;let C=null,v=!1;if(Array.isArray(k)){for(let e=0,t=k.length;e<t;e+=2)if("datasets"===k[e]){C=k[e+1];v=!0}null===C&&(C=g.getNewTemporaryRef())}else k&&warn("Unsupported XFA type.");let F=Object.create(null);if(g.trailer){const e=new Map,t=g.trailer.get("Info")||null;if(t instanceof Dict)for(const[a,r]of t)"string"==typeof r&&e.set(a,stringToPDFString(r));F={rootRef:b,encryptRef:g.trailer.getRaw("Encrypt")||null,newRef:g.getNewTemporaryRef(),infoRef:g.trailer.getRaw("Info")||null,infoMap:e,fileIds:g.trailer.get("ID")||null,startXRef:p?f:g.lastXRefStreamPos??f,filename:i}}return incrementalUpdate({originalData:l.bytes,xrefInfo:F,changes:s,xref:g,hasXfa:!!k,xfaDatasetsRef:C,hasXfaDatasetsEntry:v,needAppearances:S,acroFormRef:d,acroForm:h,xfaData:x,useXrefStream:isDict(g.topDict,"XRef")}).finally((()=>{g.resetNewTemporaryRef()}))}));u.on("GetOperatorList",(function(e,t){const r=e.pageIndex;a.getPage(r).then((function(a){const i=new WorkerTask(`GetOperatorList: page ${r}`);startWorkerTask(i);const n=s>=Ae?Date.now():0;a.getOperatorList({handler:u,sink:t,task:i,intent:e.intent,cacheKey:e.cacheKey,annotationStorage:e.annotationStorage,modifiedIds:e.modifiedIds}).then((function(e){finishWorkerTask(i);n&&info(`page=${r+1} - getOperatorList: time=${Date.now()-n}ms, len=${e.length}`);t.close()}),(function(e){finishWorkerTask(i);i.terminated||t.error(e)}))}))}));u.on("GetTextContent",(function(e,t){const{pageIndex:r,includeMarkedContent:i,disableNormalization:n}=e;a.getPage(r).then((function(e){const a=new WorkerTask("GetTextContent: page "+r);startWorkerTask(a);const o=s>=Ae?Date.now():0;e.extractTextContent({handler:u,task:a,sink:t,includeMarkedContent:i,disableNormalization:n}).then((function(){finishWorkerTask(a);o&&info(`page=${r+1} - getTextContent: time=`+(Date.now()-o)+"ms");t.close()}),(function(e){finishWorkerTask(a);a.terminated||t.error(e)}))}))}));u.on("GetStructTree",(function(e){return a.getPage(e.pageIndex).then((e=>a.ensure(e,"getStructTree")))}));u.on("FontFallback",(function(e){return a.fontFallback(e.id,u)}));u.on("Cleanup",(function(e){return a.cleanup(!0)}));u.on("Terminate",(function(e){r=!0;const t=[];if(a){a.terminate(new AbortException("Worker was terminated."));const e=a.cleanup();t.push(e);a=null}else clearGlobalCaches();i?.(new AbortException("Worker was terminated."));for(const e of n){t.push(e.finished);e.terminate()}return Promise.all(t).then((function(){u.destroy();u=null}))}));u.on("Ready",(function(t){setupDoc(e);e=null}));return h}static initializeFromPort(e){const t=new MessageHandler("worker","main",e);this.setup(t,e);t.send("ready",null)}}globalThis.pdfjsWorker={WorkerMessageHandler};export{WorkerMessageHandler};'},Symbol.toStringTag,{value:"Module"}));return An.app=a4,An.start=DE,Object.defineProperty(An,Symbol.toStringTag,{value:"Module"}),An}({});
